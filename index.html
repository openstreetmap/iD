<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <title>iD</title>
        <link rel='stylesheet' href='css/reset.css'>
        <link rel='stylesheet' href='css/map.css'>
        <link rel='stylesheet' href='css/app.css'>
        <meta name='viewport' content='initial-scale=1.0 maximum-scale=1.0'>
    </head>
    <body>
        <div id='map'></div>
        <div id='bar'>
            <button id='place'>
                +&nbsp;Place</button><button id='road'>
                +&nbsp;Road</button><button id='area'>
                +&nbsp;Area</button><button class='mini' id='undo'>
                &larr;</button><button class='mini' id='redo'>
                &rarr;</button><input type='text' id='geocode-location' placeholder='find a place' />
                <div class='zoombuttons'>
                    <button class='zoom-in'>+</button><button class='zoom-out'>&ndash;</button>
                </div>
            </div>

        <div class='inspector-wrap'></div>
        <div id='about'>
            <p>Work in progress: <a href='http://www.geowiki.com/'>introduction</a>,
            <a href='http://github.com/systemed/iD'>code</a>,
            <a href='http://www.geowiki.com/docs'>docs</a>.
            Imagery <a href='http://opengeodata.org/microsoft-imagery-details'>&copy; 2012</a> Bing, GeoEye, Getmapping, Intermap, Microsoft.</p>
        </div>

        <script type='text/javascript' src='js/lib/underscore-min.js'></script>
        <script type='text/javascript' src='js/lib/d3.v2.js'></script>
        <script type='text/javascript' src='js/lib/jxon.js'></script>
        <script type='text/javascript' src='js/lib/uuid.js'></script>

        <script type='text/javascript' src='js/iD/id.js'></script>
        <script type='text/javascript' src='js/iD/Util.js'></script>
        <script type='text/javascript' src='js/iD/renderer/style.js'></script>

        <script type='text/javascript' src='js/iD/renderer/tiles.js'></script>
        <script type='text/javascript' src='js/iD/renderer/Map.js'></script>
        <script type='text/javascript' src='js/iD/renderer/hash.js'></script>
        <script type='text/javascript' src='js/iD/renderer/markers.js'></script>
        <script type='text/javascript' src='js/iD/ui/Inspector.js'></script>

        <script type='text/javascript' src='js/iD/actions/actions.js'></script>
        <script type='text/javascript' src='js/iD/actions/AddPlace.js'></script>

        <script type='text/javascript' src='js/iD/format/GeoJSON.js'></script>
        <script type='text/javascript' src='js/iD/format/XML.js'></script>
        <script type='text/javascript' src='js/iD/graph/Node.js'></script>
        <script type='text/javascript' src='js/iD/graph/Relation.js'></script>
        <script type='text/javascript' src='js/iD/graph/Way.js'></script>
        <script type='text/javascript' src='js/iD/graph/Graph.js'></script>
        <script type='text/javascript' src='js/iD/Connection.js'></script>

        <script type='text/javascript' src='js/iD/UI.js'></script>

        <script>
            var map = iD.Map(document.getElementById('map')).setZoom(18).setCenter({
                lat: 40.7965621,
                lon: -74.4773184
            });

            var m = d3.select('#map');

            iD.Hash().map(map);
            iD.UI.bind();

            iD.controller(map);

            window.onresize = function() {
                map.setSize(m.node().offsetWidth,
                m.node().offsetHeight);
            };

            function grid(resp) {
                map.setCentre({
                    lon: resp.results[0][0].lon,
                    lat: resp.results[0][0].lat
                });
            }

            d3.select('#geocode-location').on('keydown', function() {
                if (d3.event.keyCode !== 13) return;
                d3.event.preventDefault();
                var val = d3.select('#geocode-location').node().value;
                var scr = document.body.appendChild(document.createElement('script'));
                scr.src = 'http://api.tiles.mapbox.com/v3/mapbox/geocode/' +
                encodeURIComponent(val) + '.jsonp?callback=grid';
            });

            d3.select('.zoombuttons .zoom-in').on('click', map.zoomIn);
            d3.select('.zoombuttons .zoom-out').on('click', map.zoomOut);
        </script>
    </body>
</html>
