!function(){var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return commonjsRequire(e,null==t?n.path:t)}},n.exports),n.exports}function getCjsExportFromNamespace(e){return e&&e.default||e}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var isImplemented=function(){var e,t;return"function"==typeof Set&&(e=new Set(["raz","dwa","trzy"]),"[object Set]"===String(e)&&(3===e.size&&("function"==typeof e.add&&("function"==typeof e.clear&&("function"==typeof e.delete&&("function"==typeof e.entries&&("function"==typeof e.forEach&&("function"==typeof e.has&&("function"==typeof e.keys&&("function"==typeof e.values&&(!1===(t=e.values().next()).done&&"raz"===t.value)))))))))))},noop=function(){},_undefined=noop(),isValue=function(e){return e!==_undefined&&null!==e},validValue=function(e){if(!isValue(e))throw new TypeError("Cannot use null or undefined");return e},clear=function(){return validValue(this).length=0,this},isImplemented$1=function(){var e=Number.isNaN;return"function"==typeof e&&(!e({})&&e(NaN)&&!e(34))},shim=function(e){return e!=e},isNan=isImplemented$1()?Number.isNaN:shim,isImplemented$2=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))},shim$1=function(e){return e=Number(e),isNaN(e)||0===e?e:0<e?1:-1},sign=isImplemented$2()?Math.sign:shim$1,abs=Math.abs,floor=Math.floor,toInteger=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?sign(e)*floor(abs(e)):e},max=Math.max,toPosInteger=function(e){return max(0,toInteger(e))},indexOf=Array.prototype.indexOf,objHasOwnProperty=Object.prototype.hasOwnProperty,abs$1=Math.abs,floor$1=Math.floor,eIndexOf=function(e){var t,n,r,i;if(!isNan(e))return indexOf.apply(this,arguments);for(n=toPosInteger(validValue(this).length),r=arguments[1],t=r=isNaN(r)?0:0<=r?floor$1(r):toPosInteger(this.length)-floor$1(abs$1(r));t<n;++t)if(objHasOwnProperty.call(this,t)&&(i=this[t],isNan(i)))return t;return-1},create=Object.create,getPrototypeOf=Object.getPrototypeOf,plainObject={},isImplemented$3=function(){var e=Object.setPrototypeOf;return"function"==typeof e&&getPrototypeOf(e((arguments[0]||create)(null),plainObject))===plainObject},map={function:!0,object:!0},isObject=function(e){return isValue(e)&&map[typeof e]||!1},create$1=Object.create,shim$2;isImplemented$3()||(shim$2=shim$3);var create_1=shim$2&&1===shim$2.level?(I={configurable:(H={},!1),enumerable:(G={},!1),writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){H[e]="__proto__"!==e?I:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(G,H),Object.defineProperty(shim$2,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:G}),function(e,t){return create$1(null===e?G:e,t)}):create$1,G,H,I,objIsPrototypeOf=Object.prototype.isPrototypeOf,defineProperty=Object.defineProperty,nullDesc={configurable:!0,enumerable:!1,writable:!0,value:void 0},validate,validate=function(e,t){if(validValue(e),null===t||isObject(t))return e;throw new TypeError("Prototype must be null or an object")},shim$3=(O=function(){var e,t=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{(e=r.set).call(t,n)}catch(e){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:((t={}).__proto__=n,Object.getPrototypeOf(t)===n&&{level:1})}(),O?(P=2===O.level?O.set?(Q=O.set,function(e,t){return Q.call(validate(e,t),t),e}):function(e,t){return validate(e,t).__proto__=t,e}:function e(t,n){var r;return validate(t,n),(r=objIsPrototypeOf.call(e.nullPolyfill,t))&&delete e.nullPolyfill.__proto__,null===n&&(n=e.nullPolyfill),t.__proto__=n,r&&defineProperty(e.nullPolyfill,"__proto__",nullDesc),t},Object.defineProperty(P,"level",{configurable:!1,enumerable:!1,writable:!1,value:O.level})):null),O,P,Q,setPrototypeOf=isImplemented$3()?Object.setPrototypeOf:shim$3,validCallable=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},_undefined$1=void 0,is=function(e){return e!==_undefined$1&&null!==e},possibleTypes={object:!0,function:!0,undefined:!0},is$1=function(e){return!!is(e)&&hasOwnProperty.call(possibleTypes,typeof e)},is$2=function(e){if(!is$1(e))return!1;try{return e.constructor?e.constructor.prototype===e:!1}catch(e){return!1}},is$3=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!is$2(e)},classRe=/^\s*class[\s{/}]/,functionToString=Function.prototype.toString,is$4=function(e){return!!is$3(e)&&!classRe.test(functionToString.call(e))},isImplemented$4=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},isImplemented$5=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}},keys=Object.keys,shim$4=function(e){return keys(isValue(e)?Object(e):e)},keys$1=isImplemented$5()?Object.keys:shim$4,max$1=Math.max,shim$5=function(t,n){var r,e,i,o=arguments,a=max$1(arguments.length,2);for(t=Object(validValue(t)),i=function(e){try{t[e]=n[e]}catch(e){r=r||e}},e=1;e<a;++e)keys$1(n=o[e]).forEach(i);if(void 0!==r)throw r;return t},assign=isImplemented$4()?Object.assign:shim$5,forEach=Array.prototype.forEach,create$2=Object.create,process$1=function(e,t){var n;for(n in e)t[n]=e[n]},normalizeOptions=function(e){var t=create$2(null);return forEach.call(arguments,function(e){isValue(e)&&process$1(Object(e),t)}),t},str="razdwatrzy",isImplemented$6=function(){return"function"==typeof str.contains&&(!0===str.contains("dwa")&&!1===str.contains("foo"))},indexOf$1=String.prototype.indexOf,shim$6=function(e){return-1<indexOf$1.call(this,e,arguments[1])},contains=isImplemented$6()?String.prototype.contains:shim$6,d_1=createCommonjsModule(function(e){(e.exports=function(e,t){var n,r,i,o,a;return arguments.length<2||"string"!=typeof e?(o=t,t=e,e=null):o=arguments[2],is(e)?(n=contains.call(e,"c"),r=contains.call(e,"e"),i=contains.call(e,"w")):r=!(n=i=!0),a={value:t,configurable:n,enumerable:r,writable:i},o?assign(normalizeOptions(o),a):a}).gs=function(e,t,n){var r,i,o,a;return"string"!=typeof e?(o=n,n=t,t=e,e=null):o=arguments[3],is(t)?is$4(t)?is(n)?is$4(n)||(o=n,n=void 0):n=void 0:(o=t,t=n=void 0):t=void 0,i=is(e)?(r=contains.call(e,"c"),contains.call(e,"e")):!(r=!0),a={get:t,set:n,configurable:r,enumerable:i},o?assign(normalizeOptions(o),a):a}}),eventEmitter=createCommonjsModule(function(e,t){var s=Function.prototype.apply,l=Function.prototype.call,r=Object.create,i=Object.defineProperty,n=Object.defineProperties,c=Object.prototype.hasOwnProperty,o={configurable:!0,enumerable:!1,writable:!0},a=function(e,t){var n;return validCallable(t),c.call(this,"__ee__")?n=this.__ee__:(n=o.value=r(null),i(this,"__ee__",o),o.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},u=function(e,t){var n,r;return validCallable(t),a.call(r=this,e,n=function(){p.call(r,e,n),s.call(t,this,arguments)}),n.__eeOnceListener__=t,this},p=function(e,t){var n,r,i,o;if(validCallable(t),!c.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==typeof(r=n[e]))for(o=0;i=r[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},d=function(e){var t,n,r,i,o,a=arguments;if(c.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=a[t];for(i=i.slice(),t=0;r=i[t];++t)s.call(r,this,o)}else switch(arguments.length){case 1:l.call(i,this);break;case 2:l.call(i,this,arguments[1]);break;case 3:l.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=a[t];s.call(i,this,o)}},f={on:a,once:u,off:p,emit:d},h={on:d_1(a),once:d_1(u),off:d_1(p),emit:d_1(d)},g=n({},h);e.exports=t=function(e){return null==e?r(g):n(Object(e),h)},t.methods=f}),validTypes={object:!0,symbol:!0},isImplemented$7=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!validTypes[typeof Symbol.iterator]&&(!!validTypes[typeof Symbol.toPrimitive]&&!!validTypes[typeof Symbol.toStringTag])},isSymbol=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))},validateSymbol=function(e){if(!isSymbol(e))throw new TypeError(e+" is not a symbol");return e},create$3=Object.create,defineProperties=Object.defineProperties,defineProperty$1=Object.defineProperty,objPrototype=Object.prototype,NativeSymbol,SymbolPolyfill,HiddenSymbol,globalSymbols=create$3(null),isNativeSafe;if("function"==typeof Symbol){NativeSymbol=Symbol;try{String(NativeSymbol()),isNativeSafe=!0}catch(e){}}var generateName=(Ib=create$3(null),function(e){for(var t,n,r=0;Ib[e+(r||"")];)++r;return Ib[e+=r||""]=!0,defineProperty$1(objPrototype,t="@@"+e,d_1.gs(null,function(e){n||(n=!0,defineProperty$1(this,t,d_1(e)),n=!1)})),t}),Ib,HiddenSymbol=function(e){if(this instanceof HiddenSymbol)throw new TypeError("Symbol is not a constructor");return SymbolPolyfill(e)},polyfill=SymbolPolyfill=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return isNativeSafe?NativeSymbol(t):(n=create$3(HiddenSymbol.prototype),t=void 0===t?"":String(t),defineProperties(n,{__description__:d_1("",t),__name__:d_1("",generateName(t))}))};defineProperties(SymbolPolyfill,{for:d_1(function(e){return globalSymbols[e]?globalSymbols[e]:globalSymbols[e]=SymbolPolyfill(String(e))}),keyFor:d_1(function(e){var t;for(t in validateSymbol(e),globalSymbols)if(globalSymbols[t]===e)return t}),hasInstance:d_1("",NativeSymbol&&NativeSymbol.hasInstance||SymbolPolyfill("hasInstance")),isConcatSpreadable:d_1("",NativeSymbol&&NativeSymbol.isConcatSpreadable||SymbolPolyfill("isConcatSpreadable")),iterator:d_1("",NativeSymbol&&NativeSymbol.iterator||SymbolPolyfill("iterator")),match:d_1("",NativeSymbol&&NativeSymbol.match||SymbolPolyfill("match")),replace:d_1("",NativeSymbol&&NativeSymbol.replace||SymbolPolyfill("replace")),search:d_1("",NativeSymbol&&NativeSymbol.search||SymbolPolyfill("search")),species:d_1("",NativeSymbol&&NativeSymbol.species||SymbolPolyfill("species")),split:d_1("",NativeSymbol&&NativeSymbol.split||SymbolPolyfill("split")),toPrimitive:d_1("",NativeSymbol&&NativeSymbol.toPrimitive||SymbolPolyfill("toPrimitive")),toStringTag:d_1("",NativeSymbol&&NativeSymbol.toStringTag||SymbolPolyfill("toStringTag")),unscopables:d_1("",NativeSymbol&&NativeSymbol.unscopables||SymbolPolyfill("unscopables"))}),defineProperties(HiddenSymbol.prototype,{constructor:d_1(SymbolPolyfill),toString:d_1("",function(){return this.__name__})}),defineProperties(SymbolPolyfill.prototype,{toString:d_1(function(){return"Symbol ("+validateSymbol(this).__description__+")"}),valueOf:d_1(function(){return validateSymbol(this)})}),defineProperty$1(SymbolPolyfill.prototype,SymbolPolyfill.toPrimitive,d_1("",function(){var e=validateSymbol(this);return"symbol"==typeof e?e:e.toString()})),defineProperty$1(SymbolPolyfill.prototype,SymbolPolyfill.toStringTag,d_1("c","Symbol")),defineProperty$1(HiddenSymbol.prototype,SymbolPolyfill.toStringTag,d_1("c",SymbolPolyfill.prototype[SymbolPolyfill.toStringTag])),defineProperty$1(HiddenSymbol.prototype,SymbolPolyfill.toPrimitive,d_1("c",SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive]));var es6Symbol=isImplemented$7()?Symbol:polyfill,objToString=Object.prototype.toString,id=objToString.call(function(){return arguments}()),isArguments=function(e){return objToString.call(e)===id},objToString$1=Object.prototype.toString,id$1=objToString$1.call(""),isString=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||objToString$1.call(e)===id$1)||!1},isImplemented$8=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)},naiveFallback=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")},implementation=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return naiveFallback()}try{return __global__?__global__:naiveFallback()}finally{delete Object.prototype.__global__}}(),globalThis_1=isImplemented$8()?globalThis:implementation,validTypes$1={object:!0,symbol:!0},isImplemented$9=function(){var e,t=globalThis_1.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!validTypes$1[typeof t.iterator]&&(!!validTypes$1[typeof t.toPrimitive]&&!!validTypes$1[typeof t.toStringTag])},isSymbol$1=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))},validateSymbol$1=function(e){if(!isSymbol$1(e))throw new TypeError(e+" is not a symbol");return e},create$4=Object.create,defineProperty$2=Object.defineProperty,objPrototype$1=Object.prototype,created=create$4(null),generateName$1=function(e){for(var t,n,r=0;created[e+(r||"")];)++r;return created[e+=r||""]=!0,defineProperty$2(objPrototype$1,t="@@"+e,d_1.gs(null,function(e){n||(n=!0,defineProperty$2(this,t,d_1(e)),n=!1)})),t},NativeSymbol$1=globalThis_1.Symbol,standardSymbols=function(e){return Object.defineProperties(e,{hasInstance:d_1("",NativeSymbol$1&&NativeSymbol$1.hasInstance||e("hasInstance")),isConcatSpreadable:d_1("",NativeSymbol$1&&NativeSymbol$1.isConcatSpreadable||e("isConcatSpreadable")),iterator:d_1("",NativeSymbol$1&&NativeSymbol$1.iterator||e("iterator")),match:d_1("",NativeSymbol$1&&NativeSymbol$1.match||e("match")),replace:d_1("",NativeSymbol$1&&NativeSymbol$1.replace||e("replace")),search:d_1("",NativeSymbol$1&&NativeSymbol$1.search||e("search")),species:d_1("",NativeSymbol$1&&NativeSymbol$1.species||e("species")),split:d_1("",NativeSymbol$1&&NativeSymbol$1.split||e("split")),toPrimitive:d_1("",NativeSymbol$1&&NativeSymbol$1.toPrimitive||e("toPrimitive")),toStringTag:d_1("",NativeSymbol$1&&NativeSymbol$1.toStringTag||e("toStringTag")),unscopables:d_1("",NativeSymbol$1&&NativeSymbol$1.unscopables||e("unscopables"))})},registry=Object.create(null),symbolRegistry=function(t){return Object.defineProperties(t,{for:d_1(function(e){return registry[e]?registry[e]:registry[e]=t(String(e))}),keyFor:d_1(function(e){var t;for(t in validateSymbol$1(e),registry)if(registry[t]===e)return t})})},NativeSymbol$2=globalThis_1.Symbol,create$5=Object.create,defineProperties$1=Object.defineProperties,defineProperty$3=Object.defineProperty,SymbolPolyfill$1,HiddenSymbol$1,isNativeSafe$1;if("function"==typeof NativeSymbol$2)try{String(NativeSymbol$2()),isNativeSafe$1=!0}catch(e){}else NativeSymbol$2=null;HiddenSymbol$1=function(e){if(this instanceof HiddenSymbol$1)throw new TypeError("Symbol is not a constructor");return SymbolPolyfill$1(e)};var polyfill$1=SymbolPolyfill$1=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return isNativeSafe$1?NativeSymbol$2(t):(n=create$5(HiddenSymbol$1.prototype),t=void 0===t?"":String(t),defineProperties$1(n,{__description__:d_1("",t),__name__:d_1("",generateName$1(t))}))};standardSymbols(SymbolPolyfill$1),symbolRegistry(SymbolPolyfill$1),defineProperties$1(HiddenSymbol$1.prototype,{constructor:d_1(SymbolPolyfill$1),toString:d_1("",function(){return this.__name__})}),defineProperties$1(SymbolPolyfill$1.prototype,{toString:d_1(function(){return"Symbol ("+validateSymbol$1(this).__description__+")"}),valueOf:d_1(function(){return validateSymbol$1(this)})}),defineProperty$3(SymbolPolyfill$1.prototype,SymbolPolyfill$1.toPrimitive,d_1("",function(){var e=validateSymbol$1(this);return"symbol"==typeof e?e:e.toString()})),defineProperty$3(SymbolPolyfill$1.prototype,SymbolPolyfill$1.toStringTag,d_1("c","Symbol")),defineProperty$3(HiddenSymbol$1.prototype,SymbolPolyfill$1.toStringTag,d_1("c",SymbolPolyfill$1.prototype[SymbolPolyfill$1.toStringTag])),defineProperty$3(HiddenSymbol$1.prototype,SymbolPolyfill$1.toPrimitive,d_1("c",SymbolPolyfill$1.prototype[SymbolPolyfill$1.toPrimitive]));var es6Symbol$1=isImplemented$9()?globalThis_1.Symbol:polyfill$1,iteratorSymbol=es6Symbol$1.iterator,isArray=Array.isArray,isIterable=function(e){return!!isValue(e)&&(!!isArray(e)||(!!isString(e)||(!!isArguments(e)||"function"==typeof e[iteratorSymbol])))},validIterable=function(e){if(!isIterable(e))throw new TypeError(e+" is not iterable");return e},objectToString=Object.prototype.toString,coerce=function(e){if(!is(e))return null;if(is$1(e)){var t=e.toString;if("function"!=typeof t)return null;if(t===objectToString)return null}try{return""+e}catch(e){return null}},safeToString=function(t){try{return t.toString()}catch(e){try{return String(t)}catch(e){return null}}},reNewLine=/[\n\r\u2028\u2029]/g,toShortString=function(e){var t=safeToString(e);return null===t?"<Non-coercible to string value>":(100<t.length&&(t=t.slice(0,99)+"…"),t=t.replace(reNewLine,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))},resolveMessage=function(e,t){return e.replace("%v",toShortString(t))},resolveException=function(e,t,n){if(!is$1(n))throw new TypeError(resolveMessage(t,e));if(!is(e)){if("default"in n)return n.default;if(n.isOptional)return null}var r=coerce(n.errorMessage);throw is(r)||(r=t),new TypeError(resolveMessage(r,e))},ensure=function(e){return is(e)?e:resolveException(e,"Cannot use %v",arguments[1])},ensure$1=function(e){return is$4(e)?e:resolveException(e,"%v is not a plain function",arguments[1])},isImplemented$a=function(){var e,t,n=Array.from;return"function"==typeof n&&(t=n(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))},objToString$2=Object.prototype.toString,isFunctionStringTag=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/),isFunction=function(e){return"function"==typeof e&&isFunctionStringTag(objToString$2.call(e))},iteratorSymbol$1=es6Symbol$1.iterator,isArray$1=Array.isArray,call=Function.prototype.call,desc={configurable:!0,enumerable:!0,writable:!0,value:null},defineProperty$4=Object.defineProperty,shim$7=function(e){var t,n,r,i,o,a,s,l,c,u,p=arguments[1],d=arguments[2];if(e=Object(validValue(e)),isValue(p)&&validCallable(p),this&&this!==Array&&isFunction(this))t=this;else{if(!p){if(isArguments(e))return 1!==(o=e.length)?Array.apply(null,e):((i=new Array(1))[0]=e[0],i);if(isArray$1(e)){for(i=new Array(o=e.length),n=0;n<o;++n)i[n]=e[n];return i}}i=[]}if(!isArray$1(e))if(void 0!==(c=e[iteratorSymbol$1])){for(s=validCallable(c).call(e),t&&(i=new t),l=s.next(),n=0;!l.done;)u=p?call.call(p,d,l.value,n):l.value,t?(desc.value=u,defineProperty$4(i,n,desc)):i[n]=u,l=s.next(),++n;o=n}else if(isString(e)){for(o=e.length,t&&(i=new t),r=n=0;n<o;++n)u=e[n],n+1<o&&55296<=(a=u.charCodeAt(0))&&a<=56319&&(u+=e[++n]),u=p?call.call(p,d,u,r):u,t?(desc.value=u,defineProperty$4(i,r,desc)):i[r]=u,++r;o=r}if(void 0===o)for(o=toPosInteger(e.length),t&&(i=new t(o)),n=0;n<o;++n)u=p?call.call(p,d,e[n],n):e[n],t?(desc.value=u,defineProperty$4(i,n,desc)):i[n]=u;return t&&(desc.value=null,i.length=o),i},from_1=isImplemented$a()?Array.from:shim$7,copy=function(t){var e=Object(validValue(t)),n=arguments[1],r=Object(arguments[2]);if(e!==t&&!n)return e;var i={};return n?from_1(n,function(e){(r.ensure||e in t)&&(i[e]=t[e])}):assign(i,t),i},bind=Function.prototype.bind,call$1=Function.prototype.call,keys$2=Object.keys,objPropertyIsEnumerable=Object.prototype.propertyIsEnumerable,_iterate=function(o,a){return function(n,r){var e,i=arguments[2],t=arguments[3];return n=Object(validValue(n)),validCallable(r),e=keys$2(n),t&&e.sort("function"==typeof t?bind.call(t,n):void 0),"function"!=typeof o&&(o=e[o]),call$1.call(o,e,function(e,t){return objPropertyIsEnumerable.call(n,e)?call$1.call(r,i,n[e],e,n,t):a})}},forEach$1=_iterate("forEach"),call$2=Function.prototype.call,map$1=function(e,i){var o={},a=arguments[2];return validCallable(i),forEach$1(e,function(e,t,n,r){o[t]=call$2.call(i,a,e,t,n,r)}),o},bind$1=Function.prototype.bind,defineProperty$5=Object.defineProperty,hasOwnProperty$1=Object.prototype.hasOwnProperty,define,define=function(e,t,n){var r=ensure(t)&&ensure$1(t.value),i=copy(t);return delete i.writable,delete i.value,i.get=function(){return!n.overwriteDefinition&&hasOwnProperty$1.call(this,e)?r:(t.value=bind$1.call(r,n.resolveContext?n.resolveContext(this):this),defineProperty$5(this,e,t),this[e])},i},autoBind=function(e){var n=normalizeOptions(arguments[1]);return is(n.resolveContext)&&ensure$1(n.resolveContext),map$1(e,function(e,t){return define(t,e,n)})},defineProperty$6=Object.defineProperty,defineProperties$2=Object.defineProperties,Iterator,es6Iterator=Iterator=function(e,t){if(!(this instanceof Iterator))throw new TypeError("Constructor requires 'new'");defineProperties$2(this,{__list__:d_1("w",validValue(e)),__context__:d_1("w",t),__nextIndex__:d_1("w",0)}),t&&(validCallable(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))};delete Iterator.prototype.constructor,defineProperties$2(Iterator.prototype,assign({_next:d_1(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:d_1(function(){return this._createResult(this._next())}),_createResult:d_1(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:d_1(function(e){return this.__list__[e]}),_unBind:d_1(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:d_1(function(){return"[object "+(this[es6Symbol$1.toStringTag]||"Object")+"]"})},autoBind({_onAdd:d_1(function(n){n>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(e,t){n<=e&&(this.__redo__[t]=++e)},this),this.__redo__.push(n)):defineProperty$6(this,"__redo__",d_1("c",[n])))}),_onDelete:d_1(function(n){var e;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(e=this.__redo__.indexOf(n))&&this.__redo__.splice(e,1),this.__redo__.forEach(function(e,t){n<e&&(this.__redo__[t]=--e)},this)))}),_onClear:d_1(function(){this.__redo__&&clear.call(this.__redo__),this.__nextIndex__=0})}))),defineProperty$6(Iterator.prototype,es6Symbol$1.iterator,d_1(function(){return this}));var array=createCommonjsModule(function(e){var n=Object.defineProperty,r=e.exports=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");es6Iterator.call(this,e),t=t?contains.call(t,"key+value")?"key+value":contains.call(t,"key")?"key":"value":"value",n(this,"__kind__",d_1("",t))};setPrototypeOf&&setPrototypeOf(r,es6Iterator),delete r.prototype.constructor,r.prototype=Object.create(es6Iterator.prototype,{_resolve:d_1(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),n(r.prototype,es6Symbol$1.toStringTag,d_1("c","Array Iterator"))}),string=createCommonjsModule(function(e){var t=Object.defineProperty,n=e.exports=function(e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");e=String(e),es6Iterator.call(this,e),t(this,"__length__",d_1("",e.length))};setPrototypeOf&&setPrototypeOf(n,es6Iterator),delete n.prototype.constructor,n.prototype=Object.create(es6Iterator.prototype,{_next:d_1(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:d_1(function(e){var t,n=this.__list__[e];return this.__nextIndex__!==this.__length__&&55296<=(t=n.charCodeAt(0))&&t<=56319?n+this.__list__[this.__nextIndex__++]:n})}),t(n.prototype,es6Symbol$1.toStringTag,d_1("c","String Iterator"))}),iteratorSymbol$2=es6Symbol$1.iterator,get=function(e){return"function"==typeof validIterable(e)[iteratorSymbol$2]?e[iteratorSymbol$2]():new(!isArguments(e)&&isString(e)?string:array)(e)},isArray$2=Array.isArray,call$3=Function.prototype.call,some=Array.prototype.some,forOf=function(e,t){var n,r,i,o,a,s,l,c,u=arguments[2];if(isArray$2(e)||isArguments(e)?n="array":isString(e)?n="string":e=get(e),validCallable(t),i=function(){o=!0},"array"!==n)if("string"!==n)for(r=e.next();!r.done;){if(call$3.call(t,u,r.value,i),o)return;r=e.next()}else for(s=e.length,a=0;a<s&&(l=e[a],a+1<s&&55296<=(c=l.charCodeAt(0))&&c<=56319&&(l+=e[++a]),call$3.call(t,u,l,i),!o);++a);else some.call(e,function(e){return call$3.call(t,u,e,i),o})},iterator=createCommonjsModule(function(e){var t=es6Symbol.toStringTag,n=Object.defineProperty,r=e.exports=function(e,t){if(!(this instanceof r))return new r(e,t);es6Iterator.call(this,e.__setData__,e),t=t&&contains.call(t,"key+value")?"key+value":"value",n(this,"__kind__",d_1("",t))};setPrototypeOf&&setPrototypeOf(r,es6Iterator),r.prototype=Object.create(es6Iterator.prototype,{constructor:d_1(r),_resolve:d_1(function(e){return"value"===this.__kind__?this.__list__[e]:[this.__list__[e],this.__list__[e]]}),toString:d_1(function(){return"[object Set Iterator]"})}),n(r.prototype,t,d_1("c","Set Iterator"))}),isNativeImplemented="undefined"!=typeof Set&&"[object Set]"===Object.prototype.toString.call(Set.prototype),iterator$1=validIterable,call$4=Function.prototype.call,defineProperty$7=Object.defineProperty,getPrototypeOf$1=Object.getPrototypeOf,SetPoly,getValues,NativeSet;isNativeImplemented&&(NativeSet=Set);var polyfill$2=SetPoly=function(e){var t,n=e;if(!(this instanceof SetPoly))throw new TypeError("Constructor requires 'new'");return t=isNativeImplemented&&setPrototypeOf?setPrototypeOf(new NativeSet,getPrototypeOf$1(this)):this,null!=n&&iterator$1(n),defineProperty$7(t,"__setData__",d_1("c",[])),n&&forOf(n,function(e){-1===eIndexOf.call(this,e)&&this.push(e)},t.__setData__),t};isNativeImplemented&&(setPrototypeOf&&setPrototypeOf(SetPoly,NativeSet),SetPoly.prototype=Object.create(NativeSet.prototype,{constructor:d_1(SetPoly)})),eventEmitter(Object.defineProperties(SetPoly.prototype,{add:d_1(function(e){return this.has(e)||this.emit("_add",this.__setData__.push(e)-1,e),this}),clear:d_1(function(){this.__setData__.length&&(clear.call(this.__setData__),this.emit("_clear"))}),delete:d_1(function(e){var t=eIndexOf.call(this.__setData__,e);return-1!==t&&(this.__setData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:d_1(function(){return new iterator(this,"key+value")}),forEach:d_1(function(e){var t,n,r,i=arguments[1];for(validCallable(e),n=(t=this.values())._next();void 0!==n;)r=t._resolve(n),call$4.call(e,i,r,r,this),n=t._next()}),has:d_1(function(e){return-1!==eIndexOf.call(this.__setData__,e)}),keys:d_1(getValues=function(){return this.values()}),size:d_1.gs(function(){return this.__setData__.length}),values:d_1(function(){return new iterator(this)}),toString:d_1(function(){return"[object Set]"})})),defineProperty$7(SetPoly.prototype,es6Symbol.iterator,d_1(getValues)),defineProperty$7(SetPoly.prototype,es6Symbol.toStringTag,d_1("c","Set"));var es6Set=isImplemented()?Set:polyfill$2,isImplemented$b=function(){var e,t;if("function"!=typeof Map)return!1;try{e=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return!1}return"[object Map]"===String(e)&&(3===e.size&&("function"==typeof e.clear&&("function"==typeof e.delete&&("function"==typeof e.entries&&("function"==typeof e.forEach&&("function"==typeof e.get&&("function"==typeof e.has&&("function"==typeof e.keys&&("function"==typeof e.set&&("function"==typeof e.values&&(!1===(t=e.entries().next()).done&&(!!t.value&&("raz"===t.value[0]&&"one"===t.value[1])))))))))))))},forEach$2=Array.prototype.forEach,create$6=Object.create,primitiveSet=function(e){var t=create$6(null);return forEach$2.call(arguments,function(e){t[e]=!0}),t},iteratorKinds=primitiveSet("key","value","key+value"),iterator$2=createCommonjsModule(function(e){var t=es6Symbol$1.toStringTag,n=Object.defineProperties,r=es6Iterator.prototype._unBind,i=e.exports=function(e,t){if(!(this instanceof i))return new i(e,t);es6Iterator.call(this,e.__mapKeysData__,e),t&&iteratorKinds[t]||(t="key+value"),n(this,{__kind__:d_1("",t),__values__:d_1("w",e.__mapValuesData__)})};setPrototypeOf&&setPrototypeOf(i,es6Iterator),i.prototype=Object.create(es6Iterator.prototype,{constructor:d_1(i),_resolve:d_1(function(e){return"value"===this.__kind__?this.__values__[e]:"key"===this.__kind__?this.__list__[e]:[this.__list__[e],this.__values__[e]]}),_unBind:d_1(function(){this.__values__=null,r.call(this)}),toString:d_1(function(){return"[object Map Iterator]"})}),Object.defineProperty(i.prototype,t,d_1("c","Map Iterator"))}),isNativeImplemented$1="undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map),iterator$3=validIterable,call$5=Function.prototype.call,defineProperties$3=Object.defineProperties,getPrototypeOf$2=Object.getPrototypeOf,MapPoly,polyfill$3=MapPoly=function(){var n,r,e,t=arguments[0];if(!(this instanceof MapPoly))throw new TypeError("Constructor requires 'new'");return e=isNativeImplemented$1&&setPrototypeOf&&Map!==MapPoly?setPrototypeOf(new Map,getPrototypeOf$2(this)):this,null!=t&&iterator$3(t),defineProperties$3(e,{__mapKeysData__:d_1("c",n=[]),__mapValuesData__:d_1("c",r=[])}),t&&forOf(t,function(e){var t=validValue(e)[0];e=e[1],-1===eIndexOf.call(n,t)&&(n.push(t),r.push(e))},e),e};isNativeImplemented$1&&(setPrototypeOf&&setPrototypeOf(MapPoly,Map),MapPoly.prototype=Object.create(Map.prototype,{constructor:d_1(MapPoly)})),eventEmitter(defineProperties$3(MapPoly.prototype,{clear:d_1(function(){this.__mapKeysData__.length&&(clear.call(this.__mapKeysData__),clear.call(this.__mapValuesData__),this.emit("_clear"))}),delete:d_1(function(e){var t=eIndexOf.call(this.__mapKeysData__,e);return-1!==t&&(this.__mapKeysData__.splice(t,1),this.__mapValuesData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:d_1(function(){return new iterator$2(this,"key+value")}),forEach:d_1(function(e){var t,n,r=arguments[1];for(validCallable(e),n=(t=this.entries())._next();void 0!==n;)call$5.call(e,r,this.__mapValuesData__[n],this.__mapKeysData__[n],this),n=t._next()}),get:d_1(function(e){var t=eIndexOf.call(this.__mapKeysData__,e);if(-1!==t)return this.__mapValuesData__[t]}),has:d_1(function(e){return-1!==eIndexOf.call(this.__mapKeysData__,e)}),keys:d_1(function(){return new iterator$2(this,"key")}),set:d_1(function(e,t){var n,r=eIndexOf.call(this.__mapKeysData__,e);return-1===r&&(r=this.__mapKeysData__.push(e)-1,n=!0),this.__mapValuesData__[r]=t,n&&this.emit("_add",r,e),this}),size:d_1.gs(function(){return this.__mapKeysData__.length}),values:d_1(function(){return new iterator$2(this,"value")}),toString:d_1(function(){return"[object Map]"})})),Object.defineProperty(MapPoly.prototype,es6Symbol$1.iterator,d_1(function(){return this.entries()})),Object.defineProperty(MapPoly.prototype,es6Symbol$1.toStringTag,d_1("c","Map"));var es6Map=isImplemented$b()?Map:polyfill$3,toStr=Object.prototype.toString,isArguments$1=function(e){var t=toStr.call(e);return"[object Arguments]"===t||"[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Function]"===toStr.call(e.callee)},keysShim,has,toStr$1,isArgs,isEnumerable,hasDontEnumBug,hasProtoEnumBug,dontEnums,equalsConstructorPrototype,excludedKeys,hasAutomationEqualityBug,equalsConstructorPrototypeIfNotBuggy,keysShim;Object.keys||(has=Object.prototype.hasOwnProperty,toStr$1=Object.prototype.toString,isArgs=isArguments$1,isEnumerable=Object.prototype.propertyIsEnumerable,hasDontEnumBug=!isEnumerable.call({toString:null},"toString"),hasProtoEnumBug=isEnumerable.call(function(){},"prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(e){var t=e.constructor;return t&&t.prototype===e},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!excludedKeys["$"+e]&&has.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{equalsConstructorPrototype(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),equalsConstructorPrototypeIfNotBuggy=function(e){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(e);try{return equalsConstructorPrototype(e)}catch(e){return!1}},keysShim=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===toStr$1.call(e),r=isArgs(e),i=t&&"[object String]"===toStr$1.call(e),o=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var a=hasProtoEnumBug&&n;if(i&&0<e.length&&!has.call(e,0))for(var s=0;s<e.length;++s)o.push(String(s));if(r&&0<e.length)for(var l=0;l<e.length;++l)o.push(String(l));else for(var c in e)a&&"prototype"===c||!has.call(e,c)||o.push(String(c));if(hasDontEnumBug)for(var u=equalsConstructorPrototypeIfNotBuggy(e),p=0;p<dontEnums.length;++p)u&&"constructor"===dontEnums[p]||!has.call(e,dontEnums[p])||o.push(dontEnums[p]);return o});var implementation$1=keysShim,slice=Array.prototype.slice,origKeys=Object.keys,keysShim$1=origKeys?function(e){return origKeys(e)}:implementation$1,originalKeys=Object.keys;keysShim$1.shim=function(){return Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return isArguments$1(e)?originalKeys(slice.call(e)):originalKeys(e)}):Object.keys=keysShim$1,Object.keys||keysShim$1};var objectKeys=keysShim$1,hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),toStr$2=Object.prototype.toString,concat=Array.prototype.concat,origDefineProperty=Object.defineProperty,isFunction$1=function(e){return"function"==typeof e&&"[object Function]"===toStr$2.call(e)},arePropertyDescriptorsSupported=function(){var e={};try{for(var t in origDefineProperty(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}},supportsDescriptors=origDefineProperty&&arePropertyDescriptorsSupported(),defineProperty$8=function(e,t,n,r){t in e&&(!isFunction$1(r)||!r())||(supportsDescriptors?origDefineProperty(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},defineProperties$4=function(e,t){var n=2<arguments.length?arguments[2]:{},r=objectKeys(t);hasSymbols&&(r=concat.call(r,Object.getOwnPropertySymbols(t)));for(var i=0;i<r.length;i+=1)defineProperty$8(e,r[i],t[r[i]],n[r[i]])};defineProperties$4.supportsDescriptors=!!supportsDescriptors;var defineProperties_1=defineProperties$4,shams=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0},origSymbol=commonjsGlobal.Symbol,hasSymbols$1=function(){return"function"==typeof origSymbol&&("function"==typeof Symbol&&("symbol"==typeof origSymbol("foo")&&("symbol"==typeof Symbol("bar")&&shams())))},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice$1=Array.prototype.slice,toStr$3=Object.prototype.toString,funcType="[object Function]",implementation$2=function(t){var n=this;if("function"!=typeof n||toStr$3.call(n)!==funcType)throw new TypeError(ERROR_MESSAGE+n);for(var r,e,i=slice$1.call(arguments,1),o=Math.max(0,n.length-i.length),a=[],s=0;s<o;s++)a.push("$"+s);return r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof r){var e=n.apply(this,i.concat(slice$1.call(arguments)));return Object(e)===e?e:this}return n.apply(t,i.concat(slice$1.call(arguments)))}),n.prototype&&((e=function(){}).prototype=n.prototype,r.prototype=new e,e.prototype=null),r},functionBind=Function.prototype.bind||implementation$2,undefined$1,$TypeError=TypeError,$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch(e){$gOPD=null}var throwTypeError=function(){throw new $TypeError},ThrowTypeError=$gOPD?function(){try{return throwTypeError}catch(e){try{return $gOPD(arguments,"callee").get}catch(e){return throwTypeError}}}():throwTypeError,hasSymbols$2=hasSymbols$1(),getProto=Object.getPrototypeOf||function(e){return e.__proto__},generatorFunction=undefined$1,asyncFunction=undefined$1,asyncGenFunction=undefined$1,TypedArray="undefined"==typeof Uint8Array?undefined$1:getProto(Uint8Array),INTRINSICS={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined$1:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?undefined$1:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":hasSymbols$2?getProto([][Symbol.iterator]()):undefined$1,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":asyncFunction,"%AsyncFunctionPrototype%":undefined$1,"%AsyncGenerator%":undefined$1,"%AsyncGeneratorFunction%":asyncGenFunction,"%AsyncGeneratorPrototype%":undefined$1,"%AsyncIteratorPrototype%":undefined$1,"%Atomics%":"undefined"==typeof Atomics?undefined$1:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?undefined$1:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?undefined$1:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?undefined$1:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?undefined$1:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?undefined$1:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?undefined$1:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":undefined$1,"%GeneratorFunction%":generatorFunction,"%GeneratorPrototype%":undefined$1,"%Int8Array%":"undefined"==typeof Int8Array?undefined$1:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?undefined$1:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?undefined$1:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?undefined$1:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?undefined$1:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?undefined$1:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols$2?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":"object"==typeof JSON?JSON:undefined$1,"%JSONParse%":"object"==typeof JSON?JSON.parse:undefined$1,"%Map%":"undefined"==typeof Map?undefined$1:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&hasSymbols$2?getProto((new Map)[Symbol.iterator]()):undefined$1,"%MapPrototype%":"undefined"==typeof Map?undefined$1:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined$1:Promise,"%PromisePrototype%":"undefined"==typeof Promise?undefined$1:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?undefined$1:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?undefined$1:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?undefined$1:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?undefined$1:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?undefined$1:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?undefined$1:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?undefined$1:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&hasSymbols$2?getProto((new Set)[Symbol.iterator]()):undefined$1,"%SetPrototype%":"undefined"==typeof Set?undefined$1:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined$1:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?undefined$1:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":hasSymbols$2?getProto(""[Symbol.iterator]()):undefined$1,"%StringPrototype%":String.prototype,"%Symbol%":hasSymbols$2?Symbol:undefined$1,"%SymbolPrototype%":hasSymbols$2?Symbol.prototype:undefined$1,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypedArrayPrototype%":TypedArray?TypedArray.prototype:undefined$1,"%TypeError%":$TypeError,"%TypeErrorPrototype%":$TypeError.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined$1:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?undefined$1:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined$1:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?undefined$1:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined$1:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?undefined$1:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined$1:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?undefined$1:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?undefined$1:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?undefined$1:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?undefined$1:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?undefined$1:WeakSet.prototype},$replace=functionBind.call(Function.call,String.prototype.replace),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(e){var i=[];return $replace(e,rePropName,function(e,t,n,r){i[i.length]=n?$replace(r,reEscapeChar,"$1"):t||e}),i},getBaseIntrinsic=function(e,t){if(!(e in INTRINSICS))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===INTRINSICS[e]&&!t)throw new $TypeError("intrinsic "+e+" exists, but is not available. Please file an issue!");return INTRINSICS[e]},GetIntrinsic=function(e,t){if("string"!=typeof e||0===e.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean');for(var n=stringToPath(e),r=getBaseIntrinsic("%"+(0<n.length?n[0]:"")+"%",t),i=1;i<n.length;i+=1)if(null!=r)if($gOPD&&i+1>=n.length){var o=$gOPD(r,n[i]);if(!(t||n[i]in r))throw new $TypeError("base intrinsic for "+e+" exists, but the property is not available.");r=o?o.get||o.value:r[n[i]]}else r=r[n[i]];return r},$TypeError$1=GetIntrinsic("%TypeError%"),CheckObjectCoercible=function(e,t){if(null==e)throw new $TypeError$1(t||"Cannot call method on "+e);return e},RequireObjectCoercible=CheckObjectCoercible,$Object=GetIntrinsic("%Object%"),ToObject=function(e){return RequireObjectCoercible(e),$Object(e)},$Math=GetIntrinsic("%Math%"),$Number=GetIntrinsic("%Number%"),maxSafeInteger=$Number.MAX_SAFE_INTEGER||$Math.pow(2,53)-1,ToNumber=function(e){return+e},_isNaN=Number.isNaN||function(e){return e!=e},$isNaN=Number.isNaN||function(e){return e!=e},_isFinite=Number.isFinite||function(e){return"number"==typeof e&&!$isNaN(e)&&e!==1/0&&e!==-1/0},sign$1=function(e){return 0<=e?1:-1},$Math$1=GetIntrinsic("%Math%"),$floor=$Math$1.floor,$abs=$Math$1.abs,ToInteger=function(e){var t=ToNumber(e);return _isNaN(t)?0:0!==t&&_isFinite(t)?sign$1(t)*$floor($abs(t)):t},$apply=GetIntrinsic("%Function.prototype.apply%"),$call=GetIntrinsic("%Function.prototype.call%"),$reflectApply=GetIntrinsic("%Reflect.apply%",!0)||functionBind.call($call,$apply),callBind=function(){return $reflectApply(functionBind,$call,arguments)},apply=function(){return $reflectApply(functionBind,$apply,arguments)};callBind.apply=apply;var $indexOf=callBind(GetIntrinsic("String.prototype.indexOf")),callBound=function(e,t){var n=GetIntrinsic(e,!!t);return"function"==typeof n&&$indexOf(e,".prototype.")?callBind(n):n},$test=GetIntrinsic("RegExp.prototype.test"),regexTester=function(e){return callBind($test,e)},isPrimitive=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e},isPrimitive$1=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e},fnToStr=Function.prototype.toString,reflectApply="object"==typeof Reflect&&null!==Reflect&&Reflect.apply,badArrayLike,isCallableMarker;if("function"==typeof reflectApply&&"function"==typeof Object.defineProperty)try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={}}catch(e){reflectApply=null}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(e){try{var t=fnToStr.call(e);return constructorRegex.test(t)}catch(e){return!1}},tryFunctionObject=function(e){try{return isES6ClassFn(e)?!1:(fnToStr.call(e),!0)}catch(e){return!1}},toStr$4=Object.prototype.toString,fnClass="[object Function]",genClass="[object GeneratorFunction]",hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,isCallable=reflectApply?function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;try{reflectApply(e,null,badArrayLike)}catch(e){if(e!==isCallableMarker)return!1}return!isES6ClassFn(e)}:function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(hasToStringTag)return tryFunctionObject(e);if(isES6ClassFn(e))return!1;var t=toStr$4.call(e);return t===fnClass||t===genClass},getDay=Date.prototype.getDay,tryDateObject=function(e){try{return getDay.call(e),!0}catch(e){return!1}},toStr$5=Object.prototype.toString,dateClass="[object Date]",hasToStringTag$1="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,isDateObject=function(e){return"object"==typeof e&&null!==e&&(hasToStringTag$1?tryDateObject(e):toStr$5.call(e)===dateClass)},isSymbol$2=createCommonjsModule(function(e){var n,r,i=Object.prototype.toString;hasSymbols$1()?(n=Symbol.prototype.toString,r=/^Symbol\(.*\)$/,e.exports=function(e){if("symbol"==typeof e)return!0;if("[object Symbol]"!==i.call(e))return!1;try{return"symbol"==typeof(t=e).valueOf()&&r.test(n.call(t))}catch(e){return!1}var t}):e.exports=function(){return!1}}),hasSymbols$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,ordinaryToPrimitive=function(e,t){if(null==e)throw new TypeError("Cannot call method on "+e);if("string"!=typeof t||"number"!==t&&"string"!==t)throw new TypeError('hint must be "string" or "number"');for(var n,r,i="string"===t?["toString","valueOf"]:["valueOf","toString"],o=0;o<i.length;++o)if(n=e[i[o]],isCallable(n)&&(r=n.call(e),isPrimitive$1(r)))return r;throw new TypeError("No default value")},GetMethod=function(e,t){var n=e[t];if(null!=n){if(!isCallable(n))throw new TypeError(n+" returned for property "+t+" of object "+e+" is not a function");return n}},es2015=function(e,t){if(isPrimitive$1(e))return e;var n,r="default";if(1<arguments.length&&(t===String?r="string":t===Number&&(r="number")),hasSymbols$3&&(Symbol.toPrimitive?n=GetMethod(e,Symbol.toPrimitive):isSymbol$2(e)&&(n=Symbol.prototype.valueOf)),void 0===n)return"default"===r&&(isDateObject(e)||isSymbol$2(e))&&(r="string"),ordinaryToPrimitive(e,"default"===r?"number":r);var i=n.call(e,r);if(isPrimitive$1(i))return i;throw new TypeError("unable to convert exotic object to primitive")},ToPrimitive=function(e,t){return 1<arguments.length?es2015(e,t):es2015(e)},$TypeError$2=GetIntrinsic("%TypeError%"),$Number$1=GetIntrinsic("%Number%"),$RegExp=GetIntrinsic("%RegExp%"),$parseInteger=GetIntrinsic("%parseInt%"),$strSlice=callBound("String.prototype.slice"),isBinary=regexTester(/^0b[01]+$/i),isOctal=regexTester(/^0o[0-7]+$/i),isInvalidHexLiteral=regexTester(/^[-+]0x[0-9a-f]+$/i),nonWS=["","​","￾"].join(""),nonWSregex=new $RegExp("["+nonWS+"]","g"),hasNonWS=regexTester(nonWSregex),ws=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),trimRegex=new RegExp("(^["+ws+"]+)|(["+ws+"]+$)","g"),$replace$1=callBound("String.prototype.replace"),$trim=function(e){return $replace$1(e,trimRegex,"")},ToNumber$1=function e(t){var n=isPrimitive(t)?t:ToPrimitive(t,$Number$1);if("symbol"==typeof n)throw new $TypeError$2("Cannot convert a Symbol value to a number");if("string"==typeof n){if(isBinary(n))return e($parseInteger($strSlice(n,2),2));if(isOctal(n))return e($parseInteger($strSlice(n,2),8));if(hasNonWS(n)||isInvalidHexLiteral(n))return NaN;var r=$trim(n);if(r!==n)return e(r)}return $Number$1(n)},ToInteger$1=function(e){var t=ToNumber$1(e);return ToInteger(t)},ToLength=function(e){var t=ToInteger$1(e);return t<=0?0:maxSafeInteger<t?maxSafeInteger:t},IsCallable=isCallable,implementation$3=function(e,t){var n,r=ToObject(this),i=ToLength(r.length);if(!IsCallable(e))throw new TypeError("Array#find: predicate must be a function");if(0!==i){0<arguments.length&&(n=t);for(var o,a=0;a<i;a++)if(o=r[a],e.apply(n,[o,a,r]))return o}},polyfill$4=function(){return Array.prototype.find&&1!==[,1].find(function(){return!0})?Array.prototype.find:implementation$3},shim$8=function(){var e=polyfill$4();return defineProperties_1(Array.prototype,{find:e},{find:function(){return Array.prototype.find!==e}}),e},slice$2=Array.prototype.slice,polyfill$5=polyfill$4(),boundFindShim=function(e,t){RequireObjectCoercible(e);var n=slice$2.call(arguments,1);return polyfill$5.apply(e,n)};defineProperties_1(boundFindShim,{getPolyfill:polyfill$4,implementation:implementation$3,shim:shim$8});var array_prototype_find=boundFindShim,implementation$4=function(e,t){var n,r=ToObject(this),i=ToLength(r.length);if(!IsCallable(e))throw new TypeError("Array#findIndex: predicate must be a function");if(0===i)return-1;0<arguments.length&&(n=t);for(var o,a=0;a<i;a++)if(o=r[a],e.apply(n,[o,a,r]))return a;return-1},polyfill$6=function(){return Array.prototype.findIndex&&0===[,1].findIndex(function(e,t){return 0===t})?Array.prototype.findIndex:implementation$4},shim$9=function(){var e=polyfill$6();return defineProperties_1(Array.prototype,{findIndex:e},{findIndex:function(){return Array.prototype.findIndex!==e}}),e},slice$3=Array.prototype.slice,polyfill$7=polyfill$6(),boundShim=function(e,t){RequireObjectCoercible(e);var n=slice$3.call(arguments,1);return polyfill$7.apply(e,n)};defineProperties_1(boundShim,{getPolyfill:polyfill$6,implementation:implementation$4,shim:shim$9});var array_prototype_findindex=boundShim,$apply$1=GetIntrinsic("%Reflect.apply%",!0)||callBound("%Function.prototype.apply%"),Call=function(e,t,n){return $apply$1(e,t,2<arguments.length?n:[])},$defineProperty=GetIntrinsic("%Object.defineProperty%",!0);if($defineProperty)try{$defineProperty({},"a",{value:1})}catch(e){$defineProperty=null}var $isEnumerable=callBound("Object.prototype.propertyIsEnumerable"),DefineOwnProperty=function(e,t,n,r,i,o){if($defineProperty)return $defineProperty(r,i,n(o)),!0;if(!e(o))return!1;if(!o["[[Configurable]]"]||!o["[[Writable]]"])return!1;if(i in r&&$isEnumerable(r,i)!==!!o["[[Enumerable]]"])return!1;var a=o["[[Value]]"];return r[i]=a,t(r[i],a)},src=functionBind.call(Function.call,Object.prototype.hasOwnProperty),$TypeError$3=GetIntrinsic("%TypeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),predicates={"Property Descriptor":function(e,t){if("Object"!==e(t))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in t)if(src(t,r)&&!n[r])return!1;var i=src(t,"[[Value]]"),o=src(t,"[[Get]]")||src(t,"[[Set]]");if(i&&o)throw new $TypeError$3("Property Descriptors may not be both accessor and data descriptors");return!0}},assertRecord=function(e,t,n,r){var i=predicates[t];if("function"!=typeof i)throw new $SyntaxError("unknown record type: "+t);if(!i(e,r))throw new $TypeError$3(n+" must be a "+t)},Type=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0},Type$1=function(e){return"symbol"==typeof e?"Symbol":Type(e)},FromPropertyDescriptor=function(e){if(void 0===e)return e;assertRecord(Type$1,"Property Descriptor","Desc",e);var t={};return"[[Value]]"in e&&(t.value=e["[[Value]]"]),"[[Writable]]"in e&&(t.writable=e["[[Writable]]"]),"[[Get]]"in e&&(t.get=e["[[Get]]"]),"[[Set]]"in e&&(t.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(t.enumerable=e["[[Enumerable]]"]),"[[Configurable]]"in e&&(t.configurable=e["[[Configurable]]"]),t},$gOPD$1=GetIntrinsic("%Object.getOwnPropertyDescriptor%");if($gOPD$1)try{$gOPD$1([],"length")}catch(e){$gOPD$1=null}var getOwnPropertyDescriptor=$gOPD$1,$Array=GetIntrinsic("%Array%"),toStr$6=!$Array.isArray&&callBound("Object.prototype.toString"),IsArray=$Array.isArray||function(e){return"[object Array]"===toStr$6(e)},IsPropertyKey=function(e){return"string"==typeof e||"symbol"==typeof e},hasSymbols$4=hasSymbols$1(),hasToStringTag$2=hasSymbols$4&&"symbol"==typeof Symbol.toStringTag,regexExec,isRegexMarker,badStringifier,throwRegexMarker,badStringifier;hasToStringTag$2&&(regexExec=Function.call.bind(RegExp.prototype.exec),isRegexMarker={},throwRegexMarker=function(){throw isRegexMarker},badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker},"symbol"==typeof Symbol.toPrimitive&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker));var toStr$7=Object.prototype.toString,regexClass="[object RegExp]",isRegex=hasToStringTag$2?function(e){if(!e||"object"!=typeof e)return!1;try{regexExec(e,badStringifier)}catch(e){return e===isRegexMarker}}:function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&toStr$7.call(e)===regexClass},ToBoolean=function(e){return!!e},$match=GetIntrinsic("%Symbol.match%",!0),IsRegExp=function(e){if(!e||"object"!=typeof e)return!1;if($match){var t=e[$match];if(void 0!==t)return ToBoolean(t)}return isRegex(e)},$TypeError$4=GetIntrinsic("%TypeError%"),ToPropertyDescriptor=function(e){if("Object"!==Type$1(e))throw new $TypeError$4("ToPropertyDescriptor requires an object");var t={};if(src(e,"enumerable")&&(t["[[Enumerable]]"]=ToBoolean(e.enumerable)),src(e,"configurable")&&(t["[[Configurable]]"]=ToBoolean(e.configurable)),src(e,"value")&&(t["[[Value]]"]=e.value),src(e,"writable")&&(t["[[Writable]]"]=ToBoolean(e.writable)),src(e,"get")){var n=e.get;if(void 0!==n&&!IsCallable(n))throw new TypeError("getter must be a function");t["[[Get]]"]=n}if(src(e,"set")){var r=e.set;if(void 0!==r&&!IsCallable(r))throw new $TypeError$4("setter must be a function");t["[[Set]]"]=r}if((src(t,"[[Get]]")||src(t,"[[Set]]"))&&(src(t,"[[Value]]")||src(t,"[[Writable]]")))throw new $TypeError$4("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t},$TypeError$5=GetIntrinsic("%TypeError%"),$isEnumerable$1=callBound("Object.prototype.propertyIsEnumerable"),OrdinaryGetOwnProperty=function(e,t){if("Object"!==Type$1(e))throw new $TypeError$5("Assertion failed: O must be an Object");if(!IsPropertyKey(t))throw new $TypeError$5("Assertion failed: P must be a Property Key");if(src(e,t)){if(getOwnPropertyDescriptor)return ToPropertyDescriptor(getOwnPropertyDescriptor(e,t));var n=IsArray(e)&&"length"===t,r=IsRegExp(e)&&"lastIndex"===t;return{"[[Configurable]]":!(n||r),"[[Enumerable]]":$isEnumerable$1(e,t),"[[Value]]":e[t],"[[Writable]]":!0}}},IsDataDescriptor=function(e){return void 0!==e&&(assertRecord(Type$1,"Property Descriptor","Desc",e),!(!src(e,"[[Value]]")&&!src(e,"[[Writable]]")))},$Object$1=GetIntrinsic("%Object%"),$preventExtensions=$Object$1.preventExtensions,$isExtensible=$Object$1.isExtensible,IsExtensible=$preventExtensions?function(e){return!isPrimitive(e)&&$isExtensible(e)}:function(e){return!isPrimitive(e)},SameValue=function(e,t){return e===t?0!==e||1/e==1/t:_isNaN(e)&&_isNaN(t)},$TypeError$6=GetIntrinsic("%TypeError%"),CreateDataProperty=function(e,t,n){if("Object"!==Type$1(e))throw new $TypeError$6("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(t))throw new $TypeError$6("Assertion failed: IsPropertyKey(P) is not true");var r=OrdinaryGetOwnProperty(e,t),i=!r||IsExtensible(e);return!(!(!r||r["[[Writable]]"]&&r["[[Configurable]]"])||!i)&&DefineOwnProperty(IsDataDescriptor,SameValue,FromPropertyDescriptor,e,t,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":n,"[[Writable]]":!0})},$TypeError$7=GetIntrinsic("%TypeError%"),CreateDataPropertyOrThrow=function(e,t,n){if("Object"!==Type$1(e))throw new $TypeError$7("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(t))throw new $TypeError$7("Assertion failed: IsPropertyKey(P) is not true");var r=CreateDataProperty(e,t,n);if(!r)throw new $TypeError$7("unable to create data property");return r},hasMap="function"==typeof Map&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&"function"==typeof mapSizeDescriptor.get?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet="function"==typeof Set&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&"function"==typeof setSizeDescriptor.get?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,booleanValueOf=Boolean.prototype.valueOf,objectToString$1=Object.prototype.toString,objectInspect=function n(r,i,o,a){if(void 0===r)return"undefined";if(null===r)return"null";if("boolean"==typeof r)return r?"true":"false";if("string"==typeof r)return inspectString(r);if("number"==typeof r)return 0===r?0<1/0/r?"0":"-0":String(r);var e=void 0===(i=i||{}).depth?5:i.depth;if(void 0===o&&(o=0),e<=o&&0<e&&"object"==typeof r)return"[Object]";if(void 0===a)a=[];else if(0<=indexOf$2(a,r))return"[Circular]";function s(e,t){return t&&(a=a.slice()).push(t),n(e,i,o+1,a)}if("function"==typeof r){var t=nameOf(r);return"[Function"+(t?": "+t:"")+"]"}if(isSymbol$3(r)){var l=Symbol.prototype.toString.call(r);return"object"==typeof r?markBoxed(l):l}if(isElement(r)){for(var c="<"+String(r.nodeName).toLowerCase(),u=r.attributes||[],p=0;p<u.length;p++)c+=" "+u[p].name+'="'+quote(u[p].value)+'"';return c+=">",r.childNodes&&r.childNodes.length&&(c+="..."),c+="</"+String(r.nodeName).toLowerCase()+">"}if(isArray$3(r))return 0===r.length?"[]":"[ "+arrObjKeys(r,s).join(", ")+" ]";if(isError(r))return 0===(d=arrObjKeys(r,s)).length?"["+String(r)+"]":"{ ["+String(r)+"] "+d.join(", ")+" }";if("object"==typeof r&&"function"==typeof r.inspect)return r.inspect();if(isMap(r)){var d=[];return mapForEach.call(r,function(e,t){d.push(s(t,r)+" => "+s(e,r))}),collectionOf("Map",mapSize.call(r),d)}if(isSet(r)){d=[];return setForEach.call(r,function(e){d.push(s(e,r))}),collectionOf("Set",setSize.call(r),d)}if(isNumber(r))return markBoxed(Number(r));if(isBoolean(r))return markBoxed(booleanValueOf.call(r));if(isString$1(r))return markBoxed(s(String(r)));if(isDate(r)||isRegExp(r))return String(r);var f=arrObjKeys(r,s);return 0===f.length?"{}":"{ "+f.join(", ")+" }"};function quote(e){return String(e).replace(/"/g,"&quot;")}function isArray$3(e){return"[object Array]"===toStr$8(e)}function isDate(e){return"[object Date]"===toStr$8(e)}function isRegExp(e){return"[object RegExp]"===toStr$8(e)}function isError(e){return"[object Error]"===toStr$8(e)}function isSymbol$3(e){return"[object Symbol]"===toStr$8(e)}function isString$1(e){return"[object String]"===toStr$8(e)}function isNumber(e){return"[object Number]"===toStr$8(e)}function isBoolean(e){return"[object Boolean]"===toStr$8(e)}var hasOwn=Object.prototype.hasOwnProperty||function(e){return e in this};function has$1(e,t){return hasOwn.call(e,t)}function toStr$8(e){return objectToString$1.call(e)}function nameOf(e){if(e.name)return e.name;var t=String(e).match(/^function\s*([\w$]+)/);return t?t[1]:void 0}function indexOf$2(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function isMap(e){if(mapSize)try{mapSize.call(e);try{setSize.call(e)}catch(e){return 1}return e instanceof Map}catch(e){}}function isSet(e){if(setSize)try{setSize.call(e);try{mapSize.call(e)}catch(e){return 1}return e instanceof Set}catch(e){}}function isElement(e){return e&&"object"==typeof e&&("undefined"!=typeof HTMLElement&&e instanceof HTMLElement||"string"==typeof e.nodeName&&"function"==typeof e.getAttribute)}function inspectString(e){return"'"+e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,lowbyte)+"'"}function lowbyte(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+t.toString(16)}function markBoxed(e){return"Object("+e+")"}function collectionOf(e,t,n){return e+" ("+t+") {"+n.join(", ")+"}"}function arrObjKeys(e,t){var n=isArray$3(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=has$1(e,i)?t(e[i],e):""}for(var o in e)has$1(e,o)&&(n&&String(Number(o))===o&&o<e.length||(/[^\w$]/.test(o)?r.push(t(o,e)+": "+t(e[o],e)):r.push(o+": "+t(e[o],e))));return r}var $TypeError$8=GetIntrinsic("%TypeError%"),Get=function(e,t){if("Object"!==Type$1(e))throw new $TypeError$8("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(t))throw new $TypeError$8("Assertion failed: IsPropertyKey(P) is not true, got "+objectInspect(t));return e[t]},$TypeError$9=GetIntrinsic("%TypeError%"),isPropertyDescriptor=function(e,t){if("Object"!==e.Type(t))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in t)if(src(t,r)&&!n[r])return!1;if(e.IsDataDescriptor(t)&&e.IsAccessorDescriptor(t))throw new $TypeError$9("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor=function(e){return void 0!==e&&(assertRecord(Type$1,"Property Descriptor","Desc",e),!(!src(e,"[[Get]]")&&!src(e,"[[Set]]")))},$TypeError$a=GetIntrinsic("%TypeError%"),DefinePropertyOrThrow=function(e,t,n){if("Object"!==Type$1(e))throw new $TypeError$a("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(t))throw new $TypeError$a("Assertion failed: IsPropertyKey(P) is not true");var r=isPropertyDescriptor({Type:Type$1,IsDataDescriptor:IsDataDescriptor,IsAccessorDescriptor:IsAccessorDescriptor},n)?n:ToPropertyDescriptor(n);if(!isPropertyDescriptor({Type:Type$1,IsDataDescriptor:IsDataDescriptor,IsAccessorDescriptor:IsAccessorDescriptor},r))throw new $TypeError$a("Assertion failed: Desc is not a valid Property Descriptor");return DefineOwnProperty(IsDataDescriptor,SameValue,FromPropertyDescriptor,e,t,r)},IsConstructor=createCommonjsModule(function(e){var t,n,r=GetIntrinsic("%Reflect.construct%",!0),i=DefinePropertyOrThrow;try{i({},"",{"[[Get]]":function(){}})}catch(e){i=null}i&&r?(t={},i(n={},"length",{"[[Get]]":function(){throw t},"[[Enumerable]]":!0}),e.exports=function(e){try{r(e,n)}catch(e){return e===t}}):e.exports=function(e){return"function"==typeof e&&!!e.prototype}}),$String=GetIntrinsic("%String%"),$TypeError$b=GetIntrinsic("%TypeError%"),ToString=function(e){if("symbol"==typeof e)throw new $TypeError$b("Cannot convert a Symbol value to a string");return $String(e)},hasToStringTag$3="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,toStr$9=Object.prototype.toString,isStandardArguments=function(e){return!(hasToStringTag$3&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===toStr$9.call(e)},isLegacyArguments=function(e){return!!isStandardArguments(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Array]"!==toStr$9.call(e)&&"[object Function]"===toStr$9.call(e.callee)},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments$2=supportsStandardArguments?isStandardArguments:isLegacyArguments,toString={}.toString,isarray=Array.isArray||function(e){return"[object Array]"==toString.call(e)},strValue=String.prototype.valueOf,tryStringObject=function(e){try{return strValue.call(e),!0}catch(e){return!1}},toStr$a=Object.prototype.toString,strClass="[object String]",hasToStringTag$4="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,isString$2=function(e){return"string"==typeof e||"object"==typeof e&&(hasToStringTag$4?tryStringObject(e):toStr$a.call(e)===strClass)},$Map="function"==typeof Map&&Map.prototype?Map:null,$Set="function"==typeof Set&&Set.prototype?Set:null,exported;$Map||(exported=function(){return!1});var $mapHas=$Map?Map.prototype.has:null,$setHas=$Set?Set.prototype.has:null;exported||$mapHas||(exported=function(){return!1});var isMap$1=exported||function(e){if(!e||"object"!=typeof e)return!1;try{if($mapHas.call(e),$setHas)try{$setHas.call(e)}catch(e){return!0}return e instanceof $Map}catch(e){}return!1},$Map$1="function"==typeof Map&&Map.prototype?Map:null,$Set$1="function"==typeof Set&&Set.prototype?Set:null,exported$1;$Set$1||(exported$1=function(){return!1});var $mapHas$1=$Map$1?Map.prototype.has:null,$setHas$1=$Set$1?Set.prototype.has:null;exported$1||$setHas$1||(exported$1=function(){return!1});var isSet$1=exported$1||function(e){if(!e||"object"!=typeof e)return!1;try{if($setHas$1.call(e),$mapHas$1)try{$mapHas$1.call(e)}catch(e){return!0}return e instanceof $Set$1}catch(e){}return!1},esGetIterator=createCommonjsModule(function(e){var t,i,o,n,r,a,s,l,c,u,p,d,f,h,g,m,y,v,_,b,w;hasSymbols$1()||shams()?(t=Symbol.iterator,e.exports=function(e){return null!=e&&void 0!==e[t]?e[t]():isArguments$2(e)?Array.prototype[t].call(e):void 0}):(i=isarray,o=isString$2,r=(n=GetIntrinsic)("%Map%",!0),a=n("%Set%",!0),l=(s=callBound)("Array.prototype.push"),c=s("String.prototype.charCodeAt"),u=s("String.prototype.slice"),p=function(n){var r=0;return{next:function(){var e,t=r>=n.length;return t||(e=n[r],r+=1),{done:t,value:e}}}},d=function(n){if(i(n)||isArguments$2(n))return p(n);if(o(n)){var r=0;return{next:function(){var e=function(e,t){if(e.length<=t+1)return t+1;var n=c(e,t);if(n<55296||56319<n)return t+1;var r=c(e,t+1);return r<56320||57343<r?t+1:t+2}(n,r),t=u(n,r,e);return{done:(r=e)>n.length,value:t}}}}},r||a?(f=isMap$1,h=isSet$1,g=s("Map.prototype.forEach",!0),m=s("Set.prototype.forEach",!0),"undefined"!=typeof process&&process.versions&&process.versions.node||(y=s("Map.prototype.iterator",!0),v=s("Set.prototype.iterator",!0),_=function(e){var t=!1;return{next:function(){try{return{done:t,value:t?void 0:e.next()}}catch(e){return{done:t=!0,value:void 0}}}}}),b=s("Map.prototype.@@iterator",!0)||s("Map.prototype._es6-shim iterator_",!0),w=s("Set.prototype.@@iterator",!0)||s("Set.prototype._es6-shim iterator_",!0),e.exports=function(e){return function(e){if(f(e)){if(y)return _(y(e));if(b)return b(e);if(g){var n=[];return g(e,function(e,t){l(n,[t,e])}),p(n)}}if(h(e)){if(v)return _(v(e));if(w)return w(e);if(m){var t=[];return m(e,function(e){l(t,e)}),p(t)}}}(e)||d(e)}):e.exports=d)}),$TypeError$c=TypeError,iterateIterator=function(e,t){if(!e||"function"!=typeof e.next)throw new $TypeError$c("iterator must be an object with a `next` method");if(1<arguments.length){var n=t;if("function"!=typeof n)throw new $TypeError$c("`callback`, if provided, must be a function")}for(var r,i=n||[];(r=e.next())&&!r.done;)n?n(r.value):i.push(r.value);if(!n)return i},$TypeError$d=TypeError,iterateValue=function(e,t){var n=esGetIterator(e);if(!n)throw new $TypeError$d("non-iterable value provided");return 1<arguments.length?iterateIterator(n,t):iterateIterator(n)},implementation$5=function(t,e,n){var r,i,o;if(null==t)throw new TypeError("`Array.from` requires an array-like object, not `null` or `undefined`");if(void 0!==e){if(!IsCallable(r=e))throw new TypeError("When provided, the second argument to `Array.from` must be a function");2<arguments.length&&(i=n)}try{o=iterateValue(t)}catch(e){o=t}for(var a=ToObject(o),s=ToLength(a.length),l=IsConstructor(this)?ToObject(new this(s)):new Array(s),c=0;c<s;){var u=ToString(c),p=Get(a,u),d=r?void 0===i?r(p,c):Call(r,i,[p,c]):p;CreateDataPropertyOrThrow(l,u,d),c+=1}return l.length=s,l},tryCall=function(e){try{return e()}catch(e){return!1}},polyfill$8=function(){if(IsCallable(Array.from)){if(!tryCall(function(){return Array.from([0],void 0)})){var n=Array.from;return function(e,t){return Call(n,this,1<arguments.length&&void 0!==t?arguments:[e])}}if(tryCall(function(){return 0===Array.from({length:-1})})&&tryCall(function(){var e=Array.from([0].entries());return 1===e.length&&IsArray(e[0])&&0===e[0][0]&&0===e[0][1]})&&tryCall(function(){return Array.from({length:-1/0})}))return Array.from}return implementation$5},shim$a=function(){var e=polyfill$8();return defineProperties_1(Array,{from:e},{from:function(){return Array.from!==e}}),e},polyfill$9=polyfill$8(),boundFromShim=function(e){return polyfill$9.apply(this||Array,arguments)};defineProperties_1(boundFromShim,{getPolyfill:polyfill$8,implementation:implementation$5,shim:shim$a});var array_from=boundFromShim,$isEnumerable$2=callBound("Object.prototype.propertyIsEnumerable"),implementation$6=function(e){var t=RequireObjectCoercible(e),n=[];for(var r in t)src(t,r)&&$isEnumerable$2(t,r)&&n.push(t[r]);return n},polyfill$a=function(){return"function"==typeof Object.values?Object.values:implementation$6},shim$b=function(){var e=polyfill$a();return defineProperties_1(Object,{values:e},{values:function(){return Object.values!==e}}),e},polyfill$b=polyfill$a();defineProperties_1(polyfill$b,{getPolyfill:polyfill$a,implementation:implementation$6,shim:shim$b});var object_values=polyfill$b,canBeObject=function(e){return null!=e},hasSymbols$5=shams(),toObject=Object,push=functionBind.call(Function.call,Array.prototype.push),propIsEnumerable=functionBind.call(Function.call,Object.prototype.propertyIsEnumerable),originalGetSymbols=hasSymbols$5?Object.getOwnPropertySymbols:null,implementation$7=function(e,t){var n=arguments;if(!canBeObject(e))throw new TypeError("target must be an object");for(var r,i,o,a,s,l,c=toObject(e),u=1;u<arguments.length;++u){r=toObject(n[u]),o=objectKeys(r);var p=hasSymbols$5&&(Object.getOwnPropertySymbols||originalGetSymbols);if(p)for(a=p(r),i=0;i<a.length;++i)l=a[i],propIsEnumerable(r,l)&&push(o,l);for(i=0;i<o.length;++i)s=r[l=o[i]],propIsEnumerable(r,l)&&(c[l]=s)}return c},lacksProperEnumerationOrder=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},r=0;r<t.length;++r)n[t[r]]=t[r];var i=Object.assign({},n),o="";for(var a in i)o+=a;return e!==o},assignHasPendingExceptions=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1},polyfill$c=function(){return!Object.assign||lacksProperEnumerationOrder()||assignHasPendingExceptions()?implementation$7:Object.assign},shim$c=function(){var e=polyfill$c();return defineProperties_1(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},polyfill$d=polyfill$c();defineProperties_1(polyfill$d,{getPolyfill:polyfill$c,implementation:implementation$7,shim:shim$c});var object_assign=polyfill$d;function finallyConstructor(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})}var setTimeoutFunc=setTimeout;function isArray$4(e){return Boolean(e&&void 0!==e.length)}function noop$1(){}function bind$2(e,t){return function(){e.apply(t,arguments)}}function Promise$1(e){if(!(this instanceof Promise$1))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(e,this)}function handle(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,Promise$1._immediateFn(function(){var e,t=1===n._state?r.onFulfilled:r.onRejected;if(null!==t){try{e=t(n._value)}catch(e){return void reject(r.promise,e)}resolve(r.promise,e)}else(1===n._state?resolve:reject)(r.promise,n._value)})):n._deferreds.push(r)}function resolve(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof Promise$1)return t._state=3,t._value=e,void finale(t);if("function"==typeof n)return void doResolve(bind$2(n,e),t)}t._state=1,t._value=e,finale(t)}catch(e){reject(t,e)}}function reject(e,t){e._state=2,e._value=t,finale(e)}function finale(e){2===e._state&&0===e._deferreds.length&&Promise$1._immediateFn(function(){e._handled||Promise$1._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)handle(e,e._deferreds[t]);e._deferreds=null}function Handler(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function doResolve(e,t){var n=!1;try{e(function(e){n||(n=!0,resolve(t,e))},function(e){n||(n=!0,reject(t,e))})}catch(e){if(n)return;n=!0,reject(t,e)}}Promise$1.prototype.catch=function(e){return this.then(null,e)},Promise$1.prototype.then=function(e,t){var n=new this.constructor(noop$1);return handle(this,new Handler(e,t,n)),n},Promise$1.prototype.finally=finallyConstructor,Promise$1.all=function(t){return new Promise$1(function(i,o){if(!isArray$4(t))return o(new TypeError("Promise.all accepts an array"));var a=Array.prototype.slice.call(t);if(0===a.length)return i([]);var s=a.length;for(var e=0;e<a.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void r.call(e,function(e){t(n,e)},o)}a[n]=e,0==--s&&i(a)}catch(e){o(e)}}(e,a[e])})},Promise$1.resolve=function(t){return t&&"object"==typeof t&&t.constructor===Promise$1?t:new Promise$1(function(e){e(t)})},Promise$1.reject=function(n){return new Promise$1(function(e,t){t(n)})},Promise$1.race=function(i){return new Promise$1(function(e,t){if(!isArray$4(i))return t(new TypeError("Promise.race accepts an array"));for(var n=0,r=i.length;n<r;n++)Promise$1.resolve(i[n]).then(e,t)})},Promise$1._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){setTimeoutFunc(e,0)},Promise$1._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var globalNS=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"Promise"in globalNS?globalNS.Promise.prototype.finally||(globalNS.Promise.prototype.finally=finallyConstructor):globalNS.Promise=Promise$1;for(var polyfill$e=Object.freeze({__proto__:null}),setAsap=createCommonjsModule(function(e){var a,s,l,c,t;a="object"==typeof window&&window||"object"==typeof commonjsGlobal&&commonjsGlobal||"object"==typeof self&&self||commonjsGlobal,s="function"==typeof setImmediate,l="object"==typeof process&&!!process&&"function"==typeof process.nextTick,c=0,t=function(){var t,n,r;if(a.MutationObserver)return function(e){t=document.createElement("div"),new MutationObserver(function(){e(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")};if(s||!a.postMessage||a.importScripts||!a.addEventListener)return!s&&a.document&&"onreadystatechange"in document.createElement("script")?function(e){(n=document.createElement("script")).onreadystatechange=function(){n.onreadystatechange=null,n.parentNode.removeChild(n),n=null,e()},document.body.appendChild(n)}:(r=s&&setImmediate||l&&process.nextTick||setTimeout,function(e){r(e)});var i="com.setImmediate"+Math.random(),o={};return a.addEventListener("message",function(e){var t;e.source===a&&0===e.data.indexOf(i)&&(t=+e.data.split(":")[1],o[t](),delete o[t])},!1),function(e){var t=9007199254740991===c?0:++c;o[t]=e,a.postMessage(i+":"+t,"*")}}(),e.exports?e.exports=t:void 0!==commonjsRequire&&commonjsRequire.amd?(void 0)(function(){return t}):a.setAsap=t}),performanceNow=createCommonjsModule(function(a){(function(){var e,t,n,r,i,o;"undefined"!=typeof performance&&null!==performance&&performance.now?a.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(a.exports=function(){return(e()-i)/1e6},t=process.hrtime,r=(e=function(){var e=t();return 1e9*e[0]+e[1]})(),o=1e9*process.uptime(),i=r-o):n=Date.now?(a.exports=function(){return Date.now()-n},Date.now()):(a.exports=function(){return(new Date).getTime()-n},(new Date).getTime())}).call(commonjsGlobal)}),root="undefined"==typeof window?commonjsGlobal:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root["request"+suffix],caf=root["cancel"+suffix]||root["cancelRequest"+suffix],i=0,last,id$2,queue,frameDuration,raf,caf;!raf&&i<vendors.length;i++)raf=root[vendors[i]+"Request"+suffix],caf=root[vendors[i]+"Cancel"+suffix]||root[vendors[i]+"CancelRequest"+suffix];raf&&caf||(last=0,id$2=0,queue=[],frameDuration=1e3/60,raf=function(e){var t,n;return 0===queue.length&&(t=performanceNow(),n=Math.max(0,frameDuration-(t-last)),last=n+t,setTimeout(function(){for(var e=queue.slice(0),t=queue.length=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(last)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))),queue.push({handle:++id$2,callback:e,cancelled:!1}),id$2},caf=function(e){for(var t=0;t<queue.length;t++)queue[t].handle===e&&(queue[t].cancelled=!0)});var raf_1=function(e){return raf.call(root,e)},cancel=function(){caf.apply(root,arguments)},polyfill$f=function(e){(e=e||root).requestAnimationFrame=raf,e.cancelAnimationFrame=caf};raf_1.cancel=cancel,raf_1.polyfill=polyfill$f;var global$1="undefined"!=typeof self?self:void 0,support={searchParams:"URLSearchParams"in global$1,iterable:"Symbol"in global$1&&"iterator"in Symbol,blob:"FileReader"in global$1&&"Blob"in global$1&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in global$1,arrayBuffer:"ArrayBuffer"in global$1},viewClasses,isArrayBufferView;function isDataView(e){return e&&DataView.prototype.isPrototypeOf(e)}function normalizeName(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function normalizeValue(e){return"string"!=typeof e&&(e=String(e)),e}function iteratorFor(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return support.iterable&&(e[Symbol.iterator]=function(){return e}),e}function Headers(t){this.map={},t instanceof Headers?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function consumed(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function fileReaderReady(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function readBlobAsArrayBuffer(e){var t=new FileReader,n=fileReaderReady(t);return t.readAsArrayBuffer(e),n}function readBlobAsText(e){var t=new FileReader,n=fileReaderReady(t);return t.readAsText(e),n}function readArrayBufferAsText(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function bufferClone(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,(this._bodyInit=e)?"string"==typeof e?this._bodyText=e:support.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:support.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:support.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():support.arrayBuffer&&support.blob&&isDataView(e)?(this._bodyArrayBuffer=bufferClone(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):support.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||isArrayBufferView(e))?this._bodyArrayBuffer=bufferClone(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):support.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},support.blob&&(this.blob=function(){var e=consumed(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var e=consumed(this);if(e)return e;if(this._bodyBlob)return readBlobAsText(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},support.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}support.arrayBuffer&&(viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],isArrayBufferView=ArrayBuffer.isView||function(e){return e&&-1<viewClasses.indexOf(Object.prototype.toString.call(e))}),Headers.prototype.append=function(e,t){e=normalizeName(e),t=normalizeValue(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},Headers.prototype.delete=function(e){delete this.map[normalizeName(e)]},Headers.prototype.get=function(e){return e=normalizeName(e),this.has(e)?this.map[e]:null},Headers.prototype.has=function(e){return this.map.hasOwnProperty(normalizeName(e))},Headers.prototype.set=function(e,t){this.map[normalizeName(e)]=normalizeValue(t)},Headers.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},Headers.prototype.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),iteratorFor(n)},Headers.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),iteratorFor(t)},Headers.prototype.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),iteratorFor(n)},support.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function normalizeMethod(e){var t=e.toUpperCase();return-1<methods.indexOf(t)?t:e}function Request(e,t){var n,r=(t=t||{}).body;if(e instanceof Request){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Headers(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new Headers(t.headers)),this.method=normalizeMethod(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r),"GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache||((n=/([?&])_=[^&]*/).test(this.url)?this.url=this.url.replace(n,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime())}function decode(e){var i=new FormData;return e.trim().split("&").forEach(function(e){var t,n,r;e&&(n=(t=e.split("=")).shift().replace(/\+/g," "),r=t.join("=").replace(/\+/g," "),i.append(decodeURIComponent(n),decodeURIComponent(r)))}),i}function parseHeaders(e){var i=new Headers;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var t,n=e.split(":"),r=n.shift().trim();r&&(t=n.join(":").trim(),i.append(r,t))}),i}function Response(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new Headers(t.headers),this.url=t.url||"",this._initBody(e)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var e=new Response(null,{status:0,statusText:""});return e.type="error",e};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(e,t){if(-1===redirectStatuses.indexOf(t))throw new RangeError("Invalid status code");return new Response(null,{status:t,headers:{location:e}})};var DOMException$1=global$1.DOMException;function fetch$1(o,a){return new Promise(function(n,e){var t=new Request(o,a);if(t.signal&&t.signal.aborted)return e(new DOMException$1("Aborted","AbortError"));var r=new XMLHttpRequest;function i(){r.abort()}r.onload=function(){var e={status:r.status,statusText:r.statusText,headers:parseHeaders(r.getAllResponseHeaders()||"")};e.url="responseURL"in r?r.responseURL:e.headers.get("X-Request-URL");var t="response"in r?r.response:r.responseText;setTimeout(function(){n(new Response(t,e))},0)},r.onerror=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},r.ontimeout=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},r.onabort=function(){setTimeout(function(){e(new DOMException$1("Aborted","AbortError"))},0)},r.open(t.method,function(t){try{return""===t&&global$1.location.href?global$1.location.href:t}catch(e){return t}}(t.url),!0),"include"===t.credentials?r.withCredentials=!0:"omit"===t.credentials&&(r.withCredentials=!1),"responseType"in r&&(support.blob?r.responseType="blob":support.arrayBuffer&&t.headers.get("Content-Type")&&-1!==t.headers.get("Content-Type").indexOf("application/octet-stream")&&(r.responseType="arraybuffer")),t.headers.forEach(function(e,t){r.setRequestHeader(t,e)}),t.signal&&(t.signal.addEventListener("abort",i),r.onreadystatechange=function(){4===r.readyState&&t.signal.removeEventListener("abort",i)}),r.send(void 0===t._bodyInit?null:t._bodyInit)})}"function"!=typeof DOMException$1&&(DOMException$1=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},DOMException$1.prototype=Object.create(Error.prototype),DOMException$1.prototype.constructor=DOMException$1),fetch$1.polyfill=!0,global$1.fetch||(global$1.fetch=fetch$1,global$1.Headers=Headers,global$1.Request=Request,global$1.Response=Response);var lib=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),window.Set||(window.Set=es6Set),window.Map||(window.Map=es6Map),window.Promise||(window.Promise=polyfill$e,window.Promise._immediateFn=setAsap),Array.prototype.find||array_prototype_find.shim(),Array.prototype.findIndex||array_prototype_findindex.shim(),Array.from||array_from.shim(),Object.values||object_values.shim(),Object.assign||object_assign.shim(),window.requestAnimationFrame&&window.cancelAnimationFrame||(window.requestAnimationFrame=raf_1,window.cancelAnimationFrame=raf_1.cancel);var n=window.fetch,r=window.Promise;window.fetch=function(e,t){try{return n(e,t)}catch(n){return new r(function(e,t){return t(n)})}}}),$Math$2=GetIntrinsic("%Math%"),$floor$1=$Math$2.floor,$abs$1=$Math$2.abs,IsInteger=function(e){if("number"!=typeof e||_isNaN(e)||!_isFinite(e))return!1;var t=$abs$1(e);return $floor$1(t)===t},ArrayPush=callBound("Array.prototype.push"),StringFromCharCodeSpread=callBind.apply(String.fromCharCode,null),implementation$8=function(e){var t=arguments,n=[],r=-1,i=arguments.length;if(!i)return"";for(var o="";++r<i;){var a=ToNumber$1(t[r]);if(!IsInteger(a)||a<0||1114111<a)throw RangeError("Invalid code point: "+a);a<=65535?ArrayPush(n,a):ArrayPush(n,55296+((a-=65536)>>10),a%1024+56320),(r+1==i||16384<n.length)&&(o+=StringFromCharCodeSpread(n),n.length=0)}return o},polyfill$g=function(){return String.fromCodePoint||implementation$8},shim$d=function(){var e=polyfill$g();return String.fromCodePoint!==e&&defineProperties_1(String,{fromCodePoint:e}),e};function actionAddEntity(t){return function(e){return e.replace(t)}}function actionReverse(a,i){var o=/^.*(_|:)?(description|name|note|website|ref|source|comment|watch|attribution)(_|:)?/,s=/^([+\-]?)(?=[\d.])/,l=/direction$/,c=/^turn:lanes:?/,r=[[/:right$/,":left"],[/:left$/,":right"],[/:forward$/,":backward"],[/:backward$/,":forward"],[/:right:/,":left:"],[/:left:/,":right:"],[/:forward:/,":backward:"],[/:backward:/,":forward:"]],u={left:"right",right:"left",up:"down",down:"up",forward:"backward",backward:"forward",forwards:"backward",backwards:"forward"},p={forward:"backward",backward:"forward",forwards:"backward",backwards:"forward"},d={yes:"-1",1:"-1","-1":"yes"},f={N:"S",NNE:"SSW",NE:"SW",ENE:"WSW",E:"W",ESE:"WNW",SE:"NW",SSE:"NNW",S:"N",SSW:"NNE",SW:"NE",WSW:"ENE",W:"E",WNW:"ESE",NW:"SE",NNW:"SSE"};function h(e){for(var t=0;t<r.length;++t){var n=r[t];if(n[0].test(e))return e.replace(n[0],n[1])}return e}function g(e,t,n){if(o.test(e))return t;if(c.test(e))return t;if("incline"===e&&s.test(t))return t.replace(s,function(e,t){return"-"===t?"":"-"});if(i&&i.reverseOneway&&"oneway"===e)return d[t]||t;if(n&&l.test(e)){if(f[t])return f[t];var r=parseFloat(t);if("number"==typeof r&&!isNaN(r))return r<180?r+=180:r-=180,r.toString()}return u[t]||t}function m(e,t){for(var n=0;n<t.length;n++){var r=e.hasEntity(t[n]);if(r&&Object.keys(r.tags).length){var i={};for(var o in r.tags)i[h(o)]=g(o,r.tags[o],r.id===a);e=e.replace(r.update({tags:i}))}}return e}function e(e){var t=e.entity(a);return"way"===t.type?function(r,i){var o,e=i.nodes.slice().reverse(),t={};for(var n in i.tags)t[h(n)]=g(n,i.tags[n]);return r.parentRelations(i).forEach(function(n){n.members.forEach(function(e,t){e.id===i.id&&(o=p[e.role])&&(n=n.updateMember({role:o},t),r=r.replace(n))})}),m(r,e).replace(i.update({nodes:e,tags:t}))}(e,t):m(e,[a])}return e.disabled=function(e){var t=e.hasEntity(a);if(!t||"way"===t.type)return!1;for(var n in t.tags){var r=t.tags[n];if(h(n)!==n||g(n,r,!0)!==r)return!1}return"nondirectional_node"},e.entityID=function(){return a},e}function osmIsInterestingTag(e){return"attribution"!==e&&"created_by"!==e&&"source"!==e&&"odbl"!==e&&0!==e.indexOf("source:")&&0!==e.indexOf("source_ref")&&0!==e.indexOf("tiger:")}shim$d(),function(){function t(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}function i(e,t,n){if(t){r(e.prototype,t)}if(n){r(e,n)}return e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t){n(e,t)}}function a(e){a=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return a(e)}function n(e,t){n=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return n(e,t)}function s(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return s(e)}function c(e,t){while(!Object.prototype.hasOwnProperty.call(e,t)){e=a(e);if(e===null){break}}return e}function u(e,t,n){if(typeof Reflect!=="undefined"&&Reflect.get){u=Reflect.get}else{u=function e(t,n,r){var i=c(t,n);if(!i){return}var o=Object.getOwnPropertyDescriptor(i,n);if(o.get){return o.get.call(r)}return o.value}}return u(e,t,n||e)}var p=function(){function e(){t(this,e);Object.defineProperty(this,"listeners",{value:{},writable:true,configurable:true})}i(e,[{key:"addEventListener",value:function e(t,n){if(!(t in this.listeners)){this.listeners[t]=[]}this.listeners[t].push(n)}},{key:"removeEventListener",value:function e(t,n){if(!(t in this.listeners)){return}var r=this.listeners[t];for(var i=0,o=r.length;i<o;i++){if(r[i]===n){r.splice(i,1);return}}}},{key:"dispatchEvent",value:function e(n){var r=this;if(!(n.type in this.listeners)){return}var t=function e(t){setTimeout(function(){return t.call(r,n)})};var i=this.listeners[n.type];for(var o=0,a=i.length;o<a;o++){t(i[o])}return!n.defaultPrevented}}]);return e}(),d=function(e){o(n,e);function n(){var e;t(this,n);e=l(this,a(n).call(this));if(!e.listeners){p.call(s(e))}Object.defineProperty(s(e),"aborted",{value:false,writable:true,configurable:true});Object.defineProperty(s(e),"onabort",{value:null,writable:true,configurable:true});return e}i(n,[{key:"toString",value:function e(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function e(t){if(t.type==="abort"){this.aborted=true;if(typeof this.onabort==="function"){this.onabort.call(this,t)}}u(a(n.prototype),"dispatchEvent",this).call(this,t)}}]);return n}(p),f=function(){function e(){t(this,e);Object.defineProperty(this,"signal",{value:new d,writable:true,configurable:true})}i(e,[{key:"abort",value:function e(){var t;try{t=new Event("abort")}catch(e){if(typeof document!=="undefined"){if(!document.createEvent){t=document.createEventObject();t.type="abort"}else{t=document.createEvent("Event");t.initEvent("abort",false,false)}}else{t={type:"abort",bubbles:false,cancelable:false}}}this.signal.dispatchEvent(t)}},{key:"toString",value:function e(){return"[object AbortController]"}}]);return e}();if(typeof Symbol!=="undefined"&&Symbol.toStringTag){f.prototype[Symbol.toStringTag]="AbortController";d.prototype[Symbol.toStringTag]="AbortSignal"}function h(e){if(e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL){console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill");return true}return typeof e.Request==="function"&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}function g(e){if("function"===typeof e){e={fetch:e}}var t=e,n=t.fetch,r=t.Request,o=r===void 0?n.Request:r,i=t.AbortController,a=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,s=a===void 0?false:a;if(!h({fetch:n,Request:o,AbortController:i,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:s})){return{fetch:n,Request:l}}var l=o;if(l&&!l.prototype.hasOwnProperty("signal")||s){l=function e(t,n){var r;if(n&&n.signal){r=n.signal;delete n.signal}var i=new o(t,n);if(r){Object.defineProperty(i,"signal",{writable:false,enumerable:false,configurable:true,value:r})}return i};l.prototype=o.prototype}var c=n;var u=function e(t,n){var r=l&&l.prototype.isPrototypeOf(t)?t.signal:n?n.signal:undefined;if(r){var i;try{i=new DOMException("Aborted","AbortError")}catch(e){i=new Error("Aborted");i.name="AbortError"}if(r.aborted){return Promise.reject(i)}var o=new Promise(function(e,t){r.addEventListener("abort",function(){return t(i)},{once:true})});if(n&&n.signal){delete n.signal}return Promise.race([o,c(t,n)])}return c(t,n)};return{fetch:u,Request:l}}(function(e){if(!h(e)){return}if(!e.fetch){console.warn("fetch() is not available, cannot install abortcontroller-polyfill");return}var t=g(e),n=t.fetch,r=t.Request;e.fetch=n;e.Request=r;Object.defineProperty(e,"AbortController",{writable:true,enumerable:false,configurable:true,value:f});Object.defineProperty(e,"AbortSignal",{writable:true,enumerable:false,configurable:true,value:d})})(typeof self!=="undefined"?self:commonjsGlobal)}();var osmAreaKeys={};function osmSetAreaKeys(e){osmAreaKeys=e}function osmTagSuggestingArea(e){if("yes"===e.area)return{area:"yes"};if("no"===e.area)return null;var t={highway:{rest_area:!0,services:!0},railway:{roundhouse:!0,station:!0,traverser:!0,turntable:!0,wash:!0}},n={};for(var r in e){if(r in osmAreaKeys&&!(e[r]in osmAreaKeys[r]))return n[r]=e[r],n;if(r in t&&e[r]in t[r])return n[r]=e[r],n}return null}var osmPointTags={};function osmSetPointTags(e){osmPointTags=e}var osmVertexTags={};function osmSetVertexTags(e){osmVertexTags=e}function osmNodeGeometriesForTags(e){var t={};for(var n in e)if(osmPointTags[n]&&(osmPointTags[n]["*"]||osmPointTags[n][e[n]])&&(t.point=!0),osmVertexTags[n]&&(osmVertexTags[n]["*"]||osmVertexTags[n][e[n]])&&(t.vertex=!0),t.point&&t.vertex)break;return t}var osmOneWayTags={aerialway:{chair_lift:!0,drag_lift:!0,"j-bar":!0,magic_carpet:!0,mixed_lift:!0,platter:!0,rope_tow:!0,"t-bar":!0,zip_line:!0},highway:{motorway:!0},junction:{circular:!0,roundabout:!0},man_made:{goods_conveyor:!0,"piste:halfpipe":!0},"piste:type":{downhill:!0,sled:!0,yes:!0},waterway:{canal:!0,ditch:!0,drain:!0,fish_pass:!0,river:!0,stream:!0,tidal_channel:!0}},osmPavedTags={surface:{paved:!0,asphalt:!0,concrete:!0,"concrete:lanes":!0,"concrete:plates":!0},tracktype:{grade1:!0}},osmSemipavedTags={surface:{cobblestone:!0,"cobblestone:flattened":!0,unhewn_cobblestone:!0,sett:!0,paving_stones:!0,metal:!0,wood:!0}},osmRightSideIsInsideTags={natural:{cliff:!0,coastline:"coastline"},barrier:{retaining_wall:!0,kerb:!0,guard_rail:!0,city_wall:!0},man_made:{embankment:!0},waterway:{weir:!0}},osmRoutableHighwayTagValues={motorway:!0,trunk:!0,primary:!0,secondary:!0,tertiary:!0,residential:!0,motorway_link:!0,trunk_link:!0,primary_link:!0,secondary_link:!0,tertiary_link:!0,unclassified:!0,road:!0,service:!0,track:!0,living_street:!0,bus_guideway:!0,path:!0,footway:!0,cycleway:!0,bridleway:!0,pedestrian:!0,corridor:!0,steps:!0},osmPathHighwayTagValues={path:!0,footway:!0,cycleway:!0,bridleway:!0,pedestrian:!0,corridor:!0,steps:!0},osmRailwayTrackTagValues={rail:!0,light_rail:!0,tram:!0,subway:!0,monorail:!0,funicular:!0,miniature:!0,narrow_gauge:!0,disused:!0,preserved:!0},osmFlowingWaterwayTagValues={canal:!0,ditch:!0,drain:!0,fish_pass:!0,river:!0,stream:!0,tidal_channel:!0};function adder(){return new Adder}function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(e){add(temp,e,this.t),add(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t},valueOf:function(){return this.s}};var temp=new Adder;function add(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}var epsilon=1e-6,epsilon2=1e-12,pi=Math.PI,halfPi=pi/2,quarterPi=pi/4,tau=2*pi,degrees=180/pi,radians=pi/180,abs$2=Math.abs,atan=Math.atan,atan2=Math.atan2,cos=Math.cos,exp=Math.exp,log=Math.log,sin=Math.sin,sign$2=Math.sign||function(e){return 0<e?1:e<0?-1:0},sqrt=Math.sqrt,tan=Math.tan;function acos(e){return 1<e?0:e<-1?pi:Math.acos(e)}function asin(e){return 1<e?halfPi:e<-1?-halfPi:Math.asin(e)}function noop$2(){}function streamGeometry(e,t){e&&streamGeometryType.hasOwnProperty(e.type)&&streamGeometryType[e.type](e,t)}var streamObjectType={Feature:function(e,t){streamGeometry(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)streamGeometry(n[r].geometry,t)}},streamGeometryType={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){streamLine(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)streamLine(n[r],t,0)},Polygon:function(e,t){streamPolygon(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)streamPolygon(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)streamGeometry(n[r],t)}};function streamLine(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function streamPolygon(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)streamLine(e[n],t,1);t.polygonEnd()}function d3_geoStream(e,t){e&&streamObjectType.hasOwnProperty(e.type)?streamObjectType[e.type](e,t):streamGeometry(e,t)}var areaRingSum=adder(),areaSum=adder(),lambda00,phi00,lambda0,cosPhi0,sinPhi0,areaStream={point:noop$2,lineStart:noop$2,lineEnd:noop$2,polygonStart:function(){areaRingSum.reset(),areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){var e=+areaRingSum;areaSum.add(e<0?tau+e:e),this.lineStart=this.lineEnd=this.point=noop$2},sphere:function(){areaSum.add(tau)}};function areaRingStart(){areaStream.point=areaPointFirst}function areaRingEnd(){areaPoint(lambda00,phi00)}function areaPointFirst(e,t){areaStream.point=areaPoint,lambda00=e,phi00=t,lambda0=e*=radians,cosPhi0=cos(t=(t*=radians)/2+quarterPi),sinPhi0=sin(t)}function areaPoint(e,t){var n=(e*=radians)-lambda0,r=0<=n?1:-1,i=r*n,o=cos(t=(t*=radians)/2+quarterPi),a=sin(t),s=sinPhi0*a,l=cosPhi0*o+s*cos(i),c=s*r*sin(i);areaRingSum.add(atan2(c,l)),lambda0=e,cosPhi0=o,sinPhi0=a}function d3_geoArea(e){return areaSum.reset(),d3_geoStream(e,areaStream),2*areaSum}function spherical(e){return[atan2(e[1],e[0]),asin(e[2])]}function cartesian(e){var t=e[0],n=e[1],r=cos(n);return[r*cos(t),r*sin(t),sin(n)]}function cartesianDot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cartesianCross(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function cartesianAddInPlace(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function cartesianScale(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function cartesianNormalizeInPlace(e){var t=sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var lambda0$1,phi0,lambda1,phi1,lambda2,lambda00$1,phi00$1,p0,deltaSum=adder(),ranges,range,boundsStream={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream.point=boundsRingPoint,boundsStream.lineStart=boundsRingStart,boundsStream.lineEnd=boundsRingEnd,deltaSum.reset(),areaStream.polygonStart()},polygonEnd:function(){areaStream.polygonEnd(),boundsStream.point=boundsPoint,boundsStream.lineStart=boundsLineStart,boundsStream.lineEnd=boundsLineEnd,areaRingSum<0?(lambda0$1=-(lambda1=180),phi0=-(phi1=90)):epsilon<deltaSum?phi1=90:deltaSum<-epsilon&&(phi0=-90),range[0]=lambda0$1,range[1]=lambda1},sphere:function(){lambda0$1=-(lambda1=180),phi0=-(phi1=90)}},W0,W1,X0,Y0,Z0,X1,Y1,Z1,X2,Y2,Z2,lambda00$2,phi00$2,x0,y0,z0;function boundsPoint(e,t){ranges.push(range=[lambda0$1=e,lambda1=e]),t<phi0&&(phi0=t),phi1<t&&(phi1=t)}function linePoint(e,t){var n,r,i,o,a,s,l,c=cartesian([e*radians,t*radians]);p0?(n=cartesianCross(p0,c),cartesianNormalizeInPlace(r=cartesianCross([n[1],-n[0],0],n)),r=spherical(r),o=0<(i=e-lambda2)?1:-1,a=r[0]*degrees*o,(l=180<abs$2(i))^(o*lambda2<a&&a<o*e)?(s=r[1]*degrees,phi1<s&&(phi1=s)):l^(o*lambda2<(a=(a+360)%360-180)&&a<o*e)?(s=-r[1]*degrees)<phi0&&(phi0=s):(t<phi0&&(phi0=t),phi1<t&&(phi1=t)),l?e<lambda2?angle(lambda0$1,e)>angle(lambda0$1,lambda1)&&(lambda1=e):angle(e,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=e):lambda0$1<=lambda1?(e<lambda0$1&&(lambda0$1=e),lambda1<e&&(lambda1=e)):lambda2<e?angle(lambda0$1,e)>angle(lambda0$1,lambda1)&&(lambda1=e):angle(e,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=e)):ranges.push(range=[lambda0$1=e,lambda1=e]),t<phi0&&(phi0=t),phi1<t&&(phi1=t),p0=c,lambda2=e}function boundsLineStart(){boundsStream.point=linePoint}function boundsLineEnd(){range[0]=lambda0$1,range[1]=lambda1,boundsStream.point=boundsPoint,p0=null}function boundsRingPoint(e,t){var n;p0?(n=e-lambda2,deltaSum.add(180<abs$2(n)?n+(0<n?360:-360):n)):(lambda00$1=e,phi00$1=t),areaStream.point(e,t),linePoint(e,t)}function boundsRingStart(){areaStream.lineStart()}function boundsRingEnd(){boundsRingPoint(lambda00$1,phi00$1),areaStream.lineEnd(),abs$2(deltaSum)>epsilon&&(lambda0$1=-(lambda1=180)),range[0]=lambda0$1,range[1]=lambda1,p0=null}function angle(e,t){return(t-=e)<0?t+360:t}function rangeCompare(e,t){return e[0]-t[0]}function rangeContains(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function d3_geoBounds(e){var t,n,r,i,o,a,s;if(phi1=lambda1=-(lambda0$1=phi0=1/0),ranges=[],d3_geoStream(e,boundsStream),n=ranges.length){for(ranges.sort(rangeCompare),t=1,o=[r=ranges[0]];t<n;++t)rangeContains(r,(i=ranges[t])[0])||rangeContains(r,i[1])?(angle(r[0],i[1])>angle(r[0],r[1])&&(r[1]=i[1]),angle(i[0],r[1])>angle(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,t=0,r=o[n=o.length-1];t<=n;r=i,++t)i=o[t],(s=angle(r[1],i[0]))>a&&(a=s,lambda0$1=i[0],lambda1=r[1])}return ranges=range=null,lambda0$1===1/0||phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[lambda0$1,phi0],[lambda1,phi1]]}var centroidStream={sphere:noop$2,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd}};function centroidPoint(e,t){e*=radians;var n=cos(t*=radians);centroidPointCartesian(n*cos(e),n*sin(e),sin(t))}function centroidPointCartesian(e,t,n){X0+=(e-X0)/++W0,Y0+=(t-Y0)/W0,Z0+=(n-Z0)/W0}function centroidLineStart(){centroidStream.point=centroidLinePointFirst}function centroidLinePointFirst(e,t){e*=radians;var n=cos(t*=radians);x0=n*cos(e),y0=n*sin(e),z0=sin(t),centroidStream.point=centroidLinePoint,centroidPointCartesian(x0,y0,z0)}function centroidLinePoint(e,t){e*=radians;var n=cos(t*=radians),r=n*cos(e),i=n*sin(e),o=sin(t),a=atan2(sqrt((a=y0*o-z0*i)*a+(a=z0*r-x0*o)*a+(a=x0*i-y0*r)*a),x0*r+y0*i+z0*o);W1+=a,X1+=a*(x0+(x0=r)),Y1+=a*(y0+(y0=i)),Z1+=a*(z0+(z0=o)),centroidPointCartesian(x0,y0,z0)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(lambda00$2,phi00$2),centroidStream.point=centroidPoint}function centroidRingPointFirst(e,t){lambda00$2=e,phi00$2=t,e*=radians,t*=radians,centroidStream.point=centroidRingPoint;var n=cos(t);x0=n*cos(e),y0=n*sin(e),z0=sin(t),centroidPointCartesian(x0,y0,z0)}function centroidRingPoint(e,t){e*=radians;var n=cos(t*=radians),r=n*cos(e),i=n*sin(e),o=sin(t),a=y0*o-z0*i,s=z0*r-x0*o,l=x0*i-y0*r,c=sqrt(a*a+s*s+l*l),u=asin(c),p=c&&-u/c;X2+=p*a,Y2+=p*s,Z2+=p*l,W1+=u,X1+=u*(x0+(x0=r)),Y1+=u*(y0+(y0=i)),Z1+=u*(z0+(z0=o)),centroidPointCartesian(x0,y0,z0)}function d3_geoCentroid(e){W0=W1=X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,d3_geoStream(e,centroidStream);var t=X2,n=Y2,r=Z2,i=t*t+n*n+r*r;return i<epsilon2&&(t=X1,n=Y1,r=Z1,W1<epsilon&&(t=X0,n=Y0,r=Z0),(i=t*t+n*n+r*r)<epsilon2)?[NaN,NaN]:[atan2(n,t)*degrees,asin(r/sqrt(i))*degrees]}function compose(n,r){function e(e,t){return e=n(e,t),r(e[0],e[1])}return n.invert&&r.invert&&(e.invert=function(e,t){return(e=r.invert(e,t))&&n.invert(e[0],e[1])}),e}function rotationIdentity(e,t){return[abs$2(e)>pi?e+Math.round(-e/tau)*tau:e,t]}function rotateRadians(e,t,n){return(e%=tau)?t||n?compose(rotationLambda(e),rotationPhiGamma(t,n)):rotationLambda(e):t||n?rotationPhiGamma(t,n):rotationIdentity}function forwardRotationLambda(n){return function(e,t){return[pi<(e+=n)?e-tau:e<-pi?e+tau:e,t]}}function rotationLambda(e){var t=forwardRotationLambda(e);return t.invert=forwardRotationLambda(-e),t}function rotationPhiGamma(e,t){var s=cos(e),l=sin(e),c=cos(t),u=sin(t);function n(e,t){var n=cos(t),r=cos(e)*n,i=sin(e)*n,o=sin(t),a=o*s+r*l;return[atan2(i*c-a*u,r*s-o*l),asin(a*c+i*u)]}return n.invert=function(e,t){var n=cos(t),r=cos(e)*n,i=sin(e)*n,o=sin(t),a=o*c-i*u;return[atan2(i*c+o*u,r*s+a*l),asin(a*s-r*l)]},n}function rotation(t){function e(e){return(e=t(e[0]*radians,e[1]*radians))[0]*=degrees,e[1]*=degrees,e}return t=rotateRadians(t[0]*radians,t[1]*radians,2<t.length?t[2]*radians:0),e.invert=function(e){return(e=t.invert(e[0]*radians,e[1]*radians))[0]*=degrees,e[1]*=degrees,e},e}function circleStream(e,t,n,r,i,o){if(n){var a=cos(t),s=sin(t),l=r*n;null==i?(i=t+r*tau,o=t-l/2):(i=circleRadius(a,i),o=circleRadius(a,o),(0<r?i<o:o<i)&&(i+=r*tau));for(var c,u=i;0<r?o<u:u<o;u-=l)c=spherical([a,-s*cos(u),-s*sin(u)]),e.point(c[0],c[1])}}function circleRadius(e,t){(t=cartesian(t))[0]-=e,cartesianNormalizeInPlace(t);var n=acos(-t[1]);return((-t[2]<0?-n:n)+tau-epsilon)%tau}function clipBuffer(){var r,t=[];return{point:function(e,t,n){r.push([e,t,n])},lineStart:function(){t.push(r=[])},lineEnd:noop$2,rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],r=null,e}}}function pointEqual(e,t){return abs$2(e[0]-t[0])<epsilon&&abs$2(e[1]-t[1])<epsilon}function Intersection(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function clipRejoin(e,t,n,r,o){var a,i,s=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],i=e[t];if(pointEqual(r,i)){if(!r[2]&&!i[2]){for(o.lineStart(),a=0;a<t;++a)o.point((r=e[a])[0],r[1]);return void o.lineEnd()}i[0]+=2*epsilon}s.push(n=new Intersection(r,e,null,!0)),l.push(n.o=new Intersection(r,null,n,!1)),s.push(n=new Intersection(i,e,null,!1)),l.push(n.o=new Intersection(i,null,n,!0))}}),s.length){for(l.sort(t),link(s),link(l),a=0,i=l.length;a<i;++a)l[a].e=n=!n;for(var c,u,p=s[0];;){for(var d=p,f=!0;d.v;)if((d=d.n)===p)return;c=d.z,o.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(a=0,i=c.length;a<i;++a)o.point((u=c[a])[0],u[1]);else r(d.x,d.n.x,1,o);d=d.n}else{if(f)for(c=d.p.z,a=c.length-1;0<=a;--a)o.point((u=c[a])[0],u[1]);else r(d.x,d.p.x,-1,o);d=d.p}c=(d=d.o).z,f=!f}while(!d.v);o.lineEnd()}}}function link(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}rotationIdentity.invert=rotationIdentity;var sum=adder();function longitude(e){return abs$2(e[0])<=pi?e[0]:sign$2(e[0])*((abs$2(e[0])+pi)%tau-pi)}function polygonContains(e,t){var n=longitude(t),r=t[1],i=sin(r),o=[sin(n),-cos(n),0],a=0,s=0;sum.reset(),1===i?r=halfPi+epsilon:-1===i&&(r=-halfPi-epsilon);for(var l=0,c=e.length;l<c;++l)if(p=(u=e[l]).length)for(var u,p,d=u[p-1],f=longitude(d),h=d[1]/2+quarterPi,g=sin(h),m=cos(h),y=0;y<p;++y,f=x,g=E,m=C,d=w){var v,_,b,w=u[y],x=longitude(w),S=w[1]/2+quarterPi,E=sin(S),C=cos(S),A=x-f,I=0<=A?1:-1,k=I*A,N=pi<k,P=g*E;sum.add(atan2(P*I*sin(k),m*C+P*cos(k))),a+=N?A+I*tau:A,N^n<=f^n<=x&&(cartesianNormalizeInPlace(v=cartesianCross(cartesian(d),cartesian(w))),cartesianNormalizeInPlace(_=cartesianCross(o,v)),((b=(N^0<=A?-1:1)*asin(_[2]))<r||r===b&&(v[0]||v[1]))&&(s+=N^0<=A?1:-1))}return(a<-epsilon||a<epsilon&&sum<-epsilon)^1&s}function d3_ascending(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function d3_bisector(o){return 1===o.length&&(o=ascendingComparator(o)),{left:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;o(e[i],t)<0?n=1+i:r=i}return n},right:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;0<o(e[i],t)?r=i:n=1+i}return n}}}function ascendingComparator(n){return function(e,t){return d3_ascending(n(e),t)}}var ascendingBisect=d3_bisector(d3_ascending),bisectRight=ascendingBisect.right;function d3_descending(e,t){return t<e?-1:e<t?1:e<=t?0:NaN}function number(e){return null===e?NaN:+e}function range$1(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function ticks(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&0<n)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=tickIncrement(e,t,n))||!isFinite(a))return[];if(0<a)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(e-s)/a;return r&&o.reverse(),o}function tickIncrement(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return 0<=i?(e10<=o?10:e5<=o?5:e2<=o?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(e10<=o?10:e5<=o?5:e2<=o?2:1)}function tickStep(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return e10<=o?i*=10:e5<=o?i*=5:e2<=o&&(i*=2),t<e?-i:i}function threshold(e,t,n){if(null==n&&(n=number),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(1<=t)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}function d3_median(e,t){var n,r=e.length,i=-1,o=[];if(null==t)for(;++i<r;)isNaN(n=number(e[i]))||o.push(n);else for(;++i<r;)isNaN(n=number(t(e[i],i,e)))||o.push(n);return threshold(o.sort(d3_ascending),.5)}function merge(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);0<=--i;)for(t=(r=e[i]).length;0<=--t;)n[--a]=r[t];return n}function clip(m,y,v,_){return function(s){var l,c,u,n=y(s),p=clipBuffer(),d=y(p),f=!1,t={point:r,lineStart:i,lineEnd:o,polygonStart:function(){t.point=h,t.lineStart=a,t.lineEnd=g,c=[],l=[]},polygonEnd:function(){t.point=r,t.lineStart=i,t.lineEnd=o,c=merge(c);var e=polygonContains(l,_);c.length?(f||(s.polygonStart(),f=!0),clipRejoin(c,compareIntersection,e,v,s)):e&&(f||(s.polygonStart(),f=!0),s.lineStart(),v(null,null,1,s),s.lineEnd()),f&&(s.polygonEnd(),f=!1),c=l=null},sphere:function(){s.polygonStart(),s.lineStart(),v(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function r(e,t){m(e,t)&&s.point(e,t)}function e(e,t){n.point(e,t)}function i(){t.point=e,n.lineStart()}function o(){t.point=r,n.lineEnd()}function h(e,t){u.push([e,t]),d.point(e,t)}function a(){d.lineStart(),u=[]}function g(){h(u[0][0],u[0][1]),d.lineEnd();var e,t,n,r,i=d.clean(),o=p.result(),a=o.length;if(u.pop(),l.push(u),u=null,a)if(1&i){if(0<(t=(n=o[0]).length-1)){for(f||(s.polygonStart(),f=!0),s.lineStart(),e=0;e<t;++e)s.point((r=n[e])[0],r[1]);s.lineEnd()}}else 1<a&&2&i&&o.push(o.pop().concat(o.shift())),c.push(o.filter(validSegment))}return t}}function validSegment(e){return 1<e.length}function compareIntersection(e,t){return((e=e.x)[0]<0?e[1]-halfPi-epsilon:halfPi-e[1])-((t=t.x)[0]<0?t[1]-halfPi-epsilon:halfPi-t[1])}var clipAntimeridian=clip(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi,-halfPi]);function clipAntimeridianLine(i){var o,a=NaN,s=NaN,l=NaN;return{lineStart:function(){i.lineStart(),o=1},point:function(e,t){var n=0<e?pi:-pi,r=abs$2(e-a);abs$2(r-pi)<epsilon?(i.point(a,s=0<(s+t)/2?halfPi:-halfPi),i.point(l,s),i.lineEnd(),i.lineStart(),i.point(n,s),i.point(e,s),o=0):l!==n&&pi<=r&&(abs$2(a-l)<epsilon&&(a-=l*epsilon),abs$2(e-n)<epsilon&&(e-=n*epsilon),s=clipAntimeridianIntersect(a,s,e,t),i.point(l,s),i.lineEnd(),i.lineStart(),i.point(n,s),o=0),i.point(a=e,s=t),l=n},lineEnd:function(){i.lineEnd(),a=s=NaN},clean:function(){return 2-o}}}function clipAntimeridianIntersect(e,t,n,r){var i,o,a=sin(e-n);return abs$2(a)>epsilon?atan((sin(t)*(o=cos(r))*sin(n)-sin(r)*(i=cos(t))*sin(e))/(i*o*a)):(t+r)/2}function clipAntimeridianInterpolate(e,t,n,r){var i,o;null==e?(o=n*halfPi,r.point(-pi,o),r.point(0,o),r.point(pi,o),r.point(pi,0),r.point(pi,-o),r.point(0,-o),r.point(-pi,-o),r.point(-pi,0),r.point(-pi,o)):abs$2(e[0]-t[0])>epsilon?(o=n*(i=e[0]<t[0]?pi:-pi)/2,r.point(-i,o),r.point(0,o),r.point(i,o)):r.point(t[0],t[1])}function clipCircle(i){var A=cos(i),o=6*radians,f=0<A,h=abs$2(A)>epsilon;function g(e,t){return cos(e)*cos(t)>A}function m(e,t,n){var r=[1,0,0],i=cartesianCross(cartesian(e),cartesian(t)),o=cartesianDot(i,i),a=i[0],s=o-a*a;if(!s)return!n&&e;var l=A*o/s,c=-A*a/s,u=cartesianCross(r,i),p=cartesianScale(r,l);cartesianAddInPlace(p,cartesianScale(i,c));var d=u,f=cartesianDot(p,d),h=cartesianDot(d,d),g=f*f-h*(cartesianDot(p,p)-1);if(!(g<0)){var m=sqrt(g),y=cartesianScale(d,(-f-m)/h);if(cartesianAddInPlace(y,p),y=spherical(y),!n)return y;var v,_=e[0],b=t[0],w=e[1],x=t[1];b<_&&(v=_,_=b,b=v);var S=b-_,E=abs$2(S-pi)<epsilon;if(!E&&x<w&&(v=w,w=x,x=v),E||S<epsilon?E?0<w+x^y[1]<(abs$2(y[0]-_)<epsilon?w:x):w<=y[1]&&y[1]<=x:pi<S^(_<=y[0]&&y[0]<=b)){var C=cartesianScale(d,(-f+m)/h);return cartesianAddInPlace(C,p),[y,spherical(C)]}}}function y(e,t){var n=f?i:pi-i,r=0;return e<-n?r|=1:n<e&&(r|=2),t<-n?r|=4:n<t&&(r|=8),r}return clip(g,function(s){var l,c,u,p,d;return{lineStart:function(){p=u=!1,d=1},point:function(e,t){var n,r,i=[e,t],o=g(e,t),a=f?o?0:y(e,t):o?y(e+(e<0?pi:-pi),t):0;!l&&(p=u=o)&&s.lineStart(),o!==u&&((n=m(l,i))&&!pointEqual(l,n)&&!pointEqual(i,n)||(i[2]=1)),o!==u?(d=0,o?(s.lineStart(),n=m(i,l),s.point(n[0],n[1])):(n=m(l,i),s.point(n[0],n[1],2),s.lineEnd()),l=n):h&&l&&f^o&&(a&c||!(r=m(i,l,!0))||(d=0,f?(s.lineStart(),s.point(r[0][0],r[0][1]),s.point(r[1][0],r[1][1]),s.lineEnd()):(s.point(r[1][0],r[1][1]),s.lineEnd(),s.lineStart(),s.point(r[0][0],r[0][1],3)))),!o||l&&pointEqual(l,i)||s.point(i[0],i[1]),l=i,u=o,c=a},lineEnd:function(){u&&s.lineEnd(),l=null},clean:function(){return d|(p&&u)<<1}}},function(e,t,n,r){circleStream(r,i,o,n,e,t)},f?[0,-i]:[-pi,i-pi])}function clipLine(e,t,n,r,i,o){var a=e[0],s=e[1],l=0,c=1,u=t[0]-a,p=t[1]-s,d=n-a;if(u||!(0<d)){if(d/=u,u<0){if(d<l)return;d<c&&(c=d)}else if(0<u){if(c<d)return;l<d&&(l=d)}if(d=i-a,u||!(d<0)){if(d/=u,u<0){if(c<d)return;l<d&&(l=d)}else if(0<u){if(d<l)return;d<c&&(c=d)}if(d=r-s,p||!(0<d)){if(d/=p,p<0){if(d<l)return;d<c&&(c=d)}else if(0<p){if(c<d)return;l<d&&(l=d)}if(d=o-s,p||!(d<0)){if(d/=p,p<0){if(c<d)return;l<d&&(l=d)}else if(0<p){if(d<l)return;d<c&&(c=d)}return 0<l&&(e[0]=a+l*u,e[1]=s+l*p),c<1&&(t[0]=a+c*u,t[1]=s+c*p),1}}}}}var clipMax=1e9,clipMin=-clipMax;function clipRectangle(y,v,_,b){function w(e,t){return y<=e&&e<=_&&v<=t&&t<=b}function x(e,t,n,r){var i=0,o=0;if(null==e||(i=a(e,n))!==(o=a(t,n))||s(e,t)<0^0<n)for(;r.point(0===i||3===i?y:_,1<i?b:v),(i=(i+n+4)%4)!==o;);else r.point(t[0],t[1])}function a(e,t){return abs$2(e[0]-y)<epsilon?0<t?0:3:abs$2(e[0]-_)<epsilon?0<t?2:1:abs$2(e[1]-v)<epsilon?0<t?1:0:0<t?3:2}function S(e,t){return s(e.x,t.x)}function s(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(r){var i,p,o,a,s,l,c,u,d,f,h,g=r,e=clipBuffer(),t={point:n,lineStart:function(){t.point=m,p&&p.push(o=[]);f=!0,d=!1,c=u=NaN},lineEnd:function(){i&&(m(a,s),l&&d&&e.rejoin(),i.push(e.result()));t.point=n,d&&g.lineEnd()},polygonStart:function(){g=e,i=[],p=[],h=!0},polygonEnd:function(){var e=function(){for(var e=0,t=0,n=p.length;t<n;++t)for(var r,i,o=p[t],a=1,s=o.length,l=o[0],c=l[0],u=l[1];a<s;++a)r=c,i=u,l=o[a],c=l[0],u=l[1],i<=b?b<u&&(u-i)*(y-r)<(c-r)*(b-i)&&++e:u<=b&&(c-r)*(b-i)<(u-i)*(y-r)&&--e;return e}(),t=h&&e,n=(i=merge(i)).length;(t||n)&&(r.polygonStart(),t&&(r.lineStart(),x(null,null,1,r),r.lineEnd()),n&&clipRejoin(i,S,e,x,r),r.polygonEnd());g=r,i=p=o=null}};function n(e,t){w(e,t)&&g.point(e,t)}function m(e,t){var n,r,i=w(e,t);p&&o.push([e,t]),f?(a=e,s=t,f=!1,(l=i)&&(g.lineStart(),g.point(e,t))):i&&d?g.point(e,t):clipLine(n=[c=Math.max(clipMin,Math.min(clipMax,c)),u=Math.max(clipMin,Math.min(clipMax,u))],r=[e=Math.max(clipMin,Math.min(clipMax,e)),t=Math.max(clipMin,Math.min(clipMax,t))],y,v,_,b)?(d||(g.lineStart(),g.point(n[0],n[1])),g.point(r[0],r[1]),i||g.lineEnd(),h=!1):i&&(g.lineStart(),g.point(e,t),h=!1),c=e,u=t,d=i}return t}}var lengthSum=adder(),lambda0$2,sinPhi0$1,cosPhi0$1,lengthStream={sphere:noop$2,point:noop$2,lineStart:lengthLineStart,lineEnd:noop$2,polygonStart:noop$2,polygonEnd:noop$2};function lengthLineStart(){lengthStream.point=lengthPointFirst,lengthStream.lineEnd=lengthLineEnd}function lengthLineEnd(){lengthStream.point=lengthStream.lineEnd=noop$2}function lengthPointFirst(e,t){lambda0$2=e*=radians,sinPhi0$1=sin(t*=radians),cosPhi0$1=cos(t),lengthStream.point=lengthPoint}function lengthPoint(e,t){e*=radians;var n=sin(t*=radians),r=cos(t),i=abs$2(e-lambda0$2),o=cos(i),a=r*sin(i),s=cosPhi0$1*n-sinPhi0$1*r*o,l=sinPhi0$1*n+cosPhi0$1*r*o;lengthSum.add(atan2(sqrt(a*a+s*s),l)),lambda0$2=e,sinPhi0$1=n,cosPhi0$1=r}function d3_geoLength(e){return lengthSum.reset(),d3_geoStream(e,lengthStream),+lengthSum}function identity(e){return e}var areaSum$1=adder(),areaRingSum$1=adder(),x00,y00,x0$1,y0$1,areaStream$1={point:noop$2,lineStart:noop$2,lineEnd:noop$2,polygonStart:function(){areaStream$1.lineStart=areaRingStart$1,areaStream$1.lineEnd=areaRingEnd$1},polygonEnd:function(){areaStream$1.lineStart=areaStream$1.lineEnd=areaStream$1.point=noop$2,areaSum$1.add(abs$2(areaRingSum$1)),areaRingSum$1.reset()},result:function(){var e=areaSum$1/2;return areaSum$1.reset(),e}};function areaRingStart$1(){areaStream$1.point=areaPointFirst$1}function areaPointFirst$1(e,t){areaStream$1.point=areaPoint$1,x00=x0$1=e,y00=y0$1=t}function areaPoint$1(e,t){areaRingSum$1.add(y0$1*e-x0$1*t),x0$1=e,y0$1=t}function areaRingEnd$1(){areaPoint$1(x00,y00)}var x0$2=1/0,y0$2=x0$2,x1=-x0$2,y1=x1,boundsStream$1={point:boundsPoint$1,lineStart:noop$2,lineEnd:noop$2,polygonStart:noop$2,polygonEnd:noop$2,result:function(){var e=[[x0$2,y0$2],[x1,y1]];return x1=y1=-(y0$2=x0$2=1/0),e}};function boundsPoint$1(e,t){e<x0$2&&(x0$2=e),x1<e&&(x1=e),t<y0$2&&(y0$2=t),y1<t&&(y1=t)}var X0$1=0,Y0$1=0,Z0$1=0,X1$1=0,Y1$1=0,Z1$1=0,X2$1=0,Y2$1=0,Z2$1=0,x00$1,y00$1,x0$3,y0$3,centroidStream$1={point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){centroidStream$1.lineStart=centroidRingStart$1,centroidStream$1.lineEnd=centroidRingEnd$1},polygonEnd:function(){centroidStream$1.point=centroidPoint$1,centroidStream$1.lineStart=centroidLineStart$1,centroidStream$1.lineEnd=centroidLineEnd$1},result:function(){var e=Z2$1?[X2$1/Z2$1,Y2$1/Z2$1]:Z1$1?[X1$1/Z1$1,Y1$1/Z1$1]:Z0$1?[X0$1/Z0$1,Y0$1/Z0$1]:[NaN,NaN];return X0$1=Y0$1=Z0$1=X1$1=Y1$1=Z1$1=X2$1=Y2$1=Z2$1=0,e}};function centroidPoint$1(e,t){X0$1+=e,Y0$1+=t,++Z0$1}function centroidLineStart$1(){centroidStream$1.point=centroidPointFirstLine}function centroidPointFirstLine(e,t){centroidStream$1.point=centroidPointLine,centroidPoint$1(x0$3=e,y0$3=t)}function centroidPointLine(e,t){var n=e-x0$3,r=t-y0$3,i=sqrt(n*n+r*r);X1$1+=i*(x0$3+e)/2,Y1$1+=i*(y0$3+t)/2,Z1$1+=i,centroidPoint$1(x0$3=e,y0$3=t)}function centroidLineEnd$1(){centroidStream$1.point=centroidPoint$1}function centroidRingStart$1(){centroidStream$1.point=centroidPointFirstRing}function centroidRingEnd$1(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(e,t){centroidStream$1.point=centroidPointRing,centroidPoint$1(x00$1=x0$3=e,y00$1=y0$3=t)}function centroidPointRing(e,t){var n=e-x0$3,r=t-y0$3,i=sqrt(n*n+r*r);X1$1+=i*(x0$3+e)/2,Y1$1+=i*(y0$3+t)/2,Z1$1+=i,X2$1+=(i=y0$3*e-x0$3*t)*(x0$3+e),Y2$1+=i*(y0$3+t),Z2$1+=3*i,centroidPoint$1(x0$3=e,y0$3=t)}function PathContext(e){this._context=e}PathContext.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,tau)}},result:noop$2};var lengthSum$1=adder(),lengthRing,x00$2,y00$2,x0$4,y0$4,lengthStream$1={point:noop$2,lineStart:function(){lengthStream$1.point=lengthPointFirst$1},lineEnd:function(){lengthRing&&lengthPoint$1(x00$2,y00$2),lengthStream$1.point=noop$2},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var e=+lengthSum$1;return lengthSum$1.reset(),e}};function lengthPointFirst$1(e,t){lengthStream$1.point=lengthPoint$1,x00$2=x0$4=e,y00$2=y0$4=t}function lengthPoint$1(e,t){x0$4-=e,y0$4-=t,lengthSum$1.add(sqrt(x0$4*x0$4+y0$4*y0$4)),x0$4=e,y0$4=t}function PathString(){this._string=[]}function circle(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function d3_geoPath(t,n){var r,i,o=4.5;function a(e){return e&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),d3_geoStream(e,r(i))),i.result()}return a.area=function(e){return d3_geoStream(e,r(areaStream$1)),areaStream$1.result()},a.measure=function(e){return d3_geoStream(e,r(lengthStream$1)),lengthStream$1.result()},a.bounds=function(e){return d3_geoStream(e,r(boundsStream$1)),boundsStream$1.result()},a.centroid=function(e){return d3_geoStream(e,r(centroidStream$1)),centroidStream$1.result()},a.projection=function(e){return arguments.length?(r=null==e?(t=null,identity):(t=e).stream,a):t},a.context=function(e){return arguments.length?(i=null==e?(n=null,new PathString):new PathContext(n=e),"function"!=typeof o&&i.pointRadius(o),a):n},a.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(i.pointRadius(+e),+e),a):o},a.projection(t).context(n)}function d3_geoTransform(e){return{stream:transformer(e)}}function transformer(r){return function(e){var t=new TransformStream;for(var n in r)t[n]=r[n];return t.stream=e,t}}function TransformStream(){}function fit(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),d3_geoStream(n,e.stream(boundsStream$1)),t(boundsStream$1.result()),null!=r&&e.clipExtent(r),e}function fitExtent(a,s,e){return fit(a,function(e){var t=s[1][0]-s[0][0],n=s[1][1]-s[0][1],r=Math.min(t/(e[1][0]-e[0][0]),n/(e[1][1]-e[0][1])),i=+s[0][0]+(t-r*(e[1][0]+e[0][0]))/2,o=+s[0][1]+(n-r*(e[1][1]+e[0][1]))/2;a.scale(150*r).translate([i,o])},e)}function fitSize(e,t,n){return fitExtent(e,[[0,0],t],n)}function fitWidth(o,a,e){return fit(o,function(e){var t=+a,n=t/(e[1][0]-e[0][0]),r=(t-n*(e[1][0]+e[0][0]))/2,i=-n*e[0][1];o.scale(150*n).translate([r,i])},e)}function fitHeight(o,a,e){return fit(o,function(e){var t=+a,n=t/(e[1][1]-e[0][1]),r=-n*e[0][0],i=(t-n*(e[1][1]+e[0][1]))/2;o.scale(150*n).translate([r,i])},e)}PathString.prototype={_radius:4.5,_circle:circle(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=circle(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},TransformStream.prototype={constructor:TransformStream,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var maxDepth=16,cosMinDistance=cos(30*radians);function resample(e,t){return+t?resample$1(e,t):resampleNone(e)}function resampleNone(n){return transformer({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}function resample$1(N,P){function D(e,t,n,r,i,o,a,s,l,c,u,p,d,f){var h,g,m,y,v,_,b,w,x,S,E,C,A=a-e,I=s-t,k=A*A+I*I;4*P<k&&d--&&(m=o+p,v=asin(m/=y=sqrt((h=r+c)*h+(g=i+u)*g+m*m)),_=abs$2(abs$2(m)-1)<epsilon||abs$2(n-l)<epsilon?(n+l)/2:atan2(g,h),w=(b=N(_,v))[0],x=b[1],(P<(C=I*(S=w-e)-A*(E=x-t))*C/k||.3<abs$2((A*S+I*E)/k-.5)||r*c+i*u+o*p<cosMinDistance)&&(D(e,t,n,r,i,o,w,x,_,h/=y,g/=y,m,d,f),f.point(w,x),D(w,x,_,h,g,m,a,s,l,c,u,p,d,f)))}return function(i){var n,r,o,a,s,l,c,u,p,d,f,h,g={point:e,lineStart:t,lineEnd:y,polygonStart:function(){i.polygonStart(),g.lineStart=v},polygonEnd:function(){i.polygonEnd(),g.lineStart=t}};function e(e,t){e=N(e,t),i.point(e[0],e[1])}function t(){u=NaN,g.point=m,i.lineStart()}function m(e,t){var n=cartesian([e,t]),r=N(e,t);D(u,p,c,d,f,h,u=r[0],p=r[1],c=e,d=n[0],f=n[1],h=n[2],maxDepth,i),i.point(u,p)}function y(){g.point=e,i.lineEnd()}function v(){t(),g.point=_,g.lineEnd=b}function _(e,t){m(n=e,t),r=u,o=p,a=d,s=f,l=h,g.point=m}function b(){D(u,p,c,d,f,h,r,o,n,a,s,l,maxDepth,i),g.lineEnd=y,y()}return g}}var transformRadians=transformer({point:function(e,t){this.stream.point(e*radians,t*radians)}});function transformRotate(r){return transformer({point:function(e,t){var n=r(e,t);return this.stream.point(n[0],n[1])}})}function scaleTranslate(n,r,i,o,a){function e(e,t){return[r+n*(e*=o),i-n*(t*=a)]}return e.invert=function(e,t){return[(e-r)/n*o,(i-t)/n*a]},e}function scaleTranslateRotate(e,n,r,i,o,t){var a=cos(t),s=sin(t),l=a*e,c=s*e,u=a/e,p=s/e,d=(s*r-a*n)/e,f=(s*n+a*r)/e;function h(e,t){return[l*(e*=i)-c*(t*=o)+n,r-c*e-l*t]}return h.invert=function(e,t){return[i*(u*e-p*t+d),o*(f-p*e-u*t)]},h}function projection(e){return projectionMutator(function(){return e})()}function projectionMutator(e){var n,r,t,i,o,a,s,l,c,u,p=150,d=480,f=250,h=0,g=0,m=0,y=0,v=0,_=0,b=1,w=1,x=null,S=clipAntimeridian,E=null,C=identity,A=.5;function I(e){return l(e[0]*radians,e[1]*radians)}function k(e){return(e=l.invert(e[0],e[1]))&&[e[0]*degrees,e[1]*degrees]}function N(){var e=scaleTranslateRotate(p,0,0,b,w,_).apply(null,n(h,g)),t=(_?scaleTranslateRotate:scaleTranslate)(p,d-e[0],f-e[1],b,w,_);return r=rotateRadians(m,y,v),s=compose(n,t),l=compose(r,s),a=resample(s,A),P()}function P(){return c=u=null,I}return I.stream=function(e){return c&&u===e?c:c=transformRadians(transformRotate(r)(S(a(C(u=e)))))},I.preclip=function(e){return arguments.length?(S=e,x=void 0,P()):S},I.postclip=function(e){return arguments.length?(C=e,E=t=i=o=null,P()):C},I.clipAngle=function(e){return arguments.length?(S=+e?clipCircle(x=e*radians):(x=null,clipAntimeridian),P()):x*degrees},I.clipExtent=function(e){return arguments.length?(C=null==e?(E=t=i=o=null,identity):clipRectangle(E=+e[0][0],t=+e[0][1],i=+e[1][0],o=+e[1][1]),P()):null==E?null:[[E,t],[i,o]]},I.scale=function(e){return arguments.length?(p=+e,N()):p},I.translate=function(e){return arguments.length?(d=+e[0],f=+e[1],N()):[d,f]},I.center=function(e){return arguments.length?(h=e[0]%360*radians,g=e[1]%360*radians,N()):[h*degrees,g*degrees]},I.rotate=function(e){return arguments.length?(m=e[0]%360*radians,y=e[1]%360*radians,v=2<e.length?e[2]%360*radians:0,N()):[m*degrees,y*degrees,v*degrees]},I.angle=function(e){return arguments.length?(_=e%360*radians,N()):_*degrees},I.reflectX=function(e){return arguments.length?(b=e?-1:1,N()):b<0},I.reflectY=function(e){return arguments.length?(w=e?-1:1,N()):w<0},I.precision=function(e){return arguments.length?(a=resample(s,A=e*e),P()):sqrt(A)},I.fitExtent=function(e,t){return fitExtent(I,e,t)},I.fitSize=function(e,t){return fitSize(I,e,t)},I.fitWidth=function(e,t){return fitWidth(I,e,t)},I.fitHeight=function(e,t){return fitHeight(I,e,t)},function(){return n=e.apply(this,arguments),I.invert=n.invert&&k,N()}}function mercatorRaw(e,t){return[e,log(tan((halfPi+t)/2))]}function mercator(){return mercatorProjection(mercatorRaw).scale(961/tau)}function mercatorProjection(n){var r,i,o,a=projection(n),t=a.center,s=a.scale,l=a.translate,c=a.clipExtent,u=null;function p(){var e=pi*s(),t=a(rotation(a.rotate()).invert([0,0]));return c(null==u?[[t[0]-e,t[1]-e],[t[0]+e,t[1]+e]]:n===mercatorRaw?[[Math.max(t[0]-e,u),r],[Math.min(t[0]+e,i),o]]:[[u,Math.max(t[1]-e,r)],[i,Math.min(t[1]+e,o)]])}return a.scale=function(e){return arguments.length?(s(e),p()):s()},a.translate=function(e){return arguments.length?(l(e),p()):l()},a.center=function(e){return arguments.length?(t(e),p()):t()},a.clipExtent=function(e){return arguments.length?(null==e?u=r=i=o=null:(u=+e[0][0],r=+e[0][1],i=+e[1][0],o=+e[1][1]),p()):null==u?null:[[u,r],[i,o]]},p()}function d3_geoIdentity(){var i,o,t,n,r,a,s,l=1,c=0,u=0,p=1,d=1,f=0,h=null,g=1,m=1,y=transformer({point:function(e,t){var n=b([e,t]);this.stream.point(n[0],n[1])}}),v=identity;function _(){return g=l*p,m=l*d,a=s=null,b}function b(e){var t,n=e[0]*g,r=e[1]*m;return f&&(t=r*i-n*o,n=n*i+r*o,r=t),[n+c,r+u]}return b.invert=function(e){var t,n=e[0]-c,r=e[1]-u;return f&&(t=r*i+n*o,n=n*i-r*o,r=t),[n/g,r/m]},b.stream=function(e){return a&&s===e?a:a=y(v(s=e))},b.postclip=function(e){return arguments.length?(v=e,h=t=n=r=null,_()):v},b.clipExtent=function(e){return arguments.length?(v=null==e?(h=t=n=r=null,identity):clipRectangle(h=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),_()):null==h?null:[[h,t],[n,r]]},b.scale=function(e){return arguments.length?(l=+e,_()):l},b.translate=function(e){return arguments.length?(c=+e[0],u=+e[1],_()):[c,u]},b.angle=function(e){return arguments.length?(o=sin(f=e%360*radians),i=cos(f),_()):f*degrees},b.reflectX=function(e){return arguments.length?(p=e?-1:1,_()):p<0},b.reflectY=function(e){return arguments.length?(d=e?-1:1,_()):d<0},b.fitExtent=function(e,t){return fitExtent(b,e,t)},b.fitSize=function(e,t){return fitSize(b,e,t)},b.fitWidth=function(e,t){return fitWidth(b,e,t)},b.fitHeight=function(e,t){return fitHeight(b,e,t)},b}mercatorRaw.invert=function(e,t){return[e,2*atan(exp(t))-halfPi]};var TAU=2*Math.PI,EQUATORIAL_RADIUS=6356752.314245179,POLAR_RADIUS=6378137;function geoLatToMeters(e){return e*(TAU*POLAR_RADIUS/360)}function geoLonToMeters(e,t){return 90<=Math.abs(t)?0:e*(TAU*EQUATORIAL_RADIUS/360)*Math.abs(Math.cos(t*(Math.PI/180)))}function geoMetersToLat(e){return e/(TAU*POLAR_RADIUS/360)}function geoMetersToLon(e,t){return 90<=Math.abs(t)?0:e/(TAU*EQUATORIAL_RADIUS/360)/Math.abs(Math.cos(t*(Math.PI/180)))}function geoMetersToOffset(e,t){return t=t||256,[e[0]*t/(TAU*EQUATORIAL_RADIUS),-e[1]*t/(TAU*POLAR_RADIUS)]}function geoOffsetToMeters(e,t){return t=t||256,[e[0]*TAU*EQUATORIAL_RADIUS/t,-e[1]*TAU*POLAR_RADIUS/t]}function geoSphericalDistance(e,t){var n=geoLonToMeters(e[0]-t[0],(e[1]+t[1])/2),r=geoLatToMeters(e[1]-t[1]);return Math.sqrt(n*n+r*r)}function geoScaleToZoom(e,t){t=t||256;var n=Math.log(t)*Math.LOG2E;return Math.log(e*TAU)/Math.LN2-n}function geoZoomToScale(e,t){return(t=t||256)*Math.pow(2,e)/TAU}function geoSphericalClosestNode(e,t){var n,r,i=1/0;for(var o in e)(n=geoSphericalDistance(e[o].loc,t))<i&&(i=n,r=o);return void 0!==r?{index:r,distance:i,node:e[r]}:null}function geoExtent(e,t){return this instanceof geoExtent?e instanceof geoExtent?e:void(e&&2===e.length&&2===e[0].length&&2===e[1].length?(this[0]=e[0],this[1]=e[1]):(this[0]=e||[1/0,1/0],this[1]=t||e||[-1/0,-1/0])):new geoExtent(e,t)}function d3_polygonArea(e){for(var t,n=-1,r=e.length,i=e[r-1],o=0;++n<r;)t=i,i=e[n],o+=t[1]*i[0]-t[0]*i[1];return o/2}function d3_polygonCentroid(e){for(var t,n,r=-1,i=e.length,o=0,a=0,s=e[i-1],l=0;++r<i;)t=s,s=e[r],l+=n=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o/(l*=3),a/l]}function cross(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function lexicographicOrder(e,t){return e[0]-t[0]||e[1]-t[1]}function computeUpperHullIndexes(e){for(var t=e.length,n=[0,1],r=2,i=2;i<t;++i){for(;1<r&&cross(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function d3_polygonHull(e){if((t=e.length)<3)return null;for(var t,n=new Array(t),r=new Array(t),i=0;i<t;++i)n[i]=[+e[i][0],+e[i][1],i];for(n.sort(lexicographicOrder),i=0;i<t;++i)r[i]=[n[i][0],-n[i][1]];var o=computeUpperHullIndexes(n),a=computeUpperHullIndexes(r),s=a[0]===o[0],l=a[a.length-1]===o[o.length-1],c=[];for(i=o.length-1;0<=i;--i)c.push(e[n[o[i]][2]]);for(i=+s;i<a.length-l;++i)c.push(e[n[a[i]][2]]);return c}function geoVecEqual(e,t,n){return n?Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n:e[0]===t[0]&&e[1]===t[1]}function geoVecAdd(e,t){return[e[0]+t[0],e[1]+t[1]]}function geoVecSubtract(e,t){return[e[0]-t[0],e[1]-t[1]]}function geoVecScale(e,t){return[e[0]*t,e[1]*t]}function geoVecFloor(e){return[Math.floor(e[0]),Math.floor(e[1])]}function geoVecInterp(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function geoVecLength(e,t){return Math.sqrt(geoVecLengthSquare(e,t))}function geoVecLengthSquare(e,t){t=t||[0,0];var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function geoVecNormalize(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return 0!==t?geoVecScale(e,1/t):[0,0]}function geoVecAngle(e,t){return Math.atan2(t[1]-e[1],t[0]-e[0])}function geoVecDot(e,t,n){var r=geoVecSubtract(e,n=n||[0,0]),i=geoVecSubtract(t,n);return r[0]*i[0]+r[1]*i[1]}function geoVecNormalizedDot(e,t,n){return geoVecDot(geoVecNormalize(geoVecSubtract(e,n=n||[0,0])),geoVecNormalize(geoVecSubtract(t,n)))}function geoVecCross(e,t,n){var r=geoVecSubtract(e,n=n||[0,0]),i=geoVecSubtract(t,n);return r[0]*i[1]-r[1]*i[0]}function geoVecProject(e,t){for(var n,r,i=1/0,o=0;o<t.length-1;o++){var a=t[o],s=geoVecSubtract(t[o+1],a),l=geoVecDot(geoVecSubtract(e,a),s)/geoVecDot(s,s),c=l<0?a:1<l?t[o+1]:[a[0]+l*s[0],a[1]+l*s[1]],u=geoVecLength(c,e);u<i&&(i=u,n=o+1,r=c)}return void 0!==n?{index:n,distance:i,target:r}:null}function geoAngle(e,t,n){return geoVecAngle(n(e.loc),n(t.loc))}function geoEdgeEqual(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]===t[1]&&e[1]===t[0]}function geoRotate(e,n,r){return e.map(function(e){var t=geoVecSubtract(e,r);return[t[0]*Math.cos(n)-t[1]*Math.sin(n)+r[0],t[0]*Math.sin(n)+t[1]*Math.cos(n)+r[1]]})}function geoChooseEdge(e,t,n,r){for(var i,o,a,s,l,c,u,p=geoVecLength,d=e.map(function(e){return n(e.loc)}),f=e.map(function(e){return e.id}),h=1/0,g=0;g<d.length-1;g++){f[g]!==r&&f[g+1]!==r&&(a=d[g],s=geoVecSubtract(d[g+1],a),(u=p(c=(l=geoVecDot(geoVecSubtract(t,a),s)/geoVecDot(s,s))<0?a:1<l?d[g+1]:[a[0]+l*s[0],a[1]+l*s[1]],t))<h&&(h=u,i=g+1,o=n.invert(c)))}return void 0!==i?{index:i,distance:h,loc:o}:null}function geoHasLineIntersections(e,t,n){for(var r,i,o,a,s=[],l=[],c=0;c<e.length-1;c++)i=e[c],o=e[c+1],a=[i.loc,o.loc],i.id!==n&&o.id!==n||s.push(a);for(c=0;c<t.length-1;c++)i=t[c],o=t[c+1],a=[i.loc,o.loc],l.push(a);for(c=0;c<s.length;c++)for(r=0;r<l.length;r++){if(geoLineIntersection(s[c],l[r]))return!0}return!1}function geoHasSelfIntersections(e,t){for(var n,r=[],i=[],o=0;o<e.length-1;o++){var a=e[o],s=e[o+1],l=[a.loc,s.loc];a.id===t||s.id===t?r.push(l):i.push(l)}for(o=0;o<r.length;o++)for(n=0;n<i.length;n++){var c=r[o],u=i[n];if(!(geoVecEqual(c[1],u[0])||geoVecEqual(c[0],u[1])||geoVecEqual(c[0],u[0])||geoVecEqual(c[1],u[1]))){var p=geoLineIntersection(c,u);if(p){if(geoVecEqual(c[1],p,1e-8)||geoVecEqual(c[0],p,1e-8)||geoVecEqual(u[1],p,1e-8)||geoVecEqual(u[0],p,1e-8))continue;return!0}}}return!1}function geoLineIntersection(e,t){var n=[e[0][0],e[0][1]],r=[e[1][0],e[1][1]],i=[t[0][0],t[0][1]],o=[t[1][0],t[1][1]],a=geoVecSubtract(r,n),s=geoVecSubtract(o,i),l=geoVecCross(geoVecSubtract(i,n),a),c=geoVecCross(a,s);if(l&&c){var u=l/c,p=geoVecCross(geoVecSubtract(i,n),s)/c;if(0<=p&&p<=1&&0<=u&&u<=1)return geoVecInterp(n,r,p)}return null}function geoPathIntersections(e,t){for(var n=[],r=0;r<e.length-1;r++)for(var i=0;i<t.length-1;i++){var o=geoLineIntersection([e[r],e[r+1]],[t[i],t[i+1]]);o&&n.push(o)}return n}function geoPathHasIntersections(e,t){for(var n=0;n<e.length-1;n++)for(var r=0;r<t.length-1;r++){if(geoLineIntersection([e[n],e[n+1]],[t[r],t[r+1]]))return!0}return!1}function geoPointInPolygon(e,t){for(var n=e[0],r=e[1],i=!1,o=0,a=t.length-1;o<t.length;a=o++){var s=t[o][0],l=t[o][1],c=t[a][0],u=t[a][1];r<l!=r<u&&n<(c-s)*(r-l)/(u-l)+s&&(i=!i)}return i}function geoPolygonContainsPolygon(t,e){return e.every(function(e){return geoPointInPolygon(e,t)})}function geoPolygonIntersectsPolygon(e,t,n){return r=e,t.some(function(e){return geoPointInPolygon(e,r)})||!!n&&geoPathHasIntersections(e,t);var r}function geoGetSmallestSurroundingRectangle(e){for(var t=d3_polygonHull(e),n=d3_polygonCentroid(t),r=1/0,i=[],o=0,a=t[0],s=0;s<=t.length-1;s++){var l=s===t.length-1?t[0]:t[s+1],c=Math.atan2(l[1]-a[1],l[0]-a[0]),u=geoRotate(t,-c,n).reduce(function(e,t){return e.extend(geoExtent(t))},geoExtent()),p=u.area();p<r&&(r=p,i=u,o=c),a=l}return{poly:geoRotate(i.polygon(),o,n),angle:o}}function geoPathLength(e){for(var t=0,n=0;n<e.length-1;n++)t+=geoVecLength(e[n],e[n+1]);return t}function geoViewportEdge(e,t){var n=[80,20,50,20],r=0,i=0;return e[0]>t[0]-n[1]&&(r=-10),e[0]<n[3]&&(r=10),e[1]>t[1]-n[2]&&(i=-10),e[1]<n[0]&&(i=10),r||i?[r,i]:null}geoExtent.prototype=new Array(2),Object.assign(geoExtent.prototype,{equals:function(e){return this[0][0]===e[0][0]&&this[0][1]===e[0][1]&&this[1][0]===e[1][0]&&this[1][1]===e[1][1]},extend:function(e){return e instanceof geoExtent||(e=new geoExtent(e)),geoExtent([Math.min(e[0][0],this[0][0]),Math.min(e[0][1],this[0][1])],[Math.max(e[1][0],this[1][0]),Math.max(e[1][1],this[1][1])])},_extend:function(e){this[0][0]=Math.min(e[0][0],this[0][0]),this[0][1]=Math.min(e[0][1],this[0][1]),this[1][0]=Math.max(e[1][0],this[1][0]),this[1][1]=Math.max(e[1][1],this[1][1])},area:function(){return Math.abs((this[1][0]-this[0][0])*(this[1][1]-this[0][1]))},center:function(){return[(this[0][0]+this[1][0])/2,(this[0][1]+this[1][1])/2]},rectangle:function(){return[this[0][0],this[0][1],this[1][0],this[1][1]]},bbox:function(){return{minX:this[0][0],minY:this[0][1],maxX:this[1][0],maxY:this[1][1]}},polygon:function(){return[[this[0][0],this[0][1]],[this[0][0],this[1][1]],[this[1][0],this[1][1]],[this[1][0],this[0][1]],[this[0][0],this[0][1]]]},contains:function(e){return e instanceof geoExtent||(e=new geoExtent(e)),e[0][0]>=this[0][0]&&e[0][1]>=this[0][1]&&e[1][0]<=this[1][0]&&e[1][1]<=this[1][1]},intersects:function(e){return e instanceof geoExtent||(e=new geoExtent(e)),e[0][0]<=this[1][0]&&e[0][1]<=this[1][1]&&e[1][0]>=this[0][0]&&e[1][1]>=this[0][1]},intersection:function(e){return this.intersects(e)?new geoExtent([Math.max(e[0][0],this[0][0]),Math.max(e[0][1],this[0][1])],[Math.min(e[1][0],this[1][0]),Math.min(e[1][1],this[1][1])]):new geoExtent},percentContainedIn:function(e){e instanceof geoExtent||(e=new geoExtent(e));var t=this.intersection(e).area(),n=this.area();return t===1/0||n===1/0?0:0===t||0===n?e.contains(this)?1:0:t/n},padByMeters:function(e){var t=geoMetersToLat(e),n=geoMetersToLon(e,this.center()[1]);return geoExtent([this[0][0]-n,this[0][1]-t],[this[1][0]+n,this[1][1]+t])},toParam:function(){return this.rectangle().join(",")}});var noop$3={value:function(){}};function dispatch(){for(var e,t=arguments,n=0,r=arguments.length,i={};n<r;++n){if(!(e=t[n]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new Dispatch(i)}function Dispatch(e){this._=e}function parseTypenames(e,r){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})}function get$1(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function set(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=noop$3,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(e,t){var n,r=this._,i=parseTypenames(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=set(r[n],e.name,t);else if(null==t)for(n in r)r[n]=set(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=get$1(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Dispatch(e)},call:function(e,t){var n=arguments;if(0<(r=arguments.length-2))for(var r,i,o=new Array(r),a=0;a<r;++a)o[a]=n[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,r=(i=this._[e]).length;a<r;++a)i[a].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var xhtml="http://www.w3.org/1999/xhtml",namespaces={svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(e){var t=e+="",n=t.indexOf(":");return 0<=n&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),namespaces.hasOwnProperty(t)?{space:namespaces[t],local:e}:e}function creatorInherit(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===xhtml&&e.documentElement.namespaceURI===xhtml?e.createElement(n):e.createElementNS(t,n)}}function creatorFixed(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function creator(e){var t=namespace(e);return(t.local?creatorFixed:creatorInherit)(t)}function none(){}function selector(e){return null==e?none:function(){return this.querySelector(e)}}function selection_select(e){"function"!=typeof e&&(e=selector(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=e.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new Selection(r,this._parents)}function empty(){return[]}function selectorAll(e){return null==e?empty:function(){return this.querySelectorAll(e)}}function selection_selectAll(e){"function"!=typeof e&&(e=selectorAll(e));for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(e.call(a,a.__data__,c,s)),i.push(a));return new Selection(r,i)}function matcher(e){return function(){return this.matches(e)}}function selection_filter(e){"function"!=typeof e&&(e=matcher(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new Selection(r,this._parents)}function sparse(e){return new Array(e.length)}function selection_enter(){return new Selection(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function constant(e){return function(){return e}}EnterNode.prototype={constructor:EnterNode,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var keyPrefix="$";function bindIndex(e,t,n,r,i,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new EnterNode(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function bindKey(e,t,n,r,i,o,a){for(var s,l,c={},u=t.length,p=o.length,d=new Array(u),f=0;f<u;++f)(s=t[f])&&(d[f]=l=keyPrefix+a.call(s,s.__data__,f,t),l in c?i[f]=s:c[l]=s);for(f=0;f<p;++f)(s=c[l=keyPrefix+a.call(e,o[f],f,o)])?((r[f]=s).__data__=o[f],c[l]=null):n[f]=new EnterNode(e,o[f]);for(f=0;f<u;++f)(s=t[f])&&c[d[f]]===s&&(i[f]=s)}function selection_data(e,t){if(!e)return f=new Array(this.size()),c=-1,this.each(function(e){f[++c]=e}),f;var n=t?bindKey:bindIndex,r=this._parents,i=this._groups;"function"!=typeof e&&(e=constant(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],p=i[c],d=p.length,f=e.call(u,u&&u.__data__,c,r),h=f.length,g=s[c]=new Array(h),m=a[c]=new Array(h);n(u,p,g,m,l[c]=new Array(d),f,t);for(var y,v,_=0,b=0;_<h;++_)if(y=g[_]){for(b<=_&&(b=_+1);!(v=m[b])&&++b<h;);y._next=v||null}}return(a=new Selection(a,r))._enter=s,a._exit=l,a}function selection_exit(){return new Selection(this._exit||this._groups.map(sparse),this._parents)}function selection_join(e,t,n){var r=this.enter(),i=this,o=this.exit(),r="function"==typeof e?e(r):r.append(e+"");return null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i}function selection_merge(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],p=c.length,d=a[s]=new Array(p),f=0;f<p;++f)(l=c[f]||u[f])&&(d[f]=l);for(;s<r;++s)a[s]=t[s];return new Selection(a,this._parents)}function selection_order(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];0<=--o;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this}function selection_sort(n){function e(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}n=n||ascending;for(var t=this._groups,r=t.length,i=new Array(r),o=0;o<r;++o){for(var a,s=t[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(e)}return new Selection(i,this._parents).order()}function ascending(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function selection_call(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function selection_nodes(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}function selection_node(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function selection_size(){var e=0;return this.each(function(){++e}),e}function selection_empty(){return!this.node()}function selection_each(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this}function attrRemove(e){return function(){this.removeAttribute(e)}}function attrRemoveNS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant(e,t){return function(){this.setAttribute(e,t)}}function attrConstantNS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function attrFunction(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function attrFunctionNS(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function selection_attr(e,t){var n=namespace(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?attrRemoveNS:attrRemove:"function"==typeof t?n.local?attrFunctionNS:attrFunction:n.local?attrConstantNS:attrConstant)(n,t))}function defaultView(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function styleRemove(e){return function(){this.style.removeProperty(e)}}function styleConstant(e,t,n){return function(){this.style.setProperty(e,t,n)}}function styleFunction(t,n,r){return function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}}function selection_style(e,t,n){return 1<arguments.length?this.each((null==t?styleRemove:"function"==typeof t?styleFunction:styleConstant)(e,t,null==n?"":n)):styleValue(this.node(),e)}function styleValue(e,t){return e.style.getPropertyValue(t)||defaultView(e).getComputedStyle(e,null).getPropertyValue(t)}function propertyRemove(e){return function(){delete this[e]}}function propertyConstant(e,t){return function(){this[e]=t}}function propertyFunction(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function selection_property(e,t){return 1<arguments.length?this.each((null==t?propertyRemove:"function"==typeof t?propertyFunction:propertyConstant)(e,t)):this.node()[e]}function classArray(e){return e.trim().split(/^|\s+/)}function classList(e){return e.classList||new ClassList(e)}function ClassList(e){this._node=e,this._names=classArray(e.getAttribute("class")||"")}function classedAdd(e,t){for(var n=classList(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function classedRemove(e,t){for(var n=classList(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function classedTrue(e){return function(){classedAdd(this,e)}}function classedFalse(e){return function(){classedRemove(this,e)}}function classedFunction(e,t){return function(){(t.apply(this,arguments)?classedAdd:classedRemove)(this,e)}}function selection_classed(e,t){var n=classArray(e+"");if(arguments.length<2){for(var r=classList(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?classedFunction:t?classedTrue:classedFalse)(n,t))}function textRemove(){this.textContent=""}function textConstant(e){return function(){this.textContent=e}}function textFunction(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function selection_text(e){return arguments.length?this.each(null==e?textRemove:("function"==typeof e?textFunction:textConstant)(e)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(e){return function(){this.innerHTML=e}}function htmlFunction(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function selection_html(e){return arguments.length?this.each(null==e?htmlRemove:("function"==typeof e?htmlFunction:htmlConstant)(e)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(e){var t="function"==typeof e?e:creator(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function constantNull(){return null}function selection_insert(e,t){var n="function"==typeof e?e:creator(e),r=null==t?constantNull:"function"==typeof t?t:selector(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function remove(){var e=this.parentNode;e&&e.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function selection_cloneDeep(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function selection_clone(e){return this.select(e?selection_cloneDeep:selection_cloneShallow)}function selection_datum(e){return arguments.length?this.property("__data__",e):this.node().__data__}ClassList.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}};var filterEvents={},event=null,element;function filterContextListener(n,e,t){return n=contextListener(n,e,t),function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}function contextListener(n,r,i){return function(e){var t=event;event=e;try{n.call(this,this.__data__,r,i)}finally{event=t}}}function parseTypenames$1(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return 0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function onRemove(o){return function(){var e=this.__on;if(e){for(var t,n=0,r=-1,i=e.length;n<i;++n)t=e[n],o.type&&t.type!==o.type||t.name!==o.name?e[++r]=t:this.removeEventListener(t.type,t.listener,t.capture);++r?e.length=r:delete this.__on}}}function onAdd(l,c,u){var p=filterEvents.hasOwnProperty(l.type)?filterContextListener:contextListener;return function(e,t,n){var r,i=this.__on,o=p(c,t,n);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===l.type&&r.name===l.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=o,r.capture=u),void(r.value=c);this.addEventListener(l.type,o,u),r={type:l.type,name:l.name,value:c,listener:o,capture:u},i?i.push(r):this.__on=[r]}}function selection_on(e,t,n){var r,i,o=parseTypenames$1(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?onAdd:onRemove,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value}function customEvent(e,t,n,r){var i=event;e.sourceEvent=event,event=e;try{return t.apply(n,r)}finally{event=i}}function dispatchEvent(e,t,n){var r=defaultView(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function dispatchConstant(e,t){return function(){return dispatchEvent(this,e,t)}}function dispatchFunction(e,t){return function(){return dispatchEvent(this,e,t.apply(this,arguments))}}function selection_dispatch(e,t){return this.each(("function"==typeof t?dispatchFunction:dispatchConstant)(e,t))}"undefined"!=typeof document&&(element=document.documentElement,"onmouseenter"in element||(filterEvents={mouseenter:"mouseover",mouseleave:"mouseout"}));var root$1=[null];function Selection(e,t){this._groups=e,this._parents=t}function selection(){return new Selection([[document.documentElement]],root$1)}function select(e){return"string"==typeof e?new Selection([[document.querySelector(e)]],[document.documentElement]):new Selection([[e]],root$1)}function sourceEvent(){for(var e,t=event;e=t.sourceEvent;)t=e;return t}function point(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}function mouse(e){var t=sourceEvent();return t.changedTouches&&(t=t.changedTouches[0]),point(e,t)}function selectAll(e){return"string"==typeof e?new Selection([document.querySelectorAll(e)],[document.documentElement]):new Selection([null==e?[]:e],root$1)}function touch(e,t,n){arguments.length<3&&(n=t,t=sourceEvent().changedTouches);for(var r,i=0,o=t?t.length:0;i<o;++i)if((r=t[i]).identifier===n)return point(e,r);return null}function nopropagation(){event.stopImmediatePropagation()}function noevent(){event.preventDefault(),event.stopImmediatePropagation()}function dragDisable(e){var t=e.document.documentElement,n=select(e).on("dragstart.drag",noevent,!0);"onselectstart"in t?n.on("selectstart.drag",noevent,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function yesdrag(e,t){var n=e.document.documentElement,r=select(e).on("dragstart.drag",null);t&&(r.on("click.drag",noevent,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function constant$1(e){return function(){return e}}function DragEvent(e,t,n,r,i,o,a,s,l,c){this.target=e,this.type=t,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=l,this._=c}function defaultFilter(){return!event.ctrlKey&&!event.button}function defaultContainer(){return this.parentNode}function defaultSubject(e){return null==e?{x:event.x,y:event.y}:e}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function d3_drag(){var n,r,i,o,a=defaultFilter,s=defaultContainer,t=defaultSubject,l=defaultTouchable,h={},g=dispatch("start","drag","end"),m=0,c=0;function y(e){e.on("mousedown.drag",u).filter(l).on("touchstart.drag",f).on("touchmove.drag",v).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(){var e;o||!a.apply(this,arguments)||(e=b("mouse",s.apply(this,arguments),mouse,this,arguments))&&(select(event.view).on("mousemove.drag",p,!0).on("mouseup.drag",d,!0),dragDisable(event.view),nopropagation(),i=!1,n=event.clientX,r=event.clientY,e("start"))}function p(){var e,t;noevent(),i||(e=event.clientX-n,t=event.clientY-r,i=c<e*e+t*t),h.mouse("drag")}function d(){select(event.view).on("mousemove.drag mouseup.drag",null),yesdrag(event.view,i),noevent(),h.mouse("end")}function f(){var e=arguments;if(a.apply(this,arguments))for(var t,n=event.changedTouches,r=s.apply(this,arguments),i=n.length,o=0;o<i;++o)(t=b(n[o].identifier,r,touch,this,e))&&(nopropagation(),t("start"))}function v(){for(var e,t=event.changedTouches,n=t.length,r=0;r<n;++r)(e=h[t[r].identifier])&&(noevent(),e("drag"))}function _(){var e,t,n=event.changedTouches,r=n.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),e=0;e<r;++e)(t=h[n[e].identifier])&&(nopropagation(),t("end"))}function b(i,o,a,s,l){var c,u,p,d=a(o,i),f=g.copy();if(customEvent(new DragEvent(y,"beforestart",c,i,m,d[0],d[1],0,0,f),function(){return null!=(event.subject=c=t.apply(s,l))&&(u=c.x-d[0]||0,p=c.y-d[1]||0,!0)}))return function e(t){var n,r=d;switch(t){case"start":h[i]=e,n=m++;break;case"end":delete h[i],--m;case"drag":d=a(o,i),n=m}customEvent(new DragEvent(y,t,c,i,n,d[0]+u,d[1]+p,d[0]-r[0],d[1]-r[1],f),f.apply,f,[t,s,l])}}return y.filter=function(e){return arguments.length?(a="function"==typeof e?e:constant$1(!!e),y):a},y.container=function(e){return arguments.length?(s="function"==typeof e?e:constant$1(e),y):s},y.subject=function(e){return arguments.length?(t="function"==typeof e?e:constant$1(e),y):t},y.touchable=function(e){return arguments.length?(l="function"==typeof e?e:constant$1(!!e),y):l},y.on=function(){var e=g.on.apply(g,arguments);return e===g?y:e},y.clickDistance=function(e){return arguments.length?(c=(e=+e)*e,y):Math.sqrt(c)},y}function define$1(e,t,n){(e.prototype=t.prototype=n).constructor=e}function extend(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Color(){}Selection.prototype=selection.prototype={constructor:Selection,select:selection_select,selectAll:selection_selectAll,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch},DragEvent.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=reHex.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?rgbn(t):3===n?new Rgb(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?rgba(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?rgba(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=reRgbInteger.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(e))?new Rgb(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=reRgbaInteger.exec(e))?rgba(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(e))?rgba(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=reHslPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(e)?rgbn(named[e]):"transparent"===e?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,255&e,1)}function rgba(e,t,n,r){return r<=0&&(e=t=n=NaN),new Rgb(e,t,n,r)}function rgbConvert(e){return e instanceof Color||(e=color(e)),e?new Rgb((e=e.rgb()).r,e.g,e.b,e.opacity):new Rgb}function rgb(e,t,n,r){return 1===arguments.length?rgbConvert(e):new Rgb(e,t,n,null==r?1:r)}function Rgb(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function rgb_formatHex(){return"#"+hex$1(this.r)+hex$1(this.g)+hex$1(this.b)}function rgb_formatRgb(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function hex$1(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function hsla(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||1<=n?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,n,r)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color(e)),!e)return new Hsl;if(e instanceof Hsl)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=0<l&&l<1?0:a,new Hsl(a,s,l,e.opacity)}function hsl(e,t,n,r){return 1===arguments.length?hslConvert(e):new Hsl(e,t,n,null==r?1:r)}function Hsl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function hsl2rgb(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function constant$2(e){return function(){return e}}function linear(t,n){return function(e){return t+e*n}}function exponential(t,n,r){return t=Math.pow(t,r),n=Math.pow(n,r)-t,r=1/r,function(e){return Math.pow(t+e*n,r)}}function gamma(n){return 1==(n=+n)?nogamma:function(e,t){return t-e?exponential(e,t,n):constant$2(isNaN(e)?t:e)}}function nogamma(e,t){var n=t-e;return n?linear(e,n):constant$2(isNaN(e)?t:e)}define$1(Color,color,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb}),define$1(Rgb,rgb,extend(Color,{brighter:function(e){return e=null==e?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),define$1(Hsl,hsl,extend(Color,{brighter:function(e){return e=null==e?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Rgb(hsl2rgb(240<=e?e-240:120+e,i,r),hsl2rgb(e,i,r),hsl2rgb(e<120?240+e:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var d3_interpolateRgb=function e(t){var a=gamma(t);function n(t,e){var n=a((t=rgb(t)).r,(e=rgb(e)).r),r=a(t.g,e.g),i=a(t.b,e.b),o=nogamma(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=r(e),t.b=i(e),t.opacity=o(e),t+""}}return n.gamma=e,n}(1);function numberArray(t,n){n=n||[];var r,i=t?Math.min(n.length,t.length):0,o=n.slice();return function(e){for(r=0;r<i;++r)o[r]=t[r]*(1-e)+n[r]*e;return o}}function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function genericArray(e,t){for(var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a=0;a<r;++a)i[a]=interpolate(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(e){for(a=0;a<r;++a)o[a]=i[a](e);return o}}function date(t,n){var r=new Date;return t=+t,n=+n,function(e){return r.setTime(t*(1-e)+n*e),r}}function d3_interpolateNumber(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function object(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=interpolate(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(t){return function(e){return t(e)+""}}function interpolateString(e,r){var t,n,i,o=reA.lastIndex=reB.lastIndex=0,a=-1,s=[],l=[];for(e+="",r+="";(t=reA.exec(e))&&(n=reB.exec(r));)(i=n.index)>o&&(i=r.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(t=t[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,l.push({i:a,x:d3_interpolateNumber(t,n)})),o=reB.lastIndex;return o<r.length&&(i=r.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?one(l[0].x):zero(r):(r=l.length,function(e){for(var t,n=0;n<r;++n)s[(t=l[n]).i]=t.x(e);return s.join("")})}function interpolate(e,t){var n,r=typeof t;return null==t||"boolean"==r?constant$2(t):("number"==r?d3_interpolateNumber:"string"==r?(n=color(t))?(t=n,d3_interpolateRgb):interpolateString:t instanceof color?d3_interpolateRgb:t instanceof Date?date:isNumberArray(t)?numberArray:Array.isArray(t)?genericArray:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?object:d3_interpolateNumber)(e,t)}function interpolateRound(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var degrees$1=180/Math.PI,identity$1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},cssNode,cssRoot,cssView,svgNode;function decompose(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*degrees$1,skewX:Math.atan(l)*degrees$1,scaleX:a,scaleY:s}}function parseCss(e){return"none"===e?identity$1:(cssNode||(cssNode=document.createElement("DIV"),cssRoot=document.documentElement,cssView=document.defaultView),cssNode.style.transform=e,e=cssView.getComputedStyle(cssRoot.appendChild(cssNode),null).getPropertyValue("transform"),cssRoot.removeChild(cssNode),decompose(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function parseSvg(e){return null==e?identity$1:((svgNode=svgNode||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",e),(e=svgNode.transform.baseVal.consolidate())?decompose((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):identity$1)}function interpolateTransform(A,I,k,N){function P(e){return e.length?e.pop()+" ":""}return function(e,t){var n,r,i,o,a,s,l,c,u,p,d,f,h,g,m,y,v,_,b,w,x,S,E=[],C=[];return e=A(e),t=A(t),n=e.translateX,r=e.translateY,i=t.translateX,o=t.translateY,a=E,s=C,n!==i||r!==o?(l=a.push("translate(",null,I,null,k),s.push({i:l-4,x:d3_interpolateNumber(n,i)},{i:l-2,x:d3_interpolateNumber(r,o)})):(i||o)&&a.push("translate("+i+I+o+k),c=e.rotate,u=t.rotate,p=E,d=C,c!==u?(180<c-u?u+=360:180<u-c&&(c+=360),d.push({i:p.push(P(p)+"rotate(",null,N)-2,x:d3_interpolateNumber(c,u)})):u&&p.push(P(p)+"rotate("+u+N),f=e.skewX,h=t.skewX,g=E,m=C,f!==h?m.push({i:g.push(P(g)+"skewX(",null,N)-2,x:d3_interpolateNumber(f,h)}):h&&g.push(P(g)+"skewX("+h+N),y=e.scaleX,v=e.scaleY,_=t.scaleX,b=t.scaleY,w=E,x=C,y!==_||v!==b?(S=w.push(P(w)+"scale(",null,",",null,")"),x.push({i:S-4,x:d3_interpolateNumber(y,_)},{i:S-2,x:d3_interpolateNumber(v,b)})):1===_&&1===b||w.push(P(w)+"scale("+_+","+b+")"),e=t=null,function(e){for(var t,n=-1,r=C.length;++n<r;)E[(t=C[n]).i]=t.x(e);return E.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),rho=Math.SQRT2,rho2=2,rho4=4,epsilon2$1=1e-12;function cosh(e){return((e=Math.exp(e))+1/e)/2}function sinh(e){return((e=Math.exp(e))-1/e)/2}function tanh(e){return((e=Math.exp(2*e))-1)/(e+1)}function interpolateZoom(e,t){var i,n,r,o,a,s,l=e[0],c=e[1],u=e[2],p=t[0],d=t[1],f=t[2],h=p-l,g=d-c,m=h*h+g*g;return(s=m<epsilon2$1?(a=Math.log(f/u)/rho,function(e){return[l+e*h,c+e*g,u*Math.exp(rho*e*a)]}):(i=Math.sqrt(m),n=(f*f-u*u+rho4*m)/(2*u*rho2*i),r=(f*f-u*u-rho4*m)/(2*f*rho2*i),o=Math.log(Math.sqrt(n*n+1)-n),a=(Math.log(Math.sqrt(r*r+1)-r)-o)/rho,function(e){var t=e*a,n=cosh(o),r=u/(rho2*i)*(n*tanh(rho*t+o)-sinh(o));return[l+r*h,c+r*g,u*n/cosh(rho*t+o)]})).duration=1e3*a,s}function d3_quantize(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var frame=0,timeout=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(e,t,n){var r=new Timer;return r.restart(e,t,n),r}function timerFlush(){now(),++frame;for(var e,t=taskHead;t;)0<=(e=clockNow-t._time)&&t._call.call(null,e),t=t._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var e=clock.now(),t=e-clockLast;pokeDelay<t&&(clockSkew-=t,clockLast=e)}function nap(){for(var e,t,n=taskHead,r=1/0;n;)n=n._call?(r>n._time&&(r=n._time),(e=n)._next):(t=n._next,n._next=null,e?e._next=t:taskHead=t);taskTail=e,sleep(r)}function sleep(e){frame||(timeout=timeout&&clearTimeout(timeout),24<e-clockNow?(e<1/0&&(timeout=setTimeout(wake,e-clock.now()-clockSkew)),interval=interval&&clearInterval(interval)):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake)))}function d3_timeout(t,n,e){var r=new Timer;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r}Timer.prototype=timer.prototype={constructor:Timer,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?now():+n)+(null==t?0:+t),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=e,this._time=n,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};create$7(e,n,{name:t,index:r,group:i,on:emptyOn,tween:emptyTween,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:CREATED})}function init(e,t){var n=get$2(e,t);if(n.state>CREATED)throw new Error("too late; already scheduled");return n}function set$1(e,t){var n=get$2(e,t);if(n.state>STARTED)throw new Error("too late; already running");return n}function get$2(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function create$7(o,a,s){var l,c=o.__transition;function u(e){var t,n,r,i;if(s.state!==SCHEDULED)return d();for(t in c)if((i=c[t]).name===s.name){if(i.state===STARTED)return d3_timeout(u);i.state===RUNNING?(i.state=ENDED,i.timer.stop(),i.on.call("interrupt",o,o.__data__,i.index,i.group),delete c[t]):+t<a&&(i.state=ENDED,i.timer.stop(),i.on.call("cancel",o,o.__data__,i.index,i.group),delete c[t])}if(d3_timeout(function(){s.state===STARTED&&(s.state=RUNNING,s.timer.restart(p,s.delay,s.time),p(e))}),s.state=STARTING,s.on.call("start",o,o.__data__,s.index,s.group),s.state===STARTING){for(s.state=STARTED,l=new Array(r=s.tween.length),t=0,n=-1;t<r;++t)(i=s.tween[t].value.call(o,o.__data__,s.index,s.group))&&(l[++n]=i);l.length=n+1}}function p(e){for(var t=e<s.duration?s.ease.call(null,e/s.duration):(s.timer.restart(d),s.state=ENDING,1),n=-1,r=l.length;++n<r;)l[n].call(o,t);s.state===ENDING&&(s.on.call("end",o,o.__data__,s.index,s.group),d())}function d(){for(var e in s.state=ENDED,s.timer.stop(),delete c[a],c)return;delete o.__transition}(c[a]=s).timer=timer(function(e){s.state=SCHEDULED,s.timer.restart(u,s.delay,s.time),s.delay<=e&&u(e-s.delay)},0,s.time)}function interrupt(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>STARTING&&n.state<ENDING,n.state=ENDED,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}function selection_interrupt(e){return this.each(function(){interrupt(this,e)})}function tweenRemove(i,o){var a,s;return function(){var e=set$1(this,i),t=e.tween;if(t!==a)for(var n=0,r=(s=a=t).length;n<r;++n)if(s[n].name===o){(s=s.slice()).splice(n,1);break}e.tween=s}}function tweenFunction(o,a,s){var l,c;if("function"!=typeof s)throw new Error;return function(){var e=set$1(this,o),t=e.tween;if(t!==l){c=(l=t).slice();for(var n={name:a,value:s},r=0,i=c.length;r<i;++r)if(c[r].name===a){c[r]=n;break}r===i&&c.push(n)}e.tween=c}}function transition_tween(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=get$2(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?tweenRemove:tweenFunction)(n,e,t))}function tweenValue(e,t,n){var r=e._id;return e.each(function(){var e=set$1(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return get$2(e,r).value[t]}}function interpolate$1(e,t){var n;return("number"==typeof t?d3_interpolateNumber:t instanceof color?d3_interpolateRgb:(n=color(t))?(t=n,d3_interpolateRgb):interpolateString)(e,t)}function attrRemove$1(e){return function(){this.removeAttribute(e)}}function attrRemoveNS$1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant$1(t,n,r){var i,o,a=r+"";return function(){var e=this.getAttribute(t);return e===a?null:e===i?o:o=n(i=e,r)}}function attrConstantNS$1(t,n,r){var i,o,a=r+"";return function(){var e=this.getAttributeNS(t.space,t.local);return e===a?null:e===i?o:o=n(i=e,r)}}function attrFunction$1(r,i,o){var a,s,l;return function(){var e,t,n=o(this);if(null!=n)return(e=this.getAttribute(r))===(t=n+"")?null:e===a&&t===s?l:(s=t,l=i(a=e,n));this.removeAttribute(r)}}function attrFunctionNS$1(r,i,o){var a,s,l;return function(){var e,t,n=o(this);if(null!=n)return(e=this.getAttributeNS(r.space,r.local))===(t=n+"")?null:e===a&&t===s?l:(s=t,l=i(a=e,n));this.removeAttributeNS(r.space,r.local)}}function transition_attr(e,t){var n=namespace(e),r="transform"===n?interpolateTransformSvg:interpolate$1;return this.attrTween(e,"function"==typeof t?(n.local?attrFunctionNS$1:attrFunction$1)(n,r,tweenValue(this,"attr."+e,t)):null==t?(n.local?attrRemoveNS$1:attrRemove$1)(n):(n.local?attrConstantNS$1:attrConstant$1)(n,r,t))}function attrInterpolate(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function attrInterpolateNS(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function attrTweenNS(t,n){var r,i;function e(){var e=n.apply(this,arguments);return e!==i&&(r=(i=e)&&attrInterpolateNS(t,e)),r}return e._value=n,e}function attrTween(t,n){var r,i;function e(){var e=n.apply(this,arguments);return e!==i&&(r=(i=e)&&attrInterpolate(t,e)),r}return e._value=n,e}function transition_attrTween(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=namespace(e);return this.tween(n,(r.local?attrTweenNS:attrTween)(r,t))}function delayFunction(e,t){return function(){init(this,e).delay=+t.apply(this,arguments)}}function delayConstant(e,t){return t=+t,function(){init(this,e).delay=t}}function transition_delay(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?delayFunction:delayConstant)(t,e)):get$2(this.node(),t).delay}function durationFunction(e,t){return function(){set$1(this,e).duration=+t.apply(this,arguments)}}function durationConstant(e,t){return t=+t,function(){set$1(this,e).duration=t}}function transition_duration(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?durationFunction:durationConstant)(t,e)):get$2(this.node(),t).duration}function easeConstant(e,t){if("function"!=typeof t)throw new Error;return function(){set$1(this,e).ease=t}}function transition_ease(e){var t=this._id;return arguments.length?this.each(easeConstant(t,e)):get$2(this.node(),t).ease}function transition_filter(e){"function"!=typeof e&&(e=matcher(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new Transition(r,this._parents,this._name,this._id)}function transition_merge(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],p=c.length,d=a[s]=new Array(p),f=0;f<p;++f)(l=c[f]||u[f])&&(d[f]=l);for(;s<r;++s)a[s]=t[s];return new Transition(a,this._parents,this._name,this._id)}function start(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return 0<=t&&(e=e.slice(0,t)),!e||"start"===e})}function onFunction(n,r,i){var o,a,s=start(r)?init:set$1;return function(){var e=s(this,n),t=e.on;t!==o&&(a=(o=t).copy()).on(r,i),e.on=a}}function transition_on(e,t){var n=this._id;return arguments.length<2?get$2(this.node(),n).on.on(e):this.each(onFunction(n,e,t))}function removeFunction(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=selector(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,c=r[a],u=c.length,p=o[a]=new Array(u),d=0;d<u;++d)(s=c[d])&&(l=e.call(s,s.__data__,d,c))&&("__data__"in s&&(l.__data__=s.__data__),p[d]=l,schedule(p[d],t,n,d,p,get$2(s,n)));return new Transition(o,this._parents,t,n)}function transition_selectAll(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=selectorAll(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,p=0;p<u;++p)if(l=c[p]){for(var d,f=e.call(l,l.__data__,p,c),h=get$2(l,n),g=0,m=f.length;g<m;++g)(d=f[g])&&schedule(d,t,n,g,f,h);o.push(f),a.push(l)}return new Transition(o,a,t,n)}var Selection$1=selection.prototype.constructor;function transition_selection(){return new Selection$1(this._groups,this._parents)}function styleNull(n,r){var i,o,a;return function(){var e=styleValue(this,n),t=(this.style.removeProperty(n),styleValue(this,n));return e===t?null:e===i&&t===o?a:a=r(i=e,o=t)}}function styleRemove$1(e){return function(){this.style.removeProperty(e)}}function styleConstant$1(t,n,r){var i,o,a=r+"";return function(){var e=styleValue(this,t);return e===a?null:e===i?o:o=n(i=e,r)}}function styleFunction$1(r,i,o){var a,s,l;return function(){var e=styleValue(this,r),t=o(this),n=t+"";return null==t&&(this.style.removeProperty(r),n=t=styleValue(this,r)),e===n?null:e===a&&n===s?l:(s=n,l=i(a=e,t))}}function styleMaybeRemove(r,i){var o,a,s,l,c="style."+i,u="end."+c;return function(){var e=set$1(this,r),t=e.on,n=null==e.value[c]?l=l||styleRemove$1(i):void 0;t===o&&s===n||(a=(o=t).copy()).on(u,s=n),e.on=a}}function transition_style(e,t,n){var r="transform"==(e+="")?interpolateTransformCss:interpolate$1;return null==t?this.styleTween(e,styleNull(e,r)).on("end.style."+e,styleRemove$1(e)):"function"==typeof t?this.styleTween(e,styleFunction$1(e,r,tweenValue(this,"style."+e,t))).each(styleMaybeRemove(this._id,e)):this.styleTween(e,styleConstant$1(e,r,t),n).on("end.style."+e,null)}function styleInterpolate(t,n,r){return function(e){this.style.setProperty(t,n.call(this,e),r)}}function styleTween(t,n,r){var i,o;function e(){var e=n.apply(this,arguments);return e!==o&&(i=(o=e)&&styleInterpolate(t,e,r)),i}return e._value=n,e}function transition_styleTween(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,styleTween(e,t,null==n?"":n))}function textConstant$1(e){return function(){this.textContent=e}}function textFunction$1(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function transition_text(e){return this.tween("text","function"==typeof e?textFunction$1(tweenValue(this,"text",e)):textConstant$1(null==e?"":e+""))}function textInterpolate(t){return function(e){this.textContent=t.call(this,e)}}function textTween(t){var n,r;function e(){var e=t.apply(this,arguments);return e!==r&&(n=(r=e)&&textInterpolate(e)),n}return e._value=t,e}function transition_textTween(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,textTween(e))}function transition_transition(){for(var e=this._name,t=this._id,n=newId(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s,l=r[o],c=l.length,u=0;u<c;++u){(a=l[u])&&schedule(a,e,n,u,l,{time:(s=get$2(a,t)).time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new Transition(r,this._parents,e,n)}function transition_end(){var i,o,a=this,s=a._id,l=a.size();return new Promise(function(e,t){var n={value:t},r={value:function(){0==--l&&e()}};a.each(function(){var e=set$1(this,s),t=e.on;t!==i&&((o=(i=t).copy())._.cancel.push(n),o._.interrupt.push(n),o._.end.push(r)),e.on=o})})}var id$3=0;function Transition(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function transition(e){return selection().transition(e)}function newId(){return++id$3}var selection_prototype=selection.prototype;function linear$1(e){return+e}function cubicInOut(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}Transition.prototype=transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,end:transition_end};var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return defaultTiming.time=now(),defaultTiming;return n}function selection_transition(e){var t,n;e=e instanceof Transition?(t=e._id,e._name):(t=newId(),(n=defaultTiming).time=now(),null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)(a=s[c])&&schedule(a,e,t,c,s,n||inherit(a,t));return new Transition(r,this._parents,e,t)}function constant$3(e){return function(){return e}}function ZoomEvent(e,t,n){this.target=e,this.type=t,this.transform=n}function Transform(e,t,n){this.k=e,this.x=t,this.y=n}selection.prototype.interrupt=selection_interrupt,selection.prototype.transition=selection_transition,Transform.prototype={constructor:Transform,scale:function(e){return 1===e?this:new Transform(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Transform(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity$2=new Transform(1,0,0);function nopropagation$1(){event.stopImmediatePropagation()}function noevent$1(){event.preventDefault(),event.stopImmediatePropagation()}function defaultFilter$1(){return!event.ctrlKey&&!event.button}function defaultExtent(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function defaultTransform(){return this.__zoom||identity$2}function defaultWheelDelta(){return-event.deltaY*(1===event.deltaMode?.05:event.deltaMode?1:.002)}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r<i?(r+i)/2:Math.min(0,r)||Math.max(0,i),o<a?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function d3_zoom(){var f,a,s=defaultFilter$1,u=defaultExtent,h=defaultConstrain,i=defaultWheelDelta,t=defaultTouchable$1,o=[0,1/0],g=[[-1/0,-1/0],[1/0,1/0]],l=250,p=interpolateZoom,n=dispatch("start","zoom","end"),c=500,d=150,m=0;function y(e){e.property("__zoom",defaultTransform).on("wheel.zoom",S).on("mousedown.zoom",E).on("dblclick.zoom",C).filter(t).on("touchstart.zoom",A).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,t){return(t=Math.max(o[0],Math.min(o[1],t)))===e.k?e:new Transform(t,e.x,e.y)}function _(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new Transform(e.k,r,i)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,l,c){e.on("start.zoom",function(){x(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).end()}).tween("zoom",function(){var e=arguments,r=x(this,e),t=u.apply(this,e),i=null==c?b(t):"function"==typeof c?c.apply(this,e):c,o=Math.max(t[1][0]-t[0][0],t[1][1]-t[0][1]),n=this.__zoom,a="function"==typeof l?l.apply(this,e):l,s=p(n.invert(i).concat(o/n.k),a.invert(i).concat(o/a.k));return function(e){var t,n;e=1===e?a:(t=s(e),new Transform(n=o/t[2],i[0]-t[0]*n,i[1]-t[1]*n)),r.zoom(null,e)}})}function x(e,t,n){return!n&&e.__zooming||new r(e,t)}function r(e,t){this.that=e,this.args=t,this.active=0,this.extent=u.apply(e,t),this.taps=0}function S(){if(s.apply(this,arguments)){var e=x(this,arguments),t=this.__zoom,n=Math.max(o[0],Math.min(o[1],t.k*Math.pow(2,i.apply(this,arguments)))),r=mouse(this);if(e.wheel)e.mouse[0][0]===r[0]&&e.mouse[0][1]===r[1]||(e.mouse[1]=t.invert(e.mouse[0]=r)),clearTimeout(e.wheel);else{if(t.k===n)return;e.mouse=[r,t.invert(r)],interrupt(this),e.start()}noevent$1(),e.wheel=setTimeout(function(){e.wheel=null,e.end()},d),e.zoom("mouse",h(_(v(t,n),e.mouse[0],e.mouse[1]),e.extent,g))}}function E(){var n,e,t,r,i;!a&&s.apply(this,arguments)&&(n=x(this,arguments,!0),e=select(event.view).on("mousemove.zoom",function(){{var e,t;noevent$1(),n.moved||(e=event.clientX-r,t=event.clientY-i,n.moved=m<e*e+t*t)}n.zoom("mouse",h(_(n.that.__zoom,n.mouse[0]=mouse(n.that),n.mouse[1]),n.extent,g))},!0).on("mouseup.zoom",function(){e.on("mousemove.zoom mouseup.zoom",null),yesdrag(event.view,n.moved),noevent$1(),n.end()},!0),t=mouse(this),r=event.clientX,i=event.clientY,dragDisable(event.view),nopropagation$1(),n.mouse=[t,this.__zoom.invert(t)],interrupt(this),n.start())}function C(){var e,t,n,r,i;s.apply(this,arguments)&&(e=this.__zoom,t=mouse(this),n=e.invert(t),r=e.k*(event.shiftKey?.5:2),i=h(_(v(e,r),t,n),u.apply(this,arguments),g),noevent$1(),0<l?select(this).transition().duration(l).call(w,i,t):select(this).call(y.transform,i))}function A(){if(s.apply(this,arguments)){var e,t,n,r,i=event.touches,o=i.length,a=x(this,arguments,event.changedTouches.length===o);for(nopropagation$1(),t=0;t<o;++t)r=[r=touch(this,i,(n=i[t]).identifier),this.__zoom.invert(r),n.identifier],a.touch0?a.touch1||a.touch0[2]===r[2]||(a.touch1=r,a.taps=0):(a.touch0=r,e=!0,a.taps=1+!!f);f=f&&clearTimeout(f),e&&(a.taps<2&&(f=setTimeout(function(){f=null},c)),interrupt(this),a.start())}}function I(){if(this.__zooming){var e,t=x(this,arguments),n=event.changedTouches,r=n.length;for(noevent$1(),f=f&&clearTimeout(f),e=t.taps=0;e<r;++e)p=touch(this,n,(u=n[e]).identifier),t.touch0&&t.touch0[2]===u.identifier?t.touch0[0]=p:t.touch1&&t.touch1[2]===u.identifier&&(t.touch1[0]=p);if(u=t.that.__zoom,t.touch1)var i=t.touch0[0],o=t.touch0[1],a=t.touch1[0],s=t.touch1[1],l=(l=a[0]-i[0])*l+(l=a[1]-i[1])*l,c=(c=s[0]-o[0])*c+(c=s[1]-o[1])*c,u=v(u,Math.sqrt(l/c)),p=[(i[0]+a[0])/2,(i[1]+a[1])/2],d=[(o[0]+s[0])/2,(o[1]+s[1])/2];else{if(!t.touch0)return;p=t.touch0[0],d=t.touch0[1]}t.zoom("touch",h(_(u,p,d),t.extent,g))}}function k(){if(this.__zooming){var e,t,n,r=x(this,arguments),i=event.changedTouches,o=i.length;for(nopropagation$1(),a&&clearTimeout(a),a=setTimeout(function(){a=null},c),e=0;e<o;++e)t=i[e],r.touch0&&r.touch0[2]===t.identifier?delete r.touch0:r.touch1&&r.touch1[2]===t.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0?r.touch0[1]=this.__zoom.invert(r.touch0[0]):(r.end(),2!==r.taps||(n=select(this).on("dblclick.zoom"))&&n.apply(this,arguments))}}return y.transform=function(e,t,n){var r=e.selection?e.selection():e;r.property("__zoom",defaultTransform),e!==r?w(e,t,n):r.interrupt().each(function(){x(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},y.scaleBy=function(e,t,n){y.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n)},y.scaleTo=function(e,o,a){y.transform(e,function(){var e=u.apply(this,arguments),t=this.__zoom,n=null==a?b(e):"function"==typeof a?a.apply(this,arguments):a,r=t.invert(n),i="function"==typeof o?o.apply(this,arguments):o;return h(_(v(t,i),n,r),e,g)},a)},y.translateBy=function(e,t,n){y.transform(e,function(){return h(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),u.apply(this,arguments),g)})},y.translateTo=function(e,r,i,o){y.transform(e,function(){var e=u.apply(this,arguments),t=this.__zoom,n=null==o?b(e):"function"==typeof o?o.apply(this,arguments):o;return h(identity$2.translate(n[0],n[1]).scale(t.k).translate("function"==typeof r?-r.apply(this,arguments):-r,"function"==typeof i?-i.apply(this,arguments):-i),e,g)},o)},r.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this).emit("start"),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){customEvent(new ZoomEvent(y,e,this.that.__zoom),n.apply,n,[e,this.that,this.args])}},y.wheelDelta=function(e){return arguments.length?(i="function"==typeof e?e:constant$3(+e),y):i},y.filter=function(e){return arguments.length?(s="function"==typeof e?e:constant$3(!!e),y):s},y.touchable=function(e){return arguments.length?(t="function"==typeof e?e:constant$3(!!e),y):t},y.extent=function(e){return arguments.length?(u="function"==typeof e?e:constant$3([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),y):u},y.scaleExtent=function(e){return arguments.length?(o[0]=+e[0],o[1]=+e[1],y):[o[0],o[1]]},y.translateExtent=function(e){return arguments.length?(g[0][0]=+e[0][0],g[1][0]=+e[1][0],g[0][1]=+e[0][1],g[1][1]=+e[1][1],y):[[g[0][0],g[0][1]],[g[1][0],g[1][1]]]},y.constrain=function(e){return arguments.length?(h=e,y):h},y.duration=function(e){return arguments.length?(l=+e,y):l},y.interpolate=function(e){return arguments.length?(p=e,y):p},y.on=function(){var e=n.on.apply(n,arguments);return e===n?y:e},y.clickDistance=function(e){return arguments.length?(m=(e=+e)*e,y):Math.sqrt(m)},y}function geoRawMercator(){var t=mercatorRaw,n=512/Math.PI,r=0,i=0,o=[[0,0],[0,0]];function a(e){return[(e=t(e[0]*Math.PI/180,e[1]*Math.PI/180))[0]*n+r,i-e[1]*n]}return a.invert=function(e){return(e=t.invert((e[0]-r)/n,(i-e[1])/n))&&[180*e[0]/Math.PI,180*e[1]/Math.PI]},a.scale=function(e){return arguments.length?(n=+e,a):n},a.translate=function(e){return arguments.length?(r=+e[0],i=+e[1],a):[r,i]},a.clipExtent=function(e){return arguments.length?(o=e,a):o},a.transform=function(e){return arguments.length?(r=+e.x,i=+e.y,n=+e.k,a):identity$2.translate(r,i).scale(n)},a.stream=d3_geoTransform({point:function(e,t){var n=a([e,t]);this.stream.point(n[0],n[1])}}).stream,a}function geoOrthoNormalizedDotProduct(e,t,n){return geoVecEqual(n,e)||geoVecEqual(n,t)?1:geoVecNormalizedDot(e,t,n)}function geoOrthoFilterDotProduct(e,t,n,r,i){var o=Math.abs(e);return o<t||i&&Math.abs(o-1)<t?0:o<n||r<o?e:null}function geoOrthoCalcScore(e,t,n,r){for(var i=0,o=t?0:1,a=t?e.length:e.length-1,s=e.map(function(e){return e.coord}),l=Math.cos((90-r)*Math.PI/180),c=Math.cos(r*Math.PI/180),u=o;u<a;u++){var p=s[(u-1+s.length)%s.length],d=s[u],f=geoOrthoFilterDotProduct(geoOrthoNormalizedDotProduct(p,s[(u+1)%s.length],d),n,l,c);null!==f&&(i+=2*Math.min(Math.abs(f-1),Math.min(Math.abs(f),Math.abs(f+1))))}return i}function geoOrthoMaxOffsetAngle(e,t,n){for(var r=-1/0,i=t?0:1,o=t?e.length:e.length-1,a=i;a<o;a++){var s=e[(a-1+e.length)%e.length],l=e[a],c=geoOrthoNormalizedDotProduct(s,e[(a+1)%e.length],l),u=180*Math.acos(Math.abs(c))/Math.PI;45<u&&(u=90-u),n<=u||r<u&&(r=u)}return r===-1/0?null:r}function geoOrthoCanOrthogonalize(e,t,n,r,i){for(var o=null,a=t?0:1,s=t?e.length:e.length-1,l=Math.cos((90-r)*Math.PI/180),c=Math.cos(r*Math.PI/180),u=a;u<s;u++){var p=e[(u-1+e.length)%e.length],d=e[u],f=geoOrthoFilterDotProduct(geoOrthoNormalizedDotProduct(p,e[(u+1)%e.length],d),n,l,c,i);if(null!==f){if(0<Math.abs(f))return 1;o=0}}return o}function utilArrayIdentical(e,t){if(e===t)return!0;var n=e.length;if(n!==t.length)return!1;for(;n--;)if(e[n]!==t[n])return!1;return!0}function utilArrayDifference(e,t){var n=new Set(t);return Array.from(new Set(e)).filter(function(e){return!n.has(e)})}function utilArrayIntersection(e,t){var n=new Set(t);return Array.from(new Set(e)).filter(function(e){return n.has(e)})}function utilArrayUnion(e,t){var n=new Set(e);return t.forEach(function(e){n.add(e)}),Array.from(n)}function utilArrayUniq(e){return Array.from(new Set(e))}function utilArrayChunk(n,r){if(!r||r<0)return[n.slice()];var e=new Array(Math.ceil(n.length/r));return Array.from(e,function(e,t){return n.slice(t*r,t*r+r)})}function utilArrayFlatten(e){return e.reduce(function(e,t){return e.concat(t)},[])}function utilArrayGroupBy(e,r){return e.reduce(function(e,t){var n="function"==typeof r?r(t):t[r];return(e[n]=e[n]||[]).push(t),e},{})}function utilArrayUniqBy(e,r){var i=new Set;return e.reduce(function(e,t){var n="function"==typeof r?r(t):t[r];return n&&!i.has(n)&&(i.add(n),e.push(t)),e},[])}for(var remove$1=removeDiacritics,replacementList=[{base:" ",chars:" "},{base:"0",chars:"߀"},{base:"A",chars:"ⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",chars:"Ꜳ"},{base:"AE",chars:"ÆǼǢ"},{base:"AO",chars:"Ꜵ"},{base:"AU",chars:"Ꜷ"},{base:"AV",chars:"ꜸꜺ"},{base:"AY",chars:"Ꜽ"},{base:"B",chars:"ⒷＢḂḄḆɃƁ"},{base:"C",chars:"ⒸＣꜾḈĆCĈĊČÇƇȻ"},{base:"D",chars:"ⒹＤḊĎḌḐḒḎĐƊƉᴅꝹ"},{base:"Dh",chars:"Ð"},{base:"DZ",chars:"ǱǄ"},{base:"Dz",chars:"ǲǅ"},{base:"E",chars:"ɛⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎᴇ"},{base:"F",chars:"ꝼⒻＦḞƑꝻ"},{base:"G",chars:"ⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾɢ"},{base:"H",chars:"ⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",chars:"ⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",chars:"ⒿＪĴɈȷ"},{base:"K",chars:"ⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",chars:"ⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",chars:"Ǉ"},{base:"Lj",chars:"ǈ"},{base:"M",chars:"ⓂＭḾṀṂⱮƜϻ"},{base:"N",chars:"ꞤȠⓃＮǸŃÑṄŇṆŅṊṈƝꞐᴎ"},{base:"NJ",chars:"Ǌ"},{base:"Nj",chars:"ǋ"},{base:"O",chars:"ⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OE",chars:"Œ"},{base:"OI",chars:"Ƣ"},{base:"OO",chars:"Ꝏ"},{base:"OU",chars:"Ȣ"},{base:"P",chars:"ⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",chars:"ⓆＱꝖꝘɊ"},{base:"R",chars:"ⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",chars:"ⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",chars:"ⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"Th",chars:"Þ"},{base:"TZ",chars:"Ꜩ"},{base:"U",chars:"ⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",chars:"ⓋＶṼṾƲꝞɅ"},{base:"VY",chars:"Ꝡ"},{base:"W",chars:"ⓌＷẀẂŴẆẄẈⱲ"},{base:"X",chars:"ⓍＸẊẌ"},{base:"Y",chars:"ⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",chars:"ⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",chars:"ⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐɑ"},{base:"aa",chars:"ꜳ"},{base:"ae",chars:"æǽǣ"},{base:"ao",chars:"ꜵ"},{base:"au",chars:"ꜷ"},{base:"av",chars:"ꜹꜻ"},{base:"ay",chars:"ꜽ"},{base:"b",chars:"ⓑｂḃḅḇƀƃɓƂ"},{base:"c",chars:"ｃⓒćĉċčçḉƈȼꜿↄ"},{base:"d",chars:"ⓓｄḋďḍḑḓḏđƌɖɗƋᏧԁꞪ"},{base:"dh",chars:"ð"},{base:"dz",chars:"ǳǆ"},{base:"e",chars:"ⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇǝ"},{base:"f",chars:"ⓕｆḟƒ"},{base:"ff",chars:"ﬀ"},{base:"fi",chars:"ﬁ"},{base:"fl",chars:"ﬂ"},{base:"ffi",chars:"ﬃ"},{base:"ffl",chars:"ﬄ"},{base:"g",chars:"ⓖｇǵĝḡğġǧģǥɠꞡꝿᵹ"},{base:"h",chars:"ⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",chars:"ƕ"},{base:"i",chars:"ⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",chars:"ⓙｊĵǰɉ"},{base:"k",chars:"ⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",chars:"ⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇɭ"},{base:"lj",chars:"ǉ"},{base:"m",chars:"ⓜｍḿṁṃɱɯ"},{base:"n",chars:"ⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥлԉ"},{base:"nj",chars:"ǌ"},{base:"o",chars:"ⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿꝋꝍɵɔᴑ"},{base:"oe",chars:"œ"},{base:"oi",chars:"ƣ"},{base:"oo",chars:"ꝏ"},{base:"ou",chars:"ȣ"},{base:"p",chars:"ⓟｐṕṗƥᵽꝑꝓꝕρ"},{base:"q",chars:"ⓠｑɋꝗꝙ"},{base:"r",chars:"ⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",chars:"ⓢｓśṥŝṡšṧṣṩșşȿꞩꞅẛʂ"},{base:"ss",chars:"ß"},{base:"t",chars:"ⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"th",chars:"þ"},{base:"tz",chars:"ꜩ"},{base:"u",chars:"ⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",chars:"ⓥｖṽṿʋꝟʌ"},{base:"vy",chars:"ꝡ"},{base:"w",chars:"ⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",chars:"ⓧｘẋẍ"},{base:"y",chars:"ⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",chars:"ⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],diacriticsMap={},i$1=0;i$1<replacementList.length;i$1+=1)for(var chars=replacementList[i$1].chars,j=0;j<chars.length;j+=1)diacriticsMap[chars[j]]=replacementList[i$1].base;function removeDiacritics(e){return e.replace(/[^\u0000-\u007e]/g,function(e){return diacriticsMap[e]||e})}var replacementList_1=replacementList,diacriticsMap_1=diacriticsMap,diacritics={remove:remove$1,replacementList:replacementList_1,diacriticsMap:diacriticsMap_1},isArabic_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=[[1536,1791],[1872,1919],[2208,2303],[64336,65023],[65136,65279],[69216,69247],[126064,126143],[126464,126719]];t.isArabic=function(e){if(1<e.length)throw new Error("isArabic works on only one-character strings");for(var t=e.charCodeAt(0),n=0;n<i.length;n++){var r=i[n];if(t>=r[0]&&t<=r[1])return!0}return!1},t.isMath=function(e){if(2<e.length)throw new Error("isMath works on only one-character strings");var t=e.charCodeAt(0);return 1632<=t&&t<=1644||1776<=t&&t<=1785}}),unicodeArabic=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={alef:{normal:["ا"],madda_above:{normal:["آ","آ"],isolated:"ﺁ",final:"ﺂ"},hamza_above:{normal:["أ","أ"],isolated:"ﺃ",final:"ﺄ"},hamza_below:{normal:["إ","إ"],isolated:"ﺇ",final:"ﺈ"},wasla:{normal:"ٱ",isolated:"ﭐ",final:"ﭑ"},wavy_hamza_above:["ٲ"],wavy_hamza_below:["اٟ","ٳ"],high_hamza:["ٵ","اٴ"],indic_two_above:["ݳ"],indic_three_above:["ݴ"],fathatan:{normal:["اً"],final:"ﴼ",isolated:"ﴽ"},isolated:"ﺍ",final:"ﺎ"},beh:{normal:["ب"],dotless:["ٮ"],three_dots_horizontally_below:["ݐ"],dot_below_three_dots_above:["ݑ"],three_dots_pointing_upwards_below:["ݒ"],three_dots_pointing_upwards_below_two_dots_above:["ݓ"],two_dots_below_dot_above:["ݔ"],inverted_small_v_below:["ݕ"],small_v:["ݖ"],small_v_below:["ࢠ"],hamza_above:["ࢡ"],small_meem_above:["ࢶ"],isolated:"ﺏ",final:"ﺐ",initial:"ﺑ",medial:"ﺒ"},"teh marbuta":{normal:["ة"],isolated:"ﺓ",final:"ﺔ"},teh:{normal:["ت"],ring:["ټ"],three_dots_above_downwards:["ٽ"],small_teh_above:["ࢸ"],isolated:"ﺕ",final:"ﺖ",initial:"ﺗ",medial:"ﺘ"},theh:{normal:["ث"],isolated:"ﺙ",final:"ﺚ",initial:"ﺛ",medial:"ﺜ"},jeem:{normal:["ج"],two_dots_above:["ࢢ"],isolated:"ﺝ",final:"ﺞ",initial:"ﺟ",medial:"ﺠ"},hah:{normal:["ح"],hamza_above:["ځ"],two_dots_vertical_above:["ڂ"],three_dots_above:["څ"],two_dots_above:["ݗ"],three_dots_pointing_upwards_below:["ݘ"],small_tah_below:["ݮ"],small_tah_two_dots:["ݯ"],small_tah_above:["ݲ"],indic_four_below:["ݼ"],isolated:"ﺡ",final:"ﺢ",initial:"ﺣ",medial:"ﺤ"},khah:{normal:["خ"],isolated:"ﺥ",final:"ﺦ",initial:"ﺧ",medial:"ﺨ"},dal:{normal:["د"],ring:["ډ"],dot_below:["ڊ"],dot_below_small_tah:["ڋ"],three_dots_above_downwards:["ڏ"],four_dots_above:["ڐ"],inverted_v:["ۮ"],two_dots_vertically_below_small_tah:["ݙ"],inverted_small_v_below:["ݚ"],three_dots_below:["ࢮ"],isolated:"ﺩ",final:"ﺪ"},thal:{normal:["ذ"],isolated:"ﺫ",final:"ﺬ"},reh:{normal:["ر"],small_v:["ڒ"],ring:["ړ"],dot_below:["ڔ"],small_v_below:["ڕ"],dot_below_dot_above:["ږ"],two_dots_above:["ڗ"],four_dots_above:["ڙ"],inverted_v:["ۯ"],stroke:["ݛ"],two_dots_vertically_above:["ݫ"],hamza_above:["ݬ"],small_tah_two_dots:["ݱ"],loop:["ࢪ"],small_noon_above:["ࢹ"],isolated:"ﺭ",final:"ﺮ"},zain:{normal:["ز"],inverted_v_above:["ࢲ"],isolated:"ﺯ",final:"ﺰ"},seen:{normal:["س"],dot_below_dot_above:["ښ"],three_dots_below:["ڛ"],three_dots_below_three_dots_above:["ڜ"],four_dots_above:["ݜ"],two_dots_vertically_above:["ݭ"],small_tah_two_dots:["ݰ"],indic_four_above:["ݽ"],inverted_v:["ݾ"],isolated:"ﺱ",final:"ﺲ",initial:"ﺳ",medial:"ﺴ"},sheen:{normal:["ش"],dot_below:["ۺ"],isolated:"ﺵ",final:"ﺶ",initial:"ﺷ",medial:"ﺸ"},sad:{normal:["ص"],two_dots_below:["ڝ"],three_dots_above:["ڞ"],three_dots_below:["ࢯ"],isolated:"ﺹ",final:"ﺺ",initial:"ﺻ",medial:"ﺼ"},dad:{normal:["ض"],dot_below:["ۻ"],isolated:"ﺽ",final:"ﺾ",initial:"ﺿ",medial:"ﻀ"},tah:{normal:["ط"],three_dots_above:["ڟ"],two_dots_above:["ࢣ"],isolated:"ﻁ",final:"ﻂ",initial:"ﻃ",medial:"ﻄ"},zah:{normal:["ظ"],isolated:"ﻅ",final:"ﻆ",initial:"ﻇ",medial:"ﻈ"},ain:{normal:["ع"],three_dots_above:["ڠ"],two_dots_above:["ݝ"],three_dots_pointing_downwards_above:["ݞ"],two_dots_vertically_above:["ݟ"],three_dots_below:["ࢳ"],isolated:"ﻉ",final:"ﻊ",initial:"ﻋ",medial:"ﻌ"},ghain:{normal:["غ"],dot_below:["ۼ"],isolated:"ﻍ",final:"ﻎ",initial:"ﻏ",medial:"ﻐ"},feh:{normal:["ف"],dotless:["ڡ"],dot_moved_below:["ڢ"],dot_below:["ڣ"],three_dots_below:["ڥ"],two_dots_below:["ݠ"],three_dots_pointing_upwards_below:["ݡ"],dot_below_three_dots_above:["ࢤ"],isolated:"ﻑ",final:"ﻒ",initial:"ﻓ",medial:"ﻔ"},qaf:{normal:["ق"],dotless:["ٯ"],dot_above:["ڧ"],three_dots_above:["ڨ"],dot_below:["ࢥ"],isolated:"ﻕ",final:"ﻖ",initial:"ﻗ",medial:"ﻘ"},kaf:{normal:["ك"],swash:["ڪ"],ring:["ګ"],dot_above:["ڬ"],three_dots_below:["ڮ"],two_dots_above:["ݿ"],dot_below:["ࢴ"],isolated:"ﻙ",final:"ﻚ",initial:"ﻛ",medial:"ﻜ"},lam:{normal:["ل"],small_v:["ڵ"],dot_above:["ڶ"],three_dots_above:["ڷ"],three_dots_below:["ڸ"],bar:["ݪ"],double_bar:["ࢦ"],isolated:"ﻝ",final:"ﻞ",initial:"ﻟ",medial:"ﻠ"},meem:{normal:["م"],dot_above:["ݥ"],dot_below:["ݦ"],three_dots_above:["ࢧ"],isolated:"ﻡ",final:"ﻢ",initial:"ﻣ",medial:"ﻤ"},noon:{normal:["ن"],dot_below:["ڹ"],ring:["ڼ"],three_dots_above:["ڽ"],two_dots_below:["ݧ"],small_tah:["ݨ"],small_v:["ݩ"],isolated:"ﻥ",final:"ﻦ",initial:"ﻧ",medial:"ﻨ"},heh:{normal:["ه"],isolated:"ﻩ",final:"ﻪ",initial:"ﻫ",medial:"ﻬ"},waw:{normal:["و"],hamza_above:{normal:["ؤ","ؤ"],isolated:"ﺅ",final:"ﺆ"},high_hamza:["ٶ","وٴ"],ring:["ۄ"],two_dots_above:["ۊ"],dot_above:["ۏ"],indic_two_above:["ݸ"],indic_three_above:["ݹ"],dot_within:["ࢫ"],isolated:"ﻭ",final:"ﻮ"},alef_maksura:{normal:["ى"],hamza_above:["ئ","ئ"],initial:"ﯨ",medial:"ﯩ",isolated:"ﻯ",final:"ﻰ"},yeh:{normal:["ي"],hamza_above:{normal:["ئ","ىٔ"],isolated:"ﺉ",final:"ﺊ",initial:"ﺋ",medial:"ﺌ"},two_dots_below_hamza_above:["ࢨ"],high_hamza:["ٸ","يٴ"],tail:["ۍ"],small_v:["ێ"],three_dots_below:["ۑ"],two_dots_below_dot_above:["ࢩ"],two_dots_below_small_noon_above:["ࢺ"],isolated:"ﻱ",final:"ﻲ",initial:"ﻳ",medial:"ﻴ"},tteh:{normal:["ٹ"],isolated:"ﭦ",final:"ﭧ",initial:"ﭨ",medial:"ﭩ"},tteheh:{normal:["ٺ"],isolated:"ﭞ",final:"ﭟ",initial:"ﭠ",medial:"ﭡ"},beeh:{normal:["ٻ"],isolated:"ﭒ",final:"ﭓ",initial:"ﭔ",medial:"ﭕ"},peh:{normal:["پ"],small_meem_above:["ࢷ"],isolated:"ﭖ",final:"ﭗ",initial:"ﭘ",medial:"ﭙ"},teheh:{normal:["ٿ"],isolated:"ﭢ",final:"ﭣ",initial:"ﭤ",medial:"ﭥ"},beheh:{normal:["ڀ"],isolated:"ﭚ",final:"ﭛ",initial:"ﭜ",medial:"ﭝ"},nyeh:{normal:["ڃ"],isolated:"ﭶ",final:"ﭷ",initial:"ﭸ",medial:"ﭹ"},dyeh:{normal:["ڄ"],isolated:"ﭲ",final:"ﭳ",initial:"ﭴ",medial:"ﭵ"},tcheh:{normal:["چ"],dot_above:["ڿ"],isolated:"ﭺ",final:"ﭻ",initial:"ﭼ",medial:"ﭽ"},tcheheh:{normal:["ڇ"],isolated:"ﭾ",final:"ﭿ",initial:"ﮀ",medial:"ﮁ"},ddal:{normal:["ڈ"],isolated:"ﮈ",final:"ﮉ"},dahal:{normal:["ڌ"],isolated:"ﮄ",final:"ﮅ"},ddahal:{normal:["ڍ"],isolated:"ﮂ",final:"ﮃ"},dul:{normal:["ڏ","ڎ"],isolated:"ﮆ",final:"ﮇ"},rreh:{normal:["ڑ"],isolated:"ﮌ",final:"ﮍ"},jeh:{normal:["ژ"],isolated:"ﮊ",final:"ﮋ"},veh:{normal:["ڤ"],isolated:"ﭪ",final:"ﭫ",initial:"ﭬ",medial:"ﭭ"},peheh:{normal:["ڦ"],isolated:"ﭮ",final:"ﭯ",initial:"ﭰ",medial:"ﭱ"},keheh:{normal:["ک"],dot_above:["ݢ"],three_dots_above:["ݣ"],three_dots_pointing_upwards_below:["ݤ"],isolated:"ﮎ",final:"ﮏ",initial:"ﮐ",medial:"ﮑ"},ng:{normal:["ڭ"],isolated:"ﯓ",final:"ﯔ",initial:"ﯕ",medial:"ﯖ"},gaf:{normal:["گ"],ring:["ڰ"],two_dots_below:["ڲ"],three_dots_above:["ڴ"],inverted_stroke:["ࢰ"],isolated:"ﮒ",final:"ﮓ",initial:"ﮔ",medial:"ﮕ"},ngoeh:{normal:["ڱ"],isolated:"ﮚ",final:"ﮛ",initial:"ﮜ",medial:"ﮝ"},gueh:{normal:["ڳ"],isolated:"ﮖ",final:"ﮗ",initial:"ﮘ",medial:"ﮙ"},"noon ghunna":{normal:["ں"],isolated:"ﮞ",final:"ﮟ"},rnoon:{normal:["ڻ"],isolated:"ﮠ",final:"ﮡ",initial:"ﮢ",medial:"ﮣ"},"heh doachashmee":{normal:["ھ"],isolated:"ﮪ",final:"ﮫ",initial:"ﮬ",medial:"ﮭ"},"heh goal":{normal:["ہ"],hamza_above:["ۂ","ۂ"],isolated:"ﮦ",final:"ﮧ",initial:"ﮨ",medial:"ﮩ"},"teh marbuta goal":{normal:["ۃ"]},"kirghiz oe":{normal:["ۅ"],isolated:"ﯠ",final:"ﯡ"},oe:{normal:["ۆ"],isolated:"ﯙ",final:"ﯚ"},u:{normal:["ۇ"],hamza_above:{normal:["ٷ","ۇٴ"],isolated:"ﯝ"},isolated:"ﯗ",final:"ﯘ"},yu:{normal:["ۈ"],isolated:"ﯛ",final:"ﯜ"},"kirghiz yu":{normal:["ۉ"],isolated:"ﯢ",final:"ﯣ"},ve:{normal:["ۋ"],isolated:"ﯞ",final:"ﯟ"},"farsi yeh":{normal:["ی"],indic_two_above:["ݵ"],indic_three_above:["ݶ"],indic_four_above:["ݷ"],isolated:"ﯼ",final:"ﯽ",initial:"ﯾ",medial:"ﯿ"},e:{normal:["ې"],isolated:"ﯤ",final:"ﯥ",initial:"ﯦ",medial:"ﯧ"},"yeh barree":{normal:["ے"],hamza_above:{normal:["ۓ","ۓ"],isolated:"ﮰ",final:"ﮱ"},indic_two_above:["ݺ"],indic_three_above:["ݻ"],isolated:"ﮮ",final:"ﮯ"},ae:{normal:["ە"],isolated:"ە",final:"ﻪ",yeh_above:{normal:["ۀ","ۀ"],isolated:"ﮤ",final:"ﮥ"}},"rohingya yeh":{normal:["ࢬ"]},"low alef":{normal:["ࢭ"]},"straight waw":{normal:["ࢱ"]},"african feh":{normal:["ࢻ"]},"african qaf":{normal:["ࢼ"]},"african noon":{normal:["ࢽ"]}}}),unicodeLigatures=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={"ئا":{isolated:"ﯪ",final:"ﯫ"},"ئە":{isolated:"ﯬ",final:"ﯭ"},"ئو":{isolated:"ﯮ",final:"ﯯ"},"ئۇ":{isolated:"ﯰ",final:"ﯱ"},"ئۆ":{isolated:"ﯲ",final:"ﯳ"},"ئۈ":{isolated:"ﯴ",final:"ﯵ"},"ئې":{isolated:"ﯶ",final:"ﯷ",initial:"ﯸ"},"ئى":{uighur_kirghiz:{isolated:"ﯹ",final:"ﯺ",initial:"ﯻ"},isolated:"ﰃ",final:"ﱨ"},"ئج":{isolated:"ﰀ",initial:"ﲗ"},"ئح":{isolated:"ﰁ",initial:"ﲘ"},"ئم":{isolated:"ﰂ",final:"ﱦ",initial:"ﲚ",medial:"ﳟ"},"ئي":{isolated:"ﰄ",final:"ﱩ"},"بج":{isolated:"ﰅ",initial:"ﲜ"},"بح":{isolated:"ﰆ",initial:"ﲝ"},"بخ":{isolated:"ﰇ",initial:"ﲞ"},"بم":{isolated:"ﰈ",final:"ﱬ",initial:"ﲟ",medial:"ﳡ"},"بى":{isolated:"ﰉ",final:"ﱮ"},"بي":{isolated:"ﰊ",final:"ﱯ"},"تج":{isolated:"ﰋ",initial:"ﲡ"},"تح":{isolated:"ﰌ",initial:"ﲢ"},"تخ":{isolated:"ﰍ",initial:"ﲣ"},"تم":{isolated:"ﰎ",final:"ﱲ",initial:"ﲤ",medial:"ﳣ"},"تى":{isolated:"ﰏ",final:"ﱴ"},"تي":{isolated:"ﰐ",final:"ﱵ"},"ثج":{isolated:"ﰑ"},"ثم":{isolated:"ﰒ",final:"ﱸ",initial:"ﲦ",medial:"ﳥ"},"ثى":{isolated:"ﰓ",final:"ﱺ"},"ثو":{isolated:"ﰔ"},"جح":{isolated:"ﰕ",initial:"ﲧ"},"جم":{isolated:"ﰖ",initial:"ﲨ"},"حج":{isolated:"ﰗ",initial:"ﲩ"},"حم":{isolated:"ﰘ",initial:"ﲪ"},"خج":{isolated:"ﰙ",initial:"ﲫ"},"خح":{isolated:"ﰚ"},"خم":{isolated:"ﰛ",initial:"ﲬ"},"سج":{isolated:"ﰜ",initial:"ﲭ",medial:"ﴴ"},"سح":{isolated:"ﰝ",initial:"ﲮ",medial:"ﴵ"},"سخ":{isolated:"ﰞ",initial:"ﲯ",medial:"ﴶ"},"سم":{isolated:"ﰟ",initial:"ﲰ",medial:"ﳧ"},"صح":{isolated:"ﰠ",initial:"ﲱ"},"صم":{isolated:"ﰡ",initial:"ﲳ"},"ضج":{isolated:"ﰢ",initial:"ﲴ"},"ضح":{isolated:"ﰣ",initial:"ﲵ"},"ضخ":{isolated:"ﰤ",initial:"ﲶ"},"ضم":{isolated:"ﰥ",initial:"ﲷ"},"طح":{isolated:"ﰦ",initial:"ﲸ"},"طم":{isolated:"ﰧ",initial:"ﴳ",medial:"ﴺ"},"ظم":{isolated:"ﰨ",initial:"ﲹ",medial:"ﴻ"},"عج":{isolated:"ﰩ",initial:"ﲺ"},"عم":{isolated:"ﰪ",initial:"ﲻ"},"غج":{isolated:"ﰫ",initial:"ﲼ"},"غم":{isolated:"ﰬ",initial:"ﲽ"},"فج":{isolated:"ﰭ",initial:"ﲾ"},"فح":{isolated:"ﰮ",initial:"ﲿ"},"فخ":{isolated:"ﰯ",initial:"ﳀ"},"فم":{isolated:"ﰰ",initial:"ﳁ"},"فى":{isolated:"ﰱ",final:"ﱼ"},"في":{isolated:"ﰲ",final:"ﱽ"},"قح":{isolated:"ﰳ",initial:"ﳂ"},"قم":{isolated:"ﰴ",initial:"ﳃ"},"قى":{isolated:"ﰵ",final:"ﱾ"},"قي":{isolated:"ﰶ",final:"ﱿ"},"كا":{isolated:"ﰷ",final:"ﲀ"},"كج":{isolated:"ﰸ",initial:"ﳄ"},"كح":{isolated:"ﰹ",initial:"ﳅ"},"كخ":{isolated:"ﰺ",initial:"ﳆ"},"كل":{isolated:"ﰻ",final:"ﲁ",initial:"ﳇ",medial:"ﳫ"},"كم":{isolated:"ﰼ",final:"ﲂ",initial:"ﳈ",medial:"ﳬ"},"كى":{isolated:"ﰽ",final:"ﲃ"},"كي":{isolated:"ﰾ",final:"ﲄ"},"لج":{isolated:"ﰿ",initial:"ﳉ"},"لح":{isolated:"ﱀ",initial:"ﳊ"},"لخ":{isolated:"ﱁ",initial:"ﳋ"},"لم":{isolated:"ﱂ",final:"ﲅ",initial:"ﳌ",medial:"ﳭ"},"لى":{isolated:"ﱃ",final:"ﲆ"},"لي":{isolated:"ﱄ",final:"ﲇ"},"مج":{isolated:"ﱅ",initial:"ﳎ"},"مح":{isolated:"ﱆ",initial:"ﳏ"},"مخ":{isolated:"ﱇ",initial:"ﳐ"},"مم":{isolated:"ﱈ",final:"ﲉ",initial:"ﳑ"},"مى":{isolated:"ﱉ"},"مي":{isolated:"ﱊ"},"نج":{isolated:"ﱋ",initial:"ﳒ"},"نح":{isolated:"ﱌ",initial:"ﳓ"},"نخ":{isolated:"ﱍ",initial:"ﳔ"},"نم":{isolated:"ﱎ",final:"ﲌ",initial:"ﳕ",medial:"ﳮ"},"نى":{isolated:"ﱏ",final:"ﲎ"},"ني":{isolated:"ﱐ",final:"ﲏ"},"هج":{isolated:"ﱑ",initial:"ﳗ"},"هم":{isolated:"ﱒ",initial:"ﳘ"},"هى":{isolated:"ﱓ"},"هي":{isolated:"ﱔ"},"يج":{isolated:"ﱕ",initial:"ﳚ"},"يح":{isolated:"ﱖ",initial:"ﳛ"},"يخ":{isolated:"ﱗ",initial:"ﳜ"},"يم":{isolated:"ﱘ",final:"ﲓ",initial:"ﳝ",medial:"ﳰ"},"يى":{isolated:"ﱙ",final:"ﲕ"},"يي":{isolated:"ﱚ",final:"ﲖ"},"ذٰ":{isolated:"ﱛ"},"رٰ":{isolated:"ﱜ"},"ىٰ":{isolated:"ﱝ",final:"ﲐ"},"ٌّ":{isolated:"ﱞ"},"ٍّ":{isolated:"ﱟ"},"َّ":{isolated:"ﱠ"},"ُّ":{isolated:"ﱡ"},"ِّ":{isolated:"ﱢ"},"ّٰ":{isolated:"ﱣ"},"ئر":{final:"ﱤ"},"ئز":{final:"ﱥ"},"ئن":{final:"ﱧ"},"بر":{final:"ﱪ"},"بز":{final:"ﱫ"},"بن":{final:"ﱭ"},"تر":{final:"ﱰ"},"تز":{final:"ﱱ"},"تن":{final:"ﱳ"},"ثر":{final:"ﱶ"},"ثز":{final:"ﱷ"},"ثن":{final:"ﱹ"},"ثي":{final:"ﱻ"},"ما":{final:"ﲈ"},"نر":{final:"ﲊ"},"نز":{final:"ﲋ"},"نن":{final:"ﲍ"},"ير":{final:"ﲑ"},"يز":{final:"ﲒ"},"ين":{final:"ﲔ"},"ئخ":{initial:"ﲙ"},"ئه":{initial:"ﲛ",medial:"ﳠ"},"به":{initial:"ﲠ",medial:"ﳢ"},"ته":{initial:"ﲥ",medial:"ﳤ"},"صخ":{initial:"ﲲ"},"له":{initial:"ﳍ"},"نه":{initial:"ﳖ",medial:"ﳯ"},"هٰ":{initial:"ﳙ"},"يه":{initial:"ﳞ",medial:"ﳱ"},"ثه":{medial:"ﳦ"},"سه":{medial:"ﳨ",initial:"ﴱ"},"شم":{medial:"ﳩ",isolated:"ﴌ",final:"ﴨ",initial:"ﴰ"},"شه":{medial:"ﳪ",initial:"ﴲ"},"ـَّ":{medial:"ﳲ"},"ـُّ":{medial:"ﳳ"},"ـِّ":{medial:"ﳴ"},"طى":{isolated:"ﳵ",final:"ﴑ"},"طي":{isolated:"ﳶ",final:"ﴒ"},"عى":{isolated:"ﳷ",final:"ﴓ"},"عي":{isolated:"ﳸ",final:"ﴔ"},"غى":{isolated:"ﳹ",final:"ﴕ"},"غي":{isolated:"ﳺ",final:"ﴖ"},"سى":{isolated:"ﳻ"},"سي":{isolated:"ﳼ",final:"ﴘ"},"شى":{isolated:"ﳽ",final:"ﴙ"},"شي":{isolated:"ﳾ",final:"ﴚ"},"حى":{isolated:"ﳿ",final:"ﴛ"},"حي":{isolated:"ﴀ",final:"ﴜ"},"جى":{isolated:"ﴁ",final:"ﴝ"},"جي":{isolated:"ﴂ",final:"ﴞ"},"خى":{isolated:"ﴃ",final:"ﴟ"},"خي":{isolated:"ﴄ",final:"ﴠ"},"صى":{isolated:"ﴅ",final:"ﴡ"},"صي":{isolated:"ﴆ",final:"ﴢ"},"ضى":{isolated:"ﴇ",final:"ﴣ"},"ضي":{isolated:"ﴈ",final:"ﴤ"},"شج":{isolated:"ﴉ",final:"ﴥ",initial:"ﴭ",medial:"ﴷ"},"شح":{isolated:"ﴊ",final:"ﴦ",initial:"ﴮ",medial:"ﴸ"},"شخ":{isolated:"ﴋ",final:"ﴧ",initial:"ﴯ",medial:"ﴹ"},"شر":{isolated:"ﴍ",final:"ﴩ"},"سر":{isolated:"ﴎ",final:"ﴪ"},"صر":{isolated:"ﴏ",final:"ﴫ"},"ضر":{isolated:"ﴐ",final:"ﴬ"},"سع":{final:"ﴗ"},"تجم":{initial:"ﵐ"},"تحج":{final:"ﵑ",initial:"ﵒ"},"تحم":{initial:"ﵓ"},"تخم":{initial:"ﵔ"},"تمج":{initial:"ﵕ"},"تمح":{initial:"ﵖ"},"تمخ":{initial:"ﵗ"},"جمح":{final:"ﵘ",initial:"ﵙ"},"حمي":{final:"ﵚ"},"حمى":{final:"ﵛ"},"سحج":{initial:"ﵜ"},"سجح":{initial:"ﵝ"},"سجى":{final:"ﵞ"},"سمح":{final:"ﵟ",initial:"ﵠ"},"سمج":{initial:"ﵡ"},"سمم":{final:"ﵢ",initial:"ﵣ"},"صحح":{final:"ﵤ",initial:"ﵥ"},"صمم":{final:"ﵦ",initial:"ﷅ"},"شحم":{final:"ﵧ",initial:"ﵨ"},"شجي":{final:"ﵩ"},"شمخ":{final:"ﵪ",initial:"ﵫ"},"شمم":{final:"ﵬ",initial:"ﵭ"},"ضحى":{final:"ﵮ"},"ضخم":{final:"ﵯ",initial:"ﵰ"},"ضمح":{final:"ﵱ"},"طمح":{initial:"ﵲ"},"طمم":{initial:"ﵳ"},"طمي":{final:"ﵴ"},"عجم":{final:"ﵵ",initial:"ﷄ"},"عمم":{final:"ﵶ",initial:"ﵷ"},"عمى":{final:"ﵸ"},"غمم":{final:"ﵹ"},"غمي":{final:"ﵺ"},"غمى":{final:"ﵻ"},"فخم":{final:"ﵼ",initial:"ﵽ"},"قمح":{final:"ﵾ",initial:"ﶴ"},"قمم":{final:"ﵿ"},"لحم":{final:"ﶀ",initial:"ﶵ"},"لحي":{final:"ﶁ"},"لحى":{final:"ﶂ"},"لجج":{initial:"ﶃ",final:"ﶄ"},"لخم":{final:"ﶅ",initial:"ﶆ"},"لمح":{final:"ﶇ",initial:"ﶈ"},"محج":{initial:"ﶉ"},"محم":{initial:"ﶊ"},"محي":{final:"ﶋ"},"مجح":{initial:"ﶌ"},"مجم":{initial:"ﶍ"},"مخج":{initial:"ﶎ"},"مخم":{initial:"ﶏ"},"مجخ":{initial:"ﶒ"},"همج":{initial:"ﶓ"},"همم":{initial:"ﶔ"},"نحم":{initial:"ﶕ"},"نحى":{final:"ﶖ"},"نجم":{final:"ﶗ",initial:"ﶘ"},"نجى":{final:"ﶙ"},"نمي":{final:"ﶚ"},"نمى":{final:"ﶛ"},"يمم":{final:"ﶜ",initial:"ﶝ"},"بخي":{final:"ﶞ"},"تجي":{final:"ﶟ"},"تجى":{final:"ﶠ"},"تخي":{final:"ﶡ"},"تخى":{final:"ﶢ"},"تمي":{final:"ﶣ"},"تمى":{final:"ﶤ"},"جمي":{final:"ﶥ"},"جحى":{final:"ﶦ"},"جمى":{final:"ﶧ"},"سخى":{final:"ﶨ"},"صحي":{final:"ﶩ"},"شحي":{final:"ﶪ"},"ضحي":{final:"ﶫ"},"لجي":{final:"ﶬ"},"لمي":{final:"ﶭ"},"يحي":{final:"ﶮ"},"يجي":{final:"ﶯ"},"يمي":{final:"ﶰ"},"ممي":{final:"ﶱ"},"قمي":{final:"ﶲ"},"نحي":{final:"ﶳ"},"عمي":{final:"ﶶ"},"كمي":{final:"ﶷ"},"نجح":{initial:"ﶸ",final:"ﶽ"},"مخي":{final:"ﶹ"},"لجم":{initial:"ﶺ",final:"ﶼ"},"كمم":{final:"ﶻ",initial:"ﷃ"},"جحي":{final:"ﶾ"},"حجي":{final:"ﶿ"},"مجي":{final:"ﷀ"},"فمي":{final:"ﷁ"},"بحي":{final:"ﷂ"},"سخي":{final:"ﷆ"},"نجي":{final:"ﷇ"},"لآ":{isolated:"ﻵ",final:"ﻶ"},"لأ":{isolated:"ﻷ",final:"ﻸ"},"لإ":{isolated:"ﻹ",final:"ﻺ"},"لا":{isolated:"ﻻ",final:"ﻼ"},words:{"صلے":"ﷰ","قلے":"ﷱ","الله":"ﷲ","اكبر":"ﷳ","محمد":"ﷴ","صلعم":"ﷵ","رسول":"ﷶ","عليه":"ﷷ","وسلم":"ﷸ","صلى":"ﷹ","صلىاللهعليهوسلم":"ﷺ","جلجلاله":"ﷻ","ریال":"﷼"}}}),reference=createCommonjsModule(function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var t=Object.keys(unicodeArabic.default);r.letterList=t;var n=Object.keys(unicodeLigatures.default);r.ligatureList=n;var i=Object.keys(unicodeLigatures.default.words);r.ligatureWordList=i;r.lams="لڵڶڷڸ";r.alefs="اآأإٱٲٳٵݳݴ";var o="؅ـٰٴ۟ۧۨ";function a(e,t){for(var n=e;n<=t;n++)r.tashkeel=o+=String.fromCharCode(n)}r.tashkeel=o,a(1552,1562),a(1611,1631),a(1750,1756),a(1760,1764),a(1770,1773),a(2259,2273),a(2275,2303),a(65136,65151);var s="اةوۀۏ۽۾ݫݬݱݳݴݸݹ࣢ࢱࢲࢹ";function l(e,t){for(var n=e;n<=t;n++)r.lineBreakers=s+=String.fromCharCode(n)}r.lineBreakers=s,l(1536,1567),l(1569,1573),l(1583,1586),l(1632,1645),l(1649,1655),l(1672,1689),l(1731,1739),l(1746,1785),l(1881,1883),l(2218,2222),l(64336,65021),l(65152,65276),l(69216,69247),l(126064,126143),l(126464,126719)}),GlyphSplitter_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GlyphSplitter=function(e){var t=[],n="";return e.split("").forEach(function(e){isArabic_1.isArabic(e)&&(-1<reference.tashkeel.indexOf(e)||n.length&&(0===reference.lams.indexOf(n)&&-1<reference.alefs.indexOf(e)||0<reference.lams.indexOf(n)&&0===reference.alefs.indexOf(e)))?t[t.length-1]+=e:t.push(e),-1===reference.tashkeel.indexOf(e)&&(n=e)}),t}}),BaselineSplitter_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BaselineSplitter=function(e){var t=[],n="";return e.split("").forEach(function(e){!isArabic_1.isArabic(e)||!isArabic_1.isArabic(n)||!(n.length&&-1<reference.tashkeel.indexOf(e))&&-1<reference.lineBreakers.indexOf(n)?t.push(e):t[t.length-1]+=e,-1===reference.tashkeel.indexOf(e)&&(n=e)}),t}}),Normalization=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Normal=function(e,g){void 0===g&&(g=!0);var m="";return e.split("").forEach(function(e){if(isArabic_1.isArabic(e)){for(var t=0;t<reference.letterList.length;t++)for(var n=unicodeArabic.default[reference.letterList[t]],r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]];if("object"==typeof o&&void 0===o.indexOf)for(var a=Object.keys(o),s=0;s<a.length;s++){var l=o[a[s]];if(l===e||"object"==typeof l&&l.indexOf&&-1<l.indexOf(e)){if(l===e)return g&&o.normal&&-1<["isolated","initial","medial","final"].indexOf(a[s])?void("object"==typeof o.normal?m+=o.normal[0]:m+=o.normal):void(m+=e);if("object"==typeof l&&l.indexOf&&-1<l.indexOf(e))return void(m+=l[0])}}else{if(o===e)return g&&n.normal&&-1<["isolated","initial","medial","final"].indexOf(r[i])?void("object"==typeof n.normal?m+=n.normal[0]:m+=n.normal):void(m+=e);if("object"==typeof o&&o.indexOf&&-1<o.indexOf(e))return void(m+=o[0])}}for(var c=0;c<reference.ligatureList.length;c++){var u=reference.ligatureList[c];if("words"!==u)for(var p=Object.keys(unicodeLigatures.default[u]),d=0;d<p.length;d++)if(unicodeLigatures.default[u][p[d]]===e)return void(m+=u)}for(var f=0;f<reference.ligatureWordList.length;f++){var h=reference.ligatureWordList[f];if(unicodeLigatures.default.words[h]===e)return void(m+=h)}m+=e}else m+=e}),m}}),CharShaper_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CharShaper=function(e,t){if(!isArabic_1.isArabic(e))throw new Error("Not Arabic");if("ء"===e)return"ء";for(var n=0;n<reference.letterList.length;n++)for(var r=unicodeArabic.default[reference.letterList[n]],i=Object.keys(r),o=0;o<i.length;o++){var a=r[i[o]];if(a===e||"object"==typeof a&&a.indexOf&&-1<a.indexOf(e)){if(-1<i.indexOf(t))return r[t]}else if("object"==typeof a&&void 0===a.indexOf)for(var s=Object.keys(a),l=0;l<s.length;l++)if((a[s[l]]===e||"object"==typeof a[s[l]]&&a[s[l]].indexOf&&-1<a[s[l]].indexOf(e))&&-1<s.indexOf(t))return a[t]}}}),WordShaper_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.WordShaper=function(e){for(var t="initial",n="",r=0;r<e.length;r++){for(var i=" ",o=r+1;o<e.length&&isArabic_1.isArabic(e[o]);o++)if(-1===reference.tashkeel.indexOf(e[o])){i=e[o];break}if(!isArabic_1.isArabic(e[r])||isArabic_1.isMath(e[r]))n+=e[r],t="initial";else if(-1<reference.tashkeel.indexOf(e[r]))n+=e[r];else if(" "===i||-1<reference.lineBreakers.indexOf(e[r]))n+=CharShaper_1.CharShaper(e[r],"initial"===t?"isolated":"final"),t="initial";else if(-1<reference.lams.indexOf(e[r])&&-1<reference.alefs.indexOf(i)){for(n+=unicodeLigatures.default[e[r]+i]["initial"===t?"isolated":"final"];e[r]!==i;)r++;t="initial"}else n+=CharShaper_1.CharShaper(e[r],t),t="medial"}return n}}),ParentLetter_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ParentLetter=function(e){if(!isArabic_1.isArabic(e))throw new Error("Not an Arabic letter");for(var t=0;t<reference.letterList.length;t++){for(var n=unicodeArabic.default[reference.letterList[t]],r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]];if("object"==typeof o&&void 0===o.indexOf)for(var a=Object.keys(o),s=0;s<a.length;s++){var l=o[a[s]];if(l===e||"object"==typeof l&&l.indexOf&&-1<l.indexOf(e))return o}else if(o===e||"object"==typeof o&&o.indexOf&&-1<o.indexOf(e))return n}return null}},t.GrandparentLetter=function(e){if(!isArabic_1.isArabic(e))throw new Error("Not an Arabic letter");for(var t=0;t<reference.letterList.length;t++){for(var n=unicodeArabic.default[reference.letterList[t]],r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]];if("object"==typeof o&&void 0===o.indexOf)for(var a=Object.keys(o),s=0;s<a.length;s++){var l=o[a[s]];if(l===e||"object"==typeof l&&l.indexOf&&-1<l.indexOf(e))return n}else if(o===e||"object"==typeof o&&o.indexOf&&-1<o.indexOf(e))return n}return null}}}),lib$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isArabic=isArabic_1.isArabic,t.GlyphSplitter=GlyphSplitter_1.GlyphSplitter,t.BaselineSplitter=BaselineSplitter_1.BaselineSplitter,t.Normal=Normalization.Normal,t.CharShaper=CharShaper_1.CharShaper,t.WordShaper=WordShaper_1.WordShaper,t.ParentLetter=ParentLetter_1.ParentLetter,t.GrandparentLetter=ParentLetter_1.GrandparentLetter}),rtlRegex=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u07BF\u08A0–\u08BF]/,_storage,mga;function fixRTLTextForSvg(e){var t="",n=[],r=/[\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06ED]/g,i=/[\u0660-\u066C\u06F0-\u06F9]+/g,o=/[\u07A6-\u07B0]/,a=/[\u0591-\u05bd\u05bf\u05c1-\u05c5\u05c7]/;/[\u0600-\u06FF]/g.test(e)&&(e=lib$1.WordShaper(e));for(var s=0;s<e.length;s++){var l=e[s];i.test(l)?(t+=n.reverse().join(""),n=[l]):(n.length&&i.test(n[n.length-1])&&(t+=n.reverse().join(""),n=[]),(o.test(l)||a.test(l)||r.test(l))&&n.length?n[n.length-1]+=l:rtlRegex.test(l)||64336<=l.charCodeAt(0)&&l.charCodeAt(0)<=65023||65136<=l.charCodeAt(0)&&l.charCodeAt(0)<=65279?n.push(l):n=" "===l&&n.length?[n.reverse().join("")+" "]:(t+=n.reverse().join("")+l,[]))}return t+=n.reverse().join("")}try{_storage=localStorage}catch(e){}function corePreferences(e,t){try{if(1===arguments.length)return _storage.getItem(e);null===t?_storage.removeItem(e):_storage.setItem(e,t)}catch(e){"undefined"!=typeof console&&console.error("localStorage quota exceeded")}}function responseText(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function d3_text(e,t){return fetch(e,t).then(responseText)}function responseJson(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(204!==e.status&&205!==e.status)return e.json()}function d3_json(e,t){return fetch(e,t).then(responseJson)}function parser(n){return function(e,t){return d3_text(e,t).then(function(e){return(new DOMParser).parseFromString(e,n)})}}_storage=_storage||(mga={},{getItem:function(e){return mga[e]},setItem:function(e,t){return mga[e]=t},removeItem:function(e){return delete mga[e]}});var d3_xml=parser("application/xml"),svg=parser("image/svg+xml"),_mainFileFetcher=coreFileFetcher(),_detected;function coreFileFetcher(){var i={},o={},a={address_formats:"data/address_formats.min.json",deprecated:"data/deprecated.min.json",discarded:"data/discarded.min.json",imagery:"data/imagery.min.json",intro_graph:"data/intro_graph.min.json",keepRight:"data/keepRight.min.json",languages:"data/languages.min.json",locales:"data/locales.min.json",nsi_brands:"https://cdn.jsdelivr.net/npm/name-suggestion-index@4/dist/brands.min.json",nsi_filters:"https://cdn.jsdelivr.net/npm/name-suggestion-index@4/dist/filters.min.json",oci_features:"https://cdn.jsdelivr.net/npm/osm-community-index@2/dist/features.min.json",oci_resources:"https://cdn.jsdelivr.net/npm/osm-community-index@2/dist/resources.min.json",preset_categories:"data/preset_categories.min.json",preset_defaults:"data/preset_defaults.min.json",preset_fields:"data/preset_fields.min.json",preset_presets:"data/preset_presets.min.json",phone_formats:"data/phone_formats.min.json",qa_data:"data/qa_data.min.json",shortcuts:"data/shortcuts.min.json",territory_languages:"data/territory_languages.min.json",wmf_sitematrix:"https://cdn.jsdelivr.net/npm/wmf-sitematrix@0.1/wikipedia.min.json"},s={};i.cache=function(){return s},i.get=function(t){if(s[t])return Promise.resolve(s[t]);var e=a[t],n=e&&i.asset(e);if(!n)return Promise.reject('Unknown data file for "'+t+'"');var r=o[n];return r||(o[n]=r=d3_json(n).then(function(e){if(delete o[n],!e)throw new Error('No data loaded for "'+t+'"');return s[t]=e}).catch(function(e){throw delete o[n],e})),r},i.fileMap=function(e){return arguments.length?(a=e,i):a};var n="";i.assetPath=function(e){return arguments.length?(n=e,i):n};var r={};return i.assetMap=function(e){return arguments.length?(r=e,i):r},i.asset=function(e){if(/^http(s)?:\/\//i.test(e))return e;var t=n+e;return r[t]||t},i}function utilDetect(e){if(_detected&&!e)return _detected;_detected={};var t=navigator.userAgent,n=null;null!==(n=t.match(/(edge)\/?\s*(\.?\d+(\.\d+)*)/i))&&(_detected.browser=n[1],_detected.version=n[2]),_detected.browser||null!==(n=t.match(/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/i))&&(_detected.browser="msie",_detected.version=n[1]),_detected.browser||null!==(n=t.match(/(opr)\/?\s*(\.?\d+(\.\d+)*)/i))&&(_detected.browser="Opera",_detected.version=n[2]),_detected.browser||null!==(n=t.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i))&&(_detected.browser=n[1],_detected.version=n[2],null!==(n=t.match(/version\/([\.\d]+)/i))&&(_detected.version=n[1])),_detected.browser||(_detected.browser=navigator.appName,_detected.version=navigator.appVersion),_detected.version=_detected.version.split(/\W/).slice(0,2).join("."),_detected.opera="opera"===_detected.browser.toLowerCase()&&parseFloat(_detected.version)<15,"msie"===_detected.browser.toLowerCase()?(_detected.ie=!0,_detected.browser="Internet Explorer",_detected.support=11<=parseFloat(_detected.version)):(_detected.ie=!1,_detected.support=!0),_detected.filedrop=window.FileReader&&"ondrop"in window,_detected.download=!(_detected.ie||"edge"===_detected.browser.toLowerCase()),_detected.cssfilters=!(_detected.ie||"edge"===_detected.browser.toLowerCase()),/Win/.test(t)?(_detected.os="win",_detected.platform="Windows"):/Mac/.test(t)?(_detected.os="mac",_detected.platform="Macintosh"):/X11/.test(t)||/Linux/.test(t)?(_detected.os="linux",_detected.platform="Linux"):(_detected.os="win",_detected.platform="Unknown"),_detected.isMobileWebKit=(/\b(iPad|iPhone|iPod)\b/.test(t)||"MacIntel"===navigator.platform&&"maxTouchPoints"in navigator&&1<navigator.maxTouchPoints)&&/WebKit/.test(t)&&!/Edge/.test(t)&&!window.MSStream,_detected.browserLocales=Array.from(new Set([navigator.language].concat(navigator.languages||[]).concat([navigator.userLanguage,"en"]).filter(Boolean)));var r=window.top.location,i=(i=r.origin)||r.protocol+"//"+r.hostname+(r.port?":"+r.port:"");return _detected.host=i+r.pathname,_detected}var aesJs=createCommonjsModule(function(O,e){!function(){function n(e){return parseInt(e)===e}function r(e){if(n(e.length)){for(var t=0;t<e.length;t++)if(!n(e[t])||e[t]<0||255<e[t])return;return 1}}function o(e,t){if(e.buffer&&"Uint8Array"===e.name)return t&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!r(e))throw new Error("Array contains invalid value: "+e);return new Uint8Array(e)}if(n(e.length)&&r(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function l(e){return new Uint8Array(e)}function a(e,t,n,r,i){null==r&&null==i||(e=e.slice?e.slice(r,i):Array.prototype.slice.call(e,r,i)),t.set(e,n)}var i,e={toBytes:function(e){var t=[],n=0;for(e=encodeURI(e);n<e.length;){var r=e.charCodeAt(n++);37===r?(t.push(parseInt(e.substr(n,2),16)),n+=2):t.push(r)}return o(t)},fromBytes:function(e){for(var t=[],n=0;n<e.length;){var r=e[n];r<128?(t.push(String.fromCharCode(r)),n++):191<r&&r<224?(t.push(String.fromCharCode((31&r)<<6|63&e[n+1])),n+=2):(t.push(String.fromCharCode((15&r)<<12|(63&e[n+1])<<6|63&e[n+2])),n+=3)}return t.join("")}},t=(i="0123456789abcdef",{toBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},fromBytes:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(i[(240&r)>>4]+i[15&r])}return t.join("")}}),p={16:10,24:12,32:14},d=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],f=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],c=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],u=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],h=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],g=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],m=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],y=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],v=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],_=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],b=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],w=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],x=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],S=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],E=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function C(e){for(var t=[],n=0;n<e.length;n+=4)t.push(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]);return t}var s=function(e){if(!(this instanceof s))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:o(e,!0)}),this._prepare()};s.prototype._prepare=function(){var e=p[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var n,r=4*(e+1),i=this.key.length/4,o=C(this.key),t=0;t<i;t++)n=t>>2,this._Ke[n][t%4]=o[t],this._Kd[e-n][t%4]=o[t];for(var a,s=0,l=i;l<r;){if(a=o[i-1],o[0]^=f[a>>16&255]<<24^f[a>>8&255]<<16^f[255&a]<<8^f[a>>24&255]^d[s]<<24,s+=1,8!=i)for(t=1;t<i;t++)o[t]^=o[t-1];else{for(t=1;t<i/2;t++)o[t]^=o[t-1];a=o[i/2-1],o[i/2]^=f[255&a]^f[a>>8&255]<<8^f[a>>16&255]<<16^f[a>>24&255]<<24;for(t=i/2+1;t<i;t++)o[t]^=o[t-1]}for(t=0;t<i&&l<r;)c=l>>2,u=l%4,this._Ke[c][u]=o[t],this._Kd[e-c][u]=o[t++],l++}for(var c=1;c<e;c++)for(var u=0;u<4;u++)a=this._Kd[c][u],this._Kd[c][u]=w[a>>24&255]^x[a>>16&255]^S[a>>8&255]^E[255&a]},s.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,n=[0,0,0,0],r=C(e),i=0;i<4;i++)r[i]^=this._Ke[0][i];for(var o=1;o<t;o++){for(i=0;i<4;i++)n[i]=u[r[i]>>24&255]^h[r[(i+1)%4]>>16&255]^g[r[(i+2)%4]>>8&255]^m[255&r[(i+3)%4]]^this._Ke[o][i];r=n.slice()}for(var a,s=l(16),i=0;i<4;i++)a=this._Ke[t][i],s[4*i]=255&(f[r[i]>>24&255]^a>>24),s[4*i+1]=255&(f[r[(i+1)%4]>>16&255]^a>>16),s[4*i+2]=255&(f[r[(i+2)%4]>>8&255]^a>>8),s[4*i+3]=255&(f[255&r[(i+3)%4]]^a);return s},s.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,n=[0,0,0,0],r=C(e),i=0;i<4;i++)r[i]^=this._Kd[0][i];for(var o=1;o<t;o++){for(i=0;i<4;i++)n[i]=y[r[i]>>24&255]^v[r[(i+3)%4]>>16&255]^_[r[(i+2)%4]>>8&255]^b[255&r[(i+1)%4]]^this._Kd[o][i];r=n.slice()}for(var a,s=l(16),i=0;i<4;i++)a=this._Kd[t][i],s[4*i]=255&(c[r[i]>>24&255]^a>>24),s[4*i+1]=255&(c[r[(i+3)%4]>>16&255]^a>>16),s[4*i+2]=255&(c[r[(i+2)%4]>>8&255]^a>>8),s[4*i+3]=255&(c[255&r[(i+1)%4]]^a);return s};var A=function(e){if(!(this instanceof A))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new s(e)};A.prototype.encrypt=function(e){if((e=o(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=l(e.length),n=l(16),r=0;r<e.length;r+=16)a(e,n,0,r,r+16),a(n=this._aes.encrypt(n),t,r);return t},A.prototype.decrypt=function(e){if((e=o(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=l(e.length),n=l(16),r=0;r<e.length;r+=16)a(e,n,0,r,r+16),a(n=this._aes.decrypt(n),t,r);return t};var I=function(e,t){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=l(16);this._lastCipherblock=o(t,!0),this._aes=new s(e)};I.prototype.encrypt=function(e){if((e=o(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=l(e.length),n=l(16),r=0;r<e.length;r+=16){a(e,n,0,r,r+16);for(var i=0;i<16;i++)n[i]^=this._lastCipherblock[i];this._lastCipherblock=this._aes.encrypt(n),a(this._lastCipherblock,t,r)}return t},I.prototype.decrypt=function(e){if((e=o(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=l(e.length),n=l(16),r=0;r<e.length;r+=16){a(e,n,0,r,r+16),n=this._aes.decrypt(n);for(var i=0;i<16;i++)t[r+i]=n[i]^this._lastCipherblock[i];a(e,this._lastCipherblock,0,r,r+16)}return t};var k=function(e,t,n){if(!(this instanceof k))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=l(16);n=n||1,this.segmentSize=n,this._shiftRegister=o(t,!0),this._aes=new s(e)};k.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t,n=o(e,!0),r=0;r<n.length;r+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++)n[r+i]^=t[i];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(n,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n},k.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t,n=o(e,!0),r=0;r<n.length;r+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++)n[r+i]^=t[i];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(e,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n};var N=function(e,t){if(!(this instanceof N))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=l(16);this._lastPrecipher=o(t,!0),this._lastPrecipherIndex=16,this._aes=new s(e)};N.prototype.encrypt=function(e){for(var t=o(e,!0),n=0;n<t.length;n++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[n]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},N.prototype.decrypt=N.prototype.encrypt;var P=function(e){if(!(this instanceof P))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"==typeof e?(this._counter=l(16),this.setValue(e)):this.setBytes(e)};P.prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");if(e>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var t=15;0<=t;--t)this._counter[t]=e%256,e=parseInt(e/256)},P.prototype.setBytes=function(e){if(16!=(e=o(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},P.prototype.increment=function(){for(var e=15;0<=e;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}};var D=function(e,t){if(!(this instanceof D))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof P||(t=new P(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new s(e)};D.prototype.encrypt=function(e){for(var t=o(e,!0),n=0;n<t.length;n++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[n]^=this._remainingCounter[this._remainingCounterIndex++];return t},D.prototype.decrypt=D.prototype.encrypt;var T={AES:s,Counter:P,ModeOfOperation:{ecb:A,cbc:I,cfb:k,ofb:N,ctr:D},utils:{hex:t,utf8:e},padding:{pkcs7:{pad:function(e){var t=16-(e=o(e,!0)).length%16,n=l(e.length+t);a(e,n);for(var r=e.length;r<n.length;r++)n[r]=t;return n},strip:function(e){if((e=o(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(16<t)throw new Error("PKCS#7 padding byte out of range");for(var n=e.length-t,r=0;r<t;r++)if(e[n+r]!==t)throw new Error("PKCS#7 invalid padding byte");var i=l(n);return a(e,i,0,0,n),i}}},_arrayTest:{coerceArray:o,createArray:l,copyArray:a}};O.exports=T}()}),DEFAULT_128=[250,157,60,79,142,134,229,129,138,126,210,129,29,71,160,208];function utilAesEncrypt(e,t){t=t||DEFAULT_128;var n=aesJs.utils.utf8.toBytes(e),r=new aesJs.ModeOfOperation.ctr(t).encrypt(n);return aesJs.utils.hex.fromBytes(r)}function utilAesDecrypt(e,t){t=t||DEFAULT_128;var n=aesJs.utils.hex.toBytes(e),r=new aesJs.ModeOfOperation.ctr(t).decrypt(n);return aesJs.utils.utf8.fromBytes(r)}function utilCleanTags(e){var t,n={};for(var r in e){r&&(void 0!==(t=e[r])&&(n[r]=function(e,t){if(/^(description|note|fixme)$/.test(e))return t;var n=t.split(";").map(function(e){return e.trim()}).join(/_hours|_times|:conditional$/.test(e)?"; ":";");-1===e.indexOf("website")&&-1===e.indexOf("email")&&0!==n.indexOf("http")||(n=n.replace(/[\u200B-\u200F\uFEFF]/g,""));return n}(r,t)))}return n}function utilGetSetValue(e,t){return 1===arguments.length?e.property("value"):e.each(null==(n=t)?function(){delete this.value}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?delete this.value:this.value!==e&&(this.value=e)}:function(){this.value!==n&&(this.value=n)});var n}function utilKeybinding(t){var u={};function n(e){for(var t,n=!1,r=Object.keys(u).map(function(e){return u[e]}),i=0;i<r.length;i++)(t=r[i]).event.modifiers.shiftKey&&!!t.capture===e&&o(t,!0)&&(t.callback(),n=!0);if(!n)for(i=0;i<r.length;i++)(t=r[i]).event.modifiers.shiftKey||!!t.capture===e&&o(t,!1)&&t.callback();function o(e,t){var n=event,r=!1,i=!0;if(void 0!==n.key&&(i=255<n.key.charCodeAt(0),r=!0,void 0===e.event.key?r=!1:Array.isArray(e.event.key)?-1===e.event.key.map(function(e){return e.toLowerCase()}).indexOf(n.key.toLowerCase())&&(r=!1):n.key.toLowerCase()!==e.event.key.toLowerCase()&&(r=!1)),!r&&i&&(r=n.keyCode===e.event.keyCode),r){if(!n.ctrlKey||!n.altKey){if(n.ctrlKey!==e.event.modifiers.ctrlKey)return;if(n.altKey!==e.event.modifiers.altKey)return}if(n.metaKey===e.event.modifiers.metaKey&&(!t||n.shiftKey===e.event.modifiers.shiftKey))return 1}}}function r(){n(!0)}function i(){var e=select(event.target).node().tagName;"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e&&n(!1)}function p(e){return(e=e||select(document)).on("keydown.capture."+t,r,!0),e.on("keydown.bubble."+t,i,!1),p}return p.unbind=function(e){return u=[],(e=e||select(document)).on("keydown.capture."+t,null),e.on("keydown.bubble."+t,null),p},p.clear=function(){return u={},p},p.off=function(e,t){for(var n=utilArrayUniq([].concat(e)),r=0;r<n.length;r++){var i=n[r]+(t?"-capture":"-bubble");delete u[i]}return p},p.on=function(e,t,n){if("function"!=typeof t)return p.off(e,n);for(var r=utilArrayUniq([].concat(e)),i=0;i<r.length;i++){var o=r[i]+(n?"-capture":"-bubble"),a={id:o,capture:n,callback:t,event:{key:void 0,keyCode:0,modifiers:{shiftKey:!1,ctrlKey:!1,altKey:!1,metaKey:!1}}};u[o]&&console.warn('warning: duplicate keybinding for "'+o+'"'),u[o]=a;for(var s,l=r[i].toLowerCase().match(/(?:(?:[^+⇧⌃⌥⌘])+|[⇧⌃⌥⌘]|\+\+|^\+$)/g),c=0;c<l.length;c++){"++"===l[c]&&(l[c]="+"),l[c]in utilKeybinding.modifierCodes?(s=utilKeybinding.modifierProperties[utilKeybinding.modifierCodes[l[c]]],a.event.modifiers[s]=!0):(a.event.key=utilKeybinding.keys[l[c]]||l[c],l[c]in utilKeybinding.keyCodes&&(a.event.keyCode=utilKeybinding.keyCodes[l[c]]))}}return p},p}utilKeybinding.modifierCodes={"⇧":16,shift:16,"⌃":17,ctrl:17,"⌥":18,alt:18,option:18,"⌘":91,meta:91,cmd:91,super:91,win:91},utilKeybinding.modifierProperties={16:"shiftKey",17:"ctrlKey",18:"altKey",91:"metaKey"},utilKeybinding.keys={"⌫":"Backspace",backspace:"Backspace","⇥":"Tab","⇆":"Tab",tab:"Tab","↩":"Enter",return:"Enter",enter:"Enter","⌅":"Enter",pause:"Pause","pause-break":"Pause","⇪":"CapsLock",caps:"CapsLock","caps-lock":"CapsLock","⎋":["Escape","Esc"],escape:["Escape","Esc"],esc:["Escape","Esc"],space:[" ","Spacebar"],"↖":"PageUp",pgup:"PageUp","page-up":"PageUp","↘":"PageDown",pgdown:"PageDown","page-down":"PageDown","⇟":"End",end:"End","⇞":"Home",home:"Home",ins:"Insert",insert:"Insert","⌦":["Delete","Del"],del:["Delete","Del"],delete:["Delete","Del"],"←":["ArrowLeft","Left"],left:["ArrowLeft","Left"],"arrow-left":["ArrowLeft","Left"],"↑":["ArrowUp","Up"],up:["ArrowUp","Up"],"arrow-up":["ArrowUp","Up"],"→":["ArrowRight","Right"],right:["ArrowRight","Right"],"arrow-right":["ArrowRight","Right"],"↓":["ArrowDown","Down"],down:["ArrowDown","Down"],"arrow-down":["ArrowDown","Down"],"*":["*","Multiply"],star:["*","Multiply"],asterisk:["*","Multiply"],multiply:["*","Multiply"],"+":["+","Add"],plus:["+","Add"],"-":["-","Subtract"],subtract:["-","Subtract"],dash:["-","Subtract"],semicolon:";",equals:"=",comma:",",period:".","full-stop":".",slash:"/","forward-slash":"/",tick:"`","back-quote":"`","open-bracket":"[","back-slash":"\\","close-bracket":"]",quote:"'",apostrophe:"'","num-0":"0","num-1":"1","num-2":"2","num-3":"3","num-4":"4","num-5":"5","num-6":"6","num-7":"7","num-8":"8","num-9":"9",f1:"F1",f2:"F2",f3:"F3",f4:"F4",f5:"F5",f6:"F6",f7:"F7",f8:"F8",f9:"F9",f10:"F10",f11:"F11",f12:"F12",f13:"F13",f14:"F14",f15:"F15",f16:"F16",f17:"F17",f18:"F18",f19:"F19",f20:"F20",f21:"F21",f22:"F22",f23:"F23",f24:"F24",f25:"F25"},utilKeybinding.keyCodes={"⌫":8,backspace:8,"⇥":9,"⇆":9,tab:9,"↩":13,return:13,enter:13,"⌅":13,pause:19,"pause-break":19,"⇪":20,caps:20,"caps-lock":20,"⎋":27,escape:27,esc:27,space:32,"↖":33,pgup:33,"page-up":33,"↘":34,pgdown:34,"page-down":34,"⇟":35,end:35,"⇞":36,home:36,ins:45,insert:45,"⌦":46,del:46,delete:46,"←":37,left:37,"arrow-left":37,"↑":38,up:38,"arrow-up":38,"→":39,right:39,"arrow-right":39,"↓":40,down:40,"arrow-down":40,ffequals:61,"*":106,star:106,asterisk:106,multiply:106,"+":107,plus:107,"-":109,subtract:109,ffplus:171,ffminus:173,";":186,semicolon:186,"=":187,equals:187,",":188,comma:188,dash:189,".":190,period:190,"full-stop":190,"/":191,slash:191,"forward-slash":191,"`":192,tick:192,"back-quote":192,"[":219,"open-bracket":219,"\\":220,"back-slash":220,"]":221,"close-bracket":221,"'":222,quote:222,apostrophe:222};for(var i$2=95,n=0;++i$2<106;)utilKeybinding.keyCodes["num-"+n]=i$2,++n;for(i$2=47,n=0;++i$2<58;)utilKeybinding.keyCodes[n]=i$2,++n;for(i$2=111,n=1;++i$2<136;)utilKeybinding.keyCodes["f"+n]=i$2,++n;for(i$2=64;++i$2<91;)utilKeybinding.keyCodes[String.fromCharCode(i$2).toLowerCase()]=i$2;function utilObjectOmit(n,r){return Object.keys(n).reduce(function(e,t){return-1===r.indexOf(t)&&(e[t]=n[t]),e},{})}function utilRebind(e,t){for(var n,r=arguments,i=1,o=arguments.length;++i<o;)e[n=r[i]]=d3_rebind(e,t,t[n]);return e}function d3_rebind(t,n,r){return function(){var e=r.apply(n,arguments);return e===n?t:e}}function utilSessionMutex(t){var e,n={};function r(){var e=new Date;e.setSeconds(e.getSeconds()+5),document.cookie=t+"=1; expires="+e.toUTCString()+"; sameSite=strict"}return n.lock=function(){return!!e||!document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+t+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1")&&(r(),e=window.setInterval(r,4e3),!0)},n.unlock=function(){e&&(document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; sameSite=strict",clearInterval(e),e=null)},n.locked=function(){return!!e},n}function utilTiler(){var f=[256,256],h=256,g=256,m=[0,20],y=[f[0]/2,f[1]/2],v=0,a=!1;function _(e,t,n){return Math.max(t,Math.min(e,n))}function t(){for(var e=geoScaleToZoom(h/(2*Math.PI),g),t=_(Math.round(e),m[0],m[1]),n=Math.pow(2,t)-1,r=Math.log(g)*Math.LOG2E,i=Math.pow(2,e-t+r),o=[(y[0]-h/2)/i,(y[1]-h/2)/i],a=range$1(_(Math.floor(-o[0])-v,0,1+n),_(Math.ceil(f[0]/i-o[0])+v,0,1+n)),s=range$1(_(Math.floor(-o[1])-v,0,1+n),_(Math.ceil(f[1]/i-o[1])+v,0,1+n)),l=[],c=0;c<s.length;c++)for(var u=s[c],p=0;p<a.length;p++){var d=a[p];v<=c&&c<=s.length-v&&v<=p&&p<=a.length-v?l.unshift([d,u,t]):l.push([d,u,t])}return l.translate=o,l.scale=i,l}return t.getTiles=function(r){var i=[r.scale()*Math.PI-r.translate()[0],r.scale()*Math.PI-r.translate()[1]];this.size(r.clipExtent()[1]).scale(2*r.scale()*Math.PI).translate(r.translate());var e=t(),o=e.scale;return e.map(function(e){if(a&&function(e){var t=e[0],n=e[1],r=e[2];if(7<=r){var i=Math.pow(2,r-1),o=Math.pow(2,r-6),a=i-o/2,s=i+o/2-1;return a<=t&&t<=s&&a<=n&&n<=s}}(e))return!1;var t=e[0]*o-i[0],n=e[1]*o-i[1];return{id:e.toString(),xyz:e,extent:geoExtent(r.invert([t,n+o]),r.invert([t+o,n]))}}).filter(Boolean)},t.getGeoJSON=function(e){return{type:"FeatureCollection",features:t.getTiles(e).map(function(e){return{type:"Feature",properties:{id:e.id,name:e.id},geometry:{type:"Polygon",coordinates:[e.extent.polygon()]}}})}},t.tileSize=function(e){return arguments.length?(g=e,t):g},t.zoomExtent=function(e){return arguments.length?(m=e,t):m},t.size=function(e){return arguments.length?(f=e,t):f},t.scale=function(e){return arguments.length?(h=e,t):h},t.translate=function(e){return arguments.length?(y=e,t):y},t.margin=function(e){return arguments.length?(v=+e,t):v},t.skipNullIsland=function(e){return arguments.length?(a=e,t):a},t}function utilTriggerEvent(e,t){e.each(function(){var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!0),this.dispatchEvent(e)})}var _mainLocalizer=coreLocalizer(),_t=_mainLocalizer.t;function coreLocalizer(){var l={},a={},s={},c={},u="en-US",n="en",r="ltr",i=!1,p={},d={};l.localeCode=function(){return u},l.languageCode=function(){return n},l.textDirection=function(){return r},l.usesMetric=function(){return i},l.languageNames=function(){return p},l.scriptNames=function(){return d};var e,t=[];return l.preferredLocaleCodes=function(e){return arguments.length?(t="string"==typeof e?e.split(/,|;| /gi).filter(Boolean):e,l):t},l.ensureLoaded=function(){return e||(e=Promise.all([_mainFileFetcher.get("languages"),_mainFileFetcher.get("locales")]).then(function(e){a=e[0],s=e[1]}).then(function(){var e=(t||[]).concat(utilDetect().browserLocales);return u=function(i){var o=s;for(var e in i){var t=function(n){var r=i[n];if(r.includes("-")){if(o[r])return{v:r};var e=r.split("-")[0];if(o[e])return{v:e}}else{var t=i.find(function(e,t){return n<t&&e!==r&&e.split("-")[0]===r&&o[e]});if(t)return{v:t};if(o[r])return{v:r}}}(e);if(t)return t.v}return null}(e),Promise.all([l.loadLocale("en"),l.loadLocale(u)])}).then(function(){!function(){if(!u)return;n=u.split("-")[0];var e=s[u]||s[n],t=utilStringQs(window.location.hash);r="true"===t.rtl||"false"!==t.rtl&&e&&e.rtl?"rtl":"ltr";p=e&&e.languageNames,d=e&&e.scriptNames,i="-us"!==u.slice(-3).toLowerCase()}()}).catch(function(e){return console.error(e)}))},l.loadLocale=function(e){if(!s)return Promise.reject("loadLocale called before init");var t=e;if("en-us"===t.toLowerCase()&&(t="en"),!s[t])return Promise.reject("Unsupported locale: "+e);if(c[t])return Promise.resolve(t);var n=_mainFileFetcher.fileMap(),r="locale_"+t;return n[r]="locales/"+t+".json",_mainFileFetcher.get(r).then(function(e){return c[t]=e[t],t})},l.t=function(e,t,n){"en-us"===(n=n||u).toLowerCase()&&(n="en");for(var r=e.split(".").map(function(e){return e.replace(/<TX_DOT>/g,".")}).reverse(),i=c[n];void 0!==i&&r.length;)i=i[r.pop()];if(void 0!==i){if(t)for(var o in t)var a=new RegExp("{"+o+"}","g"),i=i.replace(a,t[o]);return i}if("en"!==n)return l.t(e,t,"en");if(t&&"default"in t)return t.default;var s="Missing "+n+" translation: "+e;return"undefined"!=typeof console&&console.error(s),s},l.languageName=function(e,t){if(p[e])return p[e];if(t&&t.localOnly)return null;var n=a[e];if(n){if(n.nativeName)return l.t("translate.language_and_code",{language:n.nativeName,code:e});if(n.base&&n.script){var r=n.base;if(p[r]){var i=n.script,o=d[i]||i;return l.t("translate.language_and_code",{language:p[r],code:o})}if(a[r]&&a[r].nativeName)return l.t("translate.language_and_code",{language:a[r].nativeName,code:e})}}return e},l}function presetCollection(e){var m={},n={};return m.collection=e,m.item=function(t){if(n[t])return n[t];var e=m.collection.find(function(e){return e.id===t});return e&&(n[t]=e),e},m.index=function(t){return m.collection.findIndex(function(e){return e.id===t})},m.matchGeometry=function(t){return presetCollection(m.collection.filter(function(e){return e.matchGeometry(t)}))},m.matchAllGeometry=function(t){return presetCollection(m.collection.filter(function(e){return e&&e.matchAllGeometry(t)}))},m.matchAnyGeometry=function(e){return presetCollection(m.collection.filter(function(t){return e.some(function(e){return t.matchGeometry(e)})}))},m.fallback=function(e){var t=e;return"vertex"===t&&(t="point"),m.item(t)},m.search=function(o,e,t){if(!o)return m;function n(e){var t=e.indexOf(o);return 0===t||" "===e[t-1]}function r(e,t){var n=(e.suggestion?e.originalName:e.name()).toLowerCase(),r=(t.suggestion?t.originalName:t.name()).toLowerCase();if(o===n)return-1;if(o===r)return 1;var i=t.originalScore-e.originalScore;return 0!==i||0!==(i=n.indexOf(o)-r.indexOf(o))?i:n.length-r.length}o=o.toLowerCase().trim();var i=m.collection;t&&(i=i.filter(function(e){return(!e.countryCodes||-1!==e.countryCodes.indexOf(t))&&(!e.notCountryCodes||-1===e.notCountryCodes.indexOf(t))}));var a=i.filter(function(e){return!1!==e.searchable&&!0!==e.suggestion}),s=i.filter(function(e){return!0===e.suggestion}),l=a.filter(function(e){return n(e.name().toLowerCase())}).sort(r),c=s.filter(function(e){return 0===e.originalName.toLowerCase().indexOf(o)}).sort(r),u=a.filter(function(e){return(e.terms()||[]).some(n)}),p=a.filter(function(e){return Object.values(e.tags||{}).filter(function(e){return"*"!==e}).some(n)}),d=a.map(function(e){return{preset:e,dist:utilEditDistance(o,e.name())}}).filter(function(e){return e.dist+Math.min(o.length-e.preset.name().length,0)<3}).sort(function(e,t){return e.dist-t.dist}).map(function(e){return e.preset}),f=s.map(function(e){return{preset:e,dist:utilEditDistance(o,e.originalName.toLowerCase())}}).filter(function(e){return e.dist+Math.min(o.length-e.preset.originalName.length,0)<1}).sort(function(e,t){return e.dist-t.dist}).map(function(e){return e.preset}),h=a.filter(function(e){return(e.terms()||[]).some(function(e){return utilEditDistance(o,e)+Math.min(o.length-e.length,0)<3})}),g=l.concat(c,u,p,d,f,h).slice(0,49);return e&&("string"==typeof e?g.push(m.fallback(e)):e.forEach(function(e){return g.push(m.fallback(e))})),presetCollection(utilArrayUniq(g))},m}function presetCategory(e,t,n){var r=Object.assign({},t);return r.id=e,r.members=presetCollection(t.members.map(function(e){return n.item(e)}).filter(Boolean)),r.geometry=r.members.collection.reduce(function(e,t){for(var n in t.geometry){var r=t.geometry[n];-1===e.indexOf(r)&&e.push(r)}return e},[]),r.matchGeometry=function(e){return 0<=r.geometry.indexOf(e)},r.matchAllGeometry=function(t){return r.members.collection.some(function(e){return e.matchAllGeometry(t)})},r.matchScore=function(){return-1},r.name=function(){return _t("presets.categories."+e+".name",{default:e})},r.terms=function(){return[]},r}function presetField(n,e){var t=Object.assign({},e);t.id=n,t.safeid=utilSafeClassName(n),t.matchGeometry=function(e){return!t.geometry||-1!==t.geometry.indexOf(e)},t.matchAllGeometry=function(e){return!t.geometry||e.every(function(e){return-1!==t.geometry.indexOf(e)})},t.t=function(e,t){return _t("presets.fields."+n+"."+e,t)},t.label=function(){return t.overrideLabel||t.t("label",{default:n})};var r=t.placeholder;return t.placeholder=function(){return t.t("placeholder",{default:r})},t.originalTerms=(t.terms||[]).join(),t.terms=function(){return t.t("terms",{default:t.originalTerms}).toLowerCase().trim().split(/\s*,+\s*/)},t}function presetPreset(r,e,t,s,l){s=s||{},l=l||{};var n,i,c=Object.assign({},e),o=t||!1;c.id=r,c.safeid=utilSafeClassName(r),c.originalTerms=(c.terms||[]).join(),c.originalName=c.name||"",c.originalScore=c.matchScore||1,c.originalReference=c.reference||{},c.originalFields=c.fields||[],c.originalMoreFields=c.moreFields||[],c.fields=function(){return n=n||u("fields")},c.moreFields=function(){return i=i||u("moreFields")},c.resetFields=function(){return n=i=null},c.tags=c.tags||{},c.addTags=c.addTags||c.tags,c.removeTags=c.removeTags||c.addTags,c.geometry=c.geometry||[],c.matchGeometry=function(e){return 0<=c.geometry.indexOf(e)},c.matchAllGeometry=function(e){return e.every(c.matchGeometry)},c.matchScore=function(e){var t=c.tags,n={},r=0;for(var i in t)if(n[i]=!0,e[i]===t[i])r+=c.originalScore;else{if(!("*"===t[i]&&i in e))return-1;r+=c.originalScore/2}var o=c.addTags;for(var a in o)n[a]||e[a]!==o[a]||(r+=c.originalScore);return r};var a={};function u(n){var e,t,r="fields"===n?c.originalFields:c.originalMoreFields,i=[];return r.forEach(function(e){var t=e.match(/\{(.*)\}/);null!==t?i=i.concat(o(t[1],n)):s[e]?i.push(s[e]):console.log('Cannot resolve "'+e+'" found in '+c.id+"."+n)}),i.length||(t=(e=c.id.lastIndexOf("/"))&&c.id.substring(0,e))&&(i=o(t,n)),utilArrayUniq(i);function o(e,t){var n=l[e];return n?"fields"===t?n.fields().filter(a):"moreFields"===t?n.moreFields():[]:[]}function a(e){return!e.key||void 0===c.tags[e.key]||"multiCombo"===e.type||"semiCombo"===e.type||"check"===e.type}}return c.t=function(e,t){var n="presets.presets."+r+"."+e;return a[n]?a[n]:a[n]=_t(n,t)},c.name=function(){if(c.suggestion){var e=r.split("/");return e.pop(),c.originalName+" – "+_t("presets.presets."+e.join("/")+".name")}return c.t("name",{default:c.originalName})},c.terms=function(){return c.t("terms",{default:c.originalTerms}).toLowerCase().trim().split(/\s*,+\s*/)},c.isFallback=function(){var e=Object.keys(c.tags).length;return 0===e||1===e&&c.tags.hasOwnProperty("area")},c.addable=function(e){return arguments.length?(o=e,c):o},c.reference=function(e){var t=c.tags.wikidata||c.tags["brand:wikidata"]||c.tags["operator:wikidata"];if(t)return{qid:t};var n=c.originalReference.key||Object.keys(utilObjectOmit(c.tags,"name"))[0],r=c.originalReference.value||c.tags[n];if("relation"===e&&"type"===n){if(!(r in c.tags))return{rtype:r};n=r,r=c.tags[n]}return"*"===r?{key:n}:{key:n,value:r}},c.unsetTags=function(t,n,e){return t=utilObjectOmit(t,Object.keys(c.removeTags)),n&&!e&&c.fields().forEach(function(e){e.matchGeometry(n)&&e.key&&e.default===t[e.key]&&delete t[e.key]}),delete t.area,t},c.setTags=function(t,n,e){var r=c.addTags;for(var i in t=Object.assign({},t),r)"*"===r[i]?t[i]="yes":t[i]=r[i];if(!r.hasOwnProperty("area")&&(delete t.area,"area"===n)){var o=!0;if(-1===c.geometry.indexOf("line"))for(var a in r)if(a in osmAreaKeys){o=!1;break}o&&(t.area="yes")}return n&&!e&&c.fields().forEach(function(e){e.matchGeometry(n)&&e.key&&!t[e.key]&&e.default&&(t[e.key]=e.default)}),t},c}var _mainPresetIndex=presetIndex(),transformProperty,_deprecatedTagValuesByKey;function presetIndex(){var n,r,e,i=dispatch("favoritePreset","recentsChange"),t=presetPreset("point",{name:"Point",tags:{},geometry:["point","vertex"],matchScore:.1}),o=presetPreset("line",{name:"Line",tags:{},geometry:["line"],matchScore:.1}),a=presetPreset("area",{name:"Area",tags:{area:"yes"},geometry:["area"],matchScore:.1}),s=presetPreset("relation",{name:"Relation",tags:{},geometry:["relation"],matchScore:.1}),u=presetCollection([t,o,a,s]),l={point:t,line:o,area:a,relation:s},c={point:presetCollection([t]),vertex:presetCollection([t]),line:presetCollection([o]),area:presetCollection([a]),relation:presetCollection([s])},p={},d={},f=[],h=null,g={point:{},vertex:{},line:{},area:{},relation:{}};function m(e,t){var n={};return n.preset=e,n.source=t,n.isFavorite=function(){return"favorite"===n.source},n.isRecent=function(){return"recent"===n.source},n.matches=function(e){return n.preset.id===e.id},n.minified=function(){return{pID:n.preset.id}},n}function y(e,t){if(e&&e.pID){var n=u.item(e.pID);return n?m(n,t):null}return null}function v(e){var t=(n=e).map(function(e){return e.minified()});corePreferences("preset_recents",JSON.stringify(t)),i.call("recentsChange")}function _(e){var t=(r=e).map(function(e){return e.minified()});corePreferences("preset_favorites",JSON.stringify(t)),i.call("favoritePreset")}return u.ensureLoaded=function(){return e||(e=Promise.all([_mainFileFetcher.get("preset_categories"),_mainFileFetcher.get("preset_defaults"),_mainFileFetcher.get("preset_presets"),_mainFileFetcher.get("preset_fields")]).then(function(e){u.merge({categories:e[0],defaults:e[1],presets:e[2],fields:e[3]}),osmSetAreaKeys(u.areaKeys()),osmSetPointTags(u.pointTags()),osmSetVertexTags(u.vertexTags())}))},u.merge=function(i){return i.fields&&Object.keys(i.fields).forEach(function(e){var t=i.fields[e];t?p[e]=presetField(e,t):delete p[e]}),i.presets&&Object.keys(i.presets).forEach(function(e){var t,n,r=i.presets[e];r?(t=!h||h.has(e),l[e]=presetPreset(e,r,t,p,l)):(n=l[e])&&!n.isFallback()&&delete l[e]}),u.collection=Object.values(l).concat(Object.values(d)),i.categories&&Object.keys(i.categories).forEach(function(e){var t=i.categories[e];t?d[e]=presetCategory(e,t,u):delete d[e]}),u.collection=Object.values(l).concat(Object.values(d)),i.defaults&&Object.keys(i.defaults).forEach(function(e){var t=i.defaults[e];Array.isArray(t)?c[e]=presetCollection(t.map(function(e){return l[e]||d[e]}).filter(Boolean)):delete c[e]}),f=Object.values(p).filter(function(e){return e.universal}),Object.values(l).forEach(function(e){return e.resetFields()}),g={point:{},vertex:{},line:{},area:{},relation:{}},u.collection.forEach(function(r){(r.geometry||[]).forEach(function(e){var t=g[e];for(var n in r.tags)(t[n]=t[n]||[]).push(r)})}),u},u.match=function(t,n){return n.transient(t,"presetMatch",function(){var e=t.geometry(n);return"vertex"===e&&t.isOnAddressLine(n)&&(e="point"),u.matchTags(t.tags,e)})},u.matchTags=function(e,t){var n,r,i=g[t],o=-1;for(var a in e){/^addr:/.test(a)&&i["addr:*"]&&(n=i["addr:*"][0]);var s=i[a];if(s)for(var l=0;l<s.length;l++){var c=s[l].matchScore(e);o<c&&(o=c,r=s[l])}}return!n||r&&!r.isFallback()||(r=n),r||u.fallback(t)},u.allowsVertex=function(t,n){return"node"===t.type&&(0===Object.keys(t.tags).length||n.transient(t,"vertexMatch",function(){if(t.isOnAddressLine(n))return!0;var e=osmNodeGeometriesForTags(t.tags);return!!e.vertex||!e.point}))},u.areaKeys=function(){var n=["barrier","highway","footway","railway","junction","type"],r={},e=u.collection.filter(function(e){return!e.suggestion&&!e.replacement});return e.forEach(function(e){var t;for(t in e.tags)break;t&&-1===n.indexOf(t)&&-1!==e.geometry.indexOf("area")&&(r[t]=r[t]||{})}),e.forEach(function(e){var t;for(t in e.addTags){var n=e.addTags[t];t in r&&-1!==e.geometry.indexOf("line")&&"*"!==n&&(r[t][n]=!0)}}),r},u.pointTags=function(){return u.collection.reduce(function(e,t){if(t.suggestion||t.replacement||!1===t.searchable)return e;var n;for(n in t.tags)break;return n&&-1!==t.geometry.indexOf("point")&&(e[n]=e[n]||{},e[n][t.tags[n]]=!0),e},{})},u.vertexTags=function(){return u.collection.reduce(function(e,t){if(t.suggestion||t.replacement||!1===t.searchable)return e;var n;for(n in t.tags)break;return n&&-1!==t.geometry.indexOf("vertex")&&(e[n]=e[n]||{},e[n][t.tags[n]]=!0),e},{})},u.field=function(e){return p[e]},u.universal=function(){return f},u.defaults=function(n,e,t){var r,i=[];return t&&(i=u.recent().matchGeometry(n).collection.slice(0,4)),r=h?Array.from(h).map(function(e){var t=u.item(e);return t&&t.matchGeometry(n)?t:null}).filter(Boolean):c[n].collection.concat(u.fallback(n)),presetCollection(utilArrayUniq(i.concat(r)).slice(0,e-1))},u.addablePresetIDs=function(e){return arguments.length?(Array.isArray(e)&&(e=new Set(e)),(h=e)?u.collection.forEach(function(e){e.addable&&e.addable(h.has(e.id))}):u.collection.forEach(function(e){e.addable&&e.addable(!0)}),u):h},u.recent=function(){return presetCollection(utilArrayUniq(u.getRecents().map(function(e){return e.preset})))},u.getGenericRibbonItems=function(){return["point","line","area"].map(function(e){return m(u.item(e),"generic")})},u.getAddable=function(){return h?h.map(function(e){var t=u.item(e);if(t)return m(t,"addable")}).filter(Boolean):[]},u.getRecents=function(){return n=n||(JSON.parse(corePreferences("preset_recents"))||[]).reduce(function(e,t){var n=y(t,"recent");return n&&n.preset.addable()&&e.push(n),e},[])},u.addRecent=function(e,t,n){var r=u.getRecents(),i=u.recentMatching(t),o=r.indexOf(i);n&&(o+=1);var a=m(e,"recent");r.splice(o,0,a),v(r)},u.removeRecent=function(e){var t,n=u.recentMatching(e);n&&((t=u.getRecents()).splice(t.indexOf(n),1),v(t))},u.recentMatching=function(e){var t=u.getRecents();for(var n in t)if(t[n].matches(e))return t[n];return null},u.moveItem=function(e,t,n){return t===n||t<0||n<0||t>=e.length||n>=e.length?null:(e.splice(n,0,e.splice(t,1)[0]),e)},u.moveRecent=function(e,t){var n=u.getRecents(),r=n.indexOf(e),i=n.indexOf(t),o=u.moveItem(n,r,i);o&&v(o)},u.setMostRecent=function(e){if(!1!==e.searchable){var t=u.getRecents(),n=u.recentMatching(e);for(n?t.splice(t.indexOf(n),1):n=m(e,"recent");30<=t.length;)t.pop();t.unshift(n),v(t)}},u.addFavorite=function(e,t,n){var r=u.getFavorites(),i=u.favoriteMatching(t),o=r.indexOf(i);n&&(o+=1);var a=m(e,"favorite");r.splice(o,0,a),_(r)},u.toggleFavorite=function(e){var t=u.getFavorites(),n=u.favoriteMatching(e);n?t.splice(t.indexOf(n),1):(10===t.length&&t.pop(),t.push(m(e,"favorite"))),_(t)},u.removeFavorite=function(e){var t,n=u.favoriteMatching(e);n&&((t=u.getFavorites()).splice(t.indexOf(n),1),_(t))},u.getFavorites=function(){var e;return r||((e=JSON.parse(corePreferences("preset_favorites")))||(e=[],corePreferences("preset_favorites",JSON.stringify(e))),r=e.reduce(function(e,t){var n=y(t,"favorite");return n&&n.preset.addable()&&e.push(n),e},[])),r},u.favoriteMatching=function(e){var t=u.getFavorites();for(var n in t)if(t[n].matches(e))return t[n];return null},utilRebind(u,i,"on")}function utilTagText(e){var t=e&&e.tags||{};return Object.keys(t).map(function(e){return e+"="+t[e]}).join(", ")}function utilTotalExtent(e,t){for(var n,r,i=geoExtent(),o=0;o<e.length;o++)(r="string"==typeof(n=e[o])?t.hasEntity(n):n)&&i._extend(r.extent(t));return i}function utilTagDiff(r,i){var o=[];return utilArrayUnion(Object.keys(r),Object.keys(i)).sort().forEach(function(e){var t=r[e],n=i[e];!t&&""!==t||void 0!==n&&n===t||o.push({type:"-",key:e,oldVal:t,newVal:n,display:"- "+e+"="+t}),!n&&""!==n||void 0!==t&&n===t||o.push({type:"+",key:e,oldVal:t,newVal:n,display:"+ "+e+"="+n})}),o}function utilEntitySelector(e){return e.length?"."+e.join(",."):"nothing"}function utilEntityOrMemberSelector(e,n){var r=new Set(e);return e.forEach(function(e){var t=n.hasEntity(e);if(!t||"relation"!==t.type)return;t.members.map(function(e){return e.id}).forEach(function(e){r.add(e)})}),utilEntitySelector(Array.from(r))}function utilEntityOrDeepMemberSelector(e,t){return utilEntitySelector(utilEntityAndDeepMemberIDs(e,t))}function utilEntityAndDeepMemberIDs(e,r){var i=new Set;return e.forEach(function e(t){if(i.has(t))return;i.add(t);var n=r.hasEntity(t);if(!n||"relation"!==n.type)return;n.members.map(function(e){return e.id}).forEach(e)}),Array.from(i)}function utilDeepMemberSelector(e,r,i){var o=new Set(e),a=new Set,s=new Set;return e.forEach(function e(t){if(a.has(t))return;a.add(t);o.has(t)||s.add(t);var n=r.hasEntity(t);if(!n||"relation"!==n.type)return;if(i&&n.isMultipolygon())return;n.members.map(function(e){return e.id}).forEach(e)}),utilEntitySelector(Array.from(s))}function utilHighlightEntities(e,t,n){n.surface().selectAll(utilEntityOrDeepMemberSelector(e,n.graph())).classed("highlighted",t)}function utilGetAllNodes(e,r){var i=new Set,o=new Set;return e.forEach(function e(t){if(i.has(t))return;i.add(t);var n=r.hasEntity(t);if(!n)return;"node"===n.type?o.add(n):"way"===n.type?n.nodes.forEach(e):n.members.map(function(e){return e.id}).forEach(e)}),Array.from(o)}function utilDisplayName(e){var t="name:"+_mainLocalizer.languageCode().toLowerCase(),n=e.tags[t]||e.tags.name||"",r=e.tags.cycle_network||e.tags.network;return!n&&e.tags.ref&&(n=e.tags.ref,r&&(n=r+" "+n)),n}function utilDisplayNameForPath(e){var t=utilDisplayName(e);return!(-1<utilDetect().browser.toLowerCase().indexOf("firefox"))&&t&&rtlRegex.test(t)&&(t=fixRTLTextForSvg(t)),t}function utilDisplayType(e){return{n:_t("inspector.node"),w:_t("inspector.way"),r:_t("inspector.relation")}[e.charAt(0)]}function utilDisplayLabel(e,t){var n=utilDisplayName(e);if(n)return n;var r=_mainPresetIndex.match(e,t);return r&&r.name()?r.name():utilDisplayType(e.id)}function utilEntityRoot(e){return{node:"n",way:"w",relation:"r"}[e]}function utilCombinedTags(e,t){var i={},o={},n=new Set,r=e.map(function(e){return t.hasEntity(e)}).filter(Boolean);for(var a in r.forEach(function(e){Object.keys(e.tags).filter(Boolean).forEach(function(e){n.add(e)})}),r.forEach(function(r){n.forEach(function(e){var t=r.tags[e];i.hasOwnProperty(e)?Array.isArray(i[e])?-1===i[e].indexOf(t)&&i[e].push(t):i[e]!==t&&(i[e]=[i[e],t]):i[e]=t;var n=e+"="+t;o[n]||(o[n]=0),o[n]+=1})}),i)Array.isArray(i[a])&&(i[a]=i[a].sort(function(e,t){var n=o[void 0+"="+t],r=o[void 0+"="+e];return n!==r?n-r:t&&e?e.localeCompare(t):e?1:-1}));return i}function utilStringQs(e){for(var t=0;t<e.length&&("?"===e[t]||"#"===e[t]);)t++;return(e=e.slice(t)).split("&").reduce(function(e,t){var n=t.split("=");return 2===n.length&&(e[n[0]]=null===n[1]?"":decodeURIComponent(n[1])),e},{})}function utilQsString(n,r){return Object.keys(n).sort().map(function(e){return encodeURIComponent(e)+"="+(r?(t=n[e],encodeURIComponent(t).replace(/(%2F|%3A|%2C|%7B|%7D)/g,decodeURIComponent)):encodeURIComponent(n[e]));var t}).join("&")}function utilPrefixDOMProperty(e){var t=["webkit","ms","moz","o"],n=-1,r=t.length,i=document.body;if(e in i)return e;for(e=e.substr(0,1).toUpperCase()+e.substr(1);++n<r;)if(t[n]+e in i)return t[n]+e;return!1}function utilPrefixCSSProperty(e){var t=["webkit","ms","Moz","O"],n=-1,r=t.length,i=document.body.style;if(e.toLowerCase()in i)return e.toLowerCase();for(;++n<r;)if(t[n]+e in i)return"-"+t[n].toLowerCase()+e.replace(/([A-Z])/g,"-$1").toLowerCase();return!1}function utilSetTransform(e,t,n,r){var i=transformProperty=transformProperty||utilPrefixCSSProperty("Transform"),o=utilDetect().opera?"translate("+t+"px,"+n+"px)":"translate3d("+t+"px,"+n+"px,0)";return e.style(i,o+(r?" scale("+r+")":""))}function utilEditDistance(e,t){if(e=remove$1(e.toLowerCase()),t=remove$1(t.toLowerCase()),0===e.length)return t.length;if(0===t.length)return e.length;for(var n=[],r=0;r<=t.length;r++)n[r]=[r];for(var i=0;i<=e.length;i++)n[0][i]=i;for(r=1;r<=t.length;r++)for(i=1;i<=e.length;i++)t.charAt(r-1)===e.charAt(i-1)?n[r][i]=n[r-1][i-1]:n[r][i]=Math.min(n[r-1][i-1]+1,Math.min(n[r][i-1]+1,n[r-1][i]+1));return n[t.length][e.length]}function utilFastMouse(e){var t=e.getBoundingClientRect(),n=t.left,r=t.top,i=+e.clientLeft,o=+e.clientTop;return function(e){return[e.clientX-n-i,e.clientY-r-o]}}function utilAsyncMap(e,t,r){var i=e.length,o=[],a=[];e.forEach(function(e,n){t(e,function(e,t){a[n]=e,o[n]=t,--i||r(a,o)})})}function utilWrap(e,t){return e<0&&(e+=Math.ceil(-e/t)*t),e%t}function utilFunctor(e){return"function"==typeof e?e:function(){return e}}function utilNoAuto(e){var t=e.size()&&"textarea"===e.node().tagName.toLowerCase();return e.attr("autocomplete","new-password").attr("autocorrect","off").attr("autocapitalize","off").attr("spellcheck",t?"true":"false")}function utilHashcode(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n);t&=t}return t}function utilSafeClassName(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"_")}function utilUniqueDomId(e){return"ideditor-"+utilSafeClassName(e.toString())+"-"+(new Date).getTime().toString()}function utilUnicodeCharsCount(e){return Array.from(e).length}function utilUnicodeCharsTruncated(e,t){return Array.from(e).slice(0,t).join("")}function osmEntity(e){if(!(this instanceof osmEntity))return e&&e.type?osmEntity[e.type].apply(this,arguments):e&&e.id?osmEntity[osmEntity.id.type(e.id)].apply(this,arguments):(new osmEntity).initialize(arguments)}function osmLanes(e){if("way"!==e.type)return null;if(!e.tags.highway)return null;var t=e.tags,n=e.isOneWay(),r=getLaneCount(t,n),i=parseMaxspeed(t),o=parseLaneDirections(t,n,r),a=o.forward,s=o.backward,l=o.bothways,c={};c.unspecified=parseTurnLanes(t["turn:lanes"]),c.forward=parseTurnLanes(t["turn:lanes:forward"]),c.backward=parseTurnLanes(t["turn:lanes:backward"]);var u={};u.unspecified=parseMaxspeedLanes(t["maxspeed:lanes"],i),u.forward=parseMaxspeedLanes(t["maxspeed:lanes:forward"],i),u.backward=parseMaxspeedLanes(t["maxspeed:lanes:backward"],i);var p={};p.unspecified=parseMiscLanes(t["psv:lanes"]),p.forward=parseMiscLanes(t["psv:lanes:forward"]),p.backward=parseMiscLanes(t["psv:lanes:backward"]);var d={};d.unspecified=parseMiscLanes(t["bus:lanes"]),d.forward=parseMiscLanes(t["bus:lanes:forward"]),d.backward=parseMiscLanes(t["bus:lanes:backward"]);var f={};f.unspecified=parseMiscLanes(t["taxi:lanes"]),f.forward=parseMiscLanes(t["taxi:lanes:forward"]),f.backward=parseMiscLanes(t["taxi:lanes:backward"]);var h={};h.unspecified=parseMiscLanes(t["hov:lanes"]),h.forward=parseMiscLanes(t["hov:lanes:forward"]),h.backward=parseMiscLanes(t["hov:lanes:backward"]);var g={};g.unspecified=parseMiscLanes(t["hgv:lanes"]),g.forward=parseMiscLanes(t["hgv:lanes:forward"]),g.backward=parseMiscLanes(t["hgv:lanes:backward"]);var m={};m.unspecified=parseBicycleWay(t["bicycleway:lanes"]),m.forward=parseBicycleWay(t["bicycleway:lanes:forward"]),m.backward=parseBicycleWay(t["bicycleway:lanes:backward"]);var y={forward:[],backward:[],unspecified:[]};return mapToLanesObj(y,c,"turnLane"),mapToLanesObj(y,u,"maxspeed"),mapToLanesObj(y,p,"psv"),mapToLanesObj(y,d,"bus"),mapToLanesObj(y,f,"taxi"),mapToLanesObj(y,h,"hov"),mapToLanesObj(y,g,"hgv"),mapToLanesObj(y,m,"bicycleway"),{metadata:{count:r,oneway:n,forward:a,backward:s,bothways:l,turnLanes:c,maxspeed:i,maxspeedLanes:u,psvLanes:p,busLanes:d,taxiLanes:f,hovLanes:h,hgvLanes:g,bicyclewayLanes:m},lanes:y}}function getLaneCount(e,t){var n;if(e.lanes&&0<(n=parseInt(e.lanes,10)))return n;switch(e.highway){case"trunk":case"motorway":n=t?2:4;break;default:n=t?1:2}return n}function parseMaxspeed(e){var t=e.maxspeed;if(t){if(/^([0-9][\.0-9]+?)(?:[ ]?(?:km\/h|kmh|kph|mph|knots))?$/.test(t))return parseInt(t,10)}}function parseLaneDirections(e,t,n){var r=parseInt(e["lanes:forward"],10),i=parseInt(e["lanes:backward"],10),o=0<parseInt(e["lanes:both_ways"],10)?1:0;return-1===parseInt(e.oneway,10)?(o=r=0,i=n):t?(r=n,i=o=0):isNaN(r)&&isNaN(i)?r=n-o-(i=Math.floor((n-o)/2)):isNaN(r)?(n-o<i&&(i=n-o),r=n-o-i):isNaN(i)&&(n-o<r&&(r=n-o),i=n-o-r),{forward:r,backward:i,bothways:o}}function parseTurnLanes(e){if(e){var t=["left","slight_left","sharp_left","through","right","slight_right","sharp_right","reverse","merge_to_left","merge_to_right","none"];return e.split("|").map(function(e){return""===e&&(e="none"),e.split(";").map(function(e){return-1===t.indexOf(e)?"unknown":e})})}}function parseMaxspeedLanes(e,n){if(e)return e.split("|").map(function(e){if("none"===e)return e;var t=parseInt(e,10);return""===e||t===n?null:isNaN(t)?"unknown":t})}function parseMiscLanes(e){if(e){var t=["yes","no","designated"];return e.split("|").map(function(e){return""===e&&(e="no"),-1===t.indexOf(e)?"unknown":e})}}function parseBicycleWay(e){if(e){var t=["yes","no","designated","lane"];return e.split("|").map(function(e){return""===e&&(e="no"),-1===t.indexOf(e)?"unknown":e})}}function mapToLanesObj(n,e,r){e.forward&&e.forward.forEach(function(e,t){n.forward[t]||(n.forward[t]={}),n.forward[t][r]=e}),e.backward&&e.backward.forEach(function(e,t){n.backward[t]||(n.backward[t]={}),n.backward[t][r]=e}),e.unspecified&&e.unspecified.forEach(function(e,t){n.unspecified[t]||(n.unspecified[t]={}),n.unspecified[t][r]=e})}function osmWay(){if(!(this instanceof osmWay))return(new osmWay).initialize(arguments);arguments.length&&this.initialize(arguments)}function noRepeatNodes(e,t,n){return 0===t||e!==n[t-1]}function osmOldMultipolygonOuterMemberOfRelation(e,t){if("relation"!==e.type||!e.isMultipolygon()||1<Object.keys(e.tags).filter(osmIsInterestingTag).length)return!1;var n;for(var r in e.members){var i=e.members[r];if(!i.role||"outer"===i.role){if(n)return!1;if("way"!==i.type)return!1;if(!t.hasEntity(i.id))return!1;if(n=t.entity(i.id),0===Object.keys(n.tags).filter(osmIsInterestingTag).length)return!1}}return n}function osmIsOldMultipolygonOuterMember(e,t){if("way"!==e.type||0===Object.keys(e.tags).filter(osmIsInterestingTag).length)return!1;var n=t.parentRelations(e);if(1!==n.length)return!1;var r=n[0];if(!r.isMultipolygon()||1<Object.keys(r.tags).filter(osmIsInterestingTag).length)return!1;for(var i,o=r.members,a=0;a<o.length;a++){if((i=o[a]).id===e.id&&i.role&&"outer"!==i.role)return!1;if(i.id!==e.id&&(!i.role||"outer"===i.role))return!1}return r}function osmOldMultipolygonOuterMember(e,t){if("way"!==e.type)return!1;var n=t.parentRelations(e);if(1!==n.length)return!1;var r=n[0];if(!r.isMultipolygon()||1<Object.keys(r.tags).filter(osmIsInterestingTag).length)return!1;for(var i,o,a=r.members,s=0;s<a.length;s++)if(!(i=a[s]).role||"outer"===i.role){if(o)return!1;o=i}if(!o)return!1;var l=t.hasEntity(o.id);return!(!l||!Object.keys(l.tags).filter(osmIsInterestingTag).length)&&l}function osmJoinWays(e,n){function t(e){return n.childNodes(n.entity(e.id))}function r(e){var t=actionReverse(e.id,{reverseOneway:!0});return o.actions.push(t),e instanceof osmWay?t(n).entity(e.id):e}e=e.filter(function(e){return"way"===e.type&&n.hasEntity(e.id)});var i=!0;for(h=0;h<e.length;h++)if(e[h]instanceof osmWay){i=!1;break}var o=[];for(o.actions=[];e.length;){for(var a=e.shift(),s=[a],l=t(a).slice(),c=!1;e.length&&!c;){for(var u=l[0],p=l[l.length-1],d=null,f=null,h=0;h<e.length;h++){if(f=t(a=e[h]),!i||1!==s.length||f[0]===p||f[f.length-1]===p||f[f.length-1]!==u&&f[0]!==u||(s[0]=r(s[0]),l.reverse(),u=l[0],p=l[l.length-1]),f[0]===p){d=l.push,f=f.slice(1);break}if(f[f.length-1]===p){d=l.push,f=f.slice(0,-1).reverse(),a=r(a);break}if(f[f.length-1]===u){d=l.unshift,f=f.slice(0,-1);break}if(f[0]===u){d=l.unshift,f=f.slice(1).reverse(),a=r(a);break}d=f=null}if(!f){c=!0;break}d.apply(s,[a]),d.apply(l,f),e.splice(h,1)}s.nodes=l,o.push(s)}return o}function actionAddMember(r,b,i,w){return function(e){var t=e.entity(r),n=/stop|platform/.test(b.role);return e=!isNaN(i)&&!w||"way"!==b.type||n?(n&&isNaN(i)&&(i=0),e.replace(t.addMember(b,i))):function(e,t){var n,r,i,o,a,s,l=[],c=[];for(o=0;o<e.members.length;o++){var u=e.members[o];/stop|platform/.test(u.role)?l.push(u):c.push(u)}{var p,d;e=e.update({members:c}),w?(r=osmWay({id:"wTemp",nodes:w.nodes}),t=t.replace(r),p={id:r.id,type:"way",role:b.role},d=e.replaceMember({id:w.originalID},p,!0),(n=utilArrayGroupBy(d.members,"type")).way=n.way||[]):((n=utilArrayGroupBy(e.members,"type")).way=n.way||[],n.way.push(b))}var f=osmJoinWays(c=function(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=Object.assign({},e[n]),t[n].index=n;return t}(n.way),t);for(o=0;o<f.length;o++){var h=f[o],g=h.nodes.slice(),m=h[0].index;for(a=0;a<c.length&&c[a].index!==m;a++);for(s=0;s<h.length;s++){i=h[s];var y=t.entity(i.id);r&&i.id===r.id&&(g[0].id===w.nodes[0]?i.pair=[{id:w.originalID,type:"way",role:i.role},{id:w.insertedID,type:"way",role:i.role}]:i.pair=[{id:w.insertedID,type:"way",role:i.role},{id:w.originalID,type:"way",role:i.role}]),0<s&&(a+s>=c.length||i.index!==c[a+s].index)&&function(e,t,n){for(var r=0;r<e.length&&e[r].index!==t;r++);var i=Object.assign({},e[r]);e[r].index=-1,i.index=n,e.splice(n,0,i)}(c,i.index,a+s),g.splice(0,y.nodes.length-1)}}r&&(t=t.remove(r));var v=[];for(o=0;o<c.length;o++)-1!==(i=c[o]).index&&(i.pair?(v.push(i.pair[0]),v.push(i.pair[1])):v.push(utilObjectOmit(i,["index"])));var _=l.concat(n.node||[],v,n.relation||[]);return t.replace(e.update({members:_}))}(t,e)}}function actionAddMidpoint(r,i){return function(n){return utilArrayIntersection((n=n.replace(i.move(r.loc))).parentWays(n.entity(r.edge[0])),n.parentWays(n.entity(r.edge[1]))).forEach(function(e){for(var t=0;t<e.nodes.length-1;t++)if(geoEdgeEqual([e.nodes[t],e.nodes[t+1]],r.edge))return void(n=n.replace(n.entity(e.id).addNode(i.id,t+1)))}),n}}function actionAddVertex(t,n,r){return function(e){return e.replace(e.entity(t).addNode(n,r))}}function actionChangeMember(t,n,r){return function(e){return e.replace(e.entity(t).updateMember(n,r))}}function actionChangePreset(i,o,a,s){return function(e){var t=e.entity(i),n=t.geometry(e),r=t.tags;return o&&(r=o.unsetTags(r,n)),a&&(r=a.setTags(r,n,s)),e.replace(t.update({tags:r}))}}function actionChangeTags(n,r){return function(e){var t=e.entity(n);return e.replace(t.update({tags:r}))}}function osmNode(){if(!(this instanceof osmNode))return(new osmNode).initialize(arguments);arguments.length&&this.initialize(arguments)}function actionCircularize(U,W,H){H=(H||20)*Math.PI/180;var Q=function(t,e){null!==e&&isFinite(e)||(e=1),e=Math.min(Math.max(+e,0),1);var n=t.entity(U),r={};t.childNodes(n).forEach(function(e){r[e.id]||(r[e.id]=e)}),n.isConvex(t)||(t=Q.makeConvex(t));var i,o,a,s,l,c=utilArrayUniq(t.childNodes(n)),u=c.filter(function(e){return 1!==t.parentWays(e).length}),p=c.map(function(e){return W(e.loc)}),d=u.map(function(e){return W(e.loc)}),f=2===p.length?geoVecInterp(p[0],p[1],.5):d3_polygonCentroid(p),h=d3_median(p,function(e){return geoVecLength(f,e)}),g=0<d3_polygonArea(p)?1:-1;for(u.length||(u=[c[0]],d=[p[0]]),1===u.length&&(s=c.indexOf(u[0]),l=Math.floor((s+c.length/2)%c.length),u.push(c[l]),d.push(p[l])),o=0;o<d.length;o++){var m,y,v,_,b,w,x,S=(o+1)%u.length,E=u[o],C=u[S],A=c.indexOf(E),I=c.indexOf(C),k=-1,N=I-A,P={},D=[];N<0&&(N+=c.length);var T=geoVecLength(f,d[o])||1e-4;for(d[o]=[f[0]+(d[o][0]-f[0])/T*h,f[1]+(d[o][1]-f[1])/T*h],b=W.invert(d[o]),w=u[o],x=r[w.id],w=w.move(geoVecInterp(x.loc,b,e)),t=t.replace(w),m=Math.atan2(d[o][1]-f[1],d[o][0]-f[0]),0<(y=Math.atan2(d[S][1]-f[1],d[S][0]-f[0])-m)*g&&(y=-g*(2*Math.PI-Math.abs(y)));v=y/(N+ ++k),Math.abs(v)>H;);for(B=1;B<N;B++)_=m+B*v,b=W.invert([f[0]+Math.cos(_)*h,f[1]+Math.sin(_)*h]),w=c[(B+A)%c.length],x=r[w.id],P[w.id]=_,w=w.move(geoVecInterp(x.loc,b,e)),t=t.replace(w);for(B=0;B<k;B++){_=m+(N+B)*v,b=W.invert([f[0]+Math.cos(_)*h,f[1]+Math.sin(_)*h]);for(var O in P){var M=P[O],L=Math.abs(M-_);L<1/0&&(x=r[O])}w=osmNode({loc:geoVecInterp(x.loc,b,e)}),t=t.replace(w),c.splice(I+B,0,w),D.push(w.id)}if(1===N&&D.length){var R=n.nodes.lastIndexOf(E.id),$=n.nodes.lastIndexOf(C.id)-R;$<-1&&($=1);for(var F=t.parentWays(u[o]),B=0;B<F.length;B++){var j=F[B];if(j!==n&&j.areAdjacent(E.id,C.id)){var G=j.nodes.lastIndexOf(E.id),z=j.nodes.lastIndexOf(C.id),V=z-G,q=z;for(V<-1&&(V=1),$!==V&&(D.reverse(),q=G),a=0;a<D.length;a++)j=j.addNode(D[a],q+a);t=t.replace(j)}}}}return(i=c.map(function(e){return e.id})).push(i[0]),n=n.update({nodes:i}),t=t.replace(n)};return Q.makeConvex=function(e){var t,n,r=e.entity(U),i=utilArrayUniq(e.childNodes(r)),o=i.map(function(e){return W(e.loc)}),a=0<d3_polygonArea(o)?1:-1,s=d3_polygonHull(o);for(-1==a&&(i.reverse(),o.reverse()),t=0;t<s.length-1;t++){var l=o.indexOf(s[t]),c=o.indexOf(s[t+1])-l;for(c<0&&(c+=i.length),n=1;n<c;n++){var u=geoVecInterp(s[t],s[t+1],n/c),p=i[(n+l)%i.length].move(W.invert(u));e=e.replace(p)}}return e},Q.disabled=function(e){if(!e.entity(U).isClosed())return"not_closed";var t=e.entity(U),n=utilArrayUniq(e.childNodes(t)).map(function(e){return W(e.loc)}),r=d3_polygonHull(n),i=Math.PI/180;if(r.length!==n.length||r.length<3)return!1;for(var o=d3_polygonCentroid(n),a=geoVecLengthSquare(o,n[0]),s=0;s<r.length;s++){var l=r[s],c=geoVecLengthSquare(l,o);if(.05*a<Math.abs(c-a))return!1}for(s=0;s<r.length;s++){l=r[s];var u=r[(s+1)%r.length],p=Math.atan2(l[1]-o[1],l[0]-o[0]),d=Math.atan2(u[1]-o[1],u[0]-o[0])-p;if(d<0&&(d=-d),d>Math.PI&&(d=2*Math.PI-d),H+i<d)return!1}return"already_circular"},Q.transitionable=!0,Q}function actionDeleteWay(t){return function(n){var r=n.entity(t);return n.parentRelations(r).forEach(function(e){e=e.removeMembersWithID(t),n=n.replace(e),e.isDegenerate()&&(n=actionDeleteRelation(e.id)(n))}),new Set(r.nodes).forEach(function(e){var t=(n=n.replace(r.removeNode(e))).entity(e);!function(e,t){if(!t.parentWays(e).length&&!t.parentRelations(e).length){var n=osmNodeGeometriesForTags(e.tags);if(!n.point)return n.vertex||!e.hasInterestingTags()}}(t,n)||(n=n.remove(t))}),n.remove(r)}}function actionDeleteMultiple(e){var n={way:actionDeleteWay,node:actionDeleteNode,relation:actionDeleteRelation};return function(t){return e.forEach(function(e){t.hasEntity(e)&&(t=n[t.entity(e).type](e)(t))}),t}}function actionDeleteRelation(t,a){return function(i){var o=i.entity(t);return i.parentRelations(o).forEach(function(e){e=e.removeMembersWithID(t),i=i.replace(e),e.isDegenerate()&&(i=actionDeleteRelation(e.id)(i))}),utilArrayUniq(o.members.map(function(e){return e.id})).forEach(function(e){var t,n,r=(i=i.replace(o.removeMembersWithID(e))).entity(e);t=r,(n=i).parentWays(t).length||n.parentRelations(t).length||t.hasInterestingTags()||a||(i=actionDeleteMultiple([e])(i))}),i.remove(o)}}function actionDeleteNode(n){return function(t){var e=t.entity(n);return t.parentWays(e).forEach(function(e){e=e.removeNode(n),t=t.replace(e),e.isDegenerate()&&(t=actionDeleteWay(e.id)(t))}),t.parentRelations(e).forEach(function(e){e=e.removeMembersWithID(n),t=t.replace(e),e.isDegenerate()&&(t=actionDeleteRelation(e.id)(t))}),t.remove(e)}}function actionConnect(P){function e(e){for(var t,n,r,i,o=0;o<P.length&&!(t=e.entity(P[o])).version;o++);for(o=0;o<P.length;o++)if((n=e.entity(P[o])).id!==t.id){for(r=e.parentWays(n),i=0;i<r.length;i++)e=e.replace(r[i].replaceNode(n.id,t.id));for(r=e.parentRelations(n),i=0;i<r.length;i++)e=e.replace(r[i].replaceMember(n,t));t=t.mergeTags(n.tags),e=actionDeleteNode(n.id)(e)}for(r=(e=e.replace(t)).parentWays(t),o=0;o<r.length;o++)r[o].isDegenerate()&&(e=actionDeleteWay(r[o].id)(e));return e}return e.disabled=function(i){for(var e,t,n,r,o,a={},s=[],l=0;l<P.length&&!(e=i.entity(P[l])).version;l++);for(l=0;l<P.length;l++)for(t=i.entity(P[l]),d=i.parentRelations(t),u=0;u<d.length;u++){if(o=(r=d[u]).memberById(t.id).role||"",r.hasFromViaTo()&&s.push(r.id),void 0!==a[r.id]&&a[r.id]!==o)return"relation";a[r.id]=o}for(l=0;l<P.length;l++){t=i.entity(P[l]);for(var c=i.parentWays(t),u=0;u<c.length;u++)for(var p=c[u],d=i.parentRelations(p),f=0;f<d.length;f++)(r=d[f]).hasFromViaTo()&&s.push(r.id)}for(s=utilArrayUniq(s),l=0;l<s.length;l++)if((r=i.entity(s[l])).isComplete(i)){var h=utilArrayUniq(h=r.members.filter(function(e){return"way"===e.type}).map(function(e){return i.entity(e.id)})),g=r.memberByRole("from"),m=r.memberByRole("to"),y=g.id===m.id,v={from:[],via:[],to:[],keyfrom:[],keyto:[]};for(u=0;u<r.members.length;u++)!function(e,t){var n=i.hasEntity(e.id);if(!n)return;var r=e.role||"";t[r]||(t[r]=[]);"node"===e.type?(t[r].push(e.id),"via"===r&&(t.keyfrom.push(e.id),t.keyto.push(e.id))):"way"===e.type&&(t[r].push.apply(t[r],n.nodes),"from"!==r&&"via"!==r||(t.keyfrom.push(n.first()),t.keyfrom.push(n.last())),"to"!==r&&"via"!==r||(t.keyto.push(n.first()),t.keyto.push(n.last())))}(r.members[u],v);v.keyfrom=utilArrayUniq(v.keyfrom.filter(N)),v.keyto=utilArrayUniq(v.keyto.filter(N));var _=function(t,n){return function(e){return-1===t.indexOf(e)&&-1===n.indexOf(e)}}(v.keyfrom,v.keyto);v.from=v.from.filter(_),v.via=v.via.filter(_),v.to=v.to.filter(_);var b=!1,w=!1,x=!1,S=!1,E=!1;for(u=0;u<P.length;u++){var C=P[u];-1!==v.from.indexOf(C)&&(b=!0),-1!==v.via.indexOf(C)&&(w=!0),-1!==v.to.indexOf(C)&&(x=!0),-1!==v.keyfrom.indexOf(C)&&(S=!0),-1!==v.keyto.indexOf(C)&&(E=!0)}if(b&&x&&!y)return"restriction";if(b&&w)return"restriction";if(x&&w)return"restriction";if(S||E){if(2!==P.length)return"restriction";var A=null,I=null;for(u=0;u<h.length;u++)(n=h[u]).contains(P[0])&&(A=P[0]),n.contains(P[1])&&(I=P[1]);if(A&&I){var k=!1;for(u=0;u<h.length;u++)if((n=h[u]).areAdjacent(A,I)){k=!0;break}if(!k)return"restriction"}}for(u=0;u<h.length;u++){for(n=h[u].update({}),f=0;f<P.length;f++)P[f]!==e.id&&(n=n.areAdjacent(P[f],e.id)?n.removeNode(P[f]):n.replaceNode(P[f],e.id));if(n.isDegenerate())return"restriction"}}return!1;function N(e,t,n){return n.indexOf(e)!==n.lastIndexOf(e)}},e}function actionCopyEntities(n,r){function e(e){for(var t in n.forEach(function(e){r.entity(e).copy(r,i)}),i)e=e.replace(i[t]);return e}var i={};return e.copies=function(){return i},e}function actionDeleteMember(n,r){return function(e){var t=e.entity(n).removeMember(r);return e=e.replace(t),t.isDegenerate()&&(e=actionDeleteRelation(t.id)(e)),e}}function actionDiscardTags(t,s){return s=s||{},function(a){return t.modified().forEach(e),t.created().forEach(e),a;function e(e){for(var t=Object.keys(e.tags),n=!1,r={},i=0;i<t.length;i++){var o=t[i];s[o]||!e.tags[o]?n=!0:r[o]=e.tags[o]}n&&(a=a.replace(e.update({tags:r})))}}}function actionDisconnect(s,o){var l,a=function(r){var i=r.entity(s);return a.connections(r).forEach(function(e){var t=r.entity(e.wayID),n=osmNode({id:o,loc:i.loc,tags:i.tags});r=r.replace(n),r=0===e.index&&t.isArea()?r.replace(t.replaceNode(t.nodes[0],n.id)):t.isClosed()&&e.index===t.nodes.length-1?r.replace(t.unclose().addNode(n.id)):r.replace(t.updateNode(n.id,e.index))}),r};return a.connections=function(e){for(var t,n=[],r=!1,i=e.parentWays(e.entity(s)),o=0;o<i.length;o++)if(t=i[o],l&&-1===l.indexOf(t.id))r=!0;else if(t.isArea()&&t.nodes[0]===s)n.push({wayID:t.id,index:0});else for(var a=0;a<t.nodes.length;a++)if(t.nodes[a]===s){if(t.isClosed()&&1<i.length&&l&&-1!==l.indexOf(t.id)&&a===t.nodes.length-1)continue;n.push({wayID:t.id,index:a})}return r?n:n.slice(1)},a.disabled=function(e){if(0===a.connections(e).length)return"not_connected";var n,t=e.parentWays(e.entity(s)),r={};return t.forEach(function(t){e.parentRelations(t).forEach(function(e){e.id in r?l&&-1===l.indexOf(t.id)&&-1===l.indexOf(r[e.id])||(n=e):r[e.id]=t.id})}),n?"relation":void 0},a.limitWays=function(e){return arguments.length?(l=e,a):l},a}function actionExtract(i){function e(e){var t=e.entity(i);return("node"===t.type?function(n,e){d=n.id;var r=osmNode({loc:n.loc});return(e=(e=e.replace(r)).parentWays(n).reduce(function(e,t){return e.replace(t.replaceNode(i,r.id))},e)).parentRelations(n).reduce(function(e,t){return e.replace(t.replaceMember(n,r))},e)}:function(e,t){var n=e.geometry(t),r=["source","wheelchair"],i=["area"],o=["architect","building","height","layer"],a=d3_geoCentroid(e.asGeoJSON(t));a&&isFinite(a[0])&&isFinite(a[1])||(a=e.extent(t).center());var s=e.tags.building&&"no"!==e.tags.building,l=Object.assign({},e.tags),c={};for(var u in l)"relation"===e.type&&"type"===u||-1===i.indexOf(u)&&(s&&(-1!==o.indexOf(u)||u.match(/^building:.{1,}/)||u.match(/^roof:.{1,}/))||(c[u]=l[u],-1!==r.indexOf(u)||u.match(/^addr:.{1,}/)||delete l[u]));s||"area"!==n||(l.area="yes");var p=osmNode({loc:a,tags:c});return t=t.replace(p),d=p.id,t.replace(e.update({tags:l}))})(t,e)}var d;return e.getExtractedNodeID=function(){return d},e}function actionJoin(d){function e(i){var e=d.map(i.entity,i),n=e[0].id;e.sort(function(e,t){var n=e.isSided(),r=t.isSided();return n&&!r?-1:r&&!n?1:0});for(var t=0;t<e.length;t++)if(!e[t].isNew()){n=e[t].id;break}var r=osmJoinWays(e,i),o=r[0],a=(i=r.actions.reduce(function(e,t){return t(e)},i)).entity(n);return a=a.update({nodes:o.nodes.map(function(e){return e.id})}),i=i.replace(a),o.forEach(function(t){t.id!==n&&(i.parentRelations(t).forEach(function(e){i=i.replace(e.replaceMember(t,a))}),a=a.mergeTags(t.tags),i=i.replace(a),i=actionDeleteWay(t.id)(i))}),function(){if(a.isClosed()){var e=i.parentMultipolygons(a).filter(function(e){return 1===e.members.length});if(1===e.length){var t=e[0];for(var n in a.tags)if(t.tags[n]&&t.tags[n]!==a.tags[n])return;a=a.mergeTags(t.tags),i=i.replace(a),i=actionDeleteRelation(t.id,!0)(i);var r=Object.assign({},a.tags);"area"!==a.geometry(i)&&(r.area="yes"),delete r.type,a=a.update({tags:r}),i=i.replace(a)}}}(),i}return e.resultingWayNodesLength=function(n){return d.reduce(function(e,t){return e+n.entity(t).nodes.length},0)-d.length-1},e.disabled=function(r){var t,e,n=(t=r,e=d.map(function(e){return t.entity(e)}),Object.assign({line:[]},utilArrayGroupBy(e,function(e){return e.geometry(t)})));if(d.length<2||d.length!==n.line.length)return"not_eligible";var i=osmJoinWays(d.map(r.entity,r),r);if(1<i.length)return"not_adjacent";for(var o=0;o<d.length-1;o++)for(var a=o+1;a<d.length;a++){var s=geoPathIntersections(r.childNodes(r.entity(d[o])).map(function(e){return e.loc}),r.childNodes(r.entity(d[a])).map(function(e){return e.loc}));if(utilArrayIntersection(i[0].nodes.map(function(e){return e.loc.toString()}),s.map(function(e){return e.toString()})).length!==s.length)return"paths_intersect"}var l,c=i[0].nodes.map(function(e){return e.id}).slice(1,-1),u={},p=!1;return i[0].forEach(function(e){var t=r.parentRelations(e);for(var n in t.forEach(function(e){e.isRestriction()&&e.members.some(function(e){return 0<=c.indexOf(e.id)})&&(l=e)}),e.tags)n in u?u[n]&&osmIsInterestingTag(n)&&u[n]!==e.tags[n]&&(p=!0):u[n]=e.tags[n]}),l?"restriction":p?"conflicting_tags":void 0},e}function actionMerge(n){function r(t){var e=n.map(function(e){return t.entity(e)});return Object.assign({point:[],area:[],line:[],relation:[]},utilArrayGroupBy(e,function(e){return e.geometry(t)}))}function e(o){var e,t=r(o),a=t.area[0]||t.line[0];return t.point.forEach(function(t){a=a.mergeTags(t.tags),(o=o.replace(a)).parentRelations(t).forEach(function(e){o=o.replace(e.replaceMember(t,a))});for(var e=utilArrayUniq(o.childNodes(a)),n=t,r=0;r<e.length;r++){var i=e[r];if(!(1<o.parentWays(i).length||o.parentRelations(i).length||i.hasInterestingTags())){o=o.replace(t.update({tags:{},loc:i.loc})),a=a.replaceNode(i.id,t.id),o=o.replace(a),n=i;break}}o=o.remove(n)}),"yes"===a.tags.area&&(delete(e=Object.assign({},a.tags)).area,osmTagSuggestingArea(e)&&(a=a.update({tags:e}),o=o.replace(a))),o}return e.disabled=function(e){var t=r(e);if(0===t.point.length||t.area.length+t.line.length!==1||0!==t.relation.length)return"not_eligible"},e}function actionMergeNodes(a,i){function e(e){if(a.length<2)return e;for(var t=(t=i)||function(e){if(!a.length)return null;for(var t,n=[0,0],r=0,i=0;i<a.length;i++){var o=e.entity(a[i]);o.hasInterestingTags()&&(t=1==++r?o.loc:null),n=geoVecAdd(n,o.loc)}return t||geoVecScale(n,1/a.length)}(e),n=0;n<a.length;n++){var r=e.entity(a[n]);r.loc!==t&&(e=e.replace(r.move(t)))}return actionConnect(a)(e)}return e.disabled=function(e){if(a.length<2)return"not_eligible";for(var t=0;t<a.length;t++){if("node"!==e.entity(a[t]).type)return"not_eligible"}return actionConnect(a).disabled(e)},e}function osmChangeset(){if(!(this instanceof osmChangeset))return(new osmChangeset).initialize(arguments);arguments.length&&this.initialize(arguments)}function osmNote(){if(!(this instanceof osmNote))return(new osmNote).initialize(arguments);arguments.length&&this.initialize(arguments)}function osmRelation(){if(!(this instanceof osmRelation))return(new osmRelation).initialize(arguments);arguments.length&&this.initialize(arguments)}osmEntity.id=function(e){return osmEntity.id.fromOSM(e,osmEntity.id.next[e]--)},osmEntity.id.next={changeset:-1,node:-1,way:-1,relation:-1},osmEntity.id.fromOSM=function(e,t){return e[0]+t},osmEntity.id.toOSM=function(e){return e.slice(1)},osmEntity.id.type=function(e){return{c:"changeset",n:"node",w:"way",r:"relation"}[e[0]]},osmEntity.key=function(e){return e.id+"v"+(e.v||0)},osmEntity.deprecatedTagValuesByKey=function(e){return _deprecatedTagValuesByKey||(_deprecatedTagValuesByKey={},e.forEach(function(e){var t,n,r=Object.keys(e.old);1===r.length&&(t=r[0],"*"!==(n=e.old[t])&&(_deprecatedTagValuesByKey[t]?_deprecatedTagValuesByKey[t].push(n):_deprecatedTagValuesByKey[t]=[n]))})),_deprecatedTagValuesByKey},osmEntity.prototype={tags:{},initialize:function(e){for(var t=0;t<e.length;++t){var n=e[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(void 0===n[r]?delete this[r]:this[r]=n[r])}return!this.id&&this.type&&(this.id=osmEntity.id(this.type)),this.hasOwnProperty("visible")||(this.visible=!0),this},copy:function(e,t){if(t[this.id])return t[this.id];var n=osmEntity(this,{id:void 0,user:void 0,version:void 0});return t[this.id]=n},osmId:function(){return osmEntity.id.toOSM(this.id)},isNew:function(){return this.osmId()<0},update:function(e){return osmEntity(this,e,{v:1+(this.v||0)})},mergeTags:function(e){var t=Object.assign({},this.tags),n=!1;for(var r in e){var i=t[r],o=e[r];i?i!==o&&(n=!0,t[r]=utilUnicodeCharsTruncated(utilArrayUnion(i.split(/;\s*/),o.split(/;\s*/)).join(";"),255)):(n=!0,t[r]=o)}return n?this.update({tags:t}):this},intersects:function(e,t){return this.extent(t).intersects(e)},hasNonGeometryTags:function(){return Object.keys(this.tags).some(function(e){return"area"!==e})},hasParentRelations:function(e){return 0<e.parentRelations(this).length},hasInterestingTags:function(){return Object.keys(this.tags).some(osmIsInterestingTag)},hasWikidata:function(){return!!this.tags.wikidata||!!this.tags["brand:wikidata"]},isHighwayIntersection:function(){return!1},isDegenerate:function(){return!0},deprecatedTags:function(e){var r=this.tags;if(0===Object.keys(r).length)return[];var t=[];return e.forEach(function(n){Object.keys(n.old).every(function(e){if(!r[e])return!1;if("*"===n.old[e])return!0;var t=r[e].split(";").filter(Boolean);return 0!==t.length&&(1<t.length?-1!==t.indexOf(n.old[e]):r[e]===n.old[e]&&(!n.replace||n.old[e]!==n.replace[e]||!Object.keys(n.replace).every(function(e){return r[e]===n.replace[e]})))})&&t.push(n)}),t}},osmEntity.way=osmWay,osmWay.prototype=Object.create(osmEntity.prototype),Object.assign(osmWay.prototype,{type:"way",nodes:[],copy:function(t,n){if(n[this.id])return n[this.id];var e=osmEntity.prototype.copy.call(this,t,n),r=this.nodes.map(function(e){return t.entity(e).copy(t,n).id}),e=e.update({nodes:r});return n[this.id]=e},extent:function(r){return r.transient(this,"extent",function(){for(var e=geoExtent(),t=0;t<this.nodes.length;t++){var n=r.hasEntity(this.nodes[t]);n&&e._extend(n.extent())}return e})},first:function(){return this.nodes[0]},last:function(){return this.nodes[this.nodes.length-1]},contains:function(e){return 0<=this.nodes.indexOf(e)},affix:function(e){return this.nodes[0]===e?"prefix":this.nodes[this.nodes.length-1]===e?"suffix":void 0},layer:function(){return isFinite(this.tags.layer)?Math.max(-10,Math.min(+this.tags.layer,10)):"yes"===this.tags.covered?-1:"overground"===this.tags.location?1:"underground"===this.tags.location?-1:"underwater"===this.tags.location?-10:"line"===this.tags.power||"minor_line"===this.tags.power||this.tags.aerialway?10:this.tags.bridge?1:this.tags.cutting||this.tags.tunnel||this.tags.waterway?-1:"pipeline"===this.tags.man_made||this.tags.boundary?-10:0},impliedLineWidthMeters:function(){var e={highway:{motorway:5,motorway_link:5,trunk:4.5,trunk_link:4.5,primary:4,secondary:4,tertiary:4,primary_link:4,secondary_link:4,tertiary_link:4,unclassified:4,road:4,living_street:4,bus_guideway:4,pedestrian:4,residential:3.5,service:3.5,track:3,cycleway:2.5,bridleway:2,corridor:2,steps:2,path:1.5,footway:1.5},railway:{rail:2.5,light_rail:2.5,tram:2.5,subway:2.5,monorail:2.5,funicular:2.5,disused:2.5,preserved:2.5,miniature:1.5,narrow_gauge:1.5},waterway:{river:50,canal:25,stream:5,tidal_channel:5,fish_pass:2.5,drain:2.5,ditch:1.5}};for(var t in e)if(this.tags[t]&&e[t][this.tags[t]]){var n=e[t][this.tags[t]];return"highway"!==t?n:n*(this.tags.lanes&&parseInt(this.tags.lanes,10)||(this.isOneWay()?1:2))}return null},isOneWay:function(){var e={yes:!0,1:!0,"-1":!0,reversible:!0,alternating:!0,no:!1,0:!1};if(void 0!==e[this.tags.oneway])return e[this.tags.oneway];for(var t in this.tags)if(t in osmOneWayTags&&this.tags[t]in osmOneWayTags[t])return!0;return!1},sidednessIdentifier:function(){for(var e in this.tags){var t=this.tags[e];if(e in osmRightSideIsInsideTags&&t in osmRightSideIsInsideTags[e])return!0===osmRightSideIsInsideTags[e][t]?e:osmRightSideIsInsideTags[e][t]}return null},isSided:function(){return"yes"!==this.tags.two_sided&&null!==this.sidednessIdentifier()},lanes:function(){return osmLanes(this)},isClosed:function(){return 1<this.nodes.length&&this.first()===this.last()},isConvex:function(e){if(!this.isClosed()||this.isDegenerate())return null;for(var t=utilArrayUniq(e.childNodes(this)).map(function(e){return e.loc}),n=0,r=0,i=0;i<t.length;i++){var o=t[(i+1)%t.length],a=geoVecCross(t[i],t[(i+2)%t.length],o);if(0!=(n=0<a?1:a<0?-1:0)){if(r&&n!==r)return!1;r=n}}return!0},tagSuggestingArea:function(){return osmTagSuggestingArea(this.tags)},isArea:function(){return"yes"===this.tags.area||!(!this.isClosed()||"no"===this.tags.area)&&null!==this.tagSuggestingArea()},isDegenerate:function(){return new Set(this.nodes).size<(this.isArea()?3:2)},areAdjacent:function(e,t){for(var n=0;n<this.nodes.length;n++)if(this.nodes[n]===e){if(this.nodes[n-1]===t)return!0;if(this.nodes[n+1]===t)return!0}return!1},geometry:function(e){return e.transient(this,"geometry",function(){return this.isArea()?"area":"line"})},segments:function(e){function n(e){var t=e.hasEntity(this.nodes[0]),n=e.hasEntity(this.nodes[1]);return t&&n&&geoExtent([[Math.min(t.loc[0],n.loc[0]),Math.min(t.loc[1],n.loc[1])],[Math.max(t.loc[0],n.loc[0]),Math.max(t.loc[1],n.loc[1])]])}return e.transient(this,"segments",function(){for(var e=[],t=0;t<this.nodes.length-1;t++)e.push({id:this.id+"-"+t,wayId:this.id,index:t,nodes:[this.nodes[t],this.nodes[t+1]],extent:n});return e})},close:function(){if(this.isClosed()||!this.nodes.length)return this;var e=this.nodes.slice();return(e=e.filter(noRepeatNodes)).push(e[0]),this.update({nodes:e})},unclose:function(){if(!this.isClosed())return this;for(var e=this.nodes.slice(),t=this.first(),n=e.length-1;0<n&&1<e.length&&e[n]===t;)e.splice(n,1),n=e.length-1;return e=e.filter(noRepeatNodes),this.update({nodes:e})},addNode:function(e,t){var n=this.nodes.slice(),r=this.isClosed(),i=r?n.length-1:n.length;if(void 0===t&&(t=i),t<0||i<t)throw new RangeError("index "+t+" out of range 0.."+i);if(r){for(var o=this.first(),a=1;a<n.length&&2<n.length&&n[a]===o;)n.splice(a,1),a<t&&t--;for(a=n.length-1;0<a&&1<n.length&&n[a]===o;)n.splice(a,1),a<t&&t--,a=n.length-1}return n.splice(t,0,e),n=n.filter(noRepeatNodes),!r||1!==n.length&&n[0]===n[n.length-1]||n.push(n[0]),this.update({nodes:n})},updateNode:function(e,t){var n=this.nodes.slice(),r=this.isClosed(),i=n.length-1;if(void 0===t||t<0||i<t)throw new RangeError("index "+t+" out of range 0.."+i);if(r){for(var o=this.first(),a=1;a<n.length&&2<n.length&&n[a]===o;)n.splice(a,1),a<t&&t--;for(a=n.length-1;0<a&&1<n.length&&n[a]===o;)n.splice(a,1),t===a&&(t=0),a=n.length-1}return n.splice(t,1,e),n=n.filter(noRepeatNodes),!r||1!==n.length&&n[0]===n[n.length-1]||n.push(n[0]),this.update({nodes:n})},replaceNode:function(e,t){for(var n=this.nodes.slice(),r=this.isClosed(),i=0;i<n.length;i++)n[i]===e&&(n[i]=t);return n=n.filter(noRepeatNodes),!r||1!==n.length&&n[0]===n[n.length-1]||n.push(n[0]),this.update({nodes:n})},removeNode:function(t){var e=this.nodes.slice(),n=this.isClosed(),e=e.filter(function(e){return e!==t}).filter(noRepeatNodes);return!n||1!==e.length&&e[0]===e[e.length-1]||e.push(e[0]),this.update({nodes:e})},asJXON:function(e){var t={way:{"@id":this.osmId(),"@version":this.version||0,nd:this.nodes.map(function(e){return{keyAttributes:{ref:osmEntity.id.toOSM(e)}}},this),tag:Object.keys(this.tags).map(function(e){return{keyAttributes:{k:e,v:this.tags[e]}}},this)}};return e&&(t.way["@changeset"]=e),t},asGeoJSON:function(t){return t.transient(this,"GeoJSON",function(){var e=t.childNodes(this).map(function(e){return e.loc});return this.isArea()&&this.isClosed()?{type:"Polygon",coordinates:[e]}:{type:"LineString",coordinates:e}})},area:function(r){return r.transient(this,"area",function(){var e=r.childNodes(this),t={type:"Polygon",coordinates:[e.map(function(e){return e.loc})]};!this.isClosed()&&e.length&&t.coordinates[0].push(e[0].loc);var n=d3_geoArea(t);return n>2*Math.PI&&(t.coordinates[0]=t.coordinates[0].reverse(),n=d3_geoArea(t)),isNaN(n)?0:n})}}),osmEntity.node=osmNode,osmNode.prototype=Object.create(osmEntity.prototype),Object.assign(osmNode.prototype,{type:"node",loc:[9999,9999],extent:function(){return new geoExtent(this.loc)},geometry:function(e){return e.transient(this,"geometry",function(){return e.isPoi(this)?"point":"vertex"})},move:function(e){return this.update({loc:e})},isDegenerate:function(){return!(Array.isArray(this.loc)&&2===this.loc.length&&-180<=this.loc[0]&&this.loc[0]<=180&&-90<=this.loc[1]&&this.loc[1]<=90)},directions:function(t,o){var e;if(this.isHighwayIntersection(t)&&"all"===(this.tags.stop||"").toLowerCase())e="all";else{e=(this.tags.direction||"").toLowerCase();for(var n=/:direction$/i,r=Object.keys(this.tags),a=0;a<r.length;a++)if(n.test(r[a])){e=this.tags[r[a]].toLowerCase();break}}if(""===e)return[];var s={north:0,n:0,northnortheast:22,nne:22,northeast:45,ne:45,eastnortheast:67,ene:67,east:90,e:90,eastsoutheast:112,ese:112,southeast:135,se:135,southsoutheast:157,sse:157,south:180,s:180,southsouthwest:202,ssw:202,southwest:225,sw:225,westsouthwest:247,wsw:247,west:270,w:270,westnorthwest:292,wnw:292,northwest:315,nw:315,northnorthwest:337,nnw:337},i=e.split(";"),l=[];return i.forEach(function(e){var n,r,i;void 0!==s[e]&&(e=s[e]),""===e||isNaN(+e)?(n=this.tags["traffic_sign:backward"]||"backward"===e||"both"===e||"all"===e,((r=this.tags["traffic_sign:forward"]||"forward"===e||"both"===e||"all"===e)||n)&&(i={},t.parentWays(this).forEach(function(e){var t=e.nodes;for(a=0;a<t.length;a++)t[a]===this.id&&(r&&0<a&&(i[t[a-1]]=!0),n&&a<t.length-1&&(i[t[a+1]]=!0))},this),Object.keys(i).forEach(function(e){l.push(geoAngle(this,t.entity(e),o)*(180/Math.PI)+90)},this))):l.push(+e)},this),utilArrayUniq(l)},isEndpoint:function(e){return e.transient(this,"isEndpoint",function(){var t=this.id;return 0<e.parentWays(this).filter(function(e){return!e.isClosed()&&!!e.affix(t)}).length})},isConnected:function(i){return i.transient(this,"isConnected",function(){var e=i.parentWays(this);if(1<e.length){for(var t in e)if("line"===e[t].geometry(i)&&e[t].hasInterestingTags())return!0}else if(1===e.length){var n=e[0],r=n.nodes.slice();return n.isClosed()&&r.pop(),r.indexOf(this.id)!==r.lastIndexOf(this.id)}return!1})},parentIntersectionWays:function(t){return t.transient(this,"parentIntersectionWays",function(){return t.parentWays(this).filter(function(e){return(e.tags.highway||e.tags.waterway||e.tags.railway||e.tags.aeroway)&&"line"===e.geometry(t)})})},isIntersection:function(e){return 1<this.parentIntersectionWays(e).length},isHighwayIntersection:function(t){return t.transient(this,"isHighwayIntersection",function(){return 1<t.parentWays(this).filter(function(e){return e.tags.highway&&"line"===e.geometry(t)}).length})},isOnAddressLine:function(t){return t.transient(this,"isOnAddressLine",function(){return 0<t.parentWays(this).filter(function(e){return e.tags.hasOwnProperty("addr:interpolation")&&"line"===e.geometry(t)}).length})},asJXON:function(e){var t={node:{"@id":this.osmId(),"@lon":this.loc[0],"@lat":this.loc[1],"@version":this.version||0,tag:Object.keys(this.tags).map(function(e){return{keyAttributes:{k:e,v:this.tags[e]}}},this)}};return e&&(t.node["@changeset"]=e),t},asGeoJSON:function(){return{type:"Point",coordinates:this.loc}}}),osmEntity.changeset=osmChangeset,osmChangeset.prototype=Object.create(osmEntity.prototype),Object.assign(osmChangeset.prototype,{type:"changeset",extent:function(){return new geoExtent},geometry:function(){return"changeset"},asJXON:function(){return{osm:{changeset:{tag:Object.keys(this.tags).map(function(e){return{"@k":e,"@v":this.tags[e]}},this),"@version":.6,"@generator":"iD"}}}},osmChangeJXON:function(e){var t=this.id;function n(e,t){for(var n={},r=0;r<e.length;r++){var i=Object.keys(e[r])[0];n[i]||(n[i]=[]),n[i].push(e[r][i])}var o={};return t.forEach(function(e){n[e]&&(o[e]=n[e])}),o}function r(e){return e.asJXON(t)}return{osmChange:{"@version":.6,"@generator":"iD",create:function(e){function t(t){return o.find(function(e){return"relation"===t.keyAttributes.type&&t.keyAttributes.ref===e["@id"]})}function n(t){return!i[t["@id"]]&&!r.find(function(e){return e["@id"]===t["@id"]})}var r=[],i={},o=e.relation;if(!o)return e;for(var a=0;a<o.length;a++){var s=o[a];for(i[s["@id"]]||r.push(s);0<r.length;){var l=r[0],c=l.member.map(t).filter(Boolean).filter(n);0===c.length?(i[l["@id"]]=l,r.shift()):r=c.concat(r)}}return e.relation=Object.values(i),e}(n(e.created.map(r),["node","way","relation"])),modify:n(e.modified.map(r),["node","way","relation"]),delete:Object.assign(n(e.deleted.map(r),["relation","way","node"]),{"@if-unused":!0})}}},asGeoJSON:function(){return{}}}),osmNote.id=function(){return osmNote.id.next--},osmNote.id.next=-1,Object.assign(osmNote.prototype,{type:"note",initialize:function(e){for(var t=0;t<e.length;++t){var n=e[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(void 0===n[r]?delete this[r]:this[r]=n[r])}return this.id||(this.id=osmNote.id()+""),this},extent:function(){return new geoExtent(this.loc)},update:function(e){return osmNote(this,e)},isNew:function(){return this.id<0},move:function(e){return this.update({loc:e})}}),osmEntity.relation=osmRelation,osmRelation.prototype=Object.create(osmEntity.prototype),osmRelation.creationOrder=function(e,t){var n=parseInt(osmEntity.id.toOSM(e.id),10),r=parseInt(osmEntity.id.toOSM(t.id),10);return n<0||r<0?n-r:r-n},Object.assign(osmRelation.prototype,{type:"relation",members:[],copy:function(t,n){if(n[this.id])return n[this.id];var e=osmEntity.prototype.copy.call(this,t,n),r=this.members.map(function(e){return Object.assign({},e,{id:t.entity(e.id).copy(t,n).id})}),e=e.update({members:r});return n[this.id]=e},extent:function(r,i){return r.transient(this,"extent",function(){if(i&&i[this.id])return geoExtent();(i=i||{})[this.id]=!0;for(var e=geoExtent(),t=0;t<this.members.length;t++){var n=r.hasEntity(this.members[t].id);n&&e._extend(n.extent(r,i))}return e})},geometry:function(e){return e.transient(this,"geometry",function(){return this.isMultipolygon()?"area":"relation"})},isDegenerate:function(){return 0===this.members.length},indexedMembers:function(){for(var e=new Array(this.members.length),t=0;t<this.members.length;t++)e[t]=Object.assign({},this.members[t],{index:t});return e},memberByRole:function(e){for(var t=0;t<this.members.length;t++)if(this.members[t].role===e)return Object.assign({},this.members[t],{index:t})},membersByRole:function(e){for(var t=[],n=0;n<this.members.length;n++)this.members[n].role===e&&t.push(Object.assign({},this.members[n],{index:n}));return t},memberById:function(e){for(var t=0;t<this.members.length;t++)if(this.members[t].id===e)return Object.assign({},this.members[t],{index:t})},memberByIdAndRole:function(e,t){for(var n=0;n<this.members.length;n++)if(this.members[n].id===e&&this.members[n].role===t)return Object.assign({},this.members[n],{index:n})},addMember:function(e,t){var n=this.members.slice();return n.splice(void 0===t?n.length:t,0,e),this.update({members:n})},updateMember:function(e,t){var n=this.members.slice();return n.splice(t,1,Object.assign({},n[t],e)),this.update({members:n})},removeMember:function(e){var t=this.members.slice();return t.splice(e,1),this.update({members:t})},removeMembersWithID:function(t){var e=this.members.filter(function(e){return e.id!==t});return this.update({members:e})},moveMember:function(e,t){var n=this.members.slice();return n.splice(t,0,n.splice(e,1)[0]),this.update({members:n})},replaceMember:function(e,t,n){if(!this.memberById(e.id))return this;for(var r=[],i=0;i<this.members.length;i++){var o=this.members[i];o.id!==e.id?r.push(o):!n&&this.memberByIdAndRole(t.id,o.role)||r.push({id:t.id,type:t.type,role:o.role})}return this.update({members:r})},asJXON:function(e){var t={relation:{"@id":this.osmId(),"@version":this.version||0,member:this.members.map(function(e){return{keyAttributes:{type:e.type,role:e.role,ref:osmEntity.id.toOSM(e.id)}}},this),tag:Object.keys(this.tags).map(function(e){return{keyAttributes:{k:e,v:this.tags[e]}}},this)}};return e&&(t.relation["@changeset"]=e),t},asGeoJSON:function(t){return t.transient(this,"GeoJSON",function(){return this.isMultipolygon()?{type:"MultiPolygon",coordinates:this.multipolygon(t)}:{type:"FeatureCollection",properties:this.tags,features:this.members.map(function(e){return Object.assign({role:e.role},t.entity(e.id).asGeoJSON(t))})}})},area:function(e){return e.transient(this,"area",function(){return d3_geoArea(this.asGeoJSON(e))})},isMultipolygon:function(){return"multipolygon"===this.tags.type},isComplete:function(e){for(var t=0;t<this.members.length;t++)if(!e.hasEntity(this.members[t].id))return!1;return!0},hasFromViaTo:function(){return this.members.some(function(e){return"from"===e.role})&&this.members.some(function(e){return"via"===e.role})&&this.members.some(function(e){return"to"===e.role})},isRestriction:function(){return!(!this.tags.type||!this.tags.type.match(/^restriction:?/))},isValidRestriction:function(){if(!this.isRestriction())return!1;var e=this.members.filter(function(e){return"from"===e.role}),t=this.members.filter(function(e){return"via"===e.role}),n=this.members.filter(function(e){return"to"===e.role});return(1===e.length||"no_entry"===this.tags.restriction)&&(!e.some(function(e){return"way"!==e.type})&&((1===n.length||"no_exit"===this.tags.restriction)&&(!n.some(function(e){return"way"!==e.type})&&(0!==t.length&&!(1<t.length&&t.some(function(e){return"way"!==e.type}))))))},multipolygon:function(e){function t(e){return 2<e.nodes.length&&e.nodes[0]!==e.nodes[e.nodes.length-1]&&e.nodes.push(e.nodes[0]),e.nodes.map(function(e){return e.loc})}var n=this.members.filter(function(e){return"outer"===(e.role||"outer")}),r=this.members.filter(function(e){return"inner"===e.role}),n=osmJoinWays(n,e),r=osmJoinWays(r,e);n=n.map(t),r=r.map(t);var i=n.map(function(e){return[d3_geoArea({type:"Polygon",coordinates:[e]})>2*Math.PI?e.reverse():e]});for(var o=0;o<r.length;o++){var a=r[o];d3_geoArea({type:"Polygon",coordinates:[a]})<2*Math.PI&&(a=a.reverse());var s=function(e){for(var t=0;t<n.length;t++)if(geoPolygonContainsPolygon(n[t],e))return t;for(t=0;t<n.length;t++)if(geoPolygonIntersectsPolygon(n[t],e,!1))return t}(r[o]);void 0!==s?i[s].push(r[o]):i.push([r[o]])}return i}});var QAItem=function e(t,n,r,i,o){return this.loc=t,this.service=n.title,this.itemType=r,this.id=i||""+e.id(),this.update(o),n&&"function"==typeof n.getIcon&&(this.icon=n.getIcon(r)),this};function actionSplit(h,r){var i,g=[];function o(c,u,e){var t,n,r,i,o,a,s,p=osmWay({id:e,tags:u.tags}),d=u.nodes.slice(),l=u.isArea(),f=osmIsOldMultipolygonOuterMember(u,c);return i=u.isClosed()?(n=(t=u.nodes.slice(0,-1)).indexOf(h),(r=function(t,e,i){var n,r,o,a=new Array(t.length),s=0;function l(e){return utilWrap(e,t.length)}function c(e,t){var n=i.entity(e).loc,r=i.entity(t).loc;return n&&r?geoSphericalDistance(n,r):1e-6}for(n=0,r=l(e+1);r!==e;r=l(r+1))n+=c(t[r],t[l(r-1)]),a[r]=n;for(n=0,r=l(e-1);r!==e;r=l(r-1))(n+=c(t[r],t[l(r+1)]))<a[r]&&(a[r]=n);for(r=0;r<t.length;r++){var u=a[r]/c(t[e],t[r]);s<u&&(o=r,s=u)}return o}(t,n,c))<n?(a=t.slice(n).concat(t.slice(0,r+1)),t.slice(r,n+1)):(a=t.slice(n,r+1),t.slice(r).concat(t.slice(0,n+1)))):(o=u.nodes.indexOf(h,1),a=u.nodes.slice(0,o+1),u.nodes.slice(o)),u=u.update({nodes:a}),p=p.update({nodes:i}),(c=(c=c.replace(u)).replace(p)).parentRelations(u).forEach(function(e){var t;if(e.hasFromViaTo()){var n,r=e.memberByRole("from"),i=e.membersByRole("via"),o=e.memberByRole("to");if(r.id===u.id||o.id===u.id){var a=!1;if(1===i.length&&"node"===i[0].type)a=p.contains(i[0].id);else for(n=0;n<i.length;n++)if("way"===i[n].type){var s=c.hasEntity(i[n].id);if(s&&utilArrayIntersection(p.nodes,s.nodes).length){a=!0;break}}a&&(e=e.replaceMember(u,p),c=c.replace(e))}else for(n=0;n<i.length;n++)if("way"===i[n].type&&i[n].id===u.id){t={id:p.id,type:"way",role:"via"},c=actionAddMember(e.id,t,i[n].index+1)(c);break}}else{e===f&&(c=(c=(c=c.replace(e.mergeTags(u.tags))).replace(u.update({tags:{}}))).replace(p.update({tags:{}}))),t={id:p.id,type:"way",role:e.memberById(u.id).role};var l={originalID:u.id,insertedID:p.id,nodes:d};c=actionAddMember(e.id,t,void 0,l)(c)}}),!f&&l&&(s=osmRelation({tags:Object.assign({},u.tags,{type:"multipolygon"}),members:[{id:u.id,role:"outer",type:"way"},{id:p.id,role:"outer",type:"way"}]}),c=(c=(c=c.replace(s)).replace(u.update({tags:{}}))).replace(p.update({tags:{}}))),g.push(p.id),c}var a=function(e){var t=a.ways(e);g=[];for(var n=0;n<t.length;n++)e=o(e,t[n],r&&r[n]);return e};return a.getCreatedWayIDs=function(){return g},a.ways=function(n){var e=n.entity(h),t=n.parentWays(e),r=t.some(function(e){return"line"===e.geometry(n)});return t.filter(function(e){if(i&&-1===i.indexOf(e.id))return!1;if(!i&&r&&"line"!==e.geometry(n))return!1;if(e.isClosed())return!0;for(var t=1;t<e.nodes.length-1;t++)if(e.nodes[t]===h)return!0;return!1})},a.disabled=function(e){var t=a.ways(e);if(0===t.length||i&&i.length!==t.length)return"not_eligible"},a.limitWays=function(e){return arguments.length?(i=e,a):i},a}function coreGraph(e,t){if(!(this instanceof coreGraph))return new coreGraph(e,t);var n;e instanceof coreGraph?(n=e.base(),this.entities=Object.assign(Object.create(n.entities),e.entities),this._parentWays=Object.assign(Object.create(n.parentWays),e._parentWays),this._parentRels=Object.assign(Object.create(n.parentRels),e._parentRels)):(this.entities=Object.create({}),this._parentWays=Object.create({}),this._parentRels=Object.create({}),this.rebase(e||[],[this])),this.transients={},this._childNodes={},this.frozen=!t}function osmTurn(e){if(!(this instanceof osmTurn))return new osmTurn(e);Object.assign(this,e)}function osmIntersection(t,e,M){M=M||30;var n,r=coreGraph();function i(e){if(!e.isArea()&&!e.isDegenerate()){return{motorway:!0,motorway_link:!0,trunk:!0,trunk_link:!0,primary:!0,primary_link:!0,secondary:!0,secondary_link:!0,tertiary:!0,tertiary_link:!0,residential:!0,unclassified:!0,living_street:!0,service:!0,road:!0,track:!0}[e.tags.highway]}}for(var o,a,s,l,c,u,p=t.entity(e),d=[p],f=[],h=[],g=[],m=[],y=[],v=[];d.length;){I=d.pop(),o=t.parentWays(I);for(var _=!1,b=0;b<o.length;b++)if(i(a=o[b])||(u=a,t.parentRelations(u).some(function(e){return e.isRestriction()})))for(g.push(a),_=!0,s=utilArrayUniq(t.childNodes(a)),n=0;n<s.length;n++)if((l=s[n])!==I&&-1===f.indexOf(l)&&!(geoSphericalDistance(l.loc,p.loc)>M)){for(var w=!1,y=t.parentWays(l),L=0;L<y.length;L++)if((c=y[L])!==a&&-1===g.indexOf(c)&&i(c)){w=!0;break}w&&d.push(l)}_&&f.push(I)}f=utilArrayUniq(f),(g=utilArrayUniq(g)).forEach(function(e){t.childNodes(e).forEach(function(e){r=r.replace(e)}),r=r.replace(e),t.parentRelations(e).forEach(function(e){e.isRestriction()&&(e.isValidRestriction(t)?r=r.replace(e):e.isComplete(t)&&v.push(actionDeleteRelation(e.id)))})}),g.forEach(function(e){var t,n=r.entity(e.id);"-1"===n.tags.oneway&&(t=actionReverse(n.id,{reverseOneway:!0}),v.push(t),r=t(r))});var x,S=osmEntity.id.next.way;function E(e,t){var n=e.isOneWay(),r=-1!==t.indexOf(e.first()),i=-1!==t.indexOf(e.last()),o=r&&i,a=r&&!n||i,s=r||i&&!n;return e.update({__first:r,__last:i,__from:a,__via:o,__to:s,__oneWay:n})}f.forEach(function(n){var e=actionSplit(n.id);e.disabled(r)||e.ways(r).forEach(function(e){var t=actionSplit(n.id).limitWays([e.id]);v.push(t),r=t(r)})}),osmEntity.id.next.way=S,h=f.map(function(e){return e.id}),f=[],g=[],h.forEach(function(e){var t=r.entity(e),n=r.parentWays(t);f.push(t),g=g.concat(n)}),f=utilArrayUniq(f),g=utilArrayUniq(g),h=f.map(function(e){return e.id}),m=g.map(function(e){return e.id}),g=[],m.forEach(function(e){var t=E(r.entity(e),h);r=r.replace(t),g.push(t)});var C=[],A=[];do{for(x=!1,d=h.slice(),b=0;b<d.length;b++){var I,k,N,P,D,T,O,R=d[b];(I=r.hasEntity(R))?((y=r.parentWays(I)).length<3&&-1!==h.indexOf(R)&&h.splice(h.indexOf(R),1),2===y.length&&(k=y[0],N=y[1],P=k&&!k.__via,D=N&&!N.__via,P&&!D?(T=k,O=N):!P&&D&&(T=N,O=k),T&&O&&(O=E(O,h),r=r.replace(O).remove(T),C.push(T.id),x=!0)),(y=r.parentWays(I)).length<2&&(-1!==h.indexOf(R)&&h.splice(h.indexOf(R),1),A.push(R),x=!0),y.length<1&&(r=r.remove(I))):(-1!==h.indexOf(R)&&h.splice(h.indexOf(R),1),A.push(R))}}while(x);f=f.filter(function(e){return-1===A.indexOf(e.id)}).map(function(e){return r.entity(e.id)}),g=g.filter(function(e){return-1===C.indexOf(e.id)}).map(function(e){return r.entity(e.id)});var $={graph:r,actions:v,vertices:f,ways:g};return $.turns=function(k,e){if(!k)return[];e=e||0;var N=$.graph,P=$.vertices.map(function(e){return e.id}),t=N.entity(k);if(!t||!t.__from&&!t.__via)return[];var D=2*e+3,T=[];return function t(l,n,r,e){n=(n||[]).slice();if(n.length>=D)return;n.push(l.id);r=(r||[]).slice();var i,o;if("node"===l.type){var a=N.parentWays(l),s=[];for(i=0;i<a.length;i++){var c=a[i];if((!c.__oneWay||c.nodes[0]===l.id)&&!(-1!==n.indexOf(c.id)&&3<=n.length)){var u=void 0;for(o=0;o<r.length;o++){var p=r[o],d=p.memberByRole("from"),f=p.membersByRole("via"),h=p.memberByRole("to"),g=/^only_/.test(p.tags.restriction),m=d.id===k,y=!1,v=!1;if(h.id===c.id)if(1===f.length&&"node"===f[0].type)y=f[0].id===l.id&&(m&&2===n.length||!m&&2<n.length);else{var _=[];for(L=2;L<n.length;L+=2)_.push(n[L]);var b=[];for(L=0;L<f.length;L++)"way"===f[L].type&&b.push(f[L].id);var w=utilArrayDifference(_,b);y=!w.length}else if(g)for(L=0;L<f.length;L++)if("way"===f[L].type&&f[L].id===c.id){v=!0;break}if(y?u=g?{id:p.id,direct:m,from:d.id,only:!0,end:!0}:{id:p.id,direct:m,from:d.id,no:!0,end:!0}:v?u={id:p.id,direct:!1,from:d.id,only:!0,end:!1}:g&&(u={id:p.id,direct:!1,from:d.id,no:!0,end:!0}),u&&u.direct)break}s.push({way:c,restrict:u})}}s.forEach(function(e){t(e.way,n,r,e.restrict)})}else{if(3<=n.length){var x=n.slice();if(e&&!1===e.direct)for(i=0;i<x.length;i++)if(x[i]===e.from){x=x.slice(i);break}var S=O(x);if(S&&(e&&(S.restrictionID=e.id,S.no=e.no,S.only=e.only,S.direct=e.direct),T.push(osmTurn(S))),n[0]===n[2])return}if(e&&e.end)return;var E=N.entity(l.first()),C=N.entity(l.last()),A=geoSphericalDistance(E.loc,C.loc),I=[];if(1<n.length){if(M<A)return;if(!l.__via)return}l.__oneWay||-1===P.indexOf(E.id)||-1!==n.indexOf(E.id)||I.push(E),-1!==P.indexOf(C.id)&&-1===n.indexOf(C.id)&&I.push(C),I.forEach(function(s){var e=N.parentRelations(l).filter(function(e){if(!e.isRestriction())return!1;var t=e.memberByRole("from");if(!t||t.id!==l.id)return!1;var n=/^only_/.test(e.tags.restriction);if(!n)return!0;var r=!1,i=e.membersByRole("via");if(1===i.length&&"node"===i[0].type)r=i[0].id===s.id;else for(var o=0;o<i.length;o++)if("way"===i[o].type){var a=N.entity(i[o].id);if(a.first()===s.id||a.last()===s.id){r=!0;break}}return r});t(s,n,r.concat(e),!1)})}}(t),T;function O(e){if(!(e.length<3)){var t,n,r,i,o,a,s,l=e[0],c=e[e.length-1];if(3===e.length&&l===c){if(N.entity(l).__oneWay)return null;s=!0,t=r=u(l,a=n=i=e[1])}else s=!1,t=u(l,n=e[1]),r=u(c,i=e[e.length-2]),3===e.length?a=e[1]:o=(o=e.filter(function(e){return"w"===e[0]})).slice(1,o.length-1);return{key:e.join("_"),path:e,from:{node:t,way:l,vertex:n},via:{node:a,ways:o},to:{node:r,way:c,vertex:i},u:s}}function u(e,t){var n=N.entity(e).nodes;return t===n[0]?n[1]:n[n.length-2]}}},$}function osmInferRestriction(e,t,n){for(var r=e.entity(t.from.way),i=e.entity(t.from.node),o=e.entity(t.from.vertex),a=e.entity(t.to.way),s=e.entity(t.to.node),l=e.entity(t.to.vertex),c="yes"===r.tags.oneway,u="yes"===a.tags.oneway,p=180*(geoAngle(o,i,n)-geoAngle(l,s,n))/Math.PI;p<0;)p+=360;return i===s||(p<23||336<p)&&c&&u||(p<40||319<p)&&c&&u&&t.from.vertex!==t.to.vertex?"no_u_turn":p<158?"no_right_turn":202<p?"no_left_turn":"no_straight_on"}function actionMergePolygon(n,c){function u(t){var e=utilArrayGroupBy(n.map(function(e){return t.entity(e)}),function(e){return"way"===e.type&&e.isClosed()?"closedWay":"relation"===e.type&&e.isMultipolygon()?"multipolygon":"other"});return Object.assign({closedWay:[],multipolygon:[],other:[]},e)}function e(n){for(var e=u(n),t=e.multipolygon.reduce(function(e,t){return e.concat(osmJoinWays(t.members,n))},[]).concat(e.closedWay.map(function(e){var t=[{id:e.id}];return t.nodes=n.childNodes(e),t})),r=t.map(function(n,r){return t.map(function(e,t){return r===t?null:geoPolygonContainsPolygon(e.nodes.map(function(e){return e.loc}),n.nodes.map(function(e){return e.loc}))})}),i=[],o=!0;t.length;)t.forEach(function(e,t){a(0,t)||e.forEach(function(e){i.push({type:"way",id:e.id,role:o?"outer":"inner"})})}),o=!o,t=t.filter(a),r=r.filter(a).map(s);function a(e,t){return r[t].some(function(e){return e})}function s(e){return e.filter(a)}var l=e.multipolygon[0]||osmRelation({id:c,tags:{type:"multipolygon"}});return e.multipolygon.slice(1).forEach(function(e){l=l.mergeTags(e.tags),n=n.remove(e)}),e.closedWay.forEach(function(t){i.some(function(e){return e.id===t.id&&"inner"!==e.role})&&(l=l.mergeTags(t.tags),n=n.replace(t.update({tags:{}})))}),n.replace(l.update({members:i,tags:utilObjectOmit(l.tags,["area"])}))}return e.disabled=function(n){var t=u(n);if(0<t.other.length||t.closedWay.length+t.multipolygon.length<2)return"not_eligible";if(!t.multipolygon.every(function(e){return e.isComplete(n)}))return"incomplete_relation";if(t.multipolygon.length){if(t.closedWay.some(function(e){return utilArrayIntersection(n.parentMultipolygons(e),t.multipolygon).length}))return"not_eligible"}else{var r=[];if(t.closedWay.forEach(function(e,t){r=0===t?n.parentMultipolygons(e):utilArrayIntersection(r,n.parentMultipolygons(e))}),(r=r.filter(function(e){return e.members.length===t.closedWay.length})).length)return"not_eligible"}},e}QAItem.prototype.update=function(t){var n=this,e=this.loc,r=this.service,i=this.itemType,o=this.id;return Object.keys(t).forEach(function(e){return n[e]=t[e]}),this.loc=e,this.service=r,this.itemType=i,this.id=o,this},QAItem.id=function(){return this.nextId--},QAItem.nextId=-1,coreGraph.prototype={hasEntity:function(e){return this.entities[e]},entity:function(e){var t=this.entities[e];if(!(t=t||this.entities.__proto__[e]))throw new Error("entity "+e+" not found");return t},geometry:function(e){return this.entity(e).geometry(this)},transient:function(e,t,n){var r=e.id,i=this.transients[r]||(this.transients[r]={});return void 0!==i[t]||(i[t]=n.call(e)),i[t]},parentWays:function(e){var t=this._parentWays[e.id],n=[];return t&&t.forEach(function(e){n.push(this.entity(e))},this),n},isPoi:function(e){var t=this._parentWays[e.id];return!t||0===t.size},isShared:function(e){var t=this._parentWays[e.id];return t&&1<t.size},parentRelations:function(e){var t=this._parentRels[e.id],n=[];return t&&t.forEach(function(e){n.push(this.entity(e))},this),n},parentMultipolygons:function(e){return this.parentRelations(e).filter(function(e){return e.isMultipolygon()})},childNodes:function(e){if(this._childNodes[e.id])return this._childNodes[e.id];if(!e.nodes)return[];for(var t=[],n=0;n<e.nodes.length;n++)t[n]=this.entity(e.nodes[n]);return this._childNodes[e.id]=t,this._childNodes[e.id]},base:function(){return{entities:Object.getPrototypeOf(this.entities),parentWays:Object.getPrototypeOf(this._parentWays),parentRels:Object.getPrototypeOf(this._parentRels)}},rebase:function(e,t,n){for(var r,i,o,a=this.base(),s=0;s<e.length;s++){var l=e[s];if(l.visible&&(n||!a.entities[l.id])&&(a.entities[l.id]=l,this._updateCalculated(void 0,l,a.parentWays,a.parentRels),"way"===l.type))for(r=0;r<l.nodes.length;r++)for(o=l.nodes[r],i=1;i<t.length;i++){var c=t[i].entities;c.hasOwnProperty(o)&&void 0===c[o]&&delete c[o]}}for(s=0;s<t.length;s++)t[s]._updateRebased()},_updateRebased:function(){var e=this.base();Object.keys(this._parentWays).forEach(function(t){e.parentWays[t]&&e.parentWays[t].forEach(function(e){this.entities.hasOwnProperty(e)||this._parentWays[t].add(e)},this)},this),Object.keys(this._parentRels).forEach(function(t){e.parentRels[t]&&e.parentRels[t].forEach(function(e){this.entities.hasOwnProperty(e)||this._parentRels[t].add(e)},this)},this),this.transients={}},_updateCalculated:function(e,t,n,r){n=n||this._parentWays,r=r||this._parentRels;var i,o,a,s=t&&t.type||e&&e.type;if("way"===s){for(e&&t?(i=utilArrayDifference(e.nodes,t.nodes),o=utilArrayDifference(t.nodes,e.nodes)):e?(i=e.nodes,o=[]):t&&(i=[],o=t.nodes),a=0;a<i.length;a++)n[i[a]]=new Set(n[i[a]]),n[i[a]].delete(e.id);for(a=0;a<o.length;a++)n[o[a]]=new Set(n[o[a]]),n[o[a]].add(t.id)}else if("relation"===s){var l=e?e.members.map(function(e){return e.id}):[],c=t?t.members.map(function(e){return e.id}):[];for(e&&t?(i=utilArrayDifference(l,c),o=utilArrayDifference(c,l)):e?(i=l,o=[]):t&&(i=[],o=c),a=0;a<i.length;a++)r[i[a]]=new Set(r[i[a]]),r[i[a]].delete(e.id);for(a=0;a<o.length;a++)r[o[a]]=new Set(r[o[a]]),r[o[a]].add(t.id)}},replace:function(e){return this.entities[e.id]===e?this:this.update(function(){this._updateCalculated(this.entities[e.id],e),this.entities[e.id]=e})},remove:function(e){return this.update(function(){this._updateCalculated(e,void 0),this.entities[e.id]=void 0})},revert:function(e){var t=this.base().entities[e],n=this.entities[e];return n===t?this:this.update(function(){this._updateCalculated(n,t),delete this.entities[e]})},update:function(){for(var e=arguments,t=this.frozen?coreGraph(this,!0):this,n=0;n<arguments.length;n++)e[n].call(t,t);return this.frozen&&(t.frozen=!0),t},load:function(e){var t=this.base();for(var n in this.entities=Object.create(t.entities),e)this.entities[n]=e[n],this._updateCalculated(t.entities[n],this.entities[n]);return this}};var fastDeepEqual=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n};function LCS(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];n[i]?n[i].push(r):n[i]=[r]}for(var o=[{buffer1index:-1,buffer2index:-1,chain:null}],a=0;a<e.length;a++){for(var s=n[e[a]]||[],l=0,c=o[0],u=0;u<s.length;u++){for(var p=s[u],d=void 0,d=l;d<o.length&&!(o[d].buffer2index<p&&(d===o.length-1||o[d+1].buffer2index>p));d++);if(d<o.length){var f={buffer1index:a,buffer2index:p,chain:o[d]};if(l===o.length?o.push(c):o[l]=c,c=f,(l=d+1)===o.length)break}}o[l]=c}return o[o.length-1]}function diffIndices(e,t){for(var n=LCS(e,t),r=[],i=e.length,o=t.length,a=n;null!==a;a=a.chain){var s=i-a.buffer1index-1,l=o-a.buffer2index-1,i=a.buffer1index,o=a.buffer2index;(s||l)&&r.push({buffer1:[i+1,s],buffer1Content:e.slice(i+1,i+1+s),buffer2:[o+1,l],buffer2Content:t.slice(o+1,o+1+l)})}return r.reverse(),r}function diff3MergeRegions(e,t,n){var r=[];function i(e,t){r.push({ab:t,oStart:e.buffer1[0],oLength:e.buffer1[1],abStart:e.buffer2[0],abLength:e.buffer2[1]})}diffIndices(t,e).forEach(function(e){return i(e,"a")}),diffIndices(t,n).forEach(function(e){return i(e,"b")}),r.sort(function(e,t){return e.oStart-t.oStart});var o=[],a=0;function s(e){a<e&&(o.push({stable:!0,buffer:"o",bufferStart:a,bufferLength:e-a,bufferContent:t.slice(a,e)}),a=e)}for(;r.length;){var l,c=r.shift(),u=c.oStart,p=c.oStart+c.oLength,d=[c];for(s(u);r.length;){var f=r[0],h=f.oStart;if(p<h)break;p=Math.max(p,h+f.oLength),d.push(r.shift())}if(1===d.length){0<c.abLength&&(l="a"===c.ab?e:n,o.push({stable:!0,buffer:c.ab,bufferStart:c.abStart,bufferLength:c.abLength,bufferContent:l.slice(c.abStart,c.abStart+c.abLength)}))}else{for(var g={a:[e.length,-1,t.length,-1],b:[n.length,-1,t.length,-1]};d.length;){var m=(c=d.shift()).oStart,y=m+c.oLength,v=c.abStart,_=v+c.abLength,b=g[c.ab];b[0]=Math.min(v,b[0]),b[1]=Math.max(_,b[1]),b[2]=Math.min(m,b[2]),b[3]=Math.max(y,b[3])}var w=g.a[0]+(u-g.a[2]),x=g.a[1]+(p-g.a[3]),S=g.b[0]+(u-g.b[2]),E=g.b[1]+(p-g.b[3]),C={stable:!1,aStart:w,aLength:x-w,aContent:e.slice(w,x),oStart:u,oLength:p-u,oContent:t.slice(u,p),bStart:S,bLength:E-S,bContent:n.slice(S,E)};o.push(C)}a=p}return s(t.length),o}function diff3Merge(e,t,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);var i="string"==typeof t,o="string"==typeof n;"string"==typeof e&&(e=e.split(r.stringSeparator)),i&&(t=t.split(r.stringSeparator)),o&&(n=n.split(r.stringSeparator));var a=[],s=diff3MergeRegions(e,t,n),l=[];function c(){l.length&&a.push({ok:l}),l=[]}return s.forEach(function(e){e.stable?l.push.apply(l,e.bufferContent):r.excludeFalseConflicts&&function(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return;return 1}}(e.aContent,e.bContent)?l.push.apply(l,e.aContent):(c(),a.push({conflict:{a:e.aContent,aIndex:e.aStart,o:e.oContent,oIndex:e.oStart,b:e.bContent,bIndex:e.bStart}}))}),c(),a}function actionMergeRemoteChanges(l,p,d,f,t){f=f||{};var h="safe",g=[];function m(e){return"function"==typeof t?t(e):e}function y(e,t){return"force_local"===h||(n=t.loc,r=e.loc,Math.abs(n[0]-r[0])<1e-6&&Math.abs(n[1]-r[1])<1e-6)?t:"force_remote"===h?t.update({loc:e.loc}):(g.push(_t("merge_remote_changes.conflict.location",{user:m(e.user)})),t);var n,r}function c(e,t,n,r){for(var i=g.length,o=0;o<t.length;o++){var a=t[o],s=r.hasEntity(a);if(-1!==e.nodes.indexOf(a)){var l,c=p.hasEntity(a),u=d.hasEntity(a);if("force_remote"===h&&u&&u.visible)n.replacements.push(u);else if("force_local"===h&&c)l=osmEntity(c),u&&(l=l.update({version:u.version})),n.replacements.push(l);else if("safe"===h&&c&&u&&c.version!==u.version){if(l=osmEntity(c,{version:u.version}),u.visible?l=y(u,l):g.push(_t("merge_remote_changes.conflict.deleted",{user:m(u.user)})),g.length!==i)break;n.replacements.push(l)}}else s&&!function(e,t){var n=r.parentWays(e).some(function(e){return e.id!==t.id});return e.hasInterestingTags()||n||0<r.parentRelations(e).length}(s,e)&&n.removeIds.push(a)}return e}function u(e,t){for(var n=0;n<e.replacements.length;n++)t=t.replace(e.replacements[n]);return e.removeIds.length&&(t=actionDeleteMultiple(e.removeIds)(t)),t}function n(e){var t,n,r={replacements:[],removeIds:[]},i=e.base().entities[l],o=p.entity(l),a=d.entity(l),s=osmEntity(o,{version:a.version});return a.visible?("node"===s.type?s=y(a,s):"way"===s.type?(e.rebase(d.childNodes(a),[e],!1),s=c(s=function(e,t,n){if("force_local"===h||fastDeepEqual(n.nodes,t.nodes))return n;if("force_remote"===h)return n.update({nodes:t.nodes});for(var r=g.length,i=e.nodes||[],o=[],a=diff3Merge(n.nodes||[],i,t.nodes||[],{excludeFalseConflicts:!0}),s=0;s<a.length;s++){var l=a[s];if(l.ok)o.push.apply(o,l.ok);else{var c=l.conflict;if(fastDeepEqual(c.o,c.a))o.push.apply(o,c.b);else{if(!fastDeepEqual(c.o,c.b)){g.push(_t("merge_remote_changes.conflict.nodelist",{user:m(t.user)}));break}o.push.apply(o,c.a)}}}return g.length===r?n.update({nodes:o}):n}(i,a,s),utilArrayUnion(o.nodes,a.nodes),r,e)):"relation"===s.type&&(t=a,n=s,s="force_local"===h||fastDeepEqual(n.members,t.members)?n:"force_remote"===h?n.update({members:t.members}):(g.push(_t("merge_remote_changes.conflict.memberlist",{user:m(t.user)})),n)),s=function(e,t,n){if("force_local"===h||fastDeepEqual(n.tags,t.tags))return n;if("force_remote"===h)return n.update({tags:t.tags});for(var r=g.length,i=e.tags||{},o=n.tags||{},a=t.tags||{},s=utilArrayUnion(utilArrayUnion(Object.keys(i),Object.keys(o)),Object.keys(a)).filter(function(e){return!f[e]}),l=Object.assign({},o),c=!1,u=0;u<s.length;u++){var p=s[u];i[p]!==a[p]&&o[p]!==a[p]&&(i[p]!==o[p]?g.push(_t("merge_remote_changes.conflict.tags",{tag:p,local:o[p],remote:a[p],user:m(t.user)})):(a.hasOwnProperty(p)?l[p]=a[p]:delete l[p],c=!0))}return c&&g.length===r?n.update({tags:l}):n}(i,a,s),g.length||(e=u(r,e).replace(s)),e):"force_remote"===h?actionDeleteMultiple([l])(e):"force_local"===h?("way"===s.type&&(s=c(s,utilArrayUniq(o.nodes),r,e),e=u(r,e)),e.replace(s)):(g.push(_t("merge_remote_changes.conflict.deleted",{user:m(a.user)})),e)}return n.withOption=function(e){return h=e,n},n.conflicts=function(){return g},n}function actionMove(r,e,b,w){var u=e;function i(d){(w=w||{}).ok||(w.moving={},w.intersections=[],w.replacedVertex={},w.startLoc={},w.nodes=[],w.ways=[],function e(t){for(var n=0;n<t.length;n++){var r,i=t[n];w.moving[i]||(w.moving[i]=!0,(r=d.hasEntity(i))&&("node"===r.type?(w.nodes.push(i),w.startLoc[i]=r.loc):"way"===r.type?(w.ways.push(i),e(r.nodes)):e(r.members.map(function(e){return e.id}))))}}(r),function(e){function t(e,t){return!e.isClosed()&&!!e.affix(t)}for(var n=0;n<e.length;n++)for(var r=e[n],i=d.childNodes(d.entity(r)),o=0;o<i.length;o++){var a=i[o],s=d.parentWays(a);if(2===s.length){for(var l=d.entity(r),c=null,u=0;u<s.length;u++){var p=s[u];if(!w.moving[p.id]){c=p;break}}c&&(2<utilArrayIntersection(l.nodes,c.nodes).length||l.isArea()||c.isArea()||w.intersections.push({nodeId:a.id,movedId:l.id,unmovedId:c.id,movedIsEP:t(l,a.id),unmovedIsEP:t(c,a.id)}))}}}(w.ways),w.nodes=w.nodes.filter(function(e){if(-1!==r.indexOf(e))return!0;var t=d.parentWays(d.entity(e));if(t.length<3)return!0;var n=t.every(function(e){return w.moving[e.id]});return n||delete w.moving[e],n}),w.ok=!0)}function o(e,t,n,r){var i,o,a=n.entity(t),s=n.entity(e),l=a.nodes.indexOf(e),c=a.isClosed()?(o=(l+(i=a.nodes.length-1)-1)%i,(l+i+1)%i):(i=a.nodes.length,o=l-1,l+1),u=n.hasEntity(a.nodes[o]),p=n.hasEntity(a.nodes[c]);if(!u||!p)return n;var d,f,h=t+"_"+e,g=w.replacedVertex[h];g||(g=osmNode(),w.replacedVertex[h]=g,w.startLoc[g.id]=w.startLoc[e]),f=r?(d=b(w.startLoc[e]),b.invert(geoVecAdd(d,r))):w.startLoc[e],g=g.move(f);var m=180*Math.abs(geoAngle(g,u,b)-geoAngle(g,p,b))/Math.PI;if(175<m&&m<185)return n;var y=[u.loc,g.loc,s.loc,p.loc].map(b),v=[u.loc,s.loc,g.loc,p.loc].map(b),_=geoPathLength(y)<=geoPathLength(v)?l:c;return a.isClosed()&&0===_&&(_=i),a=a.addNode(g.id,_),n.replace(g).replace(a)}function a(e,t){var n,r,i=t.entity(e);function o(e,t){return 1<t.parentWays(e).length||t.parentRelations(e).length||e.hasInterestingTags()}for(var a=0;a<i.nodes.length;a++)r=t.entity(i.nodes[a]),n&&r&&geoVecEqual(n.loc,r.loc,1e-6)&&(o(n,t)?o(r,t)||(i=i.removeNode(r.id),t=t.replace(i).remove(r)):(i=i.removeNode(n.id),t=t.replace(i).remove(n))),n=r;return t}function s(e){for(var t=0;t<w.intersections.length;t++){var n=w.intersections[t];e=o(n.nodeId,n.movedId,e,u),e=function(e,t){var n=t.entity(e.nodeId),r=t.entity(e.movedId),i=t.entity(e.unmovedId),o=e.movedIsEP,a=e.unmovedIsEP;if(o&&a)return t;var s=t.childNodes(r).filter(function(e){return e!==n}),l=t.childNodes(i).filter(function(e){return e!==n});r.isClosed()&&r.first()===n.id&&s.push(s[0]),i.isClosed()&&i.first()===n.id&&l.push(l[0]);var c,u=!o&&geoChooseEdge(s,b(n.loc),b),p=!a&&geoChooseEdge(l,b(n.loc),b);if(o||a)c=o?p.loc:u.loc;else for(var d=0;d<10&&(c=geoVecInterp(u.loc,p.loc,.5),u=geoChooseEdge(s,b(c),b),p=geoChooseEdge(l,b(c),b),!(Math.abs(u.distance-p.distance)<1e-6));d++);return t=t.replace(n.move(c)),o||u.index===r.nodes.indexOf(n.id)||(r=r.removeNode(n.id).addNode(n.id,u.index),t=t.replace(r)),a||p.index===i.nodes.indexOf(n.id)||(i=i.removeNode(n.id).addNode(n.id,p.index),t=t.replace(i)),t}(n,e=o(n.nodeId,n.unmovedId,e,null)),e=a(n.movedId,e),e=a(n.unmovedId,e)}return e}function l(e){for(var t=0;t<w.intersections.length;t++){var n=w.intersections[t];if((!n.movedIsEP||!n.unmovedIsEP)&&n.movedIsEP)for(var r,i=e.entity(n.nodeId),o=b(i.loc),a=geoVecAdd(o,u),s=e.childNodes(e.entity(n.movedId)).map(function(e){return t=e.loc,geoVecAdd(b(t),u);var t}),l=e.childNodes(e.entity(n.unmovedId)),c=geoPathIntersections(s,l.map(function(e){return b(e.loc)}));t<c.length;t++){geoVecEqual(c[0],a)||(r=geoChooseEdge(l,a,b),u=geoVecSubtract(b(r.loc),o))}}}function t(e){if(0===u[0]&&0===u[1])return e;i(e),w.intersections.length&&l(e);for(var t=0;t<w.nodes.length;t++){var n=e.entity(w.nodes[t]),r=geoVecAdd(b(n.loc),u);e=e.replace(n.move(b.invert(r)))}return w.intersections.length&&(e=s(e)),e}return t.delta=function(){return u},t}function actionMoveMember(t,n,r){return function(e){return e.replace(e.entity(t).moveMember(n,r))}}function actionMoveNode(r,i){function e(e,t){null!==t&&isFinite(t)||(t=1),t=Math.min(Math.max(+t,0),1);var n=e.entity(r);return e.replace(n.move(geoVecInterp(n.loc,i,t)))}return e.transitionable=!0,e}function actionNoop(){return function(e){return e}}function actionOrthogonalize(k,N,P,e,t){function n(e,t){null!==t&&isFinite(t)||(t=1),t=Math.min(Math.max(+t,0),1);var n,r=e.entity(k);(r=r.removeNode("")).tags.nonsquare&&(delete(n=Object.assign({},r.tags)).nonsquare,r=r.update({tags:n})),e=e.replace(r);var p=r.isClosed(),i=e.childNodes(r).slice();if(p&&i.pop(),void 0!==P&&3!==(i=L(i,P,p)).length)return e;var o,a,s,d={},l=[],f={i:0,dotp:1};for(h=0;h<i.length;h++)E=i[h],d[E.id]=(d[E.id]||0)+1,l.push({id:E.id,coord:N(E.loc)});if(3===l.length){for(h=0;h<1e3&&(a=l.map(I),l[f.i].coord=geoVecAdd(l[f.i].coord,a[f.i]),!((b=f.dotp)<D));h++);E=e.entity(i[f.i].id),o=N.invert(l[f.i].coord),e=e.replace(E.move(geoVecInterp(E.loc,o,t)))}else{for(var c=[],u=[],h=0;h<l.length;h++){C=l[h];var g,m,y=0;(p||0<h&&h<l.length-1)&&(g=l[(h-1+l.length)%l.length],m=l[(h+1)%l.length],y=Math.abs(geoOrthoNormalizedDotProduct(g.coord,m.coord,C.coord))),M<y?c.push(C):u.push(C)}var v=A(u),_=A(u),b=1/0;for(h=0;h<1e3;h++){for(a=u.map(I),s=0;s<a.length;s++)u[s].coord=geoVecAdd(u[s].coord,a[s]);var w=geoOrthoCalcScore(u,p,D,T);if(w<b&&(v=A(u),b=w),b<D)break}var x=v.map(function(e){return e.coord});for(p&&x.push(x[0]),h=0;h<v.length;h++)C=v[h],geoVecEqual(_[h].coord,C.coord)||(E=e.entity(C.id),o=N.invert(C.coord),e=e.replace(E.move(geoVecInterp(E.loc,o,t))));for(h=0;h<c.length;h++){var S,E,C=c[h];1<d[C.id]||(E=e.entity(C.id),1!==t||1!==e.parentWays(E).length||0!==e.parentRelations(E).length||E.hasInterestingTags()?(S=geoVecProject(C.coord,x))&&(o=N.invert(S.target),e=e.replace(E.move(geoVecInterp(E.loc,o,t)))):e=actionDeleteNode(E.id)(e))}}return e;function A(e){return e.map(function(e){return{id:e.id,coord:[e.coord[0],e.coord[1]]}})}function I(e,t,n){if(!p&&(0===t||t===n.length-1))return[0,0];if(1<d[n[t].id])return[0,0];var r=n[(t-1+n.length)%n.length].coord,i=e.coord,o=n[(t+1)%n.length].coord,a=geoVecSubtract(r,i),s=geoVecSubtract(o,i),l=2*Math.min(geoVecLength(a),geoVecLength(s)),a=geoVecNormalize(a),s=geoVecNormalize(s),c=a[0]*s[0]+a[1]*s[1],u=Math.abs(c);return u<O?(f.i=t,f.dotp=u,geoVecScale(geoVecNormalize(geoVecAdd(a,s)),.1*c*l)):[0,0]}}var D=t||1e-4,T=e||13,O=Math.cos((90-T)*Math.PI/180),M=Math.cos(T*Math.PI/180);function L(e,t,n){for(var r=n?0:1,i=n?e.length:e.length-1,o=r;o<i;o++)if(e[o].id===t)return[e[(o-1+e.length)%e.length],e[o],e[(o+1)%e.length]];return[]}return n.disabled=function(e){var t=(t=e.entity(k)).removeNode("");e=e.replace(t);var n=t.isClosed(),r=e.childNodes(t).slice();n&&r.pop();var i=!1;if(void 0!==P&&(i=!0,3!==(r=L(r,P,n)).length))return"end_vertex";var o=geoOrthoCanOrthogonalize(r.map(function(e){return N(e.loc)}),n,D,T,i);return null===o?"not_squarish":0===o&&"square_enough"},n.transitionable=!0,n}function actionRestrictTurn(a,s,l){return function(t){var e=t.entity(a.from.way),n=t.entity(a.to.way),r=a.via.node&&t.entity(a.via.node),i=a.via.ways&&a.via.ways.map(function(e){return t.entity(e)}),o=[];return o.push({id:e.id,type:"way",role:"from"}),r?o.push({id:r.id,type:"node",role:"via"}):i&&i.forEach(function(e){o.push({id:e.id,type:"way",role:"via"})}),o.push({id:n.id,type:"way",role:"to"}),t.replace(osmRelation({id:l,tags:{type:"restriction",restriction:s},members:o}))}}function actionRevert(r){return function(t){var e=t.hasEntity(r),n=t.base().entities[r];return e&&!n&&("node"===e.type&&t.parentWays(e).forEach(function(e){e=e.removeNode(r),t=t.replace(e),e.isDegenerate()&&(t=actionDeleteWay(e.id)(t))}),t.parentRelations(e).forEach(function(e){e=e.removeMembersWithID(r),t=t.replace(e),e.isDegenerate()&&(t=actionDeleteRelation(e.id)(t))})),t.revert(r)}}function actionRotate(t,r,i,o){return function(e){return e.update(function(n){utilGetAllNodes(t,n).forEach(function(e){var t=geoRotate([o(e.loc)],i,r)[0];n=n.replace(e.move(o.invert(t)))})})}}function actionStraightenNodes(p,d){function f(e,t,n){return geoVecDot(e,n,t)/geoVecDot(n,n,t)}function h(e){var t=geoGetSmallestSurroundingRectangle(e),n=[(t.poly[0][0]+t.poly[1][0])/2,(t.poly[0][1]+t.poly[1][1])/2],r=[(t.poly[2][0]+t.poly[3][0])/2,(t.poly[2][1]+t.poly[3][1])/2],i=[(t.poly[3][0]+t.poly[4][0])/2,(t.poly[3][1]+t.poly[4][1])/2],o=[(t.poly[1][0]+t.poly[2][0])/2,(t.poly[1][1]+t.poly[2][1])/2];return geoVecLength(n,r)>geoVecLength(i,o)?[n,r]:[i,o]}function e(t,e){null!==e&&isFinite(e)||(e=1),e=Math.min(Math.max(+e,0),1);for(var n=p.map(function(e){return t.entity(e)}),r=n.map(function(e){return d(e.loc)}),i=h(r),o=i[0],a=i[1],s=0;s<r.length;s++){var l=n[s],c=geoVecInterp(o,a,f(r[s],o,a)),u=d.invert(c);t=t.replace(l.move(geoVecInterp(l.loc,u,e)))}return t}return e.disabled=function(t){for(var e=p.map(function(e){return t.entity(e)}).map(function(e){return d(e.loc)}),n=h(e),r=n[0],i=n[1],o=0,a=0;a<e.length;a++){var s=e[a],l=geoVecLength(geoVecInterp(r,i,f(s,r,i)),s);!isNaN(l)&&o<l&&(o=l)}if(o<1e-4)return"straight_enough"},e.transitionable=!0,e}function actionStraightenWay(p,d){function f(e,t,n){return geoVecDot(e,n,t)/geoVecDot(n,n,t)}function h(t){for(var e=[],n=[],r=[],i=[],o=p.filter(function(e){return"way"===t.entity(e).type}),a=p.filter(function(e){return"node"===t.entity(e).type}),s=0;s<o.length;s++){e=t.entity(o[s]).nodes.slice(0);i.push(e),n.push(e[0]),r.push(e[e.length-1])}n=n.filter(function(e){return n.indexOf(e)===n.lastIndexOf(e)}),r=r.filter(function(e){return r.indexOf(e)===r.lastIndexOf(e)});var l=utilArrayDifference(n,r).concat(utilArrayDifference(r,n))[0],c=[];e=[];for(var u;i.length;)i=utilArrayDifference(i,[c=function(t,e){return e.filter(function(e){return e[0]===t||e[e.length-1]===t})[0]}(l,i)]),c[0]!==l&&c.reverse(),l=(e=e.concat(c))[e.length-1];return 2===a.length&&((u=[e.indexOf(a[0]),e.indexOf(a[1])]).sort(function(e,t){return e-t}),e=e.slice(u[0],u[1]+1)),e.map(function(e){return t.entity(e)})}function g(e,t){return 1<t.parentWays(e).length||t.parentRelations(e).length||e.hasInterestingTags()}function e(e,t){null!==t&&isFinite(t)||(t=1),t=Math.min(Math.max(+t,0),1);for(var n=h(e),r=n.map(function(e){return d(e.loc)}),i=r[0],o=r[r.length-1],a=[],s=1;s<r.length-1;s++){var l,c,u=n[s],p=r[s];t<1||g(u,e)?(l=geoVecInterp(i,o,f(p,i,o)),c=d.invert(l),e=e.replace(u.move(geoVecInterp(u.loc,c,t)))):-1===a.indexOf(u)&&a.push(u)}for(s=0;s<a.length;s++)e=actionDeleteNode(a[s].id)(e);return e}return e.disabled=function(n){var r=h(n),e=r.map(function(e){return d(e.loc)}),t=e[0],i=e[e.length-1],o=.2*geoVecLength(t,i);if(0==o)return"too_bendy";for(var a=0,s=1;s<e.length-1;s++){var l=e[s],c=geoVecLength(geoVecInterp(t,i,f(l,t,i)),l);if(isNaN(c)||o<c)return"too_bendy";a<c&&(a=c)}var u=r.every(function(e,t){return 0===t||t===r.length-1||g(e,n)});return a<1e-4&&u?"straight_enough":void 0},e.transitionable=!0,e}function actionUnrestrictTurn(t){return function(e){return actionDeleteRelation(t.restrictionID)(e)}}function actionReflect(b,w){function t(e,t){null!==t&&isFinite(t)||(t=1),t=Math.min(Math.max(+t,0),1);for(var n,r=utilGetAllNodes(b,e),i=geoGetSmallestSurroundingRectangle(r.map(function(e){return w(e.loc)})),o=[(i.poly[0][0]+i.poly[1][0])/2,(i.poly[0][1]+i.poly[1][1])/2],a=[(i.poly[2][0]+i.poly[3][0])/2,(i.poly[2][1]+i.poly[3][1])/2],s=[(i.poly[3][0]+i.poly[4][0])/2,(i.poly[3][1]+i.poly[4][1])/2],l=[(i.poly[1][0]+i.poly[2][0])/2,(i.poly[1][1]+i.poly[2][1])/2],c=geoVecLength(o,a)>geoVecLength(s,l),u=x&&c||!x&&!c?(n=o,a):(n=s,l),p=u[0]-n[0],d=u[1]-n[1],f=(p*p-d*d)/(p*p+d*d),h=2*p*d/(p*p+d*d),g=0;g<r.length;g++){var m=r[g],y=w(m.loc),v=[f*(y[0]-n[0])+h*(y[1]-n[1])+n[0],h*(y[0]-n[0])-f*(y[1]-n[1])+n[1]],_=w.invert(v),m=m.move(geoVecInterp(m.loc,_,t));e=e.replace(m)}return e}var x=!0;return t.useLongAxis=function(e){return arguments.length?(x=e,t):x},t.transitionable=!0,t}function actionUpgradeTags(p,d,f){return function(e){var t,n,r,i,o=e.entity(p),a=Object.assign({},o.tags);for(var s in d){"*"===d[s]?(t=a[s],delete a[s]):(i=(r=a[s].split(";").filter(Boolean)).indexOf(d[s]),1===r.length||-1===i?delete a[s]:(f&&f[s]&&(n=i),r.splice(i,1),a[s]=r.join(";")))}if(f)for(var l in f){var c,u=f[l];if("*"===u){if(a[l]&&"no"!==a[l])continue;a[l]="yes"}else{"$1"===u?a[l]=t:a[l]&&d[l]&&void 0!==n?-1===(c=a[l].split(";").filter(Boolean)).indexOf(u)&&(c.splice(n,0,u),a[l]=c.join(";")):a[l]=u}}return e.replace(o.update({tags:a}))}}function behaviorEdit(e){function t(){e.map().minzoom(e.minEditableZoom())}return t.off=function(){e.map().minzoom(0)},t}function behaviorHover(l){var c,u,p=dispatch("hover"),d=select(null),f=null,o=null,a=[],s="PointerEvent"in window?"pointer":"mouse";function h(){c&&event.keyCode===utilKeybinding.modifierCodes.alt&&(d.selectAll(".hover").classed("hover-suppressed",!0).classed("hover",!1),d.classed("hover-disabled",!0),p.call("hover",this,null))}function g(){c&&event.keyCode===utilKeybinding.modifierCodes.alt&&(d.selectAll(".hover-suppressed").classed("hover-suppressed",!1).classed("hover",!0),d.classed("hover-disabled",!1),p.call("hover",this,a))}function t(e){function n(){var e=event.target&&event.target.__data__;return"object"!=typeof e?null:!(e instanceof osmEntity)&&e.properties&&e.properties.entity instanceof osmEntity?e.properties.entity:e}function t(){var e;!(-1!==l.mode().id.indexOf("drag")||event.pointerType&&"mouse"!==event.pointerType)&&event.buttons||(e=n())&&-1===a.indexOf(e)&&(a.push(e),i(a))}function r(){var e=n(),t=a.indexOf(e);-1!==t&&(a.splice(t),i(a))}function i(e){d.selectAll(".hover").classed("hover",!1),d.selectAll(".hover-suppressed").classed("hover-suppressed",!1);var t,n=l.mode();f||"draw-line"!==n.id&&"draw-area"!==n.id||(t=e.find(function(e){return e instanceof osmEntity&&"node"===e.type}),f=t&&t.id),e=e.filter(function(e){return!(e instanceof osmEntity)||e.id!==f&&("node"!==e.type||!u||("vertex"===(r=e).geometry(l.graph())||_mainPresetIndex.allowsVertex(r,l.graph())))&&(t=e,"add-point"!==(n=l.mode()).id||n.preset.matchGeometry("vertex")||"way"!==t.type&&"vertex"!==t.geometry(l.graph()));var t,n,r});var r="";for(var i in e){var o=e[i];if(o.__featurehash__)r+=", .data"+o.__featurehash__;else if(o instanceof QAItem)r+=", ."+o.service+".itemId-"+o.id;else if(o instanceof osmNote)r+=", .note-"+o.id;else if(o instanceof osmEntity&&(r+=", ."+o.id,"relation"===o.type))for(var a in o.members)r+=", ."+o.members[a].id}var s=c&&event&&event.altKey;r.trim().length&&(r=r.slice(1),d.selectAll(r).classed(s?"hover-suppressed":"hover",!0)),p.call("hover",this,!s&&e)}a=[],o?(f=o,o=null):f=null,(d=e).on(s+"over.hover",t).on(s+"out.hover",r).on(s+"down.hover",t),select(window).on(s+"up.hover pointercancel.hover",r,!0).on("keydown.hover",h).on("keyup.hover",g)}return t.off=function(e){e.selectAll(".hover").classed("hover",!1),e.selectAll(".hover-suppressed").classed("hover-suppressed",!1),e.classed("hover-disabled",!1),e.on(s+"over.hover",null).on(s+"out.hover",null).on(s+"down.hover",null),select(window).on(s+"up.hover pointercancel.hover",null,!0).on("keydown.hover",null).on("keyup.hover",null)},t.altDisables=function(e){return arguments.length?(c=e,t):c},t.ignoreVertex=function(e){return arguments.length?(u=e,t):u},t.initialNodeID=function(e){return o=e,t},utilRebind(t,p,"on")}var _disableSpace=!1,_lastSpace=null;function behaviorDraw(l){var i,o,c=dispatch("move","down","downcancel","click","clickWay","clickNode","undo","cancel","finish"),t=utilKeybinding("draw"),n=behaviorHover(l).altDisables(!0).ignoreVertex(!0).on("hover",l.ui().sidebar.hover),r=behaviorEdit(l),a=4,s=12,u=!1,p=null,d="PointerEvent"in window?"pointer":"mouse";function f(){var e=l.mode(),t=e&&-1!==e.id.indexOf("note");if(event.altKey||t)return{};var n=("keydown"===event.type?p&&p.target:event.target).__data__;return n&&n.properties&&n.properties.target?n:{}}function h(){var e;o||(e=utilFastMouse(this),o={id:event.pointerId||"mouse",pointerLocGetter:e,downTime:+new Date,downLoc:e(event)},c.call("down",this,f()))}function g(){var e,t,n,r;o&&o.id===(event.pointerId||"mouse")&&(e=o,o=null,i=event,e.isCancelled||(t=+new Date,n=e.pointerLocGetter(event),((r=geoVecLength(e.downLoc,n))<a||r<s&&t-e.downTime<500)&&(select(window).on("click.draw-block",function(){event.stopPropagation()},!0),l.map().dblclickZoomEnable(!1),window.setTimeout(function(){l.map().dblclickZoomEnable(!0),select(window).on("click.draw-block",null)},500),b(n))))}function m(){var e,t;o&&o.id===(event.pointerId||"mouse")&&!o.isCancelled&&(e=o.pointerLocGetter(event),t=geoVecLength(o.downLoc,e),a<=t&&(o.isCancelled=!0,c.call("downcancel",this))),event.pointerType&&"mouse"!==event.pointerType||event.buttons||o||i&&"mouse"!==i.pointerType&&event.timeStamp-i.timeStamp<100||(p=event,c.call("move",this,f()))}function y(){o&&o.id===(event.pointerId||"mouse")&&(o.isCancelled||c.call("downcancel",this),o=null)}function v(){u=!1}function _(){u=!0}function b(e){var t,n,r=f(),i=r&&r.properties&&r.properties.entity,o=l.mode();if(!i||"node"!==i.type||"vertex"!==(t=i).geometry(l.graph())&&!_mainPresetIndex.allowsVertex(t,l.graph()))if(i&&"way"===i.type&&("add-point"!==o.id||o.preset.matchGeometry("vertex"))){var a=geoChooseEdge(l.graph().childNodes(i),e,l.projection,l.activeID());if(a){var s=[i.nodes[a.index-1],i.nodes[a.index]];return void c.call("clickWay",this,a.loc,s,r)}}else{"add-point"===o.id&&!o.preset.matchGeometry("point")||(n=l.projection.invert(e),c.call("click",this,n,r))}else c.call("clickNode",this,i,r)}function w(){event.preventDefault(),event.stopPropagation();var e,t=l.map().mouse();_disableSpace&&_lastSpace&&(e=geoVecLength(_lastSpace,t),s<e&&(_disableSpace=!1)),_disableSpace||u||!p||(_lastSpace=t,_disableSpace=!0,select(window).on("keyup.space-block",function(){event.preventDefault(),event.stopPropagation(),_disableSpace=!1,select(window).on("keyup.space-block",null)}),b(l.map().mouse()||l.projection(l.map().center())))}function x(){event.preventDefault(),c.call("undo")}function S(){event.preventDefault(),c.call("cancel")}function E(){event.preventDefault(),c.call("finish")}function C(e){return l.install(n),l.install(r),o=null,t.on("⌫",x).on("⌦",S).on("⎋",E).on("↩",E).on("space",w).on("⌥space",w),e.on("mouseenter.draw",v).on("mouseleave.draw",_).on(d+"down.draw",h).on(d+"move.draw",m),select(window).on(d+"up.draw",g,!0).on("pointercancel.draw",y,!0),select(document).call(t),C}return C.off=function(e){l.ui().sidebar.hover.cancel(),l.uninstall(n),l.uninstall(r),e.on("mouseenter.draw",null).on("mouseleave.draw",null).on(d+"down.draw",null).on(d+"move.draw",null),select(window).on(d+"up.draw",null).on("pointercancel.draw",null),select(document).call(t.unbind)},C.hover=function(){return n},utilRebind(C,c,"on")}function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var prefix="$";function Map$1(){}function map$2(e,t){var n=new Map$1;if(e instanceof Map$1)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,i=-1,o=e.length;if(null==t)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t(r=e[i],i,e),r)}else if(e)for(var a in e)n.set(a,e[a]);return n}function Set$1(){}Map$1.prototype=map$2.prototype={constructor:Map$1,has:function(e){return prefix+e in this},get:function(e){return this[prefix+e]},set:function(e,t){return this[prefix+e]=t,this},remove:function(e){var t=prefix+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===prefix&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===prefix&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===prefix&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===prefix&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===prefix&&++e;return e},empty:function(){for(var e in this)if(e[0]===prefix)return!1;return!0},each:function(e){for(var t in this)t[0]===prefix&&e(this[t],t.slice(1),this)}};var proto=map$2.prototype;function set$2(e,t){var n=new Set$1;if(e instanceof Set$1)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}Set$1.prototype=set$2.prototype={constructor:Set$1,has:proto.has,add:function(e){return this[prefix+(e+="")]=e,this},remove:proto.remove,clear:proto.clear,values:proto.keys,size:proto.size,empty:proto.empty,each:proto.each};var array$1=Array.prototype,map$3=array$1.map,slice$4=array$1.slice;function constant$4(e){return function(){return e}}function number$1(e){return+e}var unit=[0,1];function identity$3(e){return e}function normalize(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:constant$4(isNaN(n)?NaN:.5)}function clamper(e){var t,n=e[0],r=e[e.length-1];return r<n&&(t=n,n=r,r=t),function(e){return Math.max(n,Math.min(r,e))}}function bimap(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1],o=i<r?(r=normalize(i,r),n(a,o)):(r=normalize(r,i),n(o,a));return function(e){return o(r(e))}}function polymap(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=normalize(n[a],n[a+1]),o[a]=t(e[a],e[a+1]);return function(e){var t=bisectRight(n,e,1,r)-1;return o[t](i[t](e))}}function copy$1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer$1(){var n,r,t,i,o,a,s=unit,l=unit,c=interpolate,u=identity$3;function p(){return i=2<Math.min(s.length,l.length)?polymap:bimap,o=a=null,d}function d(e){return isNaN(e=+e)?t:(o=o||i(s.map(n),l,c))(n(u(e)))}return d.invert=function(e){return u(r((a=a||i(l,s.map(n),d3_interpolateNumber))(e)))},d.domain=function(e){return arguments.length?(s=map$3.call(e,number$1),u===identity$3||(u=clamper(s)),p()):s.slice()},d.range=function(e){return arguments.length?(l=slice$4.call(e),p()):l.slice()},d.rangeRound=function(e){return l=slice$4.call(e),c=interpolateRound,p()},d.clamp=function(e){return arguments.length?(u=e?clamper(s):identity$3,d):u!==identity$3},d.interpolate=function(e){return arguments.length?(c=e,p()):c},d.unknown=function(e){return arguments.length?(t=e,d):t},function(e,t){return n=e,r=t,p()}}function continuous(e,t){return transformer$1()(e,t)}function formatDecimal(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[1<r.length?r[0]+r.slice(2):r,+e.slice(n+1)]}function exponent(e){return(e=formatDecimal(Math.abs(e)))?e[1]:NaN}function formatGroup(s,l){return function(e,t){for(var n=e.length,r=[],i=0,o=s[0],a=0;0<n&&0<o&&(t<a+o+1&&(o=Math.max(1,t-a)),r.push(e.substring(n-=o,n+o)),!((a+=o+1)>t));)o=s[i=(i+1)%s.length];return r.reverse().join(l)}}function formatNumerals(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i,prefixExponent;function formatSpecifier(e){if(!(t=re.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function FormatSpecifier(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function formatTrim(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;0<i&&(i=0)}return 0<i?e.slice(0,i)+e.slice(t+1):e}function formatPrefixAuto(e,t){var n=formatDecimal(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:a<o?r+new Array(o-a+1).join("0"):0<o?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+formatDecimal(e,Math.max(0,t+o-1))[0]}function formatRounded(e,t){var n=formatDecimal(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var formatTypes={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return formatRounded(100*e,t)},r:formatRounded,s:formatPrefixAuto,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function identity$4(e){return e}var map$4=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],locale,format,formatPrefix;function formatLocale(e){var x=void 0===e.grouping||void 0===e.thousands?identity$4:formatGroup(map$4.call(e.grouping,Number),e.thousands+""),r=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",S=void 0===e.decimal?".":e.decimal+"",E=void 0===e.numerals?identity$4:formatNumerals(map$4.call(e.numerals,String)),o=void 0===e.percent?"%":e.percent+"",C=void 0===e.minus?"-":e.minus+"",A=void 0===e.nan?"NaN":e.nan+"";function a(e){var c=(e=formatSpecifier(e)).fill,u=e.align,p=e.sign,t=e.symbol,d=e.zero,f=e.width,h=e.comma,g=e.precision,m=e.trim,y=e.type;"n"===y?(h=!0,y="g"):formatTypes[y]||(void 0===g&&(g=12),m=!0,y="g"),(d||"0"===c&&"="===u)&&(d=!0,c="0",u="=");var v="$"===t?r:"#"===t&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===t?i:/[%p]/.test(y)?o:"",b=formatTypes[y],w=/[defgprs%]/.test(y);function n(e){var t,n,r,i=v,o=_;if("c"===y)o=b(e)+o,e="";else{var a=(e=+e)<0||1/e<0;if(e=isNaN(e)?A:b(Math.abs(e),g),m&&(e=formatTrim(e)),a&&0==+e&&"+"!==p&&(a=!1),i=(a?"("===p?p:C:"-"===p||"("===p?"":p)+i,o=("s"===y?prefixes[8+prefixExponent/3]:"")+o+(a&&"("===p?")":""),w)for(t=-1,n=e.length;++t<n;)if((r=e.charCodeAt(t))<48||57<r){o=(46===r?S+e.slice(t+1):e.slice(t))+o,e=e.slice(0,t);break}}h&&!d&&(e=x(e,1/0));var s=i.length+e.length+o.length,l=s<f?new Array(f-s+1).join(c):"";switch(h&&d&&(e=x(l+e,l.length?f-o.length:1/0),l=""),u){case"<":e=i+e+o+l;break;case"=":e=i+l+e+o;break;case"^":e=l.slice(0,s=l.length>>1)+i+e+o+l.slice(s);break;default:e=l+i+e+o}return E(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),n.toString=function(){return e+""},n}return{format:a,formatPrefix:function(e,t){var n=a(((e=formatSpecifier(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(exponent(t)/3))),i=Math.pow(10,-r),o=prefixes[8+r/3];return function(e){return n(i*e)+o}}}}function defaultLocale(e){return locale=formatLocale(e),format=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(e){return Math.max(0,-exponent(Math.abs(e)))}function precisionPrefix(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))-exponent(Math.abs(e)))}function precisionRound(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent(t)-exponent(e))+1}function tickFormat(e,t,n,r){var i,o=tickStep(e,t,n);switch((r=formatSpecifier(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=precisionPrefix(o,a))||(r.precision=i),formatPrefix(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=precisionRound(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=precisionFixed(o))||(r.precision=i-2*("%"===r.type))}return format(r)}function linearish(s){var l=s.domain;return s.ticks=function(e){var t=l();return ticks(t[0],t[t.length-1],null==e?10:e)},s.tickFormat=function(e,t){var n=l();return tickFormat(n[0],n[n.length-1],null==e?10:e,t)},s.nice=function(e){null==e&&(e=10);var t,n=l(),r=0,i=n.length-1,o=n[r],a=n[i];return a<o&&(t=o,o=a,a=t,t=r,r=i,i=t),0<(t=tickIncrement(o,a,e))?t=tickIncrement(o=Math.floor(o/t)*t,a=Math.ceil(a/t)*t,e):t<0&&(t=tickIncrement(o=Math.ceil(o*t)/t,a=Math.floor(a*t)/t,e)),0<t?(n[r]=Math.floor(o/t)*t,n[i]=Math.ceil(a/t)*t,l(n)):t<0&&(n[r]=Math.ceil(o*t)/t,n[i]=Math.floor(a*t)/t,l(n)),s},s}function linear$2(){var e=continuous(identity$3,identity$3);return e.copy=function(){return copy$1(e,linear$2())},initRange.apply(e,arguments),linearish(e)}function quantize(){var t,n=0,r=1,i=1,o=[.5],a=[0,1];function s(e){return e<=e?a[bisectRight(o,e,0,i)]:t}function l(){var e=-1;for(o=new Array(i);++e<i;)o[e]=((e+1)*r-(e-i)*n)/(i+1);return s}return s.domain=function(e){return arguments.length?(n=+e[0],r=+e[1],l()):[n,r]},s.range=function(e){return arguments.length?(i=(a=slice$4.call(e)).length-1,l()):a.slice()},s.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,o[0]]:i<=t?[o[i-1],r]:[o[t-1],o[t]]},s.unknown=function(e){return arguments.length&&(t=e),s},s.thresholds=function(){return o.slice()},s.copy=function(){return quantize().domain([n,r]).range(a).unknown(t)},initRange.apply(linearish(s),arguments)}function behaviorBreathe(){var t,a=800,r=4,s=".selected.shadow, .selected .shadow",l=select(null),c="",u={},p=!1;function i(e,t,n,r){e=parseFloat(e),t=parseFloat(t);var i=quantize().domain([0,1]).range(d3_quantize(d3_interpolateNumber(e,t),n));return function(e){return String(i(e))+(r||"")}}function d(e){e.style("stroke-opacity",null).style("stroke-width",null).style("fill-opacity",null).style("r",null)}function f(e,t){var n="from"===t?"to":"from";e.styleTween("stroke-opacity",function(e){return i(u[e.id][n].opacity,u[e.id][t].opacity,r)}).styleTween("stroke-width",function(e){return i(u[e.id][n].width,u[e.id][t].width,r,"px")}).styleTween("fill-opacity",function(e){return i(u[e.id][n].opacity,u[e.id][t].opacity,r)}).styleTween("r",function(e){return i(u[e.id][n].width,u[e.id][t].width,r,"px")})}function h(e){e.call(d).each(function(e){var t,n=select(this),r=n.node().tagName,i={from:{},to:{}},o="circle"===r?(t=parseFloat(n.style("fill-opacity")||.5),parseFloat(n.style("r")||15.5)):(t=parseFloat(n.style("stroke-opacity")||.7),parseFloat(n.style("stroke-width")||10));i.tag=r,i.from.opacity=.6*t,i.to.opacity=1.25*t,i.from.width=.7*o,i.to.width=o*("circle"===r?1.5:1),u[e.id]=i})}function g(e,t){var n="from"===t?"to":"from",r=e.selectAll(s),i=e.attr("class");if(p||r.empty())return l.call(d),void(l=select(null));fastDeepEqual(r.data(),l.data())&&i===c||(l.call(d),c=i,l=r.call(h));var o=!1;l.transition().duration(a).call(f,t).on("end",function(){o||(e.call(g,n),o=!0),select(this).classed("selected")||d(select(this))})}function e(e){p=!1,t=timer(function(){return!e.selectAll(s).empty()&&(e.call(g,"from"),t.stop(),!0)},20)}return e.restartIfNeeded=function(e){l.empty()&&(e.call(g,"from"),t&&t.stop())},e.off=function(){p=!0,t&&t.stop(),l.interrupt().call(d)},e}function behaviorOperation(e){var t;function n(){e.map().withinEditableZoom()&&(event.preventDefault(),t.disabled()?e.ui().flash.duration(4e3).iconName("#iD-operation-"+t.id).iconClass("operation disabled").text(t.tooltip)():(e.ui().flash.duration(2e3).iconName("#iD-operation-"+t.id).iconClass("operation").text(t.annotation()||t.title)(),t.point&&t.point(null),t()))}function r(){return t&&t.available()&&e.keybinding().on(t.keys,n),r}return r.off=function(){e.keybinding().off(t.keys)},r.which=function(e){return arguments.length?(t=e,r):t},r}function operationCircularize(n,t){var r,i=t.map(function(e){var t=n.entity(e);if("way"!==t.type||new Set(t.nodes).size<=1)return null;r=r?r.extend(t.extent(n.graph())):t.extent(n.graph());return actionCircularize(e,n.projection)}).filter(Boolean),o=1===i.length?"single":"multiple",a=utilGetAllNodes(t,n.graph()).map(function(e){return e.loc});var s=function(){var e;i.length&&((e=function(t,n){return i.forEach(function(e){e.disabled(t)||(t=e(t,n))}),t}).transitionable=!0,n.perform(e,s.annotation()),window.setTimeout(function(){n.validator().validate()},300))};return s.available=function(){return i.length&&t.length===i.length},s.disabled=function(){if(!i.length)return"";var e=i.map(function(e){return e.disabled(n.graph())}).filter(Boolean);return e.length===i.length?1<new Set(e).size?"multiple_blockers":e[0]:r.percentContainedIn(n.map().extent())<.8?"too_large":function(){if(n.inIntro())return!1;var t=n.connection();if(t){var e=a.filter(function(e){return!t.isDataLoaded(e)});if(e.length)return e.forEach(function(e){n.loadTileAtLoc(e)}),!0}return!1}()?"not_downloaded":!!t.some(n.hasHiddenConnections)&&"connected_to_hidden"},s.tooltip=function(){var e=s.disabled();return _t(e?"operations.circularize."+e+"."+o:"operations.circularize.description."+o)},s.annotation=function(){return _t("operations.circularize.annotation."+o)},s.id="circularize",s.keys=[_t("operations.circularize.key")],s.title=_t("operations.circularize.title"),s.behavior=behaviorOperation(n).which(s),s}defaultLocale({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var uiCmd=function(e){var t=utilDetect();if("mac"===t.os)return e;if("win"===t.os&&"⌘⇧Z"===e)return"Ctrl+Y";for(var n="",r={"⌘":"Ctrl","⇧":"Shift","⌥":"Alt","⌫":"Backspace","⌦":"Delete"},i=0;i<e.length;i++)e[i]in r?n+=r[e[i]]+(i<e.length-1?"+":""):n+=e[i];return n};function operationDelete(l,c){var t=1===c.length?"single":"multiple",u=actionDeleteMultiple(c),n=utilGetAllNodes(c,l.graph()).map(function(e){return e.loc}),e=utilTotalExtent(c,l.graph()),p=function(){var e,t,n,r,i,o,a,s;1===c.length&&(n=c[0],i=(r=l.entity(n)).geometry(l.graph()),o=l.graph().parentWays(r)[0],"vertex"===i&&(0===(s=(a=o.nodes).indexOf(n))?s++:s===a.length-1?s--:s=geoSphericalDistance(r.loc,l.entity(a[s-1]).loc)<geoSphericalDistance(r.loc,l.entity(a[s+1]).loc)?s-1:s+1,e=a[s],t=l.entity(e).loc)),l.perform(u,p.annotation()),l.validator().validate(),e&&t?l.hasEntity(e)?l.enter(modeSelect(l,[e]).follow(!0)):(l.map().centerEase(t),l.enter(modeBrowse(l))):l.enter(modeBrowse(l))};return p.available=function(){return!0},p.disabled=function(){return e.percentContainedIn(l.map().extent())<.8?"too_large":function(){if(l.inIntro())return!1;var t=l.connection();if(t){var e=n.filter(function(e){return!t.isDataLoaded(e)});if(e.length)return e.forEach(function(e){l.loadTileAtLoc(e)}),!0}return!1}()?"not_downloaded":c.some(l.hasHiddenConnections)?"connected_to_hidden":c.some(function(e){var t=l.entity(e);if("way"!==t.type)return!1;for(var n=l.graph().parentRelations(t),r=0;r<n.length;r++){var i=n[r],o=i.tags.type,a=i.memberById(e).role||"outer";if("route"===o||"boundary"===o||"multipolygon"===o&&"outer"===a)return!0}return!1})?"part_of_relation":c.some(function(e){var t=l.entity(e);return"relation"===t.type&&!t.isComplete(l.graph())})?"incomplete_relation":!!c.some(function(e){var t=l.entity(e);return t.tags.wikidata&&0<t.tags.wikidata.trim().length})&&"has_wikidata_tag"},p.tooltip=function(){var e=p.disabled();return _t(e?"operations.delete."+e+"."+t:"operations.delete.description."+t)},p.annotation=function(){return 1===c.length?_t("operations.delete.annotation."+l.graph().geometry(c[0])):_t("operations.delete.annotation.multiple",{n:c.length})},p.id="delete",p.keys=[uiCmd("⌘⌫"),uiCmd("⌘⌦"),uiCmd("⌦")],p.title=_t("operations.delete.title"),p.behavior=behaviorOperation(l).which(p),p}function operationOrthogonalize(o,t){var a,s,r=t.map(function(e){var t=o.entity(e),n=t.geometry(o.graph());a=a?a.extend(t.extent(o.graph())):t.extent(o.graph());{if("way"===t.type&&2<new Set(t.nodes).size)return s&&"feature"!==s?null:(s="feature",actionOrthogonalize(e,o.projection));if("vertex"===n){if(s&&"corner"!==s)return null;s="corner";var r=o.graph().parentWays(t);if(1===r.length){var i=r[0];if(-1!==i.nodes.indexOf(e))return actionOrthogonalize(i.id,o.projection,e)}}}return null}).filter(Boolean),n=1===r.length?"single":"multiple",i=utilGetAllNodes(t,o.graph()).map(function(e){return e.loc});var l=function(){var e;r.length&&((e=function(t,n){return r.forEach(function(e){e.disabled(t)||(t=e(t,n))}),t}).transitionable=!0,o.perform(e,l.annotation()),window.setTimeout(function(){o.validator().validate()},300))};return l.available=function(){return r.length&&t.length===r.length},l.disabled=function(){if(!r.length)return"";var e=r.map(function(e){return e.disabled(o.graph())}).filter(Boolean);return e.length===r.length?1<new Set(e).size?"multiple_blockers":e[0]:a&&a.percentContainedIn(o.map().extent())<.8?"too_large":function(){if(o.inIntro())return!1;var t=o.connection();if(t){var e=i.filter(function(e){return!t.isDataLoaded(e)});if(e.length)return e.forEach(function(e){o.loadTileAtLoc(e)}),!0}return!1}()?"not_downloaded":!!t.some(o.hasHiddenConnections)&&"connected_to_hidden"},l.tooltip=function(){var e=l.disabled();return _t(e?"operations.orthogonalize."+e+"."+n:"operations.orthogonalize.description."+s+"."+n)},l.annotation=function(){return _t("operations.orthogonalize.annotation."+s+"."+n)},l.id="orthogonalize",l.keys=[_t("operations.orthogonalize.key")],l.title=_t("operations.orthogonalize.title"),l.behavior=behaviorOperation(o).which(l),l}function operationReflectShort(e,t){return operationReflect(e,t,"short")}function operationReflectLong(e,t){return operationReflect(e,t,"long")}function operationReflect(n,t,r){r=r||"long";var i=1===t.length?"single":"multiple",e=utilGetAllNodes(t,n.graph()),o=e.map(function(e){return e.loc}),a=utilTotalExtent(t,n.graph()),s=function(){var e=actionReflect(t,n.projection).useLongAxis(Boolean("long"===r));n.perform(e,s.annotation()),window.setTimeout(function(){n.validator().validate()},300)};return s.available=function(){return 3<=e.length},s.disabled=function(){return a.percentContainedIn(n.map().extent())<.8?"too_large":function(){if(n.inIntro())return!1;var t=n.connection();if(t){var e=o.filter(function(e){return!t.isDataLoaded(e)});if(e.length)return e.forEach(function(e){n.loadTileAtLoc(e)}),!0}return!1}()?"not_downloaded":t.some(n.hasHiddenConnections)?"connected_to_hidden":!!t.some(function(e){var t=n.entity(e);return"relation"===t.type&&!t.isComplete(n.graph())})&&"incomplete_relation"},s.tooltip=function(){var e=s.disabled();return _t(e?"operations.reflect."+e+"."+i:"operations.reflect.description."+r+"."+i)},s.annotation=function(){return _t("operations.reflect.annotation."+r+"."+i)},s.id="reflect-"+r,s.keys=[_t("operations.reflect.key."+r)],s.title=_t("operations.reflect.title."+r),s.behavior=behaviorOperation(n).which(s),s}function operationMove(n,e){function t(){n.enter(modeMove(n,e))}var r=1===e.length?"single":"multiple",i=utilGetAllNodes(e,n.graph()).map(function(e){return e.loc}),o=utilTotalExtent(e,n.graph());return t.available=function(){return 1<e.length||"node"!==n.entity(e[0]).type},t.disabled=function(){return o.percentContainedIn(n.map().extent())<.8?"too_large":function(){if(n.inIntro())return!1;var t=n.connection();if(t){var e=i.filter(function(e){return!t.isDataLoaded(e)});if(e.length)return e.forEach(function(e){n.loadTileAtLoc(e)}),!0}return!1}()?"not_downloaded":e.some(n.hasHiddenConnections)?"connected_to_hidden":!!e.some(function(e){var t=n.entity(e);return"relation"===t.type&&!t.isComplete(n.graph())})&&"incomplete_relation"},t.tooltip=function(){var e=t.disabled();return _t(e?"operations.move."+e+"."+r:"operations.move.description."+r)},t.annotation=function(){return 1===e.length?_t("operations.move.annotation."+n.graph().geometry(e[0])):_t("operations.move.annotation.multiple")},t.id="move",t.keys=[_t("operations.move.key")],t.title=_t("operations.move.title"),t.behavior=behaviorOperation(n).which(t),t.mouseOnly=!0,t}function modeRotate(a,s){var l,c,u,p,e={id:"rotate",button:"browse"},t=utilKeybinding("rotate"),n=[behaviorEdit(a),operationCircularize(a,s).behavior,operationDelete(a,s).behavior,operationMove(a,s).behavior,operationOrthogonalize(a,s).behavior,operationReflectLong(a,s).behavior,operationReflectShort(a,s).behavior],r=1===s.length?_t("operations.rotate.annotation."+a.graph().geometry(s[0])):_t("operations.rotate.annotation.multiple");function i(){var e,t=a.graph()!==l?a.perform:a.replace,n=a.projection,r=n.transform();u&&r.k===u.k&&r.x===u.x&&r.y===u.y||(e=utilGetAllNodes(s,a.graph()).map(function(e){return n(e.loc)}),p=function(e){var t;{t=1===e.length?e[0]:2===e.length?geoVecInterp(e[0],e[1],.5):2===d3_polygonHull(e).length?geoVecInterp(e[0],e[1],.5):d3_polygonCentroid(d3_polygonHull(e))}return t}(e),c=void 0);var i=a.map().mouse(),o=Math.atan2(i[1]-p[1],i[0]-p[0]);void 0===c&&(c=o),t(actionRotate(s,p,o-c,n)),u=r,c=o,l=a.graph()}function o(){event.stopPropagation(),a.replace(actionNoop(),r),a.enter(modeSelect(a,s))}function d(){a.pop(),a.enter(modeSelect(a,s))}function f(){a.enter(modeBrowse(a))}return e.enter=function(){a.features().forceVisible(s),n.forEach(a.install),a.surface().on("mousemove.rotate",i).on("click.rotate",o),a.history().on("undone.rotate",f),t.on("⎋",d).on("↩",o),select(document).call(t)},e.exit=function(){n.forEach(a.uninstall),a.surface().on("mousemove.rotate",null).on("click.rotate",null),a.history().on("undone.rotate",null),select(document).call(t.unbind),a.features().forceVisible([])},e.selectedIDs=function(){return arguments.length?e:s},e}function operationRotate(n,e){function t(){n.enter(modeRotate(n,e))}var r=1===e.length?"single":"multiple",i=utilGetAllNodes(e,n.graph()),o=i.map(function(e){return e.loc}),a=utilTotalExtent(e,n.graph());return t.available=function(){return 2<=i.length},t.disabled=function(){return a.percentContainedIn(n.map().extent())<.8?"too_large":function(){if(n.inIntro())return!1;var t=n.connection();if(t){var e=o.filter(function(e){return!t.isDataLoaded(e)});if(e.length)return e.forEach(function(e){n.loadTileAtLoc(e)}),!0}return!1}()?"not_downloaded":e.some(n.hasHiddenConnections)?"connected_to_hidden":!!e.some(function(e){var t=n.entity(e);return"relation"===t.type&&!t.isComplete(n.graph())})&&"incomplete_relation"},t.tooltip=function(){var e=t.disabled();return _t(e?"operations.rotate."+e+"."+r:"operations.rotate.description."+r)},t.annotation=function(){return 1===e.length?_t("operations.rotate.annotation."+n.graph().geometry(e[0])):_t("operations.rotate.annotation.multiple")},t.id="rotate",t.keys=[_t("operations.rotate.key")],t.title=_t("operations.rotate.title"),t.behavior=behaviorOperation(n).which(t),t.mouseOnly=!0,t}function modeMove(r,i,e){var o,a,s,n,t={id:"move",button:"browse"},l=utilKeybinding("move"),c=[behaviorEdit(r),operationCircularize(r,i).behavior,operationDelete(r,i).behavior,operationOrthogonalize(r,i).behavior,operationReflectLong(r,i).behavior,operationReflectShort(r,i).behavior,operationRotate(r,i).behavior],u=1===i.length?_t("operations.move.annotation."+r.graph().geometry(i[0])):_t("operations.move.annotation.multiple");function p(e){var t;e=e||[0,0],t=o!==r.graph()?(a={},s=r.map().mouseCoordinates(),r.perform):r.overwrite;var n=geoVecSubtract(geoVecSubtract(r.map().mouse(),r.projection(s)),e);t(actionMove(i,n,r.projection,a)),o=r.graph()}function d(){n&&(window.clearInterval(n),n=null)}function f(){p();var e,t=geoViewportEdge(r.map().mouse(),r.map().dimensions());t?(e=t,n&&window.clearInterval(n),n=window.setInterval(function(){r.map().pan(e),p(e)},50)):d()}function h(){event.stopPropagation(),r.replace(actionNoop(),u),r.enter(modeSelect(r,i)),d()}function g(){if(e){for(;r.graph()!==e;)r.pop();r.enter(modeBrowse(r))}else r.pop(),r.enter(modeSelect(r,i));d()}function m(){r.enter(modeBrowse(r))}return t.enter=function(){s=r.map().mouseCoordinates(),o=null,a={},r.features().forceVisible(i),c.forEach(r.install),r.surface().on("mousemove.move",f).on("click.move",h),r.history().on("undone.move",m),l.on("⎋",g).on("↩",h),select(document).call(l)},t.exit=function(){d(),c.forEach(function(e){r.uninstall(e)}),r.surface().on("mousemove.move",null).on("click.move",null),r.history().on("undone.move",null),select(document).call(l.unbind),r.features().forceVisible([])},t.selectedIDs=function(){return arguments.length?t:i},t}function behaviorPaste(h){function e(){if(h.map().withinEditableZoom()){event.preventDefault();var e=h.graph(),t=h.map().mouse(),n=h.projection;if(geoPointInPolygon(t,geoExtent(n.clipExtent()).polygon())){var r=h.copyIDs();if(r.length){var i=geoExtent(),o=h.copyGraph(),a=[],s=actionCopyEntities(r,o);h.perform(s);var l=s.copies(),c=new Set;for(var u in Object.values(l).forEach(function(e){c.add(e.id)}),l){var p=o.entity(u),d=l[u];i._extend(p.extent(o)),h.graph().parentWays(d).some(function(e){return c.has(e.id)})||a.push(d.id)}var f=geoVecSubtract(t,h.copyLonLat()&&n(h.copyLonLat())||n(i.center()));h.perform(actionMove(a,f,n)),h.enter(modeMove(h,a,e))}}}}function t(){return h.keybinding().on(uiCmd("⌘V"),e),t}return t.off=function(){h.keybinding().off(uiCmd("⌘V"))},t}function behaviorDrag(){var c,t,n,u,r=dispatch("start","move","end"),p=1,d=4,i=null,o="",f="PointerEvent"in window?"pointer":"mouse",a=utilPrefixCSSProperty("UserSelect"),h=function(){var e=selection(),t=e.style(a);return e.style(a,"none"),function(){e.style(a,t)}};function g(t,n){return function(e){e.target=l,customEvent(e,r.apply,r,[e.type,t,n])}}function s(){var o,a,s,l,e;u||(u=event.pointerId||"mouse",c=g(t=this,arguments),o=utilFastMouse(n||t.parentNode),s=o(event),l=!1,e=h(),select(window).on(f+"move.drag",function(){if(u!==(event.pointerId||"mouse"))return;var e=o(event);if(l){s=e,event.stopPropagation(),event.preventDefault();var t=e[0]-s[0],n=e[1]-s[1];c({type:"move",point:[e[0]+a[0],e[1]+a[1]],delta:[t,n]})}else{var r=geoVecLength(s,e),i="pen"===event.pointerType?d:p;if(r<i)return;l=!0,c({type:"start"})}}).on(f+"up.drag pointercancel.drag",function(){if(u!==(event.pointerId||"mouse"))return;u=null,l&&(c({type:"end"}),event.preventDefault());select(window).on(f+"move.drag",null).on(f+"up.drag pointercancel.drag",null),e()},!0),a=i?[(a=i.apply(t,arguments))[0]-s[0],a[1]-s[1]]:[0,0],event.stopPropagation())}function l(e){u=null;var r=utilPrefixDOMProperty("matchesSelector"),t=o?function(){for(var e=event.target;e&&e!==this;e=e.parentNode){var t=e.__data__,n=t instanceof osmNote?t:t&&t.properties&&t.properties.entity;if(n&&e[r](o))return s.call(e,n)}}:s;e.on(f+"down.drag"+o,t)}return l.off=function(e){e.on(f+"down.drag"+o,null)},l.selector=function(e){return arguments.length?(o=e,l):o},l.origin=function(e){return arguments.length?(i=e,l):i},l.cancel=function(){return select(window).on(f+"move.drag",null).on(f+"up.drag pointercancel.drag",null),l},l.target=function(){return arguments.length?(c=g(t=arguments[0],Array.prototype.slice.call(arguments,1)),l):t},l.surface=function(){return arguments.length?(n=arguments[0],l):n},utilRebind(l,r,"on")}function modeDragNode(d){var f,i,u,h,o={id:"drag-node",button:"browse"},a=behaviorHover(d).altDisables(!0).on("hover",d.ui().sidebar.hover),e=behaviorEdit(d),p=[],g=!1,m=!1;function s(){f&&(window.clearInterval(f),f=null)}function y(e,t){var n=e.geometry(d.graph()),r=t.geometry(d.graph());if("vertex"===n&&"vertex"===r){var i=utilArrayIntersection(d.graph().parentWays(e),d.graph().parentWays(t));if(0!==i.length)return i[0].areAdjacent(e.id,t.id)?_t("operations.connect.annotation.from_vertex.to_adjacent_vertex"):_t("operations.connect.annotation.from_vertex.to_sibling_vertex")}return _t("operations.connect.annotation.from_"+n+".to_"+r)}function v(e){return i&&("vertex"!==i.geometry(d.graph())||"vertex"===e.geometry(d.graph())||_mainPresetIndex.allowsVertex(e,d.graph()))}function t(){event.keyCode===utilKeybinding.modifierCodes.alt&&(d.surface().classed("nope")&&d.surface().classed("nope-suppressed",!0),d.surface().classed("nope",!1).classed("nope-disabled",!0))}function n(){event.keyCode===utilKeybinding.modifierCodes.alt&&(d.surface().classed("nope-suppressed")&&d.surface().classed("nope",!0),d.surface().classed("nope-suppressed",!1).classed("nope-disabled",!1))}function _(){var e=event&&event.sourceEvent;if(!e||e.altKey)return{};var t=e.target.__data__;return t&&t.properties&&t.properties.target?t:{}}function l(e,t){t=t||[0,0];var n,r,i,o,a,s=geoVecSubtract(event&&event.point||d.projection(h),t),l=d.projection.invert(s);f||(i=(r=(n=_())&&n.properties&&n.properties.entity)&&r.loc,o=n&&n.properties&&n.properties.nodes,i?v(r)&&(l=i):o&&(a=geoChooseEdge(o,d.map().mouse(),d.projection,b.id))&&(l=a.loc)),d.replace(actionMoveNode(e.id,l));var c=!1;r&&(c=function(e,t,n,r){var i=r.update();{var o,a;n&&(o=osmNode(),a=actionAddMidpoint({loc:n.loc,edge:[t.nodes[n.index-1],t.nodes[n.index]]},o),i=a(i),t=o)}return actionConnect([e.id,t.id]).disabled(i)}(e,r,a,d.graph())),c=c||function(t,n){var e,r,i,o=n.parentWays(t);for(e=0;e<o.length;e++){var a=o[e],s=[],l=null,c=n.parentRelations(a);for(r=0;r<c.length;r++)if(c[r].isMultipolygon()){var u=osmJoinWays(c[r].members,n);for(i=0;i<u.length;i++){if((s=u[i].nodes).find(function(e){return e.id===t.id})&&(l=i,geoHasSelfIntersections(s,t.id)))return"multipolygonMember";u[i].coords=s.map(function(e){return e.loc})}for(i=0;i<u.length;i++)if(i!==l&&geoHasLineIntersections(u[l].nodes,u[i].nodes,t.id))return"multipolygonRing"}if(null===l&&(s=a.nodes.map(function(e){return n.entity(e)})).length&&geoHasSelfIntersections(s,t.id))return a.geometry(n)}return!1}(e,d.graph());var u,p=d.surface().classed("nope");"relation"===c||"restriction"===c?p||d.ui().flash.duration(4e3).text(_t("operations.connect."+c,{relation:_mainPresetIndex.item("type/restriction").name()}))():c?(u="line"===c?"lines":"areas",d.ui().flash.duration(3e3).text(_t("self_intersection.error."+u))()):p&&d.ui().flash.duration(1).text("")(),d.surface().classed("nope-disabled")?d.surface().classed("nope",!1).classed("nope-suppressed",c):d.surface().classed("nope",c).classed("nope-suppressed",!1),h=l}function b(e){var t,n,r,i,o,a,s,l;function c(e,t){return 1===t&&d.pop(),s(e,t)}m||(t="point"===e.geometry(d.graph()),r=(n=_())&&n.properties&&n.properties.nope||d.surface().classed("nope"),i=n&&n.properties&&n.properties.entity,r?d.perform((a=e.id,s=actionMoveNode(a,u),c.transitionable=!0,c)):i&&"way"===i.type?(o=geoChooseEdge(d.graph().childNodes(i),d.map().mouse(),d.projection,e.id),d.replace(actionAddMidpoint({loc:o.loc,edge:[i.nodes[o.index-1],i.nodes[o.index]]},e),y(e,i))):i&&"node"===i.type&&v(i)?d.replace(actionConnect([i.id,e.id]),y(e,i)):g?d.replace(actionNoop(),_t("operations.add.annotation.vertex")):d.replace(actionNoop(),_t("operations.move.annotation."+e.geometry(d.graph()))),t?d.enter(modeSelect(d,[e.id])):(l=p.filter(function(e){return d.graph().hasEntity(e)})).length?d.enter(modeSelect(d,l)):d.enter(modeBrowse(d)))}function r(){c.cancel(),d.enter(modeBrowse(d))}var c=behaviorDrag().selector(".layer-touch.points .target").surface(d.container().select(".main-map").node()).origin(function(e){return d.projection(e.loc)}).on("start",function(e){g="midpoint"===e.type;var t,n,r=d.features().hasHiddenConnections(e,d.graph());if(m=!d.editable()||event.sourceEvent.shiftKey||r)return r&&d.ui().flash.duration(4e3).text(_t("modes.drag_node.connected_to_hidden"))(),c.cancel();g?(t=e,e=osmNode(),d.perform(actionAddMidpoint(t,e)),e=d.entity(e.id),n=d.surface().selectAll("."+e.id),c.target(n.node(),e)):d.perform(actionNoop()),u=(i=e).loc,a.ignoreVertex("vertex"===e.geometry(d.graph())),d.surface().selectAll("."+i.id).classed("active",!0),d.enter(o)}).on("move",function(e){var t,n,r;m||(event.sourceEvent.stopPropagation(),d.surface().classed("nope-disabled",event.sourceEvent.altKey),h=d.projection.invert(event.point),l(e),(t=geoViewportEdge(event.point,d.map().dimensions()))?(n=e,r=t,f&&window.clearInterval(f),f=window.setInterval(function(){d.map().pan(r),l(n,r)},50)):s())}).on("end",b);return o.enter=function(){d.install(a),d.install(e),select(window).on("keydown.dragNode",t).on("keyup.dragNode",n),d.history().on("undone.drag-node",r)},o.exit=function(){d.ui().sidebar.hover.cancel(),d.uninstall(a),d.uninstall(e),select(window).on("keydown.dragNode",null).on("keyup.dragNode",null),d.history().on("undone.drag-node",null),i=null,d.surface().classed("nope",!1).classed("nope-suppressed",!1).classed("nope-disabled",!1).selectAll(".active").classed("active",!1),s()},o.selectedIDs=function(){return arguments.length?o:i?[i.id]:[]},o.activeID=function(){return arguments.length?o:i&&i.id},o.restoreSelectedIDs=function(e){return arguments.length?(p=e,o):p},o.behavior=c,o}function quickselect(e,t,n,r,i){quickselectStep(e,t,n||0,r||e.length-1,i||defaultCompare)}function quickselectStep(e,t,n,r,i){for(;n<r;){var o,a,s,l,c;600<r-n&&(o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1),quickselectStep(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(r,Math.floor(t+(o-a)*l/o+c)),i));var u=e[t],p=n,d=r;for(swap(e,n,t),0<i(e[r],u)&&swap(e,n,r);p<d;){for(swap(e,p,d),p++,d--;i(e[p],u)<0;)p++;for(;0<i(e[d],u);)d--}0===i(e[n],u)?swap(e,n,d):swap(e,++d,r),d<=t&&(n=d+1),t<=d&&(r=d-1)}}function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function defaultCompare(e,t){return e<t?-1:t<e?1:0}uiCmd.display=function(e){if(1!==e.length)return e;var t="mac"===utilDetect().os;return{"⌘":t?"⌘ "+_t("shortcuts.key.cmd"):_t("shortcuts.key.ctrl"),"⇧":t?"⇧ "+_t("shortcuts.key.shift"):_t("shortcuts.key.shift"),"⌥":t?"⌥ "+_t("shortcuts.key.option"):_t("shortcuts.key.alt"),"⌃":t?"⌃ "+_t("shortcuts.key.ctrl"):_t("shortcuts.key.ctrl"),"⌫":t?"⌫ "+_t("shortcuts.key.delete"):_t("shortcuts.key.backspace"),"⌦":t?"⌦ "+_t("shortcuts.key.del"):_t("shortcuts.key.del"),"↖":t?"↖ "+_t("shortcuts.key.pgup"):_t("shortcuts.key.pgup"),"↘":t?"↘ "+_t("shortcuts.key.pgdn"):_t("shortcuts.key.pgdn"),"⇞":t?"⇞ "+_t("shortcuts.key.home"):_t("shortcuts.key.home"),"⇟":t?"⇟ "+_t("shortcuts.key.end"):_t("shortcuts.key.end"),"↵":t?"⏎ "+_t("shortcuts.key.return"):_t("shortcuts.key.enter"),"⎋":t?"⎋ "+_t("shortcuts.key.esc"):_t("shortcuts.key.esc"),"☰":t?"☰ "+_t("shortcuts.key.menu"):_t("shortcuts.key.menu")}[e]||e};var RBush=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function findItem(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function calcBBox(e,t){distBBox(e,0,e.children.length,t,e)}function distBBox(e,t,n,r,i){(i=i||createNode(null)).minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=t;o<n;o++){var a=e.children[o];extend$1(i,e.leaf?r(a):a)}return i}function extend$1(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function compareNodeMinX(e,t){return e.minX-t.minX}function compareNodeMinY(e,t){return e.minY-t.minY}function bboxArea(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function bboxMargin(e){return e.maxX-e.minX+(e.maxY-e.minY)}function enlargedArea(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function intersectionArea(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function contains$1(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function intersects(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function createNode(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(e,t,n,r,i){for(var o,a=[t,n];a.length;){(n=a.pop())-(t=a.pop())<=r||(quickselect(e,o=t+Math.ceil((n-t)/r/2)*r,t,n,i),a.push(t,o,o,n))}}RBush.prototype.all=function(){return this._all(this.data,[])},RBush.prototype.search=function(e){var t=this.data,n=[];if(!intersects(e,t))return n;for(var r=this.toBBox,i=[];t;){for(var o=0;o<t.children.length;o++){var a=t.children[o],s=t.leaf?r(a):a;intersects(e,s)&&(t.leaf?n.push(a):contains$1(e,s)?this._all(a,n):i.push(a))}t=i.pop()}return n},RBush.prototype.collides=function(e){var t=this.data;if(!intersects(e,t))return!1;for(var n=[];t;){for(var r=0;r<t.children.length;r++){var i=t.children[r],o=t.leaf?this.toBBox(i):i;if(intersects(e,o)){if(t.leaf||contains$1(e,o))return!0;n.push(i)}}t=n.pop()}return!1},RBush.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var n,r=this._build(e.slice(),0,e.length-1,0);return this.data.children.length?this.data.height===r.height?this._splitRoot(this.data,r):(this.data.height<r.height&&(n=this.data,this.data=r,r=n),this._insert(r,this.data.height-r.height-1,!0)):this.data=r,this},RBush.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},RBush.prototype.clear=function(){return this.data=createNode([]),this},RBush.prototype.remove=function(e,t){if(!e)return this;for(var n,r,i,o=this.data,a=this.toBBox(e),s=[],l=[];o||s.length;){if(o||(o=s.pop(),r=s[s.length-1],n=l.pop(),i=!0),o.leaf){var c=findItem(e,o.children,t);if(-1!==c)return o.children.splice(c,1),s.push(o),this._condense(s),this}i||o.leaf||!contains$1(o,a)?r?(n++,o=r.children[n],i=!1):o=null:(s.push(o),l.push(n),n=0,o=(r=o).children[0])}return this},RBush.prototype.toBBox=function(e){return e},RBush.prototype.compareMinX=function(e,t){return e.minX-t.minX},RBush.prototype.compareMinY=function(e,t){return e.minY-t.minY},RBush.prototype.toJSON=function(){return this.data},RBush.prototype.fromJSON=function(e){return this.data=e,this},RBush.prototype._all=function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},RBush.prototype._build=function(e,t,n,r){var i,o=n-t+1,a=this._maxEntries;if(o<=a)return calcBBox(i=createNode(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=createNode([])).leaf=!1,i.height=r;var s=Math.ceil(o/a),l=s*Math.ceil(Math.sqrt(a));multiSelect(e,t,n,l,this.compareMinX);for(var c=t;c<=n;c+=l){var u=Math.min(c+l-1,n);multiSelect(e,c,u,s,this.compareMinY);for(var p=c;p<=u;p+=s){var d=Math.min(p+s-1,u);i.children.push(this._build(e,p,d,r-1))}}return calcBBox(i,this.toBBox),i},RBush.prototype._chooseSubtree=function(e,t,n,r){for(;r.push(t),!t.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<t.children.length;s++){var l=t.children[s],c=bboxArea(l),u=enlargedArea(e,l)-c;u<o?(o=u,i=c<i?c:i,a=l):u===o&&c<i&&(i=c,a=l)}t=a||t.children[0]}return t},RBush.prototype._insert=function(e,t,n){var r=n?e:this.toBBox(e),i=[],o=this._chooseSubtree(r,this.data,t,i);for(o.children.push(e),extend$1(o,r);0<=t&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(r,i,t)},RBush.prototype._split=function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=createNode(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,calcBBox(n,this.toBBox),calcBBox(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)},RBush.prototype._splitRoot=function(e,t){this.data=createNode([e,t]),this.data.height=e.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)},RBush.prototype._chooseSplitIndex=function(e,t,n){for(var r,i=1/0,o=1/0,a=t;a<=n-t;a++){var s=distBBox(e,0,a,this.toBBox),l=distBBox(e,a,n,this.toBBox),c=intersectionArea(s,l),u=bboxArea(s)+bboxArea(l);c<i?(i=c,r=a,o=u<o?u:o):c===i&&u<o&&(o=u,r=a)}return r||n-t},RBush.prototype._chooseSplitAxis=function(e,t,n){var r=e.leaf?this.compareMinX:compareNodeMinX,i=e.leaf?this.compareMinY:compareNodeMinY;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},RBush.prototype._allDistMargin=function(e,t,n,r){e.children.sort(r);for(var i=this.toBBox,o=distBBox(e,0,t,i),a=distBBox(e,n-t,n,i),s=bboxMargin(o)+bboxMargin(a),l=t;l<n-t;l++){var c=e.children[l];extend$1(o,e.leaf?i(c):c),s+=bboxMargin(o)}for(var u=n-t-1;t<=u;u--){var p=e.children[u];extend$1(a,e.leaf?i(p):p),s+=bboxMargin(a)}return s},RBush.prototype._adjustParentBBoxes=function(e,t,n){for(var r=n;0<=r;r--)extend$1(t[r],e)},RBush.prototype._condense=function(e){for(var t=e.length-1,n=void 0;0<=t;t--)0===e[t].children.length?0<t?(n=e[t-1].children).splice(n.indexOf(e[t]),1):this.clear():calcBBox(e[t],this.toBBox)};var tiler=utilTiler(),dispatch$1=dispatch("loaded"),_tileZoom=14,_krUrlRoot="https://www.keepright.at",_krData={errorTypes:{},localizeStrings:{}},_cache,_krRuleset=[30,40,50,60,70,90,100,110,120,130,150,160,170,180,190,191,192,193,194,195,196,197,198,200,201,202,203,204,205,206,207,208,210,220,230,231,232,270,280,281,282,283,284,285,290,291,292,293,294,295,296,297,298,300,310,311,312,313,320,350,360,370,380,390,400,401,402,410,411,412,413];function abortRequest(e){e&&e.abort()}function abortUnwantedRequests(e,n){Object.keys(e.inflightTile).forEach(function(t){n.find(function(e){return t===e.id})||(abortRequest(e.inflightTile[t]),delete e.inflightTile[t])})}function encodeIssueRtree(e){return{minX:e.loc[0],minY:e.loc[1],maxX:e.loc[0],maxY:e.loc[1],data:e}}function updateRtree(e,t){_cache.rtree.remove(e,function(e,t){return e.data.id===t.data.id}),t&&_cache.rtree.insert(e)}function tokenReplacements(e){if(e instanceof QAItem){var t=new RegExp(/<\/[a-z][\s\S]*>/),n={},r=_krData.errorTypes[e.whichType];if(!r)return console.log("No Template: ",e.whichType),void console.log("  ",e.description);if(r.regex){var i=new RegExp(r.regex,"i"),o=i.exec(e.description);if(!o)return console.log("Unmatched: ",e.whichType),console.log("  ",e.description),void console.log("  ",i);for(var a=1;a<o.length;a++){var s,l=o[a],c=void 0;(c="IDs"in r?r.IDs[a-1]:"")&&l?l=parseError(l,c):t.test(l)?l="\\"+l+"\\":(s=l.toLowerCase(),_krData.localizeStrings[s]&&(l=_t("QA.keepRight.error_parts."+_krData.localizeStrings[s]))),n["var"+a]=l}return n}}}function parseError(e,t){var r,n,i,o,a,s=e.toLowerCase();switch(_krData.localizeStrings[s]&&(e=_t("QA.keepRight.error_parts."+_krData.localizeStrings[s])),t){case"this":e='<a class="error_object_link">'+e+"</a>";break;case"url":e='<a class="kr_external_link" target="_blank" href="'+(a=e)+'">'+a+"</a>";break;case"n":case"w":case"r":e=l(t+e);break;case"20":o=[],e.split(",").forEach(function(e){var t=l("n"+e.slice(1));o.push(t)}),e=o.join(", ");break;case"211":i=[],e.split(", ").forEach(function(e){var t=l("n"+e.slice(1));i.push(t)}),e=i.join(", ");break;case"231":n=[],e.split("),").forEach(function(e){var t=e.match(/\#(\d+)\((.+)\)?/);null!==t&&2<t.length&&n.push(l("w"+t[1])+" "+_t("QA.keepRight.errorTypes.231.layer",{layer:t[2]}))}),e=n.join(", ");break;case"294":r=[],e.split(",").forEach(function(e){var t='"'+(e=e.split(" "))[0]+'"',n=l(e[1].slice(0,1)+(n=e[2].slice(1)));r.push(t+" "+e[1]+" "+n)}),e=r.join(", ");break;case"370":e=function(e){if(!e)return"";var t=e.match(/\(including the name (\'.+\')\)/);if(t&&t.length)return _t("QA.keepRight.errorTypes.370.including_the_name",{name:t[1]});return""}(e)}return e;function l(e){return'<a class="error_entity_link">'+e+"</a>"}}var serviceKeepRight={title:"keepRight",init:function(){_mainFileFetcher.get("keepRight").then(function(e){return _krData=e}),_cache||this.reset(),this.event=utilRebind(this,dispatch$1,"on")},reset:function(){_cache&&Object.values(_cache.inflightTile).forEach(abortRequest),_cache={data:{},loadedTile:{},inflightTile:{},inflightPost:{},closed:{},rtree:new RBush}},loadIssues:function(e){var v=this,c={format:"geojson",ch:_krRuleset},t=tiler.zoomExtent([_tileZoom,_tileZoom]).getTiles(e);abortUnwantedRequests(_cache,t),t.forEach(function(t){var e,n,r,i,o,a,s,l;_cache.loadedTile[t.id]||_cache.inflightTile[t.id]||(n=(e=t.extent.rectangle())[0],r=e[1],i=e[2],o=e[3],a=Object.assign({},c,{left:n,bottom:o,right:i,top:r}),s=_krUrlRoot+"/export.php?"+utilQsString(a),l=new AbortController,d3_json(s,{signal:(_cache.inflightTile[t.id]=l).signal}).then(function(e){if(delete _cache.inflightTile[t.id],_cache.loadedTile[t.id]=!0,!e||!e.features||!e.features.length)throw new Error("No Data");e.features.forEach(function(e){var t=e.properties,n=t.error_type,r=t.error_id,i=t.comment;void 0===i&&(i=null);var o=t.object_id,a=t.object_type,s=t.schema,l=t.title,c=e.geometry.coordinates,u=e.properties.description;void 0===u&&(u="");var p=_krData.errorTypes[n],d=(10*Math.floor(n/10)).toString(),f=p?n:d,h=_krData.errorTypes[f];switch(f){case"170":u="This feature has a FIXME tag: "+u;break;case"292":case"293":u=u.replace("A turn-","This turn-");break;case"294":case"295":case"296":case"297":case"298":u="This turn-restriction~"+u;break;case"300":u="This highway is missing a maxspeed tag";break;case"411":case"412":case"413":u="This feature~"+u}var g=!1;do{var m=geoExtent(c=geoVecAdd(c,g?[1e-5,0]:[0,1e-5])).bbox(),g=_cache.rtree.search(m).length}while(g);var y=new QAItem(c,v,n,r,{comment:i,description:u,whichType:f,parentIssueType:d,severity:h.severity||"error",objectId:o,objectType:a,schema:s,title:l});y.replacements=tokenReplacements(y),_cache.data[r]=y,_cache.rtree.insert(encodeIssueRtree(y))}),dispatch$1.call("loaded")}).catch(function(){delete _cache.inflightTile[t.id],_cache.loadedTile[t.id]=!0}))})},postUpdate:function(e,t){var n=this;if(_cache.inflightPost[e.id])return t({message:"Error update already inflight",status:-2},e);var r={schema:e.schema,id:e.id};e.newStatus&&(r.st=e.newStatus),void 0!==e.newComment&&(r.co=e.newComment);var i=_krUrlRoot+"/comment.php?"+utilQsString(r),o=new AbortController;d3_json(i,{signal:(_cache.inflightPost[e.id]=o).signal}).finally(function(){delete _cache.inflightPost[e.id],"ignore"===e.newStatus?n.removeItem(e):"ignore_t"===e.newStatus?(n.removeItem(e),_cache.closed[e.schema+":"+e.id]=!0):e=n.replaceItem(e.update({comment:e.newComment,newComment:void 0,newState:void 0})),t&&t(null,e)})},getItems:function(e){var t=e.clipExtent(),n=[t[0][0],t[1][1]],r=[t[1][0],t[0][1]],i=geoExtent(e.invert(n),e.invert(r)).bbox();return _cache.rtree.search(i).map(function(e){return e.data})},getError:function(e){return _cache.data[e]},replaceItem:function(e){if(e instanceof QAItem&&e.id)return updateRtree(encodeIssueRtree(_cache.data[e.id]=e),!0),e},removeItem:function(e){e instanceof QAItem&&e.id&&(delete _cache.data[e.id],updateRtree(encodeIssueRtree(e),!1))},issueURL:function(e){return _krUrlRoot+"/report_map.php?schema="+e.schema+"&error="+e.id},getClosedIDs:function(){return Object.keys(_cache.closed).sort()}},tiler$1=utilTiler(),dispatch$2=dispatch("loaded"),_tileZoom$1=14,_impOsmUrls={ow:"https://grab.community.improve-osm.org/directionOfFlowService",mr:"https://grab.community.improve-osm.org/missingGeoService",tr:"https://grab.community.improve-osm.org/turnRestrictionService"},_impOsmData={icons:{}},_cache$1;function abortRequest$1(e){Object.values(e).forEach(function(e){e&&e.abort()})}function abortUnwantedRequests$1(e,n){Object.keys(e.inflightTile).forEach(function(t){n.find(function(e){return t===e.id})||(abortRequest$1(e.inflightTile[t]),delete e.inflightTile[t])})}function encodeIssueRtree$1(e){return{minX:e.loc[0],minY:e.loc[1],maxX:e.loc[0],maxY:e.loc[1],data:e}}function updateRtree$1(e,t){_cache$1.rtree.remove(e,function(e,t){return e.data.id===t.data.id}),t&&_cache$1.rtree.insert(e)}function linkErrorObject(e){return'<a class="error_object_link">'+e+"</a>"}function linkEntity(e){return'<a class="error_entity_link">'+e+"</a>"}function pointAverage(e){return e.length?geoVecScale(e.reduce(function(e,t){return geoVecAdd(e,[t.lon,t.lat])},[0,0]),1/e.length):[0,0]}function relativeBearing(e,t){var n=Math.atan2(t.lon-e.lon,t.lat-e.lat);return n<0&&(n+=2*Math.PI),180*n/Math.PI}function cardinalDirection(e){var t=45*Math.round(e/45);return _t("QA.improveOSM.directions."+{0:"north",45:"northeast",90:"east",135:"southeast",180:"south",225:"southwest",270:"west",315:"northwest",360:"north"}[t])}function preventCoincident(e,t){var n=!1;do{var r=geoExtent(e=geoVecAdd(e,n?[1e-5,0]:t?[0,1e-5]:[0,0])).bbox(),n=_cache$1.rtree.search(r).length}while(n);return e}var serviceImproveOSM={title:"improveOSM",init:function(){_mainFileFetcher.get("qa_data").then(function(e){return _impOsmData=e.improveOSM}),_cache$1||this.reset(),this.event=utilRebind(this,dispatch$2,"on")},reset:function(){_cache$1&&Object.values(_cache$1.inflightTile).forEach(abortRequest$1),_cache$1={data:{},loadedTile:{},inflightTile:{},inflightPost:{},closed:{},rtree:new RBush}},loadIssues:function(e){var m=this,l={client:"iD",status:"OPEN",zoom:"19"},t=tiler$1.zoomExtent([_tileZoom$1,_tileZoom$1]).getTiles(e);abortUnwantedRequests$1(_cache$1,t),t.forEach(function(r){var e,t,n,i,o,a,s;_cache$1.loadedTile[r.id]||_cache$1.inflightTile[r.id]||(t=(e=r.extent.rectangle())[0],n=e[1],i=e[2],o=e[3],a=Object.assign({},l,{east:t,south:o,west:i,north:n}),s={},Object.keys(_impOsmUrls).forEach(function(g){var e=Object.assign({},a,"mr"===g?{type:"PARKING,ROAD,BOTH,PATH"}:{confidenceLevel:"C1"}),t=_impOsmUrls[g]+"/search?"+utilQsString(e),n=new AbortController;d3_json(t,{signal:(s[g]=n).signal}).then(function(e){delete _cache$1.inflightTile[r.id][g],Object.keys(_cache$1.inflightTile[r.id]).length||(delete _cache$1.inflightTile[r.id],_cache$1.loadedTile[r.id]=!0),e.roadSegments&&e.roadSegments.forEach(function(e){var t=e.points,n=e.wayId,r=e.fromNodeId,i=e.toNodeId,o=""+n+r+i,a=t.length/2,s=a%1==0?pointAverage([t[a-1],t[a]]):[(a=t[Math.floor(a)]).lon,a.lat];s=preventCoincident(s,!1);var l=new QAItem(s,m,g,o,{issueKey:g,identifier:{wayId:n,fromNodeId:r,toNodeId:i},objectId:n,objectType:"way"});l.replacements={percentage:e.percentOfTrips,num_trips:e.numberOfTrips,highway:linkErrorObject(_t("QA.keepRight.error_parts.highway")),from_node:linkEntity("n"+e.fromNodeId),to_node:linkEntity("n"+e.toNodeId)},_cache$1.data[l.id]=l,_cache$1.rtree.insert(encodeIssueRtree$1(l))}),e.tiles&&e.tiles.forEach(function(e){var t=e.type,n=e.x,r=e.y,i=e.numberOfTrips,o=t.toLowerCase(),a=""+o+n+r+i,s=preventCoincident(s=pointAverage(e.points),!1),l=new QAItem(s,m,g+"-"+o,a,{issueKey:g,identifier:{x:n,y:r}});l.replacements={num_trips:i,geometry_type:_t("QA.improveOSM.geometry_types."+o)},-1===i&&(l.desc=_t("QA.improveOSM.error_types.mr.description_alt",l.replacements)),_cache$1.data[l.id]=l,_cache$1.rtree.insert(encodeIssueRtree$1(l))}),e.entities&&e.entities.forEach(function(e){var t=e.point,n=e.id,r=e.segments,i=e.numberOfPasses,o=e.turnType,a=""+n.replace(/[,:+#]/g,"_"),s=preventCoincident([t.lon,t.lat],!0),l=n.split(","),c=l[0],u=l[3],p=l[2].split(":")[1],d=new QAItem(s,m,g,a,{issueKey:g,identifier:n,objectId:u,objectType:"node"}),f=r[0].points,h=cardinalDirection(relativeBearing(f[0],f[1]));d.replacements={num_passed:i,num_trips:r[0].numberOfTrips,turn_restriction:o.toLowerCase(),from_way:linkEntity("w"+c),to_way:linkEntity("w"+p),travel_direction:h,junction:linkErrorObject(_t("QA.keepRight.error_parts.this_node"))},_cache$1.data[d.id]=d,_cache$1.rtree.insert(encodeIssueRtree$1(d)),dispatch$2.call("loaded")})}).catch(function(){delete _cache$1.inflightTile[r.id][g],Object.keys(_cache$1.inflightTile[r.id]).length||(delete _cache$1.inflightTile[r.id],_cache$1.loadedTile[r.id]=!0)})}),_cache$1.inflightTile[r.id]=s)})},getComments:function(t){var n=this;if(t.comments)return Promise.resolve(t);var e=t.issueKey,r={};"ow"===e?r=t.identifier:"mr"===e?(r.tileX=t.identifier.x,r.tileY=t.identifier.y):"tr"===e&&(r.targetId=t.identifier);return d3_json(_impOsmUrls[e]+"/retrieveComments?"+utilQsString(r)).then(function(e){t.comments=e.comments?e.comments.reverse():[],n.replaceItem(t)}).then(function(){return t})},postUpdate:function(l,c){if(!serviceOsm.authenticated())return c({message:"Not Authenticated",status:-3},l);if(_cache$1.inflightPost[l.id])return c({message:"Error update already inflight",status:-2},l);serviceOsm.userDetails(function(e,t){var n=this;if(e)return c(e,l);var r=l.issueKey,i=_impOsmUrls[r]+"/comment",o={username:t.display_name,targetIds:[l.identifier]};l.newStatus&&(o.status=l.newStatus,o.text="status changed");l.newComment&&(o.text=l.newComment);var a=new AbortController,s={method:"POST",signal:(_cache$1.inflightPost[l.id]=a).signal,body:JSON.stringify(o)};d3_json(i,s).then(function(){var e,t;delete _cache$1.inflightPost[l.id],l.newStatus?(n.removeItem(l),"SOLVED"===l.newStatus&&(l.issueKey in _cache$1.closed||(_cache$1.closed[l.issueKey]=0),_cache$1.closed[l.issueKey]+=1)):(e=new Date,(t=l.comments?l.comments:[]).push({username:o.username,text:o.text,timestamp:e.getTime()/1e3}),n.replaceItem(l.update({comments:t,newComment:void 0}))),c&&c(null,l)}).catch(function(e){delete _cache$1.inflightPost[l.id],c&&c(e.message)})}.bind(this))},getItems:function(e){var t=e.clipExtent(),n=[t[0][0],t[1][1]],r=[t[1][0],t[0][1]],i=geoExtent(e.invert(n),e.invert(r)).bbox();return _cache$1.rtree.search(i).map(function(e){return e.data})},getError:function(e){return _cache$1.data[e]},getIcon:function(e){return _impOsmData.icons[e]},replaceItem:function(e){if(e instanceof QAItem&&e.id)return updateRtree$1(encodeIssueRtree$1(_cache$1.data[e.id]=e),!0),e},removeItem:function(e){e instanceof QAItem&&e.id&&(delete _cache$1.data[e.id],updateRtree$1(encodeIssueRtree$1(e),!1))},getClosedCounts:function(){return _cache$1.closed}},defaults=createCommonjsModule(function(t){function e(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,xhtml:!1}}t.exports={defaults:e(),getDefaults:e,changeDefaults:function(e){t.exports.defaults=e}}}),escapeTest=/[&<>"']/,escapeReplace=/[&<>"']/g,escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g,escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=function(e){return escapeReplacements[e]};function escape$1(e,t){if(t){if(escapeTest.test(e))return e.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(e))return e.replace(escapeReplaceNoEncode,getEscapeReplacement);return e}var unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function unescape$1(e){return e.replace(unescapeTest,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}var caret=/(^|[^\[])\^/g;function edit(n,e){n=n.source||n,e=e||"";var r={replace:function(e,t){return t=(t=t.source||t).replace(caret,"$1"),n=n.replace(e,t),r},getRegex:function(){return new RegExp(n,e)}};return r}var nonWordAndColonTest=/[^\w:]/g,originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(e,t,n){if(e){var r;try{r=decodeURIComponent(unescape$1(n)).replace(nonWordAndColonTest,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!originIndependentUrl.test(n)&&(n=resolveUrl(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}var baseUrls={},justDomain=/^[^:]+:\/*[^/]*$/,protocol=/^([^:]+:)[\s\S]*$/,domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(e,t){baseUrls[" "+e]||(justDomain.test(e)?baseUrls[" "+e]=e+"/":baseUrls[" "+e]=rtrim(e,"/",!0));var n=-1===(e=baseUrls[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(protocol,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(domain,"$1")+t:e+t}var noopTest={exec:function(){}};function merge$1(e){for(var t,n,r=arguments,i=1;i<arguments.length;i++)for(n in t=r[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function splitCells(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var r=!1,i=t;0<=--i&&"\\"===n[i];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function rtrim(e,t,n){var r=e.length;if(0===r)return"";for(var i=0;i<r;){var o=e.charAt(r-i-1);if(o!==t||n){if(o===t||!n)break;i++}else i++}return e.substr(0,r-i)}function findClosingBracket(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,r=0,i=0;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&--r<0)return i;return-1}function checkSanitizeDeprecation(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}var helpers={escape:escape$1,unescape:unescape$1,edit:edit,cleanUrl:cleanUrl,resolveUrl:resolveUrl,noopTest:noopTest,merge:merge$1,splitCells:splitCells,rtrim:rtrim,findClosingBracket:findClosingBracket,checkSanitizeDeprecation:checkSanitizeDeprecation},defaults$1=defaults.defaults,rtrim$1=helpers.rtrim,splitCells$1=helpers.splitCells,escape$2=helpers.escape,findClosingBracket$1=helpers.findClosingBracket;function outputLink(e,t,n){var r=t.href,i=t.title?escape$2(t.title):null;return"!"!==e[0].charAt(0)?{type:"link",raw:n,href:r,title:i,text:e[1]}:{type:"image",raw:n,text:escape$2(e[1]),href:r,title:i}}var Tokenizer_1=function(){function e(e){this.options=e||defaults$1}return e.prototype.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return 1<t[0].length?{type:"space",raw:t[0]}:{raw:"\n"}},e.prototype.code=function(e,t){var n=this.rules.block.code.exec(e);if(n){var r=t[t.length-1];if(r&&"paragraph"===r.type)return t.pop(),r.text+="\n"+n[0].trimRight(),r.raw+="\n"+n[0],r;var i=n[0].replace(/^ {4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:rtrim$1(i,"\n")}}},e.prototype.fences=function(e){var t=this.rules.block.fences.exec(e);if(t)return{type:"code",raw:t[0],lang:t[2]?t[2].trim():t[2],text:t[3]||""}},e.prototype.heading=function(e){var t=this.rules.block.heading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[1].length,text:t[2]}},e.prototype.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var n={type:"table",header:splitCells$1(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(n.header.length===n.align.length){for(var r=n.align.length,i=0;i<r;i++)/^ *-+: *$/.test(n.align[i])?n.align[i]="right":/^ *:-+: *$/.test(n.align[i])?n.align[i]="center":/^ *:-+ *$/.test(n.align[i])?n.align[i]="left":n.align[i]=null;for(r=n.cells.length,i=0;i<r;i++)n.cells[i]=splitCells$1(n.cells[i],n.header.length);return n}}},e.prototype.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},e.prototype.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:n}}},e.prototype.list=function(e){var t=this.rules.block.list.exec(e);if(t){for(var n,r,i,o,a,s,l,c=t[0],u=t[2],p=1<u.length,d={type:"list",raw:c,ordered:p,start:p?+u:"",loose:!1,items:[]},f=t[0].match(this.rules.block.item),h=!1,g=f.length,m=0;m<g;m++)r=(c=n=f[m]).length,~(n=n.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(r-=n.length,n=this.options.pedantic?n.replace(/^ {1,4}/gm,""):n.replace(new RegExp("^ {1,"+r+"}","gm"),"")),m!==g-1&&(i=this.rules.block.bullet.exec(f[m+1])[0],(1<u.length?1===i.length:1<i.length||this.options.smartLists&&i!==u)&&(o=f.slice(m+1).join("\n"),d.raw=d.raw.substring(0,d.raw.length-o.length),m=g-1)),a=h||/\n\n(?!\s*$)/.test(n),m!==g-1&&(h="\n"===n.charAt(n.length-1),a=a||h),a&&(d.loose=!0),l=void 0,(s=/^\[[ xX]\] /.test(n))&&(l=" "!==n[1],n=n.replace(/^\[[ xX]\] +/,"")),d.items.push({raw:c,task:s,checked:l,loose:a,text:n});return d}},e.prototype.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):escape$2(t[0]):t[0]}},e.prototype.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},e.prototype.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:splitCells$1(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];for(var r=n.align.length,i=0;i<r;i++)/^ *-+: *$/.test(n.align[i])?n.align[i]="right":/^ *:-+: *$/.test(n.align[i])?n.align[i]="center":/^ *:-+ *$/.test(n.align[i])?n.align[i]="left":n.align[i]=null;for(r=n.cells.length,i=0;i<r;i++)n.cells[i]=splitCells$1(n.cells[i].replace(/^ *\| *| *\| *$/g,""),n.header.length);return n}}},e.prototype.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}},e.prototype.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}},e.prototype.text=function(e){var t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0]}},e.prototype.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:escape$2(t[1])}},e.prototype.tag=function(e,t,n){var r=this.rules.inline.tag.exec(e);if(r)return!t&&/^<a /i.test(r[0])?t=!0:t&&/^<\/a>/i.test(r[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):escape$2(r[0]):r[0]}},e.prototype.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n,r=findClosingBracket$1(t[2],"()");-1<r&&(n=(0===t[0].indexOf("!")?5:4)+t[1].length+r,t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,n).trim(),t[3]="");var i,o=t[2],a="";return a=this.options.pedantic?(i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o),i?(o=i[1],i[3]):""):t[3]?t[3].slice(1,-1):"",outputLink(t,{href:(o=o.trim().replace(/^<([\s\S]*)>$/,"$1"))?o.replace(this.rules.inline._escapes,"$1"):o,title:a?a.replace(this.rules.inline._escapes,"$1"):a},t[0])}},e.prototype.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var r=(n[2]||n[1]).replace(/\s+/g," ");if((r=t[r.toLowerCase()])&&r.href)return outputLink(n,r,n[0]);var i=n[0].charAt(0);return{type:"text",raw:i,text:i}}},e.prototype.strong=function(e){var t=this.rules.inline.strong.exec(e);if(t)return{type:"strong",raw:t[0],text:t[4]||t[3]||t[2]||t[1]}},e.prototype.em=function(e){var t=this.rules.inline.em.exec(e);if(t)return{type:"em",raw:t[0],text:t[6]||t[5]||t[4]||t[3]||t[2]||t[1]}},e.prototype.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t)return{type:"codespan",raw:t[0],text:escape$2(t[2].trim(),!0)}},e.prototype.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},e.prototype.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[1]}},e.prototype.autolink=function(e,t){var n=this.rules.inline.autolink.exec(e);if(n){var r,i="@"===n[2]?"mailto:"+(r=escape$2(this.options.mangle?t(n[1]):n[1])):r=escape$2(n[1]);return{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}},e.prototype.url=function(e,t){var n,r,i,o;if(n=this.rules.inline.url.exec(e)){if("@"===n[2])i="mailto:"+(r=escape$2(this.options.mangle?t(n[0]):n[0]));else{for(;o=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0],o!==n[0];);r=escape$2(n[0]),i="www."===n[1]?"http://"+r:r}return{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}},e.prototype.inlineText=function(e,t,n){var r=this.rules.inline.text.exec(e);if(r){var i=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):escape$2(r[0]):r[0]:escape$2(this.options.smartypants?n(r[0]):r[0]);return{type:"text",raw:r[0],text:i}}},e}(),noopTest$1=helpers.noopTest,edit$1=helpers.edit,merge$2=helpers.merge,block={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:noopTest$1,table:noopTest$1,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};block.def=edit$1(block.def).replace("label",block._label).replace("title",block._title).getRegex(),block.bullet=/(?:[*+-]|\d{1,9}\.)/,block.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,block.item=edit$1(block.item,"gm").replace(/bull/g,block.bullet).getRegex(),block.list=edit$1(block.list).replace(/bull/g,block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block.def.source+")").getRegex(),block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",block._comment=/<!--(?!-?>)[\s\S]*?-->/,block.html=edit$1(block.html,"i").replace("comment",block._comment).replace("tag",block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),block.paragraph=edit$1(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",block._tag).getRegex(),block.blockquote=edit$1(block.blockquote).replace("paragraph",block.paragraph).getRegex(),block.normal=merge$2({},block),block.gfm=merge$2({},block.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),block.gfm.nptable=edit$1(block.gfm.nptable).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",block._tag).getRegex(),block.gfm.table=edit$1(block.gfm.table).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",block._tag).getRegex(),block.pedantic=merge$2({},block.normal,{html:edit$1("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:noopTest$1,paragraph:edit$1(block.normal._paragraph).replace("hr",block.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest$1,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^_([^\s_<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s*<\[])\*(?!\*)|^\*([^\s<"][\s\S]*?[^\s\[\*])\*(?![\]`punctuation])|^\*([^\s*"<\[][\s\S]*[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest$1,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+\\-./:;<=>?@\\[^_{|}~"};inline.em=edit$1(inline.em).replace(/punctuation/g,inline._punctuation).getRegex(),inline._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,inline.autolink=edit$1(inline.autolink).replace("scheme",inline._scheme).replace("email",inline._email).getRegex(),inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,inline.tag=edit$1(inline.tag).replace("comment",block._comment).replace("attribute",inline._attribute).getRegex(),inline._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,inline._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,inline.link=edit$1(inline.link).replace("label",inline._label).replace("href",inline._href).replace("title",inline._title).getRegex(),inline.reflink=edit$1(inline.reflink).replace("label",inline._label).getRegex(),inline.normal=merge$2({},inline),inline.pedantic=merge$2({},inline.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:edit$1(/^!?\[(label)\]\((.*?)\)/).replace("label",inline._label).getRegex(),reflink:edit$1(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline._label).getRegex()}),inline.gfm=merge$2({},inline.normal,{escape:edit$1(inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),inline.gfm.url=edit$1(inline.gfm.url,"i").replace("email",inline.gfm._extended_email).getRegex(),inline.breaks=merge$2({},inline.gfm,{br:edit$1(inline.br).replace("{2,}","*").getRegex(),text:edit$1(inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var rules={block:block,inline:inline},defaults$2=defaults.defaults,block$1=rules.block,inline$1=rules.inline;function smartypants(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function mangle(e){for(var t,n="",r=e.length,i=0;i<r;i++)t=e.charCodeAt(i),.5<Math.random()&&(t="x"+t.toString(16)),n+="&#"+t+";";return n}var Lexer_1=function(){function n(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||defaults$2,this.options.tokenizer=this.options.tokenizer||new Tokenizer_1,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var t={block:block$1.normal,inline:inline$1.normal};this.options.pedantic?(t.block=block$1.pedantic,t.inline=inline$1.pedantic):this.options.gfm&&(t.block=block$1.gfm,this.options.breaks?t.inline=inline$1.breaks:t.inline=inline$1.gfm),this.tokenizer.rules=t}var e={rules:{configurable:!0}};return e.rules.get=function(){return{block:block$1,inline:inline$1}},n.lex=function(e,t){return new n(t).lex(e)},n.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},n.prototype.blockTokens=function(e,t,n){var r,i,o;for(void 0===t&&(t=[]),void 0===n&&(n=!0),e=e.replace(/^ +$/gm,"");e;)if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),r.type&&t.push(r);else if(r=this.tokenizer.code(e,t))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.nptable(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),t.push(r);else if(r=this.tokenizer.list(e)){for(e=e.substring(r.raw.length),o=r.items.length,i=0;i<o;i++)r.items[i].tokens=this.blockTokens(r.items[i].text,[],!1);t.push(r)}else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.def(e)))e=e.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.paragraph(e)))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.text(e))e=e.substring(r.raw.length),t.push(r);else if(e){var a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}return t},n.prototype.inline=function(e){for(var t,n,r,i,o,a=e.length,s=0;s<a;s++)switch((o=e[s]).type){case"paragraph":case"text":case"heading":o.tokens=[],this.inlineTokens(o.text,o.tokens);break;case"table":for(o.tokens={header:[],cells:[]},r=o.header.length,t=0;t<r;t++)o.tokens.header[t]=[],this.inlineTokens(o.header[t],o.tokens.header[t]);for(r=o.cells.length,t=0;t<r;t++)for(i=o.cells[t],o.tokens.cells[t]=[],n=0;n<i.length;n++)o.tokens.cells[t][n]=[],this.inlineTokens(i[n],o.tokens.cells[t][n]);break;case"blockquote":this.inline(o.tokens);break;case"list":for(r=o.items.length,t=0;t<r;t++)this.inline(o.items[t].tokens)}return e},n.prototype.inlineTokens=function(e,t,n,r){var i;for(void 0===t&&(t=[]),void 0===n&&(n=!1),void 0===r&&(r=!1);e;)if(i=this.tokenizer.escape(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.tag(e,n,r))e=e.substring(i.raw.length),n=i.inLink,r=i.inRawBlock,t.push(i);else if(i=this.tokenizer.link(e))e=e.substring(i.raw.length),"link"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,r)),t.push(i);else if(i=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(i.raw.length),"link"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,r)),t.push(i);else if(i=this.tokenizer.strong(e))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),t.push(i);else if(i=this.tokenizer.em(e))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),t.push(i);else if(i=this.tokenizer.codespan(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.br(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.del(e))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),t.push(i);else if(i=this.tokenizer.autolink(e,mangle))e=e.substring(i.raw.length),t.push(i);else if(n||!(i=this.tokenizer.url(e,mangle))){if(i=this.tokenizer.inlineText(e,r,smartypants))e=e.substring(i.raw.length),t.push(i);else if(e){var o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}throw new Error(o)}}else e=e.substring(i.raw.length),t.push(i);return t},Object.defineProperties(n,e),n}(),defaults$3=defaults.defaults,cleanUrl$1=helpers.cleanUrl,escape$3=helpers.escape,Renderer_1=function(){function e(e){this.options=e||defaults$3}return e.prototype.code=function(e,t,n){var r,i=(t||"").match(/\S*/)[0];return!this.options.highlight||null!=(r=this.options.highlight(e,i))&&r!==e&&(n=!0,e=r),i?'<pre><code class="'+this.options.langPrefix+escape$3(i,!0)+'">'+(n?e:escape$3(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:escape$3(e,!0))+"</code></pre>"},e.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},e.prototype.html=function(e){return e},e.prototype.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},e.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},e.prototype.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},e.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},e.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},e.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},e.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n"+(t=t&&"<tbody>"+t+"</tbody>")+"</table>\n"},e.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},e.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},e.prototype.strong=function(e){return"<strong>"+e+"</strong>"},e.prototype.em=function(e){return"<em>"+e+"</em>"},e.prototype.codespan=function(e){return"<code>"+e+"</code>"},e.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},e.prototype.del=function(e){return"<del>"+e+"</del>"},e.prototype.link=function(e,t,n){if(null===(e=cleanUrl$1(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href="'+escape$3(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},e.prototype.image=function(e,t,n){if(null===(e=cleanUrl$1(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},e.prototype.text=function(e){return e},e}(),TextRenderer_1=function(){function e(){}return e.prototype.strong=function(e){return e},e.prototype.em=function(e){return e},e.prototype.codespan=function(e){return e},e.prototype.del=function(e){return e},e.prototype.html=function(e){return e},e.prototype.text=function(e){return e},e.prototype.link=function(e,t,n){return""+n},e.prototype.image=function(e,t,n){return""+n},e.prototype.br=function(){return""},e}(),Slugger_1=function(){function e(){this.seen={}}return e.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t))for(var n=t;this.seen[n]++,t=n+"-"+this.seen[n],this.seen.hasOwnProperty(t););return this.seen[t]=0,t},e}(),defaults$4=defaults.defaults,unescape$2=helpers.unescape,Parser_1=function(){function n(e){this.options=e||defaults$4,this.options.renderer=this.options.renderer||new Renderer_1,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new TextRenderer_1,this.slugger=new Slugger_1}return n.parse=function(e,t){return new n(t).parse(e)},n.prototype.parse=function(e,t){void 0===t&&(t=!0);for(var n,r,i,o,a,s,l,c,u,p,d,f,h,g,m,y,v,_="",b=e.length,w=0;w<b;w++)switch((u=e[w]).type){case"space":continue;case"hr":_+=this.renderer.hr();continue;case"heading":_+=this.renderer.heading(this.parseInline(u.tokens),u.depth,unescape$2(this.parseInline(u.tokens,this.textRenderer)),this.slugger);continue;case"code":_+=this.renderer.code(u.text,u.lang,u.escaped);continue;case"table":for(s=l="",i=u.header.length,n=0;n<i;n++)s+=this.renderer.tablecell(this.parseInline(u.tokens.header[n]),{header:!0,align:u.align[n]});for(l+=this.renderer.tablerow(s),c="",i=u.cells.length,n=0;n<i;n++){for(s="",o=(a=u.tokens.cells[n]).length,r=0;r<o;r++)s+=this.renderer.tablecell(this.parseInline(a[r]),{header:!1,align:u.align[r]});c+=this.renderer.tablerow(s)}_+=this.renderer.table(l,c);continue;case"blockquote":c=this.parse(u.tokens),_+=this.renderer.blockquote(c);continue;case"list":for(p=u.ordered,d=u.start,f=u.loose,i=u.items.length,c="",n=0;n<i;n++)m=(g=u.items[n]).checked,y=g.task,h="",g.task&&(v=this.renderer.checkbox(m),f?"text"===g.tokens[0].type?(g.tokens[0].text=v+" "+g.tokens[0].text,g.tokens[0].tokens&&0<g.tokens[0].tokens.length&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=v+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:v}):h+=v),h+=this.parse(g.tokens,f),c+=this.renderer.listitem(h,y,m);_+=this.renderer.list(c,p,d);continue;case"html":_+=this.renderer.html(u.text);continue;case"paragraph":_+=this.renderer.paragraph(this.parseInline(u.tokens));continue;case"text":for(c=u.tokens?this.parseInline(u.tokens):u.text;w+1<b&&"text"===e[w+1].type;)c+="\n"+((u=e[++w]).tokens?this.parseInline(u.tokens):u.text);_+=t?this.renderer.paragraph(c):c;continue;default:var x='Token with "'+u.type+'" type was not found.';if(this.options.silent)return void console.error(x);throw new Error(x)}return _},n.prototype.parseInline=function(e,t){t=t||this.renderer;for(var n,r="",i=e.length,o=0;o<i;o++)switch((n=e[o]).type){case"escape":r+=t.text(n.text);break;case"html":r+=t.html(n.text);break;case"link":r+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break;case"image":r+=t.image(n.href,n.title,n.text);break;case"strong":r+=t.strong(this.parseInline(n.tokens,t));break;case"em":r+=t.em(this.parseInline(n.tokens,t));break;case"codespan":r+=t.codespan(n.text);break;case"br":r+=t.br();break;case"del":r+=t.del(this.parseInline(n.tokens,t));break;case"text":r+=t.text(n.text);break;default:var a='Token with "'+n.type+'" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}return r},n}(),merge$3=helpers.merge,checkSanitizeDeprecation$1=helpers.checkSanitizeDeprecation,escape$4=helpers.escape,getDefaults=defaults.getDefaults,changeDefaults=defaults.changeDefaults,defaults$5=defaults.defaults;function marked(e,n,r){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(r||"function"==typeof n){r||(r=n,n=null),n=merge$3({},marked.defaults,n||{}),checkSanitizeDeprecation$1(n);var i,o,a=n.highlight,t=0;try{i=Lexer_1.lex(e,n)}catch(e){return r(e)}o=i.length;function s(t){if(t)return n.highlight=a,r(t);var e;try{e=Parser_1.parse(i,n)}catch(e){t=e}return n.highlight=a,t?r(t):r(null,e)}if(!a||a.length<3)return s();if(delete n.highlight,!o)return s();for(;t<i.length;t++)!function(n){"code"!==n.type?--o||s():a(n.text,n.lang,function(e,t){return e?s(e):null==t||t===n.text?--o||s():(n.text=t,n.escaped=!0,void(--o||s()))})}(i[t])}else try{return n=merge$3({},marked.defaults,n||{}),checkSanitizeDeprecation$1(n),Parser_1.parse(Lexer_1.lex(e,n),n)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(n||marked.defaults).silent)return"<p>An error occurred:</p><pre>"+escape$4(e.message+"",!0)+"</pre>";throw e}}marked.options=marked.setOptions=function(e){return merge$3(marked.defaults,e),changeDefaults(marked.defaults),marked},marked.getDefaults=getDefaults,marked.defaults=defaults$5,marked.use=function(o){var e=merge$3({},o);if(o.renderer){var a=marked.defaults.renderer||new Renderer_1;for(var t in o.renderer)!function(r){var i=a[r];a[r]=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=o.renderer[r].apply(a,e);return!1===n&&(n=i.apply(a,e)),n}}(t);e.renderer=a}if(o.tokenizer){var i=marked.defaults.tokenizer||new Tokenizer_1;for(var s in o.tokenizer)!function(){var r=i[s];i[s]=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=o.tokenizer[s].apply(i,e);return!1===n&&(n=r.apply(i,e)),n}}();e.tokenizer=i}marked.setOptions(e)},marked.Parser=Parser_1,marked.parser=Parser_1.parse,marked.Renderer=Renderer_1,marked.TextRenderer=TextRenderer_1,marked.Lexer=Lexer_1,marked.lexer=Lexer_1.lex,marked.Tokenizer=Tokenizer_1,marked.Slugger=Slugger_1,marked.parse=marked;var marked_1=marked,tiler$2=utilTiler(),dispatch$3=dispatch("loaded"),_tileZoom$2=14,_osmoseUrlRoot="https://osmose.openstreetmap.fr/api/0.3",_osmoseData={icons:{},items:[]},_cache$2;function abortRequest$2(e){e&&e.abort()}function abortUnwantedRequests$2(e,n){Object.keys(e.inflightTile).forEach(function(t){n.find(function(e){return t===e.id})||(abortRequest$2(e.inflightTile[t]),delete e.inflightTile[t])})}function encodeIssueRtree$2(e){return{minX:e.loc[0],minY:e.loc[1],maxX:e.loc[0],maxY:e.loc[1],data:e}}function updateRtree$2(e,t){_cache$2.rtree.remove(e,function(e,t){return e.data.id===t.data.id}),t&&_cache$2.rtree.insert(e)}function preventCoincident$1(e){var t=!1;do{var n=geoExtent(e=geoVecAdd(e,t?[1e-5,0]:[0,1e-5])).bbox(),t=_cache$2.rtree.search(n).length}while(t);return e}var serviceOsmose={title:"osmose",init:function(){_mainFileFetcher.get("qa_data").then(function(e){(_osmoseData=e.osmose).items=Object.keys(e.osmose.icons).map(function(e){return e.split("-")[0]}).reduce(function(e,t){return-1!==e.indexOf(t)?e:e.concat([t])},[])}),_cache$2||this.reset(),this.event=utilRebind(this,dispatch$3,"on")},reset:function(){var e={},t={};_cache$2&&(Object.values(_cache$2.inflightTile).forEach(abortRequest$2),e=_cache$2.strings,t=_cache$2.colors),_cache$2={data:{},loadedTile:{},inflightTile:{},inflightPost:{},closed:{},rtree:new RBush,strings:e,colors:t}},loadIssues:function(e){var l=this,s={item:_osmoseData.items},t=tiler$2.zoomExtent([_tileZoom$2,_tileZoom$2]).getTiles(e);abortUnwantedRequests$2(_cache$2,t),t.forEach(function(t){var e,n,r,i,o,a;_cache$2.loadedTile[t.id]||_cache$2.inflightTile[t.id]||(n=(e=t.xyz)[0],r=e[1],i=e[2],o=_osmoseUrlRoot+"/issues/"+i+"/"+n+"/"+r+".json?"+utilQsString(s),a=new AbortController,d3_json(o,{signal:(_cache$2.inflightTile[t.id]=a).signal}).then(function(e){delete _cache$2.inflightTile[t.id],_cache$2.loadedTile[t.id]=!0,e.features&&e.features.forEach(function(e){var t,n,r=e.properties,i=r.item,o=r.class,a=r.uuid,s=i+"-"+o;s in _osmoseData.icons&&(t=preventCoincident$1(t=e.geometry.coordinates),n=new QAItem(t,l,s,a,{item:i}),8300!==i&&8360!==i||(n.elems=[]),_cache$2.data[n.id]=n,_cache$2.rtree.insert(encodeIssueRtree$2(n)))}),dispatch$3.call("loaded")}).catch(function(){delete _cache$2.inflightTile[t.id],_cache$2.loadedTile[t.id]=!0}))})},loadIssueDetail:function(t){var n=this;if(void 0!==t.elems)return Promise.resolve(t);return d3_json(_osmoseUrlRoot+"/issue/"+t.id+"?langs="+_mainLocalizer.localeCode()).then(function(e){t.elems=e.elems.map(function(e){return e.type.substring(0,1)+e.id}),t.detail=e.subtitle?marked_1(e.subtitle.auto):"",n.replaceItem(t)}).then(function(){return t})},loadStrings:function(d){void 0===d&&(d=_mainLocalizer.localeCode());var e=Object.keys(_osmoseData.icons);if(d in _cache$2.strings&&Object.keys(_cache$2.strings[d]).length===e.length)return Promise.resolve(_cache$2.strings[d]);d in _cache$2.strings||(_cache$2.strings[d]={});var t=e.map(function(p){if(!(p in _cache$2.strings[d])){var e=p.split("-"),t=e[0],n=e[1];return d3_json(_osmoseUrlRoot+"/items/"+t+"/class/"+n+"?langs="+d).then(function(e){var t=e.categories[0];void 0===t&&(t={items:[]});var n=t.items[0];void 0===n&&(n={class:[]});var r,i,o,a,s,l,c,u=n.class[0];void 0===u&&(u=null),u?(r=n.item,i=n.color,/^#[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}/.test(i)&&(_cache$2.colors[r]=i),o=u.title,a=u.detail,s=u.fix,l=u.trap,c={},o&&(c.title=o.auto),a&&(c.detail=marked_1(a.auto)),l&&(c.trap=marked_1(l.auto)),s&&(c.fix=marked_1(s.auto)),_cache$2.strings[d][p]=c):console.log("Osmose strings request ("+p+") had unexpected data")})}});return Promise.all(t).then(function(){return _cache$2.strings[d]})},getStrings:function(e,t){return void 0===t&&(t=_mainLocalizer.localeCode()),t in _cache$2.strings?_cache$2.strings[t][e]:{}},getColor:function(e){return e in _cache$2.colors?_cache$2.colors[e]:"#FFFFFF"},postUpdate:function(t,n){var e=this;if(_cache$2.inflightPost[t.id])return n({message:"Issue update already inflight",status:-2},t);var r=_osmoseUrlRoot+"/issue/"+t.id+"/"+t.newStatus,i=new AbortController;_cache$2.inflightPost[t.id]=i,fetch(r,{signal:i.signal}).then(function(){delete _cache$2.inflightPost[t.id],e.removeItem(t),"done"===t.newStatus&&(t.item in _cache$2.closed||(_cache$2.closed[t.item]=0),_cache$2.closed[t.item]+=1),n&&n(null,t)}).catch(function(e){delete _cache$2.inflightPost[t.id],n&&n(e.message)})},getItems:function(e){var t=e.clipExtent(),n=[t[0][0],t[1][1]],r=[t[1][0],t[0][1]],i=geoExtent(e.invert(n),e.invert(r)).bbox();return _cache$2.rtree.search(i).map(function(e){return e.data})},getError:function(e){return _cache$2.data[e]},getIcon:function(e){return _osmoseData.icons[e]},replaceItem:function(e){if(e instanceof QAItem&&e.id)return updateRtree$2(encodeIssueRtree$2(_cache$2.data[e.id]=e),!0),e},removeItem:function(e){e instanceof QAItem&&e.id&&(delete _cache$2.data[e.id],updateRtree$2(encodeIssueRtree$2(e),!1))},getClosedCounts:function(){return _cache$2.closed},itemURL:function(e){return"https://osmose.openstreetmap.fr/en/error/"+e.id}};function svgDefs(o){function i(e){var r=e.append("defs");function t(e,t,n){r.append("marker").attr("id","ideditor-sided-marker-"+e).attr("viewBox","0 0 2 2").attr("refX",1).attr("refY",-n).attr("markerWidth",1.5).attr("markerHeight",1.5).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("class","sided-marker-path sided-marker-"+e+"-path").attr("d","M 0,0 L 1,1 L 2,0 z").attr("stroke","none").attr("fill",t)}r.append("marker").attr("id","ideditor-oneway-marker").attr("viewBox","0 0 10 5").attr("refX",2.5).attr("refY",2.5).attr("markerWidth",2).attr("markerHeight",2).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("class","oneway-marker-path").attr("d","M 5,3 L 0,3 L 0,2 L 5,2 L 5,0 L 10,2.5 L 5,5 z").attr("stroke","none").attr("fill","#000").attr("opacity","0.75"),t("natural","rgb(170, 170, 170)",0),t("coastline","#77dede",1),t("waterway","#77dede",1),t("barrier","#ddd",1),t("man_made","#fff",0),r.append("marker").attr("id","ideditor-viewfield-marker").attr("viewBox","0 0 16 16").attr("refX",8).attr("refY",16).attr("markerWidth",4).attr("markerHeight",4).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("class","viewfield-marker-path").attr("d","M 6,14 C 8,13.4 8,13.4 10,14 L 16,3 C 12,0 4,0 0,3 z").attr("fill","#333").attr("fill-opacity","0.75").attr("stroke","#fff").attr("stroke-width","0.5px").attr("stroke-opacity","0.75"),r.append("marker").attr("id","ideditor-viewfield-marker-wireframe").attr("viewBox","0 0 16 16").attr("refX",8).attr("refY",16).attr("markerWidth",4).attr("markerHeight",4).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("class","viewfield-marker-path").attr("d","M 6,14 C 8,13.4 8,13.4 10,14 L 16,3 C 12,0 4,0 0,3 z").attr("fill","none").attr("stroke","#fff").attr("stroke-width","0.5px").attr("stroke-opacity","0.75");var n=r.selectAll("pattern").data([["beach","dots"],["construction","construction"],["cemetery","cemetery"],["cemetery_christian","cemetery_christian"],["cemetery_buddhist","cemetery_buddhist"],["cemetery_muslim","cemetery_muslim"],["cemetery_jewish","cemetery_jewish"],["farmland","farmland"],["farmyard","farmyard"],["forest","forest"],["forest_broadleaved","forest_broadleaved"],["forest_needleleaved","forest_needleleaved"],["forest_leafless","forest_leafless"],["golf_green","grass"],["grass","grass"],["landfill","landfill"],["meadow","grass"],["orchard","orchard"],["pond","pond"],["quarry","quarry"],["scrub","bushes"],["vineyard","vineyard"],["water_standing","lines"],["waves","waves"],["wetland","wetland"],["wetland_marsh","wetland_marsh"],["wetland_swamp","wetland_swamp"],["wetland_bog","wetland_bog"],["wetland_reedbed","wetland_reedbed"]]).enter().append("pattern").attr("id",function(e){return"ideditor-pattern-"+e[0]}).attr("width",32).attr("height",32).attr("patternUnits","userSpaceOnUse");n.append("rect").attr("x",0).attr("y",0).attr("width",32).attr("height",32).attr("class",function(e){return"pattern-color-"+e[0]}),n.append("image").attr("x",0).attr("y",0).attr("width",32).attr("height",32).attr("xlink:href",function(e){return o.imagePath("pattern/"+e[1]+".png")}),r.selectAll("clipPath").data([12,18,20,32,45]).enter().append("clipPath").attr("id",function(e){return"ideditor-clip-square-"+e}).append("rect").attr("x",0).attr("y",0).attr("width",function(e){return e}).attr("height",function(e){return e}),r.call(i.addSprites,["iD-sprite","maki-sprite","temaki-sprite","fa-sprite","tnp-sprite","community-sprite"],!0)}return i.addSprites=function(e,t,r){var n=e.selectAll(".spritesheet"),i=utilArrayUniq(n.data().concat(t));n.data(i).enter().append("g").attr("class",function(e){return"spritesheet spritesheet-"+e}).each(function(t){var e=o.imagePath(t+".svg"),n=select(this).node();svg(e).then(function(e){n.appendChild(select(e.documentElement).attr("id","ideditor-"+t).node()),r&&"iD-sprite"!==t&&select(n).selectAll("path").attr("fill","currentColor")}).catch(function(){})})},i}var apibase="https://a.mapillary.com/v3/",viewercss="mapillary-js/mapillary.min.css",viewerjs="mapillary-js/mapillary.min.js",clientId="NzNRM2otQkR2SHJzaXJmNmdQWVQ0dzo1ZWYyMmYwNjdmNDdlNmVi",mapFeatureConfig={values:["construction--flat--crosswalk-plain","marking--discrete--crosswalk-zebra","object--banner","object--bench","object--bike-rack","object--billboard","object--catch-basin","object--cctv-camera","object--fire-hydrant","object--mailbox","object--manhole","object--phone-booth","object--sign--advertisement","object--sign--information","object--sign--store","object--street-light","object--support--utility-pole","object--traffic-light--*","object--traffic-light--pedestrians","object--trash-can"].join(",")},maxResults=1e3,tileZoom=14,tiler$3=utilTiler().zoomExtent([tileZoom,tileZoom]).skipNullIsland(!0),dispatch$4=dispatch("loadedImages","loadedSigns","loadedMapFeatures","bearingChanged"),_mlyFallback=!1,_mlyCache,_mlyClicks,_mlySelectedImageKey,_mlyViewer;function abortRequest$3(e){e.abort()}function maxPageAtZoom(e){return e<15?2:15===e?5:16===e?10:17===e?20:18===e?40:18<e?80:void 0}function loadTiles(t,n,e){var r=Math.floor(geoScaleToZoom(e.scale())),i=tiler$3.getTiles(e),o=_mlyCache[t];Object.keys(o.inflight).forEach(function(t){i.find(function(e){return 0===t.indexOf(e.id+",")})||(abortRequest$3(o.inflight[t]),delete o.inflight[t])}),i.forEach(function(e){loadNextTilePage(t,r,n,e)})}function loadNextTilePage(i,n,r,o){var a,e,t,s=_mlyCache[i],l=o.extent.rectangle(),c=maxPageAtZoom(n),u=s.nextPage[o.id]||0,p=s.nextURL[o.id]||r+utilQsString({per_page:maxResults,page:u,client_id:clientId,bbox:[l[0],l[1],l[2],l[3]].join(",")});c<u||(a=o.id+","+String(u),s.loaded[a]||s.inflight[a]||(e=new AbortController,t={method:"GET",signal:(s.inflight[a]=e).signal,headers:{"Content-Type":"application/json"}},fetch(p,t).then(function(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);var t,n=e.headers.get("Link");return!n||(t=parsePagination(n)).next&&(s.nextURL[o.id]=t.next),e.json()}).then(function(e){if(s.loaded[a]=!0,delete s.inflight[a],!e||!e.features||!e.features.length)throw new Error("No Data");var t=e.features.map(function(e){var t,n=e.geometry.coordinates;if("images"===i)t={loc:n,key:e.properties.key,ca:e.properties.ca,captured_at:e.properties.captured_at,captured_by:e.properties.username,pano:e.properties.pano},s.forImageKey[t.key]=t;else{if("sequences"===i){var r=e.properties.key;return(s.lineString[r]=e).properties.coordinateProperties.image_keys.forEach(function(e){s.forImageKey[e]=r}),!1}if("image_detections"===i)return t={key:e.properties.key,image_key:e.properties.image_key,value:e.properties.value,package:e.properties.package,shape:e.properties.shape},s.forImageKey[t.image_key]||(s.forImageKey[t.image_key]=[]),s.forImageKey[t.image_key].push(t),!1;"map_features"!==i&&"points"!==i||(t={loc:n,key:e.properties.key,value:e.properties.value,package:e.properties.package,detections:e.properties.detections})}return{minX:n[0],minY:n[1],maxX:n[0],maxY:n[1],data:t}}).filter(Boolean);s.rtree&&t&&s.rtree.load(t),e.features.length===maxResults?(s.nextPage[o.id]=u+1,loadNextTilePage(i,n,r,o)):s.nextPage[o.id]=1/0,"images"===i||"sequences"===i?dispatch$4.call("loadedImages"):"map_features"===i?dispatch$4.call("loadedSigns"):"points"===i&&dispatch$4.call("loadedMapFeatures")}).catch(function(){s.loaded[a]=!0,delete s.inflight[a]})))}function parsePagination(e){return e.split(",").map(function(e){var t=e.split(";");return 2===t.length?[/<(.+)>/.exec(t[0])[1],/rel="(.+)"/.exec(t[1])[1]]:["",""]}).reduce(function(e,t){return e[t[1]]=t[0],e},{})}function partitionViewport(e){var t=geoScaleToZoom(e.scale()),n=Math.ceil(2*t)/2+2.5;return utilTiler().zoomExtent([n,n]).getTiles(e).map(function(e){return e.extent})}function searchLimited(r,e,i){return r=r||5,partitionViewport(e).reduce(function(e,t){var n=i.search(t.bbox()).slice(0,r).map(function(e){return e.data});return n.length?e.concat(n):e},[])}var serviceMapillary={init:function(){_mlyCache||this.reset(),this.event=utilRebind(this,dispatch$4,"on")},reset:function(){_mlyCache&&(Object.values(_mlyCache.images.inflight).forEach(abortRequest$3),Object.values(_mlyCache.image_detections.inflight).forEach(abortRequest$3),Object.values(_mlyCache.map_features.inflight).forEach(abortRequest$3),Object.values(_mlyCache.points.inflight).forEach(abortRequest$3),Object.values(_mlyCache.sequences.inflight).forEach(abortRequest$3)),_mlyCache={images:{inflight:{},loaded:{},nextPage:{},nextURL:{},rtree:new RBush,forImageKey:{}},image_detections:{inflight:{},loaded:{},nextPage:{},nextURL:{},forImageKey:{}},map_features:{inflight:{},loaded:{},nextPage:{},nextURL:{},rtree:new RBush},points:{inflight:{},loaded:{},nextPage:{},nextURL:{},rtree:new RBush},sequences:{inflight:{},loaded:{},nextPage:{},nextURL:{},rtree:new RBush,forImageKey:{},lineString:{}}},_mlySelectedImageKey=null,_mlyClicks=[]},images:function(e){return searchLimited(5,e,_mlyCache.images.rtree)},signs:function(e){return searchLimited(5,e,_mlyCache.map_features.rtree)},mapFeatures:function(e){return searchLimited(5,e,_mlyCache.points.rtree)},cachedImage:function(e){return _mlyCache.images.forImageKey[e]},sequences:function(e){var t=e.clipExtent(),n=[t[0][0],t[1][1]],r=[t[1][0],t[0][1]],i=geoExtent(e.invert(n),e.invert(r)).bbox(),o={};return _mlyCache.images.rtree.search(i).forEach(function(e){var t=_mlyCache.sequences.forImageKey[e.data.key];t&&(o[t]=!0)}),Object.keys(o).map(function(e){return _mlyCache.sequences.lineString[e]})},signsSupported:function(){return!0},loadImages:function(e){loadTiles("images",apibase+"images?sort_by=key&",e),loadTiles("sequences",apibase+"sequences?sort_by=key&",e)},loadSigns:function(e){loadTiles("images",apibase+"images?sort_by=key&",e),loadTiles("map_features",apibase+"map_features?layers=trafficsigns&min_nbr_image_detections=2&sort_by=key&",e),loadTiles("image_detections",apibase+"image_detections?layers=trafficsigns&sort_by=key&",e)},loadMapFeatures:function(e){loadTiles("images",apibase+"images?sort_by=key",e),loadTiles("points",apibase+"map_features?layers=points&min_nbr_image_detections=2&sort_by=key&values="+mapFeatureConfig.values+"&",e),loadTiles("image_detections",apibase+"image_detections?layers=points&sort_by=key&values="+mapFeatureConfig.values+"&",e)},loadViewer:function(e){e.container().select(".photoviewer").selectAll(".mly-wrapper").data([0]).enter().append("div").attr("id","ideditor-mly").attr("class","photo-wrapper mly-wrapper").classed("hide",!0),select("head").selectAll("#ideditor-mapillary-viewercss").data([0]).enter().append("link").attr("id","ideditor-mapillary-viewercss").attr("rel","stylesheet").attr("href",e.asset(viewercss)),select("head").selectAll("#ideditor-mapillary-viewerjs").data([0]).enter().append("script").attr("id","ideditor-mapillary-viewerjs").attr("src",e.asset(viewerjs)),e.container().select("defs").call(svgDefs(e).addSprites,["mapillary-sprite","mapillary-object-sprite"],!1),e.ui().photoviewer.on("resize.mapillary",function(){_mlyViewer&&_mlyViewer.resize()})},showViewer:function(e){var t=e.container().select(".photoviewer").classed("hide",!1);return t.selectAll(".photo-wrapper.mly-wrapper.hide").size()&&_mlyViewer&&(t.selectAll(".photo-wrapper:not(.mly-wrapper)").classed("hide",!0),t.selectAll(".photo-wrapper.mly-wrapper").classed("hide",!1),_mlyViewer.resize()),this},hideViewer:function(e){_mlySelectedImageKey=null,!_mlyFallback&&_mlyViewer&&_mlyViewer.getComponent("sequence").stop();var t=e.container().select(".photoviewer");return t.empty()||t.datum(null),t.classed("hide",!0).selectAll(".photo-wrapper").classed("hide",!0),e.container().selectAll(".viewfield-group, .sequence, .icon-detected").classed("currentView",!1),this.setStyles(e,null,!0)},parsePagination:parsePagination,updateViewer:function(e,t){return t&&(_mlyViewer?_mlyViewer.moveToKey(t).catch(function(e){console.error("mly3",e)}):this.initViewer(e,t)),this},initViewer:function(o,e){var t,a=this;window.Mapillary&&e&&(t={baseImageSize:320,component:{cover:!1,keyboard:!1,tag:!0}},!Mapillary.isSupported()&&Mapillary.isFallbackSupported()&&(_mlyFallback=!0,t.component={cover:!1,direction:!1,imagePlane:!1,keyboard:!1,mouse:!1,sequence:!1,tag:!1,image:!0,navigation:!0}),(_mlyViewer=new Mapillary.Viewer("ideditor-mly",clientId,null,t)).on("nodechanged",function(e){_mlyFallback||_mlyViewer.getComponent("tag").removeAll();var t=_mlyClicks,n=t.indexOf(e.key),r=_mlySelectedImageKey;{var i;-1<n?(t.splice(n,1),e.key===r&&a.selectImage(o,_mlySelectedImageKey,!0)):(i=e.computedLatLon?[e.computedLatLon.lon,e.computedLatLon.lat]:[e.latLon.lon,e.latLon.lat],o.map().centerEase(i),a.selectImage(o,e.key,!0))}}),_mlyViewer.on("bearingchanged",function(e){dispatch$4.call("bearingChanged",void 0,e)}),_mlyViewer.moveToKey(e).catch(function(e){console.error("mly3",e)}))},selectImage:function(e,t,n){_mlySelectedImageKey=t;var r=_mlyCache.images.forImageKey[t],i=e.container().select(".photoviewer");return i.empty()||i.datum(r),t=r&&r.key||t,!n&&t&&_mlyClicks.push(t),this.setStyles(e,null,!0),e.container().selectAll(".layer-mapillary-signs .icon-detected").classed("currentView",function(e){return e.detections.some(function(e){return e.image_key===t})}),r&&this.updateDetections(r),this},getSelectedImageKey:function(){return _mlySelectedImageKey},getSequenceKeyForImageKey:function(e){return _mlyCache.sequences.forImageKey[e]},setStyles:function(e,t,n){n&&(e.container().selectAll(".viewfield-group").classed("highlighted",!1).classed("hovered",!1).classed("currentView",!1),e.container().selectAll(".sequence").classed("highlighted",!1).classed("currentView",!1));var r=t&&t.key,i=r&&this.getSequenceKeyForImageKey(r),o=i&&_mlyCache.sequences.lineString[i],a=o&&o.properties.coordinateProperties.image_keys||[],s=_mlySelectedImageKey,l=s&&this.getSequenceKeyForImageKey(s),c=l&&_mlyCache.sequences.lineString[l],u=utilArrayUnion(a,c&&c.properties.coordinateProperties.image_keys||[]);return e.container().selectAll(".layer-mapillary .viewfield-group").classed("highlighted",function(e){return-1!==u.indexOf(e.key)}).classed("hovered",function(e){return e.key===r}).classed("currentView",function(e){return e.key===s}),e.container().selectAll(".layer-mapillary .sequence").classed("highlighted",function(e){return e.properties.key===i}).classed("currentView",function(e){return e.properties.key===l}),e.container().selectAll(".viewfield-group .viewfield").attr("d",function(){var e=this.parentNode.__data__;return e.pano&&e.key!==s?"M 8,13 m -10,0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0":"M 6,9 C 8,8.4 8,8.4 10,9 L 16,-2 C 12,-5 4,-5 0,-2 z"}),this},updateDetections:function(e){var t;!_mlyViewer||_mlyFallback||(t=e&&e.key)&&(_mlyCache.image_detections.forImageKey[t]||[]).forEach(function(e){var t=function(e){var t=e.value.split("--");if(3!==t.length)return;var n,r=t[1].replace(/-/g," ");{var i,o;"Polygon"===e.shape.type?(i=new Mapillary.TagComponent.PolygonGeometry(e.shape.coordinates[0]),n=new Mapillary.TagComponent.OutlineTag(e.key,i,{text:r,textColor:16776960,lineColor:16776960,lineWidth:2,fillColor:16776960,fillOpacity:.3})):"Point"===e.shape.type&&(o=new Mapillary.TagComponent.PointGeometry(e.shape.coordinates[0]),n=new Mapillary.TagComponent.SpotTag(e.key,o,{text:r,color:16776960,textColor:16776960}))}return n}(e);t&&_mlyViewer.getComponent("tag").add([t])})},cache:function(){return _mlyCache}};function validationIssue(e){this.type=e.type,this.subtype=e.subtype,this.severity=e.severity,this.message=e.message,this.reference=e.reference,this.entityIds=e.entityIds,this.loc=e.loc,this.data=e.data,this.dynamicFixes=e.dynamicFixes,this.hash=e.hash,this.id=function(){var e=[this.type];this.hash&&e.push(this.hash);this.subtype&&e.push(this.subtype);{var t;this.entityIds&&(t=this.entityIds.slice().sort(),e.push.apply(e,t))}return e.join(":")}.apply(this),this.autoFix=null,this.extent=function(n){return this.loc?geoExtent(this.loc):this.entityIds&&this.entityIds.length?this.entityIds.reduce(function(e,t){return e.extend(n.entity(t).extent(n))},geoExtent()):null},this.fixes=function(e){var t=this.dynamicFixes?this.dynamicFixes(e):[],n=this;return"warning"===n.severity&&t.push(new validationIssueFix({title:_t("issues.fix.ignore_issue.title"),icon:"iD-icon-close",onClick:function(){e.validator().ignoreIssue(this.issue.id)}})),t.forEach(function(e){e.id=e.title,e.issue=n,e.autoArgs&&(n.autoFix=e)}),t}}function validationIssueFix(e){this.title=e.title,this.onClick=e.onClick,this.disabledReason=e.disabledReason,this.icon=e.icon,this.entityIds=e.entityIds||[],this.autoArgs=e.autoArgs,this.issue=null}var buildRuleChecks=function(){return{equals:function(n){return function(t){return Object.keys(n).every(function(e){return n[e]===t[e]})}},notEquals:function(n){return function(t){return Object.keys(n).some(function(e){return n[e]!==t[e]})}},absence:function(t){return function(e){return-1===Object.keys(e).indexOf(t)}},presence:function(t){return function(e){return-1<Object.keys(e).indexOf(t)}},greaterThan:function(e){var t=Object.keys(e)[0],n=e[t];return function(e){return e[t]>n}},greaterThanEqual:function(e){var t=Object.keys(e)[0],n=e[t];return function(e){return e[t]>=n}},lessThan:function(e){var t=Object.keys(e)[0],n=e[t];return function(e){return e[t]<n}},lessThanEqual:function(e){var t=Object.keys(e)[0],n=e[t];return function(e){return e[t]<=n}},positiveRegex:function(e){var t=Object.keys(e)[0],n=e[t].join("|"),r=new RegExp(n);return function(e){return r.test(e[t])}},negativeRegex:function(e){var t=Object.keys(e)[0],n=e[t].join("|"),r=new RegExp(n);return function(e){return!r.test(e[t])}}}},buildLineKeys=function(){return{highway:{rest_area:!0,services:!0},railway:{roundhouse:!0,station:!0,traverser:!0,turntable:!0,wash:!0}}},serviceMapRules={init:function(){this._ruleChecks=buildRuleChecks(),this._validationRules=[],this._areaKeys=osmAreaKeys,this._lineKeys=buildLineKeys()},filterRuleChecks:function(n){var r=this._ruleChecks;return Object.keys(n).reduce(function(e,t){return-1===["geometry","error","warning"].indexOf(t)&&e.push(r[t](n[t])),e},[])},buildTagMap:function(a){return Object.keys(a).reduce(function(t,n){var e,r,i=/regex/gi.test(n),o=/equals/gi.test(n);return i||o?Object.keys(a[n]).forEach(function(e){r=o?[a[n][e]]:a[n][e].map(function(e){return e.replace(/\$|\^/g,"")}),t.hasOwnProperty(e)&&(r=r.concat(t[e])),t[e]=r}):/(greater|less)Than(Equal)?|presence/g.test(n)&&(e=/presence/.test(n)?a[n]:Object.keys(a[n])[0],r=[a[n][e]],t.hasOwnProperty(e)&&(r=r.concat(t[e])),t[e]=r),t},{})},inferGeometry:function(e){var t,n,r=this._lineKeys,i=this._areaKeys;if(e.hasOwnProperty("area")){if(-1<e.area.indexOf("yes"))return"area";if(-1<e.area.indexOf("no"))return"line"}for(var o in e){if(o in i&&!(0<utilArrayIntersection(e[n=o],Object.keys(i[n])).length))return"area";if(o in r&&0<utilArrayIntersection(e[t=o],Object.keys(r[t])).length)return"area"}return"line"},addRule:function(o){var e={checks:this.filterRuleChecks(o),matches:function(t){return this.checks.every(function(e){return e(t.tags)})},inferredGeometry:this.inferGeometry(this.buildTagMap(o),this._areaKeys),geometryMatches:function(e,t){return"node"===e.type||"relation"===e.type?o.geometry===e.type:"way"===e.type?this.inferredGeometry===e.geometry(t):void 0},findIssues:function(e,t,n){var r,i;this.geometryMatches(e,t)&&this.matches(e)&&(r=-1<Object.keys(o).indexOf("error")?"error":"warning",i=o[r],n.push(new validationIssue({type:"maprules",severity:r,message:function(){return i},entityIds:[e.id]})))}};this._validationRules.push(e)},clearRules:function(){this._validationRules=[]},validationRules:function(){return this._validationRules},ruleChecks:function(){return this._ruleChecks}},apibase$1="https://nominatim.openstreetmap.org/",_inflight={},_nominatimCache,serviceNominatim={init:function(){_inflight={},_nominatimCache=new RBush},reset:function(){Object.values(_inflight).forEach(function(e){e.abort()}),_inflight={},_nominatimCache=new RBush},countryCode:function(e,n){this.reverse(e,function(e,t){return e?n(e):t.address?n(null,t.address.country_code):n("Unable to geocode",null)})},reverse:function(n,r){var e,i,t,o=_nominatimCache.search({minX:n[0],minY:n[1],maxX:n[0],maxY:n[1]});0<o.length?r&&r(null,o[0].data):(e={zoom:13,format:"json",addressdetails:1,lat:n[1],lon:n[0]},i=apibase$1+"reverse?"+utilQsString(e),_inflight[i]||(t=new AbortController,_inflight[i]=t,d3_json(i,{signal:t.signal}).then(function(e){if(delete _inflight[i],e&&e.error)throw new Error(e.error);var t=geoExtent(n).padByMeters(200);_nominatimCache.insert(Object.assign(t.bbox(),{data:e})),r&&r(null,e)}).catch(function(e){delete _inflight[i],"AbortError"!==e.name&&r&&r(e.message)})))},search:function(e,t){var n,r=encodeURIComponent(e),i=apibase$1+"search/"+r+"?limit=10&format=json";_inflight[i]||(n=new AbortController,_inflight[i]=n,d3_json(i,{signal:n.signal}).then(function(e){if(delete _inflight[i],e&&e.error)throw new Error(e.error);t&&t(null,e)}).catch(function(e){delete _inflight[i],"AbortError"!==e.name&&t&&t(e.message)}))}},apibase$2="https://openstreetcam.org",maxResults$1=1e3,tileZoom$1=14,tiler$4=utilTiler().zoomExtent([tileZoom$1,tileZoom$1]).skipNullIsland(!0),dispatch$5=dispatch("loadedImages"),imgZoom=d3_zoom().extent([[0,0],[320,240]]).translateExtent([[0,0],[320,240]]).scaleExtent([1,15]),_oscCache,_oscSelectedImage;function abortRequest$4(e){e.abort()}function maxPageAtZoom$1(e){return e<15?2:15===e?5:16===e?10:17===e?20:18===e?40:18<e?80:void 0}function loadTiles$1(t,n,e){var r=Math.floor(geoScaleToZoom(e.scale())),i=tiler$4.getTiles(e),o=_oscCache[t];Object.keys(o.inflight).forEach(function(t){i.find(function(e){return 0===t.indexOf(e.id+",")})||(abortRequest$4(o.inflight[t]),delete o.inflight[t])}),i.forEach(function(e){loadNextTilePage$1(t,r,n,e)})}function loadNextTilePage$1(i,n,r,o){var a,e,t,s=_oscCache[i],l=o.extent.bbox(),c=maxPageAtZoom$1(n),u=s.nextPage[o.id]||1,p=utilQsString({ipp:maxResults$1,page:u,bbTopLeft:[l.maxY,l.minX].join(","),bbBottomRight:[l.minY,l.maxX].join(",")},!0);c<u||(a=o.id+","+String(u),s.loaded[a]||s.inflight[a]||(e=new AbortController,t={method:"POST",signal:(s.inflight[a]=e).signal,body:p,headers:{"Content-Type":"application/x-www-form-urlencoded"}},d3_json(r,t).then(function(e){if(s.loaded[a]=!0,delete s.inflight[a],!e||!e.currentPageItems||!e.currentPageItems.length)throw new Error("No Data");var t=e.currentPageItems.map(function(e){var t,n,r=[+e.lng,+e.lat];return"images"===i&&(t={loc:r,key:e.id,ca:+e.heading,captured_at:e.shot_date||e.date_added,captured_by:e.username,imagePath:e.lth_name,sequence_id:e.sequence_id,sequence_index:+e.sequence_index},(n=_oscCache.sequences[t.sequence_id])||(n={rotation:0,images:[]},_oscCache.sequences[t.sequence_id]=n),n.images[t.sequence_index]=t),{minX:r[0],minY:r[1],maxX:r[0],maxY:r[1],data:t}});s.rtree.load(t),e.currentPageItems.length===maxResults$1?(s.nextPage[o.id]=u+1,loadNextTilePage$1(i,n,r,o)):s.nextPage[o.id]=1/0,"images"===i&&dispatch$5.call("loadedImages")}).catch(function(){s.loaded[a]=!0,delete s.inflight[a]})))}function partitionViewport$1(e){var t=geoScaleToZoom(e.scale()),n=Math.ceil(2*t)/2+2.5;return utilTiler().zoomExtent([n,n]).getTiles(e).map(function(e){return e.extent})}function searchLimited$1(r,e,i){return r=r||5,partitionViewport$1(e).reduce(function(e,t){var n=i.search(t.bbox()).slice(0,r).map(function(e){return e.data});return n.length?e.concat(n):e},[])}var serviceOpenstreetcam={init:function(){_oscCache||this.reset(),this.event=utilRebind(this,dispatch$5,"on")},reset:function(){_oscCache&&Object.values(_oscCache.images.inflight).forEach(abortRequest$4),_oscCache={images:{inflight:{},loaded:{},nextPage:{},rtree:new RBush},sequences:{}},_oscSelectedImage=null},images:function(e){return searchLimited$1(5,e,_oscCache.images.rtree)},sequences:function(e){var t=e.clipExtent(),n=[t[0][0],t[1][1]],r=[t[1][0],t[0][1]],i=geoExtent(e.invert(n),e.invert(r)).bbox(),o={};_oscCache.images.rtree.search(i).forEach(function(e){o[e.data.sequence_id]=!0});var a=[];return Object.keys(o).forEach(function(e){var t=_oscCache.sequences[e],n=t&&t.images;n&&a.push({type:"LineString",coordinates:n.map(function(e){return e.loc}).filter(Boolean),properties:{key:e}})}),a},loadImages:function(e){loadTiles$1("images",apibase$2+"/1.0/list/nearby-photos/",e)},loadViewer:function(o){var a=this,e=o.container().select(".photoviewer").selectAll(".osc-wrapper").data([0]).enter().append("div").attr("class","photo-wrapper osc-wrapper").classed("hide",!0).call(imgZoom.on("zoom",n)).on("dblclick.zoom",null);e.append("div").attr("class","photo-attribution fillD");var t=e.append("div").attr("class","photo-controls-wrap").append("div").attr("class","photo-controls");function n(){var e=event.transform;o.container().select(".photoviewer .osc-image-wrap").call(utilSetTransform,e.x,e.y,e.k)}function r(i){return function(){var e,t,n,r;_oscSelectedImage&&(e=_oscSelectedImage.sequence_id,(t=_oscCache.sequences[e])&&(n=t.rotation||0,180<(n+=i)&&(n-=360),n<-180&&(n+=360),t.rotation=n,(r=o.container().select(".photoviewer .osc-wrapper")).transition().duration(100).call(imgZoom.transform,identity$2),r.selectAll(".osc-image").transition().duration(100).style("transform","rotate("+n+"deg)")))}}function i(i){return function(){var e,t,n,r;_oscSelectedImage&&(e=_oscSelectedImage.sequence_id,(t=_oscCache.sequences[e])&&(n=_oscSelectedImage.sequence_index+i,(r=t.images[n])&&(o.map().centerEase(r.loc),a.selectImage(o,r).updateViewer(o,r))))}}t.append("button").on("click.back",i(-1)).text("◄"),t.append("button").on("click.rotate-ccw",r(-90)).text("⤿"),t.append("button").on("click.rotate-cw",r(90)).text("⤾"),t.append("button").on("click.forward",i(1)).text("►"),e.append("div").attr("class","osc-image-wrap"),o.ui().photoviewer.on("resize.openstreetcam",function(e){imgZoom=d3_zoom().extent([[0,0],e]).translateExtent([[0,0],e]).scaleExtent([1,15]).on("zoom",n)})},showViewer:function(e){var t=e.container().select(".photoviewer").classed("hide",!1);return t.selectAll(".photo-wrapper.osc-wrapper.hide").size()&&(t.selectAll(".photo-wrapper:not(.osc-wrapper)").classed("hide",!0),t.selectAll(".photo-wrapper.osc-wrapper").classed("hide",!1)),this},hideViewer:function(e){_oscSelectedImage=null;var t=e.container().select(".photoviewer");return t.empty()||t.datum(null),t.classed("hide",!0).selectAll(".photo-wrapper").classed("hide",!0),e.container().selectAll(".viewfield-group, .sequence, .icon-sign").classed("currentView",!1),this.setStyles(e,null,!0)},updateViewer:function(e,t){var n,r,i=e.container().select(".photoviewer .osc-wrapper"),o=i.selectAll(".osc-image-wrap"),a=i.selectAll(".photo-attribution").html("");return i.transition().duration(100).call(imgZoom.transform,identity$2),o.selectAll(".osc-image").remove(),t&&(r=(n=_oscCache.sequences[t.sequence_id])&&n.rotation||0,o.append("img").attr("class","osc-image").attr("src",apibase$2+"/"+t.imagePath).style("transform","rotate("+r+"deg)"),t.captured_by&&(a.append("a").attr("class","captured_by").attr("target","_blank").attr("href","https://openstreetcam.org/user/"+encodeURIComponent(t.captured_by)).text("@"+t.captured_by),a.append("span").text("|")),t.captured_at&&(a.append("span").attr("class","captured_at").text(function(e){if(!e)return null;var t=new Date(e);if(isNaN(t.getTime()))return null;return t.toLocaleDateString(_mainLocalizer.localeCode(),{day:"numeric",month:"short",year:"numeric"})}(t.captured_at)),a.append("span").text("|")),a.append("a").attr("class","image-link").attr("target","_blank").attr("href","https://openstreetcam.org/details/"+t.sequence_id+"/"+t.sequence_index).text("openstreetcam.org")),this},selectImage:function(e,t){_oscSelectedImage=t;var n=e.container().select(".photoviewer");return n.empty()||n.datum(t),this.setStyles(e,null,!0),e.container().selectAll(".icon-sign").classed("currentView",!1),this},getSelectedImage:function(){return _oscSelectedImage},getSequenceKeyForImage:function(e){return e&&e.sequence_id},setStyles:function(e,t,n){n&&(e.container().selectAll(".viewfield-group").classed("highlighted",!1).classed("hovered",!1).classed("currentView",!1),e.container().selectAll(".sequence").classed("highlighted",!1).classed("currentView",!1));var r=t&&t.key,i=this.getSequenceKeyForImage(t),o=i&&_oscCache.sequences[i],a=o&&o.images.map(function(e){return e.key})||[],s=e.container().select(".photoviewer"),l=s.empty()?void 0:s.datum(),c=l&&l.key,u=this.getSequenceKeyForImage(l),p=u&&_oscCache.sequences[u],d=utilArrayUnion(a,p&&p.images.map(function(e){return e.key})||[]);return e.container().selectAll(".layer-openstreetcam .viewfield-group").classed("highlighted",function(e){return-1!==d.indexOf(e.key)}).classed("hovered",function(e){return e.key===r}).classed("currentView",function(e){return e.key===c}),e.container().selectAll(".layer-openstreetcam .sequence").classed("highlighted",function(e){return e.properties.key===i}).classed("currentView",function(e){return e.properties.key===u}),e.container().selectAll(".viewfield-group .viewfield").attr("d",function(){var e=this.parentNode.__data__;return e.pano&&e.key!==c?"M 8,13 m -10,0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0":"M 6,9 C 8,8.4 8,8.4 10,9 L 16,-2 C 12,-5 4,-5 0,-2 z"}),this},cache:function(){return _oscCache}};function isObject$1(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root$2=freeGlobal||freeSelf||Function("return this")(),now$1=function(){return root$2.Date.now()},Symbol$1=root$2.Symbol,objectProto=Object.prototype,hasOwnProperty$2=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty$2.call(e,symToStringTag),n=e[symToStringTag];try{var r=!(e[symToStringTag]=void 0)}catch(e){}var i=nativeObjectToString.call(e);return r&&(t?e[symToStringTag]=n:delete e[symToStringTag]),i}var objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString$2(e){return nativeObjectToString$1.call(e)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:(symToStringTag$1&&symToStringTag$1 in Object(e)?getRawTag:objectToString$2)(e)}function isObjectLike(e){return null!=e&&"object"==typeof e}var symbolTag="[object Symbol]";function isSymbol$4(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==symbolTag}var NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(e){if("number"==typeof e)return e;if(isSymbol$4(e))return NAN;var t;if(isObject$1(e)&&(e=isObject$1(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t),"string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var n=reIsBinary.test(e);return n||reIsOctal.test(e)?freeParseInt(e.slice(2),n?2:8):reIsBadHex.test(e)?NAN:+e}var FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(r,i,e){var o,a,s,l,c,u,p=0,d=!1,f=!1,t=!0;if("function"!=typeof r)throw new TypeError(FUNC_ERROR_TEXT);function h(e){var t=o,n=a;return o=a=void 0,p=e,l=r.apply(n,t)}function g(e){var t=e-u;return void 0===u||i<=t||t<0||f&&s<=e-p}function m(){var e,t,n=now$1();if(g(n))return y(n);c=setTimeout(m,(t=i-((e=n)-u),f?nativeMin(t,s-(e-p)):t))}function y(e){return c=void 0,t&&o?h(e):(o=a=void 0,l)}function n(){var e,t=now$1(),n=g(t);if(o=arguments,a=this,u=t,n){if(void 0===c)return p=e=u,c=setTimeout(m,i),d?h(e):l;if(f)return clearTimeout(c),c=setTimeout(m,i),h(u)}return void 0===c&&(c=setTimeout(m,i)),l}return i=toNumber(i)||0,isObject$1(e)&&(d=!!e.leading,f="maxWait"in e,s=f?nativeMax(toNumber(e.maxWait)||0,i):s,t="trailing"in e?!!e.trailing:t),n.cancel=function(){void 0!==c&&clearTimeout(c),o=u=a=c=void(p=0)},n.flush=function(){return void 0===c?l:y(now$1())},n}var FUNC_ERROR_TEXT$1="Expected a function";function throttle(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$1);return isObject$1(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),debounce(e,t,{leading:r,maxWait:t,trailing:i})}var hashes=createCommonjsModule(function(r,i){!function(){var e,t,n;function u(e){var t,n,r,i="",o=-1;if(e&&e.length)for(r=e.length;(o+=1)<r;)t=e.charCodeAt(o),n=o+1<r?e.charCodeAt(o+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),o+=1),t<=127?i+=String.fromCharCode(t):t<=2047?i+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?i+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(i+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return i}function k(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function N(e,t){return e<<t|e>>>32-t}function a(e,t){for(var n,r=t?"0123456789ABCDEF":"0123456789abcdef",i="",o=0,a=e.length;o<a;o+=1)n=e.charCodeAt(o),i+=r.charAt(n>>>4&15)+r.charAt(15&n);return i}function c(e){for(var t=32*e.length,n="",r=0;r<t;r+=8)n+=String.fromCharCode(e[r>>5]>>>24-r%32&255);return n}function g(e){for(var t=32*e.length,n="",r=0;r<t;r+=8)n+=String.fromCharCode(e[r>>5]>>>r%32&255);return n}function m(e){for(var t=8*e.length,n=Array(e.length>>2),r=n.length,i=0;i<r;i+=1)n[i]=0;for(i=0;i<t;i+=8)n[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return n}function p(e){for(var t=8*e.length,n=Array(e.length>>2),r=n.length,i=0;i<r;i+=1)n[i]=0;for(i=0;i<t;i+=8)n[i>>5]|=(255&e.charCodeAt(i/8))<<24-i%32;return n}function y(e,t){for(var n,r,i,o,a,s=t.length,l=Array(),c=Array(Math.ceil(e.length/2)),u=c.length,p=0;p<u;p+=1)c[p]=e.charCodeAt(2*p)<<8|e.charCodeAt(2*p+1);for(;0<c.length;){for(i=Array(),p=r=0;p<c.length;p+=1)r=(r<<16)+c[p],r-=(n=Math.floor(r/s))*s,(0<i.length||0<n)&&(i[i.length]=n);l[l.length]=r,c=i}for(o="",p=l.length-1;0<=p;p--)o+=t.charAt(l[p]);for(a=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),p=o.length;p<a;p+=1)o=t[0]+o;return o}function v(e,t){var n,r,i,o="",a=e.length;for(t=t||"=",n=0;n<a;n+=3)for(i=e.charCodeAt(n)<<16|(n+1<a?e.charCodeAt(n+1)<<8:0)|(n+2<a?e.charCodeAt(n+2):0),r=0;r<4;r+=1)8*n+6*r>8*e.length?o+=t:o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>>6*(3-r)&63);return o}e={VERSION:"1.0.6",Base64:function(){var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="=",f=!0;this.encode=function(e){var t,n,r,i="",o=e.length;for(d=d||"=",e=f?u(e):e,t=0;t<o;t+=3)for(r=e.charCodeAt(t)<<16|(t+1<o?e.charCodeAt(t+1)<<8:0)|(t+2<o?e.charCodeAt(t+2):0),n=0;n<4;n+=1)i+=8*o<8*t+6*n?d:p.charAt(r>>>6*(3-n)&63);return i},this.decode=function(e){var t,n,r,i,o,a,s,l,c="",u=[];if(!e)return e;for(t=l=0,e=e.replace(new RegExp("\\"+d,"gi"),"");n=(s=p.indexOf(e.charAt(t+=1))<<18|p.indexOf(e.charAt(t+=1))<<12|(o=p.indexOf(e.charAt(t+=1)))<<6|(a=p.indexOf(e.charAt(t+=1))))>>16&255,r=s>>8&255,i=255&s,u[l+=1]=64===o?String.fromCharCode(n):64===a?String.fromCharCode(n,r):String.fromCharCode(n,r,i),t<e.length;);return c=u.join(""),c=f?function(e){var t,n,r,i,o,a=[],s=t=r=0;if(e&&e.length)for(o=e.length,e+="";s<o;)t+=1,(n=e.charCodeAt(s))<128?(a[t]=String.fromCharCode(n),s+=1):191<n&&n<224?(r=e.charCodeAt(s+1),a[t]=String.fromCharCode((31&n)<<6|63&r),s+=2):(r=e.charCodeAt(s+1),i=e.charCodeAt(s+2),a[t]=String.fromCharCode((15&n)<<12|(63&r)<<6|63&i),s+=3);return a.join("")}(c):c},this.setPad=function(e){return d=e||d,this},this.setTab=function(e){return p=e||p,this},this.setUTF8=function(e){return"boolean"==typeof e&&(f=e),this}},CRC32:function(e){var t,n,r,i,o=0;for(e=u(e),n=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),o^=-1,r=0,i=e.length;r<i;r+=1)t=255&(o^e.charCodeAt(r)),o=o>>>8^"0x"+n.substr(9*t,8);return(-1^o)>>>0},MD5:function(e){var n=!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase,r=e&&"string"==typeof e.pad?e.pad:"=",s=!e||"boolean"!=typeof e.utf8||e.utf8;function i(e){return g(l(m(e=s?u(e):e),8*e.length))}function o(e,t){var n,r,i,o,a;for(e=s?u(e):e,t=s?u(t):t,16<(n=m(e)).length&&(n=l(n,8*e.length)),r=Array(16),i=Array(16),a=0;a<16;a+=1)r[a]=909522486^n[a],i[a]=1549556828^n[a];return o=l(r.concat(m(t)),512+8*t.length),g(l(i.concat(o),640))}function l(e,t){var n,r,i,o,a,s=1732584193,l=-271733879,c=-1732584194,u=271733878;for(e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t,n=0;n<e.length;n+=16)s=p(r=s,i=l,o=c,a=u,e[n+0],7,-680876936),u=p(u,s,l,c,e[n+1],12,-389564586),c=p(c,u,s,l,e[n+2],17,606105819),l=p(l,c,u,s,e[n+3],22,-1044525330),s=p(s,l,c,u,e[n+4],7,-176418897),u=p(u,s,l,c,e[n+5],12,1200080426),c=p(c,u,s,l,e[n+6],17,-1473231341),l=p(l,c,u,s,e[n+7],22,-45705983),s=p(s,l,c,u,e[n+8],7,1770035416),u=p(u,s,l,c,e[n+9],12,-1958414417),c=p(c,u,s,l,e[n+10],17,-42063),l=p(l,c,u,s,e[n+11],22,-1990404162),s=p(s,l,c,u,e[n+12],7,1804603682),u=p(u,s,l,c,e[n+13],12,-40341101),c=p(c,u,s,l,e[n+14],17,-1502002290),s=d(s,l=p(l,c,u,s,e[n+15],22,1236535329),c,u,e[n+1],5,-165796510),u=d(u,s,l,c,e[n+6],9,-1069501632),c=d(c,u,s,l,e[n+11],14,643717713),l=d(l,c,u,s,e[n+0],20,-373897302),s=d(s,l,c,u,e[n+5],5,-701558691),u=d(u,s,l,c,e[n+10],9,38016083),c=d(c,u,s,l,e[n+15],14,-660478335),l=d(l,c,u,s,e[n+4],20,-405537848),s=d(s,l,c,u,e[n+9],5,568446438),u=d(u,s,l,c,e[n+14],9,-1019803690),c=d(c,u,s,l,e[n+3],14,-187363961),l=d(l,c,u,s,e[n+8],20,1163531501),s=d(s,l,c,u,e[n+13],5,-1444681467),u=d(u,s,l,c,e[n+2],9,-51403784),c=d(c,u,s,l,e[n+7],14,1735328473),s=f(s,l=d(l,c,u,s,e[n+12],20,-1926607734),c,u,e[n+5],4,-378558),u=f(u,s,l,c,e[n+8],11,-2022574463),c=f(c,u,s,l,e[n+11],16,1839030562),l=f(l,c,u,s,e[n+14],23,-35309556),s=f(s,l,c,u,e[n+1],4,-1530992060),u=f(u,s,l,c,e[n+4],11,1272893353),c=f(c,u,s,l,e[n+7],16,-155497632),l=f(l,c,u,s,e[n+10],23,-1094730640),s=f(s,l,c,u,e[n+13],4,681279174),u=f(u,s,l,c,e[n+0],11,-358537222),c=f(c,u,s,l,e[n+3],16,-722521979),l=f(l,c,u,s,e[n+6],23,76029189),s=f(s,l,c,u,e[n+9],4,-640364487),u=f(u,s,l,c,e[n+12],11,-421815835),c=f(c,u,s,l,e[n+15],16,530742520),s=h(s,l=f(l,c,u,s,e[n+2],23,-995338651),c,u,e[n+0],6,-198630844),u=h(u,s,l,c,e[n+7],10,1126891415),c=h(c,u,s,l,e[n+14],15,-1416354905),l=h(l,c,u,s,e[n+5],21,-57434055),s=h(s,l,c,u,e[n+12],6,1700485571),u=h(u,s,l,c,e[n+3],10,-1894986606),c=h(c,u,s,l,e[n+10],15,-1051523),l=h(l,c,u,s,e[n+1],21,-2054922799),s=h(s,l,c,u,e[n+8],6,1873313359),u=h(u,s,l,c,e[n+15],10,-30611744),c=h(c,u,s,l,e[n+6],15,-1560198380),l=h(l,c,u,s,e[n+13],21,1309151649),s=h(s,l,c,u,e[n+4],6,-145523070),u=h(u,s,l,c,e[n+11],10,-1120210379),c=h(c,u,s,l,e[n+2],15,718787259),l=h(l,c,u,s,e[n+9],21,-343485551),s=k(s,r),l=k(l,i),c=k(c,o),u=k(u,a);return Array(s,l,c,u)}function c(e,t,n,r,i,o){return k(N(k(k(t,e),k(r,o)),i),n)}function p(e,t,n,r,i,o,a){return c(t&n|~t&r,e,t,i,o,a)}function d(e,t,n,r,i,o,a){return c(t&r|n&~r,e,t,i,o,a)}function f(e,t,n,r,i,o,a){return c(t^n^r,e,t,i,o,a)}function h(e,t,n,r,i,o,a){return c(n^(t|~r),e,t,i,o,a)}this.hex=function(e){return a(i(e),n)},this.b64=function(e){return v(i(e),r)},this.any=function(e,t){return y(i(e),t)},this.raw=i,this.hex_hmac=function(e,t){return a(o(e,t),n)},this.b64_hmac=function(e,t){return v(o(e,t),r)},this.any_hmac=function(e,t,n){return y(o(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(n=e),this},this.setPad=function(e){return r=e||r,this},this.setUTF8=function(e){return"boolean"==typeof e&&(s=e),this}},SHA1:function(e){var t=!(!e||"boolean"!=typeof e.uppercase)&&e.uppercase,n=e&&"string"==typeof e.pad?e.pad:"=",s=!e||"boolean"!=typeof e.utf8||e.utf8;function r(e){return c(l(p(e=s?u(e):e),8*e.length))}function i(e,t){var n,r,i,o,a;for(e=s?u(e):e,t=s?u(t):t,16<(n=p(e)).length&&(n=l(n,8*e.length)),r=Array(16),i=Array(16),o=0;o<16;o+=1)r[o]=909522486^n[o],i[o]=1549556828^n[o];return a=l(r.concat(p(t)),512+8*t.length),c(l(i.concat(a),672))}function l(e,t){var n,r,i,o,a,s,l,c,u,p=Array(80),d=1732584193,f=-271733879,h=-1732584194,g=271733878,m=-1009589776;for(e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t,n=0;n<e.length;n+=16){for(o=d,a=f,s=h,l=g,c=m,r=0;r<80;r+=1)p[r]=r<16?e[n+r]:N(p[r-3]^p[r-8]^p[r-14]^p[r-16],1),i=k(k(N(d,5),function(e,t,n,r){if(e<20)return t&n|~t&r;if(e<40)return t^n^r;if(e<60)return t&n|t&r|n&r;return t^n^r}(r,f,h,g)),k(k(m,p[r]),(u=r)<20?1518500249:u<40?1859775393:u<60?-1894007588:-899497514)),m=g,g=h,h=N(f,30),f=d,d=i;d=k(d,o),f=k(f,a),h=k(h,s),g=k(g,l),m=k(m,c)}return Array(d,f,h,g,m)}this.hex=function(e){return a(r(e),t)},this.b64=function(e){return v(r(e),n)},this.any=function(e,t){return y(r(e),t)},this.raw=r,this.hex_hmac=function(e,t){return a(i(e,t))},this.b64_hmac=function(e,t){return v(i(e,t),n)},this.any_hmac=function(e,t,n){return y(i(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(t=e),this},this.setPad=function(e){return n=e||n,this},this.setUTF8=function(e){return"boolean"==typeof e&&(s=e),this}},SHA256:function(e){e&&"boolean"==typeof e.uppercase&&e.uppercase;var E,n=e&&"string"==typeof e.pad?e.pad:"=",s=!e||"boolean"!=typeof e.utf8||e.utf8;function r(e,t){return c(l(p(e=t?u(e):e),8*e.length))}function i(e,t){e=s?u(e):e,t=s?u(t):t;var n,r=0,i=p(e),o=Array(16),a=Array(16);for(16<i.length&&(i=l(i,8*e.length));r<16;r+=1)o[r]=909522486^i[r],a[r]=1549556828^i[r];return n=l(o.concat(p(t)),512+8*t.length),c(l(a.concat(n),768))}function C(e,t){return e>>>t|e<<32-t}function l(e,t){var n,r,i,o,a,s,l,c,u,p,d,f,h,g,m,y,v,_,b,w,x=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],S=new Array(64);for(e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t,u=0;u<e.length;u+=16){for(n=x[0],r=x[1],i=x[2],o=x[3],a=x[4],s=x[5],l=x[6],c=x[7],p=0;p<64;p+=1)S[p]=p<16?e[p+u]:k(k(k(C(w=S[p-2],17)^C(w,19)^w>>>10,S[p-7]),C(b=S[p-15],7)^C(b,18)^b>>>3),S[p-16]),d=k(k(k(k(c,C(_=a,6)^C(_,11)^C(_,25)),(v=a)&s^~v&l),E[p]),S[p]),f=k(C(y=n,2)^C(y,13)^C(y,22),(h=n)&(g=r)^h&(m=i)^g&m),c=l,l=s,s=a,a=k(o,d),o=i,i=r,r=n,n=k(d,f);x[0]=k(n,x[0]),x[1]=k(r,x[1]),x[2]=k(i,x[2]),x[3]=k(o,x[3]),x[4]=k(a,x[4]),x[5]=k(s,x[5]),x[6]=k(l,x[6]),x[7]=k(c,x[7])}return x}this.hex=function(e){return a(r(e,s))},this.b64=function(e){return v(r(e,s),n)},this.any=function(e,t){return y(r(e,s),t)},this.raw=function(e){return r(e,s)},this.hex_hmac=function(e,t){return a(i(e,t))},this.b64_hmac=function(e,t){return v(i(e,t),n)},this.any_hmac=function(e,t,n){return y(i(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&0,this},this.setPad=function(e){return n=e||n,this},this.setUTF8=function(e){return"boolean"==typeof e&&(s=e),this},E=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998]},SHA512:function(e){e&&"boolean"==typeof e.uppercase&&e.uppercase;var q,n=e&&"string"==typeof e.pad?e.pad:"=",s=!e||"boolean"!=typeof e.utf8||e.utf8;function r(e){return c(l(p(e=s?u(e):e),8*e.length))}function i(e,t){e=s?u(e):e,t=s?u(t):t;var n,r=0,i=p(e),o=Array(32),a=Array(32);for(32<i.length&&(i=l(i,8*e.length));r<32;r+=1)o[r]=909522486^i[r],a[r]=1549556828^i[r];return n=l(o.concat(p(t)),1024+8*t.length),c(l(a.concat(n),1536))}function l(e,t){var n,r,i,o,a,s,l,c,u,p,d,f,h,g,m,y,v,_,b,w,x,S,E=new Array(80),C=new Array(16),A=[new U(1779033703,-205731576),new U(-1150833019,-2067093701),new U(1013904242,-23791573),new U(-1521486534,1595750129),new U(1359893119,-1377402159),new U(-1694144372,725511199),new U(528734635,-79577749),new U(1541459225,327033209)],I=new U(0,0),k=new U(0,0),N=new U(0,0),P=new U(0,0),D=new U(0,0),T=new U(0,0),O=new U(0,0),M=new U(0,0),L=new U(0,0),R=new U(0,0),$=new U(0,0),F=new U(0,0),B=new U(0,0),j=new U(0,0),G=new U(0,0),z=new U(0,0),V=new U(0,0);for(void 0===q&&(q=[new U(1116352408,-685199838),new U(1899447441,602891725),new U(-1245643825,-330482897),new U(-373957723,-2121671748),new U(961987163,-213338824),new U(1508970993,-1241133031),new U(-1841331548,-1357295717),new U(-1424204075,-630357736),new U(-670586216,-1560083902),new U(310598401,1164996542),new U(607225278,1323610764),new U(1426881987,-704662302),new U(1925078388,-226784913),new U(-2132889090,991336113),new U(-1680079193,633803317),new U(-1046744716,-815192428),new U(-459576895,-1628353838),new U(-272742522,944711139),new U(264347078,-1953704523),new U(604807628,2007800933),new U(770255983,1495990901),new U(1249150122,1856431235),new U(1555081692,-1119749164),new U(1996064986,-2096016459),new U(-1740746414,-295247957),new U(-1473132947,766784016),new U(-1341970488,-1728372417),new U(-1084653625,-1091629340),new U(-958395405,1034457026),new U(-710438585,-1828018395),new U(113926993,-536640913),new U(338241895,168717936),new U(666307205,1188179964),new U(773529912,1546045734),new U(1294757372,1522805485),new U(1396182291,-1651133473),new U(1695183700,-1951439906),new U(1986661051,1014477480),new U(-2117940946,1206759142),new U(-1838011259,344077627),new U(-1564481375,1290863460),new U(-1474664885,-1136513023),new U(-1035236496,-789014639),new U(-949202525,106217008),new U(-778901479,-688958952),new U(-694614492,1432725776),new U(-200395387,1467031594),new U(275423344,851169720),new U(430227734,-1194143544),new U(506948616,1363258195),new U(659060556,-544281703),new U(883997877,-509917016),new U(958139571,-976659869),new U(1322822218,-482243893),new U(1537002063,2003034995),new U(1747873779,-692930397),new U(1955562222,1575990012),new U(2024104815,1125592928),new U(-2067236844,-1578062990),new U(-1933114872,442776044),new U(-1866530822,593698344),new U(-1538233109,-561857047),new U(-1090935817,-1295615723),new U(-965641998,-479046869),new U(-903397682,-366583396),new U(-779700025,566280711),new U(-354779690,-840897762),new U(-176337025,-294727304),new U(116418474,1914138554),new U(174292421,-1563912026),new U(289380356,-1090974290),new U(460393269,320620315),new U(685471733,587496836),new U(852142971,1086792851),new U(1017036298,365543100),new U(1126000580,-1676669620),new U(1288033470,-885112138),new U(1501505948,-60457430),new U(1607167915,987167468),new U(1816402316,1246189591)]),r=0;r<80;r+=1)E[r]=new U(0,0);for(e[t>>5]|=128<<24-(31&t),e[31+(t+128>>10<<5)]=t,i=e.length,r=0;r<i;r+=32){for(W(N,A[0]),W(P,A[1]),W(D,A[2]),W(T,A[3]),W(O,A[4]),W(M,A[5]),W(L,A[6]),W(R,A[7]),n=0;n<16;n+=1)E[n].h=e[r+2*n],E[n].l=e[r+2*n+1];for(n=16;n<80;n+=1)H(G,E[n-2],19),Q(z,E[n-2],29),X(V,E[n-2],6),F.l=G.l^z.l^V.l,F.h=G.h^z.h^V.h,H(G,E[n-15],1),H(z,E[n-15],8),X(V,E[n-15],7),$.l=G.l^z.l^V.l,$.h=G.h^z.h^V.h,g=E[n],m=F,y=E[n-7],v=$,_=E[n-16],S=x=w=b=void 0,b=(65535&m.l)+(65535&y.l)+(65535&v.l)+(65535&_.l),w=(m.l>>>16)+(y.l>>>16)+(v.l>>>16)+(_.l>>>16)+(b>>>16),x=(65535&m.h)+(65535&y.h)+(65535&v.h)+(65535&_.h)+(w>>>16),S=(m.h>>>16)+(y.h>>>16)+(v.h>>>16)+(_.h>>>16)+(x>>>16),g.l=65535&b|w<<16,g.h=65535&x|S<<16;for(n=0;n<80;n+=1)B.l=O.l&M.l^~O.l&L.l,B.h=O.h&M.h^~O.h&L.h,H(G,O,14),H(z,O,18),Q(V,O,9),F.l=G.l^z.l^V.l,F.h=G.h^z.h^V.h,H(G,N,28),Q(z,N,2),Q(V,N,7),$.l=G.l^z.l^V.l,$.h=G.h^z.h^V.h,j.l=N.l&P.l^N.l&D.l^P.l&D.l,j.h=N.h&P.h^N.h&D.h^P.h&D.h,o=I,a=R,s=F,l=B,c=q[n],u=E[n],h=f=d=p=void 0,p=(65535&a.l)+(65535&s.l)+(65535&l.l)+(65535&c.l)+(65535&u.l),d=(a.l>>>16)+(s.l>>>16)+(l.l>>>16)+(c.l>>>16)+(u.l>>>16)+(p>>>16),f=(65535&a.h)+(65535&s.h)+(65535&l.h)+(65535&c.h)+(65535&u.h)+(d>>>16),h=(a.h>>>16)+(s.h>>>16)+(l.h>>>16)+(c.h>>>16)+(u.h>>>16)+(f>>>16),o.l=65535&p|d<<16,o.h=65535&f|h<<16,Y(k,$,j),W(R,L),W(L,M),W(M,O),Y(O,T,I),W(T,D),W(D,P),W(P,N),Y(N,I,k);Y(A[0],A[0],N),Y(A[1],A[1],P),Y(A[2],A[2],D),Y(A[3],A[3],T),Y(A[4],A[4],O),Y(A[5],A[5],M),Y(A[6],A[6],L),Y(A[7],A[7],R)}for(r=0;r<8;r+=1)C[2*r]=A[r].h,C[2*r+1]=A[r].l;return C}function U(e,t){this.h=e,this.l=t}function W(e,t){e.h=t.h,e.l=t.l}function H(e,t,n){e.l=t.l>>>n|t.h<<32-n,e.h=t.h>>>n|t.l<<32-n}function Q(e,t,n){e.l=t.h>>>n|t.l<<32-n,e.h=t.l>>>n|t.h<<32-n}function X(e,t,n){e.l=t.l>>>n|t.h<<32-n,e.h=t.h>>>n}function Y(e,t,n){var r=(65535&t.l)+(65535&n.l),i=(t.l>>>16)+(n.l>>>16)+(r>>>16),o=(65535&t.h)+(65535&n.h)+(i>>>16),a=(t.h>>>16)+(n.h>>>16)+(o>>>16);e.l=65535&r|i<<16,e.h=65535&o|a<<16}this.hex=function(e){return a(r(e))},this.b64=function(e){return v(r(e),n)},this.any=function(e,t){return y(r(e),t)},this.raw=r,this.hex_hmac=function(e,t){return a(i(e,t))},this.b64_hmac=function(e,t){return v(i(e,t),n)},this.any_hmac=function(e,t,n){return y(i(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&0,this},this.setPad=function(e){return n=e||n,this},this.setUTF8=function(e){return"boolean"==typeof e&&(s=e),this}},RMD160:function(e){e&&"boolean"==typeof e.uppercase&&e.uppercase;var n=e&&"string"==typeof e.pad?e.pa:"=",s=!e||"boolean"!=typeof e.utf8||e.utf8,S=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],E=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],C=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],A=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];function r(e){return l(c(m(e=s?u(e):e),8*e.length))}function i(e,t){e=s?u(e):e,t=s?u(t):t;var n,r,i=m(e),o=Array(16),a=Array(16);for(16<i.length&&(i=c(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=c(o.concat(m(t)),512+8*t.length),l(c(a.concat(r),672))}function l(e){for(var t="",n=32*e.length,r=0;r<n;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t}function c(e,t){var n,r,i,o,a,s,l,c,u,p,d,f,h,g,m,y,v=1732584193,_=4023233417,b=2562383102,w=271733878,x=3285377520;for(e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t,o=e.length,i=0;i<o;i+=16){for(a=p=v,s=d=_,l=f=b,c=h=w,u=g=x,r=0;r<=79;r+=1)n=k(a,I(r,s,l,c)),n=k(n,e[i+S[r]]),n=k(n,0<=(y=r)&&y<=15?0:16<=y&&y<=31?1518500249:32<=y&&y<=47?1859775393:48<=y&&y<=63?2400959708:64<=y&&y<=79?2840853838:"rmd160_K1: j out of range"),n=k(N(n,C[r]),u),a=u,u=c,c=N(l,10),l=s,s=n,n=k(p,I(79-r,d,f,h)),n=k(n,e[i+E[r]]),n=k(n,0<=(m=r)&&m<=15?1352829926:16<=m&&m<=31?1548603684:32<=m&&m<=47?1836072691:48<=m&&m<=63?2053994217:64<=m&&m<=79?0:"rmd160_K2: j out of range"),n=k(N(n,A[r]),g),p=g,g=h,h=N(f,10),f=d,d=n;n=k(_,k(l,h)),_=k(b,k(c,g)),b=k(w,k(u,p)),w=k(x,k(a,d)),x=k(v,k(s,f)),v=n}return[v,_,b,w,x]}function I(e,t,n,r){return 0<=e&&e<=15?t^n^r:16<=e&&e<=31?t&n|~t&r:32<=e&&e<=47?(t|~n)^r:48<=e&&e<=63?t&r|n&~r:64<=e&&e<=79?t^(n|~r):"rmd160_f: j out of range"}this.hex=function(e){return a(r(e))},this.b64=function(e){return v(r(e),n)},this.any=function(e,t){return y(r(e),t)},this.raw=r,this.hex_hmac=function(e,t){return a(i(e,t))},this.b64_hmac=function(e,t){return v(i(e,t),n)},this.any_hmac=function(e,t,n){return y(i(e,t),n)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&0,this},this.setPad=function(e){return void 0!==e&&(n=e),this},this.setUTF8=function(e){return"boolean"==typeof e&&(s=e),this}}},t=this,n=!1,(n=i)&&"object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal===commonjsGlobal.global&&(t=commonjsGlobal),n?r&&r.exports===n?r.exports=e:n.Hashes=e:t.Hashes=e}()}),immutable=extend$2,hasOwnProperty$3=Object.prototype.hasOwnProperty;function extend$2(){for(var e=arguments,t={},n=0;n<arguments.length;n++){var r=e[n];for(var i in r)hasOwnProperty$3.call(r,i)&&(t[i]=r[i])}return t}var sha1=new hashes.SHA1,ohauth={qsString:function(t){return Object.keys(t).sort().map(function(e){return ohauth.percentEncode(e)+"="+ohauth.percentEncode(t[e])}).join("&")},stringQs:function(e){return e.split("&").filter(function(e){return""!==e}).reduce(function(e,t){var n=t.split("=");return e[decodeURIComponent(n[0])]=null===n[1]?"":decodeURIComponent(n[1]),e},{})},rawxhr:function(e,t,n,r,i){var o=new XMLHttpRequest,a=/^20\d$/;for(var s in o.onreadystatechange=function(){if(4===o.readyState&&0!==o.status){if(!a.test(o.status))return i(o,null);i(null,o)}},o.onerror=function(e){return i(e,null)},o.open(e,t,!0),r)o.setRequestHeader(s,r[s]);return o.send(n),o},xhr:function(e,t,n,r,i,o){var a=i&&i.header||{"Content-Type":"application/x-www-form-urlencoded"};return a.Authorization="OAuth "+ohauth.authHeader(n),ohauth.rawxhr(e,t,r,a,o)},nonce:function(){for(var e="";e.length<6;)e+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz"[Math.floor(61*Math.random())];return e},authHeader:function(t){return Object.keys(t).sort().map(function(e){return encodeURIComponent(e)+'="'+encodeURIComponent(t[e])+'"'}).join(", ")},timestamp:function(){return~~(new Date/1e3)},percentEncode:function(e){return encodeURIComponent(e).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29")},baseString:function(e,t,n){return n.oauth_signature&&delete n.oauth_signature,[e,ohauth.percentEncode(t),ohauth.percentEncode(ohauth.qsString(n))].join("&")},signature:function(e,t,n){return sha1.b64_hmac(ohauth.percentEncode(e)+"&"+ohauth.percentEncode(t),n)},headerGenerator:function(e){var c=(e=e||{}).consumer_key||"",u=e.consumer_secret||"",p=e.signature_method||"HMAC-SHA1",d=e.version||"1.0",f=e.token||"",h=e.token_secret||"";return function(e,t,n){e=e.toUpperCase(),"string"==typeof n&&0<n.length&&(n=ohauth.stringQs(n));var r=t.split("?",2),i=r[0],o=2===r.length?ohauth.stringQs(r[1]):{},a={oauth_consumer_key:c,oauth_signature_method:p,oauth_version:d,oauth_timestamp:ohauth.timestamp(),oauth_nonce:ohauth.nonce()};f&&(a.oauth_token=f);var s=immutable({},a,o,n),l=ohauth.baseString(e,i,s);return a.oauth_signature=ohauth.signature(u,h,l),"OAuth "+ohauth.authHeader(a)}}},ohauth_1=ohauth,resolveUrl$1=createCommonjsModule(function(e,t){e.exports=function(){var e=arguments,t=arguments.length;if(0===t)throw new Error("resolveUrl requires at least one argument; got none.");var n=document.createElement("base");if(n.href=arguments[0],1===t)return n.href;var r=document.getElementsByTagName("head")[0];r.insertBefore(n,r.firstChild);for(var i,o=document.createElement("a"),a=1;a<t;a++)o.href=e[a],i=o.href,n.href=i;return r.removeChild(n),i}}),assign$1=make_assign(),create$8=make_create(),trim=make_trim(),Global="undefined"!=typeof window?window:commonjsGlobal,util={assign:assign$1,create:create$8,trim:trim,bind:bind$3,slice:slice$5,each:each,map:map$5,pluck:pluck,isList:isList,isFunction:isFunction$2,isObject:isObject$2,Global:Global};function make_assign(){return Object.assign?Object.assign:function(n,e,t,r){for(var i=arguments,o=1;o<arguments.length;o++)each(Object(i[o]),function(e,t){n[t]=e});return n}}function make_create(){if(Object.create)return function(e,t,n,r){var i=slice$5(arguments,1);return assign$1.apply(this,[Object.create(e)].concat(i))};function o(){}return function(e,t,n,r){var i=slice$5(arguments,1);return o.prototype=e,assign$1.apply(this,[new o].concat(i))}}function make_trim(){return String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function bind$3(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}}function slice$5(e,t){return Array.prototype.slice.call(e,t||0)}function each(e,n){pluck(e,function(e,t){return n(e,t),!1})}function map$5(e,n){var r=isList(e)?[]:{};return pluck(e,function(e,t){return r[t]=n(e,t),!1}),r}function pluck(e,t){if(isList(e)){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(var r in e)if(e.hasOwnProperty(r)&&t(e[r],r))return e[r]}function isList(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}function isFunction$2(e){return e&&"[object Function]"==={}.toString.call(e)}function isObject$2(e){return e&&"[object Object]"==={}.toString.call(e)}var slice$6=util.slice,pluck$1=util.pluck,each$1=util.each,bind$4=util.bind,create$9=util.create,isList$1=util.isList,isFunction$3=util.isFunction,isObject$3=util.isObject,storeEngine={createStore:createStore},storeAPI={version:"2.0.12",enabled:!1,get:function(e,t){var n=this.storage.read(this._namespacePrefix+e);return this._deserialize(n,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(n){var r=this;this.storage.each(function(e,t){n.call(r,r._deserialize(e),(t||"").replace(r._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return createStore.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return createStore(this.storage,this.plugins,e)}};function _warn(){var e="undefined"==typeof console?null:console;e&&(e.warn?e.warn:e.log).apply(e,arguments)}function createStore(e,t,n){n=n||"",e&&!isList$1(e)&&(e=[e]),t&&!isList$1(t)&&(t=[t]);var r=n?"__storejs_"+n+"_":"",i=n?new RegExp("^"+r):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var o=create$9({_namespacePrefix:r,_namespaceRegexp:i,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var n=e.read(t)===t;return e.remove(t),n}catch(e){return!1}},_assignPluginFnProp:function(r,e){var i=this[e];this[e]=function(){var n=slice$6(arguments,0),e=this;var t=[function(){if(i)return each$1(arguments,function(e,t){n[t]=e}),i.apply(e,n)}].concat(n);return r.apply(e,t)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(t,e){if(!t)return e;var n="";try{n=JSON.parse(t)}catch(e){n=t}return void 0!==n?n:e},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(n){var r=this;if(isList$1(n))each$1(n,function(e){r._addPlugin(e)});else if(!pluck$1(this.plugins,function(e){return n===e})){if(this.plugins.push(n),!isFunction$3(n))throw new Error("Plugins must be function values that return objects");var e=n.call(this);if(!isObject$3(e))throw new Error("Plugins must return an object of function properties");each$1(e,function(e,t){if(!isFunction$3(e))throw new Error("Bad plugin property: "+t+" from plugin "+n.name+". Plugins should only return functions.");r._assignPluginFnProp(e,t)})}},addStorage:function(e){_warn("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},storeAPI,{plugins:[]});return o.raw={},each$1(o,function(e,t){isFunction$3(e)&&(o.raw[t]=bind$4(o,e))}),each$1(e,function(e){o._addStorage(e)}),each$1(t,function(e){o._addPlugin(e)}),o}var Global$1=util.Global,localStorage_1={name:"localStorage",read:read,write:write,each:each$2,remove:remove$2,clearAll:clearAll};function localStorage$1(){return Global$1.localStorage}function read(e){return localStorage$1().getItem(e)}function write(e,t){return localStorage$1().setItem(e,t)}function each$2(e){for(var t=localStorage$1().length-1;0<=t;t--){var n=localStorage$1().key(t);e(read(n),n)}}function remove$2(e){return localStorage$1().removeItem(e)}function clearAll(){return localStorage$1().clear()}var Global$2=util.Global,oldFFGlobalStorage={name:"oldFF-globalStorage",read:read$1,write:write$1,each:each$3,remove:remove$3,clearAll:clearAll$1},globalStorage=Global$2.globalStorage;function read$1(e){return globalStorage[e]}function write$1(e,t){globalStorage[e]=t}function each$3(e){for(var t=globalStorage.length-1;0<=t;t--){var n=globalStorage.key(t);e(globalStorage[n],n)}}function remove$3(e){return globalStorage.removeItem(e)}function clearAll$1(){each$3(function(e,t){delete globalStorage[e]})}var Global$3=util.Global,oldIEUserDataStorage={name:"oldIE-userDataStorage",write:write$2,read:read$2,each:each$4,remove:remove$4,clearAll:clearAll$2},storageName="storejs",doc=Global$3.document,_withStorageEl=_makeIEStorageElFunction(),disable=(Global$3.navigator?Global$3.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./);function write$2(e,t){var n;disable||(n=fixKey(e),_withStorageEl(function(e){e.setAttribute(n,t),e.save(storageName)}))}function read$2(e){if(!disable){var t=fixKey(e),n=null;return _withStorageEl(function(e){n=e.getAttribute(t)}),n}}function each$4(i){_withStorageEl(function(e){for(var t=e.XMLDocument.documentElement.attributes,n=t.length-1;0<=n;n--){var r=t[n];i(e.getAttribute(r.name),r.name)}})}function remove$4(e){var t=fixKey(e);_withStorageEl(function(e){e.removeAttribute(t),e.save(storageName)})}function clearAll$2(){_withStorageEl(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(storageName);for(var n=t.length-1;0<=n;n--)e.removeAttribute(t[n].name);e.save(storageName)})}var forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function fixKey(e){return e.replace(/^\d/,"___$&").replace(forbiddenCharsRegex,"___")}function _makeIEStorageElFunction(){if(!doc||!doc.documentElement||!doc.documentElement.addBehavior)return null;var n,e,r;try{(e=new ActiveXObject("htmlfile")).open(),e.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),e.close(),n=e.w.frames[0].document,r=n.createElement("div")}catch(e){r=doc.createElement("div"),n=doc.body}return function(e){var t=[].slice.call(arguments,0);t.unshift(r),n.appendChild(r),r.addBehavior("#default#userData"),r.load(storageName),e.apply(this,t),n.removeChild(r)}}var Global$4=util.Global,trim$1=util.trim,cookieStorage={name:"cookieStorage",read:read$3,write:write$3,each:each$5,remove:remove$5,clearAll:clearAll$3},doc$1=Global$4.document;function read$3(e){if(!e||!_has(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(doc$1.cookie.replace(new RegExp(t),"$1"))}function each$5(e){for(var t,n,r=doc$1.cookie.split(/; ?/g),i=r.length-1;0<=i;i--){trim$1(r[i])&&(t=r[i].split("="),n=unescape(t[0]),e(unescape(t[1]),n))}}function write$3(e,t){e&&(doc$1.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")}function remove$5(e){e&&_has(e)&&(doc$1.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function clearAll$3(){each$5(function(e,t){remove$5(t)})}function _has(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(doc$1.cookie)}var Global$5=util.Global,sessionStorage_1={name:"sessionStorage",read:read$4,write:write$4,each:each$6,remove:remove$6,clearAll:clearAll$4};function sessionStorage(){return Global$5.sessionStorage}function read$4(e){return sessionStorage().getItem(e)}function write$4(e,t){return sessionStorage().setItem(e,t)}function each$6(e){for(var t=sessionStorage().length-1;0<=t;t--){var n=sessionStorage().key(t);e(read$4(n),n)}}function remove$6(e){return sessionStorage().removeItem(e)}function clearAll$4(){return sessionStorage().clear()}var memoryStorage_1={name:"memoryStorage",read:read$5,write:write$5,each:each$7,remove:remove$7,clearAll:clearAll$5},memoryStorage={};function read$5(e){return memoryStorage[e]}function write$5(e,t){memoryStorage[e]=t}function each$7(e){for(var t in memoryStorage)memoryStorage.hasOwnProperty(t)&&e(memoryStorage[t],t)}function remove$7(e){delete memoryStorage[e]}function clearAll$5(e){memoryStorage={}}var all=[localStorage_1,oldFFGlobalStorage,oldIEUserDataStorage,cookieStorage,sessionStorage_1,memoryStorage_1];"object"!=typeof JSON&&(JSON={}),function(){var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,o,a,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;n<o;n+=1)a[n]=str(n,l)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)"string"==typeof rep[n]&&(i=str(r=rep[n],l))&&a.push(quote(r)+(gap?": ":":")+i);else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(i=str(r,l))&&a.push(quote(r)+(gap?": ":":")+i);return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;if(indent=gap="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if((rep=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(void 0!==(r=walk(i,n))?i[n]=r:delete i[n]);return reviver.call(e,t,i)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var json2=json2Plugin;function json2Plugin(){return{}}var plugins=[json2],store_legacy=storeEngine.createStore(all,plugins),osmAuth=function(l){var n,c,u={};function p(e){return e.oauth_timestamp=ohauth_1.timestamp(),e.oauth_nonce=ohauth_1.nonce(),e}function d(e){return{oauth_consumer_key:e.oauth_consumer_key,oauth_signature_method:"HMAC-SHA1"}}return u.authenticated=function(){return!(!c("oauth_token")||!c("oauth_token_secret"))},u.logout=function(){return c("oauth_token",""),c("oauth_token_secret",""),c("oauth_request_token_secret",""),u},u.authenticate=function(i){if(u.authenticated())return i();u.logout();var e,t,n,o,r=p(d(l)),a=l.url+"/oauth/request_token";function s(e,t){if(l.done(),e)return i(e);var n=ohauth_1.stringQs(t.response);c("oauth_token",n.oauth_token),c("oauth_token_secret",n.oauth_token_secret),i(null,u)}r.oauth_signature=ohauth_1.signature(l.oauth_secret,"",ohauth_1.baseString("POST",a,r)),l.singlepage||(n=[["width",e=600],["height",t=550],["left",screen.width/2-e/2],["top",screen.height/2-t/2]].map(function(e){return e.join("=")}).join(","),o=window.open("about:blank","oauth_window",n)),ohauth_1.xhr("POST",a,r,null,{},function(e,t){if(l.done(),e)return i(e);var n=ohauth_1.stringQs(t.response);c("oauth_request_token_secret",n.oauth_token_secret);var r=l.url+"/oauth/authorize?"+ohauth_1.qsString({oauth_token:n.oauth_token,oauth_callback:resolveUrl$1(l.landing)});l.singlepage?location.href=r:o.location=r}),l.loading(),window.authComplete=function(e){var t,n,r,i,o=ohauth_1.stringQs(e.split("?")[1]);t=o.oauth_token,n=l.url+"/oauth/access_token",r=p(d(l)),i=c("oauth_request_token_secret"),r.oauth_token=t,r.oauth_signature=ohauth_1.signature(l.oauth_secret,i,ohauth_1.baseString("POST",n,r)),ohauth_1.xhr("POST",n,r,null,{},s),l.loading(),delete window.authComplete}},u.bootstrapToken=function(e,r){function t(e,t){if(l.done(),e)return r(e);var n=ohauth_1.stringQs(t.response);c("oauth_token",n.oauth_token),c("oauth_token_secret",n.oauth_token_secret),r(null,u)}var n,i,o,a;n=e,i=l.url+"/oauth/access_token",o=p(d(l)),a=c("oauth_request_token_secret"),o.oauth_token=n,o.oauth_signature=ohauth_1.signature(l.oauth_secret,a,ohauth_1.baseString("POST",i,o)),ohauth_1.xhr("POST",i,o,null,{},t),l.loading()},u.xhr=function(a,n){return u.authenticated()?e():l.auto?u.authenticate(e):void n("not authenticated",null);function e(){var e=p(d(l)),t=c("oauth_token_secret"),n=!1!==a.prefix?l.url+a.path:a.path,r=n.replace(/#.*$/,"").split("?",2),i=r[0],o=2===r.length?r[1]:"";return a.options&&a.options.header&&"application/x-www-form-urlencoded"!==a.options.header["Content-Type"]||!a.content||(e=immutable(e,ohauth_1.stringQs(a.content))),e.oauth_token=c("oauth_token"),e.oauth_signature=ohauth_1.signature(l.oauth_secret,t,ohauth_1.baseString(a.method,i,immutable(e,ohauth_1.stringQs(o)))),ohauth_1.xhr(a.method,n,e,a.content,a.options,s)}function s(e,t){return e?n(e):t.responseXML?n(e,t.responseXML):n(e,t.response)}},u.preauth=function(e){if(e)return e.oauth_token&&c("oauth_token",e.oauth_token),e.oauth_token_secret&&c("oauth_token_secret",e.oauth_token_secret),u},u.options=function(e){return arguments.length?((l=e).url=l.url||"https://www.openstreetmap.org",l.landing=l.landing||"land.html",l.singlepage=l.singlepage||!1,l.loading=l.loading||function(){},l.done=l.done||function(){},u.preauth(l)):l},c=store_legacy.enabled?function(e,t){return 1===arguments.length?store_legacy.get(l.url+e):2===arguments.length?store_legacy.set(l.url+e,t):void 0}:(n={},function(e,t){return 1===arguments.length?n[l.url+e]:2===arguments.length?n[l.url+e]=t:void 0}),u.options(l),u},JXON=new function(){var E="keyValue",C="keyAttributes",A="@",I=[],t=/^\s*$/,n=/^(?:true|false)$/i;function k(e){return t.test(e)?null:n.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):isFinite(Date.parse(e))?new Date(e):e}function N(){}function P(e,t,n,r){var i,o,a=I.length,s=e.hasChildNodes(),l=e.hasAttributes(),c=Boolean(2&t),u=0,p="",d=!c||{};if(s)for(var f,h=0;h<e.childNodes.length;h++)4===(f=e.childNodes.item(h)).nodeType?p+=f.nodeValue:3===f.nodeType?p+=f.nodeValue.trim():1!==f.nodeType||f.prefix||I.push(f);var g,m=I.length,y=k(p);c||!s&&!l||(d=0===t?null===(g=y)?new N:g instanceof Object?g:new g.constructor(g):{});for(var v=a;v<m;v++)i=I[v].nodeName.toLowerCase(),o=P(I[v],t,n,r),d.hasOwnProperty(i)?(d[i].constructor!==Array&&(d[i]=[d[i]]),d[i].push(o)):(d[i]=o,u++);if(l){for(var _,b=e.attributes.length,w=r?"":A,x=r?{}:d,S=0;S<b;u++,S++)x[w+(_=e.attributes.item(S)).name.toLowerCase()]=k(_.value.trim());r&&(n&&Object.freeze(x),d[C]=x,u-=b-1)}return 3===t||(2===t||1===t&&0<u)&&p?d[E]=y:!c&&0===u&&p&&(d=y),n&&(c||0<u)&&Object.freeze(d),I.length=a,d}N.prototype.toString=function(){return"null"},N.prototype.valueOf=function(){return null},this.build=function(e,t,n,r){var i=1<arguments.length&&"number"==typeof t?3&t:1;return P(e,i,n||!1,3<arguments.length?r:3==i)},this.unbuild=function(e){var t=document.implementation.createDocument("","",null);return function e(t,n,r){var i,o;for(var a in r instanceof String||r instanceof Number||r instanceof Boolean?n.appendChild(t.createTextNode(r.toString())):r.constructor===Date&&n.appendChild(t.createTextNode(r.toGMTString())),r)if(i=r[a],!(isFinite(a)||i instanceof Function))if(a===E)null!==i&&!0!==i&&n.appendChild(t.createTextNode(i.constructor===Date?i.toGMTString():String(i)));else if(a===C)for(var s in i)n.setAttribute(s,i[s]);else if(a.charAt(0)===A)n.setAttribute(a.slice(1),i);else if(i.constructor===Array)for(var l=0;l<i.length;l++)o=t.createElement(a),e(t,o,i[l]),n.appendChild(o);else o=t.createElement(a),i instanceof Object?e(t,o,i):null!==i&&!0!==i&&o.appendChild(t.createTextNode(i.toString())),n.appendChild(o)}(t,t,e),t},this.stringify=function(e){return(new XMLSerializer).serializeToString(JXON.unbuild(e))}},tiler$5=utilTiler(),dispatch$6=dispatch("apiStatusChange","authLoading","authDone","change","loading","loaded","loadedNotes"),urlroot="https://www.openstreetmap.org",oauth=osmAuth({url:urlroot,oauth_consumer_key:"5A043yRSEugj4DJ5TljuapfnrflWDte8jTOcWLlT",oauth_secret:"aB3jKq1TRsCOUrfOIZ6oQMEDmv2ptV76PA54NGLL",loading:authLoading,done:authDone}),_blacklists=[".*.google(apis)?..*/(vt|kh)[?/].*([xyz]=.*){3}.*"],_tileCache={toLoad:{},loaded:{},inflight:{},seen:{},rtree:new RBush},_noteCache={toLoad:{},loaded:{},inflight:{},inflightPost:{},note:{},closed:{},rtree:new RBush},_userCache={toLoad:{},user:{}},_cachedApiStatus,_changeset={},_deferred=new Set,_connectionID=1,_tileZoom$3=16,_noteZoom=12,_rateLimitError,_userChangesets,_userDetails,_off,_maxWayNodes=2e3;function authLoading(){dispatch$6.call("authLoading")}function authDone(){dispatch$6.call("authDone")}function abortRequest$5(e){e&&e.abort()}function hasInflightRequests(e){return Object.keys(e.inflight).length}function abortUnwantedRequests$3(e,n){Object.keys(e.inflight).forEach(function(t){e.toLoad[t]||n.find(function(e){return t===e.id})||(abortRequest$5(e.inflight[t]),delete e.inflight[t])})}function getLoc(e){var t=e.lon&&e.lon.value,n=e.lat&&e.lat.value;return[parseFloat(t),parseFloat(n)]}function getNodes(e){for(var t=e.getElementsByTagName("nd"),n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]="n"+t[r].attributes.ref.value;return n}function getNodesJSON(e){for(var t=e.nodes,n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]="n"+t[r];return n}function getTags(e){for(var t=e.getElementsByTagName("tag"),n={},r=0,i=t.length;r<i;r++){var o=t[r].attributes;n[o.k.value]=o.v.value}return n}function getMembers(e){for(var t=e.getElementsByTagName("member"),n=new Array(t.length),r=0,i=t.length;r<i;r++){var o=t[r].attributes;n[r]={id:o.type.value[0]+o.ref.value,type:o.type.value,role:o.role.value}}return n}function getMembersJSON(e){for(var t=e.members,n=new Array(t.length),r=0,i=t.length;r<i;r++){var o=t[r];n[r]={id:o.type[0]+o.ref,type:o.type,role:o.role}}return n}function getVisible(e){return!e.visible||"false"!==e.visible.value}function parseComments(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if("comment"===r.nodeName){for(var i=r.childNodes,o={},a=0;a<i.length;a++){var s,l=i[a],c=l.nodeName;"#text"!==c&&(o[c]=l.textContent,"uid"!==c||(s=l.textContent)&&!_userCache.user[s]&&(_userCache.toLoad[s]=!0))}o&&t.push(o)}}return t}function encodeNoteRtree(e){return{minX:e.loc[0],minY:e.loc[1],maxX:e.loc[0],maxY:e.loc[1],data:e}}var jsonparsers={node:function(e,t){return new osmNode({id:t,visible:"boolean"!=typeof e.visible||e.visible,version:e.version.toString(),changeset:e.changeset.toString(),timestamp:e.timestamp,user:e.user,uid:e.uid.toString(),loc:[parseFloat(e.lon),parseFloat(e.lat)],tags:e.tags})},way:function(e,t){return new osmWay({id:t,visible:"boolean"!=typeof e.visible||e.visible,version:e.version.toString(),changeset:e.changeset.toString(),timestamp:e.timestamp,user:e.user,uid:e.uid.toString(),tags:e.tags,nodes:getNodesJSON(e)})},relation:function(e,t){return new osmRelation({id:t,visible:"boolean"!=typeof e.visible||e.visible,version:e.version.toString(),changeset:e.changeset.toString(),timestamp:e.timestamp,user:e.user,uid:e.uid.toString(),tags:e.tags,members:getMembersJSON(e)})}};function parseJSON(e,r,i){if(i=Object.assign({skipSeen:!0},i),!e)return r({message:"No JSON",status:-1});var t=e;if("object"!=typeof t&&(t=JSON.parse(e)),!t.elements)return r({message:"No JSON",status:-1});var o=t.elements,n=window.requestIdleCallback(function(){for(var e,t=[],n=0;n<o.length;n++)(e=function(e){var t,n=jsonparsers[e.type];if(!n)return null;if(t=osmEntity.id.fromOSM(e.type,e.id),i.skipSeen){if(_tileCache.seen[t])return null;_tileCache.seen[t]=!0}return n(e,t)}(o[n]))&&t.push(e);r(null,t)});_deferred.add(n)}var parsers={node:function(e,t){var n=e.attributes;return new osmNode({id:t,visible:getVisible(n),version:n.version.value,changeset:n.changeset&&n.changeset.value,timestamp:n.timestamp&&n.timestamp.value,user:n.user&&n.user.value,uid:n.uid&&n.uid.value,loc:getLoc(n),tags:getTags(e)})},way:function(e,t){var n=e.attributes;return new osmWay({id:t,visible:getVisible(n),version:n.version.value,changeset:n.changeset&&n.changeset.value,timestamp:n.timestamp&&n.timestamp.value,user:n.user&&n.user.value,uid:n.uid&&n.uid.value,tags:getTags(e),nodes:getNodes(e)})},relation:function(e,t){var n=e.attributes;return new osmRelation({id:t,visible:getVisible(n),version:n.version.value,changeset:n.changeset&&n.changeset.value,timestamp:n.timestamp&&n.timestamp.value,user:n.user&&n.user.value,uid:n.uid&&n.uid.value,tags:getTags(e),members:getMembers(e)})},note:function(e,t){var n=e.attributes,r=e.childNodes,i={};i.id=t,i.loc=getLoc(n);var o=!1;do{o&&(i.loc=geoVecAdd(i.loc,[1e-5,1e-5]));var a=geoExtent(i.loc).bbox(),o=_noteCache.rtree.search(a).length}while(o);for(var s=0;s<r.length;s++){var l=r[s],c=l.nodeName;"#text"!==c&&(i[c]="comments"===c?parseComments(l.childNodes):l.textContent)}var u=new osmNote(i),p=encodeNoteRtree(u);return _noteCache.note[u.id]=u,_noteCache.rtree.insert(p),u},user:function(e,t){var n=e.attributes,r={id:t,display_name:n.display_name&&n.display_name.value,account_created:n.account_created&&n.account_created.value,changesets_count:"0",active_blocks:"0"},i=e.getElementsByTagName("img");i&&i[0]&&i[0].getAttribute("href")&&(r.image_url=i[0].getAttribute("href"));var o=e.getElementsByTagName("changesets");o&&o[0]&&o[0].getAttribute("count")&&(r.changesets_count=o[0].getAttribute("count"));var a,s=e.getElementsByTagName("blocks");return s&&s[0]&&((a=s[0].getElementsByTagName("received"))&&a[0]&&a[0].getAttribute("active")&&(r.active_blocks=a[0].getAttribute("active"))),_userCache.user[t]=r,delete _userCache.toLoad[t],r}};function parseXML(e,r,i){if(i=Object.assign({skipSeen:!0},i),!e||!e.childNodes)return r({message:"No XML",status:-1});var o=e.childNodes[0].childNodes,t=window.requestIdleCallback(function(){for(var e,t=[],n=0;n<o.length;n++)(e=function(e){var t,n=parsers[e.nodeName];if(!n)return null;if("user"===e.nodeName){if(t=e.attributes.id.value,i.skipSeen&&_userCache.user[t])return delete _userCache.toLoad[t],null}else if("note"===e.nodeName)t=e.getElementsByTagName("id")[0].textContent;else if(t=osmEntity.id.fromOSM(e.nodeName,e.attributes.id.value),i.skipSeen){if(_tileCache.seen[t])return null;_tileCache.seen[t]=!0}return n(e,t)}(o[n]))&&t.push(e);r(null,t)});_deferred.add(t)}function updateRtree$3(e,t){_noteCache.rtree.remove(e,function(e,t){return e.data.id===t.data.id}),t&&_noteCache.rtree.insert(e)}function wrapcb(n,r,i){return function(e,t){return e?(400!==e.status&&401!==e.status&&403!==e.status||n.logout(),r.call(n,e)):n.getConnectionId()!==i?r.call(n,{message:"Connection Switched",status:-1}):r.call(n,e,t)}}var serviceOsm={init:function(){utilRebind(this,dispatch$6,"on")},reset:function(){return Array.from(_deferred).forEach(function(e){window.cancelIdleCallback(e),_deferred.delete(e)}),_connectionID++,_rateLimitError=_userDetails=_userChangesets=void 0,Object.values(_tileCache.inflight).forEach(abortRequest$5),Object.values(_noteCache.inflight).forEach(abortRequest$5),Object.values(_noteCache.inflightPost).forEach(abortRequest$5),_changeset.inflight&&abortRequest$5(_changeset.inflight),_tileCache={toLoad:{},loaded:{},inflight:{},seen:{},rtree:new RBush},_noteCache={toLoad:{},loaded:{},inflight:{},inflightPost:{},note:{},closed:{},rtree:new RBush},_userCache={toLoad:{},user:{}},_cachedApiStatus=void 0,_changeset={},this},getConnectionId:function(){return _connectionID},changesetURL:function(e){return urlroot+"/changeset/"+e},changesetsURL:function(e,t){var n=Math.max(0,Math.ceil(Math.log(t)/Math.LN2));return urlroot+"/history#map="+Math.floor(t)+"/"+e[1].toFixed(n)+"/"+e[0].toFixed(n)},entityURL:function(e){return urlroot+"/"+e.type+"/"+e.osmId()},historyURL:function(e){return urlroot+"/"+e.type+"/"+e.osmId()+"/history"},userURL:function(e){return urlroot+"/user/"+e},noteURL:function(e){return urlroot+"/note/"+e.id},noteReportURL:function(e){return urlroot+"/reports/new?reportable_type=Note&reportable_id="+e.id},loadFromAPI:function(r,i,o){o=Object.assign({skipSeen:!0},o);var a=this,s=_connectionID;function n(e,t){if(a.getConnectionId()===s){var n=a.authenticated();if(n&&e&&e.status&&(400===e.status||401===e.status||403===e.status))a.logout(),a.loadFromAPI(r,i,o);else if(n||_rateLimitError||!e||!e.status||509!==e.status&&429!==e.status?(e&&"online"===_cachedApiStatus||!e&&"online"!==_cachedApiStatus)&&a.reloadApiStatus():(_rateLimitError=e,dispatch$6.call("change"),a.reloadApiStatus()),i)return e?i(e):(-1!==r.indexOf(".json")?parseJSON:parseXML)(t,i,o)}else i&&i({message:"Connection Switched",status:-1})}if(this.authenticated())return oauth.xhr({method:"GET",path:r},n);var e=urlroot+r,t=new AbortController;return d3_json(e,{signal:t.signal}).then(function(e){n(null,e)}).catch(function(e){var t;"AbortError"!==e.name&&n((t=e.message.match(/^\d{3}/))?{status:+t[0],statusText:e.message}:e.message)}),t},loadEntity:function(e,n){var t=osmEntity.id.type(e),r=osmEntity.id.toOSM(e);this.loadFromAPI("/api/0.6/"+t+"/"+r+("node"!==t?"/full":"")+".json",function(e,t){n&&n(e,{data:t})},{skipSeen:!1})},loadEntityVersion:function(e,t,n){var r=osmEntity.id.type(e),i=osmEntity.id.toOSM(e);this.loadFromAPI("/api/0.6/"+r+"/"+i+"/"+t+".json",function(e,t){n&&n(e,{data:t})},{skipSeen:!1})},loadMultiple:function(e,i){var o=this,a=utilArrayGroupBy(utilArrayUniq(e),osmEntity.id.type);Object.keys(a).forEach(function(e){var t=e+"s",n=a[e].map(function(e){return osmEntity.id.toOSM(e)}),r={skipSeen:!1};utilArrayChunk(n,150).forEach(function(e){o.loadFromAPI("/api/0.6/"+t+".json?"+t+"="+e.join(),function(e,t){i&&i(e,{data:t})},r)})})},putChangeset:function(r,i,o){var a=_connectionID;if(_changeset.inflight)return o({message:"Changeset already inflight",status:-2},r);if(_changeset.open)return t.call(this,null,_changeset.open);var e={method:"PUT",path:"/api/0.6/changeset/create",options:{header:{"Content-Type":"text/xml"}},content:JXON.stringify(r.asJXON())};function t(e,t){if(_changeset.inflight=null,e)return o(e,r);_changeset.open=t,r=r.update({id:t});var n={method:"POST",path:"/api/0.6/changeset/"+t+"/upload",options:{header:{"Content-Type":"text/xml"}},content:JXON.stringify(r.osmChangeJXON(i))};_changeset.inflight=oauth.xhr(n,wrapcb(this,s,a))}function s(e){if(_changeset.inflight=null,e)return o(e,r);window.setTimeout(function(){o(null,r)},2500),_changeset.open=null,this.getConnectionId()===a&&oauth.xhr({method:"PUT",path:"/api/0.6/changeset/"+r.id+"/close",options:{header:{"Content-Type":"text/xml"}}},function(){return!0})}_changeset.inflight=oauth.xhr(e,wrapcb(this,t,a))},loadUsers:function(e,n){var t=[],r=[];function i(e,t){if(e)return n(e);return parseXML(t,function(e,t){return e?n(e):n(void 0,t)},{skipSeen:!0})}utilArrayUniq(e).forEach(function(e){_userCache.user[e]?(delete _userCache.toLoad[e],r.push(_userCache.user[e])):t.push(e)}),(!r.length&&this.authenticated()||(n(void 0,r),this.authenticated()))&&utilArrayChunk(t,150).forEach(function(e){oauth.xhr({method:"GET",path:"/api/0.6/users?users="+e.join()},wrapcb(this,i,_connectionID))}.bind(this))},loadUser:function(e,n){if(_userCache.user[e]||!this.authenticated())return delete _userCache.toLoad[e],n(void 0,_userCache.user[e]);oauth.xhr({method:"GET",path:"/api/0.6/user/"+e},wrapcb(this,function(e,t){if(e)return n(e);return parseXML(t,function(e,t){return e?n(e):n(void 0,t[0])},{skipSeen:!0})},_connectionID))},userDetails:function(n){if(_userDetails)return n(void 0,_userDetails);oauth.xhr({method:"GET",path:"/api/0.6/user/details"},wrapcb(this,function(e,t){if(e)return n(e);return parseXML(t,function(e,t){return e?n(e):(_userDetails=t[0],n(void 0,_userDetails))},{skipSeen:!1})},_connectionID))},userChangesets:function(n){if(_userChangesets)return n(void 0,_userChangesets);function r(e,t){return e?n(e):(_userChangesets=Array.prototype.map.call(t.getElementsByTagName("changeset"),function(e){return{tags:getTags(e)}}).filter(function(e){var t=e.tags.comment;return t&&""!==t}),n(void 0,_userChangesets))}this.userDetails(wrapcb(this,function(e,t){if(e)return n(e);oauth.xhr({method:"GET",path:"/api/0.6/changesets?user="+t.id},wrapcb(this,r,_connectionID))},_connectionID))},status:function(c){var e=urlroot+"/api/capabilities",t=wrapcb(this,function(e,t){if(e)return c(e,null);for(var n=t.getElementsByTagName("blacklist"),r=[],i=0;i<n.length;i++){var o=n[i].getAttribute("regex");o&&r.push(o)}r.length&&(_blacklists=r);{if(_rateLimitError)return c(_rateLimitError,"rateLimited");var a=t.getElementsByTagName("waynodes"),s=a.length&&parseInt(a[0].getAttribute("maximum"),10);s&&isFinite(s)&&(_maxWayNodes=s);var l=t.getElementsByTagName("status")[0].getAttribute("api");return c(void 0,l)}},_connectionID);d3_xml(e).then(function(e){t(null,e)}).catch(function(e){t(e.message)})},reloadApiStatus:function(){var n;this.throttledReloadApiStatus||((n=this).throttledReloadApiStatus=throttle(function(){n.status(function(e,t){t!==_cachedApiStatus&&(_cachedApiStatus=t,dispatch$6.call("apiStatusChange",n,e,t))})},500)),this.throttledReloadApiStatus()},maxWayNodes:function(){return _maxWayNodes},loadTiles:function(e,t){var n,r;_off||(n=tiler$5.zoomExtent([_tileZoom$3,_tileZoom$3]).getTiles(e),r=hasInflightRequests(_tileCache),abortUnwantedRequests$3(_tileCache,n),r&&!hasInflightRequests(_tileCache)&&dispatch$6.call("loaded"),n.forEach(function(e){this.loadTile(e,t)},this))},loadTile:function(r,i){_off||_tileCache.loaded[r.id]||_tileCache.inflight[r.id]||(hasInflightRequests(_tileCache)||dispatch$6.call("loading"),_tileCache.inflight[r.id]=this.loadFromAPI("/api/0.6/map.json?bbox="+r.extent.toParam(),function(e,t){{var n;delete _tileCache.inflight[r.id],e||(delete _tileCache.toLoad[r.id],_tileCache.loaded[r.id]=!0,(n=r.extent.bbox()).id=r.id,_tileCache.rtree.insert(n))}i&&i(e,Object.assign({data:t},r));hasInflightRequests(_tileCache)||dispatch$6.call("loaded")},{skipSeen:!0}))},isDataLoaded:function(e){var t={minX:e[0],minY:e[1],maxX:e[0],maxY:e[1]};return _tileCache.rtree.collides(t)},loadTileAtLoc:function(e,t){var n,r,i;50<Object.keys(_tileCache.toLoad).length||(n=geoZoomToScale(_tileZoom$3+1),r=geoRawMercator().scale(n)(e),i=geoRawMercator().transform({k:n,x:-r[0],y:-r[1]}),tiler$5.zoomExtent([_tileZoom$3,_tileZoom$3]).getTiles(i).forEach(function(e){_tileCache.toLoad[e.id]||_tileCache.loaded[e.id]||_tileCache.inflight[e.id]||(_tileCache.toLoad[e.id]=!0,this.loadTile(e,t))},this))},loadNotes:function(e,t){var n,r,i,o;t=Object.assign({limit:1e4,closed:7},t),_off||(n=this,r="/api/0.6/notes?limit="+t.limit+"&closed="+t.closed+"&bbox=",i=throttle(function(){var e=Object.keys(_userCache.toLoad);e.length&&n.loadUsers(e,function(){})},750),o=tiler$5.zoomExtent([_noteZoom,_noteZoom]).getTiles(e),abortUnwantedRequests$3(_noteCache,o),o.forEach(function(t){_noteCache.loaded[t.id]||_noteCache.inflight[t.id]||(_noteCache.inflight[t.id]=n.loadFromAPI(r+t.extent.toParam(),function(e){delete _noteCache.inflight[t.id],e||(_noteCache.loaded[t.id]=!0),i(),dispatch$6.call("loadedNotes")},{skipSeen:!1}))}))},postNoteCreate:function(n,r){if(!this.authenticated())return r({message:"Not Authenticated",status:-3},n);if(_noteCache.inflightPost[n.id])return r({message:"Note update already inflight",status:-2},n);var e,t;n.loc[0]&&n.loc[1]&&n.newComment&&(e=n.newComment,n.newCategory&&"None"!==n.newCategory&&(e+=" #"+n.newCategory),t="/api/0.6/notes?"+utilQsString({lon:n.loc[0],lat:n.loc[1],text:e}),_noteCache.inflightPost[n.id]=oauth.xhr({method:"POST",path:t},wrapcb(this,function(e,t){if(delete _noteCache.inflightPost[n.id],e)return r(e);return this.removeNote(n),parseXML(t,function(e,t){return e?r(e):r(void 0,t[0])},{skipSeen:!1})},_connectionID)))},postNoteUpdate:function(n,e,r){if(!this.authenticated())return r({message:"Not Authenticated",status:-3},n);if(_noteCache.inflightPost[n.id])return r({message:"Note update already inflight",status:-2},n);var i;if("closed"!==n.status&&"closed"===e)i="close";else if("open"!==n.status&&"open"===e)i="reopen";else if(i="comment",!n.newComment)return;var t="/api/0.6/notes/"+n.id+"/"+i;n.newComment&&(t+="?"+utilQsString({text:n.newComment})),_noteCache.inflightPost[n.id]=oauth.xhr({method:"POST",path:t},wrapcb(this,function(e,t){if(delete _noteCache.inflightPost[n.id],e)return r(e);this.removeNote(n),"close"===i?_noteCache.closed[n.id]=!0:"reopen"===i&&delete _noteCache.closed[n.id];return parseXML(t,function(e,t){return e?r(e):r(void 0,t[0])},{skipSeen:!1})},_connectionID))},switch:function(e){return urlroot=e.urlroot,oauth.options(Object.assign({url:urlroot,loading:authLoading,done:authDone},e)),this.reset(),this.userChangesets(function(){}),dispatch$6.call("change"),this},toggle:function(e){return _off=!e,this},isChangesetInflight:function(){return!!_changeset.inflight},caches:function(e){function t(t){var n={};return Object.keys(t).forEach(function(e){"rtree"===e?n.rtree=(new RBush).fromJSON(t.rtree.toJSON()):"note"===e?(n.note={},Object.keys(t.note).forEach(function(e){n.note[e]=osmNote(t.note[e])})):n[e]=JSON.parse(JSON.stringify(t[e]))}),n}return arguments.length?"get"===e?{tile:_tileCache,note:_noteCache,user:_userCache}:(e.tile&&((_tileCache=e.tile).inflight={}),e.note&&((_noteCache=e.note).inflight={},_noteCache.inflightPost={}),e.user&&(_userCache=e.user),this):{tile:t(_tileCache),note:t(_noteCache),user:t(_userCache)}},logout:function(){return _userDetails=_userChangesets=void 0,oauth.logout(),dispatch$6.call("change"),this},authenticated:function(){return oauth.authenticated()},authenticate:function(n){var r=this,i=_connectionID;return _userDetails=_userChangesets=void 0,oauth.authenticate(function(e,t){e?n&&n(e):r.getConnectionId()===i?(_rateLimitError=void 0,dispatch$6.call("change"),n&&n(e,t),r.userChangesets(function(){})):n&&n({message:"Connection Switched",status:-1})})},imageryBlacklists:function(){return _blacklists},tileZoom:function(e){return arguments.length?(_tileZoom$3=e,this):_tileZoom$3},notes:function(e){var t=e.clipExtent(),n=[t[0][0],t[1][1]],r=[t[1][0],t[0][1]],i=geoExtent(e.invert(n),e.invert(r)).bbox();return _noteCache.rtree.search(i).map(function(e){return e.data})},getNote:function(e){return _noteCache.note[e]},removeNote:function(e){e instanceof osmNote&&e.id&&(delete _noteCache.note[e.id],updateRtree$3(encodeNoteRtree(e),!1))},replaceNote:function(e){if(e instanceof osmNote&&e.id)return updateRtree$3(encodeNoteRtree(_noteCache.note[e.id]=e),!0),e},getClosedIDs:function(){return Object.keys(_noteCache.closed).sort()}},apibase$3="https://wiki.openstreetmap.org/w/api.php",_inflight$1={},_wikibaseCache={},_localeIDs={en:!1},debouncedRequest=debounce(request,500,{leading:!1});function request(t,n){var e;_inflight$1[t]||(e=new AbortController,_inflight$1[t]=e,d3_json(t,{signal:e.signal}).then(function(e){delete _inflight$1[t],n&&n(null,e)}).catch(function(e){delete _inflight$1[t],"AbortError"!==e.name&&n&&n(e.message)}))}function localizedToString(e,t){return(e=e&&(e[t]||e.en))?e.value:""}var serviceOsmWikibase={init:function(){_inflight$1={},_wikibaseCache={},_localeIDs={}},reset:function(){Object.values(_inflight$1).forEach(function(e){e.abort()}),_inflight$1={}},claimToValue:function(e,t,n){if(e.claims[t]){var r,i,o=_localeIDs[n];e.claims[t].forEach(function(e){r||"preferred"!==e.rank||(r=e),o&&e.qualifiers&&e.qualifiers.P26&&e.qualifiers.P26[0].datavalue.value.id===o&&(i=e)});var a=i||r;if(a){var s=a.mainsnak.datavalue;return"wikibase-entityid"===s.type?s.value.id:s.value}}},monolingualClaimToValueObj:function(e,t){if(e&&e.claims[t])return e.claims[t].reduce(function(e,t){var n=t.mainsnak.datavalue.value;return e[n.language]=n.text,e},{})},toSitelink:function(e,t){return(t?"Tag:"+e+"="+t:"Key:"+e).replace(/_/g," ").trim()},getEntity:function(r,i){var o,e=r.debounce?debouncedRequest:request,a=this,t=[],s={},l=!!r.rtype&&("Relation:"+r.rtype).replace(/_/g," ").trim(),c=!!r.key&&this.toSitelink(r.key),u=!(!r.key||!r.value)&&this.toSitelink(r.key,r.value);if(r.langCode&&void 0===_localeIDs[r.langCode]&&(o=("Locale:"+r.langCode).replace(/_/g," ").trim(),t.push(o)),l&&(_wikibaseCache[l]?s.rtype=_wikibaseCache[l]:t.push(l)),c&&(_wikibaseCache[c]?s.key=_wikibaseCache[c]:t.push(c)),u&&(_wikibaseCache[u]?s.tag=_wikibaseCache[u]:t.push(u)),!t.length)return i(null,s);var n={action:"wbgetentities",sites:"wiki",titles:t.join("|"),languages:r.langCode,languagefallback:1,origin:"*",format:"json"};e(apibase$3+"?"+utilQsString(n),function(e,t){var n;e?i(e):!t.success||t.error?i(t.error.messages.map(function(e){return e.html["*"]}).join("<br>")):(n=!1,Object.values(t.entities).forEach(function(e){var t;""!==e.missing&&(e.description=localizedToString(e.descriptions,r.langCode),e.label=localizedToString(e.labels,r.langCode),(t=e.sitelinks.wiki.title)===l?(_wikibaseCache[l]=e,s.rtype=e):t===c?(_wikibaseCache[c]=e,s.key=e):t===u?(_wikibaseCache[u]=e,s.tag=e):t===o?n=e.id:console.log("Unexpected title "+t))}),o&&a.addLocale(r.langCode,n),i(null,s))})},getDocs:function(e,p){var d=this,f=_mainLocalizer.localeCode().toLowerCase();e.langCode=f,this.getEntity(e,function(e,t){var n,r,i,o,a,s,l,c;function u(e,t,n){if(e&&e[t])return{title:e[t],text:n,url:"https://wiki.openstreetmap.org/wiki/"+e[t]}}e?p(e):(n=t.rtype||t.tag||t.key)?(r={title:n.title,description:n.description,editURL:"https://wiki.openstreetmap.org/wiki/"+n.title},n.claims&&((o=d.claimToValue(n,"P4",f))?i="https://commons.wikimedia.org/w/index.php":(o=d.claimToValue(n,"P28",f))&&(i="https://wiki.openstreetmap.org/w/index.php"),i&&o&&(r.imageURL=i+"?"+utilQsString({title:"Special:Redirect/file/"+o,width:400}))),a=d.monolingualClaimToValueObj(t.rtype,"P31"),s=d.monolingualClaimToValueObj(t.tag,"P31"),l=d.monolingualClaimToValueObj(t.key,"P31"),c=f.split("-",2)[0],r.wiki=u(a,f,"inspector.wiki_reference")||u(a,c,"inspector.wiki_reference")||u(a,"en","inspector.wiki_en_reference")||u(s,f,"inspector.wiki_reference")||u(s,c,"inspector.wiki_reference")||u(s,"en","inspector.wiki_en_reference")||u(l,f,"inspector.wiki_reference")||u(l,c,"inspector.wiki_reference")||u(l,"en","inspector.wiki_en_reference"),p(null,r)):p("No entity")})},addLocale:function(e,t){_localeIDs[e]=t},apibase:function(e){return arguments.length?(apibase$3=e,this):apibase$3}},jsonpCache={};function jsonpRequest(e,t){var n,r={abort:function(){}};if(window.JSONP_FIX)return 0===window.JSONP_DELAY?t(window.JSONP_FIX):(n=window.setTimeout(function(){t(window.JSONP_FIX)},window.JSONP_DELAY||0),r.abort=function(){window.clearTimeout(n)}),r;var i,o,a=(i=e.match(/callback=(\w+)/),o=i?i[1]:function(){for(var e="",t=-1;++t<15;)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Math.floor(52*Math.random()));return e}(),jsonpCache[o]=function(e){jsonpCache[o]&&t(e),s()},r.abort=s,"jsonpCache."+o);function s(){delete jsonpCache[o],l.remove()}var l=select("head").append("script").attr("type","text/javascript").attr("src",e.replace(/(\{|%7B)callback(\}|%7D)/,a));return r}window.jsonpCache=jsonpCache;var bubbleApi="https://dev.virtualearth.net/mapcontrol/HumanScaleServices/GetBubbles.ashx?",streetsideImagesApi="https://t.ssl.ak.tiles.virtualearth.net/tiles/",bubbleAppKey="AuftgJsO0Xs8Ts4M1xZUQJQXJNsvmh3IV8DkNieCiy3tCwCUMq76-WpkrBtNAuEm",pannellumViewerCSS="pannellum-streetside/pannellum.css",pannellumViewerJS="pannellum-streetside/pannellum.js",maxResults$2=2e3,tileZoom$2=16.5,tiler$6=utilTiler().zoomExtent([tileZoom$2,tileZoom$2]).skipNullIsland(!0),dispatch$7=dispatch("loadedBubbles","viewerChanged"),minHfov=10,maxHfov=90,defaultHfov=45,_hires=!1,_resolution=512,_currScene=0,_ssCache,_pannellumViewer,_sceneOptions,_dataUrlArray=[];function abortRequest$6(e){e.abort()}function localeTimestamp(e){if(!e)return null;var t=new Date(e);return isNaN(t.getTime())?null:t.toLocaleString(_mainLocalizer.localeCode(),{day:"numeric",month:"short",year:"numeric"})}function loadTiles$2(t,n,e,r){var i=tiler$6.margin(r).getTiles(e),o=_ssCache[t];Object.keys(o.inflight).forEach(function(t){i.find(function(e){return 0===t.indexOf(e.id+",")})||(abortRequest$6(o.inflight[t]),delete o.inflight[t])}),i.forEach(function(e){return loadNextTilePage$2(t,n,e)})}function loadNextTilePage$2(n,e,t){var r=_ssCache[n],i=r.nextPage[t.id]||0,o=t.id+","+String(i);r.loaded[o]||r.inflight[o]||(r.inflight[o]=getBubbles(e,t,function(e){var t;r.loaded[o]=!0,delete r.inflight[o],e&&(e.shift(),t=e.map(function(e){if(r.points[e.id])return null;var t=[e.lo,e.la],n={loc:t,key:e.id,ca:e.he,captured_at:e.cd,captured_by:"microsoft",pr:e.pr,ne:e.ne,pano:!0,sequenceKey:null};return r.points[e.id]=n,void 0===e.pr&&r.leaders.push(e.id),{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1],data:n}}).filter(Boolean),r.rtree.load(t),connectSequences(),"bubbles"===n&&dispatch$7.call("loadedBubbles"))}))}function connectSequences(){for(var e=_ssCache.bubbles,t=[],n=0;n<e.leaders.length;n++){for(var r=e.points[e.leaders[n]],i={},o={key:r.key,bubbles:[]},a=!1;o.bubbles.push(r),i[r.key]=!0,void 0===r.ne?a=!0:r=e.points[r.ne],r&&!i[r.key]&&!a;);if(a){_ssCache.sequences[o.key]=o;for(var s=0;s<o.bubbles.length;s++)o.bubbles[s].sequenceKey=o.key;o.geojson={type:"LineString",properties:{key:o.key},coordinates:o.bubbles.map(function(e){return e.loc})}}else t.push(e.leaders[n])}e.leaders=t}function getBubbles(e,t,n){var r=t.extent.rectangle();return jsonpRequest(e+utilQsString({n:r[3],s:r[1],e:r[2],w:r[0],c:maxResults$2,appkey:bubbleAppKey,jsCallback:"{callback}"}),function(e){!e||e.error?n(null):n(e)})}function partitionViewport$2(e){var t=geoScaleToZoom(e.scale()),n=Math.ceil(2*t)/2+2.5;return utilTiler().zoomExtent([n,n]).getTiles(e).map(function(e){return e.extent})}function searchLimited$2(r,e,i){return r=r||5,partitionViewport$2(e).reduce(function(e,t){var n=i.search(t.bbox()).slice(0,r).map(function(e){return e.data});return n.length?e.concat(n):e},[])}function loadImage(n){return new Promise(function(e){var t=new Image;t.onload=function(){document.getElementById("ideditor-canvas"+n.face).getContext("2d").drawImage(t,n.x,n.y),e({imgInfo:n,status:"ok"})},t.onerror=function(){e({data:n,status:"error"})},t.setAttribute("crossorigin",""),t.src=n.url})}function loadCanvas(e){return Promise.all(e.map(loadImage)).then(function(e){var t=document.getElementById("ideditor-canvas"+e[0].imgInfo.face),n=e[0].imgInfo.face;return _dataUrlArray[{"01":0,"02":1,"03":2,10:3,11:4,12:5}[n]]=t.toDataURL("image/jpeg",1),{status:"loadCanvas for face "+e[0].imgInfo.face+"ok"}})}function loadFaces(e){return Promise.all(e.map(loadCanvas)).then(function(){return{status:"loadFaces done"}})}function setupCanvas(e,t){t&&e.selectAll("#ideditor-stitcher-canvases").remove(),e.selectAll("#ideditor-stitcher-canvases").data([0]).enter().append("div").attr("id","ideditor-stitcher-canvases").attr("display","none").selectAll("canvas").data(["canvas01","canvas02","canvas03","canvas10","canvas11","canvas12"]).enter().append("canvas").attr("id",function(e){return"ideditor-"+e}).attr("width",_resolution).attr("height",_resolution)}function qkToXY(e){for(var t=0,n=0,r=256,i=e.length;0<i;i--){var o=e[i-1];t+=("1"===o||"3"===o)*r,n+=("2"===o||"3"===o)*r,r*=2}return[t,n]}function getQuadKeys(){var e=_resolution/256,t=16==e?["0000","0001","0010","0011","0100","0101","0110","0111","1000","1001","1010","1011","1100","1101","1110","1111","0002","0003","0012","0013","0102","0103","0112","0113","1002","1003","1012","1013","1102","1103","1112","1113","0020","0021","0030","0031","0120","0121","0130","0131","1020","1021","1030","1031","1120","1121","1130","1131","0022","0023","0032","0033","0122","0123","0132","0133","1022","1023","1032","1033","1122","1123","1132","1133","0200","0201","0210","0211","0300","0301","0310","0311","1200","1201","1210","1211","1300","1301","1310","1311","0202","0203","0212","0213","0302","0303","0312","0313","1202","1203","1212","1213","1302","1303","1312","1313","0220","0221","0230","0231","0320","0321","0330","0331","1220","1221","1230","1231","1320","1321","1330","1331","0222","0223","0232","0233","0322","0323","0332","0333","1222","1223","1232","1233","1322","1323","1332","1333","2000","2001","2010","2011","2100","2101","2110","2111","3000","3001","3010","3011","3100","3101","3110","3111","2002","2003","2012","2013","2102","2103","2112","2113","3002","3003","3012","3013","3102","3103","3112","3113","2020","2021","2030","2031","2120","2121","2130","2131","3020","3021","3030","3031","3120","3121","3130","3131","2022","2023","2032","2033","2122","2123","2132","2133","3022","3023","3032","3033","3122","3123","3132","3133","2200","2201","2210","2211","2300","2301","2310","2311","3200","3201","3210","3211","3300","3301","3310","3311","2202","2203","2212","2213","2302","2303","2312","2313","3202","3203","3212","3213","3302","3303","3312","3313","2220","2221","2230","2231","2320","2321","2330","2331","3220","3221","3230","3231","3320","3321","3330","3331","2222","2223","2232","2233","2322","2323","2332","2333","3222","3223","3232","3233","3322","3323","3332","3333"]:8==e?["000","001","010","011","100","101","110","111","002","003","012","013","102","103","112","113","020","021","030","031","120","121","130","131","022","023","032","033","122","123","132","133","200","201","210","211","300","301","310","311","202","203","212","213","302","303","312","313","220","221","230","231","320","321","330","331","222","223","232","233","322","323","332","333"]:4==e?["00","01","10","11","02","03","12","13","20","21","30","31","22","23","32","33"]:["0","1","2","3"];return t}var serviceStreetside={init:function(){_ssCache||this.reset(),this.event=utilRebind(this,dispatch$7,"on")},reset:function(){_ssCache&&Object.values(_ssCache.bubbles.inflight).forEach(abortRequest$6),_ssCache={bubbles:{inflight:{},loaded:{},nextPage:{},rtree:new RBush,points:{},leaders:[]},sequences:{}}},bubbles:function(e){return searchLimited$2(5,e,_ssCache.bubbles.rtree)},sequences:function(e){var t=e.clipExtent(),n=[t[0][0],t[1][1]],r=[t[1][0],t[0][1]],i=geoExtent(e.invert(n),e.invert(r)).bbox(),o={},a=[];return _ssCache.bubbles.rtree.search(i).forEach(function(e){var t=e.data.sequenceKey;t&&!o[t]&&(o[t]=!0,a.push(_ssCache.sequences[t].geojson))}),a},loadBubbles:function(e,t){void 0===t&&(t=2),loadTiles$2("bubbles",bubbleApi,e,t)},viewer:function(){return _pannellumViewer},initViewer:function(){var e,t;window.pannellum&&(_pannellumViewer||((t={default:{firstScene:e=++_currScene+""},scenes:{}}).scenes[e]=_sceneOptions,_pannellumViewer=window.pannellum.viewer("ideditor-viewer-streetside",t)))},loadViewer:function(f){var h=this,e="PointerEvent"in window?"pointer":"mouse",t=f.container().select(".photoviewer").selectAll(".ms-wrapper").data([0]),n=t.enter().append("div").attr("class","photo-wrapper ms-wrapper").classed("hide",!0);n.append("div").attr("id","ideditor-viewer-streetside").on(e+"down.streetside",function(){select(window).on(e+"move.streetside",function(){dispatch$7.call("viewerChanged")},!0)}).on(e+"up.streetside pointercancel.streetside",function(){select(window).on(e+"move.streetside",null);var t=timer(function(e){dispatch$7.call("viewerChanged"),2e3<e&&t.stop()})}).append("div").attr("class","photo-attribution fillD");var r=n.append("div").attr("class","photo-controls-wrap").append("div").attr("class","photo-controls");function i(d){return function(){var r,t,e,n,i,o,a,s,l,c,u=f.container().select(".photoviewer"),p=u.empty()?void 0:u.datum();p&&(r=1===d?p.ne:p.pr,t=_pannellumViewer.getYaw(),e=p.ca+t,i=[(n=p.loc)[0]+geoMetersToLon(7,n[1]),n[1]],a=[i,[n[0]+geoMetersToLon(17.5,n[1]),n[1]+geoMetersToLat(35)],[n[0]-geoMetersToLon(17.5,n[1]),n[1]+geoMetersToLat(35)],[n[0]-geoMetersToLon(7,n[1]),n[1]],i],o=(1===d?e:e+180)*(Math.PI/180),s=(a=geoRotate(a,-o,n)).reduce(function(e,t){return e.extend(geoExtent(t))},geoExtent()),l=1/0,_ssCache.bubbles.rtree.search(s.bbox()).forEach(function(e){var t,n;e.data.key!==p.key&&geoPointInPolygon(e.data.loc,a)&&(t=geoVecLength(e.data.loc,p.loc),n=p.ca-e.data.ca,20<Math.min(Math.abs(n),360-Math.abs(n))&&(t+=5),t<l&&(r=e.data.key,l=t))}),(c=r&&_ssCache.bubbles.points[r])&&(f.map().centerEase(c.loc),h.selectImage(f,c).then(function(e){"ok"===e.status&&(_sceneOptions.yaw=t,h.showViewer(f))})))}}r.append("button").on("click.back",i(-1)).text("◄"),r.append("button").on("click.forward",i(1)).text("►"),t=t.merge(n).call(setupCanvas,!0),select("head").selectAll("#ideditor-streetside-viewercss").data([0]).enter().append("link").attr("id","ideditor-streetside-viewercss").attr("rel","stylesheet").attr("href",f.asset(pannellumViewerCSS)),select("head").selectAll("#ideditor-streetside-viewerjs").data([0]).enter().append("script").attr("id","ideditor-streetside-viewerjs").attr("src",f.asset(pannellumViewerJS)),f.ui().photoviewer.on("resize.streetside",function(){_pannellumViewer&&_pannellumViewer.resize()})},showViewer:function(e,t){if(_sceneOptions){var n;void 0!==t&&(_sceneOptions.yaw=t),_pannellumViewer?(n=++_currScene+"",_pannellumViewer.addScene(n,_sceneOptions).loadScene(n),2<_currScene&&(n=_currScene-1+"",_pannellumViewer.removeScene(n))):this.initViewer();var r=e.container().select(".photoviewer").classed("hide",!1);return r.selectAll(".photo-wrapper.ms-wrapper.hide").size()&&(r.selectAll(".photo-wrapper:not(.ms-wrapper)").classed("hide",!0),r.selectAll(".photo-wrapper.ms-wrapper").classed("hide",!1)),this}},hideViewer:function(e){var t=e.container().select(".photoviewer");return t.empty()||t.datum(null),t.classed("hide",!0).selectAll(".photo-wrapper").classed("hide",!0),e.container().selectAll(".viewfield-group, .sequence, .icon-sign").classed("currentView",!1),this.setStyles(e,null,!0)},selectImage:function(n,e){var r=this,t=n.container().select(".photoviewer");t.empty()||t.datum(e),this.setStyles(n,null,!0);var i=n.container().select(".photoviewer .ms-wrapper"),o=i.selectAll(".photo-attribution").html("");if(i.selectAll(".pnlm-load-box").style("display","block"),!e)return Promise.resolve({status:"ok"});var a=o.append("div").attr("class","attribution-row"),s=utilUniqueDomId("streetside-hires"),l=a.append("label").attr("for",s).attr("class","streetside-hires");l.append("input").attr("type","checkbox").attr("id",s).property("checked",_hires).on("click",function(){event.stopPropagation(),_resolution=(_hires=!_hires)?1024:512,i.call(setupCanvas,!0);var t={yaw:_pannellumViewer.getYaw(),pitch:_pannellumViewer.getPitch(),hfov:_pannellumViewer.getHfov()};r.selectImage(n,e).then(function(e){"ok"===e.status&&(_sceneOptions=Object.assign(_sceneOptions,t),r.showViewer(n))})}),l.append("span").text(_t("streetside.hires"));var c,u=a.append("div").attr("class","attribution-capture-info");e.captured_by&&(c=(new Date).getFullYear(),u.append("a").attr("class","captured_by").attr("target","_blank").attr("href","https://www.microsoft.com/en-us/maps/streetside").text("©"+c+" Microsoft"),u.append("span").text("|")),e.captured_at&&u.append("span").attr("class","captured_at").text(localeTimestamp(e.captured_at));var p=o.append("div").attr("class","attribution-row");p.append("a").attr("class","image-view-link").attr("target","_blank").attr("href","https://www.bing.com/maps?cp="+e.loc[1]+"~"+e.loc[0]+"&lvl=17&dir="+e.ca+"&style=x&v=2&sV=1").text(_t("streetside.view_on_bing")),p.append("a").attr("class","image-report-link").attr("target","_blank").attr("href","https://www.bing.com/maps/privacyreport/streetsideprivacyreport?bubbleid="+encodeURIComponent(e.key)+"&focus=photo&lat="+e.loc[1]+"&lng="+e.loc[0]+"&z=17").text(_t("streetside.report"));for(var d=e.key.toString(4),f=16-d.length,h=0;h<f;h++)d="0"+d;var g=streetsideImagesApi+"hs"+d,m=getQuadKeys();return loadFaces(["01","02","03","10","11","12"].map(function(n){return m.map(function(e){var t=qkToXY(e);return{face:n,url:g+n+e+".jpg?g=6338&n=z",x:t[0],y:t[1]}})})).then(function(){return _sceneOptions={showFullscreenCtrl:!1,autoLoad:!0,compass:!0,northOffset:e.ca,yaw:0,minHfov:minHfov,maxHfov:maxHfov,hfov:defaultHfov,type:"cubemap",cubeMap:[_dataUrlArray[0],_dataUrlArray[1],_dataUrlArray[2],_dataUrlArray[3],_dataUrlArray[4],_dataUrlArray[5]]},{status:"ok"}})},getSequenceKeyForBubble:function(e){return e&&e.sequenceKey},setStyles:function(e,t,n){n&&(e.container().selectAll(".viewfield-group").classed("highlighted",!1).classed("hovered",!1).classed("currentView",!1),e.container().selectAll(".sequence").classed("highlighted",!1).classed("currentView",!1));var r=t&&t.key,i=this.getSequenceKeyForBubble(t),o=i&&_ssCache.sequences[i],a=o&&o.bubbles.map(function(e){return e.key})||[],s=e.container().select(".photoviewer"),l=s.empty()?void 0:s.datum(),c=l&&l.key,u=this.getSequenceKeyForBubble(l),p=u&&_ssCache.sequences[u],d=utilArrayUnion(a,p&&p.bubbles.map(function(e){return e.key})||[]);return e.container().selectAll(".layer-streetside-images .viewfield-group").classed("highlighted",function(e){return-1!==d.indexOf(e.key)}).classed("hovered",function(e){return e.key===r}).classed("currentView",function(e){return e.key===c}),e.container().selectAll(".layer-streetside-images .sequence").classed("highlighted",function(e){return e.properties.key===i}).classed("currentView",function(e){return e.properties.key===u}),e.container().selectAll(".viewfield-group .viewfield").attr("d",function(){var e=this.parentNode.__data__;return e.pano&&e.key!==c?"M 8,13 m -10,0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0":"M 6,9 C 8,8.4 8,8.4 10,9 L 16,-2 C 12,-5 4,-5 0,-2 z"}),this},cache:function(){return _ssCache}},apibase$4="https://taginfo.openstreetmap.org/api/4/",_inflight$2={},_popularKeys={},_taginfoCache={},tag_sorts={point:"count_nodes",vertex:"count_nodes",area:"count_ways",line:"count_ways"},tag_sort_members={point:"count_node_members",vertex:"count_node_members",area:"count_way_members",line:"count_way_members",relation:"count_relation_members"},tag_filters={point:"nodes",vertex:"nodes",area:"ways",line:"ways"},tag_members_fractions={point:"count_node_members_fraction",vertex:"count_node_members_fraction",area:"count_way_members_fraction",line:"count_way_members_fraction",relation:"count_relation_members_fraction"};function sets(e,t,n){return e.geometry&&n[e.geometry]&&(e[t]=n[e.geometry]),e}function setFilter(e){return sets(e,"filter",tag_filters)}function setSort(e){return sets(e,"sortname",tag_sorts)}function setSortMembers(e){return sets(e,"sortname",tag_sort_members)}function clean(e){return utilObjectOmit(e,["geometry","debounce"])}function filterKeys(e){var t=e?"count_"+e:"count_all";return function(e){return 2500<parseFloat(e[t])||e.in_wiki}}function filterMultikeys(r){return function(e){var t=new RegExp("^"+r+"(.*)$"),n=e.key.match(t)||[];return 2===n.length&&-1===n[1].indexOf(":")}}function filterValues(t){return function(e){return null===e.value.match(/[;,]/)&&(!(!t&&null!==e.value.match(/[A-Z*]/))&&0<parseFloat(e.fraction))}}function filterRoles(t){return function(e){return""!==e.role&&(null===e.role.match(/[A-Z*;,]/)&&0<parseFloat(e[tag_members_fractions[t]]))}}function valKey(e){return{value:e.key,title:e.key}}function valKeyDescription(e){var t={value:e.value,title:e.description||e.value};return e.count&&(t.count=e.count),t}function roleKey(e){return{value:e.role,title:e.role}}function sortKeys(e,t){return-1===e.key.indexOf(":")&&-1!==t.key.indexOf(":")?-1:-1!==e.key.indexOf(":")&&-1===t.key.indexOf(":")?1:0}var debouncedRequest$1=debounce(request$1,300,{leading:!1});function request$1(t,e,n,r,i){var o;_inflight$2[t]||checkCache(t,e,n,r)||(o=new AbortController,_inflight$2[t]=o,d3_json(t,{signal:o.signal}).then(function(e){delete _inflight$2[t],i&&i(null,e)}).catch(function(e){delete _inflight$2[t],"AbortError"!==e.name&&i&&i(e.message)}))}function checkCache(e,t,n,r){var i=t.rp||25,o=t.query||"",a=e;do{var s=_taginfoCache[a];if(s&&(e===a||s.length<i))return r(null,s),1;if(n||!o.length)return;o=o.slice(0,-1),a=e.replace(/&query=(.*?)&/,"&query="+o+"&")}while(0<=o.length)}var serviceTaginfo={init:function(){_inflight$2={},_taginfoCache={};var e={rp:100,sortname:"values_all",sortorder:"desc",page:1,debounce:!(_popularKeys={postal_code:!0,full_name:!0,loc_name:!0,reg_name:!0,short_name:!0,sorting_name:!0,artist_name:!0,nat_name:!0,long_name:!0,"bridge:name":!0}),lang:_mainLocalizer.languageCode()};this.keys(e,function(e,t){e||t.forEach(function(e){"opening_hours"!==e.value&&(_popularKeys[e.value]=!0)})})},reset:function(){Object.values(_inflight$2).forEach(function(e){e.abort()}),_inflight$2={}},keys:function(i,o){var e=i.debounce?debouncedRequest$1:request$1;i=clean(setSort(i)),i=Object.assign({rp:10,sortname:"count_all",sortorder:"desc",page:1,lang:_mainLocalizer.languageCode()},i);var a=apibase$4+"keys/all?"+utilQsString(i);e(a,i,!1,o,function(e,t){var n,r;e?o(e):(n=filterKeys(i.filter),r=t.data.filter(n).sort(sortKeys).map(valKey),_taginfoCache[a]=r,o(null,r))})},multikeys:function(e,i){var t=e.debounce?debouncedRequest$1:request$1;e=clean(setSort(e));var o=(e=Object.assign({rp:25,sortname:"count_all",sortorder:"desc",page:1,lang:_mainLocalizer.languageCode()},e)).query,a=apibase$4+"keys/all?"+utilQsString(e);t(a,e,!0,i,function(e,t){var n,r;e?i(e):(n=filterMultikeys(o),r=t.data.filter(n).map(valKey),_taginfoCache[a]=r,i(null,r))})},values:function(i,o){var e,a,t=i.key;t&&_popularKeys[t]?o(null,[]):(e=i.debounce?debouncedRequest$1:request$1,i=clean(setSort(setFilter(i))),i=Object.assign({rp:25,sortname:"count_all",sortorder:"desc",page:1,lang:_mainLocalizer.languageCode()},i),e(a=apibase$4+"key/values?"+utilQsString(i),i,!1,o,function(e,t){var n,r;e?o(e):(n=filterValues(/network|taxon|genus|species|brand|grape_variety|royal_cypher|listed_status|booth|rating|stars|:output|_hours|_times|_ref|manufacturer|country|target|brewery/.test(i.key)),r=t.data.filter(n).map(valKeyDescription),_taginfoCache[a]=r,o(null,r))}))},roles:function(e,i){var t=e.debounce?debouncedRequest$1:request$1,o=e.geometry;e=clean(setSortMembers(e)),e=Object.assign({rp:25,sortname:"count_all_members",sortorder:"desc",page:1,lang:_mainLocalizer.languageCode()},e);var a=apibase$4+"relation/roles?"+utilQsString(e);t(a,e,!0,i,function(e,t){var n,r;e?i(e):(n=filterRoles(o),r=t.data.filter(n).map(roleKey),_taginfoCache[a]=r,i(null,r))})},docs:function(e,n){var t=e.debounce?debouncedRequest$1:request$1,r="key/wiki_pages?";(e=clean(setSort(e))).value?r="tag/wiki_pages?":e.rtype&&(r="relation/wiki_pages?");var i=apibase$4+r+utilQsString(e);t(i,e,!0,n,function(e,t){e?n(e):(_taginfoCache[i]=t.data,n(null,t.data))})},apibase:function(e){return arguments.length?(apibase$4=e,this):apibase$4}},helpers$1=createCommonjsModule(function(e,o){function s(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return 0!==n.id&&!n.id||(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function r(e,t,n){return void 0===n&&(n={}),s({type:"Point",coordinates:e},t,n)}function i(e,t,n){void 0===n&&(n={});for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:e},t,n)}function a(e,t,n){if(void 0===n&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:e},t,n)}function l(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function c(e,t,n){return void 0===n&&(n={}),s({type:"MultiLineString",coordinates:e},t,n)}function u(e,t,n){return void 0===n&&(n={}),s({type:"MultiPoint",coordinates:e},t,n)}function p(e,t,n){return void 0===n&&(n={}),s({type:"MultiPolygon",coordinates:e},t,n)}function d(e,t){void 0===t&&(t="kilometers");var n=o.factors[t];if(!n)throw new Error(t+" units is invalid");return e*n}function f(e,t){void 0===t&&(t="kilometers");var n=o.factors[t];if(!n)throw new Error(t+" units is invalid");return e/n}function n(e){return 180*(e%(2*Math.PI))/Math.PI}function t(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(o,"__esModule",{value:!0}),o.earthRadius=6371008.8,o.factors={centimeters:100*o.earthRadius,centimetres:100*o.earthRadius,degrees:o.earthRadius/111325,feet:3.28084*o.earthRadius,inches:39.37*o.earthRadius,kilometers:o.earthRadius/1e3,kilometres:o.earthRadius/1e3,meters:o.earthRadius,metres:o.earthRadius,miles:o.earthRadius/1609.344,millimeters:1e3*o.earthRadius,millimetres:1e3*o.earthRadius,nauticalmiles:o.earthRadius/1852,radians:1,yards:o.earthRadius/1.0936},o.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/o.earthRadius,yards:1/1.0936},o.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},o.feature=s,o.geometry=function(e,t,n){switch(e){case"Point":return r(t).geometry;case"LineString":return a(t).geometry;case"Polygon":return i(t).geometry;case"MultiPoint":return u(t).geometry;case"MultiLineString":return c(t).geometry;case"MultiPolygon":return p(t).geometry;default:throw new Error(e+" is invalid")}},o.point=r,o.points=function(e,t,n){return void 0===n&&(n={}),l(e.map(function(e){return r(e,t)}),n)},o.polygon=i,o.polygons=function(e,t,n){return void 0===n&&(n={}),l(e.map(function(e){return i(e,t)}),n)},o.lineString=a,o.lineStrings=function(e,t,n){return void 0===n&&(n={}),l(e.map(function(e){return a(e,t)}),n)},o.featureCollection=l,o.multiLineString=c,o.multiPoint=u,o.multiPolygon=p,o.geometryCollection=function(e,t,n){return void 0===n&&(n={}),s({type:"GeometryCollection",geometries:e},t,n)},o.round=function(e,t){if(void 0===t&&(t=0),t&&!(0<=t))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n},o.radiansToLength=d,o.lengthToRadians=f,o.lengthToDegrees=function(e,t){return n(f(e,t))},o.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},o.radiansToDegrees=n,o.degreesToRadians=function(e){return e%360*Math.PI/180},o.convertLength=function(e,t,n){if(void 0===t&&(t="kilometers"),void 0===n&&(n="kilometers"),!(0<=e))throw new Error("length must be a positive number");return d(f(e,t),n)},o.convertArea=function(e,t,n){if(void 0===t&&(t="meters"),void 0===n&&(n="kilometers"),!(0<=e))throw new Error("area must be a positive number");var r=o.areaFactors[t];if(!r)throw new Error("invalid original units");var i=o.areaFactors[n];if(!i)throw new Error("invalid final units");return e/r*i},o.isNumber=t,o.isObject=function(e){return!!e&&e.constructor===Object},o.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!t(e))throw new Error("bbox must only contain numbers")})},o.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},o.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},o.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},o.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},o.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},o.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},o.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},o.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}}),invariant=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getCoord=function(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&2<=e.length&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")},t.getCoords=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},t.containsNumber=function e(t){if(1<t.length&&helpers$1.isNumber(t[0])&&helpers$1.isNumber(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return e(t[0]);throw new Error("coordinates must only contain numbers")},t.geojsonType=function(e,t,n){if(!t||!n)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.type)},t.featureOf=function(e,t,n){if(!e)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.geometry.type)},t.collectionOf=function(e,t,n){if(!e)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=e.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+o.geometry.type)}},t.getGeom=function(e){return"Feature"===e.type?e.geometry:e},t.getType=function(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}}),lineclip_1=lineclip,_default=lineclip;function lineclip(e,t,n){var r,i,o,a,s,l=e.length,c=bitCode(e[0],t),u=[];for(n=n||[],r=1;r<l;r++){for(i=e[r-1],a=s=bitCode(o=e[r],t);;){if(!(c|a)){u.push(i),a!==s?(u.push(o),r<l-1&&(n.push(u),u=[])):r===l-1&&u.push(o);break}if(c&a)break;c?c=bitCode(i=intersect(i,o,c,t),t):a=bitCode(o=intersect(i,o,a,t),t)}c=s}return u.length&&n.push(u),n}function polygonclip(e,t){for(var n,r,i,o,a,s,l=1;l<=8;l*=2){for(n=[],i=!(bitCode(r=e[e.length-1],t)&l),o=0;o<e.length;o++)(s=!(bitCode(a=e[o],t)&l))!==i&&n.push(intersect(r,a,l,t)),s&&n.push(a),r=a,i=s;if(!(e=n).length)break}return n}function intersect(e,t,n,r){return 8&n?[e[0]+(t[0]-e[0])*(r[3]-e[1])/(t[1]-e[1]),r[3]]:4&n?[e[0]+(t[0]-e[0])*(r[1]-e[1])/(t[1]-e[1]),r[1]]:2&n?[r[2],e[1]+(t[1]-e[1])*(r[2]-e[0])/(t[0]-e[0])]:1&n?[r[0],e[1]+(t[1]-e[1])*(r[0]-e[0])/(t[0]-e[0])]:null}function bitCode(e,t){var n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}lineclip.polyline=lineclip,lineclip.polygon=polygonclip,lineclip_1.default=_default;var bboxClip_1=createCommonjsModule(function(e,t){var n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=n(lineclip_1);function l(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r],a=s.polygon(o,t);0<a.length&&(a[0][0]===a[a.length-1][0]&&a[0][1]===a[a.length-1][1]||a.push(a[0]),4<=a.length&&n.push(a))}return n}t.default=function(e,t){var n=invariant.getGeom(e),r=n.type,i="Feature"===e.type?e.properties:{},o=n.coordinates;switch(r){case"LineString":case"MultiLineString":var a=[];return"LineString"===r&&(o=[o]),o.forEach(function(e){s.polyline(e,t,a)}),1===a.length?helpers$1.lineString(a[0],i):helpers$1.multiLineString(a,i);case"Polygon":return helpers$1.polygon(l(o,t),i);case"MultiPolygon":return helpers$1.multiPolygon(o.map(function(e){return l(e,t)}),i);default:throw new Error("geometry "+r+" not supported")}}}),fastJsonStableStringify=function(e,t){"function"==typeof(t=t||{})&&(t={cmp:t});var o,l="boolean"==typeof t.cycles&&t.cycles,c=t.cmp&&(o=t.cmp,function(i){return function(e,t){var n={key:e,value:i[e]},r={key:t,value:i[t]};return o(n,r)}}),u=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);if(Array.isArray(t)){for(i="[",o=0;o<t.length;o++)o&&(i+=","),i+=e(t[o])||"null";return i+"]"}if(null===t)return"null";if(-1!==u.indexOf(t)){if(l)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}for(var n=u.push(t)-1,r=Object.keys(t).sort(c&&c(t)),i="",o=0;o<r.length;o++){var a=r[o],s=e(t[a]);s&&(i&&(i+=","),i+=JSON.stringify(a)+":"+s)}return u.splice(n,1),"{"+i+"}"}}(e)};function DEFAULT_COMPARE(e,t){return t<e?1:e<t?-1:0}var SplayTree=function(e,t){void 0===e&&(e=DEFAULT_COMPARE),void 0===t&&(t=!1),this._compare=e,this._root=null,this._size=0,this._noDuplicates=!!t},prototypeAccessors={size:{configurable:!0}};function loadRecursive(e,t,n,r,i){var o=i-r;if(0<o){var a=r+Math.floor(o/2),s={key:t[a],data:n[a],parent:e};return s.left=loadRecursive(s,t,n,r,a),s.right=loadRecursive(s,t,n,a+1,i),s}return null}function sort(e,t,n,r,i){if(!(r<=n)){for(var o=e[n+r>>1],a=n-1,s=r+1;;){for(;i(e[++a],o)<0;);for(;0<i(e[--s],o););if(s<=a)break;var l=e[a];e[a]=e[s],e[s]=l,l=t[a],t[a]=t[s],t[s]=l}sort(e,t,n,s,i),sort(e,t,s+1,r,i)}}SplayTree.prototype.rotateLeft=function(e){var t=e.right;t&&(e.right=t.left,t.left&&(t.left.parent=e),t.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.left=e),e.parent=t},SplayTree.prototype.rotateRight=function(e){var t=e.left;t&&(e.left=t.right,t.right&&(t.right.parent=e),t.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.right=e),e.parent=t},SplayTree.prototype._splay=function(e){for(;e.parent;){var t=e.parent;t.parent?t.left===e&&t.parent.left===t?(this.rotateRight(t.parent),this.rotateRight(t)):t.right===e&&t.parent.right===t?(this.rotateLeft(t.parent),this.rotateLeft(t)):t.left===e&&t.parent.right===t?(this.rotateRight(t),this.rotateLeft(t)):(this.rotateLeft(t),this.rotateRight(t)):t.left===e?this.rotateRight(t):this.rotateLeft(t)}},SplayTree.prototype.splay=function(e){for(var t,n,r,i,o;e.parent;)(n=(t=e.parent).parent)&&n.parent?((r=n.parent).left===n?r.left=e:r.right=e,e.parent=r):(e.parent=null,this._root=e),i=e.left,o=e.right,e===t.left?(n&&(n.left===t?(t.right?(n.left=t.right,n.left.parent=n):n.left=null,(t.right=n).parent=t):(i?(n.right=i).parent=n:n.right=null,(e.left=n).parent=e)),o?(t.left=o).parent=t:t.left=null,(e.right=t).parent=e):(n&&(n.right===t?(t.left?(n.right=t.left,n.right.parent=n):n.right=null,(t.left=n).parent=t):(o?(n.left=o).parent=n:n.left=null,(e.right=n).parent=e)),i?(t.right=i).parent=t:t.right=null,(e.left=t).parent=e)},SplayTree.prototype.replace=function(e,t){e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.parent=e.parent)},SplayTree.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},SplayTree.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},SplayTree.prototype.insert=function(e,t){var n=this._root,r=null,i=this._compare;if(this._noDuplicates)for(;n;){if(0===i((r=n).key,e))return;n=i(n.key,e)<0?n.right:n.left}else for(;n;)n=i((r=n).key,e)<0?n.right:n.left;return n={key:e,data:t,left:null,right:null,parent:r},r?i(r.key,n.key)<0?r.right=n:r.left=n:this._root=n,this.splay(n),this._size++,n},SplayTree.prototype.find=function(e){for(var t=this._root,n=this._compare;t;){var r=n(t.key,e);if(r<0)t=t.right;else{if(!(0<r))return t;t=t.left}}return null},SplayTree.prototype.contains=function(e){for(var t=this._root,n=this._compare;t;){var r=n(e,t.key);if(0===r)return!0;t=r<0?t.left:t.right}return!1},SplayTree.prototype.remove=function(e){var t,n=this.find(e);return!!n&&(this.splay(n),n.left?n.right?((t=this.minNode(n.right)).parent!==n&&(this.replace(t,t.right),t.right=n.right,t.right.parent=t),this.replace(n,t),t.left=n.left,t.left.parent=t):this.replace(n,n.left):this.replace(n,n.right),this._size--,!0)},SplayTree.prototype.removeNode=function(e){return!!e&&(this.splay(e),e.left?e.right?((t=this.minNode(e.right)).parent!==e&&(this.replace(t,t.right),t.right=e.right,t.right.parent=t),this.replace(e,t),t.left=e.left,t.left.parent=t):this.replace(e,e.left):this.replace(e,e.right),this._size--,!0);var t},SplayTree.prototype.erase=function(e){var t,n,r,i=this.find(e);i&&(this.splay(i),t=i.left,n=i.right,r=null,t&&(t.parent=null,r=this.maxNode(t),this.splay(r),this._root=r),n&&(t?r.right=n:this._root=n,n.parent=r),this._size--)},SplayTree.prototype.pop=function(){var e=this._root,t=null;if(e){for(;e.left;)e=e.left;t={key:e.key,data:e.data},this.remove(e.key)}return t},SplayTree.prototype.next=function(e){var t=e;if(t)if(t.right)for(t=t.right;t&&t.left;)t=t.left;else for(t=e.parent;t&&t.right===e;)t=(e=t).parent;return t},SplayTree.prototype.prev=function(e){var t=e;if(t)if(t.left)for(t=t.left;t&&t.right;)t=t.right;else for(t=e.parent;t&&t.left===e;)t=(e=t).parent;return t},SplayTree.prototype.forEach=function(e){for(var t=this._root,n=[],r=!1,i=0;!r;)t?(n.push(t),t=t.left):0<n.length?(e(t=n.pop(),i++),t=t.right):r=!0;return this},SplayTree.prototype.range=function(e,t,n,r){for(var i=[],o=this._compare,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(0<o((a=i.pop()).key,t))break;if(0<=o(a.key,e)&&n.call(r,a))return this;a=a.right}return this},SplayTree.prototype.keys=function(){for(var e=this._root,t=[],n=[],r=!1;!r;)e?(t.push(e),e=e.left):0<t.length?(e=t.pop(),n.push(e.key),e=e.right):r=!0;return n},SplayTree.prototype.values=function(){for(var e=this._root,t=[],n=[],r=!1;!r;)e?(t.push(e),e=e.left):0<t.length?(e=t.pop(),n.push(e.data),e=e.right):r=!0;return n},SplayTree.prototype.at=function(e){for(var t=this._root,n=[],r=!1,i=0;!r;)if(t)n.push(t),t=t.left;else if(0<n.length){if(t=n.pop(),i===e)return t;i++,t=t.right}else r=!0;return null},SplayTree.prototype.load=function(e,t,n){if(void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===n&&(n=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var r=e.length;return n&&sort(e,t,0,r-1,this._compare),this._root=loadRecursive(null,e,t,0,r),this._size=r,this},SplayTree.prototype.min=function(){var e=this.minNode(this._root);return e?e.key:null},SplayTree.prototype.max=function(){var e=this.maxNode(this._root);return e?e.key:null},SplayTree.prototype.isEmpty=function(){return null===this._root},prototypeAccessors.size.get=function(){return this._size},SplayTree.createTree=function(e,t,n,r,i){return new SplayTree(n,i).load(e,t,r)},Object.defineProperties(SplayTree.prototype,prototypeAccessors);var NORMAL=0,NON_CONTRIBUTING=1,SAME_TRANSITION=2,DIFFERENT_TRANSITION=3,INTERSECTION=0,UNION=1,DIFFERENCE=2,XOR=3;function computeFields(e,t,n){null===t?(e.inOut=!1,e.otherInOut=!0):(e.isSubject===t.isSubject?(e.inOut=!t.inOut,e.otherInOut=t.otherInOut):(e.inOut=!t.otherInOut,e.otherInOut=t.isVertical()?!t.inOut:t.inOut),t&&(e.prevInResult=!inResult(t,n)||t.isVertical()?t.prevInResult:t));var r=inResult(e,n);e.resultTransition=r?determineResultTransition(e,n):0}function inResult(e,t){switch(e.type){case NORMAL:switch(t){case INTERSECTION:return!e.otherInOut;case UNION:return e.otherInOut;case DIFFERENCE:return e.isSubject&&e.otherInOut||!e.isSubject&&!e.otherInOut;case XOR:return!0}break;case SAME_TRANSITION:return t===INTERSECTION||t===UNION;case DIFFERENT_TRANSITION:return t===DIFFERENCE;case NON_CONTRIBUTING:return!1}return!1}function determineResultTransition(e,t){var n,r=!e.inOut,i=!e.otherInOut;switch(t){case INTERSECTION:n=r&&i;break;case UNION:n=r||i;break;case XOR:n=r^i;break;case DIFFERENCE:n=e.isSubject?r&&!i:i&&!r}return n?1:-1}var SweepEvent=function(e,t,n,r,i){this.left=t,this.point=e,this.otherEvent=n,this.isSubject=r,this.type=i||NORMAL,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0},prototypeAccessors$1={inResult:{configurable:!0}};function equals(e,t){return e[0]===t[0]&&e[1]===t[1]}SweepEvent.prototype.isBelow=function(e){var t=this.point,n=this.otherEvent.point;return this.left?0<(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1]):0<(n[0]-e[0])*(t[1]-e[1])-(t[0]-e[0])*(n[1]-e[1])},SweepEvent.prototype.isAbove=function(e){return!this.isBelow(e)},SweepEvent.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},prototypeAccessors$1.inResult.get=function(){return 0!==this.resultTransition},SweepEvent.prototype.clone=function(){var e=new SweepEvent(this.point,this.left,this.otherEvent,this.isSubject,this.type);return e.contourId=this.contourId,e.resultTransition=this.resultTransition,e.prevInResult=this.prevInResult,e.isExteriorRing=this.isExteriorRing,e.inOut=this.inOut,e.otherInOut=this.otherInOut,e},Object.defineProperties(SweepEvent.prototype,prototypeAccessors$1);var epsilon$1=11102230246251565e-32,splitter=134217729,resulterrbound=(3+8*epsilon$1)*epsilon$1;function sum$1(e,t,n,r,i){var o,a,s,l,c=t[0],u=r[0],p=0,d=0;c<u==-c<u?(o=c,c=t[++p]):(o=u,u=r[++d]);var f=0;if(p<e&&d<n)for(c<u==-c<u?(s=o-((a=c+o)-c),c=t[++p]):(s=o-((a=u+o)-u),u=r[++d]),o=a,0!==s&&(i[f++]=s);p<e&&d<n;)c<u==-c<u?(s=o-((a=o+c)-(l=a-o))+(c-l),c=t[++p]):(s=o-((a=o+u)-(l=a-o))+(u-l),u=r[++d]),o=a,0!==s&&(i[f++]=s);for(;p<e;)s=o-((a=o+c)-(l=a-o))+(c-l),c=t[++p],o=a,0!==s&&(i[f++]=s);for(;d<n;)s=o-((a=o+u)-(l=a-o))+(u-l),u=r[++d],o=a,0!==s&&(i[f++]=s);return 0===o&&0!==f||(i[f++]=o),f}function estimate(e,t){for(var n=t[0],r=1;r<e;r++)n+=t[r];return n}function vec(e){return new Float64Array(e)}var ccwerrboundA=(3+16*epsilon$1)*epsilon$1,ccwerrboundB=(2+12*epsilon$1)*epsilon$1,ccwerrboundC=(9+64*epsilon$1)*epsilon$1*epsilon$1,B=vec(4),C1=vec(8),C2=vec(12),D=vec(16),u=vec(4);function orient2dadapt(e,t,n,r,i,o,a){var s,l,c,p,d,f,h,g,m,y,v,_,b,w=e-i,x=n-i,S=t-o,E=r-o,C=w*E,A=splitter*w,I=A-(A-w),k=w-I,N=(y=k*(f=E-(d=(A=splitter*E)-(A-E)))-(C-I*d-k*d-I*f))-(h=y-(_=(k=S-(I=(A=splitter*S)-(A-S)))*(f=x-(d=(A=splitter*x)-(A-x)))-((v=S*x)-I*d-k*d-I*f)));B[0]=y-(h+N)+(N-_),N=(m=C-((g=C+h)-(N=g-C))+(h-N))-(h=m-v),B[1]=m-(h+N)+(N-v),N=(b=g+h)-g,B[2]=g-(b-N)+(h-N),B[3]=b;var P=estimate(4,B),T=ccwerrboundB*a;if(T<=P||T<=-P)return P;if(s=e-(w+(N=e-w))+(N-i),c=n-(x+(N=n-x))+(N-i),l=t-(S+(N=t-S))+(N-o),p=r-(E+(N=r-E))+(N-o),0==s&&0==l&&0==c&&0==p)return P;if((T=ccwerrboundC*a+resulterrbound*Math.abs(P))<=(P+=w*p+E*s-(S*c+x*l))||T<=-P)return P;N=(y=(k=s-(I=(A=splitter*s)-(A-s)))*(f=E-(d=(A=splitter*E)-(A-E)))-((C=s*E)-I*d-k*d-I*f))-(h=y-(_=(k=l-(I=(A=splitter*l)-(A-l)))*(f=x-(d=(A=splitter*x)-(A-x)))-((v=l*x)-I*d-k*d-I*f))),u[0]=y-(h+N)+(N-_),N=(m=C-((g=C+h)-(N=g-C))+(h-N))-(h=m-v),u[1]=m-(h+N)+(N-v),N=(b=g+h)-g,u[2]=g-(b-N)+(h-N),u[3]=b;var O=sum$1(4,B,4,u,C1);N=(y=(k=w-(I=(A=splitter*w)-(A-w)))*(f=p-(d=(A=splitter*p)-(A-p)))-((C=w*p)-I*d-k*d-I*f))-(h=y-(_=(k=S-(I=(A=splitter*S)-(A-S)))*(f=c-(d=(A=splitter*c)-(A-c)))-((v=S*c)-I*d-k*d-I*f))),u[0]=y-(h+N)+(N-_),N=(m=C-((g=C+h)-(N=g-C))+(h-N))-(h=m-v),u[1]=m-(h+N)+(N-v),N=(b=g+h)-g,u[2]=g-(b-N)+(h-N),u[3]=b;var M=sum$1(O,C1,4,u,C2);N=(y=(k=s-(I=(A=splitter*s)-(A-s)))*(f=p-(d=(A=splitter*p)-(A-p)))-((C=s*p)-I*d-k*d-I*f))-(h=y-(_=(k=l-(I=(A=splitter*l)-(A-l)))*(f=c-(d=(A=splitter*c)-(A-c)))-((v=l*c)-I*d-k*d-I*f))),u[0]=y-(h+N)+(N-_),N=(m=C-((g=C+h)-(N=g-C))+(h-N))-(h=m-v),u[1]=m-(h+N)+(N-v),N=(b=g+h)-g,u[2]=g-(b-N)+(h-N),u[3]=b;var L=sum$1(M,C2,4,u,D);return D[L-1]}function orient2d(e,t,n,r,i,o){var a=(t-o)*(n-i),s=(e-i)*(r-o),l=a-s;if(0==a||0==s||0<a!=0<s)return l;var c=Math.abs(a+s);return Math.abs(l)>=ccwerrboundA*c?l:-orient2dadapt(e,t,n,r,i,o,c)}function signedArea(e,t,n){var r=orient2d(e[0],e[1],t[0],t[1],n[0],n[1]);return 0<r?-1:r<0?1:0}function compareEvents(e,t){var n=e.point,r=t.point;return n[0]>r[0]?1:n[0]<r[0]?-1:n[1]!==r[1]?n[1]>r[1]?1:-1:specialCases(e,t,n)}function specialCases(e,t,n,r){return e.left!==t.left?e.left?1:-1:0!==signedArea(n,e.otherEvent.point,t.otherEvent.point)?e.isBelow(t.otherEvent.point)?-1:1:!e.isSubject&&t.isSubject?1:-1}function divideSegment(e,t,n){var r=new SweepEvent(t,!1,e,e.isSubject),i=new SweepEvent(t,!0,e.otherEvent,e.isSubject);return equals(e.point,e.otherEvent.point)&&console.warn("what is that, a collapsed segment?",e),r.contourId=i.contourId=e.contourId,0<compareEvents(i,e.otherEvent)&&(e.otherEvent.left=!0,i.left=!1),e.otherEvent.otherEvent=i,e.otherEvent=r,n.push(i),n.push(r),n}function crossProduct(e,t){return e[0]*t[1]-e[1]*t[0]}function dotProduct(e,t){return e[0]*t[0]+e[1]*t[1]}function intersection(e,t,n,r,i){var o=[t[0]-e[0],t[1]-e[1]],a=[r[0]-n[0],r[1]-n[1]];function s(e,t,n){return[e[0]+t*n[0],e[1]+t*n[1]]}var l=[n[0]-e[0],n[1]-e[1]],c=crossProduct(o,a),u=c*c,p=dotProduct(o,o);if(0<u){var d=crossProduct(l,a)/c;if(d<0||1<d)return null;var f=crossProduct(l,o)/c;return f<0||1<f?null:0==d||1==d?i?null:[s(e,d,o)]:0==f||1==f?i?null:[s(n,f,a)]:[s(e,d,o)]}if(0<(c=crossProduct(l,o))*c)return null;var h=dotProduct(o,l)/p,g=h+dotProduct(o,a)/p,m=Math.min(h,g),y=Math.max(h,g);return m<=1&&0<=y?1===m?i?null:[s(e,0<m?m:0,o)]:0===y?i?null:[s(e,y<1?y:1,o)]:i&&0===m&&1===y?null:[s(e,0<m?m:0,o),s(e,y<1?y:1,o)]:null}function possibleIntersection(e,t,n){var r=intersection(e.point,e.otherEvent.point,t.point,t.otherEvent.point),i=r?r.length:0;if(0===i)return 0;if(1===i&&(equals(e.point,t.point)||equals(e.otherEvent.point,t.otherEvent.point)))return 0;if(2===i&&e.isSubject===t.isSubject)return 0;if(1===i)return equals(e.point,r[0])||equals(e.otherEvent.point,r[0])||divideSegment(e,r[0],n),equals(t.point,r[0])||equals(t.otherEvent.point,r[0])||divideSegment(t,r[0],n),1;var o=[],a=!1,s=!1;return equals(e.point,t.point)?a=!0:1===compareEvents(e,t)?o.push(t,e):o.push(e,t),equals(e.otherEvent.point,t.otherEvent.point)?s=!0:1===compareEvents(e.otherEvent,t.otherEvent)?o.push(t.otherEvent,e.otherEvent):o.push(e.otherEvent,t.otherEvent),a&&s||a?(t.type=NON_CONTRIBUTING,e.type=t.inOut===e.inOut?SAME_TRANSITION:DIFFERENT_TRANSITION,a&&!s&&divideSegment(o[1].otherEvent,o[0].point,n),2):(s?divideSegment(o[0],o[1].point,n):o[0]!==o[3].otherEvent?(divideSegment(o[0],o[1].point,n),divideSegment(o[1],o[2].point,n)):(divideSegment(o[0],o[1].point,n),divideSegment(o[3].otherEvent,o[2].point,n)),3)}function compareSegments(e,t){if(e===t)return 0;if(0!==signedArea(e.point,e.otherEvent.point,t.point)||0!==signedArea(e.point,e.otherEvent.point,t.otherEvent.point))return equals(e.point,t.point)?e.isBelow(t.otherEvent.point)?-1:1:e.point[0]===t.point[0]?e.point[1]<t.point[1]?-1:1:1===compareEvents(e,t)?t.isAbove(e.point)?-1:1:e.isBelow(t.point)?-1:1;if(e.isSubject!==t.isSubject)return e.isSubject?-1:1;var n=e.point,r=t.point;return n[0]===r[0]&&n[1]===r[1]?(n=e.otherEvent.point,r=t.otherEvent.point,n[0]===r[0]&&n[1]===r[1]?0:e.contourId>t.contourId?1:-1):1===compareEvents(e,t)?1:-1}function subdivide(e,t,n,r,i,o){for(var a,s,l,c=new SplayTree(compareSegments),u=[],p=Math.min(r[2],i[2]);0!==e.length;){var d,f,h=e.pop();if(u.push(h),o===INTERSECTION&&h.point[0]>p||o===DIFFERENCE&&h.point[0]>r[2])break;h.left?(s=a=c.insert(h),a=a!==(l=c.minNode())?c.prev(a):null,s=c.next(s),computeFields(h,d=a?a.key:null,o),s&&2===possibleIntersection(h,s.key,e)&&(computeFields(h,d,o),computeFields(h,s.key,o)),a&&2===possibleIntersection(a.key,h,e)&&(computeFields(d,(f=(f=a)!==l?c.prev(f):null)?f.key:null,o),computeFields(h,d,o))):(h=h.otherEvent,s=a=c.find(h),a&&s&&(a=a!==l?c.prev(a):null,s=c.next(s),c.remove(h),s&&a&&possibleIntersection(a.key,s.key,e)))}return u}var Contour=function(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null};function orderEvents(e){for(var t,n,r=[],i=0,o=e.length;i<o;i++)((t=e[i]).left&&t.inResult||!t.left&&t.otherEvent.inResult)&&r.push(t);for(var a=!1;!a;)for(a=!0,i=0,o=r.length;i<o;i++)i+1<o&&1===compareEvents(r[i],r[i+1])&&(n=r[i],r[i]=r[i+1],r[i+1]=n,a=!1);for(i=0,o=r.length;i<o;i++)(t=r[i]).otherPos=i;for(i=0,o=r.length;i<o;i++)(t=r[i]).left||(n=t.otherPos,t.otherPos=t.otherEvent.otherPos,t.otherEvent.otherPos=n);return r}function nextPos(e,t,n,r){var i,o=e+1,a=t[e].point,s=t.length;for(o<s&&(i=t[o].point);o<s&&i[0]===a[0]&&i[1]===a[1];){if(!n[o])return o;i=t[++o].point}for(o=e-1;n[o]&&r<o;)o--;return o}function initializeContourFromContext(e,t,n){var r,i,o,a,s=new Contour;return null!=e.prevInResult?(i=(r=e.prevInResult).outputContourId,0<r.resultTransition?null!=(o=t[i]).holeOf?(t[a=o.holeOf].holeIds.push(n),s.holeOf=a,s.depth=t[i].depth):(t[i].holeIds.push(n),s.holeOf=i,s.depth=t[i].depth+1):(s.holeOf=null,s.depth=t[i].depth)):(s.holeOf=null,s.depth=0),s}function connectEdges(e){for(var a=orderEvents(e),s={},l=[],c=0,t=a.length;c<t;c++)!function(){if(!s[c]){function e(e){s[e]=!0,a[e].outputContourId=t}var t=l.length,n=initializeContourFromContext(a[c],l,t),r=c,i=c,o=a[c].point;for(n.points.push(o);e(r),e(r=a[r].otherPos),n.points.push(a[r].point),(r=nextPos(r,a,s,i))!=i;);l.push(n)}}();return l}Contour.prototype.isExterior=function(){return null==this.holeOf};var tinyqueue=TinyQueue,_default$1=TinyQueue;function TinyQueue(e,t){if(!(this instanceof TinyQueue))return new TinyQueue(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||defaultCompare$1,0<this.length)for(var n=(this.length>>1)-1;0<=n;n--)this._down(n)}function defaultCompare$1(e,t){return e<t?-1:t<e?1:0}TinyQueue.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,n=this.compare,r=t[e];0<e;){var i=e-1>>1,o=t[i];if(0<=n(r,o))break;t[e]=o,e=i}t[e]=r},_down:function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var o=1+(e<<1),a=o+1,s=t[o];if(a<this.length&&n(t[a],s)<0&&(s=t[o=a]),0<=n(s,i))break;t[e]=s,e=o}t[e]=i}},tinyqueue.default=_default$1;var max$2=Math.max,min=Math.min,contourId=0;function processPolygon(e,t,n,r,i,o){for(var a=0,s=e.length-1;a<s;a++){var l,c,u=e[a],p=e[a+1],d=new SweepEvent(u,!1,void 0,t),f=new SweepEvent(p,!1,d,t);d.otherEvent=f,u[0]===p[0]&&u[1]===p[1]||(d.contourId=f.contourId=n,o||(d.isExteriorRing=!1,f.isExteriorRing=!1),0<compareEvents(d,f)?f.left=!0:d.left=!0,l=u[0],c=u[1],i[0]=min(i[0],l),i[1]=min(i[1],c),i[2]=max$2(i[2],l),i[3]=max$2(i[3],c),r.push(d),r.push(f))}}function fillQueue(e,t,n,r,i){for(var o,a,s,l,c=new tinyqueue(null,compareEvents),u=0,p=e.length;u<p;u++)for(s=0,l=(o=e[u]).length;s<l;s++)(a=0===s)&&contourId++,processPolygon(o[s],!0,contourId,c,n,a);for(u=0,p=t.length;u<p;u++)for(s=0,l=(o=t[u]).length;s<l;s++)(a=i===DIFFERENCE?!1:0===s)&&contourId++,processPolygon(o[s],!1,contourId,c,r,a);return c}var EMPTY=[];function trivialOperation(e,t,n){var r=null;return e.length*t.length==0&&(n===INTERSECTION?r=EMPTY:n===DIFFERENCE?r=e:n!==UNION&&n!==XOR||(r=0===e.length?t:e)),r}function compareBBoxes(e,t,n,r,i){var o=null;return(n[0]>r[2]||r[0]>n[2]||n[1]>r[3]||r[1]>n[3])&&(i===INTERSECTION?o=EMPTY:i===DIFFERENCE?o=e:i!==UNION&&i!==XOR||(o=e.concat(t))),o}function boolean(e,t,n){"number"==typeof e[0][0][0]&&(e=[e]),"number"==typeof t[0][0][0]&&(t=[t]);var r=trivialOperation(e,t,n);if(r)return r===EMPTY?null:r;var i=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],a=fillQueue(e,t,i,o,n);if(r=compareBBoxes(e,t,i,o,n))return r===EMPTY?null:r;for(var s=connectEdges(subdivide(a,e,t,i,o,n)),l=[],c=0;c<s.length;c++){var u=s[c];if(u.isExterior()){for(var p=[u.points],d=0;d<u.holeIds.length;d++){var f=u.holeIds[d];p.push(s[f].points)}l.push(p)}}return l}function union(e,t){return boolean(e,t,UNION)}var read$6=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,p=n?i-1:0,d=n?-1:1,f=e[t+p];for(p+=d,o=f&(1<<-u)-1,f>>=-u,u+=s;0<u;o=256*o+e[t+p],p+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;0<u;a=256*a+e[t+p],p+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=c}return(f?-1:1)*a*Math.pow(2,o-r)},write$6=function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,p=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(t+=1<=a+p?d/l:d*Math.pow(2,1-p))*l&&(a++,l/=2),u<=a+p?(s=0,a=u):1<=a+p?(s=(t*l-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));8<=i;e[n+f]=255&s,f+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;0<c;e[n+f]=255&a,f+=h,a/=256,c-=8);e[n+f-h]|=128*g},ieee754={read:read$6,write:write$6},pbf=Pbf;function Pbf(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0,Pbf.Fixed64=1,Pbf.Bytes=2,Pbf.Fixed32=5;var SHIFT_LEFT_32=4294967296,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,TEXT_DECODER_MIN_LENGTH=12,utf8TextDecoder="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function readVarintRemainder(e,t,n){var r=n.buf,i=r[n.pos++],o=(112&i)>>4;if(i<128)return toNum(e,o,t);if(o|=(127&(i=r[n.pos++]))<<3,i<128)return toNum(e,o,t);if(o|=(127&(i=r[n.pos++]))<<10,i<128)return toNum(e,o,t);if(o|=(127&(i=r[n.pos++]))<<17,i<128)return toNum(e,o,t);if(o|=(127&(i=r[n.pos++]))<<24,i<128)return toNum(e,o,t);if(o|=(1&(i=r[n.pos++]))<<31,i<128)return toNum(e,o,t);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(e){return e.type===Pbf.Bytes?e.readVarint()+e.pos:e.pos+1}function toNum(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function writeBigVarint(e,t){var n,r;if(0<=e?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:r=r+1|(n=0)),0x10000000000000000<=e||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),writeBigVarintLow(n,r,t),writeBigVarintHigh(r,t)}function writeBigVarintLow(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}function writeBigVarintHigh(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}function makeRoomForExtraLength(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;e<=i;i--)n.buf[i+r]=n.buf[i]}function writePackedVarint(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function writePackedSVarint(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function writePackedFloat(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function writePackedDouble(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function writePackedBoolean(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function writePackedFixed32(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function writePackedSFixed32(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function writePackedFixed64(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function writePackedSFixed64(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function readUInt32(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function writeInt32(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function readInt32(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function readUtf8(e,t,n){for(var r="",i=t;i<n;){var o,a,s,l=e[i],c=null,u=239<l?4:223<l?3:191<l?2:1;if(n<i+u)break;1===u?l<128&&(c=l):2===u?128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||55296<=c&&c<=57343)&&(c=null)):4===u&&(o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||1114112<=c)&&(c=null)),null===c?(c=65533,u=1):65535<c&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=u}return r}function readUtf8TextDecoder(e,t,n){return utf8TextDecoder.decode(e.subarray(t,n))}function writeUtf8(e,t,n){for(var r,i,o=0;o<t.length;o++){if(55295<(r=t.charCodeAt(o))&&r<57344){if(!i){56319<r||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}Pbf.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=readUInt32(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=readInt32(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=readUInt32(this.buf,this.pos)+readUInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,e},readSFixed64:function(){var e=readUInt32(this.buf,this.pos)+readInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,e},readFloat:function(){var e=ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,n=t[this.pos++],r=127&n;return n<128?r:(r|=(127&(n=t[this.pos++]))<<7,n<128?r:(r|=(127&(n=t[this.pos++]))<<14,n<128?r:(r|=(127&(n=t[this.pos++]))<<21,n<128?r:readVarintRemainder(r|=(15&t[this.pos])<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,(TEXT_DECODER_MIN_LENGTH<=e-t&&utf8TextDecoder?readUtf8TextDecoder:readUtf8)(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Pbf.Bytes)return e.push(this.readVarint(t));var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readSVarint());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readBoolean());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readFloat());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readDouble());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readFixed32());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readSFixed32());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readFixed64());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readSFixed64());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Pbf.Varint)for(;127<this.buf[this.pos++];);else if(t===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Pbf.Fixed32)this.pos+=4;else{if(t!==Pbf.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t,n=this.length||16;n<this.pos+e;)n*=2;n!==this.length&&((t=new Uint8Array(n)).set(this.buf),this.buf=t,this.length=n)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),writeInt32(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),writeInt32(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),writeInt32(this.buf,-1&e,this.pos),writeInt32(this.buf,Math.floor(e*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),writeInt32(this.buf,-1&e,this.pos),writeInt32(this.buf,Math.floor(e*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeVarint:function(e){268435455<(e=+e||0)||e<0?writeBigVarint(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=writeUtf8(this.buf,e,this.pos);var n=this.pos-t;128<=n&&makeRoomForExtraLength(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),ieee754.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),ieee754.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;128<=r&&makeRoomForExtraLength(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,Pbf.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,writePackedVarint,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,writePackedSVarint,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,writePackedBoolean,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,writePackedFloat,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,writePackedDouble,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,writePackedFixed32,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,writePackedSFixed32,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,writePackedFixed64,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,writePackedSFixed64,t)},writeBytesField:function(e,t){this.writeTag(e,Pbf.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Pbf.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Pbf.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Pbf.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Pbf.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Pbf.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Pbf.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Pbf.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Pbf.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Pbf.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var pointGeometry=Point;function Point(e,t){this.x=e,this.y=t}Point.prototype={clone:function(){return new Point(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Point.convert=function(e){return!(e instanceof Point)&&Array.isArray(e)?new Point(e[0],e[1]):e};var vectortilefeature=VectorTileFeature;function VectorTileFeature(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(readFeature,this,t)}function readFeature(e,t,n){1==e?t.id=n.readVarint():2==e?readTag(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function readTag(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}function classifyRings(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=signedArea$1(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}function signedArea$1(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],r+=((n=e[a]).x-t.x)*(t.y+n.y);return r}VectorTileFeature.types=["Unknown","Point","LineString","Polygon"],VectorTileFeature.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n,r=e.readVarint()+e.pos,i=1,o=0,a=0,s=0,l=[];e.pos<r;){if(o<=0&&(i=7&(n=e.readVarint()),o=n>>3),o--,1===i||2===i)a+=e.readSVarint(),s+=e.readSVarint(),1===i&&(t&&l.push(t),t=[]),t.push(new pointGeometry(a,s));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&l.push(t),l},VectorTileFeature.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,o=0,a=0,s=1/0,l=-1/0,c=1/0,u=-1/0;e.pos<n;){if(i<=0&&(r=7&(t=e.readVarint()),i=t>>3),i--,1===r||2===r)(o+=e.readSVarint())<s&&(s=o),l<o&&(l=o),(a+=e.readSVarint())<c&&(c=a),u<a&&(u=a);else if(7!==r)throw new Error("unknown command "+r)}return[s,c,l,u]},VectorTileFeature.prototype.toGeoJSON=function(e,t,n){var r,i=this.extent*Math.pow(2,n),o=this.extent*e,a=this.extent*t,s=this.loadGeometry(),l=VectorTileFeature.types[this.type];function c(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+a)/i;e[t]=[360*(n.x+o)/i-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:for(var u=[],p=0;p<s.length;p++)u[p]=s[p][0];c(s=u);break;case 2:for(p=0;p<s.length;p++)c(s[p]);break;case 3:for(s=classifyRings(s),p=0;p<s.length;p++)for(r=0;r<s[p].length;r++)c(s[p][r])}1===s.length?s=s[0]:l="Multi"+l;var d={type:"Feature",geometry:{type:l,coordinates:s},properties:this.properties};return"id"in this&&(d.id=this.id),d};var vectortilelayer=VectorTileLayer;function VectorTileLayer(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(readLayer,this,t),this.length=this._features.length}function readLayer(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(readValueMessage(n))}function readValueMessage(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;)var r=e.readVarint()>>3,t=1==r?e.readString():2==r?e.readFloat():3==r?e.readDouble():4==r?e.readVarint64():5==r?e.readVarint():6==r?e.readSVarint():7==r?e.readBoolean():null;return t}VectorTileLayer.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new vectortilefeature(this._pbf,t,this.extent,this._keys,this._values)};var vectortile=VectorTile;function VectorTile(e,t){this.layers=e.readFields(readTile,{},t)}function readTile(e,t,n){var r;3!==e||(r=new vectortilelayer(n,n.readVarint()+n.pos)).length&&(t[r.name]=r)}var VectorTile$1=vectortile,VectorTileFeature$1=vectortilefeature,VectorTileLayer$1=vectortilelayer,vectorTile={VectorTile:VectorTile$1,VectorTileFeature:VectorTileFeature$1,VectorTileLayer:VectorTileLayer$1},tiler$7=utilTiler().tileSize(512).margin(1),dispatch$8=dispatch("loadedData"),_vtCache;function abortRequest$7(e){e.abort()}function vtToGeoJSON(e,f,h){var g=new vectorTile.VectorTile(new pbf(e)),t=Object.keys(g.layers);Array.isArray(t)||(t=[t]);var m=[];return t.forEach(function(e){var t=g.layers[e];if(t)for(var n=0;n<t.length;n++){var r=t.feature(n).toGeoJSON(f.xyz[0],f.xyz[1],f.xyz[2]),i=r.geometry;if("Polygon"===i.type&&(i.type="MultiPolygon",i.coordinates=[i.coordinates]),"MultiPolygon"===i.type){var o=!1,a=bboxClip_1(r,f.extent.rectangle());if(fastDeepEqual(r.geometry,a.geometry)||(o=!0),!r.geometry.coordinates.length)continue;if(!r.geometry.coordinates[0].length)continue}var s=utilHashcode(fastJsonStableStringify(r)),l=utilHashcode(fastJsonStableStringify(r.properties||{}));if(r.__layerID__=e.replace(/[^_a-zA-Z0-9\-]/g,"_"),r.__featurehash__=s,r.__propertyhash__=l,m.push(r),o&&"MultiPolygon"===i.type){var c=h[l];if(c&&c.length){var u=c[0],p=union(r.geometry.coordinates,u.geometry.coordinates);if(!p||!p.length)continue;c.push(r);for(var d=0;d<c.length;d++)c[d].geometry.coordinates=p,c[d].__featurehash__=s}else h[l]=[r]}}}),m}function loadTile(n,r){var e,t;n.loaded[r.id]||n.inflight[r.id]||(e=n.template.replace("{x}",r.xyz[0]).replace("{y}",r.xyz[1]).replace(/\{[t-]y\}/,Math.pow(2,r.xyz[2])-r.xyz[1]-1).replace(/\{z(oom)?\}/,r.xyz[2]).replace(/\{switch:([^}]+)\}/,function(e,t){var n=t.split(",");return n[(r.xyz[0]+r.xyz[1])%n.length]}),t=new AbortController,n.inflight[r.id]=t,fetch(e,{signal:t.signal}).then(function(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return n.loaded[r.id]=[],delete n.inflight[r.id],e.arrayBuffer()}).then(function(e){if(!e)throw new Error("No Data");var t=r.xyz[2];n.canMerge[t]||(n.canMerge[t]={}),n.loaded[r.id]=vtToGeoJSON(e,r,n.canMerge[t]),dispatch$8.call("loadedData")}).catch(function(){n.loaded[r.id]=[],delete n.inflight[r.id]}))}var serviceVectorTile={init:function(){_vtCache||this.reset(),this.event=utilRebind(this,dispatch$8,"on")},reset:function(){for(var e in _vtCache){var t=_vtCache[e];t&&t.inflight&&Object.values(t.inflight).forEach(abortRequest$7)}_vtCache={}},addSource:function(e,t){return _vtCache[e]={template:t,inflight:{},loaded:{},canMerge:{}},_vtCache[e]},data:function(e,t){var n=_vtCache[e];if(!n)return[];for(var r=tiler$7.getTiles(t),i={},o=[],a=0;a<r.length;a++){var s=n.loaded[r[a].id];if(s&&s.length)for(var l=0;l<s.length;l++){var c=s[l],u=c.__featurehash__;i[u]||(i[u]=!0,o.push(Object.assign({},c)))}}return o},loadTiles:function(e,t,n){var r=(r=_vtCache[e])||this.addSource(e,t),i=tiler$7.getTiles(n);Object.keys(r.inflight).forEach(function(t){i.find(function(e){return t===e.id})||(abortRequest$7(r.inflight[t]),delete r.inflight[t])}),i.forEach(function(e){loadTile(r,e)})},cache:function(){return _vtCache}},apibase$5="https://www.wikidata.org/w/api.php?",_wikidataCache={},serviceWikidata={init:function(){},reset:function(){_wikidataCache={}},itemsForSearchQuery:function(e,t){var n;e?(n=this.languagesToQuery()[0],d3_json(apibase$5+utilQsString({action:"wbsearchentities",format:"json",formatversion:2,search:e,type:"item",language:n,uselang:n,limit:10,origin:"*"})).then(function(e){if(e&&e.error)throw new Error(e.error);t&&t(null,e.search||{})}).catch(function(e){t&&t(e.message,{})})):t&&t("No query",{})},itemsByTitle:function(e,t,n){t?d3_json(apibase$5+utilQsString({action:"wbgetentities",format:"json",formatversion:2,sites:(e=e||"en").replace(/-/g,"_")+"wiki",titles:t,languages:"en",origin:"*"})).then(function(e){if(e&&e.error)throw new Error(e.error);n&&n(null,e.entities||{})}).catch(function(e){n&&n(e.message,{})}):n&&n("No title",{})},languagesToQuery:function(){var e=_mainLocalizer.localeCode().toLowerCase();return"en-us"===e&&(e="en"),utilArrayUniq([e,_mainLocalizer.languageCode().toLowerCase(),"en"])},entityByQID:function(t,n){var e;t?_wikidataCache[t]?n&&n(null,_wikidataCache[t]):(e=this.languagesToQuery(),d3_json(apibase$5+utilQsString({action:"wbgetentities",format:"json",formatversion:2,ids:t,props:"labels|descriptions|claims|sitelinks",sitefilter:e.map(function(e){return e+"wiki"}).join("|"),languages:e.join("|"),languagefallback:1,origin:"*"})).then(function(e){if(e&&e.error)throw new Error(e.error);n&&n(null,e.entities[t]||{})}).catch(function(e){n&&n(e.message,{})})):n("No qid",{})},getDocs:function(e,d){var f=this.languagesToQuery();this.entityByQID(e.qid,function(e,t){if(!e&&t){var n;t.descriptions&&0<Object.keys(t.descriptions).length&&(n=t.descriptions[Object.keys(t.descriptions)[0]].value);var r={title:t.id,description:n,editURL:"https://www.wikidata.org/wiki/"+t.id};if(t.claims)for(var i,o,a=["P154","P18"],s=0;s<a.length;s++)if((i=t.claims[a[s]])&&0<Object.keys(i).length&&(o=i[Object.keys(i)[0]].mainsnak.datavalue.value)){r.imageURL="https://commons.wikimedia.org/w/index.php?"+utilQsString({title:"Special:Redirect/file/"+o,width:400});break}if(t.sitelinks){var l="en"===_mainLocalizer.languageCode().toLowerCase();for(s=0;s<f.length;s++){var c=f[s]+"wiki";if(t.sitelinks[c]){var u=t.sitelinks[c].title,p="inspector.wiki_reference";l||"en"!==f[s]||(p="inspector.wiki_en_reference"),r.wiki={title:u,text:p,url:"https://"+f[s]+".wikipedia.org/wiki/"+u.replace(/ /g,"_")};break}}}d(null,r)}else d(e||"No entity")})}},endpoint="https://en.wikipedia.org/w/api.php?",serviceWikipedia={init:function(){},reset:function(){},search:function(e,t,n){t?(e=e||"en",d3_json(endpoint.replace("en",e)+utilQsString({action:"query",list:"search",srlimit:"10",srinfo:"suggestion",format:"json",origin:"*",srsearch:t})).then(function(e){if(e&&e.error)throw new Error(e.error);if(!e||!e.query||!e.query.search)throw new Error("No Results");var t;n&&(t=e.query.search.map(function(e){return e.title}),n(null,t))}).catch(function(e){n&&n(e,[])})):n&&n("No Query",[])},suggestions:function(e,t,n){t?(e=e||"en",d3_json(endpoint.replace("en",e)+utilQsString({action:"opensearch",namespace:0,suggest:"",format:"json",origin:"*",search:t})).then(function(e){if(e&&e.error)throw new Error(e.error);if(!e||e.length<2)throw new Error("No Results");n&&n(null,e[1]||[])}).catch(function(e){n&&n(e.message,[])})):n&&n("",[])},translations:function(e,t,r){t?d3_json(endpoint.replace("en",e)+utilQsString({action:"query",prop:"langlinks",format:"json",origin:"*",lllimit:500,titles:t})).then(function(e){if(e&&e.error)throw new Error(e.error);if(!e||!e.query||!e.query.pages)throw new Error("No Results");var t,n;r&&(t=e.query.pages[Object.keys(e.query.pages)[0]],n={},t&&t.langlinks&&t.langlinks.forEach(function(e){n[e.lang]=e["*"]}),r(null,n))}).catch(function(e){r&&r(e.message)}):r&&r("No Title")}},services={geocoder:serviceNominatim,keepRight:serviceKeepRight,improveOSM:serviceImproveOSM,osmose:serviceOsmose,mapillary:serviceMapillary,openstreetcam:serviceOpenstreetcam,osm:serviceOsm,osmWikibase:serviceOsmWikibase,maprules:serviceMapRules,streetside:serviceStreetside,taginfo:serviceTaginfo,vectorTile:serviceVectorTile,wikidata:serviceWikidata,wikipedia:serviceWikipedia},_comboHideTimerID;function svgIcon(t,n,r){return function(e){e.selectAll("svg.icon"+(n?"."+n.split(" ")[0]:"")).data([0]).enter().append("svg").attr("class","icon "+(n||"")).append("use").attr("xlink:href",t).attr("class",r)}}function uiNoteComments(){var o;function t(e){var t,n,r,i;o.isNew()||((n=(t=(t=e.selectAll(".comments-container").data([0])).enter().append("div").attr("class","comments-container").merge(t)).selectAll(".comment").data(o.comments).enter().append("div").attr("class","comment")).append("div").attr("class",function(e){return"comment-avatar user-"+e.uid}).call(svgIcon("#iD-icon-avatar","comment-avatar-icon")),(i=(r=n.append("div").attr("class","comment-main")).append("div").attr("class","comment-metadata")).append("div").attr("class","comment-author").each(function(e){var t=select(this),n=services.osm;n&&e.user&&(t=t.append("a").attr("class","comment-author-link").attr("href",n.userURL(e.user)).attr("tabindex",-1).attr("target","_blank")),t.text(function(e){return e.user||_t("note.anonymous")})}),i.append("div").attr("class","comment-date").text(function(e){return _t("note.status."+e.action,{when:function(e){if(!e)return null;e=e.replace(/-/g,"/");var t=new Date(e);if(isNaN(t.getTime()))return null;return t.toLocaleDateString(_mainLocalizer.localeCode(),{day:"numeric",month:"short",year:"numeric"})}(e.date)})}),r.append("div").attr("class","comment-text").html(function(e){return e.html}),t.call(a))}function a(r){var t,e=corePreferences("preferences.privacy.thirdpartyicons")||"true",i=services.osm;"true"===e&&i&&(t={},o.comments.forEach(function(e){e.uid&&(t[e.uid]=!0)}),Object.keys(t).forEach(function(n){i.loadUser(n,function(e,t){t&&t.image_url&&r.selectAll(".comment-avatar.user-"+n).html("").append("img").attr("class","icon comment-avatar-icon").attr("src",t.image_url).attr("alt",t.display_name)})}))}return t.note=function(e){return arguments.length?(o=e,t):o},t}function uiNoteHeader(){var i;function t(e){var t=e.selectAll(".note-header").data(i?[i]:[],function(e){return e.status+e.id});t.exit().remove();var n=t.enter().append("div").attr("class","note-header"),r=n.append("div").attr("class",function(e){return"note-header-icon "+e.status}).classed("new",function(e){return e.id<0});r.append("div").attr("class","preset-icon-28").call(svgIcon("#iD-icon-note","note-fill")),r.each(function(e){var t="#iD-icon-"+(e.id<0?"plus":"open"===e.status?"close":"apply");r.append("div").attr("class","note-icon-annotation").call(svgIcon(t,"icon-annotation"))}),n.append("div").attr("class","note-header-label").text(function(e){return i.isNew()?_t("note.new"):_t("note.note")+" "+e.id+" "+("closed"===e.status?_t("note.closed"):"")})}return t.note=function(e){return arguments.length?(i=e,t):i},t}function uiNoteReport(){var r;function t(e){var t;services.osm&&r instanceof osmNote&&!r.isNew()&&(t=services.osm.noteReportURL(r));var n=e.selectAll(".note-report").data(t?[t]:[]);n.exit().remove(),n.enter().append("a").attr("class","note-report").attr("target","_blank").attr("href",function(e){return e}).call(svgIcon("#iD-icon-out-link","inline")).append("span").text(_t("note.report"))}return t.note=function(e){return arguments.length?(r=e,t):r},t}function uiViewOnOSM(i){var o;function t(e){var t;o instanceof osmEntity?t=i.connection().entityURL(o):o instanceof osmNote&&(t=i.connection().noteURL(o));var n=!o||o.isNew()?[]:[o],r=e.selectAll(".view-on-osm").data(n,function(e){return e.id});r.exit().remove(),r.enter().append("a").attr("class","view-on-osm").attr("target","_blank").attr("href",t).call(svgIcon("#iD-icon-out-link","inline")).append("span").text(_t("inspector.view_on_osm"))}return t.what=function(e){return arguments.length?(o=e,t):o},t}function uiNoteEditor(s){var l,a,r=dispatch("change"),c=uiNoteComments(),u=uiNoteHeader();function p(e){var t=e.selectAll(".header").data([0]).enter().append("div").attr("class","header fillL");t.append("button").attr("class","close").on("click",function(){s.enter(modeBrowse(s))}).call(svgIcon("#iD-icon-close")),t.append("h3").text(_t("note.title"));var n=e.selectAll(".body").data([0]),r=(n=n.enter().append("div").attr("class","body").merge(n)).selectAll(".note-editor").data([0]);r.enter().append("div").attr("class","modal-section note-editor").merge(r).call(u.note(l)).call(c.note(l)).call(d);var i=e.selectAll(".footer").data([0]);i.enter().append("div").attr("class","footer").merge(i).call(uiViewOnOSM(s).what(l)).call(uiNoteReport().note(l));var o=services.osm;o&&o.on("change.note-save",function(){e.call(p)})}function d(e){var t=l&&l.id===s.selectedNoteID(),n=e.selectAll(".note-save").data(t?[l]:[],function(e){return e.status+e.id});n.exit().remove();var r=n.enter().append("div").attr("class","note-save save-section cf");r.append("h4").attr("class",".note-save-header").text(function(){return l.isNew()?_t("note.newDescription"):_t("note.newComment")});var i=r.append("textarea").attr("class","new-comment-input").attr("placeholder",_t("note.inputPlaceholder")).attr("maxlength",1e3).property("value",function(e){return e.newComment}).call(utilNoAuto).on("keydown.note-input",function(){if(13!==event.keyCode||!event.metaKey)return;var e=services.osm;if(!e)return;if(!e.authenticated())return;if(!l.newComment)return;event.preventDefault(),select(this).on("keydown.note-input",null),window.setTimeout(function(){l.isNew()?(n.selectAll(".save-button").node().focus(),m(l)):(n.selectAll(".comment-button").node().focus(),v(l))},10)}).on("input.note-input",o).on("blur.note-input",o);function o(){var e=select(this).property("value").trim()||void 0;l=l.update({newComment:e});var t=services.osm;t&&t.replaceNote(l),n.call(h)}a&&i.node().focus(),n=r.merge(n).call(f).call(h)}function f(e){var t,n,r,i,o=(o=e.selectAll(".detail-section").data([0])).enter().append("div").attr("class","detail-section").merge(o),a=services.osm;a&&(t=a.authenticated(),(n=o.selectAll(".auth-warning").data(t?[]:[0])).exit().transition().duration(200).style("opacity",0).remove(),(r=n.enter().insert("div",".tag-reference-body").attr("class","field-warning auth-warning").style("opacity",0)).call(svgIcon("#iD-icon-alert","inline")),r.append("span").text(_t("note.login")),r.append("a").attr("target","_blank").call(svgIcon("#iD-icon-out-link","inline")).append("span").text(_t("login")).on("click.note-login",function(){event.preventDefault(),a.authenticate()}),r.transition().duration(200).style("opacity",1),(i=o.selectAll(".note-save-prose").data(t?[0]:[])).exit().remove(),i=i.enter().append("p").attr("class","note-save-prose").text(_t("note.upload_explanation")).merge(i),a.userDetails(function(e,t){var n;e||(n=select(document.createElement("div")),t.image_url&&n.append("img").attr("src",t.image_url).attr("class","icon pre-text user-icon"),n.append("a").attr("class","user-info").text(t.display_name).attr("href",a.userURL(t.display_name)).attr("tabindex",-1).attr("target","_blank"),i.html(_t("note.upload_explanation_with_user",{user:n.html()})))}))}function h(e){var t=services.osm,n=t&&t.authenticated(),r=l&&l.id===s.selectedNoteID(),i=e.selectAll(".buttons").data(r?[l]:[],function(e){return e.status+e.id});i.exit().remove();var o=i.enter().append("div").attr("class","buttons");function a(e){return!n||"open"!==e.status||!e.newComment||null}l.isNew()?(o.append("button").attr("class","button cancel-button secondary-action").text(_t("confirm.cancel")),o.append("button").attr("class","button save-button action").text(_t("note.save"))):(o.append("button").attr("class","button status-button action"),o.append("button").attr("class","button comment-button action").text(_t("note.comment"))),(i=i.merge(o)).select(".cancel-button").on("click.cancel",g),i.select(".save-button").attr("disabled",a).on("click.save",m),i.select(".status-button").attr("disabled",!n||null).text(function(e){var t="open"===e.status?"close":"open",n=e.newComment?"_comment":"";return _t("note."+t+n)}).on("click.status",y),i.select(".comment-button").attr("disabled",a).on("click.comment",v)}function g(e){this.blur();var t=services.osm;t&&t.removeNote(e),s.enter(modeBrowse(s)),r.call("change")}function m(e){this.blur();var t=services.osm;t&&t.postNoteCreate(e,function(e,t){r.call("change",t)})}function y(e){this.blur();var t,n=services.osm;n&&(t="open"===e.status?"closed":"open",n.postNoteUpdate(e,t,function(e,t){r.call("change",t)}))}function v(e){this.blur();var t=services.osm;t&&t.postNoteUpdate(e,e.status,function(e,t){r.call("change",t)})}return p.note=function(e){return arguments.length?(l=e,p):l},p.newNote=function(e){return arguments.length?(a=e,p):a},utilRebind(p,r,"on")}function modeSelectNote(r,i){var n={id:"select-note",button:"browse"},o=utilKeybinding("select-note"),a=uiNoteEditor(r).on("change",function(){r.map().pan([0,0]);var e=c();e&&r.ui().sidebar.show(a.note(e))}),s=[behaviorBreathe(),behaviorHover(r),behaviorSelect(r),behaviorLasso(r),modeDragNode(r).behavior,modeDragNote(r).behavior],l=!1;function c(){if(services.osm){var e=services.osm.getNote(i);return e||r.enter(modeBrowse(r)),e}}function u(e){var t,n;c()&&((t=r.surface().selectAll(".layer-notes .note-"+i)).empty()?(n=event&&"zoom"===event.type&&event.sourceEvent,e&&n&&("pointermove"===n.type||"mousemove"===n.type||"touchmove"===n.type)&&r.enter(modeBrowse(r))):(t.classed("selected",!0),r.selectedNoteID(i)))}function p(){r.container().select(".combobox").size()||r.enter(modeBrowse(r))}return n.zoomToSelected=function(){var e;!services.osm||(e=services.osm.getNote(i))&&r.map().centerZoomEase(e.loc,20)},n.newFeature=function(e){return arguments.length?(l=e,n):l},n.enter=function(){var e,t=c();t&&(s.forEach(r.install),o.on(_t("inspector.zoom_to.key"),n.zoomToSelected).on("⎋",p,!0),select(document).call(o),u(),(e=r.ui().sidebar).show(a.note(t).newNote(l)),e.expand(e.intersects(t.extent())),r.map().on("drawn.select",u))},n.exit=function(){s.forEach(r.uninstall),select(document).call(o.unbind),r.surface().selectAll(".layer-notes .selected").classed("selected hover",!1),r.map().on("drawn.select",null),r.ui().sidebar.hide(),r.selectedNoteID(null)},n}function modeDragNote(i){var n,o,a,r={id:"drag-note",button:"browse"},e=behaviorEdit(i);function s(){n&&(window.clearInterval(n),n=null)}function l(e){e=e||[0,0];var t=geoVecSubtract(event&&event.point||i.projection(o),e),n=i.projection.invert(t);a=a.move(n);var r=services.osm;r&&r.replaceNote(a),i.replace(actionNoop())}var t=behaviorDrag().selector(".layer-touch.markers .target.note.new").surface(i.container().select(".main-map").node()).origin(function(e){return i.projection(e.loc)}).on("start",function(e){a=e;var t=services.osm;t&&(a=t.getNote(a.id)),i.surface().selectAll(".note-"+a.id).classed("active",!0),i.perform(actionNoop()),i.enter(r),i.selectedNoteID(a.id)}).on("move",function(){event.sourceEvent.stopPropagation(),o=i.projection.invert(event.point),l();var e,t=geoViewportEdge(event.point,i.map().dimensions());t?(e=t,n&&window.clearInterval(n),n=window.setInterval(function(){i.map().pan(e),l(e)},50)):s()}).on("end",function(){i.replace(actionNoop()),i.selectedNoteID(a.id).enter(modeSelectNote(i,a.id))});return r.enter=function(){i.install(e)},r.exit=function(){i.ui().sidebar.hover.cancel(),i.uninstall(e),i.surface().selectAll(".active").classed("active",!1),s()},r.behavior=t,r}function uiDataHeader(){var r;function e(e){var t=e.selectAll(".data-header").data(r?[r]:[],function(e){return e.__featurehash__});t.exit().remove();var n=t.enter().append("div").attr("class","data-header");n.append("div").attr("class","data-header-icon").append("div").attr("class","preset-icon-28").call(svgIcon("#iD-icon-data","note-fill")),n.append("div").attr("class","data-header-label").text(_t("map_data.layers.custom.title"))}return e.datum=function(e){return arguments.length?(r=e,this):r},e}function uiCombobox(e,t){function n(a,o){function n(){var e;0===event.button&&(C=+new Date,a.property("selectionStart")===a.property("selectionEnd")?a.on("mouseup.combo-input",r):(e=utilGetSetValue(a),a.node().setSelectionRange(e.length,e.length)))}function r(){var e,t;a.on("mouseup.combo-input",null),0===event.button&&a.node()===document.activeElement&&a.property("selectionStart")===a.property("selectionEnd")&&((e=y.selectAll(".combobox")).empty()||e.datum()!==a.node()?(t=C,window.setTimeout(function(){t===C&&p("",function(){i(),d()})},250)):s())}function i(){s(),y.insert("div",":first-child").datum(a.node()).attr("class","combobox"+(t?" combobox-"+t:"")).style("position","absolute").style("display","block").style("left","0px").on("mousedown.combo-container",function(){event.preventDefault()}),y.on("scroll.combo-scroll",d,!0)}function s(){_comboHideTimerID&&(window.clearTimeout(_comboHideTimerID),_comboHideTimerID=void 0),y.selectAll(".combobox").remove(),y.on("scroll.combo-scroll",null)}function l(){p(u(),function(){b=null;var e=a.property("value");v.length&&(a.property("selectionEnd")===e.length&&(b=function(){if(!w)return;var e=x?u():u().toLowerCase();if(!e)return;if(!isNaN(parseFloat(e))&&isFinite(e))return;for(var t=-1,n=0;n<v.length;n++){var r=v[n].value,i=x?r:r.toLowerCase();if(i===e){t=n;break}-1===t&&0===i.indexOf(e)&&(t=n)}if(-1!==t){var o=v[t].value;return a.property("value",o),a.node().setSelectionRange(e.length,o.length),o}}()),b=b||e),e.length?y.selectAll(".combobox").empty()&&i():s(),d()})}function c(e){if(v.length){for(var t=-1,n=0;n<v.length;n++)if(b&&v[n].value===b){t=n;break}t=Math.max(Math.min(t+e,v.length-1),0),b=v[t].value,a.property("value",b)}d(),function(){var e=y.selectAll(".combobox");if(e.empty())return;var t=y.node().getBoundingClientRect();{e.node().getBoundingClientRect().bottom>t.bottom&&((o?o.node():a.node()).scrollIntoView({behavior:"instant",block:"center"}),d())}var n=e.selectAll(".combobox-option.selected").node();n&&n.scrollIntoView({behavior:"smooth",block:"nearest"})}()}function u(){var e=a.property("value"),t=a.property("selectionStart"),n=a.property("selectionEnd");return t&&n&&(e=e.substring(0,t)),e}function p(e,t){S=!1,A.call(a,e,function(e){S||((v=e).forEach(function(e){_[e.value]=e}),t&&t())})}function d(){var e,t,n,r,i;v.length<E||document.activeElement!==a.node()?s():y.selectAll(".combobox").empty()||((t=(e=y.selectAll(".combobox")).selectAll(".combobox-option").data(v,function(e){return e.value})).exit().remove(),t.enter().append("a").attr("class","combobox-option").attr("title",function(e){return e.title}).text(function(e){return e.display||e.value}).on("mouseenter",h).on("mouseleave",g).merge(t).classed("selected",function(e){return e.value===b}).on("click.combo-option",f).order(),n=o?o.node():a.node(),r=y.node().getBoundingClientRect(),i=n.getBoundingClientRect(),e.style("left",i.left+5-r.left+"px").style("width",i.width-10+"px").style("top",i.height+i.top-r.top+"px"))}function f(e){S=!0;var t=a.node();e&&(utilGetSetValue(a,e.value),utilTriggerEvent(a,"change"));var n=utilGetSetValue(a);t.setSelectionRange(n.length,n.length),e=_[n],m.call("accept",t,e,n),s()}a&&!a.empty()&&a.classed("combobox-input",!0).on("focus.combo-input",function(){p("")}).on("blur.combo-input",function(){_comboHideTimerID=window.setTimeout(s,75)}).on("keydown.combo-input",function(){var e=!y.selectAll(".combobox").empty(),t=a.node()?a.node().tagName.toLowerCase():"";switch(event.keyCode){case 8:case 46:event.stopPropagation(),b=null,d(),a.on("input.combo-input",function(){var e=a.property("selectionStart");a.node().setSelectionRange(e,e),a.on("input.combo-input",l)});break;case 9:f();break;case 13:event.preventDefault(),event.stopPropagation();break;case 38:if("textarea"===t&&!e)return;event.preventDefault(),"input"!==t||e||i(),c(-1);break;case 40:if("textarea"===t&&!e)return;event.preventDefault(),"input"!==t||e||i(),c(1)}}).on("keyup.combo-input",function(){switch(event.keyCode){case 27:!function(){S=!0;var e=a.node(),t=utilGetSetValue(a),n=a.property("selectionStart"),r=a.property("selectionEnd");t=t.slice(0,n)+t.slice(r),utilGetSetValue(a,t),e.setSelectionRange(t.length,t.length),m.call("cancel",e),s()}();break;case 13:f()}}).on("input.combo-input",l).on("mousedown.combo-input",n).each(function(){var e=this.parentNode,t=this.nextSibling;select(e).selectAll(".combobox-caret").filter(function(e){return e===a.node()}).data([a.node()]).enter().insert("div",function(){return t}).attr("class","combobox-caret").on("mousedown.combo-caret",function(){event.preventDefault(),a.node().focus(),n()}).on("mouseup.combo-caret",function(){event.preventDefault(),r()})})}var h,g,m=dispatch("accept","cancel"),y=e.container(),v=[],r=[],_={},b=null,w=!0,x=!1,S=!1,E=2,C=0,A=function(n,e){e(r.filter(function(e){var t=e.terms||[];return t.push(e.value),t.some(function(e){return-1!==e.toString().toLowerCase().indexOf(n.toLowerCase())})}))};return n.canAutocomplete=function(e){return arguments.length?(w=e,n):w},n.caseSensitive=function(e){return arguments.length?(x=e,n):x},n.data=function(e){return arguments.length?(r=e,n):r},n.fetcher=function(e){return arguments.length?(A=e,n):A},n.minItems=function(e){return arguments.length?(E=e,n):E},n.itemsMouseEnter=function(e){return arguments.length?(h=e,n):h},n.itemsMouseLeave=function(e){return arguments.length?(g=e,n):g},utilRebind(n,m,"on")}function uiToggle(t,n){return function(e){e.style("opacity",t?0:1).classed("hide",!1).transition().style("opacity",t?1:0).on("end",function(){select(this).classed("hide",!t).style("opacity",null),n&&n.apply(this)})}}function uiDisclosure(e,o,a){function t(e){var t;null==s&&(t=corePreferences("disclosure."+o+".expanded"),s=null===t?!!a:"true"===t);var n=e.selectAll(".hide-toggle-"+o).data([0]),r=n.enter().append("a").attr("href","#").attr("class","hide-toggle hide-toggle-"+o).call(svgIcon("","pre-text","hide-toggle-icon"));r.append("span").attr("class","hide-toggle-text"),(n=r.merge(n)).on("click",function(){event.preventDefault(),s=!s,u&&corePreferences("disclosure."+o+".expanded",s);n.classed("expanded",s),n.selectAll(".hide-toggle-icon").attr("xlink:href",s?"#iD-icon-down":"rtl"===_mainLocalizer.textDirection()?"#iD-icon-backward":"#iD-icon-forward"),i.call(uiToggle(s)),s&&i.call(p);l.call("toggled",this,s)}).classed("expanded",s),n.selectAll(".hide-toggle-text").text(c()),n.selectAll(".hide-toggle-icon").attr("xlink:href",s?"#iD-icon-down":"rtl"===_mainLocalizer.textDirection()?"#iD-icon-backward":"#iD-icon-forward");var i=e.selectAll(".disclosure-wrap").data([0]);i=i.enter().append("div").attr("class","disclosure-wrap disclosure-wrap-"+o).merge(i).classed("hide",!s),s&&i.call(p)}var s,l=dispatch("toggled"),c=utilFunctor(""),u=!0,p=function(){};return t.title=function(e){return arguments.length?(c=utilFunctor(e),t):c},t.expanded=function(e){return arguments.length?(s=e,t):s},t.updatePreference=function(e){return arguments.length?(u=e,t):u},t.content=function(e){return arguments.length?(p=e,t):p},utilRebind(t,l,"on")}function uiSection(n,r){var i,o,a,s,l,c,t=utilFunctor(""),u=utilFunctor(!0),p=select(null),d={id:n};function f(e){if(i){var t=i();if(e.classed("hide",!t),!t)return void e.html("")}if(l)return a=a||uiDisclosure(r,n.replace(/-/g,"_"),u()).title(s||"").content(l),void 0!==c&&(a.expanded(c),c=void 0),void e.call(a);o&&e.call(o)}return d.classes=function(e){return arguments.length?(t=utilFunctor(e),d):t},d.title=function(e){return arguments.length?(s=utilFunctor(e),d):s},d.expandedByDefault=function(e){return arguments.length?(u=utilFunctor(e),d):u},d.shouldDisplay=function(e){return arguments.length?(i=utilFunctor(e),d):i},d.content=function(e){return arguments.length?(o=e,d):o},d.disclosureContent=function(e){return arguments.length?(l=e,d):l},d.disclosureExpanded=function(e){return arguments.length?(c=e,d):c},d.render=function(e){(p=(p=e.selectAll(".section-"+n).data([0])).enter().append("div").attr("class","section section-"+n+" "+(t&&t()||"")).merge(p)).call(f)},d.reRender=function(){p.call(f)},d.selection=function(){return p},d.disclosure=function(){return a},d}function uiTagReference(r){var i,o,a=r.qid?services.wikidata:services.osmWikibase,t={},s=select(null),n=select(null);function l(e,t){if(n.html(""),!t||!t.title)return n.append("p").attr("class","tag-reference-description").text(_t("inspector.no_documentation_key")),void c();t.imageURL?n.append("img").attr("class","tag-reference-wiki-image").attr("src",t.imageURL).on("load",function(){c()}).on("error",function(){select(this).remove(),c()}):c(),n.append("p").attr("class","tag-reference-description").text(t.description||_t("inspector.no_documentation_key")).append("a").attr("class","tag-reference-edit").attr("target","_blank").attr("tabindex",-1).attr("title",_t("inspector.edit_reference")).attr("href",t.editURL).call(svgIcon("#iD-icon-edit","inline")),t.wiki&&n.append("a").attr("class","tag-reference-link").attr("target","_blank").attr("tabindex",-1).attr("href",t.wiki.url).call(svgIcon("#iD-icon-out-link","inline")).append("span").text(_t(t.wiki.text)),"comment"===r.key&&n.append("a").attr("class","tag-reference-comment-link").attr("target","_blank").attr("tabindex",-1).call(svgIcon("#iD-icon-out-link","inline")).attr("href",_t("commit.about_changeset_comments_link")).append("span").text(_t("commit.about_changeset_comments"))}function c(){i=!0,s.classed("tag-reference-loading",!1),n.classed("expanded",!0).transition().duration(200).style("max-height","200px").style("opacity","1"),o=!0,s.selectAll("svg.icon use").each(function(){var e=select(this);"#iD-icon-info"===e.attr("href")&&e.attr("href","#iD-icon-info-filled")})}function u(){n.transition().duration(200).style("max-height","0px").style("opacity","0").on("end",function(){n.classed("expanded",!1)}),o=!1,s.selectAll("svg.icon use").each(function(){var e=select(this);"#iD-icon-info-filled"===e.attr("href")&&e.attr("href","#iD-icon-info")})}return t.button=function(e,t,n){(s=(s=e.selectAll(".tag-reference-button").data([0])).enter().append("button").attr("class","tag-reference-button "+t).attr("title",_t("icons.information")).attr("tabindex",-1).call(svgIcon("#iD-icon-"+(n||"inspect"))).merge(s)).on("click",function(){event.stopPropagation(),event.preventDefault(),this.blur(),o?u():i?c():a&&(s.classed("tag-reference-loading",!0),a.getDocs(r,l))})},t.body=function(e){var t=r.qid||r.rtype||r.key+"-"+r.value;(n=e.selectAll(".tag-reference-body").data([t],function(e){return e})).exit().remove(),n=n.enter().append("div").attr("class","tag-reference-body").style("max-height","0").style("opacity","0").merge(n),!1===o&&u()},t.showing=function(e){return arguments.length?(o=e,t):o},t}function uiSectionRawTagEditor(e,d){var f,t,h,g,a=uiSection(e,d).classes("raw-tag-editor").title(function(){var e=Object.keys(h).filter(function(e){return e}).length;return _t("inspector.title_count",{title:_t("inspector.tags"),count:e})}).expandedByDefault(!1).disclosureContent(function(e){_=_.filter(function(e){return void 0!==h[e]});var t=utilArrayDifference(Object.keys(h).sort(),_);for(var n in t)_.push(t[n]);var r=_.map(function(e,t){return{index:t,key:e,value:h[e]}});r.length&&!b||(b=!1,r.push({index:r.length,key:"",value:""}));var i=e.selectAll(".raw-tag-options").data([0]);i.exit().remove(),i.enter().insert("div",":first-child").attr("class","raw-tag-options").selectAll(".raw-tag-option").data(y,function(e){return e.id}).enter().append("button").attr("class",function(e){return"raw-tag-option raw-tag-option-"+e.id+(v===e.id?" selected":"")}).attr("title",function(e){return _t("icons."+e.id)}).on("click",function(t){v=t.id,corePreferences("raw-tag-editor-view",t.id),e.selectAll(".raw-tag-option").classed("selected",function(e){return e===t}),e.selectAll(".tag-text").classed("hide","text"!==t.id).each(x),e.selectAll(".tag-list, .add-row").classed("hide","list"!==t.id)}).each(function(e){select(this).call(svgIcon(e.icon))});var o=function(e){var t=e.filter(function(e){return e.key&&""!==e.key.trim()}).map(function(e){var t=e.value;"string"!=typeof t&&(t="*");var n=t?S(t):"";return S(e.key)+"="+n}).join("\n");if("hover"!==f&&t.length)return t+"\n";return t}(r),a=e.selectAll(".tag-text").data([0]);(a=a.enter().append("textarea").attr("class","tag-text"+("text"!==v?" hide":"")).call(utilNoAuto).attr("placeholder",_t("inspector.key_value")).attr("spellcheck","false").merge(a)).call(utilGetSetValue,o).each(x).on("input",x).on("blur",E).on("change",E);var s=e.selectAll(".tag-list").data([0]);s=s.enter().append("ul").attr("class","tag-list"+("list"!==v?" hide":"")).merge(s);var l=e.selectAll(".add-row").data([0]).enter().append("div").attr("class","add-row"+("list"!==v?" hide":""));l.append("button").attr("class","add-tag").call(svgIcon("#iD-icon-plus","light")).on("click",P),l.append("div").attr("class","space-value"),l.append("div").attr("class","space-buttons");var c=s.selectAll(".tag-row").data(r,function(e){return e.key});c.exit().each(A).remove();var u=c.enter().append("li").attr("class","tag-row").classed("readonly",w),p=u.append("div").attr("class","inner-wrap");p.append("div").attr("class","key-wrap").append("input").property("type","text").attr("class","key").call(utilNoAuto).on("blur",I).on("change",I),p.append("div").attr("class","value-wrap").append("input").property("type","text").attr("class","value").call(utilNoAuto).on("blur",k).on("change",k).on("keydown.push-more",C),p.append("button").attr("tabindex",-1).attr("class","form-field-button remove").attr("title",_t("icons.remove")).call(svgIcon("#iD-operation-delete")),(c=c.merge(u).sort(function(e,t){return e.index-t.index})).each(function(e){var t,n=select(this),r=n.select("input.key"),i=n.select("input.value");g&&m&&"hover"!==f&&function(i,e){if(w(i.datum()))return;if(Array.isArray(e.datum().value))return e.call(uiCombobox(d,"tag-value").minItems(1).fetcher(function(e,t){var n=utilGetSetValue(i);h[n]&&t(h[n].filter(Boolean).map(function(e){return{value:e,title:e}}))}));var t=d.graph().geometry(g[0]);function o(e,t){for(var n=[],r=[],i=0;i<t.length;i++)t[i].value.substring(0,e.length)===e?n.push(t[i]):r.push(t[i]);return n.concat(r)}i.call(uiCombobox(d,"tag-key").fetcher(function(r,i){m.keys({debounce:!0,geometry:t,query:r},function(e,t){var n;e||(n=t.filter(function(e){return void 0===h[e.value]}),i(o(r,n)))})})),e.call(uiCombobox(d,"tag-value").fetcher(function(n,r){m.values({debounce:!0,key:utilGetSetValue(i),geometry:t,query:n},function(e,t){e||r(o(n,t))})}))}(r,i),t="string"!=typeof e.value?uiTagReference({key:e.key}):g&&g.some(function(e){return"relation"===d.entity(e).type})&&"type"===e.key?uiTagReference({rtype:e.value}):uiTagReference({key:e.key,value:e.value}),"hover"===f&&t.showing(!1),n.select(".inner-wrap").call(t.button),n.call(t.body),n.select("button.remove")}),c.selectAll("input.key").attr("title",function(e){return e.key}).call(utilGetSetValue,function(e){return e.key}).attr("readonly",function(e){return w(e)||"string"!=typeof e.value||null}),c.selectAll("input.value").attr("title",function(e){return Array.isArray(e.value)?e.value.filter(Boolean).join("\n"):e.value}).classed("mixed",function(e){return Array.isArray(e.value)}).attr("placeholder",function(e){return"string"==typeof e.value?null:_t("inspector.multiple_values")}).call(utilGetSetValue,function(e){return"string"==typeof e.value?e.value:""}).attr("readonly",function(e){return w(e)||null}),c.selectAll("button.remove").on(("PointerEvent"in window?"pointer":"mouse")+"down",N)}),m=services.taginfo,n=dispatch("change"),y=[{id:"text",icon:"#fas-i-cursor"},{id:"list",icon:"#fas-th-list"}],v=corePreferences("raw-tag-editor-view")||"list",r=[],_=[],b=!1,s=null;function w(e){for(var t=0;t<r.length;t++)if(null!==e.key.match(r[t]))return!0;return!1}function x(){var e;"text"===v&&((e=select(this)).style("height",null),e.style("height",e.node().scrollHeight+5+"px"))}function S(e){return JSON.stringify(e).slice(1,-1)}function o(e){var t="",n="";return(e.length<1||'"'!==e.charAt(0))&&(t='"'),(e.length<2||'"'!==e.charAt(e.length-1)||'"'===e.charAt(e.length-1)&&"\\"===e.charAt(e.length-2))&&(n='"'),JSON.parse(t+e+n)}function E(){var e=this.value.trim(),i={};e.split("\n").forEach(function(e){var t,n,r=e.match(/^\s*([^=]+)=(.*)$/);null!==r&&(t=d.cleanTagKey(o(r[1].trim())),n=d.cleanTagValue(o(r[2].trim())),i[t]=n)});var t=utilTagDiff(h,i);t.length&&(s=s||{},t.forEach(function(e){w({key:e.key})||"*"===e.newVal&&"string"!=typeof e.oldVal||("-"===e.type?s[e.key]=void 0:"+"===e.type&&(s[e.key]=e.newVal||""))}),0!==Object.keys(s).length?l():s=null)}function C(){9===event.keyCode&&!event.shiftKey&&a.selection().selectAll(".tag-list li:last-child input.value").node()===this&&utilGetSetValue(select(this))&&P()}function A(){var e=select(this);e.selectAll("input.key").call(uiCombobox.off,d),e.selectAll("input.value").call(uiCombobox.off,d)}function I(e){if(!select(this).attr("readonly")){var t=e.key;if(!s||!s.hasOwnProperty(t)||void 0!==s[t]){var n=d.cleanTagKey(this.value.trim());if(w({key:n}))this.value=t;else{if(n&&n!==t&&void 0!==h[n])return this.value=t,void a.selection().selectAll(".tag-list input.value").each(function(e){var t;e.key===n&&((t=select(this).node()).focus(),t.select())});var r=select(this.parentNode.parentNode).selectAll("input.value"),i=d.cleanTagValue(utilGetSetValue(r));s=s||{},t&&(s[t]=void 0),s[n]=i;var o=_.indexOf(t);-1!==o&&(_[o]=n),e.key=n,e.value=i,this.value=n,utilGetSetValue(r,i),l()}}}}function k(e){w(e)||"string"!=typeof e.value&&!this.value||s&&s.hasOwnProperty(e.key)&&void 0===s[e.key]||((s=s||{})[e.key]=d.cleanTagValue(this.value),l())}function N(t){w(t)||(""===t.key?(b=!1,a.reRender()):(_=_.filter(function(e){return e!==t.key}),(s=s||{})[t.key]=void 0,l()))}function P(){window.setTimeout(function(){b=!0,a.reRender(),a.selection().selectAll(".tag-list li:last-child input.key").node().focus()},20)}function l(){var e=g;window.setTimeout(function(){s&&(n.call("change",this,e,s),s=null)},10)}return a.state=function(e){return arguments.length?(f!==e&&(_=[],f=e),a):f},a.presets=function(e){return arguments.length?((t=e)&&t.length&&t[0].isFallback()?a.disclosureExpanded(!0):a.disclosureExpanded(null),a):t},a.tags=function(e){return arguments.length?(h=e,a):h},a.entityIDs=function(e){return arguments.length?(g&&e&&utilArrayIdentical(g,e)||(g=e,_=[]),a):g},a.readOnlyTags=function(e){return arguments.length?(r=e,a):r},utilRebind(a,n,"on")}function uiDataEditor(o){var a,s=uiDataHeader(),l=uiSectionRawTagEditor("custom-data-tag-editor",o).expandedByDefault(!0).readOnlyTags([/./]);function e(e){var t=e.selectAll(".header").data([0]).enter().append("div").attr("class","header fillL");t.append("button").attr("class","close").on("click",function(){o.enter(modeBrowse(o))}).call(svgIcon("#iD-icon-close")),t.append("h3").text(_t("map_data.title"));var n=e.selectAll(".body").data([0]),r=(n=n.enter().append("div").attr("class","body").merge(n)).selectAll(".data-editor").data([0]);r.enter().append("div").attr("class","modal-section data-editor").merge(r).call(s.datum(a));var i=n.selectAll(".raw-tag-editor").data([0]);i.enter().append("div").attr("class","raw-tag-editor data-editor").merge(i).call(l.tags(a&&a.properties||{}).state("hover").render).selectAll("textarea.tag-text").attr("readonly",!0).classed("readonly",!0)}return e.datum=function(e){return arguments.length?(a=e,this):a},e}function modeSelectData(r,i){var n={id:"select-data",button:"browse"},o=utilKeybinding("select-data"),a=uiDataEditor(r),s=[behaviorBreathe(),behaviorHover(r),behaviorSelect(r),behaviorLasso(r),modeDragNode(r).behavior,modeDragNote(r).behavior];function l(e){var t,n=r.surface().selectAll(".layer-mapdata .data"+i.__featurehash__);n.empty()?(t=event&&"zoom"===event.type&&event.sourceEvent,e&&t&&("pointermove"===t.type||"mousemove"===t.type||"touchmove"===t.type)&&r.enter(modeBrowse(r))):n.classed("selected",!0)}function c(){r.container().select(".combobox").size()||r.enter(modeBrowse(r))}return n.zoomToSelected=function(){var e=geoExtent(d3_geoBounds(i));r.map().centerZoomEase(e.center(),r.map().trimmedExtentZoom(e))},n.enter=function(){s.forEach(r.install),o.on(_t("inspector.zoom_to.key"),n.zoomToSelected).on("⎋",c,!0),select(document).call(o),l();var e=r.ui().sidebar;e.show(a.datum(i));var t=geoExtent(d3_geoBounds(i));e.expand(e.intersects(t)),r.map().on("drawn.select-data",l)},n.exit=function(){s.forEach(r.uninstall),select(document).call(o.unbind),r.surface().selectAll(".layer-mapdata .selected").classed("selected hover",!1),r.map().on("drawn.select-data",null),r.ui().sidebar.hide()},n}function uiImproveOsmComments(){var t;function n(e){var i=(i=e.selectAll(".comments-container").data([0])).enter().append("div").attr("class","comments-container").merge(i);services.improveOSM.getComments(t).then(function(e){var t,n,r;e.comments&&((t=i.selectAll(".comment").data(e.comments).enter().append("div").attr("class","comment")).append("div").attr("class","comment-avatar").call(svgIcon("#iD-icon-avatar","comment-avatar-icon")),(r=(n=t.append("div").attr("class","comment-main")).append("div").attr("class","comment-metadata")).append("div").attr("class","comment-author").each(function(e){var t=services.osm,n=select(this);t&&e.username&&(n=n.append("a").attr("class","comment-author-link").attr("href",t.userURL(e.username)).attr("tabindex",-1).attr("target","_blank")),n.text(function(e){return e.username})}),r.append("div").attr("class","comment-date").text(function(e){return _t("note.status.commented",{when:function(e){if(!e)return null;var t=new Date(1e3*e);if(isNaN(t.getTime()))return null;return t.toLocaleDateString(_mainLocalizer.localeCode(),{day:"numeric",month:"short",year:"numeric"})}(e.timestamp)})}),n.append("div").attr("class","comment-text").append("p").text(function(e){return e.text}))}).catch(function(e){console.log(e)})}return n.issue=function(e){return arguments.length?(t=e,n):t},n}function uiImproveOsmDetails(s){var l;function r(e){if(e.desc)return e.desc;var t=e.issueKey;return e.replacements=e.replacements||{},e.replacements.default=_t("inspector.unknown"),_t("QA.improveOSM.error_types."+t+".description",e.replacements)}function t(e){var t=e.selectAll(".error-details").data(l?[l]:[],function(e){return e.id+"-"+(e.status||0)});t.exit().remove();var n=t.enter().append("div").attr("class","error-details qa-details-container").append("div").attr("class","qa-details-subsection");n.append("h4").text(function(){return _t("QA.keepRight.detail_description")}),n.append("div").attr("class","qa-details-description-text").html(r);var a=[];n.selectAll(".error_entity_link, .error_object_link").each(function(){var e,t,n=select(this),r=n.classed("error_object_link"),i=r?utilEntityRoot(l.objectType)+l.objectId:this.textContent,o=s.hasEntity(i);a.push(i),n.on("mouseenter",function(){utilHighlightEntities([i],!0,s)}).on("mouseleave",function(){utilHighlightEntities([i],!1,s)}).on("click",function(){event.preventDefault(),utilHighlightEntities([i],!1,s);var e=s.layers().layer("osm");e.enabled()||e.enabled(!0),s.map().centerZoom(l.loc,20),o?s.enter(modeSelect(s,[i])):s.loadEntity(i,function(){s.enter(modeSelect(s,[i]))})}),o&&((t=utilDisplayName(o))||r||(t=(e=_mainPresetIndex.match(o,s.graph()))&&!e.isFallback()&&e.name()),t&&(this.innerText=t))}),s.features().forceVisible(a),s.map().pan([0,0])}return t.issue=function(e){return arguments.length?(l=e,t):l},t}function uiImproveOsmHeader(){var i;function o(e){var t=e.issueKey;return e.replacements=e.replacements||{},e.replacements.default=_t("inspector.unknown"),_t("QA.improveOSM.error_types."+t+".title",e.replacements)}function t(e){var t=e.selectAll(".qa-header").data(i?[i]:[],function(e){return e.id+"-"+(e.status||0)});t.exit().remove();var n=t.enter().append("div").attr("class","qa-header"),r=n.append("div").attr("class","qa-header-icon").classed("new",function(e){return e.id<0}).append("svg").attr("width","20px").attr("height","30px").attr("viewbox","0 0 20 30").attr("class",function(e){return"preset-icon-28 qaItem "+e.service+" itemId-"+e.id+" itemType-"+e.itemType});r.append("polygon").attr("fill","currentColor").attr("class","qaItem-fill").attr("points","16,3 4,3 1,6 1,17 4,20 7,20 10,27 13,20 16,20 19,17.033 19,6"),r.append("use").attr("class","icon-annotation").attr("width","13px").attr("height","13px").attr("transform","translate(3.5, 5)").attr("xlink:href",function(e){var t=e.icon;return t?"#"+t+(/^maki-/.test(t)?"-11":""):""}),n.append("div").attr("class","qa-header-label").text(o)}return t.issue=function(e){return arguments.length?(i=e,t):i},t}function uiImproveOsmEditor(a){var s,i=dispatch("change"),o=uiImproveOsmDetails(a),l=uiImproveOsmComments(),c=uiImproveOsmHeader();function t(e){var t=e.selectAll(".header").data([0]).enter().append("div").attr("class","header fillL");t.append("button").attr("class","close").on("click",function(){return a.enter(modeBrowse(a))}).call(svgIcon("#iD-icon-close")),t.append("h3").text(_t("QA.improveOSM.title"));var n=e.selectAll(".body").data([0]),r=(n=n.enter().append("div").attr("class","body").merge(n)).selectAll(".qa-editor").data([0]);r.enter().append("div").attr("class","modal-section qa-editor").merge(r).call(c.issue(s)).call(o.issue(s)).call(l.issue(s)).call(u)}function u(e){var t=s&&s.id===a.selectedErrorID(),n=s&&(t||s.newComment||s.comment),r=e.selectAll(".qa-save").data(n?[s]:[],function(e){return e.id+"-"+(e.status||0)});r.exit().remove();var i=r.enter().append("div").attr("class","qa-save save-section cf");function o(){var e=select(this).property("value").trim();""===e&&(e=void 0),s=s.update({newComment:e});var t=services.improveOSM;t&&t.replaceItem(s),r.call(p)}i.append("h4").attr("class",".qa-save-header").text(_t("note.newComment")),i.append("textarea").attr("class","new-comment-input").attr("placeholder",_t("QA.keepRight.comment_placeholder")).attr("maxlength",1e3).property("value",function(e){return e.newComment}).call(utilNoAuto).on("input",o).on("blur",o),r=i.merge(r).call(p)}function p(e){var t=s&&s.id===a.selectedErrorID(),n=e.selectAll(".buttons").data(t?[s]:[],function(e){return e.status+e.id});n.exit().remove();var r=n.enter().append("div").attr("class","buttons");r.append("button").attr("class","button comment-button action").text(_t("QA.keepRight.save_comment")),r.append("button").attr("class","button close-button action"),r.append("button").attr("class","button ignore-button action"),(n=n.merge(r)).select(".comment-button").attr("disabled",function(e){return!e.newComment||null}).on("click.comment",function(e){this.blur();var t=services.improveOSM;t&&t.postUpdate(e,function(e,t){return i.call("change",t)})}),n.select(".close-button").text(function(e){var t=e.newComment?"_comment":"";return _t("QA.keepRight.close"+t)}).on("click.close",function(e){this.blur();var t=services.improveOSM;t&&(e.newStatus="SOLVED",t.postUpdate(e,function(e,t){return i.call("change",t)}))}),n.select(".ignore-button").text(function(e){var t=e.newComment?"_comment":"";return _t("QA.keepRight.ignore"+t)}).on("click.ignore",function(e){this.blur();var t=services.improveOSM;t&&(e.newStatus="INVALID",t.postUpdate(e,function(e,t){return i.call("change",t)}))})}return t.error=function(e){return arguments.length?(s=e,t):s},utilRebind(t,i,"on")}function uiKeepRightDetails(s){var l;function r(e){var t=e.itemType,n=e.parentIssueType,r=_t("inspector.unknown"),i=e.replacements||{};i.default=r;var o=_t("QA.keepRight.errorTypes."+t+".description",i);return o===r&&(o=_t("QA.keepRight.errorTypes."+n+".description",i)),o}function t(e){var t=e.selectAll(".error-details").data(l?[l]:[],function(e){return e.id+"-"+(e.status||0)});t.exit().remove();var n=t.enter().append("div").attr("class","error-details qa-details-container").append("div").attr("class","qa-details-subsection");n.append("h4").text(function(){return _t("QA.keepRight.detail_description")}),n.append("div").attr("class","qa-details-description-text").html(r);var a=[];n.selectAll(".error_entity_link, .error_object_link").each(function(){var e,t,n=select(this),r=n.classed("error_object_link"),i=r?utilEntityRoot(l.objectType)+l.objectId:this.textContent,o=s.hasEntity(i);a.push(i),n.on("mouseenter",function(){utilHighlightEntities([i],!0,s)}).on("mouseleave",function(){utilHighlightEntities([i],!1,s)}).on("click",function(){event.preventDefault(),utilHighlightEntities([i],!1,s);var e=s.layers().layer("osm");e.enabled()||e.enabled(!0),s.map().centerZoomEase(l.loc,20),o?s.enter(modeSelect(s,[i])):s.loadEntity(i,function(){s.enter(modeSelect(s,[i]))})}),o&&((t=utilDisplayName(o))||r||(t=(e=_mainPresetIndex.match(o,s.graph()))&&!e.isFallback()&&e.name()),t&&(this.innerText=t))}),s.features().forceVisible(a),s.map().pan([0,0])}return t.issue=function(e){return arguments.length?(l=e,t):l},t}function uiKeepRightHeader(){var r;function i(e){var t=e.itemType,n=e.parentIssueType,r=_t("inspector.unknown"),i=e.replacements||{};i.default=r;var o=_t("QA.keepRight.errorTypes."+t+".title",i);return o===r&&(o=_t("QA.keepRight.errorTypes."+n+".title",i)),o}function t(e){var t=e.selectAll(".qa-header").data(r?[r]:[],function(e){return e.id+"-"+(e.status||0)});t.exit().remove();var n=t.enter().append("div").attr("class","qa-header");n.append("div").attr("class","qa-header-icon").classed("new",function(e){return e.id<0}).append("div").attr("class",function(e){return"preset-icon-28 qaItem "+e.service+" itemId-"+e.id+" itemType-"+e.parentIssueType}).call(svgIcon("#iD-icon-bolt","qaItem-fill")),n.append("div").attr("class","qa-header-label").text(i)}return t.issue=function(e){return arguments.length?(r=e,t):r},t}function uiViewOnKeepRight(){var r;function t(e){var t;services.keepRight&&r instanceof QAItem&&(t=services.keepRight.issueURL(r));var n=e.selectAll(".view-on-keepRight").data(t?[t]:[]);n.exit().remove(),n.enter().append("a").attr("class","view-on-keepRight").attr("target","_blank").attr("rel","noopener").attr("href",function(e){return e}).call(svgIcon("#iD-icon-out-link","inline")).append("span").text(_t("inspector.view_on_keepRight"))}return t.what=function(e){return arguments.length?(r=e,t):r},t}function uiKeepRightEditor(a){var s,i=dispatch("change"),o=uiKeepRightDetails(a),l=uiKeepRightHeader();function t(e){var t=e.selectAll(".header").data([0]).enter().append("div").attr("class","header fillL");t.append("button").attr("class","close").on("click",function(){return a.enter(modeBrowse(a))}).call(svgIcon("#iD-icon-close")),t.append("h3").text(_t("QA.keepRight.title"));var n=e.selectAll(".body").data([0]),r=(n=n.enter().append("div").attr("class","body").merge(n)).selectAll(".qa-editor").data([0]);r.enter().append("div").attr("class","modal-section qa-editor").merge(r).call(l.issue(s)).call(o.issue(s)).call(c);var i=e.selectAll(".footer").data([0]);i.enter().append("div").attr("class","footer").merge(i).call(uiViewOnKeepRight().what(s))}function c(e){var t=s&&s.id===a.selectedErrorID(),n=s&&(t||s.newComment||s.comment),r=e.selectAll(".qa-save").data(n?[s]:[],function(e){return e.id+"-"+(e.status||0)});r.exit().remove();var i=r.enter().append("div").attr("class","qa-save save-section cf");function o(){var e=select(this).property("value").trim();e===s.comment&&(e=void 0),s=s.update({newComment:e});var t=services.keepRight;t&&t.replaceItem(s),r.call(u)}i.append("h4").attr("class",".qa-save-header").text(_t("QA.keepRight.comment")),i.append("textarea").attr("class","new-comment-input").attr("placeholder",_t("QA.keepRight.comment_placeholder")).attr("maxlength",1e3).property("value",function(e){return e.newComment||e.comment}).call(utilNoAuto).on("input",o).on("blur",o),r=i.merge(r).call(u)}function u(e){var t=s&&s.id===a.selectedErrorID(),n=e.selectAll(".buttons").data(t?[s]:[],function(e){return e.status+e.id});n.exit().remove();var r=n.enter().append("div").attr("class","buttons");r.append("button").attr("class","button comment-button action").text(_t("QA.keepRight.save_comment")),r.append("button").attr("class","button close-button action"),r.append("button").attr("class","button ignore-button action"),(n=n.merge(r)).select(".comment-button").attr("disabled",function(e){return!e.newComment||null}).on("click.comment",function(e){this.blur();var t=services.keepRight;t&&t.postUpdate(e,function(e,t){return i.call("change",t)})}),n.select(".close-button").text(function(e){var t=e.newComment?"_comment":"";return _t("QA.keepRight.close"+t)}).on("click.close",function(e){this.blur();var t=services.keepRight;t&&(e.newStatus="ignore_t",t.postUpdate(e,function(e,t){return i.call("change",t)}))}),n.select(".ignore-button").text(function(e){var t=e.newComment?"_comment":"";return _t("QA.keepRight.ignore"+t)}).on("click.ignore",function(e){this.blur();var t=services.keepRight;t&&(e.newStatus="ignore",t.postUpdate(e,function(e,t){return i.call("change",t)}))})}return t.error=function(e){return arguments.length?(s=e,t):s},utilRebind(t,i,"on")}function uiOsmoseDetails(c){var u;function p(e,t){if(!e)return"";var n=services.osmose.getStrings(e.itemType);return t in n?n[t]:""}function t(e){var t=e.selectAll(".error-details").data(u?[u]:[],function(e){return e.id+"-"+(e.status||0)});t.exit().remove();var n,r=t.enter().append("div").attr("class","error-details qa-details-container");p(u,"detail")&&((n=r.append("div").attr("class","qa-details-subsection")).append("h4").text(function(){return _t("QA.keepRight.detail_description")}),n.append("p").attr("class","qa-details-description-text").html(function(e){return p(e,"detail")}).selectAll("a").attr("rel","noopener").attr("target","_blank"));var i,o,a=r.append("div").attr("class","qa-details-subsection"),s=r.append("div").attr("class","qa-details-subsection");p(u,"fix")&&((i=r.append("div").attr("class","qa-details-subsection")).append("h4").text(function(){return _t("QA.osmose.fix_title")}),i.append("p").html(function(e){return p(e,"fix")}).selectAll("a").attr("rel","noopener").attr("target","_blank")),p(u,"trap")&&((o=r.append("div").attr("class","qa-details-subsection")).append("h4").text(function(){return _t("QA.osmose.trap_title")}),o.append("p").html(function(e){return p(e,"trap")}).selectAll("a").attr("rel","noopener").attr("target","_blank"));var l=u;services.osmose.loadIssueDetail(u).then(function(o){o.elems&&0!==o.elems.length&&(c.selectedErrorID()!==l.id&&c.container().selectAll(".qaItem.osmose.hover.itemId-"+l.id).empty()||(o.detail&&(a.append("h4").text(function(){return _t("QA.osmose.detail_title")}),a.append("p").html(function(e){return e.detail}).selectAll("a").attr("rel","noopener").attr("target","_blank")),s.append("h4").text(function(){return _t("QA.osmose.elems_title")}),s.append("ul").selectAll("li").data(o.elems).enter().append("li").append("a").attr("class","error_entity_link").text(function(e){return e}).each(function(){var e,t,n=select(this),r=this.textContent,i=c.hasEntity(r);n.on("mouseenter",function(){utilHighlightEntities([r],!0,c)}).on("mouseleave",function(){utilHighlightEntities([r],!1,c)}).on("click",function(){event.preventDefault(),utilHighlightEntities([r],!1,c);var e=c.layers().layer("osm");e.enabled()||e.enabled(!0),c.map().centerZoom(o.loc,20),i?c.enter(modeSelect(c,[r])):c.loadEntity(r,function(){c.enter(modeSelect(c,[r]))})}),i&&((t=utilDisplayName(i))||(t=(e=_mainPresetIndex.match(i,c.graph()))&&!e.isFallback()&&e.name()),t&&(this.innerText=t))}),c.features().forceVisible(o.elems),c.map().pan([0,0])))}).catch(function(e){console.log(e)})}return t.issue=function(e){return arguments.length?(u=e,t):u},t}function uiOsmoseHeader(){var i;function o(e){var t=_t("inspector.unknown");if(!e)return t;var n=services.osmose.getStrings(e.itemType);return"title"in n?n.title:t}function t(e){var t=e.selectAll(".qa-header").data(i?[i]:[],function(e){return e.id+"-"+(e.status||0)});t.exit().remove();var n=t.enter().append("div").attr("class","qa-header"),r=n.append("div").attr("class","qa-header-icon").classed("new",function(e){return e.id<0}).append("svg").attr("width","20px").attr("height","30px").attr("viewbox","0 0 20 30").attr("class",function(e){return"preset-icon-28 qaItem "+e.service+" itemId-"+e.id+" itemType-"+e.itemType});r.append("polygon").attr("fill",function(e){return services.osmose.getColor(e.item)}).attr("class","qaItem-fill").attr("points","16,3 4,3 1,6 1,17 4,20 7,20 10,27 13,20 16,20 19,17.033 19,6"),r.append("use").attr("class","icon-annotation").attr("width","13px").attr("height","13px").attr("transform","translate(3.5, 5)").attr("xlink:href",function(e){var t=e.icon;return t?"#"+t+(/^maki-/.test(t)?"-11":""):""}),n.append("div").attr("class","qa-header-label").text(o)}return t.issue=function(e){return arguments.length?(i=e,t):i},t}function uiViewOnOsmose(){var r;function t(e){var t;services.osmose&&r instanceof QAItem&&(t=services.osmose.itemURL(r));var n=e.selectAll(".view-on-osmose").data(t?[t]:[]);n.exit().remove(),n.enter().append("a").attr("class","view-on-osmose").attr("target","_blank").attr("rel","noopener").attr("href",function(e){return e}).call(svgIcon("#iD-icon-out-link","inline")).append("span").text(_t("inspector.view_on_osmose"))}return t.what=function(e){return arguments.length?(r=e,t):r},t}function uiOsmoseEditor(o){var a,i=dispatch("change"),s=uiOsmoseDetails(o),l=uiOsmoseHeader();function t(e){var t=e.selectAll(".header").data([0]).enter().append("div").attr("class","header fillL");t.append("button").attr("class","close").on("click",function(){return o.enter(modeBrowse(o))}).call(svgIcon("#iD-icon-close")),t.append("h3").text(_t("QA.osmose.title"));var n=e.selectAll(".body").data([0]),r=(n=n.enter().append("div").attr("class","body").merge(n)).selectAll(".qa-editor").data([0]);r.enter().append("div").attr("class","modal-section qa-editor").merge(r).call(l.issue(a)).call(s.issue(a)).call(c);var i=e.selectAll(".footer").data([0]);i.enter().append("div").attr("class","footer").merge(i).call(uiViewOnOsmose().what(a))}function c(e){var t=a&&a.id===o.selectedErrorID(),n=a&&t;(r=e.selectAll(".qa-save").data(n?[a]:[],function(e){return e.id+"-"+(e.status||0)})).exit().remove();var r=r.enter().append("div").attr("class","qa-save save-section cf").merge(r).call(u)}function u(e){var t=a&&a.id===o.selectedErrorID(),n=e.selectAll(".buttons").data(t?[a]:[],function(e){return e.status+e.id});n.exit().remove();var r=n.enter().append("div").attr("class","buttons");r.append("button").attr("class","button close-button action"),r.append("button").attr("class","button ignore-button action"),(n=n.merge(r)).select(".close-button").text(function(){return _t("QA.keepRight.close")}).on("click.close",function(e){this.blur();var t=services.osmose;t&&(e.newStatus="done",t.postUpdate(e,function(e,t){return i.call("change",t)}))}),n.select(".ignore-button").text(function(){return _t("QA.keepRight.ignore")}).on("click.ignore",function(e){this.blur();var t=services.osmose;t&&(e.newStatus="false",t.postUpdate(e,function(e,t){return i.call("change",t)}))})}return t.error=function(e){return arguments.length?(a=e,t):a},utilRebind(t,i,"on")}function modeSelectError(r,i,o){var n,a={id:"select-error",button:"browse"},s=utilKeybinding("select-error"),t=services[o];switch(o){case"improveOSM":n=uiImproveOsmEditor(r).on("change",function(){r.map().pan([0,0]);var e=c();e&&r.ui().sidebar.show(n.error(e))});break;case"keepRight":n=uiKeepRightEditor(r).on("change",function(){r.map().pan([0,0]);var e=c();e&&r.ui().sidebar.show(n.error(e))});break;case"osmose":n=uiOsmoseEditor(r).on("change",function(){r.map().pan([0,0]);var e=c();e&&r.ui().sidebar.show(n.error(e))})}var l=[behaviorBreathe(),behaviorHover(r),behaviorSelect(r),behaviorLasso(r),modeDragNode(r).behavior,modeDragNote(r).behavior];function c(){if(t){var e=t.getError(i);return e||r.enter(modeBrowse(r)),e}}return a.zoomToSelected=function(){var e;!t||(e=t.getError(i))&&r.map().centerZoomEase(e.loc,20)},a.enter=function(){var e=c();function t(e){var t,n;c()&&((t=r.surface().selectAll(".itemId-"+i+"."+o)).empty()?(n=event&&"zoom"===event.type&&event.sourceEvent,e&&n&&("pointermove"===n.type||"mousemove"===n.type||"touchmove"===n.type)&&r.enter(modeBrowse(r))):(t.classed("selected",!0),r.selectedErrorID(i)))}e&&(l.forEach(r.install),s.on(_t("inspector.zoom_to.key"),a.zoomToSelected).on("⎋",function(){if(r.container().select(".combobox").size())return;r.enter(modeBrowse(r))},!0),select(document).call(s),t(),r.ui().sidebar.show(n.error(e)),r.map().on("drawn.select-error",t))},a.exit=function(){l.forEach(r.uninstall),select(document).call(s.unbind),r.surface().selectAll(".qaItem.selected").classed("selected hover",!1),r.map().on("drawn.select-error",null),r.ui().sidebar.hide(),r.selectedErrorID(null),r.features().forceVisible([])},a}function behaviorSelect(f){var h=4,t=null,g=!1,m={},i=null,y=null,v=null,n="PointerEvent"in window?"pointer":"mouse";function r(){if(32===event.keyCode){var e=document.activeElement;if(e&&new Set(["INPUT","TEXTAREA"]).has(e.nodeName))return}93!==event.keyCode&&32!==event.keyCode||event.preventDefault(),event.repeat||(_(),event.shiftKey&&f.surface().classed("behavior-multiselect",!0),32===event.keyCode&&!m.spacebar&&t&&(_(),i=window.setTimeout(s,500,"spacebar","spacebar"),m.spacebar={firstEvent:t,lastEvent:t}))}function o(){if(_(),event.shiftKey||f.surface().classed("behavior-multiselect",!1),93===event.keyCode)event.preventDefault(),y="menukey",p();else if(32===event.keyCode){var e=m.spacebar;if(e){if(delete m.spacebar,e.done)return;event.preventDefault(),y="spacebar",d(e.firstEvent,e.lastEvent,"spacebar")}}}function a(){var e=(event.pointerId||"mouse").toString();_(),event.buttons&&1!==event.buttons||(f.ui().closeEditMenu(),i=window.setTimeout(s,500,e,"longdown-"+(event.pointerType||"mouse")),m[e]={firstEvent:event,lastEvent:event})}function s(e,t){var n=m[e];if(n){for(var r in m)m[r].done=!0;y=t,g=!(i=null),d(n.firstEvent,n.lastEvent,e)}}function l(){var e=(event.pointerId||"mouse").toString();m[e]&&(m[e].lastEvent=event),event.pointerType&&"mouse"!==event.pointerType||(t=event,m.spacebar&&(m.spacebar.lastEvent=event))}function c(){var e=(event.pointerId||"mouse").toString(),t=m[e];t&&(delete m[e],v===e&&(v=null),t.done||d(t.firstEvent,event,e))}function u(){var e=(event.pointerId||"mouse").toString();m[e]&&(delete m[e],v===e&&(v=null))}function p(){var e=event;if(e.preventDefault(),+e.clientX||+e.clientY)t=event,y="rightclick";else{if(!t)return;e.sourceEvent=t}g=!0,d(event,event)}function d(e,t,n){_();var r,i,o,a,s,l=f.container().select(".main-map").node(),c=utilFastMouse(l),u=c(e),p=c(t),d=geoVecLength(u,p);!(h<d)&&(r=t,i=l.getBoundingClientRect(),r.clientX>=i.left&&r.clientX<=i.right&&r.clientY>=i.top&&r.clientY<=i.bottom)?(o=t.target.__data__,v||(s=function(e){var t=f.mode(),n="select"===t.id?t.selectedIDs():[];for(var r in m)if("spacebar"!==r&&r!==e){var i=m[r],o=c(i.firstEvent),a=c(i.lastEvent);if(!(geoVecLength(o,a)>h)){var s=i.firstEvent.target.__data__,l=s&&s.properties&&s.properties.entity||s;if(f.graph().hasEntity(l.id))return{pointerId:r,entityId:l.id,selected:-1!==n.indexOf(l.id)}}}return null}(n))&&(v=s.pointerId,a=!s.selected&&s.entityId,m[s.pointerId].done=!0),function(t,e,n,r){var i,o=f.mode(),a=g,s=y,l=t&&t.properties&&t.properties.entity;l&&(t=l);t&&"midpoint"===t.type&&(t=t.parents[0]);{var c;t instanceof osmEntity?(c=f.selectedIDs(),f.selectedNoteID(null),f.selectedErrorID(null),e?-1!==c.indexOf(t.id)?a||(c=c.filter(function(e){return e!==t.id}),i=c.length?o.selectedIDs(c):modeBrowse(f).selectBehavior(w),f.enter(i)):(c=c.concat([t.id]),i=o.selectedIDs(c),f.enter(i)):(!a||c.length<=1||-1===c.indexOf(t.id))&&(r===t.id&&(r=null),c=(r?[r]:[]).concat([t.id]),i="select"===o.id?o.selectedIDs(c):modeSelect(f,c).selectBehavior(w),f.enter(i))):t&&t.__featurehash__&&!e?f.selectedNoteID(null).enter(modeSelectData(f,t)):t instanceof osmNote&&!e?f.selectedNoteID(t.id).enter(modeSelectNote(f,t.id)):t instanceof QAItem&!e?f.selectedErrorID(t.id).enter(modeSelectError(f,t.id,t.service)):(f.selectedNoteID(null),f.selectedErrorID(null),e||"browse"===o.id||f.enter(modeBrowse(f)))}f.ui().closeEditMenu(),a&&f.ui().showEditMenu(n,s);b()}(o,"select"===f.mode().id&&(event&&event.shiftKey||f.surface().select(".lasso").node()||v&&!a),p,a)):b()}function _(){i&&window.clearTimeout(i),i=null}function b(){_(),g=!1,y=null}function w(e){b(),t=f.map().lastPointerEvent(),select(window).on("keydown.select",r).on("keyup.select",o).on(n+"move.select",l,!0).on(n+"up.select",c,!0).on("pointercancel.select",u,!0).on("contextmenu.select-window",function(){0==+event.clientX&&0==+event.clientY&&event.preventDefault()}),e.on(n+"down.select",a).on("contextmenu.select",p),event&&event.shiftKey&&f.surface().classed("behavior-multiselect",!0)}return w.off=function(e){_(),select(window).on("keydown.select",null).on("keyup.select",null).on("contextmenu.select-window",null).on(n+"move.select",null,!0).on(n+"up.select",null,!0).on("pointercancel.select",null,!0),e.on(n+"down.select",null).on("contextmenu.select",null),f.surface().classed("behavior-multiselect",!1)},w}function behaviorDrawWay(a,i,r,t){var n,o,s,l,c,u,p=dispatch("rejectedSelfIntersection"),d=behaviorDraw(a),f=!1,h=!1;function g(e){u=osmNode({loc:e}),a.pauseChangeDispatch(),a.replace(function(e){var t=e.entity(i);return e.replace(u).replace(t.addNode(u.id,n))},c),a.resumeChangeDispatch(),x()}function m(){a.pauseChangeDispatch(),a.replace(function(e){var t=e.entity(i);return e.replace(t.removeNode(u.id)).remove(u)},c),u=void 0,a.resumeChangeDispatch()}function y(){event.keyCode===utilKeybinding.modifierCodes.alt&&(a.surface().classed("nope")&&a.surface().classed("nope-suppressed",!0),a.surface().classed("nope",!1).classed("nope-disabled",!0))}function v(){event.keyCode===utilKeybinding.modifierCodes.alt&&(a.surface().classed("nope-suppressed")&&a.surface().classed("nope",!0),a.surface().classed("nope-suppressed",!1).classed("nope-disabled",!1))}function _(e){var t=a.map().mouseCoordinates();u||g(t),a.surface().classed("nope-disabled",event.altKey);var n,r,i=e&&e.properties&&e.properties.entity&&("vertex"===(n=e.properties.entity).geometry(a.graph())||_mainPresetIndex.allowsVertex(n,a.graph()))&&e.properties.entity.loc,o=e&&e.properties&&e.properties.nodes;i?t=i:!o||(r=geoChooseEdge(o,a.map().mouse(),a.projection,u.id))&&(t=r.loc),a.replace(actionMoveNode(u.id,t),c),u=a.entity(u.id),b(!0)}function b(e){var t=a.surface().classed("nope-disabled"),n=function(e){var t=u,n=a.graph().entity(i),r=a.graph().childNodes(n).slice();if(e)n.isClosed()&&r.pop();else{if(!n.isClosed())return!1;if(r.length<3)return!1;u&&r.splice(-2,1),t=r[r.length-2]}return t&&geoHasSelfIntersections(r,t.id)}(e);t?a.surface().classed("nope",!1).classed("nope-suppressed",n):a.surface().classed("nope",n).classed("nope-suppressed",!1)}function w(){var e;h=!0,a.pauseChangeDispatch(),e=a.graph()===t?modeSelect(a,[i]):(a.history().on("undone.draw",null),a.undo(),a.graph()===t?modeSelect(a,[i]):r),a.perform(actionNoop()),a.pop(1),a.resumeChangeDispatch(),a.enter(e)}function x(){u&&a.surface().selectAll("."+u.id).classed("active",!0)}function S(){for(;a.graph()!==t;)a.pop()}var E=function(e){u=void 0,h=!1,o=a.entity(i),l="number"==typeof n?o.nodes[n]:o.isClosed()?o.nodes[o.nodes.length-2]:o.nodes[o.nodes.length-1],s=o.geometry(a.graph()),c=_t((o.isDegenerate()?"operations.start.annotation.":"operations.continue.annotation.")+s),f=!1,a.pauseChangeDispatch(),a.perform(actionNoop(),c),a.resumeChangeDispatch(),d.hover().initialNodeID(l),d.on("move",function(){f=!0,_.apply(this,arguments)}).on("down",function(){_.apply(this,arguments)}).on("downcancel",function(){u&&m()}).on("click",E.add).on("clickWay",E.addWay).on("clickNode",E.addNode).on("undo",a.undo).on("cancel",E.cancel).on("finish",E.finish),select(window).on("keydown.drawWay",y).on("keyup.drawWay",v),a.map().dblclickZoomEnable(!1).on("drawn.draw",x),x(),e.call(d),a.history().on("undone.draw",w)};function C(e,t,n){if(u?(a.replace(actionMoveNode(u.id,t),c),u=a.entity(u.id)):g(t),b(!0),e&&e.properties&&e.properties.nope||a.surface().classed("nope"))return f||m(),void p.call("rejectedSelfIntersection",this);a.pauseChangeDispatch(),n(),h=!0,a.resumeChangeDispatch(),a.enter(r)}return E.off=function(e){h||(a.pauseChangeDispatch(),S(),a.resumeChangeDispatch()),n=u=void 0,a.map().on("drawn.draw",null),e.call(d.off).selectAll(".active").classed("active",!1),e.classed("nope",!1).classed("nope-suppressed",!1).classed("nope-disabled",!1),select(window).on("keydown.drawWay",null).on("keyup.drawWay",null),a.history().on("undone.draw",null)},E.add=function(e,t){C(t,e,function(){})},E.addWay=function(e,t,n){C(n,e,function(){a.replace(actionAddMidpoint({loc:e,edge:t},u),c)})},E.addNode=function(t,e){t.id===l||o.isClosed()&&t.id===o.first()?E.finish():C(e,t.loc,function(){a.replace(function(e){return(e=e.replace(e.entity(i).removeNode(u.id)).remove(u)).replace(e.entity(i).addNode(t.id,n))},c)})},E.finish=function(){var e,t;b(!1),a.surface().classed("nope")?p.call("rejectedSelfIntersection",this):(a.pauseChangeDispatch(),a.pop(1),h=!0,a.resumeChangeDispatch(),(e=a.hasEntity(i))&&!e.isDegenerate()?(window.setTimeout(function(){a.map().dblclickZoomEnable(!0)},1e3),t=!r.isContinuing,a.enter(modeSelect(a,[i]).newFeature(t))):E.cancel())},E.cancel=function(){a.pauseChangeDispatch(),S(),a.resumeChangeDispatch(),window.setTimeout(function(){a.map().dblclickZoomEnable(!0)},1e3),a.surface().classed("nope",!1).classed("nope-disabled",!1).classed("nope-suppressed",!1),a.enter(modeBrowse(a))},E.nodeIndex=function(e){return arguments.length?(n=e,E):n},E.activeID=function(){return arguments.length?E:u&&u.id},utilRebind(E,p,"on")}function modeDrawLine(e,t,n,r,i,o){var a={button:r,id:"draw-line"},s=behaviorDrawWay(e,t,a,n).on("rejectedSelfIntersection.modeDrawLine",function(){e.ui().flash.text(_t("self_intersection.error.lines"))()});return a.wayID=t,a.isContinuing=o,a.enter=function(){s.nodeIndex("prefix"===i?0:void 0),e.install(s)},a.exit=function(){e.uninstall(s)},a.selectedIDs=function(){return[t]},a.activeID=function(){return s&&s.activeID()||[]},a}function operationContinue(t,e){var n=t.graph(),r=e.map(function(e){return n.entity(e)}),i=Object.assign({line:[],vertex:[]},utilArrayGroupBy(r,function(e){return e.geometry(n)})),o=i.vertex[0];function a(){return n.parentWays(o).filter(function(e){return"line"===e.geometry(n)&&!e.isClosed()&&e.affix(o.id)&&(0===i.line.length||i.line[0]===e)})}function s(){var e=a()[0];t.enter(modeDrawLine(t,e.id,t.graph(),"line",e.affix(o.id),!0))}return s.available=function(){return 1===i.vertex.length&&i.line.length<=1&&!t.features().hasHiddenConnections(o,t.graph())},s.disabled=function(){var e=a();return 0===e.length?"not_eligible":1<e.length&&"multiple"},s.tooltip=function(){var e=s.disabled();return _t(e?"operations.continue."+e:"operations.continue.description")},s.annotation=function(){return _t("operations.continue.annotation.line")},s.id="continue",s.keys=[_t("operations.continue.key")],s.title=_t("operations.continue.title"),s.behavior=behaviorOperation(t).which(s),s}function operationCopy(c,e){var t=1===e.length?"single":"multiple";function u(){return e.filter(function(e){var t=c.graph().hasEntity(e);return t.hasInterestingTags()||"vertex"!==t.geometry(c.graph())})}function n(){window.getSelection().toString()||event.preventDefault();for(var e,t,n,r,i=c.graph(),o=(e=u(),t=i,n=e.map(function(e){return t.entity(e)}),Object.assign({relation:[],way:[],node:[]},utilArrayGroupBy(n,"type"))),a=[],s={},l=0;l<o.relation.length;l++)!s[(r=o.relation[l]).id]&&r.isComplete(i)&&(a.push(r.id),s=d(r.id,i,s));for(l=0;l<o.way.length;l++)s[(r=o.way[l]).id]||(a.push(r.id),s=d(r.id,i,s));for(l=0;l<o.node.length;l++)s[(r=o.node[l]).id]||a.push(r.id);c.copyIDs(a),!p||1===a.length&&"node"===i.entity(a[0]).type?c.copyLonLat(null):c.copyLonLat(c.projection.invert(p))}var p;function d(e,t,n){var r,i=t.entity(e);n=n||{},r="relation"===i.type?i.members.map(function(e){return e.id}):"way"===i.type?i.nodes:[];for(var o=0;o<r.length;o++)n[r[o]]||(n[r[o]]=!0,n=d(r[o],t,n));return n}return n.available=function(){return 0<u().length},n.disabled=function(){return utilTotalExtent(u(),c.graph()).percentContainedIn(c.map().extent())<.8&&"too_large"},n.tooltip=function(){var e=n.disabled();return _t(e?"operations.copy."+e+"."+t:"operations.copy.description."+t)},n.annotation=function(){return 1===e.length?_t("operations.copy.annotation.single"):_t("operations.copy.annotation.multiple",{n:e.length.toString()})},n.point=function(e){return p=e,n},n.id="copy",n.keys=[uiCmd("⌘C")],n.title=_t("operations.copy.title"),n.behavior=behaviorOperation(c).which(n),n}function operationDisconnect(i,n){var r=[],o=[],a=[],s=[];n.forEach(function(e){var t=i.entity(e);"way"===t.type?o.push(e):"vertex"===t.geometry(i.graph())?r.push(e):a.push(e)});var l,e,c,u,p,d,t="",f="features";0<r.length?(u=utilTotalExtent(r,i.graph()),r.forEach(function(t){var e,n=actionDisconnect(t);0<o.length&&(e=o.filter(function(e){return-1!==i.entity(e).nodes.indexOf(t)}),n.limitWays(e)),s.push(n)}),t+=1===s.length?"single_point.":"multiple_points.",1===o.length?t+="single_way."+i.graph().geometry(o[0]):t+=0===o.length?"no_ways":"multiple_ways"):0<o.length&&(l=o.map(function(e){return i.entity(e)}),c=(e=utilGetAllNodes(o,i.graph())).map(function(e){return e.loc}),u=utilTotalExtent(l,i.graph()),p=[],d=[],e.forEach(function(e){var t=actionDisconnect(e.id).limitWays(o);if("not_connected"!==t.disabled(i.graph())){var n=0;for(var r in l){if(-1!==l[r].nodes.indexOf(e.id)&&(n+=1),1<n)break}1<n?p.push(t):d.push(t)}}),t+="no_points.",t+=1===o.length?"single_way.":"multiple_ways.",p.length?(s=p,t+="conjoined",f="from_each_other"):(s=d,1===o.length?t+=i.graph().geometry(o[0]):t+="separate"));var h=function(){i.perform(function(e){return s.reduce(function(e,t){return t(e)},e)},h.annotation()),i.validator().validate()};return h.available=function(){return 0!==s.length&&(0===a.length&&!(0!==r.length&&0!==o.length&&!o.every(function(t){return r.some(function(e){return-1!==i.entity(t).nodes.indexOf(e)})})))},h.disabled=function(){var e;for(var t in s)if(e=s[t].disabled(i.graph()))return e;return u&&u.percentContainedIn(i.map().extent())<.8?"too_large."+(1===(r.length?r:o).length?"single":"multiple"):c&&function(){if(i.inIntro())return!1;var t=i.connection();if(t){var e=c.filter(function(e){return!t.isDataLoaded(e)});if(e.length)return e.forEach(function(e){i.loadTileAtLoc(e)}),!0}return!1}()?"not_downloaded":!!n.some(i.hasHiddenConnections)&&"connected_to_hidden"},h.tooltip=function(){var e=h.disabled();return _t(e?"operations.disconnect."+e:"operations.disconnect.description."+t)},h.annotation=function(){return _t("operations.disconnect.annotation."+f)},h.id="disconnect",h.keys=[_t("operations.disconnect.key")],h.title=_t("operations.disconnect.title"),h.behavior=behaviorOperation(i).which(h),h}function operationDowngrade(i,a){var n,r=0;!function(){for(var e in a){var t=s(a[e]);t&&(r+=1,n=n&&t!==n?"building_address":t)}}();var t=1===r?"single":"multiple";function s(e){var t=i.graph(),n=t.entity(e),r=_mainPresetIndex.match(n,t);return!r||r.isFallback()?null:"node"===n.type&&"address"!==r.id&&Object.keys(n.tags).some(function(e){return e.match(/^addr:.{1,}/)})?"address":"area"===n.geometry(t)&&n.tags.building&&!r.tags.building?"building":null}var l=["architect","building","height","layer","source","type","wheelchair"],c=["source"],o=function(){i.perform(function(e){for(var t in a){var n=a[t],r=s(n);if(r){var i=Object.assign({},e.entity(n).tags);for(var o in i)"address"===r&&-1!==c.indexOf(o)||"building"===r&&(-1!==l.indexOf(o)||o.match(/^building:.{1,}/)||o.match(/^roof:.{1,}/))||o.match(/^addr:.{1,}/)||delete i[o];e=actionChangeTags(n,i)(e)}}return e},o.annotation()),i.validator().validate(),i.enter(modeSelect(i,a))};return o.available=function(){return n},o.disabled=function(){return!!a.some(function(e){var t=i.entity(e);return t.tags.wikidata&&0<t.tags.wikidata.trim().length})&&"has_wikidata_tag"},o.tooltip=function(){var e=o.disabled();return _t(e?"operations.downgrade."+e+"."+t:"operations.downgrade.description."+n)},o.annotation=function(){var e="building_address"===n?"multiple":n+"."+t;return _t("operations.downgrade.annotation."+e,{n:r})},o.id="downgrade",o.keys=[uiCmd("⌘⌫"),uiCmd("⌘⌦"),uiCmd("⌦")],o.title=_t("operations.downgrade.title"),o.behavior=behaviorOperation(i).which(o),o}function operationExtract(r,e){var i,t=1===e.length?"single":"multiple",n=utilArrayUniq(e.map(function(e){return r.graph().hasEntity(e)&&r.graph().geometry(e)}).filter(Boolean)),o=1===n.length?n[0]:"feature",a=e.map(function(e){var t=r.graph(),n=t.hasEntity(e);if(n&&n.hasInterestingTags()&&("node"!==n.type||0!==t.parentWays(n).length)){if("node"!==n.type)if(-1===_mainPresetIndex.match(n,t).geometry.indexOf("point"))return;return i=i?i.extend(n.extent(t)):n.extent(t),actionExtract(e)}}).filter(Boolean),s=function(){r.perform(function(t){return a.forEach(function(e){t=e(t)}),t},s.annotation());var e=a.map(function(e){return e.getExtractedNodeID()});r.enter(modeSelect(r,e))};return s.available=function(){return a.length&&e.length===a.length},s.disabled=function(){return i&&i.percentContainedIn(r.map().extent())<.8?"too_large":!!e.some(function(e){return"vertex"===r.graph().geometry(e)&&r.hasHiddenConnections(e)})&&"connected_to_hidden"},s.tooltip=function(){var e=s.disabled();return _t(e?"operations.extract."+e+"."+t:"operations.extract.description."+o+"."+t)},s.annotation=function(){return _t("operations.extract.annotation."+t,{n:e.length})},s.id="extract",s.keys=[_t("operations.extract.key")],s.title=_t("operations.extract.title"),s.behavior=behaviorOperation(r).which(s),s}function operationMerge(i,o){var n=function(){var e=actionJoin(o);if(!e.disabled(i.graph()))return e;var t=actionMerge(o);if(!t.disabled(i.graph()))return t;var n=actionMergePolygon(o);if(!n.disabled(i.graph()))return n;var r=actionMergeNodes(o);return r.disabled(i.graph())?"not_eligible"===e.disabled(i.graph())?"not_eligible"===t.disabled(i.graph())?"not_eligible"===n.disabled(i.graph())?r:n:t:e:r}();var r=function(){var e,t;r.disabled()||(i.perform(n,r.annotation()),i.validator().validate(),1<(e=o.filter(i.hasEntity)).length&&((t=e.filter(function(e){return i.entity(e).hasInterestingTags()})).length&&(e=t)),i.enter(modeSelect(i,e)))};return r.available=function(){return 2<=o.length},r.disabled=function(){var e=n.disabled(i.graph());if(e)return e;var t=i.connection();return!!(t&&n.resultingWayNodesLength&&n.resultingWayNodesLength(i.graph())>t.maxWayNodes())&&"too_many_vertices"},r.tooltip=function(){var e=r.disabled();return e?"restriction"===e?_t("operations.merge.restriction",{relation:_mainPresetIndex.item("type/restriction").name()}):_t("operations.merge."+e):_t("operations.merge.description")},r.annotation=function(){return _t("operations.merge.annotation",{n:o.length})},r.id="merge",r.keys=[_t("operations.merge.key")],r.title=_t("operations.merge.title"),r.behavior=behaviorOperation(i).which(r),r}function operationPaste(f){var h,g=function(){if(h){var e=f.copyIDs();if(e.length){var t=f.projection,n=geoExtent(),r=f.copyGraph(),i=[],o=actionCopyEntities(e,r);f.perform(o);var a=o.copies(),s=new Set;for(var l in Object.values(a).forEach(function(e){s.add(e.id)}),a){var c=r.entity(l),u=a[l];n._extend(c.extent(r)),f.graph().parentWays(u).some(function(e){return s.has(e.id)})||i.push(u.id)}var p=f.copyLonLat()&&t(f.copyLonLat())||t(n.center()),d=geoVecSubtract(h,p);f.replace(actionMove(i,d,t),g.annotation()),f.enter(modeSelect(f,i))}}};return g.point=function(e){return h=e,g},g.available=function(){return"browse"===f.mode().id},g.disabled=function(){return!f.copyIDs().length},g.tooltip=function(){var e=f.copyGraph(),t=f.copyIDs();return t.length?1===t.length?_t("operations.paste.description.single",{feature:utilDisplayLabel(e.entity(t[0]),e)}):_t("operations.paste.description.multiple",{n:t.length.toString()}):_t("operations.paste.nothing_copied")},g.annotation=function(){var e=f.copyIDs();return 1===e.length?_t("operations.paste.annotation.single"):_t("operations.paste.annotation.multiple",{n:e.length.toString()})},g.id="paste",g.keys=[uiCmd("⌘V")],g.title=_t("operations.paste.title"),g}function operationReverse(o,e){var t=function(){o.perform(function(t){return r().forEach(function(e){t=e(t)}),t},t.annotation()),o.validator().validate()};function r(i){return e.map(function(e){var t=o.hasEntity(e);if(t&&("toolbar"!==i||"way"!==t.type||t.isOneWay()||t.isSided())){var n=t.geometry(o.graph());if("node"===t.type||"line"===n){var r=actionReverse(e);if(!r.disabled(o.graph()))return r}}}).filter(Boolean)}function n(){var e=r(),t=e.filter(function(e){var t=o.hasEntity(e.entityID());return t&&"node"===t.type}).length,n=0===t?"line":t===e.length?"point":"features";return"features"!==n&&1<e.length&&(n+="s"),n}return t.available=function(e){return 0<r(e).length},t.disabled=function(){return!1},t.tooltip=function(){return _t("operations.reverse.description."+n())},t.annotation=function(){return _t("operations.reverse.annotation."+n())},t.id="reverse",t.keys=[_t("operations.reverse.key")],t.title=_t("operations.reverse.title"),t.behavior=behaviorOperation(o).which(t),t}function operationSplit(t,n){var e,r=n.filter(function(e){return"vertex"===t.graph().geometry(e)}),i=r[0],o=actionSplit(i),a=[];1===r.length&&(i&&1<n.length&&(e=n.filter(function(e){return e!==i}),o.limitWays(e)),a=o.ways(t.graph()));var s=function(){var e=t.perform(o,s.annotation());t.enter(modeSelect(t,e.extantIDs()))};return s.available=function(){return 1===r.length},s.disabled=function(){var e=o.disabled(t.graph());return e||!!n.some(t.hasHiddenConnections)&&"connected_to_hidden"},s.tooltip=function(){var e=s.disabled();return e?_t("operations.split."+e):1===a.length?_t("operations.split.description."+t.graph().geometry(a[0].id)):_t("operations.split.description.multiple")},s.annotation=function(){return 1===a.length?_t("operations.split.annotation."+t.graph().geometry(a[0].id)):_t("operations.split.annotation.multiple",{n:a.length})},s.id="split",s.keys=[_t("operations.split.key")],s.title=_t("operations.split.title"),s.behavior=behaviorOperation(t).which(s),s}function operationStraighten(o,a){var s,l=a.filter(function(e){return"w"===e.charAt(0)}),c=a.filter(function(e){return"n"===e.charAt(0)}),t=1===(l.length?l:c).length?"single":"multiple",n=utilGetAllNodes(a,o.graph()).map(function(e){return e.loc}),u=utilTotalExtent(a,o.graph()),r=function(){{if(0===l.length&&2<c.length)return s="points",actionStraightenNodes(c,o.projection);if(0<l.length&&(0===c.length||2===c.length)){for(var t=[],n=[],e=0;e<a.length;e++){var r=o.entity(a[e]);if("node"!==r.type){if("way"!==r.type||r.isClosed())return null;t.push(r.first()),n.push(r.last())}}if(t=t.filter(function(e){return t.indexOf(e)===t.lastIndexOf(e)}),n=n.filter(function(e){return n.indexOf(e)===n.lastIndexOf(e)}),utilArrayDifference(t,n).length+utilArrayDifference(n,t).length!==2)return null;var i=utilGetAllNodes(l,o.graph()).map(function(e){return e.id});return i.length<=2?null:2!==c.length||-1!==i.indexOf(c[0])&&-1!==i.indexOf(c[1])?(c.length&&(u=utilTotalExtent(c,o.graph())),s=1===l.length?"line":"lines",actionStraightenWay(a,o.projection)):null}}return null}();function i(){r&&(o.perform(r,i.annotation()),window.setTimeout(function(){o.validator().validate()},300))}return i.available=function(){return Boolean(r)},i.disabled=function(){var e=r.disabled(o.graph());return e||(u.percentContainedIn(o.map().extent())<.8?"too_large":function(){if(o.inIntro())return!1;var t=o.connection();if(t){var e=n.filter(function(e){return!t.isDataLoaded(e)});if(e.length)return e.forEach(function(e){o.loadTileAtLoc(e)}),!0}return!1}()?"not_downloaded":!!a.some(o.hasHiddenConnections)&&"connected_to_hidden")},i.tooltip=function(){var e=i.disabled();return _t(e?"operations.straighten."+e+"."+t:"operations.straighten.description."+s)},i.annotation=function(){return _t("operations.straighten.annotation."+s)},i.id="straighten",i.keys=[_t("operations.straighten.key")],i.title=_t("operations.straighten.title"),i.behavior=behaviorOperation(o).which(i),i}uiCombobox.off=function(e,t){e.on("focus.combo-input",null).on("blur.combo-input",null).on("keydown.combo-input",null).on("keyup.combo-input",null).on("input.combo-input",null).on("mousedown.combo-input",null).on("mouseup.combo-input",null),t.container().on("scroll.combo-scroll",null)};var Operations=Object.freeze({__proto__:null,operationCircularize:operationCircularize,operationContinue:operationContinue,operationCopy:operationCopy,operationDelete:operationDelete,operationDisconnect:operationDisconnect,operationDowngrade:operationDowngrade,operationExtract:operationExtract,operationMerge:operationMerge,operationMove:operationMove,operationOrthogonalize:operationOrthogonalize,operationPaste:operationPaste,operationReflectShort:operationReflectShort,operationReflectLong:operationReflectLong,operationReverse:operationReverse,operationRotate:operationRotate,operationSplit:operationSplit,operationStraighten:operationStraighten}),_relatedParent;function modeSelect(s,o){var a,l={id:"select",button:"browse"},c=utilKeybinding("select"),u=behaviorBreathe(),p=modeDragNode(s),d=[],r=[],f=!1,h=!1;function g(){if(o&&1===o.length)return s.hasEntity(o[0])}function m(){var e=[];return Array.isArray(o)&&(e=o.filter(function(e){return s.hasEntity(e)})),e.length?1<o.length&&1===e.length||1===o.length&&1<e.length?(s.enter(modeSelect(s,e)),!1):(o=e,!0):(s.enter(modeBrowse(s)),!1)}function y(){for(var e=s.graph(),t=[],n=0;n<o.length;n++){var r=s.hasEntity(o[n]);if(!r||"vertex"!==r.geometry(e))return[];var i=e.parentWays(r).map(function(e){return e.id});if(t.length){if(!(t=utilArrayIntersection(t,i)).length)return[]}else t=i}return t}function v(){var e=y();return e&&0!==e.length?1===e.length?_relatedParent=e[0]:-1!==e.indexOf(_relatedParent)?_relatedParent:e[0]:_relatedParent=null}function _(){r.forEach(function(e){e.behavior&&s.uninstall(e.behavior)}),r=Object.values(Operations).map(function(e){return e(s,o)}).filter(function(e){return e.available()&&"delete"!==e.id&&"downgrade"!==e.id&&"copy"!==e.id});var e=operationCopy(s,o);e.available()&&r.push(e);var t=operationDowngrade(s,o),n=!s.inIntro()&&t.available()?t:operationDelete(s,o);r.push(n),r.forEach(function(e){e.behavior&&s.install(e.behavior)}),s.ui().closeEditMenu()}return l.selectedIDs=function(e){return arguments.length?(o=e,l):o},l.zoomToSelected=function(){s.map().zoomToEase(o.map(function(e){return s.hasEntity(e)}).filter(Boolean))},l.newFeature=function(e){return arguments.length?(f=e,l):f},l.selectBehavior=function(e){return arguments.length?(a=e,l):a},l.follow=function(e){return arguments.length?(h=e,l):h},l.operations=function(){return r},l.enter=function(){var n,r,e;function t(t){return function(){var e;s.map().withinEditableZoom()&&((e=operationMove(s,o)).disabled()?s.ui().flash.duration(4e3).iconName("#iD-operation-"+e.id).iconClass("operation disabled").text(e.tooltip)():s.perform(actionMove(o,t,s.projection),e.annotation()))}}function i(){var e;m()&&((e=s.surface()).selectAll(".selected-member").classed("selected-member",!1),e.selectAll(".selected").classed("selected",!1),e.selectAll(".related").classed("related",!1),v(),_relatedParent&&e.selectAll(utilEntitySelector([_relatedParent])).classed("related",!0),s.map().withinEditableZoom()&&(e.selectAll(utilDeepMemberSelector(o,s.graph(),!0)).classed("selected-member",!0),e.selectAll(utilEntityOrDeepMemberSelector(o,s.graph())).classed("selected",!0)))}m()&&(s.features().forceVisible(o),p.restoreSelectedIDs(o),_(),d.length||(a=a||behaviorSelect(s),d=[behaviorPaste(s),u,behaviorHover(s).on("hover",s.ui().sidebar.hoverModeSelect),a,behaviorLasso(s),p.behavior,modeDragNote(s).behavior]),d.forEach(s.install),c.on(_t("inspector.zoom_to.key"),l.zoomToSelected).on(["[","pgup"],function(){event.preventDefault();var e=v();if(!e)return;var t=s.entity(e),n=t.nodes.length,r=t.nodes.indexOf(o[0]),i=-1;0<r?i=r-1:t.isClosed()&&(i=n-2);-1!==i&&s.enter(modeSelect(s,[t.nodes[i]]).follow(!0))}).on(["]","pgdown"],function(){event.preventDefault();var e=v();if(!e)return;var t=s.entity(e),n=t.nodes.length,r=t.nodes.indexOf(o[0]),i=-1;r<n-1?i=r+1:t.isClosed()&&(i=0);-1!==i&&s.enter(modeSelect(s,[t.nodes[i]]).follow(!0))}).on(["{",uiCmd("⌘["),"home"],function(){event.preventDefault();var e,t=g(),n=v();t&&"way"===t.type?e=t:n&&(e=s.entity(n));e&&s.enter(modeSelect(s,[e.first()]).follow(!0))}).on(["}",uiCmd("⌘]"),"end"],function(){event.preventDefault();var e,t=g(),n=v();t&&"way"===t.type?e=t:n&&(e=s.entity(n));e&&s.enter(modeSelect(s,[e.last()]).follow(!0))}).on(uiCmd("⇧←"),t([-10,0])).on(uiCmd("⇧↑"),t([0,-10])).on(uiCmd("⇧→"),t([10,0])).on(uiCmd("⇧↓"),t([0,10])).on(uiCmd("⇧⌘←"),t([-100,0])).on(uiCmd("⇧⌘↑"),t([0,-100])).on(uiCmd("⇧⌘→"),t([100,0])).on(uiCmd("⇧⌘↓"),t([0,100])).on(["\\","pause"],function(){event.preventDefault();var e=y();if(!e||e.length<2)return;var t=e.indexOf(_relatedParent);_relatedParent=t<0||t>e.length-2?e[0]:e[t+1];var n=s.surface();n.selectAll(".related").classed("related",!1),_relatedParent&&n.selectAll(utilEntitySelector([_relatedParent])).classed("related",!0)}).on("⎋",function(){if(s.container().select(".combobox").size())return;s.enter(modeBrowse(s))},!0),select(document).call(c),s.ui().sidebar.select(o,f),s.history().on("change.select",function(){_(),i()}).on("undone.select",m).on("redone.select",m),s.map().on("drawn.select",i).on("crossEditableZoom.select",function(){i(),u.restartIfNeeded(s.surface())}),s.map().doubleUpHandler().on("doubleUp.modeSelect",function(e){if(!s.map().withinEditableZoom())return;var t=select(event.target),n=t.datum(),r=n&&n.properties&&n.properties.entity;if(!r)return;{var i,o,a;r instanceof osmWay&&t.classed("target")?(i=geoChooseEdge(s.graph().childNodes(r),e,s.projection),o=r.nodes[i.index-1],a=r.nodes[i.index],s.perform(actionAddMidpoint({loc:i.loc,edge:[o,a]},osmNode()),_t("operations.add.annotation.vertex"))):"midpoint"===r.type&&s.perform(actionAddMidpoint({loc:r.loc,edge:r.edge},osmNode()),_t("operations.add.annotation.vertex"))}}),i(),h&&(n=geoExtent(),r=s.graph(),o.forEach(function(e){var t=s.entity(e);n._extend(t.extent(r))}),e=n.center(),s.map().centerEase(e)))},l.exit=function(){f=!1,r.forEach(function(e){e.behavior&&s.uninstall(e.behavior)}),r=[],d.forEach(s.uninstall),select(document).call(c.unbind),s.ui().closeEditMenu(),s.history().on("change.select",null).on("undone.select",null).on("redone.select",null);var e=s.surface();e.selectAll(".selected-member").classed("selected-member",!1),e.selectAll(".selected").classed("selected",!1),e.selectAll(".highlighted").classed("highlighted",!1),e.selectAll(".related").classed("related",!1),s.map().on("drawn.select",null),s.ui().sidebar.hide(),s.features().forceVisible([]);var t,n=g();f&&n&&"relation"===n.type&&0===Object.keys(n.tags).length&&0===s.graph().parentRelations(n).length&&(0===n.members.length||1===n.members.length&&!n.members[0].role)&&(t=actionDeleteRelation(n.id,!0),s.perform(t,_t("operations.delete.annotation.relation")))},l}function uiLasso(t){var n,r;function i(e){t.container().classed("lasso",!0),n=e.append("g").attr("class","lasso hide"),r=n.append("path").attr("class","lasso-path"),n.call(uiToggle(!0))}return i.coordinates=[],i.extent=function(){return i.coordinates.reduce(function(e,t){return e.extend(geoExtent(t))},geoExtent())},i.p=function(e){return arguments.length&&(i.coordinates.push(e),r&&r.data([i.coordinates]).attr("d",function(e){return"M"+e.join(" L")+" Z"})),i},i.close=function(){n&&n.call(uiToggle(!1,function(){select(this).remove()})),t.container().classed("lasso",!1)},i}function behaviorLasso(l){function e(e){var s;function t(){s||(s=uiLasso(l),l.surface().call(s)),s.p(l.map().mouse())}function n(){if(!s)return[];var t,a=l.graph();if(l.map().editableDataEnabled(!0)&&l.map().isInWideSelection())t=new Set(utilGetAllNodes(l.selectedIDs(),a));else if(!l.map().editableDataEnabled())return[];var e,n,r=s.extent().map(l.projection.invert),i=geoExtent((e=r[0],n=r[1],[[Math.min(e[0],n[0]),Math.min(e[1],n[1])],[Math.max(e[0],n[0]),Math.max(e[1],n[1])]])),o=l.history().intersects(i).filter(function(e){return"node"===e.type&&(!t||t.has(e))&&geoPointInPolygon(l.projection(e.loc),s.coordinates)&&!l.features().isHidden(e,a,e.geometry(a))});return o.sort(function(e,t){var n=a.parentWays(e),r=a.parentWays(t);if(n.length&&r.length){var i=utilArrayIntersection(n,r);if(i.length){var o=i[0].nodes;return o.indexOf(e.id)-o.indexOf(t.id)}return parseFloat(n[0].id.slice(1))-parseFloat(r[0].id.slice(1))}return n.length||r.length?n.length-r.length:e.loc[0]-t.loc[0]}),o.map(function(e){return e.id})}function r(){var e;select(window).on(i+"move.lasso",null).on(i+"up.lasso",null),s&&(e=n(),s.close(),e.length&&l.enter(modeSelect(l,e)))}e.on(i+"down.lasso",function(){0===event.button&&!0===event.shiftKey&&(s=null,select(window).on(i+"move.lasso",t).on(i+"up.lasso",r),event.stopPropagation())})}var i="PointerEvent"in window?"pointer":"mouse";return e.off=function(e){e.on(i+"down.lasso",null)},e}function modeBrowse(e){var t,n,r={button:"browse",id:"browse",title:_t("modes.browse.title"),description:_t("modes.browse.description")},i=[];return r.selectBehavior=function(e){return arguments.length?(n=e,r):n},r.enter=function(){i.length||(n=n||behaviorSelect(e),i=[behaviorPaste(e),behaviorHover(e).on("hover",e.ui().sidebar.hover),n,behaviorLasso(e),modeDragNode(e).behavior,modeDragNote(e).behavior]),i.forEach(e.install),document.activeElement&&document.activeElement.blur&&document.activeElement.blur(),t?e.ui().sidebar.show(t):e.ui().sidebar.select(null)},r.exit=function(){e.ui().sidebar.hover.cancel(),i.forEach(e.uninstall),t&&e.ui().sidebar.hide()},r.sidebar=function(e){return arguments.length?(t=e,r):t},r.operations=function(){return[operationPaste(e)]},r}function behaviorAddWay(t){var n=dispatch("start","startFromWay","startFromNode"),r=behaviorDraw(t);function i(e){r.on("click",function(){n.apply("start",this,arguments)}).on("clickWay",function(){n.apply("startFromWay",this,arguments)}).on("clickNode",function(){n.apply("startFromNode",this,arguments)}).on("cancel",i.cancel).on("finish",i.cancel),t.map().dblclickZoomEnable(!1),e.call(r)}return i.off=function(e){e.call(r.off)},i.cancel=function(){window.setTimeout(function(){t.map().dblclickZoomEnable(!0)},1e3),t.enter(modeBrowse(t))},utilRebind(i,n,"on")}function behaviorHash(s){var a=null,l=90-1e-8;function c(){return"#"+utilQsString(function(){var e=s.map(),t=e.center(),n=e.zoom(),r=Math.max(0,Math.ceil(Math.log(n)/Math.LN2)),i=utilObjectOmit(utilStringQs(window.location.hash),["comment","source","hashtags","walkthrough"]),o={};delete i.id;var a=s.selectedIDs().filter(function(e){return s.hasEntity(e)});return a.length&&(o.id=a.join(",")),o.map=n.toFixed(2)+"/"+t[1].toFixed(r)+"/"+t[0].toFixed(r),Object.assign(i,o)}(),!0)}function n(e){var t,n,r,i,o=s.documentTitleBase()||"iD",a=s.selectedIDs().filter(function(e){return s.hasEntity(e)});return a.length&&(n=utilDisplayLabel(s.entity(a[0]),s.graph()),r=1<a.length?_t("title.labeled_and_more",{labeled:n,count:(a.length-1).toString()}):n,i="context"),e&&0<(t=s.history().difference().summary().length)&&(i=r?"changes_context":"changes"),i?_t("title.format."+i,{changes:t,base:o,context:r}):o}function t(e){var t;s.setsDocumentTitle()&&(t=n(e),document.title!==t&&(document.title=t))}function u(){var e;s.inIntro()||(e=c(),a!==e&&(a=e,window.history.replaceState(null,n(!1),e),t(!0)))}var r=throttle(u,500),i=throttle(function(){t(!0)},500);function o(){if(window.location.hash!==a){var e=utilStringQs(a=window.location.hash),t=(e.map||"").split("/").map(Number);if(t.length<3||t.some(isNaN))u();else{if(a===c())return;var n=s.mode();if(s.map().centerZoom([t[2],Math.min(l,Math.max(-l,t[1]))],t[0]),e.id){var r=e.id.split(",").filter(function(e){return s.hasEntity(e)}),i=n&&"select"===n.id&&utilArrayIdentical(n.selectedIDs(),r);if(r.length&&!i)return void s.enter(modeSelect(s,r))}var o=geoSphericalDistance(s.map().center(),[t[2],t[1]]);if(n&&null!==n.id.match(/^draw/)&&500<o)return void s.enter(modeBrowse(s))}}}function p(){var e;s.map().on("move.behaviorHash",r),s.history().on("change.behaviorHash",i),s.on("enter.behaviorHash",r),select(window).on("hashchange.behaviorHash",o),window.location.hash&&((e=utilStringQs(window.location.hash)).id&&s.zoomToEntity(e.id.split(",")[0],!e.map),"true"===e.walkthrough&&(p.startWalkthrough=!0),e.map&&(p.hadHash=!0),o(),t(!1))}return p.off=function(){r.cancel(),i.cancel(),s.map().on("move.behaviorHash",null),s.on("enter.behaviorHash",null),select(window).on("hashchange.behaviorHash",null),window.location.hash=""},p}function coreDifference(h,g){var m={},r={},e={};return function(){for(var e=utilArrayUniq(Object.keys(g.entities).concat(Object.keys(h.entities))),t=0;t<e.length;t++)!function(e){var t=g.entities[e],n=h.entities[e];if(t!==n&&!m[e]){if(!t&&n)return m[e]={base:n,head:t},r.deletion=!0;if(t&&!n)return m[e]={base:n,head:t},r.addition=!0;if(t&&n){if(t.members&&n.members&&!fastDeepEqual(t.members,n.members))return m[e]={base:n,head:t},r.geometry=!0,r.properties=!0;t.loc&&n.loc&&!geoVecEqual(t.loc,n.loc)&&(m[e]={base:n,head:t},r.geometry=!0),t.nodes&&n.nodes&&!fastDeepEqual(t.nodes,n.nodes)&&(m[e]={base:n,head:t},r.geometry=!0),t.tags&&n.tags&&!fastDeepEqual(t.tags,n.tags)&&(m[e]={base:n,head:t},r.properties=!0)}}}(e[t])}(),e.length=function(){return Object.keys(m).length},e.changes=function(){return m},e.didChange=r,e.extantIDs=function(r){var i=new Set;return Object.keys(m).forEach(function(e){m[e].head&&i.add(e);var t=m[e].head,n=m[e].base;r&&"relation"===(t||n).type&&utilArrayUnion(t?t.members.map(function(e){return e.id}):[],n?n.members.map(function(e){return e.id}):[]).forEach(function(e){g.hasEntity(e)&&i.add(e)})}),Array.from(i)},e.modified=function(){var t=[];return Object.values(m).forEach(function(e){e.base&&e.head&&t.push(e.head)}),t},e.created=function(){var t=[];return Object.values(m).forEach(function(e){!e.base&&e.head&&t.push(e.head)}),t},e.deleted=function(){var t=[];return Object.values(m).forEach(function(e){e.base&&!e.head&&t.push(e.base)}),t},e.summary=function(){for(var i={},e=Object.keys(m),t=0;t<e.length;t++){var n,r,o=m[e[t]];o.head&&"vertex"!==o.head.geometry(g)?a(o.head,g,o.base?"modified":"created"):o.base&&"vertex"!==o.base.geometry(h)?a(o.base,h,"deleted"):o.base&&o.head?(n=!fastDeepEqual(o.base.loc,o.head.loc),r=!fastDeepEqual(o.base.tags,o.head.tags),n&&function(e){for(var t=g.parentWays(e),n=t.length-1;0<=n;n--){var r=t[n];r.id in i||a(r,g,"modified")}}(o.head),(r||n&&o.head.hasInterestingTags())&&a(o.head,g,"modified")):o.head&&o.head.hasInterestingTags()?a(o.head,g,"created"):o.base&&o.base.hasInterestingTags()&&a(o.base,h,"deleted")}return Object.values(i);function a(e,t,n){i[e.id]={entity:e,graph:t,changeType:n}}},e.complete=function(e){var t,n,r={};for(t in m){var i=(n=m[t]).head,o=n.base,a=i||o;if(!e||i&&i.intersects(e,g)||o&&o.intersects(e,h)){if(r[t]=i,"way"===a.type){for(var s=i?i.nodes:[],l=o?o.nodes:[],c=utilArrayDifference(s,l),u=0;u<c.length;u++)r[c[u]]=g.hasEntity(c[u]);for(c=utilArrayDifference(l,s),u=0;u<c.length;u++)r[c[u]]=g.hasEntity(c[u])}if("relation"===a.type&&a.isMultipolygon()){var p=utilArrayUnion(i?i.members.map(function(e){return e.id}):[],o?o.members.map(function(e){return e.id}):[]);for(u=0;u<p.length;u++){var d=g.hasEntity(p[u]);d&&(e&&!d.intersects(e,g)||(r[p[u]]=d))}}f(g.parentWays(a),r),f(g.parentRelations(a),r)}}return r;function f(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.id in t||(t[r.id]=r,f(g.parentRelations(r),t))}}},e}function coreTree(o){var r=new RBush,a={},i=new RBush,s={},l={},c={};function t(e){var t=e.extent(o).bbox();return t.id=e.id,a[e.id]=t}function u(e){var t=e.extent(o);if(!t)return null;var n=t.bbox();return n.segment=e,s[e.id]=n}function p(e){r.remove(a[e.id]),delete a[e.id],l[e.id]&&(l[e.id].forEach(function(e){i.remove(s[e.id]),delete s[e.id]}),delete l[e.id])}function d(e){r.load(e.map(t));var n=[];e.forEach(function(e){var t;e.segments&&(t=e.segments(o),l[e.id]=t,n=n.concat(t))}),n.length&&i.load(n.map(u).filter(Boolean))}function f(t,n,r){o.parentWays(t).forEach(function(e){a[e.id]&&(p(e),n[e.id]=e),f(e,n,r)}),o.parentRelations(t).forEach(function(e){r[t.id]||(r[t.id]=!0,a[e.id]&&(p(e),n[e.id]=e),f(e,n,r))})}function n(e){var t,n,r;e!==o&&(t=coreDifference(o,e),o=e,((n=t.didChange).addition||n.deletion||n.geometry)&&(r={},n.deletion&&t.deleted().forEach(function(e){p(e)}),n.geometry&&t.modified().forEach(function(e){p(e),f(r[e.id]=e,r,{})}),n.addition&&t.created().forEach(function(e){r[e.id]=e}),d(Object.values(r))))}return c.rebase=function(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r];if(i.visible){if(o.entities.hasOwnProperty(i.id)||a[i.id]){if(!t)continue;a[i.id]&&p(i)}f(n[i.id]=i,n,{})}}return d(Object.values(n)),c},c.intersects=function(e,t){return n(t),r.search(e.bbox()).map(function(e){return t.entity(e.id)})},c.waySegments=function(e,t){return n(t),i.search(e.bbox()).map(function(e){return e.segment})},c}function uiModal(e,t){var n=this,r=utilKeybinding("modal"),i=e.select("div.modal"),o=i.empty();i.transition().duration(200).style("opacity",0).remove();var a=e.append("div").attr("class","shaded").style("opacity",0);a.close=function(){a.transition().duration(200).style("opacity",0).remove(),s.transition().duration(200).style("top","0px"),select(document).call(r.unbind)};var s=a.append("div").attr("class","modal fillL");return t||(a.on("click.remove-modal",function(){event.target===n&&a.close()}),s.append("button").attr("class","close").on("click",a.close).call(svgIcon("#iD-icon-close")),r.on("⌫",a.close).on("⎋",a.close),select(document).call(r)),s.append("div").attr("class","content"),o?a.transition().style("opacity",1):a.style("opacity",1),a}function uiLoading(n){var r=select(null),i="",o=!1,a=function(e){var t=(r=uiModal(e,o)).select(".content").classed("loading-modal",!0).append("div").attr("class","modal-section fillL");return t.append("img").attr("class","loader").attr("src",n.imagePath("loader-white.gif")),t.append("h3").text(i),r.select("button.close").attr("class","hide"),a};return a.message=function(e){return arguments.length?(i=e,a):i},a.blocking=function(e){return arguments.length?(o=e,a):o},a.close=function(){r.remove()},a.isShown=function(){return r&&!r.empty()&&r.node().parentNode},a}function coreHistory(d){var n,f,h,g,m=dispatch("change","merge","restore","undone","redone"),t=utilSessionMutex("lock"),r=t.lock()&&!!corePreferences(e("saved_history")),o=[],a=[],i={};function s(e,t){var n;"function"!=typeof(e=Array.prototype.slice.call(e))[e.length-1]&&(n=e.pop());for(var r=f[h].graph,i=0;i<e.length;i++)r=e[i](r,t);return{graph:r,annotation:n,imageryUsed:o,photoOverlaysUsed:a,transform:d.projection.transform(),selectedIDs:d.selectedIDs()}}function l(e,t){var n=f[h].graph;f=f.slice(0,h+1);var r=s(e,t);return f.push(r),h++,u(n)}function c(e,t){var n=f[h].graph;0<h&&(h--,f.pop()),f=f.slice(0,h+1);var r=s(e,t);return f.push(r),h++,u(n)}function u(e){var t=coreDifference(e,y.graph());return n||m.call("change",this,t),t}function e(e){return"iD_"+window.location.origin+"_"+e}var y={graph:function(){return f[h].graph},tree:function(){return g},base:function(){return f[0].graph},merge:function(e){var t=f.map(function(e){return e.graph});f[0].graph.rebase(e,t,!1),g.rebase(e,!1),m.call("merge",this,e)},perform:function(){select(document).interrupt("history.perform");var e=!1,t=arguments[0];if((1===arguments.length||2===arguments.length&&"function"!=typeof arguments[1])&&(e=!!t.transitionable),!e)return l(arguments);var n=arguments;select(document).transition("history.perform").duration(150).ease(linear$1).tween("history.tween",function(){return function(e){e<1&&c([t],e)}}).on("start",function(){l([t],0)}).on("end interrupt",function(){c(n,1)})},replace:function(){return select(document).interrupt("history.perform"),e=arguments,t=1,n=f[h].graph,r=s(e,t),f[h]=r,u(n);var e,t,n,r},overwrite:function(){return select(document).interrupt("history.perform"),c(arguments,1)},pop:function(e){select(document).interrupt("history.perform");var t=f[h].graph;for((isNaN(+e)||+e<0)&&(e=1);0<e--&&0<h;)h--,f.pop();return u(t)},undo:function(){select(document).interrupt("history.perform");for(var e=f[h],t=e.graph;0<h&&!f[--h].annotation;);return m.call("undone",this,f[h],e),u(t)},redo:function(){select(document).interrupt("history.perform");for(var e=f[h],t=e.graph,n=h;n<f.length-1;)if(f[++n].annotation){h=n,m.call("redone",this,f[h],e);break}return u(t)},pauseChangeDispatch:function(){n=n||f[h].graph},resumeChangeDispatch:function(){if(n){var e=n;return n=null,u(e)}},undoAnnotation:function(){for(var e=h;0<=e;){if(f[e].annotation)return f[e].annotation;e--}},redoAnnotation:function(){for(var e=h+1;e<=f.length-1;){if(f[e].annotation)return f[e].annotation;e++}},intersects:function(e){return g.intersects(e,f[h].graph)},difference:function(){return coreDifference(f[0].graph,f[h].graph)},changes:function(e){var t=f[0].graph,n=f[h].graph;e&&(n=e(n));var r=coreDifference(t,n);return{modified:r.modified(),created:r.created(),deleted:r.deleted()}},hasChanges:function(){return 0<this.difference().length()},imageryUsed:function(e){if(e)return o=e,y;var t=new Set;return f.slice(1,h+1).forEach(function(e){e.imageryUsed.forEach(function(e){"Custom"!==e&&t.add(e)})}),Array.from(t)},photoOverlaysUsed:function(e){if(e)return a=e,y;var t=new Set;return f.slice(1,h+1).forEach(function(e){e.photoOverlaysUsed&&Array.isArray(e.photoOverlaysUsed)&&e.photoOverlaysUsed.forEach(function(e){t.add(e)})}),Array.from(t)},checkpoint:function(e){return i[e]={stack:f,index:h},y},reset:function(e){return void 0!==e&&i.hasOwnProperty(e)?(f=i[e].stack,h=i[e].index):(f=[{graph:coreGraph()}],g=coreTree(f[h=0].graph),i={}),m.call("change"),y},toIntroGraph:function(){var o={n:0,r:0,w:0},a={},r=this.graph(),s={};return Object.values(r.base().entities).forEach(function(e){var t=i(e);s[t.id]=t}),Object.keys(r.entities).forEach(function(e){var t,n=r.entities[e];n?(t=i(n),s[t.id]=t):delete s[e]}),Object.values(s).forEach(function(e){Array.isArray(e.nodes)&&(e.nodes=e.nodes.map(function(e){return a[e]||e})),Array.isArray(e.members)&&(e.members=e.members.map(function(e){return e.id=a[e.id]||e.id,e}))}),JSON.stringify({dataIntroGraph:s});function i(e){var t=utilObjectOmit(e,["type","user","v","version","visible"]);t.tags&&!Object.keys(t.tags)&&delete t.tags,Array.isArray(t.loc)&&(t.loc[0]=+t.loc[0].toFixed(6),t.loc[1]=+t.loc[1].toFixed(6));var n=e.id.match(/([nrw])-\d*/);if(null!==n){for(var r,i=n[1];r=i+ ++o[i],s.hasOwnProperty(r););t.id=a[e.id]=r}return t}},toJSON:function(){if(this.hasChanges()){var s={},l={},c=f[0],e=f.map(function(i){var o=[],a=[];Object.keys(i.graph.entities).forEach(function(e){var t,n=i.graph.entities[e];n?(t=osmEntity.key(n),s[t]=n,o.push(t)):a.push(e),e in c.graph.entities&&(l[e]=c.graph.entities[e]),n&&n.nodes&&n.nodes.forEach(function(e){e in c.graph.entities&&(l[e]=c.graph.entities[e])});var r=c.graph._parentWays[e];r&&r.forEach(function(e){e in c.graph.entities&&(l[e]=c.graph.entities[e])})});var e={};return o.length&&(e.modified=o),a.length&&(e.deleted=a),i.imageryUsed&&(e.imageryUsed=i.imageryUsed),i.photoOverlaysUsed&&(e.photoOverlaysUsed=i.photoOverlaysUsed),i.annotation&&(e.annotation=i.annotation),i.transform&&(e.transform=i.transform),i.selectedIDs&&(e.selectedIDs=i.selectedIDs),e});return JSON.stringify({version:3,entities:Object.values(s),baseEntities:Object.values(l),stack:e,nextIDs:osmEntity.id.next,index:h,timestamp:(new Date).getTime()})}},fromJSON:function(e,t){var r,n,i,s,l,c,u,o=JSON.parse(e),a=!0;osmEntity.id.next=o.nextIDs,h=o.index;var p=(f=2===o.version||3===o.version?(r={},o.entities.forEach(function(e){r[osmEntity.key(e)]=osmEntity(e)}),3===o.version&&(n=o.baseEntities.map(function(e){return osmEntity(e)}),i=f.map(function(e){return e.graph}),f[0].graph.rebase(n,i,!0),g.rebase(n,!0),t&&(s=d.connection(),(l=n.filter(function(e){return"way"===e.type}).reduce(function(e,t){return utilArrayUnion(e,t.nodes)},[]).filter(function(e){return!f[0].graph.hasEntity(e)})).length&&s&&(a=!1,d.map().redrawEnable(!1),c=uiLoading(d).blocking(!0),d.container().call(c),u=function(e,t){var n,r,i,o,a;e||(r=(n=utilArrayGroupBy(t.data,"visible")).true||[],i=n.false||[],r.length&&(o=r.map(function(e){return e.id}),a=f.map(function(e){return e.graph}),l=utilArrayDifference(l,o),f[0].graph.rebase(r,a,!0),g.rebase(r,!0)),i.forEach(function(e){s.loadEntityVersion(e.id,e.version-1,u)})),!e&&l.length||(c.close(),d.map().redrawEnable(!0),m.call("change"),m.call("restore",this))},s.loadMultiple(l,u)))),o.stack.map(function(e){var t,n={};return e.modified&&e.modified.forEach(function(e){t=r[e],n[t.id]=t}),e.deleted&&e.deleted.forEach(function(e){n[e]=void 0}),{graph:coreGraph(f[0].graph).load(n),annotation:e.annotation,imageryUsed:e.imageryUsed,photoOverlaysUsed:e.photoOverlaysUsed,transform:e.transform,selectedIDs:e.selectedIDs}})):o.stack.map(function(e){var t={};for(var n in e.entities){var r=e.entities[n];t[n]="undefined"===r?void 0:osmEntity(r)}return e.graph=coreGraph(f[0].graph).load(t),e}))[h].transform;return p&&d.map().transformEase(p,0),a&&(m.call("change"),m.call("restore",this)),y},lock:function(){return t.lock()},unlock:function(){t.unlock()},save:function(){return t.locked()&&!r&&corePreferences(e("saved_history"),y.toJSON()||null),y},clearSaved:function(){return d.debouncedSave.cancel(),t.locked()&&(r=!1,corePreferences(e("saved_history"),null),corePreferences("comment",null),corePreferences("hashtags",null),corePreferences("source",null)),y},savedHistoryJSON:function(){return corePreferences(e("saved_history"))},hasRestorableChanges:function(){return r},restore:function(){var e;t.locked()&&(r=!1,(e=this.savedHistoryJSON())&&y.fromJSON(e,!0))},_getKey:e};return y.reset(),utilRebind(y,m,"on")}function validationAlmostJunction(g){var o="almost_junction",m=Math.atan(.15);function A(e){return"way"===e.type&&osmRoutableHighwayTagValues[e.tags.highway]}function e(t,S){if(!A(t))return[];if(t.isDegenerate())return[];var E=g.history().tree(),e=function(r){var i,o=[];if(r.isClosed())return o;return[0,r.nodes.length-1].forEach(function(e){var t,n=r.nodes[e];!function(e,t){var n=services.osm;if(n&&!n.isDataLoaded(e.loc))return!1;if(function(e){return"yes"===e.tags.noexit||"parking_entrance"===e.tags.amenity||e.tags.entrance&&"no"!==e.tags.entrance}(e)||1!==S.parentWays(e).length)return!1;var r=0;for(var i in t.nodes)if(t.nodes[i]===e.id&&1<(r+=1))return!1;return!0}(S.entity(n),r)||(t=function(e,t){for(var n=e.nodes[t],r=0===t?e.nodes[1]:e.nodes[e.nodes.length-2],i=S.entity(n),o=S.entity(r),a=i.loc[0],s=i.loc[1],l=geoMetersToLon(5,s)/2,c=geoMetersToLat(5)/2,u=geoExtent([[a-l,s-c],[a+l,s+c]]),p=geoSphericalDistance(o.loc,i.loc),d=5/p+1,f=geoVecInterp(o.loc,i.loc,d),h=E.waySegments(u,S),g=0;g<h.length;g++){var m=h[g],y=S.entity(m.wayId);if(A(y)&&function(e,t){if(e.id===t.id)return!0;if((C(e.tags,"bridge")||C(t.tags,"bridge"))&&(!C(e.tags,"bridge")||!C(t.tags,"bridge")))return!1;if((C(e.tags,"tunnel")||C(t.tags,"tunnel"))&&(!C(e.tags,"tunnel")||!C(t.tags,"tunnel")))return!1;var n=e.tags.layer||"0",r=t.tags.layer||"0";if(n!==r)return!1;var i=e.tags.level||"0",o=t.tags.level||"0";return i===o}(e,y)){var v=m.nodes[0],_=m.nodes[1];if(v!==n&&_!==n){var b=S.entity(v),w=S.entity(_),x=geoLineIntersection([i.loc,f],[b.loc,w.loc]);if(x)return{mid:o,node:i,wid:y.id,edge:[b.id,w.id],cross_loc:x}}}}return null}(r,e))&&((i=S.childNodes(r).slice())[e]=i[e].move(t.cross_loc),geoHasSelfIntersections(i,n)||o.push(t))}),o}(t),n=[];return e.forEach(function(e){n.push(new validationIssue({type:o,subtype:"highway-highway",severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]);if(this.entityIds[0]===this.entityIds[2])return t?_t("issues.almost_junction.self.message",{feature:utilDisplayLabel(t,e.graph())}):"";var n=e.hasEntity(this.entityIds[2]);return t&&n?_t("issues.almost_junction.message",{feature:utilDisplayLabel(t,e.graph()),feature2:utilDisplayLabel(n,e.graph())}):""},reference:i,entityIds:[t.id,e.node.id,e.wid],loc:e.node.loc,hash:JSON.stringify(e.node.loc),data:{midId:e.mid.id,edge:e.edge,cross_loc:e.cross_loc},dynamicFixes:r}))}),n;function r(e){var t=[new validationIssueFix({icon:"iD-icon-abutment",title:_t("issues.fix.connect_features.title"),onClick:function(e){var t,n,r=_t("issues.fix.connect_almost_junction.annotation"),i=this.issue.entityIds,o=i[1],a=i[2],s=e.entity(this.issue.data.midId),l=e.entity(o),c=e.entity(a),u=(t=l,[(n=c).nodes[0],n.nodes[n.nodes.length-1]].map(function(e){return S.entity(e)}).filter(function(e){return e.id!==t.id&&geoSphericalDistance(t.loc,e.loc)<=4.25}));if(0<u.length){var p=function(i,o,e){var a,s=1/0;if(e.forEach(function(e){var t=geoAngle(i,o,g.projection)+Math.PI,n=geoAngle(i,e,g.projection)+Math.PI,r=Math.max(t,n)-Math.min(t,n);r<s&&(a=e,s=r)}),s<=m)return a;return null}(s,l,u);if(p)return void e.perform(actionMergeNodes([p.id,l.id],p.loc),r)}var d=this.issue.data.edge,f=this.issue.data.cross_loc,h=geoSphericalClosestNode([e.entity(d[0]),e.entity(d[1])],f);h.distance<.75?e.perform(actionMergeNodes([h.node.id,l.id],h.node.loc),r):e.perform(actionAddMidpoint({loc:f,edge:d},l),r)}})],n=e.hasEntity(this.entityIds[1]);return n&&!n.hasInterestingTags()&&t.push(new validationIssueFix({icon:"maki-barrier",title:_t("issues.fix.tag_as_disconnected.title"),onClick:function(e){var t=this.issue.entityIds[1],n=Object.assign({},e.entity(t).tags);n.noexit="yes",e.perform(actionChangeTags(t,n),_t("issues.fix.tag_as_disconnected.annotation"))}})),t}function i(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.almost_junction.highway-highway.reference"))}function C(e,t){return void 0!==e[t]&&"no"!==e[t]}}return e.type=o,e}function validationCloseNodes(m){function e(e,g){return"node"===e.type?(t=e,(n=g.parentWays(t)).length?function(e,t){var i=[];function n(e,t,n){var r=c(e,t,n);r&&i.push(r)}for(var r=0;r<t.length;r++){var o=t[r];if(l(o))for(var a=o.nodes.length-1,s=0;s<o.nodes.length;s++)0!==s&&o.nodes[s-1]===e.id&&n(e,g.entity(o.nodes[s]),o),s!==a&&o.nodes[s+1]===e.id&&n(g.entity(o.nodes[s]),e,o)}return i}(t,n):function(e){for(var t=[],n=e.loc[0],r=e.loc[1],i=geoMetersToLon(.2,r)/2,o=geoMetersToLat(.2)/2,a=geoExtent([[n-i,r-o],[n+i,r+o]]),s=m.history().tree().intersects(a,g),l=0;l<s.length;l++){var c=s[l];if(c.id!==e.id&&"node"===c.type&&"point"===c.geometry(g)&&(c.loc===e.loc||geoSphericalDistance(e.loc,c.loc)<.2)){var u=!1;for(var p in{layer:!0,level:!0,"addr:housenumber":!0,"addr:unit":!0}){var d=e.tags[p]||"0",f=c.tags[p]||"0";if(d!==f){u=!0;break}}if(u)continue;t.push(new validationIssue({type:y,subtype:"detached",severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]),n=e.hasEntity(this.entityIds[1]);return t&&n?_t("issues.close_nodes.detached.message",{feature:utilDisplayLabel(t,e.graph()),feature2:utilDisplayLabel(n,e.graph())}):""},reference:h,entityIds:[e.id,c.id],dynamicFixes:function(){return[new validationIssueFix({icon:"iD-operation-disconnect",title:_t("issues.fix.move_points_apart.title")}),new validationIssueFix({icon:"iD-icon-layers",title:_t("issues.fix.use_different_layers_or_levels.title")})]}}))}}return t;function h(e){var t=_t("issues.close_nodes.detached.reference");e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(t)}}(t)):"way"===e.type?function(e){if(!l(e))return[];for(var t=[],n=g.childNodes(e),r=0;r<n.length-1;r++){var i=n[r],o=n[r+1],a=c(i,o,e);a&&t.push(a)}return t}(e):[];var t,n;function l(e){if(!(e.nodes.length<=2||e.isClosed()&&e.nodes.length<=4)){var t=e.extent(g).bbox();if(!(geoSphericalDistance([t.minX,t.minY],[t.maxX,t.maxY])<1.5))return 1}}function a(e){if(!l(e))return 0;var t=function(e){if(e.tags.boundary&&"no"!==e.tags.boundary)return"boundary";if(e.tags.indoor&&"no"!==e.tags.indoor)return"indoor";if(e.tags.building&&"no"!==e.tags.building||e.tags["building:part"]&&"no"!==e.tags["building:part"])return"building";if(osmPathHighwayTagValues[e.tags.highway])return"path";var t=g.parentRelations(e);for(var n in t){var r=t[n];if("boundary"===r.tags.type)return"boundary";if(r.isMultipolygon()){if(r.tags.indoor&&"no"!==r.tags.indoor)return"indoor";if(r.tags.building&&"no"!==r.tags.building||r.tags["building:part"]&&"no"!==r.tags["building:part"])return"building"}}return"other"}(e);return"boundary"===t?0:"indoor"===t?.01:"building"===t?.05:"path"===t?.1:.2}function c(e,t,n){if(e.id===t.id||e.hasInterestingTags()&&t.hasInterestingTags())return null;if(e.loc!==t.loc){var r=g.parentWays(e),i=new Set(g.parentWays(t)),o=r.filter(function(e){return i.has(e)}).map(a);if(Math.min.apply(Math,o)<geoSphericalDistance(e.loc,t.loc))return null}return new validationIssue({type:y,subtype:"vertices",severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]);return t?_t("issues.close_nodes.message",{way:utilDisplayLabel(t,e.graph())}):""},reference:function(e){var t=_t("issues.close_nodes.reference");e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(t)},entityIds:[n.id,e.id,t.id],loc:e.loc,dynamicFixes:function(){return[new validationIssueFix({icon:"iD-icon-plus",title:_t("issues.fix.merge_points.title"),onClick:function(e){var t=this.issue.entityIds,n=actionMergeNodes([t[1],t[2]]);e.perform(n,_t("issues.fix.merge_close_vertices.annotation"))}}),new validationIssueFix({icon:"iD-operation-disconnect",title:_t("issues.fix.move_points_apart.title")})]}})}}var y="close_nodes";return e.type=y,e}function validationCrossingWays(u){var f="crossing_ways";function h(e,t){if(null===k(e,t))for(var n=t.parentRelations(e),r=0;r<n.length;r++){var i=n[r];if(null!==k(i,t))return i}return e}function S(e,t){return void 0!==e[t]&&"no"!==e[t]}function E(e){return S(e,"indoor")||S(e,"level")||"corridor"===e.highway}function C(e){return"highway"===e||"railway"===e||"waterway"===e}function A(e){return"highway"===e||"railway"===e||"waterway"===e}function I(e,t){return k(h(e,t),t)}var i={demolished:!0,dismantled:!0,proposed:!0,razed:!0};function k(e,t){var n=e.geometry(t);if("line"!==n&&"area"!==n)return null;var r=e.tags;return S(r,"building")&&!i[r.building]?"building":S(r,"highway")&&osmRoutableHighwayTagValues[r.highway]?"highway":"line"!==n?null:S(r,"railway")&&osmRailwayTrackTagValues[r.railway]?"railway":S(r,"waterway")&&osmFlowingWaterwayTagValues[r.waterway]?"waterway":null}var g={motorway:!0,motorway_link:!0,trunk:!0,trunk_link:!0,primary:!0,primary_link:!0,secondary:!0,secondary_link:!0},m={track:!0};function p(e,t,n){var r=[];if("way"!==e.type)return r;var i=I(e,t);if(null===i)return r;for(var o,a,s,l,c,u,p,d,f,h,g,m,y,v={},_=t.childNodes(e),b={},w=0;w<_.length-1;w++)for(s=_[w],l=_[w+1],a=geoExtent([[Math.min(s.loc[0],l.loc[0]),Math.min(s.loc[1],l.loc[1])],[Math.max(s.loc[0],l.loc[0]),Math.max(s.loc[1],l.loc[1])]]),h=n.waySegments(a,t),o=0;o<h.length;o++)if((g=h[o]).wayId!==e.id&&!v[g.wayId]&&(b[g.wayId]=!0,(m=t.hasEntity(g.wayId))&&null!==(y=I(m,t))&&!function(e,t,n,r){var i=e.tags,o=n.tags,a=i.level||"0",s=o.level||"0";if(E(i)&&E(o)&&a!==s)return 1;var l=i.layer||"0",c=o.layer||"0";if(C(t)&&C(r)){if(S(i,"bridge")&&!S(o,"bridge"))return 1;if(!S(i,"bridge")&&S(o,"bridge"))return 1;if(S(i,"bridge")&&S(o,"bridge")&&l!==c)return 1}else{if(C(t)&&S(i,"bridge"))return 1;if(C(r)&&S(o,"bridge"))return 1}if(A(t)&&A(r)){if(S(i,"tunnel")&&!S(o,"tunnel"))return 1;if(!S(i,"tunnel")&&S(o,"tunnel"))return 1;if(S(i,"tunnel")&&S(o,"tunnel")&&l!==c)return 1}else{if(A(t)&&S(i,"tunnel"))return 1;if(A(r)&&S(o,"tunnel"))return 1}return"waterway"===t&&"highway"===r&&"pier"===o.man_made||("waterway"===r&&"highway"===t&&"pier"===i.man_made||("building"===t||"building"===r)&&l!==c)}(e,i,m,y)&&(f="building"===i||"building"===y,p=g.nodes[0],d=g.nodes[1],p!==s.id&&p!==l.id&&d!==s.id&&d!==l.id&&(c=t.hasEntity(p))&&(u=t.hasEntity(d))))){var x=geoLineIntersection([s.loc,l.loc],[c.loc,u.loc]);if(x&&(r.push({wayInfos:[{way:e,featureType:i,edge:[s.id,l.id]},{way:m,featureType:y,edge:[c.id,u.id]}],crossPoint:x}),f)){v[m.id]=!0;break}}return r}function e(e,t){var n,r,i,o,a,s=u.history().tree(),l=k(n=e,r=t)?"way"===n.type?[n]:"relation"===n.type?n.members.reduce(function(e,t){var n;return"way"!==t.type||t.role&&"outer"!==t.role&&"inner"!==t.role||(n=r.hasEntity(t.id))&&-1===e.indexOf(n)&&e.push(n),e},[]):[]:[],c=[];for(i in l)for(o in a=p(l[i],t,s))c.push(function(e,i){e.wayInfos.sort(function(e,t){var n=e.featureType,r=t.featureType;return n===r?utilDisplayLabel(e.way,i)>utilDisplayLabel(t.way,i):"waterway"===n||"waterway"!==r&&n<r});var t=e.wayInfos.map(function(e){return h(e.way,i)}),n=[e.wayInfos[0].edge,e.wayInfos[1].edge],r=[e.wayInfos[0].featureType,e.wayInfos[1].featureType],a=function(e,t,n){var r=k(e,n),i=k(t,n),o=e.geometry(n),a=t.geometry(n),s="line"===o&&"line"===a;if(r===i){if("highway"===r){var l=osmPathHighwayTagValues[e.tags.highway],c=osmPathHighwayTagValues[t.tags.highway];if(!l&&!c||l===c)return{};if(m[(l?t:e).tags.highway])return{};var u=l?e:t;return-1!==["marked","unmarked"].indexOf(u.tags.crossing)?s?{highway:"crossing",crossing:u.tags.crossing}:{}:s?{highway:"crossing"}:{}}if("waterway"===r)return{};if("railway"===r)return{}}else{var p=[r,i];if(-1!==p.indexOf("highway")){if(-1!==p.indexOf("railway"))return osmPathHighwayTagValues[e.tags.highway]||osmPathHighwayTagValues[t.tags.highway]?s?{railway:"crossing"}:{}:s?{railway:"level_crossing"}:{};if(-1!==p.indexOf("waterway"))return S(e.tags,"tunnel")&&S(t.tags,"tunnel")||S(e.tags,"bridge")&&S(t.tags,"bridge")||g[e.tags.highway]||g[t.tags.highway]?null:s?{ford:"yes"}:{}}}return null}(t[0],t[1],i),s=e.wayInfos[0].featureType,l=e.wayInfos[1].featureType,c=E(t[0].tags)&&E(t[1].tags),u=A(s)&&S(t[0].tags,"tunnel")&&A(l)&&S(t[1].tags,"tunnel"),p=C(s)&&S(t[0].tags,"bridge")&&C(l)&&S(t[1].tags,"bridge"),o=[s,l].sort().join("-"),d=o;c?d="indoor-indoor":u?d="tunnel-tunnel":p&&(d="bridge-bridge");a&&(c||u||p)&&(d+="_connectable");return new validationIssue({type:f,subtype:o,severity:"warning",message:function(e){var t=e.graph(),n=t.hasEntity(this.entityIds[0]),r=t.hasEntity(this.entityIds[1]);return n&&r?_t("issues.crossing_ways.message",{feature:utilDisplayLabel(n,t),feature2:utilDisplayLabel(r,t)}):""},reference:function(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.crossing_ways."+d+".reference"))},entityIds:t.map(function(e){return e.id}),data:{edges:n,featureTypes:r,connectionTags:a},hash:e.crossPoint.toString()+n.slice().sort(function(e,t){return e[0]<t[0]?-1:1}).toString()+JSON.stringify(a),loc:e.crossPoint,dynamicFixes:function(e){var t=e.mode();if(!t||"select"!==t.id||1!==t.selectedIDs().length)return[];var n=this.entityIds[0]===t.selectedIDs()[0]?0:1,r=this.data.featureTypes[n],i=this.data.featureTypes[0==n?1:0],o=[];return a&&o.push(function(e){var t="connect_features";e.ford&&(t="connect_using_ford");return new validationIssueFix({icon:"iD-icon-crossing",title:_t("issues.fix."+t+".title"),onClick:function(e){var o=this.issue.loc,t=this.issue.data.connectionTags,a=this.issue.data.edges;e.perform(function(n){var r=osmNode({loc:o,tags:t});n=n.replace(r);var i=[r.id];return a.forEach(function(e){var t=geoSphericalClosestNode([n.entity(e[0]),n.entity(e[1])],o);t.distance<.75?i.push(t.node.id):n=actionAddMidpoint({loc:o,edge:e},r)(n)}),1<i.length&&(n=actionMergeNodes(i,o)(n)),n},_t("issues.fix.connect_crossing_features.annotation"))}})}(this.data.connectionTags)),c?o.push(new validationIssueFix({icon:"iD-icon-layers",title:_t("issues.fix.use_different_levels.title")})):u||p||"building"===s||"building"===l?(o.push(v("higher")),o.push(v("lower"))):"line"===e.graph().geometry(this.entityIds[0])&&"line"===e.graph().geometry(this.entityIds[1])&&(C(r)&&"waterway"!==r&&o.push(y("add_a_bridge","temaki-bridge","bridge")),!A(r)||"waterway"===i&&"waterway"!==r||o.push(y("add_a_tunnel","temaki-tunnel","tunnel"))),o.push(new validationIssueFix({icon:"iD-operation-move",title:_t("issues.fix.reposition_features.title")})),o}})}(a[o],t));return c}function y(i,e,A){return new validationIssueFix({icon:e,title:_t("issues.fix."+i+".title"),onClick:function(e){var t,n,b,w,x,S,E,C,r=e.mode();!r||"select"!==r.id||1===(t=r.selectedIDs()).length&&(n=t[0],e.hasEntity(n)&&(b=[n],S=this.issue.entityIds[0]===n?(w=this.issue.data.edges[0],x=this.issue.data.edges[1],this.issue.entityIds[1]):(w=this.issue.data.edges[1],x=this.issue.data.edges[0],this.issue.entityIds[0]),E=this.issue.loc,C=e.projection,e.perform(function(p){var e=[p.entity(w[0]),p.entity(w[1])],t=p.hasEntity(S),d=t&&t.tags.width&&parseFloat(t.tags.width);(d=d||t&&t.impliedLineWidthMeters())?"railway"===k(t,p)&&(d*=2):d=8;var n=geoAngle(e[0],e[1],C)+Math.PI,r=geoAngle(p.entity(x[0]),p.entity(x[1]),C)+Math.PI,i=Math.max(n,r)-Math.min(n,r);function o(e){return[geoLonToMeters(e[0],e[1]),geoLatToMeters(e[1])]}i>Math.PI&&(i-=Math.PI),d=d/2/Math.sin(i)*2,d+=4,d=Math.min(Math.max(d,4),50);var a=o(e[0].loc),s=o(e[1].loc),l=geoVecAngle(a,s),c=o(E),u=geoVecLength(a,s)/geoSphericalDistance(e[0].loc,e[1].loc);function f(e,t){var n,r,i=t*u;return n=[c[0]+Math.cos(e)*i,c[1]+Math.sin(e)*i],r=geoMetersToLat(n[1]),[geoMetersToLon(n[0],r),r]}function h(e,n,t){var r,i,o,a,s,l=d/2,c=geoSphericalDistance(E,n.loc);.55<c-l?(r=t(l),i=osmNode(),p=actionAddMidpoint({loc:r,edge:e},i)(p)):(o=0,n.parentIntersectionWays(p).forEach(function(t){t.nodes.forEach(function(e){e===n.id&&(n.id===t.first()&&n.id!==t.last()||n.id===t.last()&&n.id!==t.first()?o+=1:o+=2)})}),3<=o&&(.55<(a=c-.55)&&(s=t(a),i=osmNode(),p=actionAddMidpoint({loc:s,edge:e},i)(p))));var u=actionSplit((i=i||n).id).limitWays(b);return p=u(p),u.getCreatedWayIDs().length&&b.push(u.getCreatedWayIDs()[0]),i}var g,m=h(w,e[1],function(e){return f(l,e)}),y=h([e[0].id,m.id],e[0],function(e){return f(l+Math.PI,e)}),v=b.map(function(e){return p.entity(e)}).find(function(e){return-1!==e.nodes.indexOf(m.id)&&-1!==e.nodes.indexOf(y.id)}),_=Object.assign({},v.tags);return"bridge"===A?(_.bridge="yes",_.layer="1"):(g="yes","waterway"===k(v,p)&&(g="culvert"),_.tunnel=g,_.layer="-1"),p=actionChangeTags(v.id,_)(p)},_t("issues.fix."+i+".annotation")),e.enter(modeSelect(e,b))))}})}function v(s){return new validationIssueFix({icon:"iD-icon-"+("higher"===s?"up":"down"),title:_t("issues.fix.tag_this_as_"+s+".title"),onClick:function(e){var t,n,r,i,o,a=e.mode();!a||"select"!==a.id||1===(t=a.selectedIDs()).length&&(n=t[0],!this.issue.entityIds.some(function(e){return e===n})||(r=e.hasEntity(n))&&((o=(i=Object.assign({},r.tags)).layer&&Number(i.layer))&&!isNaN(o)?"higher"===s?o+=1:--o:o="higher"===s?1:-1,i.layer=o.toString(),e.perform(actionChangeTags(r.id,i),_t("operations.change_tags.annotation"))))}})}return e.type=f,e}function validationDisconnectedWay(){var n="disconnected_way";function r(e){return osmRoutableHighwayTagValues[e.tags.highway]}function e(e,l){var t=function(e){var t=new Set,n=[];function r(e){l.parentWays(e).forEach(function(e){!t.has(e)&&u(e,!1)&&(t.add(e),n.push(e))})}if("way"===e.type&&u(e,!0))t.add(e),n.push(e);else{if("node"!==e.type||!c(e))return null;t.add(e),r(e)}for(;n.length;){var i=n.pop(),o=l.childNodes(i);for(var a in o){var s=o[a];if(function(e){var t=services.osm;if(t&&!t.isDataLoaded(e.loc))return!0;if(e.tags.entrance&&"no"!==e.tags.entrance)return!0;return"parking_entrance"===e.tags.amenity}(s))return null;c(s)&&t.add(s),r(s)}}return t}(e);return t?[new validationIssue({type:n,subtype:"highway",severity:"warning",message:function(e){if(1!==this.entityIds.length)return _t("issues.disconnected_way.routable.message.multiple",{count:this.entityIds.length.toString()});var t=e.hasEntity(this.entityIds[0]);return t?_t("issues.disconnected_way.highway.message",{highway:utilDisplayLabel(t,e.graph())}):""},reference:function(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.disconnected_way.routable.reference"))},entityIds:Array.from(t).map(function(e){return e.id}),dynamicFixes:function(e){var t=[],n=1===this.entityIds.length&&e.hasEntity(this.entityIds[0]);{var r,i,o;n?("way"!==n.type||n.isClosed()||(r=_mainLocalizer.textDirection(),(i=a(r,n.first(),"start"))&&t.push(i),(o=a(r,n.last(),"end"))&&t.push(o)),t.length||t.push(new validationIssueFix({title:_t("issues.fix.connect_feature.title")})),t.push(new validationIssueFix({icon:"iD-operation-delete",title:_t("issues.fix.delete_feature.title"),entityIds:[n.id],onClick:function(e){var t=operationDelete(e,[this.issue.entityIds[0]]);t.disabled()||t()}}))):t.push(new validationIssueFix({title:_t("issues.fix.connect_features.title")}))}return t}})]:[];function c(e){return"elevator"===e.tags.highway}function u(t,n){return r(t)||"ferry"===t.tags.route||l.parentRelations(t).some(function(e){return"route"===e.tags.type&&"ferry"===e.tags.route||(!(!e.isMultipolygon()||!r(e)||n&&"inner"===e.memberById(t.id).role)||void 0)})}function a(e,t,n){var r=l.hasEntity(t);return r&&"yes"!==r.tags.noexit?new validationIssueFix({icon:"iD-operation-continue"+("start"===n&&"ltr"===e||"end"===n&&"rtl"===e?"-left":""),title:_t("issues.fix.continue_from_"+n+".title"),entityIds:[t],onClick:function(e){var t,n=this.issue.entityIds[0],r=e.hasEntity(n),i=this.entityIds[0],o=e.hasEntity(i);r&&o&&(t=e.map(),e.editable()&&t.trimmedExtent().contains(o.loc)||t.zoomToEase(o),e.enter(modeDrawLine(e,n,e.graph(),"line",r.affix(i),!0)))}}):null}}return e.type=n,e}function validationFormatting(){function e(e){var n,t=[];return!e.tags.email||(n=e.tags.email.split(";").map(function(e){return e.trim()}).filter(function(e){return!(!(t=e)||/^[^\(\)\\,":;<>@\[\]]+@[^\(\)\\,":;<>@\[\]\.]+(?:\.[a-z0-9-]+)*$/i.test(t));var t})).length&&t.push(new validationIssue({type:r,subtype:"email",severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]);return t?_t("issues.invalid_format.email.message"+this.data,{feature:utilDisplayLabel(t,e.graph()),email:n.join(", ")}):""},reference:function(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.invalid_format.email.reference"))},entityIds:[e.id],hash:n.join(),data:1<n.length?"_multi":""})),t}var r="invalid_format";return e.type=r,e}function validationHelpRequest(n){function e(e){if(!e.tags.fixme)return[];if(void 0===e.version)return[];if(void 0!==e.v){var t=n.history().base().hasEntity(e.id);if(!t||!t.tags.fixme)return[]}return[new validationIssue({type:r,subtype:"fixme_tag",severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]);return t?_t("issues.fixme_tag.message",{feature:utilDisplayLabel(t,e.graph())}):""},dynamicFixes:function(){return[new validationIssueFix({title:_t("issues.fix.address_the_concern.title")})]},reference:function(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.fixme_tag.reference"))},entityIds:[e.id]})]}var r="help_request";return e.type=r,e}function validationImpossibleOneway(){function e(e,d){if("way"!==e.type||"line"!==e.geometry(d))return[];if(e.isClosed())return[];if(!f(e))return[];if(!h(e))return[];var t=r(e,e.first()),n=r(e,e.last());return t.concat(n);function f(e){return"line"!==e.geometry(d)?null:osmRoutableHighwayTagValues[e.tags.highway]?"highway":osmFlowingWaterwayTagValues[e.tags.waterway]?"waterway":null}function h(e){if("yes"===e.tags.oneway)return!0;if(e.tags.oneway)return!1;for(var t in e.tags)if(osmOneWayTags[t]&&osmOneWayTags[t][e.tags[t]])return!0;return!1}function g(e,t){var n=0;for(var r in e.nodes)if(e.nodes[r]===t&&1<(n+=1))return 1}function r(r,t){var i=t===r.first(),n=f(r);if(g(r,t))return[];var e=services.osm;if(!e)return[];var o=d.hasEntity(t);if(!o||!e.isDataLoaded(o.loc))return[];if(function(t,e){var n=f(t);if("highway"===n){if(e.tags.entrance&&"no"!==e.tags.entrance)return 1;if("parking_entrance"===e.tags.amenity)return 1}else if("waterway"===n)if(e.id===t.first()){if("spring"===e.tags.natural)return 1}else if("drain"===e.tags.manhole)return 1;return d.parentWays(e).some(function(e){return e.id!==t.id&&("highway"===n?!("area"!==e.geometry(d)||!osmRoutableHighwayTagValues[e.tags.highway])||("ferry"===e.tags.route||d.parentRelations(e).some(function(e){return"route"===e.tags.type&&"ferry"===e.tags.route||e.isMultipolygon()&&osmRoutableHighwayTagValues[e.tags.highway]})):"waterway"===n&&("water"===e.tags.natural||"coastline"===e.tags.natural))})}(r,o))return[];var a=d.parentWays(o).filter(function(e){return e.id!==r.id&&f(e)===n});if("waterway"===n&&0===a.length)return[];var s=a.filter(h);if(s.length<a.length)return[];if(s.length&&s.some(function(e){return(i?e.first():e.last())!==t||!!g(e,t)}))return[];var l,c=i?"start":"end",u=n+".",p=n+".";return"waterway"===n?(u+="connected."+c,p+="connected"):(u+=c,p+=c),[new validationIssue({type:m,subtype:n,severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]);return t?_t("issues.impossible_oneway."+u+".message",{feature:utilDisplayLabel(t,e.graph())}):""},reference:(l=p,function(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.impossible_oneway."+l+".reference"))}),entityIds:[r.id,o.id],dynamicFixes:function(){var e,t,n=[];return s.length&&n.push(new validationIssueFix({icon:"iD-operation-reverse",title:_t("issues.fix.reverse_feature.title"),entityIds:[r.id],onClick:function(e){var t=this.issue.entityIds[0];e.perform(actionReverse(t),_t("operations.reverse.annotation"))}})),"yes"!==o.tags.noexit&&(e=_mainLocalizer.textDirection(),t=i&&"ltr"===e||!i&&"rtl"===e,n.push(new validationIssueFix({icon:"iD-operation-continue"+(t?"-left":""),title:_t("issues.fix.continue_from_"+(i?"start":"end")+".title"),onClick:function(e){var t=this.issue.entityIds[0],n=this.issue.entityIds[1];!function(e,t,n){var r=n.map();n.editable()&&r.trimmedExtent().contains(t.loc)||r.zoomToEase(t);n.enter(modeDrawLine(n,e.id,n.graph(),"line",e.affix(t.id),!0))}(e.entity(t),e.entity(n),e)}}))),n},loc:o.loc})]}}var m="impossible_oneway";return e.type=m,e}function validationIncompatibleSource(){function e(e){var r=e.tags&&e.tags.source&&e.tags.source.split(";");if(!r)return[];var i=[];return t.forEach(function(n){var t;r.some(function(e){return!!e.match(new RegExp(n.regex,"i"))&&(!n.exceptRegex||!e.match(new RegExp(n.exceptRegex,"i")))})&&i.push(new validationIssue({type:o,severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]);return t?_t("issues.incompatible_source."+n.id+".feature.message",{feature:utilDisplayLabel(t,e.graph())}):""},reference:(t=n.id,function(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.incompatible_source."+t+".reference"))}),entityIds:[e.id],dynamicFixes:function(){return[new validationIssueFix({title:_t("issues.fix.remove_proprietary_data.title")})]}}))}),i}var o="incompatible_source",t=[{id:"google",regex:"google",exceptRegex:"books.google|Google Books|drive.google|googledrive|Google Drive"}];return e.type=o,e}function validationMaprules(){function e(e,t){if(!services.maprules)return[];for(var n=services.maprules.validationRules(),r=[],i=0;i<n.length;i++){n[i].findIssues(e,t,r)}return r}return e.type="maprules",e}function validationMismatchedGeometry(){var l="mismatched_geometry";function n(e){var o=function(e){if("way"!==e.type||e.isClosed())return null;var t=e.tagSuggestingArea();if(!t)return null;var n=_mainPresetIndex.matchTags(t,"line"),r=_mainPresetIndex.matchTags(t,"area");return n&&r&&n===r?null:t}(e);return o?new validationIssue({type:l,subtype:"area_as_line",severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]);return t?_t("issues.tag_suggests_area.message",{feature:utilDisplayLabel(t,e.graph()),tag:utilTagText({tags:o})}):""},reference:function(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.tag_suggests_area.reference"))},entityIds:[e.id],hash:JSON.stringify(o),dynamicFixes:function(e){var t=[],n=function(e,t){if(e.nodes.length<3)return null;var n,r=t.childNodes(e);return geoSphericalDistance(r[0].loc,r[r.length-1].loc)<.75&&((n=r.slice()).pop(),n.push(n[0]),!geoHasSelfIntersections(n,n[0].id))?function(e){var t=e.entity(this.issue.entityIds[0]);e.perform(actionMergeNodes([t.nodes[0],t.nodes[t.nodes.length-1]],r[0].loc),_t("issues.fix.connect_endpoints.annotation"))}:((n=r.slice()).push(n[0]),geoHasSelfIntersections(n,n[0].id)?void 0:function(e){var t=this.issue.entityIds[0],n=e.entity(t),r=n.nodes[0],i=n.nodes.length;e.perform(actionAddVertex(t,r,i),_t("issues.fix.connect_endpoints.annotation"))})}(e.entity(this.entityIds[0]),e.graph());return t.push(new validationIssueFix({title:_t("issues.fix.connect_endpoints.title"),onClick:n})),t.push(new validationIssueFix({icon:"iD-operation-delete",title:_t("issues.fix.remove_tag.title"),onClick:function(e){var t=this.issue.entityIds[0],n=e.entity(t),r=Object.assign({},n.tags);for(var i in o)delete r[i];e.perform(actionChangeTags(t,r),_t("issues.fix.remove_tag.annotation"))}})),t}}):null}function e(e,t){return[function(e,t){if("node"!==e.type)return null;if(0===Object.keys(e.tags).length)return null;if(e.isOnAddressLine(t))return null;var n=e.geometry(t),r=osmNodeGeometriesForTags(e.tags);return"point"===n&&!r.point&&r.vertex?new validationIssue({type:l,subtype:"vertex_as_point",severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]);return t?_t("issues.vertex_as_point.message",{feature:utilDisplayLabel(t,e.graph())}):""},reference:function(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.vertex_as_point.reference"))},entityIds:[e.id]}):"vertex"===n&&!r.vertex&&r.point?new validationIssue({type:l,subtype:"point_as_vertex",severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]);return t?_t("issues.point_as_vertex.message",{feature:utilDisplayLabel(t,e.graph())}):""},reference:function(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.point_as_vertex.reference"))},entityIds:[e.id],dynamicFixes:function(e){var t=this.entityIds[0],n=null;return e.hasHiddenConnections(t)||(n=function(e){var t=actionExtract(this.issue.entityIds[0]);e.perform(t,_t("operations.extract.annotation.single")),e.enter(modeSelect(e,[t.getExtractedNodeID()]))}),[new validationIssueFix({icon:"iD-operation-extract",title:_t("issues.fix.extract_point.title"),onClick:n})]}}):null}(e,t),n(e)].concat(function(e,t){if("relation"!==e.type||!e.isMultipolygon()||e.isDegenerate()||!e.isComplete(t))return null;var n=osmJoinWays(e.members,t),r=[];for(var i in n){var o,a=n[i];a.nodes&&a.nodes[0]!==a.nodes[a.nodes.length-1]&&(o=new validationIssue({type:l,subtype:"unclosed_multipolygon_part",severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]);return t?_t("issues.unclosed_multipolygon_part.message",{feature:utilDisplayLabel(t,e.graph())}):""},reference:s,loc:a.nodes[0].loc,entityIds:[e.id],hash:a.map(function(e){return e.id}).join()}),r.push(o))}return r;function s(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.unclosed_multipolygon_part.reference"))}}(e,t)).filter(Boolean)}return e.type=l,e}function validationMissingRole(){function e(n,r){var i=[];return"way"===n.type?r.parentRelations(n).forEach(function(e){var t;!e.isMultipolygon()||(t=e.memberById(n.id))&&o(t)&&i.push(a(n,e,t))}):"relation"===n.type&&n.isMultipolygon()&&n.indexedMembers().forEach(function(e){var t=r.hasEntity(e.id);t&&o(e)&&i.push(a(t,n,e))}),i}var r="missing_role";function o(e){return!e.role||!e.role.trim().length}function a(e,t,n){return new validationIssue({type:r,severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[1]),n=e.hasEntity(this.entityIds[0]);return t&&n?_t("issues.missing_role.message",{member:utilDisplayLabel(t,e.graph()),relation:utilDisplayLabel(n,e.graph())}):""},reference:function(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.missing_role.multipolygon.reference"))},entityIds:[t.id,e.id],data:{member:n},hash:n.index.toString(),dynamicFixes:function(){return[i("inner"),i("outer"),new validationIssueFix({icon:"iD-operation-delete",title:_t("issues.fix.remove_from_relation.title"),onClick:function(e){e.perform(actionDeleteMember(this.issue.entityIds[0],this.issue.data.member.index),_t("operations.delete_member.annotation"))}})]}})}function i(r){return new validationIssueFix({title:_t("issues.fix.set_as_"+r+".title"),onClick:function(e){var t=this.issue.data.member,n={id:this.issue.entityIds[1],type:t.type,role:r};e.perform(actionChangeMember(this.issue.entityIds[0],n,t.index),_t("operations.change_role.annotation"))}})}return e.type=r,e}function validationMissingTag(d){var f="missing_tag";function e(e,t){var o,n,r,i,a,s,l=d.connection();if("node"===e.type&&l&&!l.isDataLoaded(e.loc)||"vertex"===e.geometry(t)||e.hasParentRelations(t)||(0===Object.keys(e.tags).length?o="any":(r=e,i=t,a=Object.keys(r.tags).filter(function(e){return"area"!==e&&"name"!==e&&osmIsInterestingTag(e)}),("relation"===r.type&&1===a.length&&"multipolygon"===r.tags.type?osmOldMultipolygonOuterMemberOfRelation(r,i):0<a.length)?"relation"!==(n=e).type||n.tags.type||(o="relation_type"):o="descriptive")),o||("way"!==(s=e).type||"road"!==s.tags.highway)||(o="highway_classification"),!o)return[];var c="highway_classification"===o?"unknown_road":"missing_tag."+o,u="highway_classification"===o?"unknown_road":"missing_tag",p=void 0===e.version||void 0!==e.v;return[new validationIssue({type:f,subtype:o,severity:p&&"highway_classification"!==o?"error":"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]);return t?_t("issues."+c+".message",{feature:utilDisplayLabel(t,e.graph())}):""},reference:function(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues."+u+".reference"))},entityIds:[e.id],dynamicFixes:function(e){var t,n=[],r="highway_classification"===o?"select_road_type":"select_preset";n.push(new validationIssueFix({icon:"iD-icon-search",title:_t("issues.fix."+r+".title"),onClick:function(e){e.ui().sidebar.showPresetList()}}));var i=operationDelete(e,[this.entityIds[0]]).disabled();return i||(t=function(e){var t=operationDelete(e,[this.issue.entityIds[0]]);t.disabled()||t()}),n.push(new validationIssueFix({icon:"iD-operation-delete",title:_t("issues.fix.delete_feature.title"),disabledReason:i?_t("operations.delete."+i+".single"):void 0,onClick:t})),n}})]}return e.type=f,e}var simplify=function(e){return diacritics.remove(e.replace(/&/g,"and").replace(/[\s\-=_!"#%'*{},.\/:;?\(\)\[\]@\\$\^*+<>~`’\u00a1\u00a7\u00b6\u00b7\u00bf\u037e\u0387\u055a-\u055f\u0589\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c\u060d\u061b\u061e\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0830-\u083e\u085e\u0964\u0965\u0970\u0af0\u0df4\u0e4f\u0e5a\u0e5b\u0f04-\u0f12\u0f14\u0f85\u0fd0-\u0fd4\u0fd9\u0fda\u104a-\u104f\u10fb\u1360-\u1368\u166d\u166e\u16eb-\u16ed\u1735\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u1805\u1807-\u180a\u1944\u1945\u1a1e\u1a1f\u1aa0-\u1aa6\u1aa8-\u1aad\u1b5a-\u1b60\u1bfc-\u1bff\u1c3b-\u1c3f\u1c7e\u1c7f\u1cc0-\u1cc7\u1cd3\u2016\u2017\u2020-\u2027\u2030-\u2038\u203b-\u203e\u2041-\u2043\u2047-\u2051\u2053\u2055-\u205e\u2cf9-\u2cfc\u2cfe\u2cff\u2d70\u2e00\u2e01\u2e06-\u2e08\u2e0b\u2e0e-\u2e16\u2e18\u2e19\u2e1b\u2e1e\u2e1f\u2e2a-\u2e2e\u2e30-\u2e39\u3001-\u3003\u303d\u30fb\ua4fe\ua4ff\ua60d-\ua60f\ua673\ua67e\ua6f2-\ua6f7\ua874-\ua877\ua8ce\ua8cf\ua8f8-\ua8fa\ua92e\ua92f\ua95f\ua9c1-\ua9cd\ua9de\ua9df\uaa5c-\uaa5f\uaade\uaadf\uaaf0\uaaf1\uabeb\ufe10-\ufe16\ufe19\ufe30\ufe45\ufe46\ufe49-\ufe4c\ufe50-\ufe52\ufe54-\ufe57\ufe5f-\ufe61\ufe68\ufe6a\ufe6b\uff01-\uff03\uff05-\uff07\uff0a\uff0c\uff0e\uff0f\uff1a\uff1b\uff1f\uff20\uff3c\uff61\uff64\uff65]+/g,"").toLowerCase())},to_parts=function(e){var t={},n=(t.kvnd=e).split("~",2);1<n.length&&(t.d=n[1]),t.kvn=n[0];var r=t.kvn.split("|",2);1<r.length&&(t.n=r[1]),t.kv=r[0];var i=t.kv.split("/",2);return t.k=i[0],t.v=i[1],t.nsimple=simplify(t.n),t.kvnsimple=t.kv+"|"+t.nsimple,t},matchGroups={adult_gaming_centre:["amenity/casino","amenity/gambling","leisure/adult_gaming_centre"],beauty:["shop/beauty","shop/hairdresser_supply"],bed:["shop/bed","shop/furniture"],beverages:["shop/alcohol","shop/beverages"],camping:["leisure/park","tourism/camp_site","tourism/caravan_site"],car_parts:["shop/car_parts","shop/car_repair","shop/tires","shop/tyres"],confectionery:["shop/candy","shop/chocolate","shop/confectionery"],convenience:["shop/beauty","shop/chemist","shop/convenience","shop/cosmetics","shop/newsagent"],coworking:["amenity/coworking_space","office/coworking","office/coworking_space"],electronics:["office/telecommunication","shop/computer","shop/electronics","shop/hifi","shop/mobile","shop/mobile_phone","shop/telecommunication"],fashion:["shop/accessories","shop/bag","shop/botique","shop/clothes","shop/department_store","shop/fashion","shop/fashion_accessories","shop/sports","shop/shoes"],financial:["amenity/bank","office/accountant","office/financial","office/financial_advisor","office/tax_advisor","shop/tax"],fitness:["leisure/fitness_centre","leisure/fitness_center","leisure/sports_centre","leisure/sports_center"],food:["amenity/cafe","amenity/fast_food","amenity/ice_cream","amenity/restaurant","shop/bakery","shop/ice_cream","shop/pastry","shop/tea","shop/coffee"],fuel:["amenity/fuel","shop/gas","shop/convenience;gas","shop/gas;convenience"],gift:["shop/gift","shop/card","shop/cards","shop/stationery"],hardware:["shop/carpet","shop/diy","shop/doityourself","shop/doors","shop/electrical","shop/flooring","shop/hardware","shop/power_tools","shop/tool_hire","shop/tools","shop/trade"],health_food:["shop/health","shop/health_food","shop/herbalist","shop/nutrition_supplements"],houseware:["shop/houseware","shop/interior_decoration"],lodging:["tourism/hotel","tourism/motel"],money_transfer:["amenity/money_transfer","shop/money_transfer"],outdoor:["shop/outdoor","shop/sports"],rental:["amenity/bicycle_rental","amenity/boat_rental","amenity/car_rental","amenity/truck_rental","amenity/vehicle_rental","shop/rental"],school:["amenity/childcare","amenity/college","amenity/kindergarten","amenity/language_school","amenity/prep_school","amenity/school","amenity/university"],supermarket:["shop/food","shop/frozen_food","shop/greengrocer","shop/grocery","shop/supermarket","shop/wholesale"],variety_store:["shop/variety_store","shop/supermarket","shop/discount","shop/convenience"],vending:["amenity/vending_machine","shop/vending_machine"],wholesale:["shop/wholesale","shop/supermarket","shop/department_store"]},match_groups={matchGroups:matchGroups},match_groups$1=Object.freeze({__proto__:null,matchGroups:matchGroups,default:match_groups}),require$$0=getCjsExportFromNamespace(match_groups$1),matchGroups$1=require$$0.matchGroups,matcher$1=function(){var s=[],c={},u={},i={buildMatchIndex:function(a){function t(r,i){var e,t,n=a[r],o=to_parts(r);"secondary"===i&&o.d||(n.countryCodes&&(o.countryCodes=n.countryCodes.slice()),(n.nomatch||[]).some(function(e){return e===r})?console.log("WARNING match/nomatch conflict for "+r):(e=[o.kv].concat(n.matchTags||[]).concat([o.k+"/yes","building/yes"]).map(function(e){return e.toLowerCase()}),t=[],"primary"===i?t=[o.n].concat(n.matchNames||[]).concat(n.tags.official_name||[]).map(simplify):"secondary"===i&&(t=[].concat(n.tags.alt_name||[]).concat(n.tags.short_name||[]).map(simplify)),t.length&&e.forEach(function(n){t.forEach(function(e){var t;o.d?(c[n]||(c[n]={}),c[n][e]=o):(u[n]||(u[n]={}),(t=u[n][e])?"primary"!==i||/\/yes$/.test(n)||s.push([t.kvnd,r+" ("+n+"/"+e+")"]):u[n][e]=o)})})))}Object.keys(a).forEach(function(e){return t(e,"primary")}),Object.keys(a).forEach(function(e){return t(e,"secondary")})},matchKVN:function(e,t,n,r){return i.matchParts(to_parts(e+"/"+t+"|"+n),r)},matchParts:function(e,t){var n=null,r=!1;if((n=c[e.kv]&&c[e.kv][e.nsimple])&&l(n))return n;if((n=u[e.kv]&&u[e.kv][e.nsimple])&&l(n))return n;for(var i in matchGroups$1){var o=matchGroups$1[i];n=null,r=!1;for(var a=0;a<o.length;a++){var s=o[a].toLowerCase(),r=r||s===e.kv;if((n=(n=n||c[s]&&c[s][e.nsimple])||u[s]&&u[s][e.nsimple])&&!l(n)&&(n=null),r&&n)return n}}return null;function l(e){return!t||(!e.countryCodes||-1!==e.countryCodes.indexOf(t))}},getWarnings:function(){return s}};return i},quickselect$1=createCommonjsModule(function(e,t){function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function o(e,t){return e<t?-1:t<e?1:0}e.exports=function(e,t,n,r,i){!function e(t,n,r,i,o){for(;r<i;){var a,s,l,c,u,p,d;600<i-r&&(a=i-r+1,s=n-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1),p=Math.max(r,Math.floor(n-s*c/a+u)),d=Math.min(i,Math.floor(n+(a-s)*c/a+u)),e(t,n,p,d,o));var f=t[n],h=r,g=i;for(m(t,r,n),0<o(t[i],f)&&m(t,r,i);h<g;){for(m(t,h,g),h++,g--;o(t[h],f)<0;)h++;for(;0<o(t[g],f);)g--}0===o(t[r],f)?m(t,r,g):m(t,++g,i),g<=n&&(r=g+1),n<=g&&(i=g-1)}}(e,t,n||0,r||e.length-1,i||o)}}),rbush_1=rbush,_default$2=rbush;function rbush(e,t){if(!(this instanceof rbush))return new rbush(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function findItem$1(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function calcBBox$1(e,t){distBBox$1(e,0,e.children.length,t,e)}function distBBox$1(e,t,n,r,i){(i=i||createNode$1(null)).minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=t;a<n;a++)o=e.children[a],extend$3(i,e.leaf?r(o):o);return i}function extend$3(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function compareNodeMinX$1(e,t){return e.minX-t.minX}function compareNodeMinY$1(e,t){return e.minY-t.minY}function bboxArea$1(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function bboxMargin$1(e){return e.maxX-e.minX+(e.maxY-e.minY)}function enlargedArea$1(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function intersectionArea$1(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function contains$2(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function intersects$1(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function createNode$1(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect$1(e,t,n,r,i){for(var o,a=[t,n];a.length;)(n=a.pop())-(t=a.pop())<=r||(o=t+Math.ceil((n-t)/r/2)*r,quickselect$1(e,o,t,n,i),a.push(t,o,o,n))}rbush.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(!intersects$1(e,t))return n;for(var i,o,a,s,l=[];t;){for(i=0,o=t.children.length;i<o;i++)a=t.children[i],intersects$1(e,s=t.leaf?r(a):a)&&(t.leaf?n.push(a):contains$2(e,s)?this._all(a,n):l.push(a));t=l.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!intersects$1(e,t))return!1;for(var r,i,o,a,s=[];t;){for(r=0,i=t.children.length;r<i;r++)if(o=t.children[r],intersects$1(e,a=t.leaf?n(o):o)){if(t.leaf||contains$2(e,a))return!0;s.push(o)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r,i=this._build(e.slice(),0,e.length-1,0);return this.data.children.length?this.data.height===i.height?this._splitRoot(this.data,i):(this.data.height<i.height&&(r=this.data,this.data=i,i=r),this._insert(i,this.data.height-i.height-1,!0)):this.data=i,this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=createNode$1([]),this},remove:function(e,t){if(!e)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(e),l=[],c=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=c.pop(),o=!0),a.leaf&&-1!==(i=findItem$1(e,a.children,t)))return a.children.splice(i,1),l.push(a),this._condense(l),this;o||a.leaf||!contains$2(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),c.push(n),n=0,a=(r=a).children[0])}return this},toBBox:function(e){return e},compareMinX:compareNodeMinX$1,compareMinY:compareNodeMinY$1,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,r){var i,o=n-t+1,a=this._maxEntries;if(o<=a)return calcBBox$1(i=createNode$1(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=createNode$1([])).leaf=!1,i.height=r;var s,l,c,u,p=Math.ceil(o/a),d=p*Math.ceil(Math.sqrt(a));for(multiSelect$1(e,t,n,d,this.compareMinX),s=t;s<=n;s+=d)for(multiSelect$1(e,s,c=Math.min(s+d-1,n),p,this.compareMinY),l=s;l<=c;l+=p)u=Math.min(l+p-1,c),i.children.push(this._build(e,l,u,r-1));return calcBBox$1(i,this.toBBox),i},_chooseSubtree:function(e,t,n,r){for(var i,o,a,s,l,c,u,p;r.push(t),!t.leaf&&r.length-1!==n;){for(u=p=1/0,i=0,o=t.children.length;i<o;i++)l=bboxArea$1(a=t.children[i]),(c=enlargedArea$1(e,a)-l)<p?(p=c,u=l<u?l:u,s=a):c===p&&l<u&&(u=l,s=a);t=s||t.children[0]}return t},_insert:function(e,t,n){var r=this.toBBox,i=n?e:r(e),o=[],a=this._chooseSubtree(i,this.data,t,o);for(a.children.push(e),extend$3(a,i);0<=t&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(i,o,t)},_split:function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=createNode$1(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,calcBBox$1(n,this.toBBox),calcBBox$1(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(e,t){this.data=createNode$1([e,t]),this.data.height=e.height+1,this.data.leaf=!1,calcBBox$1(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){for(var r,i,o,a,s,l,c=s=1/0,u=t;u<=n-t;u++)o=intersectionArea$1(r=distBBox$1(e,0,u,this.toBBox),i=distBBox$1(e,u,n,this.toBBox)),a=bboxArea$1(r)+bboxArea$1(i),o<c?(c=o,l=u,s=a<s?a:s):o===c&&a<s&&(s=a,l=u);return l},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:compareNodeMinX$1,i=e.leaf?this.compareMinY:compareNodeMinY$1;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);for(var i,o=this.toBBox,a=distBBox$1(e,0,t,o),s=distBBox$1(e,n-t,n,o),l=bboxMargin$1(a)+bboxMargin$1(s),c=t;c<n-t;c++)i=e.children[c],extend$3(a,e.leaf?o(i):i),l+=bboxMargin$1(a);for(c=n-t-1;t<=c;c--)i=e.children[c],extend$3(s,e.leaf?o(i):i),l+=bboxMargin$1(s);return l},_adjustParentBBoxes:function(e,t,n){for(var r=n;0<=r;r--)extend$3(t[r],e)},_condense:function(e){for(var t,n=e.length-1;0<=n;n--)0===e[n].children.length?0<n?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():calcBBox$1(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}},rbush_1.default=_default$2;var lineclip_1$1=lineclip$1;function lineclip$1(e,t,n){var r,i,o,a,s,l=e.length,c=bitCode$1(e[0],t),u=[];for(n=n||[],r=1;r<l;r++){for(i=e[r-1],a=s=bitCode$1(o=e[r],t);;){if(!(c|a)){u.push(i),a!==s?(u.push(o),r<l-1&&(n.push(u),u=[])):r===l-1&&u.push(o);break}if(c&a)break;c?c=bitCode$1(i=intersect$1(i,o,c,t),t):a=bitCode$1(o=intersect$1(i,o,a,t),t)}c=s}return u.length&&n.push(u),n}function polygonclip$1(e,t){for(var n,r,i,o,a,s,l=1;l<=8;l*=2){for(n=[],i=!(bitCode$1(r=e[e.length-1],t)&l),o=0;o<e.length;o++)(s=!(bitCode$1(a=e[o],t)&l))!==i&&n.push(intersect$1(r,a,l,t)),s&&n.push(a),r=a,i=s;if(!(e=n).length)break}return n}function intersect$1(e,t,n,r){return 8&n?[e[0]+(t[0]-e[0])*(r[3]-e[1])/(t[1]-e[1]),r[3]]:4&n?[e[0]+(t[0]-e[0])*(r[1]-e[1])/(t[1]-e[1]),r[1]]:2&n?[r[2],e[1]+(t[1]-e[1])*(r[2]-e[0])/(t[0]-e[0])]:1&n?[r[0],e[1]+(t[1]-e[1])*(r[0]-e[0])/(t[0]-e[0])]:null}function bitCode$1(e,t){var n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}lineclip$1.polyline=lineclip$1,lineclip$1.polygon=polygonclip$1;var whichPolygon_1=whichPolygon;function whichPolygon(e){for(var t=[],n=0;n<e.features.length;n++){var r=e.features[n],i=r.geometry.coordinates;if("Polygon"===r.geometry.type)t.push(treeItem(i,r.properties));else if("MultiPolygon"===r.geometry.type)for(var o=0;o<i.length;o++)t.push(treeItem(i[o],r.properties))}var a=rbush_1().load(t);function s(e,t){for(var n=[],r=a.search({minX:e[0],minY:e[1],maxX:e[0],maxY:e[1]}),i=0;i<r.length;i++)if(insidePolygon(r[i].coords,e)){if(!t)return r[i].props;n.push(r[i].props)}return t&&n.length?n:null}return s.tree=a,s.bbox=function(e){for(var t=[],n=a.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),r=0;r<n.length;r++)polygonIntersectsBBox(n[r].coords,e)&&t.push(n[r].props);return t},s}function polygonIntersectsBBox(e,t){if(insidePolygon(e,[(t[0]+t[2])/2,(t[1]+t[3])/2]))return 1;for(var n=0;n<e.length;n++)if(0<lineclip_1$1(e[n],t).length)return 1}function insidePolygon(e,t){for(var n=!1,r=0,i=e.length;r<i;r++)for(var o=e[r],a=0,s=o.length,l=s-1;a<s;l=a++)rayIntersect(t,o[a],o[l])&&(n=!n);return n}function rayIntersect(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function treeItem(e,t){for(var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,coords:e,props:t},r=0;r<e[0].length;r++){var i=e[0][r];n.minX=Math.min(n.minX,i[0]),n.minY=Math.min(n.minY,i[1]),n.maxX=Math.max(n.maxX,i[0]),n.maxY=Math.max(n.maxY,i[1])}return n}var type="FeatureCollection",features=[{type:"Feature",properties:{m49:"680",wikidata:"Q3405693",nameEn:"Sark",country:"GB",groups:["GG","830","154","150"],level:"subterritory",driveSide:"left",roadSpeedUnit:"mph",callingCodes:["44 01481"]},geometry:{type:"MultiPolygon",coordinates:[[[[-2.36485,49.48223],[-2.65349,49.15373],[-2.09454,49.46288],[-2.36485,49.48223]]]]}},{type:"Feature",properties:{m49:"001",wikidata:"Q2",nameEn:"World",aliases:["Earth","Planet"],level:"world"},geometry:null},{type:"Feature",properties:{m49:"142",wikidata:"Q48",nameEn:"Asia",level:"region"},geometry:null},{type:"Feature",properties:{m49:"143",wikidata:"Q27275",nameEn:"Central Asia",groups:["142"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"145",wikidata:"Q27293",nameEn:"Western Asia",groups:["142"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"150",wikidata:"Q46",nameEn:"Europe",level:"region"},geometry:null},{type:"Feature",properties:{m49:"151",wikidata:"Q27468",nameEn:"Eastern Europe",groups:["150"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"154",wikidata:"Q27479",nameEn:"Northern Europe",groups:["150"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"155",wikidata:"Q27496",nameEn:"Western Europe",groups:["150"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"202",wikidata:"Q132959",nameEn:"Sub-Saharan Africa",groups:["002"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"419",wikidata:"Q72829598",nameEn:"Latin America and the Caribbean",groups:["019"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"830",wikidata:"Q42314",nameEn:"Channel Islands",groups:["150","154"],level:"intermediateRegion"},geometry:null},{type:"Feature",properties:{m49:"019",wikidata:"Q828",nameEn:"Americas",level:"region"},geometry:null},{type:"Feature",properties:{m49:"029",wikidata:"Q664609",nameEn:"Caribbean",groups:["419","019","003"],level:"intermediateRegion"},geometry:null},{type:"Feature",properties:{m49:"034",wikidata:"Q771405",nameEn:"Southern Asia",groups:["142"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"002",wikidata:"Q15",nameEn:"Africa",level:"region"},geometry:null},{type:"Feature",properties:{m49:"003",wikidata:"Q49",nameEn:"North America",groups:["019"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"017",wikidata:"Q27433",nameEn:"Middle Africa",groups:["202","002"],level:"intermediateRegion"},geometry:null},{type:"Feature",properties:{m49:"039",wikidata:"Q27449",nameEn:"Southern Europe",groups:["150"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"005",wikidata:"Q18",nameEn:"South America",groups:["419","019"],level:"intermediateRegion"},geometry:null},{type:"Feature",properties:{m49:"009",wikidata:"Q538",nameEn:"Oceania",level:"region"},geometry:null},{type:"Feature",properties:{m49:"061",wikidata:"Q35942",nameEn:"Polynesia",groups:["009"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"014",wikidata:"Q27407",nameEn:"Eastern Africa",groups:["202","002"],level:"intermediateRegion"},geometry:null},{type:"Feature",properties:{m49:"053",wikidata:"Q45256",nameEn:"Australia and New Zealand",aliases:["Australasia"],groups:["009"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"011",wikidata:"Q4412",nameEn:"Western Africa",groups:["202","002"],level:"intermediateRegion"},geometry:null},{type:"Feature",properties:{m49:"013",wikidata:"Q27611",nameEn:"Central America",groups:["419","019","003"],level:"intermediateRegion"},geometry:null},{type:"Feature",properties:{m49:"021",wikidata:"Q2017699",nameEn:"Northern America",groups:["019","003"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"035",wikidata:"Q11708",nameEn:"South-eastern Asia",groups:["142"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"018",wikidata:"Q27394",nameEn:"Southern Africa",groups:["202","002"],level:"intermediateRegion"},geometry:null},{type:"Feature",properties:{m49:"030",wikidata:"Q27231",nameEn:"Eastern Asia",groups:["142"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"015",wikidata:"Q27381",nameEn:"Northern Africa",groups:["002"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"054",wikidata:"Q37394",nameEn:"Melanesia",groups:["009"],level:"subregion"},geometry:null},{type:"Feature",properties:{m49:"057",wikidata:"Q3359409",nameEn:"Micronesia",groups:["009"],level:"subregion"},geometry:null},{type:"Feature",properties:{iso1A2:"AC",iso1A3:"ASC",wikidata:"Q46197",nameEn:"Ascension Island",country:"GB",groups:["SH","011","202","002"],isoStatus:"excRes",driveSide:"left",roadSpeedUnit:"mph",callingCodes:["247"]},geometry:{type:"MultiPolygon",coordinates:[[[[-14.82771,-8.70814],[-13.33271,-8.07391],[-14.91926,-6.63386],[-14.82771,-8.70814]]]]}},{type:"Feature",properties:{iso1A2:"AD",iso1A3:"AND",iso1N3:"020",wikidata:"Q228",nameEn:"Andorra",groups:["039","150"],callingCodes:["376"]},geometry:{type:"MultiPolygon",coordinates:[[[[1.72515,42.50338],[1.73683,42.55492],[1.7858,42.57698],[1.72588,42.59098],[1.73452,42.61515],[1.68267,42.62533],[1.6625,42.61982],[1.63485,42.62957],[1.60085,42.62703],[1.55418,42.65669],[1.50867,42.64483],[1.48043,42.65203],[1.46718,42.63296],[1.47986,42.61346],[1.44197,42.60217],[1.42512,42.58292],[1.44529,42.56722],[1.4234,42.55959],[1.41245,42.53539],[1.44759,42.54431],[1.46661,42.50949],[1.41648,42.48315],[1.43838,42.47848],[1.44529,42.43724],[1.5127,42.42959],[1.55073,42.43299],[1.55937,42.45808],[1.57953,42.44957],[1.58933,42.46275],[1.65674,42.47125],[1.66826,42.50779],[1.70571,42.48867],[1.72515,42.50338]]]]}},{type:"Feature",properties:{iso1A2:"AE",iso1A3:"ARE",iso1N3:"784",wikidata:"Q878",nameEn:"United Arab Emirates",groups:["145","142"],callingCodes:["971"]},geometry:{type:"MultiPolygon",coordinates:[[[[56.26534,25.62825],[56.25341,25.61443],[56.26636,25.60643],[56.25365,25.60211],[56.20473,25.61119],[56.18363,25.65508],[56.14826,25.66351],[56.13579,25.73524],[56.17416,25.77239],[56.13963,25.82765],[56.19334,25.9795],[56.15498,26.06828],[56.08666,26.05038],[55.81777,26.18798],[55.14145,25.62624],[53.97892,24.64436],[52.82259,25.51697],[52.35509,25.00368],[52.02277,24.75635],[51.83108,24.71675],[51.58834,24.66608],[51.41644,24.39615],[51.58871,24.27256],[51.59617,24.12041],[52.56622,22.94341],[55.13599,22.63334],[55.2137,22.71065],[55.22634,23.10378],[55.57358,23.669],[55.48677,23.94946],[55.73301,24.05994],[55.8308,24.01633],[56.01799,24.07426],[55.95472,24.2172],[55.83367,24.20193],[55.77658,24.23476],[55.76558,24.23227],[55.75257,24.23466],[55.75382,24.2466],[55.75939,24.26114],[55.76781,24.26209],[55.79145,24.27914],[55.80747,24.31069],[55.83395,24.32776],[55.83271,24.41521],[55.76461,24.5287],[55.83271,24.68567],[55.83408,24.77858],[55.81348,24.80102],[55.81116,24.9116],[55.85094,24.96858],[55.90849,24.96771],[55.96316,25.00857],[56.05715,24.95727],[56.05106,24.87461],[55.97467,24.89639],[55.97836,24.87673],[56.03535,24.81161],[56.06128,24.74457],[56.13684,24.73699],[56.20062,24.78565],[56.20568,24.85063],[56.30269,24.88334],[56.34873,24.93205],[56.3227,24.97284],[56.86325,25.03856],[56.82555,25.7713],[56.26534,25.62825]],[[56.26062,25.33108],[56.3005,25.31815],[56.3111,25.30107],[56.35172,25.30681],[56.34438,25.26653],[56.27628,25.23404],[56.24341,25.22867],[56.20872,25.24104],[56.20838,25.25668],[56.24465,25.27505],[56.25008,25.28843],[56.23362,25.31253],[56.26062,25.33108]]],[[[56.28423,25.26344],[56.29379,25.2754],[56.28102,25.28486],[56.2716,25.27916],[56.27086,25.26128],[56.28423,25.26344]]]]}},{type:"Feature",properties:{iso1A2:"AF",iso1A3:"AFG",iso1N3:"004",wikidata:"Q889",nameEn:"Afghanistan",groups:["034","142"],callingCodes:["93"]},geometry:{type:"MultiPolygon",coordinates:[[[[70.61526,38.34774],[70.60407,38.28046],[70.54673,38.24541],[70.4898,38.12546],[70.17206,37.93276],[70.1863,37.84296],[70.27694,37.81258],[70.28243,37.66706],[70.15015,37.52519],[69.95971,37.5659],[69.93362,37.61378],[69.84435,37.60616],[69.80041,37.5746],[69.51888,37.5844],[69.44954,37.4869],[69.36645,37.40462],[69.45022,37.23315],[69.39529,37.16752],[69.25152,37.09426],[69.03274,37.25174],[68.96407,37.32603],[68.88168,37.33368],[68.91189,37.26704],[68.80889,37.32494],[68.81438,37.23862],[68.6798,37.27906],[68.61851,37.19815],[68.41888,37.13906],[68.41201,37.10402],[68.29253,37.10621],[68.27605,37.00977],[68.18542,37.02074],[68.02194,36.91923],[67.87917,37.0591],[67.7803,37.08978],[67.78329,37.1834],[67.51868,37.26102],[67.2581,37.17216],[67.2224,37.24545],[67.13039,37.27168],[67.08232,37.35469],[66.95598,37.40162],[66.64699,37.32958],[66.55743,37.35409],[66.30993,37.32409],[65.72274,37.55438],[65.64137,37.45061],[65.64263,37.34388],[65.51778,37.23881],[64.97945,37.21913],[64.61141,36.6351],[64.62514,36.44311],[64.57295,36.34362],[64.43288,36.24401],[64.05385,36.10433],[63.98519,36.03773],[63.56496,35.95106],[63.53475,35.90881],[63.29579,35.85985],[63.12276,35.86208],[63.10318,35.81782],[63.23262,35.67487],[63.10079,35.63024],[63.12276,35.53196],[63.0898,35.43131],[62.90853,35.37086],[62.74098,35.25432],[62.62288,35.22067],[62.48006,35.28796],[62.29878,35.13312],[62.29191,35.25964],[62.15871,35.33278],[62.05709,35.43803],[61.97743,35.4604],[61.77693,35.41341],[61.58742,35.43803],[61.27371,35.61482],[61.18187,35.30249],[61.0991,35.27845],[61.12831,35.09938],[61.06926,34.82139],[61.00197,34.70631],[60.99922,34.63064],[60.72316,34.52857],[60.91321,34.30411],[60.66502,34.31539],[60.50209,34.13992],[60.5838,33.80793],[60.5485,33.73422],[60.57762,33.59772],[60.69573,33.56054],[60.91133,33.55596],[60.88908,33.50219],[60.56485,33.12944],[60.86191,32.22565],[60.84541,31.49561],[61.70929,31.37391],[61.80569,31.16167],[61.80957,31.12576],[61.83257,31.0452],[61.8335,30.97669],[61.78268,30.92724],[61.80829,30.84224],[60.87231,29.86514],[62.47751,29.40782],[63.5876,29.50456],[64.12966,29.39157],[64.19796,29.50407],[64.62116,29.58903],[65.04005,29.53957],[66.24175,29.85181],[66.36042,29.9583],[66.23609,30.06321],[66.34869,30.404],[66.28413,30.57001],[66.39194,30.9408],[66.42645,30.95309],[66.58175,30.97532],[66.68166,31.07597],[66.72561,31.20526],[66.83273,31.26867],[67.04147,31.31561],[67.03323,31.24519],[67.29964,31.19586],[67.78854,31.33203],[67.7748,31.4188],[67.62374,31.40473],[67.58323,31.52772],[67.72056,31.52304],[67.86887,31.63536],[68.00071,31.6564],[68.1655,31.82691],[68.25614,31.80357],[68.27605,31.75863],[68.44222,31.76446],[68.57475,31.83158],[68.6956,31.75687],[68.79997,31.61665],[68.91078,31.59687],[68.95995,31.64822],[69.00939,31.62249],[69.11514,31.70782],[69.20577,31.85957],[69.3225,31.93186],[69.27032,32.14141],[69.27932,32.29119],[69.23599,32.45946],[69.2868,32.53938],[69.38155,32.56601],[69.44747,32.6678],[69.43649,32.7302],[69.38018,32.76601],[69.47082,32.85834],[69.5436,32.8768],[69.49854,32.88843],[69.49004,33.01509],[69.57656,33.09911],[69.71526,33.09911],[69.79766,33.13247],[69.85259,33.09451],[70.02563,33.14282],[70.07369,33.22557],[70.13686,33.21064],[70.32775,33.34496],[70.17062,33.53535],[70.20141,33.64387],[70.14785,33.6553],[70.14236,33.71701],[70.00503,33.73528],[69.85671,33.93719],[69.87307,33.9689],[69.90203,34.04194],[70.54336,33.9463],[70.88119,33.97933],[71.07345,34.06242],[71.06933,34.10564],[71.09307,34.11961],[71.09453,34.13524],[71.13078,34.16503],[71.12815,34.26619],[71.17662,34.36769],[71.02401,34.44835],[71.0089,34.54568],[71.11602,34.63047],[71.08718,34.69034],[71.28356,34.80882],[71.29472,34.87728],[71.50329,34.97328],[71.49917,35.00478],[71.55273,35.02615],[71.52938,35.09023],[71.67495,35.21262],[71.5541,35.28776],[71.54294,35.31037],[71.65435,35.4479],[71.49917,35.6267],[71.55273,35.71483],[71.37969,35.95865],[71.19505,36.04134],[71.60491,36.39429],[71.80267,36.49924],[72.18135,36.71838],[72.6323,36.84601],[73.82685,36.91421],[74.04856,36.82648],[74.43389,37.00977],[74.53739,36.96224],[74.56453,37.03023],[74.49981,37.24518],[74.80605,37.21565],[74.88887,37.23275],[74.8294,37.3435],[74.68383,37.3948],[74.56161,37.37734],[74.41055,37.3948],[74.23339,37.41116],[74.20308,37.34208],[73.8564,37.26158],[73.82552,37.22659],[73.64974,37.23643],[73.61129,37.27469],[73.76647,37.33913],[73.77197,37.4417],[73.29633,37.46495],[73.06884,37.31729],[72.79693,37.22222],[72.66381,37.02014],[72.54095,37.00007],[72.31676,36.98115],[71.83229,36.68084],[71.67083,36.67346],[71.57195,36.74943],[71.51502,36.89128],[71.48481,36.93218],[71.46923,36.99925],[71.45578,37.03094],[71.43097,37.05855],[71.44127,37.11856],[71.4494,37.18137],[71.4555,37.21418],[71.47386,37.2269],[71.48339,37.23937],[71.4824,37.24921],[71.48536,37.26017],[71.50674,37.31502],[71.49821,37.31975],[71.4862,37.33405],[71.47685,37.40281],[71.49612,37.4279],[71.5256,37.47971],[71.50616,37.50733],[71.49693,37.53527],[71.5065,37.60912],[71.51972,37.61945],[71.54186,37.69691],[71.55234,37.73209],[71.53053,37.76534],[71.54324,37.77104],[71.55752,37.78677],[71.59255,37.79956],[71.58843,37.92425],[71.51565,37.95349],[71.32871,37.88564],[71.296,37.93403],[71.2809,37.91995],[71.24969,37.93031],[71.27278,37.96496],[71.27622,37.99946],[71.28922,38.01272],[71.29878,38.04429],[71.36444,38.15358],[71.37803,38.25641],[71.33869,38.27335],[71.33114,38.30339],[71.21291,38.32797],[71.1451,38.40106],[71.10957,38.40671],[71.10592,38.42077],[71.09542,38.42517],[71.0556,38.40176],[71.03545,38.44779],[70.98693,38.48862],[70.92728,38.43021],[70.88719,38.46826],[70.84376,38.44688],[70.82538,38.45394],[70.81697,38.44507],[70.80521,38.44447],[70.79766,38.44944],[70.78702,38.45031],[70.78581,38.45502],[70.77132,38.45548],[70.75455,38.4252],[70.72485,38.4131],[70.69807,38.41861],[70.67438,38.40597],[70.6761,38.39144],[70.69189,38.37031],[70.64966,38.34999],[70.61526,38.34774]]]]}},{type:"Feature",properties:{iso1A2:"AG",iso1A3:"ATG",iso1N3:"028",wikidata:"Q781",nameEn:"Antigua and Barbuda",groups:["029","003","419","019"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["1 268"]},geometry:{type:"MultiPolygon",coordinates:[[[[-62.12601,17.9235],[-62.27053,17.22145],[-62.62949,16.82364],[-62.52079,16.69392],[-62.14123,17.02632],[-61.83929,16.66647],[-61.44461,16.81958],[-61.45764,17.9187],[-62.12601,17.9235]]]]}},{type:"Feature",properties:{iso1A2:"AI",iso1A3:"AIA",iso1N3:"660",wikidata:"Q25228",nameEn:"Anguilla",country:"GB",groups:["029","003","419","019"],driveSide:"left",callingCodes:["1 264"]},geometry:{type:"MultiPolygon",coordinates:[[[[-63.83866,18.82518],[-63.35989,18.06012],[-62.86666,18.19278],[-62.75637,18.13489],[-62.46233,19.00569],[-63.83866,18.82518]]]]}},{type:"Feature",properties:{iso1A2:"AL",iso1A3:"ALB",iso1N3:"008",wikidata:"Q222",nameEn:"Albania",groups:["039","150"],callingCodes:["355"]},geometry:{type:"MultiPolygon",coordinates:[[[[20.07761,42.55582],[20.01834,42.54622],[20.00842,42.5109],[19.9324,42.51699],[19.82333,42.46581],[19.76549,42.50237],[19.74731,42.57422],[19.77375,42.58517],[19.73244,42.66299],[19.65972,42.62774],[19.4836,42.40831],[19.42352,42.36546],[19.42,42.33019],[19.28623,42.17745],[19.40687,42.10024],[19.37548,42.06835],[19.36867,42.02564],[19.37691,41.96977],[19.34601,41.95675],[19.33812,41.90669],[19.37451,41.8842],[19.37597,41.84849],[19.26406,41.74971],[19.0384,40.35325],[19.95905,39.82857],[19.97622,39.78684],[19.92466,39.69533],[19.98042,39.6504],[20.00957,39.69227],[20.05189,39.69112],[20.12956,39.65805],[20.15988,39.652],[20.22376,39.64532],[20.22707,39.67459],[20.27412,39.69884],[20.31961,39.72799],[20.29152,39.80421],[20.30804,39.81563],[20.38572,39.78516],[20.41475,39.81437],[20.41546,39.82832],[20.31135,39.99438],[20.37911,39.99058],[20.42373,40.06777],[20.48487,40.06271],[20.51297,40.08168],[20.55593,40.06524],[20.61081,40.07866],[20.62566,40.0897],[20.67162,40.09433],[20.71789,40.27739],[20.78234,40.35803],[20.7906,40.42726],[20.83688,40.47882],[20.94925,40.46625],[20.96908,40.51526],[21.03932,40.56299],[21.05833,40.66586],[20.98134,40.76046],[20.95752,40.76982],[20.98396,40.79109],[20.97887,40.85475],[20.97693,40.90103],[20.94305,40.92399],[20.83671,40.92752],[20.81567,40.89662],[20.73504,40.9081],[20.71634,40.91781],[20.65558,41.08009],[20.63454,41.0889],[20.59832,41.09066],[20.58546,41.11179],[20.59715,41.13644],[20.51068,41.2323],[20.49432,41.33679],[20.52119,41.34381],[20.55976,41.4087],[20.51301,41.442],[20.49039,41.49277],[20.45331,41.51436],[20.45809,41.5549],[20.52103,41.56473],[20.55508,41.58113],[20.51769,41.65975],[20.52937,41.69292],[20.51301,41.72433],[20.53405,41.78099],[20.57144,41.7897],[20.55976,41.87068],[20.59524,41.8818],[20.57946,41.91593],[20.63069,41.94913],[20.59434,42.03879],[20.55633,42.08173],[20.56955,42.12097],[20.48857,42.25444],[20.3819,42.3029],[20.34479,42.32656],[20.24399,42.32168],[20.21797,42.41237],[20.17127,42.50469],[20.07761,42.55582]]]]}},{type:"Feature",properties:{iso1A2:"AM",iso1A3:"ARM",iso1N3:"051",wikidata:"Q399",nameEn:"Armenia",groups:["145","142"],callingCodes:["374"]},geometry:{type:"MultiPolygon",coordinates:[[[[45.0133,41.29747],[44.93493,41.25685],[44.81437,41.30371],[44.80053,41.25949],[44.81749,41.23488],[44.84358,41.23088],[44.89911,41.21366],[44.87887,41.20195],[44.82084,41.21513],[44.72814,41.20338],[44.61462,41.24018],[44.59322,41.1933],[44.46791,41.18204],[44.34417,41.2382],[44.34337,41.20312],[44.32139,41.2079],[44.18148,41.24644],[44.16591,41.19141],[43.84835,41.16329],[43.74717,41.1117],[43.67712,41.13398],[43.4717,41.12611],[43.44984,41.0988],[43.47319,41.02251],[43.58683,40.98961],[43.67712,40.93084],[43.67712,40.84846],[43.74872,40.7365],[43.7425,40.66805],[43.63664,40.54159],[43.54791,40.47413],[43.60862,40.43267],[43.59928,40.34019],[43.71136,40.16673],[43.65221,40.14889],[43.65688,40.11199],[43.92307,40.01787],[44.1057,40.03555],[44.1778,40.02845],[44.26973,40.04866],[44.46635,39.97733],[44.61845,39.8281],[44.75779,39.7148],[44.88354,39.74432],[44.92869,39.72157],[45.06604,39.79277],[45.18554,39.67846],[45.17464,39.58614],[45.21784,39.58074],[45.23535,39.61373],[45.30385,39.61373],[45.29606,39.57654],[45.46992,39.49888],[45.70547,39.60174],[45.80804,39.56716],[45.83,39.46487],[45.79225,39.3695],[45.99774,39.28931],[46.02303,39.09978],[46.06973,39.0744],[46.14785,38.84206],[46.20601,38.85262],[46.34059,38.92076],[46.53497,38.86548],[46.51805,38.94982],[46.54296,39.07078],[46.44022,39.19636],[46.52584,39.18912],[46.54141,39.15895],[46.58032,39.21204],[46.63481,39.23013],[46.56476,39.24942],[46.50093,39.33736],[46.43244,39.35181],[46.37795,39.42039],[46.4013,39.45405],[46.53051,39.47809],[46.51027,39.52373],[46.57721,39.54414],[46.57098,39.56694],[46.52117,39.58734],[46.42465,39.57534],[46.40286,39.63651],[46.18493,39.60533],[45.96543,39.78859],[45.82533,39.82925],[45.7833,39.9475],[45.60895,39.97733],[45.59806,40.0131],[45.78642,40.03218],[45.83779,39.98925],[45.97944,40.181],[45.95609,40.27846],[45.65098,40.37696],[45.42994,40.53804],[45.45484,40.57707],[45.35366,40.65979],[45.4206,40.7424],[45.55914,40.78366],[45.60584,40.87436],[45.40814,40.97904],[45.44083,41.01663],[45.39725,41.02603],[45.35677,40.99784],[45.28859,41.03757],[45.26162,41.0228],[45.25897,41.0027],[45.1994,41.04518],[45.16493,41.05068],[45.1634,41.08082],[45.1313,41.09369],[45.12923,41.06059],[45.06784,41.05379],[45.08028,41.10917],[45.19942,41.13299],[45.1969,41.168],[45.11811,41.19967],[45.05201,41.19211],[45.02932,41.2101],[45.05497,41.2464],[45.0133,41.29747]],[[45.21324,40.9817],[45.21219,40.99001],[45.20518,40.99348],[45.19312,40.98998],[45.18382,41.0066],[45.20625,41.01484],[45.23487,41.00226],[45.23095,40.97828],[45.21324,40.9817]],[[45.00864,41.03411],[44.9903,41.05657],[44.96031,41.06345],[44.95383,41.07553],[44.97169,41.09176],[45.00864,41.09407],[45.03406,41.07931],[45.04517,41.06653],[45.03792,41.03938],[45.00864,41.03411]]],[[[45.50279,40.58424],[45.56071,40.64765],[45.51825,40.67382],[45.47927,40.65023],[45.50279,40.58424]]]]}},{type:"Feature",properties:{iso1A2:"AO",iso1A3:"AGO",iso1N3:"024",wikidata:"Q916",nameEn:"Angola",groups:["017","202","002"],callingCodes:["244"]},geometry:{type:"MultiPolygon",coordinates:[[[[16.55507,-5.85631],[13.04371,-5.87078],[12.42245,-6.07585],[11.95767,-5.94705],[12.20376,-5.76338],[12.26557,-5.74031],[12.52318,-5.74353],[12.52301,-5.17481],[12.53599,-5.1618],[12.53586,-5.14658],[12.51589,-5.1332],[12.49815,-5.14058],[12.46297,-5.09408],[12.60251,-5.01715],[12.63465,-4.94632],[12.70868,-4.95505],[12.8733,-4.74346],[13.11195,-4.67745],[13.09648,-4.63739],[12.91489,-4.47907],[12.87096,-4.40315],[12.76844,-4.38709],[12.64835,-4.55937],[12.40964,-4.60609],[12.32324,-4.78415],[12.25587,-4.79437],[12.20901,-4.75642],[12.16068,-4.90089],[12.00924,-5.02627],[11.50888,-5.33417],[10.5065,-17.25284],[11.75063,-17.25013],[12.07076,-17.15165],[12.52111,-17.24495],[12.97145,-16.98567],[13.36212,-16.98048],[13.95896,-17.43141],[14.28743,-17.38814],[18.39229,-17.38927],[18.84226,-17.80375],[21.14283,-17.94318],[21.42741,-18.02787],[23.47474,-17.62877],[23.20038,-17.47563],[22.17217,-16.50269],[22.00323,-16.18028],[21.97988,-13.00148],[24.03339,-12.99091],[23.90937,-12.844],[24.06672,-12.29058],[23.98804,-12.13149],[24.02603,-11.15368],[24.00027,-10.89356],[23.86868,-11.02856],[23.45631,-10.946],[23.16602,-11.10577],[22.54205,-11.05784],[22.25951,-11.24911],[22.17954,-10.85884],[22.32604,-10.76291],[22.19039,-9.94628],[21.84856,-9.59871],[21.79824,-7.29628],[20.56263,-7.28566],[20.61689,-6.90876],[20.31846,-6.91953],[20.30218,-6.98955],[19.5469,-7.00195],[19.33698,-7.99743],[18.33635,-8.00126],[17.5828,-8.13784],[16.96282,-7.21787],[16.55507,-5.85631]]]]}},{type:"Feature",properties:{iso1A2:"AQ",iso1A3:"ATA",iso1N3:"010",wikidata:"Q51",nameEn:"Antarctica",level:"region",callingCodes:["672"]},geometry:{type:"MultiPolygon",coordinates:[[[[180,-60],[-180,-60],[-180,-90],[180,-90],[180,-60]]]]}},{type:"Feature",properties:{iso1A2:"AR",iso1A3:"ARG",iso1N3:"032",wikidata:"Q414",nameEn:"Argentina",aliases:["RA"],groups:["005","419","019"],callingCodes:["54"]},geometry:{type:"MultiPolygon",coordinates:[[[[-72.31343,-50.58411],[-72.33873,-51.59954],[-71.99889,-51.98018],[-69.97824,-52.00845],[-68.41683,-52.33516],[-68.60702,-52.65781],[-68.60733,-54.9125],[-68.01394,-54.8753],[-67.46182,-54.92205],[-67.11046,-54.94199],[-66.07313,-55.19618],[-63.67376,-55.11859],[-54.78916,-36.21945],[-57.83001,-34.69099],[-58.34425,-34.15035],[-58.44442,-33.84033],[-58.40475,-33.11777],[-58.1224,-32.98842],[-58.22362,-32.52416],[-58.10036,-32.25338],[-58.20252,-31.86966],[-58.00076,-31.65016],[-58.0023,-31.53084],[-58.07569,-31.44916],[-57.98127,-31.3872],[-57.9908,-31.34924],[-57.86729,-31.06352],[-57.89476,-30.95994],[-57.8024,-30.77193],[-57.89115,-30.49572],[-57.64859,-30.35095],[-57.61478,-30.25165],[-57.65132,-30.19229],[-57.09386,-29.74211],[-56.81251,-29.48154],[-56.62789,-29.18073],[-56.57295,-29.11357],[-56.54171,-29.11447],[-56.05265,-28.62651],[-56.00458,-28.60421],[-56.01729,-28.51223],[-55.65418,-28.18304],[-55.6262,-28.17124],[-55.33303,-27.94661],[-55.16872,-27.86224],[-55.1349,-27.89759],[-54.90805,-27.73149],[-54.90159,-27.63132],[-54.67657,-27.57214],[-54.50416,-27.48232],[-54.41888,-27.40882],[-54.19268,-27.30751],[-54.19062,-27.27639],[-54.15978,-27.2889],[-53.80144,-27.09844],[-53.73372,-26.6131],[-53.68269,-26.33359],[-53.64505,-26.28089],[-53.64186,-26.25976],[-53.64632,-26.24798],[-53.63881,-26.25075],[-53.63739,-26.2496],[-53.65237,-26.23289],[-53.65018,-26.19501],[-53.73968,-26.10012],[-53.73391,-26.07006],[-53.7264,-26.0664],[-53.73086,-26.05842],[-53.73511,-26.04211],[-53.83691,-25.94849],[-53.90831,-25.55513],[-54.52926,-25.62846],[-54.5502,-25.58915],[-54.59398,-25.59224],[-54.62063,-25.91213],[-54.60664,-25.9691],[-54.67359,-25.98607],[-54.69333,-26.37705],[-54.70732,-26.45099],[-54.80868,-26.55669],[-55.00584,-26.78754],[-55.06351,-26.80195],[-55.16948,-26.96068],[-55.25243,-26.93808],[-55.39611,-26.97679],[-55.62322,-27.1941],[-55.59094,-27.32444],[-55.74475,-27.44485],[-55.89195,-27.3467],[-56.18313,-27.29851],[-56.85337,-27.5165],[-58.04205,-27.2387],[-58.59549,-27.29973],[-58.65321,-27.14028],[-58.3198,-26.83443],[-58.1188,-26.16704],[-57.87176,-25.93604],[-57.57431,-25.47269],[-57.80821,-25.13863],[-58.25492,-24.92528],[-58.33055,-24.97099],[-59.33886,-24.49935],[-59.45482,-24.34787],[-60.03367,-24.00701],[-60.28163,-24.04436],[-60.99754,-23.80934],[-61.0782,-23.62932],[-61.9756,-23.0507],[-62.22768,-22.55807],[-62.51761,-22.37684],[-62.64455,-22.25091],[-62.8078,-22.12534],[-62.81124,-21.9987],[-63.66482,-21.99918],[-63.68113,-22.0544],[-63.70963,-21.99934],[-63.93287,-21.99934],[-64.22918,-22.55807],[-64.31489,-22.88824],[-64.35108,-22.73282],[-64.4176,-22.67692],[-64.58888,-22.25035],[-64.67174,-22.18957],[-64.90014,-22.12136],[-64.99524,-22.08255],[-65.47435,-22.08908],[-65.57743,-22.07675],[-65.58694,-22.09794],[-65.61166,-22.09504],[-65.7467,-22.10105],[-65.9261,-21.93335],[-66.04832,-21.9187],[-66.03836,-21.84829],[-66.24077,-21.77837],[-66.29714,-22.08741],[-66.7298,-22.23644],[-67.18382,-22.81525],[-66.99632,-22.99839],[-67.33563,-24.04237],[-68.24825,-24.42596],[-68.56909,-24.69831],[-68.38372,-25.08636],[-68.57622,-25.32505],[-68.38372,-26.15353],[-68.56909,-26.28146],[-68.59048,-26.49861],[-68.27677,-26.90626],[-68.43363,-27.08414],[-68.77586,-27.16029],[-69.22504,-27.95042],[-69.66709,-28.44055],[-69.80969,-29.07185],[-69.99507,-29.28351],[-69.8596,-30.26131],[-70.14479,-30.36595],[-70.55832,-31.51559],[-69.88099,-33.34489],[-69.87386,-34.13344],[-70.49416,-35.24145],[-70.38008,-36.02375],[-70.95047,-36.4321],[-71.24279,-37.20264],[-70.89532,-38.6923],[-71.37826,-38.91474],[-71.92726,-40.72714],[-71.74901,-42.11711],[-72.15541,-42.15941],[-72.14828,-42.85321],[-71.64206,-43.64774],[-71.81318,-44.38097],[-71.16436,-44.46244],[-71.26418,-44.75684],[-72.06985,-44.81756],[-71.35687,-45.22075],[-71.75614,-45.61611],[-71.68577,-46.55385],[-71.94152,-47.13595],[-72.50478,-47.80586],[-72.27662,-48.28727],[-72.54042,-48.52392],[-72.56894,-48.81116],[-73.09655,-49.14342],[-73.45156,-49.79461],[-73.55259,-49.92488],[-73.15765,-50.78337],[-72.31343,-50.58411]]]]}},{type:"Feature",properties:{iso1A2:"AS",iso1A3:"ASM",iso1N3:"016",wikidata:"Q16641",nameEn:"American Samoa",country:"US",groups:["061","009"],roadSpeedUnit:"mph",callingCodes:["1 684"]},geometry:{type:"MultiPolygon",coordinates:[[[[-174.18596,-12.48057],[-171.14953,-12.4725],[-171.14262,-14.93704],[-167.73854,-14.92809],[-167.75195,-10.12005],[-174.17993,-10.13616],[-174.18596,-12.48057]]]]}},{type:"Feature",properties:{iso1A2:"AT",iso1A3:"AUT",iso1N3:"040",wikidata:"Q40",nameEn:"Austria",groups:["EU","155","150"],callingCodes:["43"]},geometry:{type:"MultiPolygon",coordinates:[[[[15.34823,48.98444],[15.28305,48.98831],[15.26177,48.95766],[15.16358,48.94278],[15.15534,48.99056],[14.99878,49.01444],[14.97612,48.96983],[14.98917,48.90082],[14.95072,48.79101],[14.98032,48.77959],[14.9782,48.7766],[14.98112,48.77524],[14.9758,48.76857],[14.95641,48.75915],[14.94773,48.76268],[14.81545,48.7874],[14.80821,48.77711],[14.80584,48.73489],[14.72756,48.69502],[14.71794,48.59794],[14.66762,48.58215],[14.60808,48.62881],[14.56139,48.60429],[14.4587,48.64695],[14.43076,48.58855],[14.33909,48.55852],[14.20691,48.5898],[14.09104,48.5943],[14.01482,48.63788],[14.06151,48.66873],[13.84023,48.76988],[13.82266,48.75544],[13.81863,48.73257],[13.79337,48.71375],[13.81791,48.69832],[13.81283,48.68426],[13.81901,48.6761],[13.82609,48.62345],[13.80038,48.59487],[13.80519,48.58026],[13.76921,48.55324],[13.7513,48.5624],[13.74816,48.53058],[13.72802,48.51208],[13.66113,48.53558],[13.65186,48.55092],[13.62508,48.55501],[13.59705,48.57013],[13.57535,48.55912],[13.51291,48.59023],[13.50131,48.58091],[13.50663,48.57506],[13.46967,48.55157],[13.45214,48.56472],[13.43695,48.55776],[13.45727,48.51092],[13.42527,48.45711],[13.43929,48.43386],[13.40709,48.37292],[13.30897,48.31575],[13.26039,48.29422],[13.18093,48.29577],[13.126,48.27867],[13.0851,48.27711],[13.02083,48.25689],[12.95306,48.20629],[12.87126,48.20318],[12.84475,48.16556],[12.836,48.1647],[12.8362,48.15876],[12.82673,48.15245],[12.80676,48.14979],[12.78595,48.12445],[12.7617,48.12796],[12.74973,48.10885],[12.76141,48.07373],[12.8549,48.01122],[12.87476,47.96195],[12.91683,47.95647],[12.9211,47.95135],[12.91985,47.94069],[12.92668,47.93879],[12.93419,47.94063],[12.93642,47.94436],[12.93886,47.94046],[12.94163,47.92927],[13.00588,47.84374],[12.98543,47.82896],[12.96311,47.79957],[12.93202,47.77302],[12.94371,47.76281],[12.9353,47.74788],[12.91711,47.74026],[12.90274,47.72513],[12.91333,47.7178],[12.92969,47.71094],[12.98578,47.7078],[13.01382,47.72116],[13.07692,47.68814],[13.09562,47.63304],[13.06407,47.60075],[13.06641,47.58577],[13.04537,47.58183],[13.05355,47.56291],[13.03252,47.53373],[13.04537,47.49426],[12.9998,47.46267],[12.98344,47.48716],[12.9624,47.47452],[12.85256,47.52741],[12.84672,47.54556],[12.80699,47.54477],[12.77427,47.58025],[12.82101,47.61493],[12.76492,47.64485],[12.77777,47.66689],[12.7357,47.6787],[12.6071,47.6741],[12.57438,47.63238],[12.53816,47.63553],[12.50076,47.62293],[12.44117,47.6741],[12.43883,47.6977],[12.37222,47.68433],[12.336,47.69534],[12.27991,47.68827],[12.26004,47.67725],[12.24017,47.69534],[12.26238,47.73544],[12.2542,47.7433],[12.22571,47.71776],[12.18303,47.70065],[12.16217,47.70105],[12.16769,47.68167],[12.18347,47.66663],[12.18507,47.65984],[12.19895,47.64085],[12.20801,47.61082],[12.20398,47.60667],[12.18568,47.6049],[12.17737,47.60121],[12.18145,47.61019],[12.17824,47.61506],[12.13734,47.60639],[12.05788,47.61742],[12.02282,47.61033],[12.0088,47.62451],[11.85572,47.60166],[11.84052,47.58354],[11.63934,47.59202],[11.60681,47.57881],[11.58811,47.55515],[11.58578,47.52281],[11.52618,47.50939],[11.4362,47.51413],[11.38128,47.47465],[11.4175,47.44621],[11.33804,47.44937],[11.29597,47.42566],[11.27844,47.39956],[11.22002,47.3964],[11.25157,47.43277],[11.20482,47.43198],[11.12536,47.41222],[11.11835,47.39719],[10.97111,47.39561],[10.97111,47.41617],[10.98513,47.42882],[10.92437,47.46991],[10.93839,47.48018],[10.90918,47.48571],[10.87061,47.4786],[10.86945,47.5015],[10.91268,47.51334],[10.88814,47.53701],[10.77596,47.51729],[10.7596,47.53228],[10.6965,47.54253],[10.68832,47.55752],[10.63456,47.5591],[10.60337,47.56755],[10.56912,47.53584],[10.48849,47.54057],[10.47329,47.58552],[10.43473,47.58394],[10.44992,47.5524],[10.4324,47.50111],[10.44291,47.48453],[10.46278,47.47901],[10.47446,47.43318],[10.4359,47.41183],[10.4324,47.38494],[10.39851,47.37623],[10.33424,47.30813],[10.23257,47.27088],[10.17531,47.27167],[10.17648,47.29149],[10.2147,47.31014],[10.19998,47.32832],[10.23757,47.37609],[10.22774,47.38904],[10.2127,47.38019],[10.17648,47.38889],[10.16362,47.36674],[10.11805,47.37228],[10.09819,47.35724],[10.06897,47.40709],[10.1052,47.4316],[10.09001,47.46005],[10.07131,47.45531],[10.03859,47.48927],[10.00003,47.48216],[9.96029,47.53899],[9.92407,47.53111],[9.87733,47.54688],[9.87499,47.52953],[9.8189,47.54688],[9.82591,47.58158],[9.80254,47.59419],[9.76748,47.5934],[9.72736,47.53457],[9.55125,47.53629],[9.56312,47.49495],[9.58208,47.48344],[9.59482,47.46305],[9.60205,47.46165],[9.60484,47.46358],[9.60841,47.47178],[9.62158,47.45858],[9.62475,47.45685],[9.6423,47.45599],[9.65728,47.45383],[9.65863,47.44847],[9.64483,47.43842],[9.6446,47.43233],[9.65043,47.41937],[9.65136,47.40504],[9.6629,47.39591],[9.67334,47.39191],[9.67445,47.38429],[9.6711,47.37824],[9.66243,47.37136],[9.65427,47.36824],[9.62476,47.36639],[9.59978,47.34671],[9.58513,47.31334],[9.55857,47.29919],[9.54773,47.2809],[9.53116,47.27029],[9.56766,47.24281],[9.55176,47.22585],[9.56981,47.21926],[9.58264,47.20673],[9.56539,47.17124],[9.62623,47.14685],[9.63395,47.08443],[9.61216,47.07732],[9.60717,47.06091],[9.87935,47.01337],[9.88266,46.93343],[9.98058,46.91434],[10.10715,46.84296],[10.22675,46.86942],[10.24128,46.93147],[10.30031,46.92093],[10.36933,47.00212],[10.48376,46.93891],[10.47197,46.85698],[10.54783,46.84505],[10.66405,46.87614],[10.75753,46.82258],[10.72974,46.78972],[11.00764,46.76896],[11.10618,46.92966],[11.33355,46.99862],[11.50739,47.00644],[11.74789,46.98484],[12.19254,47.09331],[12.21781,47.03996],[12.11675,47.01241],[12.2006,46.88854],[12.27591,46.88651],[12.38708,46.71529],[12.59992,46.6595],[12.94445,46.60401],[13.27627,46.56059],[13.64088,46.53438],[13.7148,46.5222],[13.89837,46.52331],[14.00422,46.48474],[14.04002,46.49117],[14.12097,46.47724],[14.15989,46.43327],[14.28326,46.44315],[14.314,46.43327],[14.42608,46.44614],[14.45877,46.41717],[14.52176,46.42617],[14.56463,46.37208],[14.5942,46.43434],[14.66892,46.44936],[14.72185,46.49974],[14.81836,46.51046],[14.83549,46.56614],[14.86419,46.59411],[14.87129,46.61],[14.92283,46.60848],[14.96002,46.63459],[14.98024,46.6009],[15.01451,46.641],[15.14215,46.66131],[15.23711,46.63994],[15.41235,46.65556],[15.45514,46.63697],[15.46906,46.61321],[15.54431,46.6312],[15.55333,46.64988],[15.54533,46.66985],[15.59826,46.68908],[15.62317,46.67947],[15.63255,46.68069],[15.6365,46.6894],[15.6543,46.69228],[15.6543,46.70616],[15.67411,46.70735],[15.69523,46.69823],[15.72279,46.69548],[15.73823,46.70011],[15.76771,46.69863],[15.78518,46.70712],[15.8162,46.71897],[15.87691,46.7211],[15.94864,46.68769],[15.98512,46.68463],[15.99988,46.67947],[16.04036,46.6549],[16.04347,46.68694],[16.02808,46.71094],[15.99769,46.7266],[15.98432,46.74991],[15.99126,46.78199],[15.99054,46.82772],[16.05786,46.83927],[16.10983,46.867],[16.19904,46.94134],[16.22403,46.939],[16.27594,46.9643],[16.28202,47.00159],[16.51369,47.00084],[16.43936,47.03548],[16.52176,47.05747],[16.46134,47.09395],[16.52863,47.13974],[16.44932,47.14418],[16.46442,47.16845],[16.4523,47.18812],[16.42801,47.18422],[16.41739,47.20649],[16.43663,47.21127],[16.44142,47.25079],[16.47782,47.25918],[16.45104,47.41181],[16.49908,47.39416],[16.52414,47.41007],[16.57152,47.40868],[16.6718,47.46139],[16.64821,47.50155],[16.71059,47.52692],[16.64193,47.63114],[16.58699,47.61772],[16.4222,47.66537],[16.55129,47.72268],[16.53514,47.73837],[16.54779,47.75074],[16.61183,47.76171],[16.65679,47.74197],[16.72089,47.73469],[16.7511,47.67878],[16.82938,47.68432],[16.86509,47.72268],[16.87538,47.68895],[17.08893,47.70928],[17.05048,47.79377],[17.07039,47.81129],[17.00997,47.86245],[17.08275,47.87719],[17.11022,47.92461],[17.09786,47.97336],[17.16001,48.00636],[17.07039,48.0317],[17.09168,48.09366],[17.05735,48.14179],[17.02919,48.13996],[16.97701,48.17385],[16.89461,48.31332],[16.90903,48.32519],[16.84243,48.35258],[16.83317,48.38138],[16.83588,48.3844],[16.8497,48.38321],[16.85204,48.44968],[16.94611,48.53614],[16.93955,48.60371],[16.90354,48.71541],[16.79779,48.70998],[16.71883,48.73806],[16.68518,48.7281],[16.67008,48.77699],[16.46134,48.80865],[16.40915,48.74576],[16.37345,48.729],[16.06034,48.75436],[15.84404,48.86921],[15.78087,48.87644],[15.75341,48.8516],[15.6921,48.85973],[15.61622,48.89541],[15.51357,48.91549],[15.48027,48.94481],[15.34823,48.98444]]]]}},{type:"Feature",properties:{iso1A2:"AU",iso1A3:"AUS",iso1N3:"036",wikidata:"Q408",nameEn:"Australia",groups:["053","009"],driveSide:"left",callingCodes:["61"]},geometry:{type:"MultiPolygon",coordinates:[[[[156.55918,-21.85134],[158.60851,-15.7108],[144.30183,-9.48146],[142.81927,-9.31709],[142.5723,-9.35994],[142.31447,-9.24611],[142.23304,-9.19253],[142.1462,-9.19923],[142.0953,-9.23534],[142.0601,-9.56571],[140.88922,-9.34945],[127.55165,-9.05052],[96.7091,-25.20343],[159.69067,-56.28945],[165.46901,-28.32101],[156.55918,-21.85134]]]]}},{type:"Feature",properties:{iso1A2:"AW",iso1A3:"ABW",iso1N3:"533",wikidata:"Q21203",nameEn:"Aruba",country:"NL",groups:["029","003","419","019"],callingCodes:["297"]},geometry:{type:"MultiPolygon",coordinates:[[[[-70.00823,12.98375],[-70.35625,12.58277],[-69.60231,12.17],[-70.00823,12.98375]]]]}},{type:"Feature",properties:{iso1A2:"AX",iso1A3:"ALA",iso1N3:"248",wikidata:"Q5689",nameEn:"Åland Islands",country:"FI",groups:["EU","154","150"],callingCodes:["358 18","358 457"]},geometry:{type:"MultiPolygon",coordinates:[[[[19.08191,60.19152],[20.5104,59.15546],[21.35468,59.67511],[21.02509,60.12142],[21.08159,60.20167],[21.15143,60.54555],[20.96741,60.71528],[19.23413,60.61414],[19.08191,60.19152]]]]}},{type:"Feature",properties:{iso1A2:"AZ",iso1A3:"AZE",iso1N3:"031",wikidata:"Q227",nameEn:"Azerbaijan",groups:["145","142"],callingCodes:["994"]},geometry:{type:"MultiPolygon",coordinates:[[[[46.42738,41.91323],[46.3984,41.84399],[46.30863,41.79133],[46.23962,41.75811],[46.20538,41.77205],[46.17891,41.72094],[46.19759,41.62327],[46.24429,41.59883],[46.26531,41.63339],[46.28182,41.60089],[46.3253,41.60912],[46.34039,41.5947],[46.34126,41.57454],[46.29794,41.5724],[46.33925,41.4963],[46.40307,41.48464],[46.4669,41.43331],[46.63658,41.37727],[46.72375,41.28609],[46.66148,41.20533],[46.63969,41.09515],[46.55096,41.1104],[46.48558,41.0576],[46.456,41.09984],[46.37661,41.10805],[46.27698,41.19011],[46.13221,41.19479],[45.95786,41.17956],[45.80842,41.2229],[45.69946,41.29545],[45.75705,41.35157],[45.71035,41.36208],[45.68389,41.3539],[45.45973,41.45898],[45.4006,41.42402],[45.31352,41.47168],[45.26285,41.46433],[45.1797,41.42231],[45.09867,41.34065],[45.0133,41.29747],[45.05497,41.2464],[45.02932,41.2101],[45.05201,41.19211],[45.11811,41.19967],[45.1969,41.168],[45.19942,41.13299],[45.08028,41.10917],[45.06784,41.05379],[45.12923,41.06059],[45.1313,41.09369],[45.1634,41.08082],[45.16493,41.05068],[45.1994,41.04518],[45.25897,41.0027],[45.26162,41.0228],[45.28859,41.03757],[45.35677,40.99784],[45.39725,41.02603],[45.44083,41.01663],[45.40814,40.97904],[45.60584,40.87436],[45.55914,40.78366],[45.4206,40.7424],[45.35366,40.65979],[45.45484,40.57707],[45.42994,40.53804],[45.65098,40.37696],[45.95609,40.27846],[45.97944,40.181],[45.83779,39.98925],[45.78642,40.03218],[45.59806,40.0131],[45.60895,39.97733],[45.7833,39.9475],[45.82533,39.82925],[45.96543,39.78859],[46.18493,39.60533],[46.40286,39.63651],[46.42465,39.57534],[46.52117,39.58734],[46.57098,39.56694],[46.57721,39.54414],[46.51027,39.52373],[46.53051,39.47809],[46.4013,39.45405],[46.37795,39.42039],[46.43244,39.35181],[46.50093,39.33736],[46.56476,39.24942],[46.63481,39.23013],[46.58032,39.21204],[46.54141,39.15895],[46.52584,39.18912],[46.44022,39.19636],[46.54296,39.07078],[46.51805,38.94982],[46.53497,38.86548],[46.75752,39.03231],[46.83822,39.13143],[46.92539,39.16644],[46.95341,39.13505],[47.05771,39.20143],[47.05927,39.24846],[47.31301,39.37492],[47.38978,39.45999],[47.50099,39.49615],[47.84774,39.66285],[47.98977,39.70999],[48.34264,39.42935],[48.37385,39.37584],[48.15984,39.30028],[48.12404,39.25208],[48.15361,39.19419],[48.31239,39.09278],[48.33884,39.03022],[48.28437,38.97186],[48.08627,38.94434],[48.07734,38.91616],[48.01409,38.90333],[48.02581,38.82705],[48.24773,38.71883],[48.3146,38.59958],[48.45084,38.61013],[48.58793,38.45076],[48.62217,38.40198],[48.70001,38.40564],[48.78979,38.45026],[48.81072,38.44853],[48.84969,38.45015],[48.88288,38.43975],[52.39847,39.43556],[48.80971,41.95365],[48.5867,41.84306],[48.55078,41.77917],[48.42301,41.65444],[48.40277,41.60441],[48.2878,41.56221],[48.22064,41.51472],[48.07587,41.49957],[47.87973,41.21798],[47.75831,41.19455],[47.62288,41.22969],[47.54504,41.20275],[47.49004,41.26366],[47.34579,41.27884],[47.10762,41.59044],[47.03757,41.55434],[46.99554,41.59743],[47.00955,41.63583],[46.8134,41.76252],[46.75269,41.8623],[46.58924,41.80547],[46.5332,41.87389],[46.42738,41.91323]],[[45.50279,40.58424],[45.47927,40.65023],[45.51825,40.67382],[45.56071,40.64765],[45.50279,40.58424]]],[[[45.00864,41.03411],[45.03792,41.03938],[45.04517,41.06653],[45.03406,41.07931],[45.00864,41.09407],[44.97169,41.09176],[44.95383,41.07553],[44.96031,41.06345],[44.9903,41.05657],[45.00864,41.03411]]],[[[45.21324,40.9817],[45.23095,40.97828],[45.23487,41.00226],[45.20625,41.01484],[45.18382,41.0066],[45.19312,40.98998],[45.20518,40.99348],[45.21219,40.99001],[45.21324,40.9817]]],[[[45.46992,39.49888],[45.29606,39.57654],[45.30385,39.61373],[45.23535,39.61373],[45.21784,39.58074],[45.17464,39.58614],[45.18554,39.67846],[45.06604,39.79277],[44.92869,39.72157],[44.88354,39.74432],[44.75779,39.7148],[44.80977,39.65768],[44.81043,39.62677],[44.88916,39.59653],[44.96746,39.42998],[45.05932,39.36435],[45.08751,39.35052],[45.16168,39.21952],[45.30489,39.18333],[45.40148,39.09007],[45.40452,39.07224],[45.44811,39.04927],[45.44966,38.99243],[45.6131,38.964],[45.6155,38.94304],[45.65172,38.95199],[45.83883,38.90768],[45.90266,38.87739],[45.94624,38.89072],[46.00228,38.87376],[46.06766,38.87861],[46.14785,38.84206],[46.06973,39.0744],[46.02303,39.09978],[45.99774,39.28931],[45.79225,39.3695],[45.83,39.46487],[45.80804,39.56716],[45.70547,39.60174],[45.46992,39.49888]]]]}},{type:"Feature",properties:{iso1A2:"BA",iso1A3:"BIH",iso1N3:"070",wikidata:"Q225",nameEn:"Bosnia and Herzegovina",groups:["039","150"],callingCodes:["387"]},geometry:{type:"MultiPolygon",coordinates:[[[[17.84826,45.04489],[17.66571,45.13408],[17.59104,45.10816],[17.51469,45.10791],[17.47589,45.12656],[17.45615,45.12523],[17.4498,45.16119],[17.41229,45.13335],[17.33573,45.14521],[17.32092,45.16246],[17.26815,45.18444],[17.25131,45.14957],[17.24325,45.146],[17.18438,45.14764],[17.0415,45.20759],[16.9385,45.22742],[16.92405,45.27607],[16.83804,45.18951],[16.81137,45.18434],[16.78219,45.19002],[16.74845,45.20393],[16.64962,45.20714],[16.60194,45.23042],[16.56559,45.22307],[16.5501,45.2212],[16.52982,45.22713],[16.49155,45.21153],[16.4634,45.14522],[16.40023,45.1147],[16.38309,45.05955],[16.38219,45.05139],[16.3749,45.05206],[16.35863,45.03529],[16.35404,45.00241],[16.29036,44.99732],[16.12153,45.09616],[15.98412,45.23088],[15.83512,45.22459],[15.76371,45.16508],[15.78842,45.11519],[15.74585,45.0638],[15.78568,44.97401],[15.74723,44.96818],[15.76096,44.87045],[15.79472,44.8455],[15.72584,44.82334],[15.8255,44.71501],[15.89348,44.74964],[16.05828,44.61538],[16.00884,44.58605],[16.03012,44.55572],[16.10566,44.52586],[16.16814,44.40679],[16.12969,44.38275],[16.21346,44.35231],[16.18688,44.27012],[16.36864,44.08263],[16.43662,44.07523],[16.43629,44.02826],[16.50528,44.0244],[16.55472,43.95326],[16.70922,43.84887],[16.75316,43.77157],[16.80736,43.76011],[17.00585,43.58037],[17.15828,43.49376],[17.24411,43.49376],[17.29699,43.44542],[17.25579,43.40353],[17.286,43.33065],[17.46986,43.16559],[17.64268,43.08595],[17.70879,42.97223],[17.5392,42.92787],[17.6444,42.88641],[17.68151,42.92725],[17.7948,42.89556],[17.80854,42.9182],[17.88201,42.83668],[18.24318,42.6112],[18.36197,42.61423],[18.43735,42.55921],[18.49778,42.58409],[18.53751,42.57376],[18.55504,42.58409],[18.52232,42.62279],[18.57373,42.64429],[18.54841,42.68328],[18.54603,42.69171],[18.55221,42.69045],[18.56789,42.72074],[18.47324,42.74992],[18.45921,42.81682],[18.47633,42.85829],[18.4935,42.86433],[18.49661,42.89306],[18.49076,42.95553],[18.52232,43.01451],[18.66254,43.03928],[18.64735,43.14766],[18.66605,43.2056],[18.71747,43.2286],[18.6976,43.25243],[18.76538,43.29838],[18.85342,43.32426],[18.84794,43.33735],[18.83912,43.34795],[18.90911,43.36383],[18.95819,43.32899],[18.95001,43.29327],[19.00844,43.24988],[19.04233,43.30008],[19.08206,43.29668],[19.08673,43.31453],[19.04071,43.397],[19.01078,43.43854],[18.96053,43.45042],[18.95469,43.49367],[18.91379,43.50299],[19.01078,43.55806],[19.04934,43.50384],[19.13933,43.5282],[19.15685,43.53943],[19.22807,43.5264],[19.24774,43.53061],[19.2553,43.5938],[19.33426,43.58833],[19.36653,43.60921],[19.41941,43.54056],[19.42696,43.57987],[19.50455,43.58385],[19.5176,43.71403],[19.3986,43.79668],[19.23465,43.98764],[19.24363,44.01502],[19.38439,43.96611],[19.52515,43.95573],[19.56498,43.99922],[19.61836,44.01464],[19.61991,44.05254],[19.57467,44.04716],[19.55999,44.06894],[19.51167,44.08158],[19.47321,44.1193],[19.48386,44.14332],[19.47338,44.15034],[19.43905,44.13088],[19.40927,44.16722],[19.3588,44.18353],[19.34773,44.23244],[19.32464,44.27185],[19.26945,44.26957],[19.23306,44.26097],[19.20508,44.2917],[19.18328,44.28383],[19.16741,44.28648],[19.13332,44.31492],[19.13556,44.338],[19.11547,44.34218],[19.1083,44.3558],[19.11865,44.36712],[19.10298,44.36924],[19.10365,44.37795],[19.10704,44.38249],[19.10749,44.39421],[19.11785,44.40313],[19.14681,44.41463],[19.14837,44.45253],[19.12278,44.50132],[19.13369,44.52521],[19.16699,44.52197],[19.26388,44.65412],[19.32543,44.74058],[19.36722,44.88164],[19.18183,44.92055],[19.01994,44.85493],[18.8704,44.85097],[18.76347,44.90669],[18.76369,44.93707],[18.80661,44.93561],[18.78357,44.97741],[18.65723,45.07544],[18.47939,45.05871],[18.41896,45.11083],[18.32077,45.1021],[18.24387,45.13699],[18.1624,45.07654],[18.03121,45.12632],[18.01594,45.15163],[17.99479,45.14958],[17.97834,45.13831],[17.97336,45.12245],[17.93706,45.08016],[17.87148,45.04645],[17.84826,45.04489]]]]}},{type:"Feature",properties:{iso1A2:"BB",iso1A3:"BRB",iso1N3:"052",wikidata:"Q244",nameEn:"Barbados",groups:["029","003","419","019"],driveSide:"left",callingCodes:["1 246"]},geometry:{type:"MultiPolygon",coordinates:[[[[-58.56442,13.24471],[-59.80731,13.87556],[-60.19227,12.37597],[-58.56442,13.24471]]]]}},{type:"Feature",properties:{iso1A2:"BD",iso1A3:"BGD",iso1N3:"050",wikidata:"Q902",nameEn:"Bangladesh",groups:["034","142"],driveSide:"left",callingCodes:["880"]},geometry:{type:"MultiPolygon",coordinates:[[[[89.15869,26.13708],[89.08899,26.38845],[88.95612,26.4564],[88.92357,26.40711],[88.91321,26.37984],[89.05328,26.2469],[88.85004,26.23211],[88.78961,26.31093],[88.67837,26.26291],[88.69485,26.38353],[88.62144,26.46783],[88.4298,26.54489],[88.41196,26.63837],[88.33093,26.48929],[88.35153,26.45241],[88.36938,26.48683],[88.48749,26.45855],[88.51649,26.35923],[88.35153,26.29123],[88.34757,26.22216],[88.1844,26.14417],[88.16581,26.0238],[88.08804,25.91334],[88.13138,25.78773],[88.242,25.80811],[88.45103,25.66245],[88.4559,25.59227],[88.677,25.46959],[88.81296,25.51546],[88.85278,25.34679],[89.01105,25.30303],[89.00463,25.26583],[88.94067,25.18534],[88.44766,25.20149],[88.46277,25.07468],[88.33917,24.86803],[88.27325,24.88796],[88.21832,24.96642],[88.14004,24.93529],[88.15515,24.85806],[88.00683,24.66477],[88.08786,24.63232],[88.12296,24.51301],[88.50934,24.32474],[88.68801,24.31464],[88.74841,24.1959],[88.6976,24.14703],[88.73743,23.91751],[88.66189,23.87607],[88.58087,23.87105],[88.56507,23.64044],[88.74841,23.47361],[88.79351,23.50535],[88.79254,23.46028],[88.71133,23.2492],[88.99148,23.21134],[88.86377,23.08759],[88.88327,23.03885],[88.87063,22.95235],[88.96713,22.83346],[88.9151,22.75228],[88.94614,22.66941],[88.9367,22.58527],[89.07114,22.15335],[89.03553,21.77397],[89.13927,21.60785],[89.13606,21.42955],[92.39837,20.38919],[92.4302,20.5688],[92.31348,20.57137],[92.28464,20.63179],[92.37665,20.72172],[92.26071,21.05697],[92.17752,21.17445],[92.20087,21.337],[92.37939,21.47764],[92.43158,21.37025],[92.55105,21.3856],[92.60187,21.24615],[92.68152,21.28454],[92.59775,21.6092],[92.62187,21.87037],[92.60949,21.97638],[92.56616,22.13554],[92.60029,22.1522],[92.5181,22.71441],[92.37665,22.9435],[92.38214,23.28705],[92.26541,23.70392],[92.15417,23.73409],[92.04706,23.64229],[91.95093,23.73284],[91.95642,23.47361],[91.84789,23.42235],[91.76417,23.26619],[91.81634,23.08001],[91.7324,23.00043],[91.61571,22.93929],[91.54993,23.01051],[91.46615,23.2328],[91.4035,23.27522],[91.40848,23.07117],[91.36453,23.06612],[91.28293,23.37538],[91.15579,23.6599],[91.25192,23.83463],[91.22308,23.89616],[91.29587,24.0041],[91.35741,23.99072],[91.37414,24.10693],[91.55542,24.08687],[91.63782,24.1132],[91.65292,24.22095],[91.73257,24.14703],[91.76004,24.23848],[91.82596,24.22345],[91.89258,24.14674],[91.96603,24.3799],[92.11662,24.38997],[92.15796,24.54435],[92.25854,24.9191],[92.38626,24.86055],[92.49887,24.88796],[92.39147,25.01471],[92.33957,25.07593],[92.0316,25.1834],[91.63648,25.12846],[91.25517,25.20677],[90.87427,25.15799],[90.65042,25.17788],[90.40034,25.1534],[90.1155,25.22686],[89.90478,25.31038],[89.87629,25.28337],[89.83371,25.29548],[89.84086,25.31854],[89.81208,25.37244],[89.86129,25.61714],[89.84388,25.70042],[89.80585,25.82489],[89.86592,25.93115],[89.77728,26.04254],[89.77865,26.08387],[89.73581,26.15818],[89.70201,26.15138],[89.63968,26.22595],[89.57101,25.9682],[89.53515,26.00382],[89.35953,26.0077],[89.15869,26.13708]]]]}},{type:"Feature",properties:{iso1A2:"BE",iso1A3:"BEL",iso1N3:"056",wikidata:"Q31",nameEn:"Belgium",groups:["EU","155","150"],callingCodes:["32"]},geometry:{type:"MultiPolygon",coordinates:[[[[4.93295,51.44945],[4.93909,51.44632],[4.9524,51.45014],[4.95244,51.45207],[4.93295,51.44945]]],[[[4.91493,51.4353],[4.92652,51.43329],[4.92952,51.42984],[4.93986,51.43064],[4.94265,51.44003],[4.93471,51.43861],[4.93416,51.44185],[4.94025,51.44193],[4.93544,51.44634],[4.92879,51.44161],[4.92815,51.43856],[4.92566,51.44273],[4.92811,51.4437],[4.92287,51.44741],[4.91811,51.44621],[4.92227,51.44252],[4.91935,51.43634],[4.91493,51.4353]]],[[[4.82946,51.4213],[4.82409,51.44736],[4.84139,51.4799],[4.78803,51.50284],[4.77321,51.50529],[4.74578,51.48937],[4.72935,51.48424],[4.65442,51.42352],[4.57489,51.4324],[4.53521,51.4243],[4.52846,51.45002],[4.54675,51.47265],[4.5388,51.48184],[4.47736,51.4778],[4.38122,51.44905],[4.39747,51.43316],[4.38064,51.41965],[4.43777,51.36989],[4.39292,51.35547],[4.34086,51.35738],[4.33265,51.37687],[4.21923,51.37443],[4.24024,51.35371],[4.16721,51.29348],[4.05165,51.24171],[4.01957,51.24504],[3.97889,51.22537],[3.90125,51.20371],[3.78783,51.2151],[3.78999,51.25766],[3.58939,51.30064],[3.51502,51.28697],[3.52698,51.2458],[3.43488,51.24135],[3.41704,51.25933],[3.38289,51.27331],[3.35847,51.31572],[3.38696,51.33436],[3.36263,51.37112],[2.56575,51.85301],[2.18458,51.52087],[2.55904,51.07014],[2.57551,51.00326],[2.63074,50.94746],[2.59093,50.91751],[2.63331,50.81457],[2.71165,50.81295],[2.81056,50.71773],[2.8483,50.72276],[2.86985,50.7033],[2.87937,50.70298],[2.88504,50.70656],[2.90069,50.69263],[2.91036,50.6939],[2.90873,50.702],[2.95019,50.75138],[2.96778,50.75242],[3.00537,50.76588],[3.04314,50.77674],[3.09163,50.77717],[3.10614,50.78303],[3.11206,50.79416],[3.11987,50.79188],[3.1257,50.78603],[3.15017,50.79031],[3.16476,50.76843],[3.18339,50.74981],[3.18811,50.74025],[3.20064,50.73547],[3.19017,50.72569],[3.20845,50.71662],[3.22042,50.71019],[3.24593,50.71389],[3.26063,50.70086],[3.26141,50.69151],[3.2536,50.68977],[3.264,50.67668],[3.23951,50.6585],[3.2729,50.60718],[3.28575,50.52724],[3.37693,50.49538],[3.44629,50.51009],[3.47385,50.53397],[3.51564,50.5256],[3.49509,50.48885],[3.5683,50.50192],[3.58361,50.49049],[3.61014,50.49568],[3.64426,50.46275],[3.66153,50.45165],[3.67494,50.40239],[3.67262,50.38663],[3.65709,50.36873],[3.66976,50.34563],[3.71009,50.30305],[3.70987,50.3191],[3.73911,50.34809],[3.84314,50.35219],[3.90781,50.32814],[3.96771,50.34989],[4.0268,50.35793],[4.0689,50.3254],[4.10237,50.31247],[4.10957,50.30234],[4.11954,50.30425],[4.13665,50.25609],[4.16808,50.25786],[4.15524,50.2833],[4.17347,50.28838],[4.17861,50.27443],[4.20651,50.27333],[4.21945,50.25539],[4.15524,50.21103],[4.16014,50.19239],[4.13561,50.13078],[4.20147,50.13535],[4.23101,50.06945],[4.16294,50.04719],[4.13508,50.01976],[4.14239,49.98034],[4.20532,49.95803],[4.31963,49.97043],[4.35051,49.95315],[4.43488,49.94122],[4.51098,49.94659],[4.5414,49.96911],[4.68695,49.99685],[4.70064,50.09384],[4.75237,50.11314],[4.82438,50.16878],[4.83279,50.15331],[4.88602,50.15182],[4.8382,50.06738],[4.78827,49.95609],[4.88529,49.9236],[4.85134,49.86457],[4.86965,49.82271],[4.85464,49.78995],[4.96714,49.79872],[5.09249,49.76193],[5.14545,49.70287],[5.26232,49.69456],[5.31465,49.66846],[5.33039,49.6555],[5.30214,49.63055],[5.3137,49.61225],[5.33851,49.61599],[5.34837,49.62889],[5.3974,49.61596],[5.43713,49.5707],[5.46734,49.52648],[5.46541,49.49825],[5.55001,49.52729],[5.60909,49.51228],[5.64505,49.55146],[5.75649,49.54321],[5.7577,49.55915],[5.77435,49.56298],[5.79195,49.55228],[5.81838,49.54777],[5.84143,49.5533],[5.84692,49.55663],[5.8424,49.56082],[5.87256,49.57539],[5.86986,49.58756],[5.84971,49.58674],[5.84826,49.5969],[5.8762,49.60898],[5.87609,49.62047],[5.88393,49.62802],[5.88552,49.63507],[5.90599,49.63853],[5.90164,49.6511],[5.9069,49.66377],[5.86175,49.67862],[5.86527,49.69291],[5.88677,49.70951],[5.86503,49.72739],[5.84193,49.72161],[5.82562,49.72395],[5.83149,49.74729],[5.82245,49.75048],[5.78871,49.7962],[5.75409,49.79239],[5.74953,49.81428],[5.74364,49.82058],[5.74844,49.82435],[5.7404,49.83452],[5.74076,49.83823],[5.74975,49.83933],[5.74953,49.84709],[5.75884,49.84811],[5.74567,49.85368],[5.75861,49.85631],[5.75269,49.8711],[5.78415,49.87922],[5.73621,49.89796],[5.77314,49.93646],[5.77291,49.96056],[5.80833,49.96451],[5.81163,49.97142],[5.83467,49.97823],[5.83968,49.9892],[5.82331,49.99662],[5.81866,50.01286],[5.8551,50.02683],[5.86904,50.04614],[5.85474,50.06342],[5.8857,50.07824],[5.89488,50.11476],[5.95929,50.13295],[5.96453,50.17259],[6.02488,50.18283],[6.03093,50.16362],[6.06406,50.15344],[6.08577,50.17246],[6.12028,50.16374],[6.1137,50.13668],[6.1379,50.12964],[6.15298,50.14126],[6.14132,50.14971],[6.14588,50.17106],[6.18739,50.1822],[6.18364,50.20815],[6.16853,50.2234],[6.208,50.25179],[6.28797,50.27458],[6.29949,50.30887],[6.32488,50.32333],[6.35701,50.31139],[6.40641,50.32425],[6.40785,50.33557],[6.3688,50.35898],[6.34406,50.37994],[6.36852,50.40776],[6.37219,50.45397],[6.34005,50.46083],[6.3465,50.48833],[6.30809,50.50058],[6.26637,50.50272],[6.22335,50.49578],[6.20599,50.52089],[6.19193,50.5212],[6.18716,50.52653],[6.19579,50.5313],[6.19735,50.53576],[6.17802,50.54179],[6.17739,50.55875],[6.20281,50.56952],[6.22581,50.5907],[6.24005,50.58732],[6.24888,50.59869],[6.2476,50.60392],[6.26957,50.62444],[6.17852,50.6245],[6.11707,50.72231],[6.04428,50.72861],[6.0406,50.71848],[6.0326,50.72647],[6.03889,50.74618],[6.01976,50.75398],[5.97545,50.75441],[5.95942,50.7622],[5.89132,50.75124],[5.89129,50.75125],[5.88734,50.77092],[5.84888,50.75448],[5.84548,50.76542],[5.80673,50.7558],[5.77513,50.78308],[5.76533,50.78159],[5.74356,50.7691],[5.73904,50.75674],[5.72216,50.76398],[5.69469,50.75529],[5.68091,50.75804],[5.70107,50.7827],[5.68995,50.79641],[5.70118,50.80764],[5.65259,50.82309],[5.64009,50.84742],[5.64504,50.87107],[5.67886,50.88142],[5.69858,50.91046],[5.71626,50.90796],[5.72644,50.91167],[5.72545,50.92312],[5.74644,50.94723],[5.75927,50.95601],[5.74752,50.96202],[5.72875,50.95428],[5.71864,50.96092],[5.76242,50.99703],[5.77688,51.02483],[5.75961,51.03113],[5.77258,51.06196],[5.79835,51.05834],[5.79903,51.09371],[5.82921,51.09328],[5.83226,51.10585],[5.8109,51.10861],[5.80798,51.11661],[5.85508,51.14445],[5.82564,51.16753],[5.77697,51.1522],[5.77735,51.17845],[5.74617,51.18928],[5.70344,51.1829],[5.65528,51.18736],[5.65145,51.19788],[5.5603,51.22249],[5.5569,51.26544],[5.515,51.29462],[5.48476,51.30053],[5.46519,51.2849],[5.4407,51.28169],[5.41672,51.26248],[5.347,51.27502],[5.33886,51.26314],[5.29716,51.26104],[5.26461,51.26693],[5.23814,51.26064],[5.22542,51.26888],[5.24244,51.30495],[5.2002,51.32243],[5.16222,51.31035],[5.13377,51.31592],[5.13105,51.34791],[5.07102,51.39469],[5.10456,51.43163],[5.07891,51.4715],[5.04774,51.47022],[5.03281,51.48679],[5.0106,51.47167],[5.00393,51.44406],[4.92152,51.39487],[4.90016,51.41404],[4.84988,51.41502],[4.78941,51.41102],[4.77229,51.41337],[4.76577,51.43046],[4.78314,51.43319],[4.82946,51.4213]]]]}},{type:"Feature",properties:{iso1A2:"BF",iso1A3:"BFA",iso1N3:"854",wikidata:"Q965",nameEn:"Burkina Faso",groups:["011","202","002"],callingCodes:["226"]},geometry:{type:"MultiPolygon",coordinates:[[[[.23859,15.00135],[.06588,14.96961],[-.24673,15.07805],[-.72004,15.08655],[-1.05875,14.7921],[-1.32166,14.72774],[-1.68083,14.50023],[-1.97945,14.47709],[-1.9992,14.19011],[-2.10223,14.14878],[-2.47587,14.29671],[-2.66175,14.14713],[-2.84667,14.05532],[-2.90831,13.81174],[-2.88189,13.64921],[-3.26407,13.70699],[-3.28396,13.5422],[-3.23599,13.29035],[-3.43507,13.27272],[-3.4313,13.1588],[-3.54454,13.1781],[-3.7911,13.36665],[-3.96282,13.38164],[-3.90558,13.44375],[-3.96501,13.49778],[-4.34477,13.12927],[-4.21819,12.95722],[-4.238,12.71467],[-4.47356,12.71252],[-4.41412,12.31922],[-4.57703,12.19875],[-4.54841,12.1385],[-4.62546,12.13204],[-4.62987,12.06531],[-4.70692,12.06746],[-4.72893,12.01579],[-5.07897,11.97918],[-5.26389,11.84778],[-5.40258,11.8327],[-5.26389,11.75728],[-5.29251,11.61715],[-5.22867,11.60421],[-5.20665,11.43811],[-5.25509,11.36905],[-5.25949,11.24816],[-5.32553,11.21578],[-5.32994,11.13371],[-5.49284,11.07538],[-5.41579,10.84628],[-5.47083,10.75329],[-5.46643,10.56074],[-5.51058,10.43177],[-5.39602,10.2929],[-5.12465,10.29788],[-4.96453,9.99923],[-4.96621,9.89132],[-4.6426,9.70696],[-4.31392,9.60062],[-4.25999,9.76012],[-3.69703,9.94279],[-3.31779,9.91125],[-3.27228,9.84981],[-3.19306,9.93781],[-3.16609,9.85147],[-3.00765,9.74019],[-2.93012,9.57403],[-2.76494,9.40778],[-2.68802,9.49343],[-2.76534,9.56589],[-2.74174,9.83172],[-2.83108,10.40252],[-2.94232,10.64281],[-2.83373,11.0067],[-.67143,10.99811],[-.61937,10.91305],[-.44298,11.04292],[-.42391,11.11661],[-.38219,11.12596],[-.35955,11.07801],[-.28566,11.12713],[-.27374,11.17157],[-.13493,11.14075],[.50388,11.01011],[.48852,10.98561],[.50521,10.98035],[.4958,10.93269],[.66104,10.99964],[.91245,10.99597],[.9813,11.08876],[1.03409,11.04719],[1.42823,11.46822],[2.00988,11.42227],[2.29983,11.68254],[2.39723,11.89473],[2.05785,12.35539],[2.26349,12.41915],[.99167,13.10727],[.99253,13.37515],[1.18873,13.31771],[1.21217,13.37853],[1.24516,13.33968],[1.28509,13.35488],[1.24429,13.39373],[1.20088,13.38951],[1.02813,13.46635],[.99514,13.5668],[.77637,13.64442],[.77377,13.6866],[.61924,13.68491],[.38051,14.05575],[.16936,14.51654],[.23859,15.00135]]]]}},{type:"Feature",properties:{iso1A2:"BG",iso1A3:"BGR",iso1N3:"100",wikidata:"Q219",nameEn:"Bulgaria",groups:["EU","151","150"],callingCodes:["359"]},geometry:{type:"MultiPolygon",coordinates:[[[[23.05288,43.79494],[22.85314,43.84452],[22.83753,43.88055],[22.87873,43.9844],[23.01674,44.01946],[23.04988,44.07694],[22.67173,44.21564],[22.61711,44.16938],[22.61688,44.06534],[22.41449,44.00514],[22.35558,43.81281],[22.41043,43.69566],[22.47582,43.6558],[22.53397,43.47225],[22.82036,43.33665],[22.89727,43.22417],[23.00806,43.19279],[22.98104,43.11199],[22.89521,43.03625],[22.78397,42.98253],[22.74826,42.88701],[22.54302,42.87774],[22.43309,42.82057],[22.4997,42.74144],[22.43983,42.56851],[22.55669,42.50144],[22.51961,42.3991],[22.47498,42.3915],[22.45919,42.33822],[22.34773,42.31725],[22.38136,42.30339],[22.47251,42.20393],[22.50289,42.19527],[22.51224,42.15457],[22.67701,42.06614],[22.86749,42.02275],[22.90254,41.87587],[22.96682,41.77137],[23.01239,41.76527],[23.03342,41.71034],[22.95513,41.63265],[22.96331,41.35782],[22.93334,41.34104],[23.1833,41.31755],[23.21953,41.33773],[23.22771,41.37106],[23.31301,41.40525],[23.33639,41.36317],[23.40416,41.39999],[23.52453,41.40262],[23.63203,41.37632],[23.67644,41.41139],[23.76525,41.40175],[23.80148,41.43943],[23.89613,41.45257],[23.91483,41.47971],[23.96975,41.44118],[24.06908,41.46132],[24.06323,41.53222],[24.10063,41.54796],[24.18126,41.51735],[24.27124,41.57682],[24.30513,41.51297],[24.52599,41.56808],[24.61129,41.42278],[24.71529,41.41928],[24.8041,41.34913],[24.82514,41.4035],[24.86136,41.39298],[24.90928,41.40876],[24.942,41.38685],[25.11611,41.34212],[25.28322,41.23411],[25.48187,41.28506],[25.52394,41.2798],[25.55082,41.31667],[25.61042,41.30614],[25.66183,41.31316],[25.70507,41.29209],[25.8266,41.34563],[25.87919,41.30526],[26.12926,41.35878],[26.16548,41.42278],[26.20288,41.43943],[26.14796,41.47533],[26.176,41.50072],[26.17951,41.55409],[26.14328,41.55496],[26.15146,41.60828],[26.07083,41.64584],[26.06148,41.70345],[26.16841,41.74858],[26.21325,41.73223],[26.22888,41.74139],[26.2654,41.71544],[26.30255,41.70925],[26.35957,41.71149],[26.32952,41.73637],[26.33589,41.76802],[26.36952,41.82265],[26.53968,41.82653],[26.57961,41.90024],[26.56051,41.92995],[26.62996,41.97644],[26.79143,41.97386],[26.95638,42.00741],[27.03277,42.0809],[27.08486,42.08735],[27.19251,42.06028],[27.22376,42.10152],[27.27411,42.10409],[27.45478,41.96591],[27.52379,41.93756],[27.55191,41.90928],[27.69949,41.97515],[27.81235,41.94803],[27.83492,41.99709],[27.91479,41.97902],[28.02971,41.98066],[28.32297,41.98371],[29.24336,43.70874],[28.23293,43.76],[27.99558,43.84193],[27.92008,44.00761],[27.73468,43.95326],[27.64542,44.04958],[27.60834,44.01206],[27.39757,44.0141],[27.26845,44.12602],[26.95141,44.13555],[26.62712,44.05698],[26.38764,44.04356],[26.10115,43.96908],[26.05584,43.90925],[25.94911,43.85745],[25.72792,43.69263],[25.39528,43.61866],[25.17144,43.70261],[25.10718,43.6831],[24.96682,43.72693],[24.73542,43.68523],[24.62281,43.74082],[24.50264,43.76314],[24.35364,43.70211],[24.18149,43.68218],[23.73978,43.80627],[23.61687,43.79289],[23.4507,43.84936],[23.26772,43.84843],[23.05288,43.79494]]]]}},{type:"Feature",properties:{iso1A2:"BH",iso1A3:"BHR",iso1N3:"048",wikidata:"Q398",nameEn:"Bahrain",groups:["145","142"],callingCodes:["973"]},geometry:{type:"MultiPolygon",coordinates:[[[[50.93865,26.30758],[50.71771,26.73086],[50.38162,26.53976],[50.26923,26.08243],[50.302,25.87592],[50.57069,25.57887],[50.80824,25.54641],[50.7801,25.595],[50.86149,25.6965],[50.81266,25.88946],[50.93865,26.30758]]]]}},{type:"Feature",properties:{iso1A2:"BI",iso1A3:"BDI",iso1N3:"108",wikidata:"Q967",nameEn:"Burundi",groups:["014","202","002"],callingCodes:["257"]},geometry:{type:"MultiPolygon",coordinates:[[[[30.54501,-2.41404],[30.42933,-2.31064],[30.14034,-2.43626],[29.95911,-2.33348],[29.88237,-2.75105],[29.36805,-2.82933],[29.32234,-2.6483],[29.0562,-2.58632],[29.04081,-2.7416],[29.00167,-2.78523],[29.00404,-2.81978],[29.0505,-2.81774],[29.09119,-2.87871],[29.09797,-2.91935],[29.16037,-2.95457],[29.17258,-2.99385],[29.25633,-3.05471],[29.21463,-3.3514],[29.23708,-3.75856],[29.43673,-4.44845],[29.63827,-4.44681],[29.75109,-4.45836],[29.77289,-4.41733],[29.82885,-4.36153],[29.88172,-4.35743],[30.03323,-4.26631],[30.22042,-4.01738],[30.45915,-3.56532],[30.84165,-3.25152],[30.83823,-2.97837],[30.6675,-2.98987],[30.57926,-2.89791],[30.4987,-2.9573],[30.40662,-2.86151],[30.52747,-2.65841],[30.41789,-2.66266],[30.54501,-2.41404]]]]}},{type:"Feature",properties:{iso1A2:"BJ",iso1A3:"BEN",iso1N3:"204",wikidata:"Q962",nameEn:"Benin",aliases:["DY"],groups:["011","202","002"],callingCodes:["229"]},geometry:{type:"MultiPolygon",coordinates:[[[[3.59375,11.70269],[3.48187,11.86092],[3.31613,11.88495],[3.25352,12.01467],[2.83978,12.40585],[2.6593,12.30631],[2.37783,12.24804],[2.39657,12.10952],[2.45824,11.98672],[2.39723,11.89473],[2.29983,11.68254],[2.00988,11.42227],[1.42823,11.46822],[1.03409,11.04719],[.9813,11.08876],[.91245,10.99597],[.8804,10.803],[.80358,10.71459],[.77666,10.37665],[1.35507,9.99525],[1.36624,9.5951],[1.33675,9.54765],[1.41746,9.3226],[1.5649,9.16941],[1.61838,9.0527],[1.64249,6.99562],[1.55877,6.99737],[1.61812,6.74843],[1.58105,6.68619],[1.76906,6.43189],[1.79826,6.28221],[1.62913,6.24075],[1.67336,6.02702],[2.74181,6.13349],[2.70566,6.38038],[2.70464,6.50831],[2.74334,6.57291],[2.7325,6.64057],[2.78204,6.70514],[2.78823,6.76356],[2.73405,6.78508],[2.74024,6.92802],[2.71702,6.95722],[2.76965,7.13543],[2.74489,7.42565],[2.79442,7.43486],[2.78668,7.5116],[2.73405,7.5423],[2.73095,7.7755],[2.67523,7.87825],[2.77907,9.06924],[3.08017,9.10006],[3.14147,9.28375],[3.13928,9.47167],[3.25093,9.61632],[3.34726,9.70696],[3.32099,9.78032],[3.35383,9.83641],[3.54429,9.87739],[3.66908,10.18136],[3.57275,10.27185],[3.6844,10.46351],[3.78292,10.40538],[3.84243,10.59316],[3.71505,11.13015],[3.49175,11.29765],[3.59375,11.70269]]]]}},{type:"Feature",properties:{iso1A2:"BL",iso1A3:"BLM",iso1N3:"652",wikidata:"Q25362",nameEn:"Saint-Barthélemy",country:"FR",groups:["029","003","419","019"],callingCodes:["590"]},geometry:{type:"MultiPolygon",coordinates:[[[[-62.75637,18.13489],[-62.93924,18.02904],[-63.07669,17.79659],[-62.76692,17.64353],[-62.54836,17.8636],[-62.75637,18.13489]]]]}},{type:"Feature",properties:{iso1A2:"BM",iso1A3:"BMU",iso1N3:"060",wikidata:"Q23635",nameEn:"Bermuda",country:"GB",groups:["021","003","019"],driveSide:"left",callingCodes:["1 441"]},geometry:{type:"MultiPolygon",coordinates:[[[[-63.20987,32.6953],[-65.31453,32.68437],[-65.63955,31.43417],[-63.20987,32.6953]]]]}},{type:"Feature",properties:{iso1A2:"BN",iso1A3:"BRN",iso1N3:"096",wikidata:"Q921",nameEn:"Brunei",groups:["035","142"],driveSide:"left",callingCodes:["673"]},geometry:{type:"MultiPolygon",coordinates:[[[[115.16236,5.01011],[115.02521,5.35005],[114.08532,4.64632],[114.07448,4.58441],[114.15813,4.57],[114.26876,4.49878],[114.32176,4.34942],[114.32176,4.2552],[114.4416,4.27588],[114.49922,4.13108],[114.64211,4.00694],[114.78539,4.12205],[114.88039,4.4257],[114.83189,4.42387],[114.77303,4.72871],[114.8266,4.75062],[114.88841,4.81905],[114.96982,4.81146],[114.99417,4.88201],[115.05038,4.90275],[115.02955,4.82087],[115.02278,4.74137],[115.04064,4.63706],[115.07737,4.53418],[115.09978,4.39123],[115.31275,4.30806],[115.36346,4.33563],[115.2851,4.42295],[115.27819,4.63661],[115.20737,4.8256],[115.15092,4.87604],[115.16236,5.01011]]]]}},{type:"Feature",properties:{iso1A2:"BO",iso1A3:"BOL",iso1N3:"068",wikidata:"Q750",nameEn:"Bolivia",groups:["005","419","019"],callingCodes:["591"]},geometry:{type:"MultiPolygon",coordinates:[[[[-63.90248,-12.52544],[-64.22539,-12.45267],[-64.30708,-12.46398],[-64.99778,-11.98604],[-65.30027,-11.48749],[-65.28141,-10.86289],[-65.35402,-10.78685],[-65.37923,-10.35141],[-65.29019,-9.86253],[-65.40615,-9.63894],[-65.56244,-9.84266],[-65.68343,-9.75323],[-67.17784,-10.34016],[-68.71533,-11.14749],[-68.7651,-11.0496],[-68.75179,-11.03688],[-68.75265,-11.02383],[-68.74802,-11.00891],[-69.42792,-10.93451],[-69.47839,-10.95254],[-69.57156,-10.94555],[-68.98115,-11.8979],[-68.65044,-12.50689],[-68.85615,-12.87769],[-68.8864,-13.40792],[-69.05265,-13.68546],[-68.88135,-14.18639],[-69.36254,-14.94634],[-69.14856,-15.23478],[-69.40336,-15.61358],[-69.20291,-16.16668],[-69.09986,-16.22693],[-68.96238,-16.194],[-68.79464,-16.33272],[-68.98358,-16.42165],[-69.04027,-16.57214],[-69.00853,-16.66769],[-69.16896,-16.72233],[-69.62883,-17.28142],[-69.46863,-17.37466],[-69.46897,-17.4988],[-69.46623,-17.60518],[-69.34126,-17.72753],[-69.28671,-17.94844],[-69.07496,-18.03715],[-69.14807,-18.16893],[-69.07432,-18.28259],[-68.94987,-18.93302],[-68.87082,-19.06003],[-68.80602,-19.08355],[-68.61989,-19.27584],[-68.41218,-19.40499],[-68.66761,-19.72118],[-68.54611,-19.84651],[-68.57132,-20.03134],[-68.74273,-20.08817],[-68.7276,-20.46178],[-68.44023,-20.62701],[-68.55383,-20.7355],[-68.53957,-20.91542],[-68.40403,-20.94562],[-68.18816,-21.28614],[-67.85114,-22.87076],[-67.54284,-22.89771],[-67.18382,-22.81525],[-66.7298,-22.23644],[-66.29714,-22.08741],[-66.24077,-21.77837],[-66.03836,-21.84829],[-66.04832,-21.9187],[-65.9261,-21.93335],[-65.7467,-22.10105],[-65.61166,-22.09504],[-65.58694,-22.09794],[-65.57743,-22.07675],[-65.47435,-22.08908],[-64.99524,-22.08255],[-64.90014,-22.12136],[-64.67174,-22.18957],[-64.58888,-22.25035],[-64.4176,-22.67692],[-64.35108,-22.73282],[-64.31489,-22.88824],[-64.22918,-22.55807],[-63.93287,-21.99934],[-63.70963,-21.99934],[-63.68113,-22.0544],[-63.66482,-21.99918],[-62.81124,-21.9987],[-62.8078,-22.12534],[-62.64455,-22.25091],[-62.2757,-21.06657],[-62.26883,-20.55311],[-61.93912,-20.10053],[-61.73723,-19.63958],[-60.00638,-19.2981],[-59.06965,-19.29148],[-58.23216,-19.80058],[-58.16225,-20.16193],[-57.8496,-19.98346],[-58.14215,-19.76276],[-57.78463,-19.03259],[-57.71113,-19.03161],[-57.69134,-19.00544],[-57.71995,-18.97546],[-57.71995,-18.89573],[-57.76764,-18.90087],[-57.56807,-18.25655],[-57.48237,-18.24219],[-57.69877,-17.8431],[-57.73949,-17.56095],[-57.90082,-17.44555],[-57.99661,-17.5273],[-58.32935,-17.28195],[-58.5058,-16.80958],[-58.30918,-16.3699],[-58.32431,-16.25861],[-58.41506,-16.32636],[-60.16069,-16.26479],[-60.23797,-15.50267],[-60.58224,-15.09887],[-60.23968,-15.09515],[-60.27887,-14.63021],[-60.46037,-14.22496],[-60.48053,-13.77981],[-61.05527,-13.50054],[-61.81151,-13.49564],[-63.76259,-12.42952],[-63.90248,-12.52544]]]]}},{type:"Feature",properties:{iso1A2:"BQ",iso1A3:"BES",iso1N3:"535",wikidata:"Q27561",nameEn:"Caribbean Netherlands",country:"NL",groups:["029","003","419","019"],callingCodes:["599 3","599 4","599 7"]},geometry:{type:"MultiPolygon",coordinates:[[[[-63.07669,17.79659],[-63.22932,17.32592],[-63.11114,17.23125],[-62.76692,17.64353],[-63.07669,17.79659]]],[[[-63.29212,17.90532],[-63.58819,17.61311],[-63.22932,17.32592],[-63.07669,17.79659],[-63.29212,17.90532]]],[[[-67.89186,12.4116],[-68.90012,12.62309],[-68.33524,11.78151],[-68.01417,11.77722],[-67.89186,12.4116]]]]}},{type:"Feature",properties:{iso1A2:"BR",iso1A3:"BRA",iso1N3:"076",wikidata:"Q155",nameEn:"Brazil",groups:["005","419","019"],callingCodes:["55"]},geometry:{type:"MultiPolygon",coordinates:[[[[-59.69361,4.34069],[-59.78878,4.45637],[-60.15953,4.53456],[-60.04189,4.69801],[-59.98129,5.07097],[-60.20944,5.28754],[-60.32352,5.21299],[-60.73204,5.20931],[-60.5802,4.94312],[-60.86539,4.70512],[-60.98303,4.54167],[-61.15703,4.49839],[-61.31457,4.54167],[-61.29675,4.44216],[-61.48569,4.43149],[-61.54629,4.2822],[-62.13094,4.08309],[-62.44822,4.18621],[-62.57656,4.04754],[-62.74411,4.03331],[-62.7655,3.73099],[-62.98296,3.59935],[-63.21111,3.96219],[-63.4464,3.9693],[-63.42233,3.89995],[-63.50611,3.83592],[-63.67099,4.01731],[-63.70218,3.91417],[-63.86082,3.94796],[-63.99183,3.90172],[-64.14512,4.12932],[-64.57648,4.12576],[-64.72977,4.28931],[-64.84028,4.24665],[-64.48379,3.7879],[-64.02908,2.79797],[-64.0257,2.48156],[-63.39114,2.4317],[-63.39827,2.16098],[-64.06135,1.94722],[-64.08274,1.64792],[-64.34654,1.35569],[-64.38932,1.5125],[-65.11657,1.12046],[-65.57288,.62856],[-65.50158,.92086],[-65.6727,1.01353],[-66.28507,.74585],[-66.85795,1.22998],[-67.08222,1.17441],[-67.15784,1.80439],[-67.299,1.87494],[-67.40488,2.22258],[-67.9292,1.82455],[-68.18632,2.00091],[-68.26699,1.83463],[-68.18128,1.72881],[-69.38621,1.70865],[-69.53746,1.76408],[-69.83491,1.69353],[-69.82987,1.07864],[-69.26017,1.06856],[-69.14422,.84172],[-69.20976,.57958],[-69.47696,.71065],[-70.04162,.55437],[-70.03658,-.19681],[-69.603,-.51947],[-69.59796,-.75136],[-69.4215,-1.01853],[-69.43395,-1.42219],[-69.94708,-4.2431],[-70.00888,-4.37833],[-70.11305,-4.27281],[-70.19582,-4.3607],[-70.33236,-4.15214],[-70.77601,-4.15717],[-70.96814,-4.36915],[-71.87003,-4.51661],[-72.64391,-5.0391],[-72.83973,-5.14765],[-73.24579,-6.05764],[-73.12983,-6.43852],[-73.73986,-6.87919],[-73.77011,-7.28944],[-73.96938,-7.58465],[-73.65485,-7.77897],[-73.76576,-7.89884],[-72.92886,-9.04074],[-73.21498,-9.40904],[-72.72216,-9.41397],[-72.31883,-9.5184],[-72.14742,-9.98049],[-71.23394,-9.9668],[-70.53373,-9.42628],[-70.58453,-9.58303],[-70.55429,-9.76692],[-70.62487,-9.80666],[-70.64134,-11.0108],[-70.51395,-10.92249],[-70.38791,-11.07096],[-69.90896,-10.92744],[-69.57835,-10.94051],[-69.57156,-10.94555],[-69.47839,-10.95254],[-69.42792,-10.93451],[-68.74802,-11.00891],[-68.75265,-11.02383],[-68.75179,-11.03688],[-68.7651,-11.0496],[-68.71533,-11.14749],[-67.17784,-10.34016],[-65.68343,-9.75323],[-65.56244,-9.84266],[-65.40615,-9.63894],[-65.29019,-9.86253],[-65.37923,-10.35141],[-65.35402,-10.78685],[-65.28141,-10.86289],[-65.30027,-11.48749],[-64.99778,-11.98604],[-64.30708,-12.46398],[-64.22539,-12.45267],[-63.90248,-12.52544],[-63.76259,-12.42952],[-61.81151,-13.49564],[-61.05527,-13.50054],[-60.48053,-13.77981],[-60.46037,-14.22496],[-60.27887,-14.63021],[-60.23968,-15.09515],[-60.58224,-15.09887],[-60.23797,-15.50267],[-60.16069,-16.26479],[-58.41506,-16.32636],[-58.32431,-16.25861],[-58.30918,-16.3699],[-58.5058,-16.80958],[-58.32935,-17.28195],[-57.99661,-17.5273],[-57.90082,-17.44555],[-57.73949,-17.56095],[-57.69877,-17.8431],[-57.48237,-18.24219],[-57.56807,-18.25655],[-57.76764,-18.90087],[-57.71995,-18.89573],[-57.71995,-18.97546],[-57.69134,-19.00544],[-57.71113,-19.03161],[-57.78463,-19.03259],[-58.14215,-19.76276],[-57.8496,-19.98346],[-58.16225,-20.16193],[-57.84536,-20.93155],[-57.93492,-21.65505],[-57.88239,-21.6868],[-57.94642,-21.73799],[-57.98625,-22.09157],[-56.6508,-22.28387],[-56.5212,-22.11556],[-56.45893,-22.08072],[-56.23206,-22.25347],[-55.8331,-22.29008],[-55.74941,-22.46436],[-55.741,-22.52018],[-55.72366,-22.5519],[-55.6986,-22.56268],[-55.68742,-22.58407],[-55.62493,-22.62765],[-55.63849,-22.95122],[-55.5446,-23.22811],[-55.52288,-23.2595],[-55.5555,-23.28237],[-55.43585,-23.87157],[-55.44117,-23.9185],[-55.41784,-23.9657],[-55.12292,-23.99669],[-55.0518,-23.98666],[-55.02691,-23.97317],[-54.6238,-23.83078],[-54.32807,-24.01865],[-54.28207,-24.07305],[-54.4423,-25.13381],[-54.62033,-25.46026],[-54.60196,-25.48397],[-54.59509,-25.53696],[-54.59398,-25.59224],[-54.5502,-25.58915],[-54.52926,-25.62846],[-53.90831,-25.55513],[-53.83691,-25.94849],[-53.73511,-26.04211],[-53.73086,-26.05842],[-53.7264,-26.0664],[-53.73391,-26.07006],[-53.73968,-26.10012],[-53.65018,-26.19501],[-53.65237,-26.23289],[-53.63739,-26.2496],[-53.63881,-26.25075],[-53.64632,-26.24798],[-53.64186,-26.25976],[-53.64505,-26.28089],[-53.68269,-26.33359],[-53.73372,-26.6131],[-53.80144,-27.09844],[-54.15978,-27.2889],[-54.19062,-27.27639],[-54.19268,-27.30751],[-54.41888,-27.40882],[-54.50416,-27.48232],[-54.67657,-27.57214],[-54.90159,-27.63132],[-54.90805,-27.73149],[-55.1349,-27.89759],[-55.16872,-27.86224],[-55.33303,-27.94661],[-55.6262,-28.17124],[-55.65418,-28.18304],[-56.01729,-28.51223],[-56.00458,-28.60421],[-56.05265,-28.62651],[-56.54171,-29.11447],[-56.57295,-29.11357],[-56.62789,-29.18073],[-56.81251,-29.48154],[-57.09386,-29.74211],[-57.65132,-30.19229],[-57.22502,-30.26121],[-56.90236,-30.02578],[-56.49267,-30.39471],[-56.4795,-30.3899],[-56.4619,-30.38457],[-55.87388,-31.05053],[-55.58866,-30.84117],[-55.5634,-30.8686],[-55.55373,-30.8732],[-55.55218,-30.88193],[-55.54572,-30.89051],[-55.53431,-30.89714],[-55.53276,-30.90218],[-55.52712,-30.89997],[-55.51862,-30.89828],[-55.50841,-30.9027],[-55.50821,-30.91349],[-54.17384,-31.86168],[-53.76024,-32.0751],[-53.39572,-32.58596],[-53.37671,-32.57005],[-53.1111,-32.71147],[-53.53459,-33.16843],[-53.52794,-33.68908],[-53.44031,-33.69344],[-53.39593,-33.75169],[-53.37138,-33.74313],[-52.83257,-34.01481],[-28.34015,-20.99094],[-28.99601,1.86593],[-51.35485,4.8383],[-51.63798,4.51394],[-51.61983,4.14596],[-51.79599,3.89336],[-51.82312,3.85825],[-51.85573,3.83427],[-52.31787,3.17896],[-52.6906,2.37298],[-52.96539,2.1881],[-53.78743,2.34412],[-54.16286,2.10779],[-54.6084,2.32856],[-55.01919,2.564],[-55.71493,2.40342],[-55.96292,2.53188],[-56.13054,2.27723],[-55.92159,2.05236],[-55.89863,1.89861],[-55.99278,1.83137],[-56.47045,1.95135],[-56.7659,1.89509],[-57.07092,1.95304],[-57.09109,2.01854],[-57.23981,1.95808],[-57.35073,1.98327],[-57.55743,1.69605],[-57.77281,1.73344],[-57.97336,1.64566],[-58.01873,1.51966],[-58.33887,1.58014],[-58.4858,1.48399],[-58.53571,1.29154],[-58.84229,1.17749],[-58.92072,1.31293],[-59.25583,1.40559],[-59.74066,1.87596],[-59.7264,2.27497],[-59.91177,2.36759],[-59.99733,2.92312],[-59.79769,3.37162],[-59.86899,3.57089],[-59.51963,3.91951],[-59.73353,4.20399],[-59.69361,4.34069]]]]}},{type:"Feature",properties:{iso1A2:"BS",iso1A3:"BHS",iso1N3:"044",wikidata:"Q778",nameEn:"The Bahamas",groups:["029","003","419","019"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["1 242"]},geometry:{type:"MultiPolygon",coordinates:[[[[-72.98446,20.4801],[-71.70065,25.7637],[-79.14818,27.83105],[-79.89631,24.6597],[-80.88924,23.80416],[-72.98446,20.4801]]]]}},{type:"Feature",properties:{iso1A2:"BT",iso1A3:"BTN",iso1N3:"064",wikidata:"Q917",nameEn:"Bhutan",groups:["034","142"],driveSide:"left",callingCodes:["975"]},geometry:{type:"MultiPolygon",coordinates:[[[[91.6469,27.76358],[91.5629,27.84823],[91.48973,27.93903],[91.46327,28.0064],[91.25779,28.07509],[91.20019,27.98715],[90.69894,28.07784],[90.58842,28.02838],[90.13387,28.19178],[89.79762,28.23979],[89.59525,28.16433],[89.12825,27.62502],[89.0582,27.60985],[88.97213,27.51671],[88.95355,27.4106],[89.00216,27.32532],[88.96947,27.30319],[88.93678,27.33777],[88.91901,27.32483],[88.74219,27.144],[88.86984,27.10937],[88.8714,26.97488],[88.92301,26.99286],[88.95807,26.92668],[89.09554,26.89089],[89.12825,26.81661],[89.1926,26.81329],[89.37913,26.86224],[89.38319,26.85963],[89.3901,26.84225],[89.42349,26.83727],[89.63369,26.74402],[89.86124,26.73307],[90.04535,26.72422],[90.30402,26.85098],[90.39271,26.90704],[90.48504,26.8594],[90.67715,26.77215],[91.50067,26.79223],[91.83181,26.87318],[92.05523,26.8692],[92.11863,26.893],[92.03457,27.07334],[92.04702,27.26861],[92.12019,27.27829],[92.01132,27.47352],[91.65007,27.48287],[91.55819,27.6144],[91.6469,27.76358]]]]}},{type:"Feature",properties:{iso1A2:"BV",iso1A3:"BVT",iso1N3:"074",wikidata:"Q23408",nameEn:"Bouvet Island",country:"NO",groups:["005","419","019"]},geometry:{type:"MultiPolygon",coordinates:[[[[4.54042,-54.0949],[2.28941,-54.13089],[3.35353,-55.17558],[4.54042,-54.0949]]]]}},{type:"Feature",properties:{iso1A2:"BW",iso1A3:"BWA",iso1N3:"072",wikidata:"Q963",nameEn:"Botswana",groups:["018","202","002"],driveSide:"left",callingCodes:["267"]},geometry:{type:"MultiPolygon",coordinates:[[[[25.26433,-17.79571],[25.16882,-17.78253],[25.05895,-17.84452],[24.95586,-17.79674],[24.73364,-17.89338],[24.71887,-17.9218],[24.6303,-17.9863],[24.57485,-18.07151],[24.40577,-17.95726],[24.19416,-18.01919],[23.61088,-18.4881],[23.29618,-17.99855],[23.0996,-18.00075],[21.45556,-18.31795],[20.99904,-18.31743],[20.99751,-22.00026],[19.99912,-21.99991],[19.99817,-24.76768],[20.02809,-24.78725],[20.03678,-24.81004],[20.29826,-24.94869],[20.64795,-25.47827],[20.86081,-26.14892],[20.61754,-26.4692],[20.63275,-26.78181],[20.68596,-26.9039],[20.87031,-26.80047],[21.13353,-26.86661],[21.37869,-26.82083],[21.69322,-26.86152],[21.7854,-26.79199],[21.77114,-26.69015],[21.83291,-26.65959],[21.90703,-26.66808],[22.06192,-26.61882],[22.21206,-26.3773],[22.41921,-26.23078],[22.56365,-26.19668],[22.70808,-25.99186],[22.86012,-25.50572],[23.03497,-25.29971],[23.47588,-25.29971],[23.9244,-25.64286],[24.18287,-25.62916],[24.36531,-25.773],[24.44703,-25.73021],[24.67319,-25.81749],[24.8946,-25.80723],[25.01718,-25.72507],[25.12266,-25.75931],[25.33076,-25.76616],[25.58543,-25.6343],[25.6643,-25.4491],[25.69661,-25.29284],[25.72702,-25.25503],[25.88571,-24.87802],[25.84295,-24.78661],[25.8515,-24.75727],[26.39409,-24.63468],[26.46346,-24.60358],[26.51667,-24.47219],[26.84165,-24.24885],[26.99749,-23.65486],[27.33768,-23.40917],[27.52393,-23.37952],[27.6066,-23.21894],[27.74154,-23.2137],[27.93539,-23.04941],[27.93729,-22.96194],[28.04752,-22.90243],[28.04562,-22.8394],[28.34874,-22.5694],[28.63287,-22.55887],[28.91889,-22.44299],[29.0151,-22.22907],[29.10881,-22.21202],[29.15268,-22.21399],[29.18974,-22.18599],[29.21955,-22.17771],[29.37703,-22.19581],[29.3533,-22.18363],[29.24648,-22.05967],[29.1974,-22.07472],[29.14501,-22.07275],[29.08495,-22.04867],[29.04108,-22.00563],[29.02191,-21.95665],[29.02191,-21.90647],[29.04023,-21.85864],[29.07763,-21.81877],[28.58114,-21.63455],[28.49942,-21.66634],[28.29416,-21.59037],[28.01669,-21.57624],[27.91407,-21.31621],[27.69171,-21.08409],[27.72972,-20.51735],[27.69361,-20.48531],[27.28865,-20.49873],[27.29831,-20.28935],[27.21278,-20.08244],[26.72246,-19.92707],[26.17227,-19.53709],[25.96226,-19.08152],[25.99837,-19.02943],[25.94326,-18.90362],[25.82353,-18.82808],[25.79217,-18.6355],[25.68859,-18.56165],[25.53465,-18.39041],[25.39972,-18.12691],[25.31799,-18.07091],[25.23909,-17.90832],[25.26433,-17.79571]]]]}},{type:"Feature",properties:{iso1A2:"BY",iso1A3:"BLR",iso1N3:"112",wikidata:"Q184",nameEn:"Belarus",groups:["151","150"],callingCodes:["375"]},geometry:{type:"MultiPolygon",coordinates:[[[[28.15217,56.16964],[27.97865,56.11849],[27.63065,55.89687],[27.61683,55.78558],[27.3541,55.8089],[27.27804,55.78299],[27.1559,55.85032],[26.97153,55.8102],[26.87448,55.7172],[26.76872,55.67658],[26.71802,55.70645],[26.64888,55.70515],[26.63231,55.67968],[26.63167,55.57887],[26.55094,55.5093],[26.5522,55.40277],[26.44937,55.34832],[26.5709,55.32572],[26.6714,55.33902],[26.80929,55.31642],[26.83266,55.30444],[26.835,55.28182],[26.73017,55.24226],[26.72983,55.21788],[26.68075,55.19787],[26.69243,55.16718],[26.54753,55.14181],[26.51481,55.16051],[26.46249,55.12814],[26.35121,55.1525],[26.30628,55.12536],[26.23202,55.10439],[26.26941,55.08032],[26.20397,54.99729],[26.13386,54.98924],[26.05907,54.94631],[25.99129,54.95705],[25.89462,54.93438],[25.74122,54.80108],[25.75977,54.57252],[25.68045,54.5321],[25.64813,54.48704],[25.62203,54.4656],[25.63371,54.42075],[25.5376,54.33158],[25.55425,54.31591],[25.68513,54.31727],[25.78553,54.23327],[25.78563,54.15747],[25.71084,54.16704],[25.64875,54.1259],[25.54724,54.14925],[25.51452,54.17799],[25.56823,54.25212],[25.509,54.30267],[25.35559,54.26544],[25.22705,54.26271],[25.19199,54.219],[25.0728,54.13419],[24.991,54.14241],[24.96894,54.17589],[24.77131,54.11091],[24.85311,54.02862],[24.74279,53.96663],[24.69185,53.96543],[24.69652,54.01901],[24.62275,54.00217],[24.44411,53.90076],[24.34128,53.90076],[24.19638,53.96405],[23.98837,53.92554],[23.95098,53.9613],[23.81309,53.94205],[23.80543,53.89558],[23.71726,53.93379],[23.61677,53.92691],[23.51284,53.95052],[23.62004,53.60942],[23.81995,53.24131],[23.85657,53.22923],[23.91393,53.16469],[23.87548,53.0831],[23.92184,53.02079],[23.94689,52.95919],[23.91805,52.94016],[23.93763,52.71332],[23.73615,52.6149],[23.58296,52.59868],[23.45112,52.53774],[23.34141,52.44845],[23.18196,52.28812],[23.20071,52.22848],[23.47859,52.18215],[23.54314,52.12148],[23.61,52.11264],[23.64066,52.07626],[23.68733,51.9906],[23.61523,51.92066],[23.62691,51.78208],[23.53198,51.74298],[23.57053,51.55938],[23.56236,51.53673],[23.62751,51.50512],[23.6736,51.50255],[23.60906,51.62122],[23.7766,51.66809],[23.91118,51.63316],[23.8741,51.59734],[23.99907,51.58369],[24.13075,51.66979],[24.3163,51.75063],[24.29021,51.80841],[24.37123,51.88222],[24.98784,51.91273],[25.20228,51.97143],[25.46163,51.92205],[25.73673,51.91973],[25.80574,51.94556],[25.83217,51.92587],[26.00408,51.92967],[26.19084,51.86781],[26.39367,51.87315],[26.46962,51.80501],[26.69759,51.82284],[26.80043,51.75777],[26.9489,51.73788],[26.99422,51.76933],[27.20602,51.77291],[27.20948,51.66713],[27.26613,51.65957],[27.24828,51.60161],[27.47212,51.61184],[27.51058,51.5854],[27.55727,51.63486],[27.71932,51.60672],[27.67125,51.50854],[27.76052,51.47604],[27.85253,51.62293],[27.91844,51.61952],[27.95827,51.56065],[28.10658,51.57857],[28.23452,51.66988],[28.37592,51.54505],[28.47051,51.59734],[28.64429,51.5664],[28.69161,51.44695],[28.73143,51.46236],[28.75615,51.41442],[28.78224,51.45294],[28.76027,51.48802],[28.81795,51.55552],[28.95528,51.59222],[28.99098,51.56833],[29.1187,51.65872],[29.16402,51.64679],[29.20659,51.56918],[29.25603,51.57089],[29.25191,51.49828],[29.32881,51.37843],[29.42357,51.4187],[29.49773,51.39814],[29.54372,51.48372],[29.7408,51.53417],[29.77376,51.4461],[30.17888,51.51025],[30.34642,51.42555],[30.36153,51.33984],[30.56203,51.25655],[30.64992,51.35014],[30.51946,51.59649],[30.68804,51.82806],[30.76443,51.89739],[30.90897,52.00699],[30.95589,52.07775],[31.13332,52.1004],[31.25142,52.04131],[31.38326,52.12991],[31.7822,52.11406],[31.77877,52.18636],[31.6895,52.1973],[31.70735,52.26711],[31.57971,52.32146],[31.62084,52.33849],[31.61397,52.48843],[31.56316,52.51518],[31.63869,52.55361],[31.50406,52.69707],[31.57277,52.71613],[31.592,52.79011],[31.35667,52.97854],[31.24147,53.031],[31.32283,53.04101],[31.33519,53.08805],[31.3915,53.09712],[31.36403,53.13504],[31.40523,53.21406],[31.56316,53.19432],[31.62496,53.22886],[31.787,53.18033],[31.82373,53.10042],[32.15368,53.07594],[32.40773,53.18856],[32.51725,53.28431],[32.73257,53.33494],[32.74968,53.45597],[32.47777,53.5548],[32.40499,53.6656],[32.50112,53.68594],[32.45717,53.74039],[32.36663,53.7166],[32.12621,53.81586],[31.89137,53.78099],[31.77028,53.80015],[31.85019,53.91801],[31.88744,54.03653],[31.89599,54.0837],[31.57002,54.14535],[31.30791,54.25315],[31.3177,54.34067],[31.22945,54.46585],[31.08543,54.50361],[31.21399,54.63113],[31.19339,54.66947],[30.99187,54.67046],[30.98226,54.68872],[31.0262,54.70698],[30.97127,54.71967],[30.95479,54.74346],[30.75165,54.80699],[30.8264,54.90062],[30.81759,54.94064],[30.93144,54.9585],[30.95754,54.98609],[30.9081,55.02232],[30.94243,55.03964],[31.00972,55.02783],[31.02071,55.06167],[30.97369,55.17134],[30.87944,55.28223],[30.81946,55.27931],[30.8257,55.3313],[30.93144,55.3914],[30.90123,55.46621],[30.95204,55.50667],[30.93419,55.6185],[30.86003,55.63169],[30.7845,55.58514],[30.72957,55.66268],[30.67464,55.64176],[30.63344,55.73079],[30.51037,55.76568],[30.51346,55.78982],[30.48257,55.81066],[30.30987,55.83592],[30.27776,55.86819],[30.12136,55.8358],[29.97975,55.87281],[29.80672,55.79569],[29.61446,55.77716],[29.51283,55.70294],[29.3604,55.75862],[29.44692,55.95978],[29.21717,55.98971],[29.08299,56.03427],[28.73418,55.97131],[28.63668,56.07262],[28.68337,56.10173],[28.5529,56.11705],[28.43068,56.09407],[28.37987,56.11399],[28.36888,56.05805],[28.30571,56.06035],[28.15217,56.16964]]]]}},{type:"Feature",properties:{iso1A2:"BZ",iso1A3:"BLZ",iso1N3:"084",wikidata:"Q242",nameEn:"Belize",groups:["013","003","419","019"],roadSpeedUnit:"mph",callingCodes:["501"]},geometry:{type:"MultiPolygon",coordinates:[[[[-88.3268,18.49048],[-88.48242,18.49164],[-88.71505,18.0707],[-88.8716,17.89535],[-89.03839,18.0067],[-89.15105,17.95104],[-89.14985,17.81563],[-89.15025,17.04813],[-89.22683,15.88619],[-89.17418,15.90898],[-89.02415,15.9063],[-88.95358,15.88698],[-88.40779,16.09624],[-86.92368,17.61462],[-87.84815,18.18511],[-87.85693,18.18266],[-87.86657,18.19971],[-87.87604,18.18313],[-87.90671,18.15213],[-88.03165,18.16657],[-88.03238,18.41778],[-88.26593,18.47617],[-88.29909,18.47591],[-88.3268,18.49048]]]]}},{type:"Feature",properties:{iso1A2:"CA",iso1A3:"CAN",iso1N3:"124",wikidata:"Q16",nameEn:"Canada",groups:["021","003","019"],callingCodes:["1"]},geometry:{type:"MultiPolygon",coordinates:[[[[-67.20349,45.1722],[-67.19603,45.16771],[-67.15965,45.16179],[-67.11316,45.11176],[-67.0216,44.95333],[-66.96824,44.90965],[-66.98249,44.87071],[-66.96824,44.83078],[-66.93432,44.82597],[-67.16117,44.20069],[-61.98255,37.34815],[-56.27503,47.39728],[-53.12387,41.40385],[-46.37635,57.3249],[-76.75614,76.72014],[-68.21821,80.48551],[-45.47832,84.58738],[-140.97446,84.39275],[-141.00116,60.30648],[-140.5227,60.22077],[-140.45648,60.30919],[-139.98024,60.18027],[-139.68991,60.33693],[-139.05831,60.35205],[-139.20603,60.08896],[-139.05365,59.99655],[-138.71149,59.90728],[-138.62145,59.76431],[-137.60623,59.24465],[-137.4925,58.89415],[-136.82619,59.16198],[-136.52365,59.16752],[-136.47323,59.46617],[-136.33727,59.44466],[-136.22381,59.55526],[-136.31566,59.59083],[-135.48007,59.79937],[-135.03069,59.56208],[-135.00267,59.28745],[-134.7047,59.2458],[-134.55699,59.1297],[-134.48059,59.13231],[-134.27175,58.8634],[-133.84645,58.73543],[-133.38523,58.42773],[-131.8271,56.62247],[-130.77769,56.36185],[-130.33965,56.10849],[-130.10173,56.12178],[-130.00093,56.00325],[-130.00857,55.91344],[-130.15373,55.74895],[-129.97513,55.28029],[-130.08035,55.21556],[-130.18765,55.07744],[-130.27203,54.97174],[-130.44184,54.85377],[-130.64499,54.76912],[-130.61931,54.70835],[-133.92876,54.62289],[-133.36909,48.51151],[-125.03842,48.53282],[-123.50039,48.21223],[-123.15614,48.35395],[-123.26565,48.6959],[-123.0093,48.76586],[-123.0093,48.83186],[-123.32163,49.00419],[-117.03266,49.00056],[-116.04938,48.99999],[-114.0683,48.99885],[-110.0051,48.99901],[-104.05004,48.99925],[-101.36198,48.99935],[-97.24024,48.99952],[-95.15355,48.9996],[-95.15357,49.384],[-95.12903,49.37056],[-95.05825,49.35311],[-95.01419,49.35647],[-94.99532,49.36579],[-94.95681,49.37035],[-94.85381,49.32492],[-94.8159,49.32299],[-94.82487,49.29483],[-94.77355,49.11998],[-94.75017,49.09931],[-94.687,48.84077],[-94.70087,48.8339],[-94.70486,48.82365],[-94.69669,48.80918],[-94.69335,48.77883],[-94.58903,48.71803],[-94.54885,48.71543],[-94.53826,48.70216],[-94.44258,48.69223],[-94.4174,48.71049],[-94.27153,48.70232],[-94.25172,48.68404],[-94.25104,48.65729],[-94.23215,48.65202],[-93.85769,48.63284],[-93.83288,48.62745],[-93.80676,48.58232],[-93.80939,48.52439],[-93.79267,48.51631],[-93.66382,48.51845],[-93.47022,48.54357],[-93.44472,48.59147],[-93.40693,48.60948],[-93.39758,48.60364],[-93.3712,48.60599],[-93.33946,48.62787],[-93.25391,48.64266],[-92.94973,48.60866],[-92.7287,48.54005],[-92.6342,48.54133],[-92.62747,48.50278],[-92.69927,48.49573],[-92.71323,48.46081],[-92.65606,48.43471],[-92.50712,48.44921],[-92.45588,48.40624],[-92.48147,48.36609],[-92.37185,48.22259],[-92.27167,48.25046],[-92.30939,48.31251],[-92.26662,48.35651],[-92.202,48.35252],[-92.14732,48.36578],[-92.05339,48.35958],[-91.98929,48.25409],[-91.86125,48.21278],[-91.71231,48.19875],[-91.70451,48.11805],[-91.55649,48.10611],[-91.58025,48.04339],[-91.45829,48.07454],[-91.43248,48.04912],[-91.25025,48.08522],[-91.08016,48.18096],[-90.87588,48.2484],[-90.75045,48.09143],[-90.56444,48.12184],[-90.56312,48.09488],[-90.07418,48.11043],[-89.89974,47.98109],[-89.77248,48.02607],[-89.57972,48.00023],[-89.48837,48.01412],[-88.37033,48.30586],[-84.85871,46.88881],[-84.55635,46.45974],[-84.47607,46.45225],[-84.4481,46.48972],[-84.42101,46.49853],[-84.34174,46.50683],[-84.29893,46.49127],[-84.26351,46.49508],[-84.2264,46.53337],[-84.1945,46.54061],[-84.17723,46.52753],[-84.12885,46.53068],[-84.11196,46.50248],[-84.13451,46.39218],[-84.11254,46.32329],[-84.11615,46.2681],[-84.09756,46.25512],[-84.1096,46.23987],[-83.95399,46.05634],[-83.90453,46.05922],[-83.83329,46.12169],[-83.57017,46.105],[-83.43746,45.99749],[-83.59589,45.82131],[-82.48419,45.30225],[-82.42469,42.992],[-82.4146,42.97626],[-82.4253,42.95423],[-82.45331,42.93139],[-82.4826,42.8068],[-82.46613,42.76615],[-82.51063,42.66025],[-82.51858,42.611],[-82.57583,42.5718],[-82.58873,42.54984],[-82.64242,42.55594],[-82.82964,42.37355],[-83.02253,42.33045],[-83.07837,42.30978],[-83.09837,42.28877],[-83.12724,42.2376],[-83.14962,42.04089],[-83.11184,41.95671],[-82.67862,41.67615],[-78.93684,42.82887],[-78.90712,42.89733],[-78.90905,42.93022],[-78.93224,42.95229],[-78.96312,42.95509],[-78.98126,42.97],[-79.02074,42.98444],[-79.02424,43.01983],[-78.99941,43.05612],[-79.01055,43.06659],[-79.07486,43.07845],[-79.05671,43.10937],[-79.06881,43.12029],[-79.0427,43.13934],[-79.04652,43.16396],[-79.05384,43.17418],[-79.05002,43.20133],[-79.05544,43.21224],[-79.05512,43.25375],[-79.06921,43.26183],[-79.25796,43.54052],[-76.79706,43.63099],[-76.43859,44.09393],[-76.35324,44.13493],[-76.31222,44.19894],[-76.244,44.19643],[-76.1664,44.23051],[-76.16285,44.28262],[-76.00018,44.34896],[-75.95947,44.34463],[-75.8217,44.43176],[-75.76813,44.51537],[-75.41441,44.76614],[-75.2193,44.87821],[-75.01363,44.95608],[-74.99101,44.98051],[-74.8447,45.00606],[-74.66689,45.00646],[-74.32699,44.99029],[-73.35025,45.00942],[-71.50067,45.01357],[-71.48735,45.07784],[-71.42778,45.12624],[-71.40364,45.21382],[-71.44252,45.2361],[-71.37133,45.24624],[-71.29371,45.29996],[-71.22338,45.25184],[-71.19723,45.25438],[-71.14568,45.24128],[-71.08364,45.30623],[-71.01866,45.31573],[-71.0107,45.34819],[-70.95193,45.33895],[-70.91169,45.29849],[-70.89864,45.2398],[-70.84816,45.22698],[-70.80236,45.37444],[-70.82638,45.39828],[-70.78372,45.43269],[-70.65383,45.37592],[-70.62518,45.42286],[-70.72651,45.49771],[-70.68516,45.56964],[-70.54019,45.67291],[-70.38934,45.73215],[-70.41523,45.79497],[-70.25976,45.89675],[-70.24694,45.95138],[-70.31025,45.96424],[-70.23855,46.1453],[-70.29078,46.18832],[-70.18547,46.35357],[-70.05812,46.41768],[-69.99966,46.69543],[-69.22119,47.46461],[-69.05148,47.42012],[-69.05073,47.30076],[-69.05039,47.2456],[-68.89222,47.1807],[-68.70125,47.24399],[-68.60575,47.24659],[-68.57914,47.28431],[-68.38332,47.28723],[-68.37458,47.35851],[-68.23244,47.35712],[-67.94843,47.1925],[-67.87993,47.10377],[-67.78578,47.06473],[-67.78111,45.9392],[-67.75196,45.91814],[-67.80961,45.87531],[-67.75654,45.82324],[-67.80653,45.80022],[-67.80705,45.69528],[-67.6049,45.60725],[-67.43815,45.59162],[-67.42144,45.50584],[-67.50578,45.48971],[-67.42394,45.37969],[-67.48201,45.27351],[-67.34927,45.122],[-67.29754,45.14865],[-67.29748,45.18173],[-67.27039,45.1934],[-67.22751,45.16344],[-67.20349,45.1722]]]]}},{type:"Feature",properties:{iso1A2:"CC",iso1A3:"CCK",iso1N3:"166",wikidata:"Q36004",nameEn:"Cocos (Keeling) Islands",country:"AU",groups:["053","009"],driveSide:"left",callingCodes:["61"]},geometry:{type:"MultiPolygon",coordinates:[[[[96.61846,-10.82438],[96.02343,-12.68334],[97.93979,-12.33309],[96.61846,-10.82438]]]]}},{type:"Feature",properties:{iso1A2:"CD",iso1A3:"COD",iso1N3:"180",wikidata:"Q974",nameEn:"Democratic Republic of the Congo",aliases:["ZR"],groups:["017","202","002"],callingCodes:["243"]},geometry:{type:"MultiPolygon",coordinates:[[[[27.44012,5.07349],[27.09575,5.22305],[26.93064,5.13535],[26.85579,5.03887],[26.74572,5.10685],[26.48595,5.04984],[26.13371,5.25594],[25.86073,5.19455],[25.53271,5.37431],[25.34558,5.29101],[25.31256,5.03668],[24.71816,4.90509],[24.46719,5.0915],[23.38847,4.60013],[22.94817,4.82392],[22.89094,4.79321],[22.84691,4.69887],[22.78526,4.71423],[22.6928,4.47285],[22.60915,4.48821],[22.5431,4.22041],[22.45504,4.13039],[22.27682,4.11347],[22.10721,4.20723],[21.6405,4.317],[21.55904,4.25553],[21.25744,4.33676],[21.21341,4.29285],[21.11214,4.33895],[21.08793,4.39603],[20.90383,4.44877],[20.60184,4.42394],[18.62755,3.47564],[18.63857,3.19342],[18.10683,2.26876],[18.08034,1.58553],[17.85887,1.04327],[17.86989,.58873],[17.95255,.48128],[17.93877,.32424],[17.81204,.23884],[17.66051,-.26535],[17.72112,-.52707],[17.32438,-.99265],[16.97999,-1.12762],[16.70724,-1.45815],[16.50336,-1.8795],[16.16173,-2.16586],[16.22785,-2.59528],[16.1755,-3.25014],[16.21407,-3.2969],[15.89448,-3.9513],[15.53081,-4.042],[15.48121,-4.22062],[15.41785,-4.28381],[15.32693,-4.27282],[15.25411,-4.31121],[15.1978,-4.32388],[14.83101,-4.80838],[14.67948,-4.92093],[14.5059,-4.84956],[14.41499,-4.8825],[14.37366,-4.56125],[14.47284,-4.42941],[14.3957,-4.36623],[14.40672,-4.28381],[13.9108,-4.50906],[13.81162,-4.41842],[13.71794,-4.44864],[13.70417,-4.72601],[13.50305,-4.77818],[13.41764,-4.89897],[13.11182,-4.5942],[13.09648,-4.63739],[13.11195,-4.67745],[12.8733,-4.74346],[12.70868,-4.95505],[12.63465,-4.94632],[12.60251,-5.01715],[12.46297,-5.09408],[12.49815,-5.14058],[12.51589,-5.1332],[12.53586,-5.14658],[12.53599,-5.1618],[12.52301,-5.17481],[12.52318,-5.74353],[12.26557,-5.74031],[12.20376,-5.76338],[11.95767,-5.94705],[12.42245,-6.07585],[13.04371,-5.87078],[16.55507,-5.85631],[16.96282,-7.21787],[17.5828,-8.13784],[18.33635,-8.00126],[19.33698,-7.99743],[19.5469,-7.00195],[20.30218,-6.98955],[20.31846,-6.91953],[20.61689,-6.90876],[20.56263,-7.28566],[21.79824,-7.29628],[21.84856,-9.59871],[22.19039,-9.94628],[22.32604,-10.76291],[22.17954,-10.85884],[22.25951,-11.24911],[22.54205,-11.05784],[23.16602,-11.10577],[23.45631,-10.946],[23.86868,-11.02856],[24.00027,-10.89356],[24.34528,-11.06816],[24.42612,-11.44975],[25.34069,-11.19707],[25.33058,-11.65767],[26.01777,-11.91488],[26.88687,-12.01868],[27.04351,-11.61312],[27.22541,-11.60323],[27.21025,-11.76157],[27.59932,-12.22123],[28.33199,-12.41375],[29.01918,-13.41353],[29.60531,-13.21685],[29.65078,-13.41844],[29.81551,-13.44683],[29.8139,-12.14898],[29.48404,-12.23604],[29.4992,-12.43843],[29.18592,-12.37921],[28.48357,-11.87532],[28.37241,-11.57848],[28.65032,-10.65133],[28.62795,-9.92942],[28.68532,-9.78],[28.56208,-9.49122],[28.51627,-9.44726],[28.52636,-9.35379],[28.36562,-9.30091],[28.38526,-9.23393],[28.9711,-8.66935],[28.88917,-8.4831],[30.79243,-8.27382],[30.2567,-7.14121],[29.52552,-6.2731],[29.43673,-4.44845],[29.23708,-3.75856],[29.21463,-3.3514],[29.25633,-3.05471],[29.17258,-2.99385],[29.16037,-2.95457],[29.09797,-2.91935],[29.09119,-2.87871],[29.0505,-2.81774],[29.00404,-2.81978],[29.00167,-2.78523],[29.04081,-2.7416],[29.00357,-2.70596],[28.94346,-2.69124],[28.89793,-2.66111],[28.90226,-2.62385],[28.89288,-2.55848],[28.87943,-2.55165],[28.86193,-2.53185],[28.86209,-2.5231],[28.87497,-2.50887],[28.88846,-2.50493],[28.89342,-2.49017],[28.89132,-2.47557],[28.86846,-2.44866],[28.86826,-2.41888],[28.89601,-2.37321],[28.95642,-2.37321],[29.00051,-2.29001],[29.105,-2.27043],[29.17562,-2.12278],[29.11847,-1.90576],[29.24458,-1.69663],[29.24323,-1.66826],[29.36322,-1.50887],[29.45038,-1.5054],[29.53062,-1.40499],[29.59061,-1.39016],[29.58388,-.89821],[29.63006,-.8997],[29.62708,-.71055],[29.67176,-.55714],[29.67474,-.47969],[29.65091,-.46777],[29.72687,-.08051],[29.7224,.07291],[29.77454,.16675],[29.81922,.16824],[29.87284,.39166],[29.97413,.52124],[29.95477,.64486],[29.98307,.84295],[30.1484,.89805],[30.22139,.99635],[30.24671,1.14974],[30.48503,1.21675],[31.30127,2.11006],[31.28042,2.17853],[31.20148,2.2217],[31.1985,2.29462],[31.12104,2.27676],[31.07934,2.30207],[31.06593,2.35862],[30.96911,2.41071],[30.91102,2.33332],[30.83059,2.42559],[30.74271,2.43601],[30.75612,2.5863],[30.8857,2.83923],[30.8574,2.9508],[30.77101,3.04897],[30.84251,3.26908],[30.93486,3.40737],[30.94081,3.50847],[30.85153,3.48867],[30.85997,3.5743],[30.80713,3.60506],[30.78512,3.67097],[30.56277,3.62703],[30.57378,3.74567],[30.55396,3.84451],[30.47691,3.83353],[30.27658,3.95653],[30.22374,3.93896],[30.1621,4.10586],[30.06964,4.13221],[29.79666,4.37809],[29.82087,4.56246],[29.49726,4.7007],[29.43341,4.50101],[29.22207,4.34297],[29.03054,4.48784],[28.8126,4.48784],[28.6651,4.42638],[28.20719,4.35614],[27.79551,4.59976],[27.76469,4.79284],[27.65462,4.89375],[27.56656,4.89375],[27.44012,5.07349]]]]}},{type:"Feature",properties:{iso1A2:"CF",iso1A3:"CAF",iso1N3:"140",wikidata:"Q929",nameEn:"Central African Republic",groups:["017","202","002"],callingCodes:["236"]},geometry:{type:"MultiPolygon",coordinates:[[[[22.87758,10.91915],[22.45889,11.00246],[21.72139,10.64136],[21.71479,10.29932],[21.63553,10.217],[21.52766,10.2105],[21.34934,9.95907],[21.26348,9.97642],[20.82979,9.44696],[20.36748,9.11019],[19.06421,9.00367],[18.86388,8.87971],[19.11044,8.68172],[18.79783,8.25929],[18.67455,8.22226],[18.62612,8.14163],[18.64153,8.08714],[18.6085,8.05009],[18.02731,8.01085],[17.93926,7.95853],[17.67288,7.98905],[16.8143,7.53971],[16.6668,7.67281],[16.658,7.75353],[16.59415,7.76444],[16.58315,7.88657],[16.41583,7.77971],[16.40703,7.68809],[15.79942,7.44149],[15.73118,7.52006],[15.49743,7.52179],[15.23397,7.25135],[15.04717,6.77085],[14.96311,6.75693],[14.79966,6.39043],[14.80122,6.34866],[14.74206,6.26356],[14.56149,6.18928],[14.43073,6.08867],[14.42917,6.00508],[14.49455,5.91683],[14.60974,5.91838],[14.62375,5.70466],[14.58951,5.59777],[14.62531,5.51411],[14.52724,5.28319],[14.57083,5.23979],[14.65489,5.21343],[14.73383,4.6135],[15.00825,4.41458],[15.08609,4.30282],[15.10644,4.1362],[15.17482,4.05131],[15.07686,4.01805],[15.73522,3.24348],[15.77725,3.26835],[16.05449,3.02306],[16.08252,2.45708],[16.19357,2.21537],[16.50126,2.84739],[16.46701,2.92512],[16.57598,3.47999],[16.68283,3.54257],[17.01746,3.55136],[17.35649,3.63045],[17.46876,3.70515],[17.60966,3.63705],[17.83421,3.61068],[17.85842,3.53378],[18.05656,3.56893],[18.14902,3.54476],[18.17323,3.47665],[18.24148,3.50302],[18.2723,3.57992],[18.39558,3.58212],[18.49245,3.63924],[18.58711,3.49423],[18.62755,3.47564],[20.60184,4.42394],[20.90383,4.44877],[21.08793,4.39603],[21.11214,4.33895],[21.21341,4.29285],[21.25744,4.33676],[21.55904,4.25553],[21.6405,4.317],[22.10721,4.20723],[22.27682,4.11347],[22.45504,4.13039],[22.5431,4.22041],[22.60915,4.48821],[22.6928,4.47285],[22.78526,4.71423],[22.84691,4.69887],[22.89094,4.79321],[22.94817,4.82392],[23.38847,4.60013],[24.46719,5.0915],[24.71816,4.90509],[25.31256,5.03668],[25.34558,5.29101],[25.53271,5.37431],[25.86073,5.19455],[26.13371,5.25594],[26.48595,5.04984],[26.74572,5.10685],[26.85579,5.03887],[26.93064,5.13535],[27.09575,5.22305],[27.44012,5.07349],[27.26886,5.25876],[27.23017,5.37167],[27.28621,5.56382],[27.22705,5.62889],[27.22705,5.71254],[26.51721,6.09655],[26.58259,6.1987],[26.32729,6.36272],[26.38022,6.63493],[25.90076,7.09549],[25.37461,7.33024],[25.35281,7.42595],[25.20337,7.50312],[25.20649,7.61115],[25.29214,7.66675],[25.25319,7.8487],[24.98855,7.96588],[24.85156,8.16933],[24.35965,8.26177],[24.13238,8.36959],[24.25691,8.69288],[23.51905,8.71749],[23.59065,8.99743],[23.44744,8.99128],[23.4848,9.16959],[23.56263,9.19418],[23.64358,9.28637],[23.64981,9.44303],[23.62179,9.53823],[23.69155,9.67566],[23.67164,9.86923],[23.3128,10.45214],[23.02221,10.69235],[22.87758,10.91915]]]]}},{type:"Feature",properties:{iso1A2:"CG",iso1A3:"COG",iso1N3:"178",wikidata:"Q971",nameEn:"Republic of the Congo",groups:["017","202","002"],callingCodes:["242"]},geometry:{type:"MultiPolygon",coordinates:[[[[18.62755,3.47564],[18.58711,3.49423],[18.49245,3.63924],[18.39558,3.58212],[18.2723,3.57992],[18.24148,3.50302],[18.17323,3.47665],[18.14902,3.54476],[18.05656,3.56893],[17.85842,3.53378],[17.83421,3.61068],[17.60966,3.63705],[17.46876,3.70515],[17.35649,3.63045],[17.01746,3.55136],[16.68283,3.54257],[16.57598,3.47999],[16.46701,2.92512],[16.50126,2.84739],[16.19357,2.21537],[16.15568,2.18955],[16.08563,2.19733],[16.05294,1.9811],[16.14634,1.70259],[16.02647,1.65591],[16.02959,1.76483],[15.48942,1.98265],[15.34776,1.91264],[15.22634,2.03243],[15.00996,1.98887],[14.61145,2.17866],[13.29457,2.16106],[13.13461,1.57238],[13.25447,1.32339],[13.15519,1.23368],[13.89582,1.4261],[14.25186,1.39842],[14.48179,.9152],[14.26066,.57255],[14.10909,.58563],[13.88648,.26652],[13.90632,-.2287],[14.06862,-.20826],[14.2165,-.38261],[14.41887,-.44799],[14.52569,-.57818],[14.41838,-1.89412],[14.25932,-1.97624],[14.23518,-2.15671],[14.16202,-2.23916],[14.23829,-2.33715],[14.10442,-2.49268],[13.85846,-2.46935],[13.92073,-2.35581],[13.75884,-2.09293],[13.47977,-2.43224],[13.02759,-2.33098],[12.82172,-1.91091],[12.61312,-1.8129],[12.44656,-1.92025],[12.47925,-2.32626],[12.04895,-2.41704],[11.96866,-2.33559],[11.74605,-2.39936],[11.57637,-2.33379],[11.64487,-2.61865],[11.5359,-2.85654],[11.64798,-2.81146],[11.80365,-3.00424],[11.70558,-3.0773],[11.70227,-3.17465],[11.96554,-3.30267],[11.8318,-3.5812],[11.92719,-3.62768],[11.87083,-3.71571],[11.68608,-3.68942],[11.57949,-3.52798],[11.48764,-3.51089],[11.22301,-3.69888],[11.12647,-3.94169],[10.75913,-4.39519],[11.50888,-5.33417],[12.00924,-5.02627],[12.16068,-4.90089],[12.20901,-4.75642],[12.25587,-4.79437],[12.32324,-4.78415],[12.40964,-4.60609],[12.64835,-4.55937],[12.76844,-4.38709],[12.87096,-4.40315],[12.91489,-4.47907],[13.09648,-4.63739],[13.11182,-4.5942],[13.41764,-4.89897],[13.50305,-4.77818],[13.70417,-4.72601],[13.71794,-4.44864],[13.81162,-4.41842],[13.9108,-4.50906],[14.40672,-4.28381],[14.3957,-4.36623],[14.47284,-4.42941],[14.37366,-4.56125],[14.41499,-4.8825],[14.5059,-4.84956],[14.67948,-4.92093],[14.83101,-4.80838],[15.1978,-4.32388],[15.25411,-4.31121],[15.32693,-4.27282],[15.41785,-4.28381],[15.48121,-4.22062],[15.53081,-4.042],[15.89448,-3.9513],[16.21407,-3.2969],[16.1755,-3.25014],[16.22785,-2.59528],[16.16173,-2.16586],[16.50336,-1.8795],[16.70724,-1.45815],[16.97999,-1.12762],[17.32438,-.99265],[17.72112,-.52707],[17.66051,-.26535],[17.81204,.23884],[17.93877,.32424],[17.95255,.48128],[17.86989,.58873],[17.85887,1.04327],[18.08034,1.58553],[18.10683,2.26876],[18.63857,3.19342],[18.62755,3.47564]]]]}},{type:"Feature",properties:{iso1A2:"CH",iso1A3:"CHE",iso1N3:"756",wikidata:"Q39",nameEn:"Switzerland",groups:["155","150"],callingCodes:["41"]},geometry:{type:"MultiPolygon",coordinates:[[[[8.72809,47.69282],[8.72617,47.69651],[8.73671,47.7169],[8.70543,47.73121],[8.74251,47.75168],[8.71778,47.76571],[8.68985,47.75686],[8.68022,47.78599],[8.65292,47.80066],[8.64425,47.76398],[8.62408,47.7626],[8.61657,47.79998],[8.56415,47.80633],[8.56814,47.78001],[8.48868,47.77215],[8.45771,47.7493],[8.44807,47.72426],[8.40569,47.69855],[8.4211,47.68407],[8.40473,47.67499],[8.41346,47.66676],[8.42264,47.66667],[8.44711,47.65379],[8.4667,47.65747],[8.46605,47.64103],[8.49656,47.64709],[8.5322,47.64687],[8.52801,47.66059],[8.56141,47.67088],[8.57683,47.66158],[8.6052,47.67258],[8.61113,47.66332],[8.62884,47.65098],[8.62049,47.63757],[8.60412,47.63735],[8.61471,47.64514],[8.60701,47.65271],[8.59545,47.64298],[8.60348,47.61204],[8.57586,47.59537],[8.55756,47.62394],[8.51686,47.63476],[8.50747,47.61897],[8.45578,47.60121],[8.46637,47.58389],[8.48949,47.588],[8.49431,47.58107],[8.43235,47.56617],[8.39477,47.57826],[8.38273,47.56608],[8.32735,47.57133],[8.30277,47.58607],[8.29524,47.5919],[8.29722,47.60603],[8.2824,47.61225],[8.26313,47.6103],[8.25863,47.61571],[8.23809,47.61204],[8.22577,47.60385],[8.22011,47.6181],[8.20617,47.62141],[8.19378,47.61636],[8.1652,47.5945],[8.14947,47.59558],[8.13823,47.59147],[8.13662,47.58432],[8.11543,47.5841],[8.10395,47.57918],[8.10002,47.56504],[8.08557,47.55768],[8.06663,47.56374],[8.04383,47.55443],[8.02136,47.55096],[8.00113,47.55616],[7.97581,47.55493],[7.95682,47.55789],[7.94494,47.54511],[7.91251,47.55031],[7.90673,47.57674],[7.88664,47.58854],[7.84412,47.5841],[7.81901,47.58798],[7.79486,47.55691],[7.75261,47.54599],[7.71961,47.54219],[7.69642,47.53297],[7.68101,47.53232],[7.6656,47.53752],[7.66174,47.54554],[7.65083,47.54662],[7.63338,47.56256],[7.67655,47.56435],[7.68904,47.57133],[7.67115,47.5871],[7.68486,47.59601],[7.69385,47.60099],[7.68229,47.59905],[7.67395,47.59212],[7.64599,47.59695],[7.64213,47.5944],[7.64309,47.59151],[7.61929,47.57683],[7.60459,47.57869],[7.60523,47.58519],[7.58945,47.59017],[7.58386,47.57536],[7.56684,47.57785],[7.56548,47.57617],[7.55689,47.57232],[7.55652,47.56779],[7.53634,47.55553],[7.52831,47.55347],[7.51723,47.54578],[7.50873,47.54546],[7.49691,47.53821],[7.50588,47.52856],[7.51904,47.53515],[7.53199,47.5284],[7.5229,47.51644],[7.49804,47.51798],[7.51076,47.49651],[7.47534,47.47932],[7.43356,47.49712],[7.42923,47.48628],[7.4583,47.47216],[7.4462,47.46264],[7.43088,47.45846],[7.40308,47.43638],[7.35603,47.43432],[7.33526,47.44186],[7.24669,47.4205],[7.17026,47.44312],[7.19583,47.49455],[7.16249,47.49025],[7.12781,47.50371],[7.07425,47.48863],[7.0231,47.50522],[6.98425,47.49432],[7.0024,47.45264],[6.93953,47.43388],[6.93744,47.40714],[6.88542,47.37262],[6.87959,47.35335],[7.03125,47.36996],[7.0564,47.35134],[7.05305,47.33304],[6.94316,47.28747],[6.95108,47.26428],[6.9508,47.24338],[6.8489,47.15933],[6.76788,47.1208],[6.68823,47.06616],[6.71531,47.0494],[6.43341,46.92703],[6.46456,46.88865],[6.43216,46.80336],[6.45209,46.77502],[6.38351,46.73171],[6.27135,46.68251],[6.11084,46.57649],[6.1567,46.54402],[6.07269,46.46244],[6.08427,46.44305],[6.06407,46.41676],[6.09926,46.40768],[6.15016,46.3778],[6.15985,46.37721],[6.16987,46.36759],[6.15738,46.3491],[6.13876,46.33844],[6.1198,46.31157],[6.11697,46.29547],[6.1013,46.28512],[6.11926,46.2634],[6.12446,46.25059],[6.10071,46.23772],[6.08563,46.24651],[6.07072,46.24085],[6.0633,46.24583],[6.05029,46.23518],[6.04602,46.23127],[6.03342,46.2383],[6.02461,46.23313],[5.97542,46.21525],[5.96515,46.19638],[5.99573,46.18587],[5.98846,46.17046],[5.98188,46.17392],[5.97508,46.15863],[5.9641,46.14412],[5.95781,46.12925],[5.97893,46.13303],[5.9871,46.14499],[6.01791,46.14228],[6.03614,46.13712],[6.04564,46.14031],[6.05203,46.15191],[6.07491,46.14879],[6.09199,46.15191],[6.09926,46.14373],[6.13397,46.1406],[6.15305,46.15194],[6.18116,46.16187],[6.18871,46.16644],[6.18707,46.17999],[6.19552,46.18401],[6.19807,46.18369],[6.20539,46.19163],[6.21114,46.1927],[6.21273,46.19409],[6.21603,46.19507],[6.21844,46.19837],[6.22222,46.19888],[6.22175,46.20045],[6.23544,46.20714],[6.23913,46.20511],[6.24821,46.20531],[6.26007,46.21165],[6.27694,46.21566],[6.29663,46.22688],[6.31041,46.24417],[6.29474,46.26221],[6.26749,46.24745],[6.24952,46.26255],[6.23775,46.27822],[6.25137,46.29014],[6.24826,46.30175],[6.21981,46.31304],[6.25432,46.3632],[6.53358,46.45431],[6.82312,46.42661],[6.8024,46.39171],[6.77152,46.34784],[6.86052,46.28512],[6.78968,46.14058],[6.89321,46.12548],[6.87868,46.03855],[6.93862,46.06502],[7.00946,45.9944],[7.04151,45.92435],[7.10685,45.85653],[7.56343,45.97421],[7.85949,45.91485],[7.9049,45.99945],[7.98881,45.99867],[8.02906,46.10331],[8.11383,46.11577],[8.16866,46.17817],[8.08814,46.26692],[8.31162,46.38044],[8.30648,46.41587],[8.42464,46.46367],[8.46317,46.43712],[8.45032,46.26869],[8.62242,46.12112],[8.75697,46.10395],[8.80778,46.10085],[8.85617,46.0748],[8.79414,46.00913],[8.78585,45.98973],[8.79362,45.99207],[8.8319,45.9879],[8.85121,45.97239],[8.86688,45.96135],[8.88904,45.95465],[8.93649,45.86775],[8.94372,45.86587],[8.93504,45.86245],[8.91129,45.8388],[8.94737,45.84285],[8.9621,45.83707],[8.99663,45.83466],[9.00324,45.82055],[9.0298,45.82127],[9.03279,45.82865],[9.03793,45.83548],[9.03505,45.83976],[9.04059,45.8464],[9.04546,45.84968],[9.06642,45.8761],[9.09065,45.89906],[8.99257,45.9698],[9.01618,46.04928],[9.24503,46.23616],[9.29226,46.32717],[9.25502,46.43743],[9.28136,46.49685],[9.36128,46.5081],[9.40487,46.46621],[9.45936,46.50873],[9.46117,46.37481],[9.57015,46.2958],[9.71273,46.29266],[9.73086,46.35071],[9.95249,46.38045],[10.07055,46.21668],[10.14439,46.22992],[10.17862,46.25626],[10.10506,46.3372],[10.165,46.41051],[10.03715,46.44479],[10.10307,46.61003],[10.23674,46.63484],[10.25309,46.57432],[10.46136,46.53164],[10.49375,46.62049],[10.44686,46.64162],[10.40475,46.63671],[10.38659,46.67847],[10.47197,46.85698],[10.48376,46.93891],[10.36933,47.00212],[10.30031,46.92093],[10.24128,46.93147],[10.22675,46.86942],[10.10715,46.84296],[9.98058,46.91434],[9.88266,46.93343],[9.87935,47.01337],[9.60717,47.06091],[9.55721,47.04762],[9.54041,47.06495],[9.47548,47.05257],[9.47139,47.06402],[9.51362,47.08505],[9.52089,47.10019],[9.51044,47.13727],[9.48774,47.17402],[9.4891,47.19346],[9.50318,47.22153],[9.52406,47.24959],[9.53116,47.27029],[9.54773,47.2809],[9.55857,47.29919],[9.58513,47.31334],[9.59978,47.34671],[9.62476,47.36639],[9.65427,47.36824],[9.66243,47.37136],[9.6711,47.37824],[9.67445,47.38429],[9.67334,47.39191],[9.6629,47.39591],[9.65136,47.40504],[9.65043,47.41937],[9.6446,47.43233],[9.64483,47.43842],[9.65863,47.44847],[9.65728,47.45383],[9.6423,47.45599],[9.62475,47.45685],[9.62158,47.45858],[9.60841,47.47178],[9.60484,47.46358],[9.60205,47.46165],[9.59482,47.46305],[9.58208,47.48344],[9.56312,47.49495],[9.55125,47.53629],[9.25619,47.65939],[9.18203,47.65598],[9.17593,47.65399],[9.1755,47.65584],[9.1705,47.65513],[9.15181,47.66904],[9.13845,47.66389],[9.09891,47.67801],[9.02093,47.6868],[8.94093,47.65596],[8.89946,47.64769],[8.87625,47.65441],[8.87383,47.67045],[8.85065,47.68209],[8.86989,47.70504],[8.82002,47.71458],[8.80663,47.73821],[8.77309,47.72059],[8.76965,47.7075],[8.79966,47.70222],[8.79511,47.67462],[8.75856,47.68969],[8.72809,47.69282]],[[8.95861,45.96485],[8.96668,45.98436],[8.97741,45.98317],[8.97604,45.96151],[8.95861,45.96485]],[[8.70847,47.68904],[8.68985,47.69552],[8.66837,47.68437],[8.65769,47.68928],[8.67508,47.6979],[8.66416,47.71367],[8.70237,47.71453],[8.71773,47.69088],[8.70847,47.68904]]]]}},{type:"Feature",properties:{iso1A2:"CI",iso1A3:"CIV",iso1N3:"384",wikidata:"Q1008",nameEn:"Côte d'Ivoire",groups:["011","202","002"],callingCodes:["225"]},geometry:{type:"MultiPolygon",coordinates:[[[[-7.52774,3.7105],[-3.34019,4.17519],[-3.10675,5.08515],[-3.11073,5.12675],[-3.063,5.13665],[-2.96554,5.10397],[-2.95261,5.12477],[-2.75502,5.10657],[-2.73074,5.1364],[-2.77625,5.34621],[-2.72737,5.34789],[-2.76614,5.60963],[-2.85378,5.65156],[-2.93132,5.62137],[-2.96671,5.6415],[-2.95323,5.71865],[-3.01896,5.71697],[-3.25999,6.62521],[-3.21954,6.74407],[-3.23327,6.81744],[-2.95438,7.23737],[-2.97822,7.27165],[-2.92339,7.60847],[-2.79467,7.86002],[-2.78395,7.94974],[-2.74819,7.92613],[-2.67787,8.02055],[-2.61232,8.02645],[-2.62901,8.11495],[-2.49037,8.20872],[-2.58243,8.7789],[-2.66357,9.01771],[-2.77799,9.04949],[-2.69814,9.22717],[-2.68802,9.49343],[-2.76494,9.40778],[-2.93012,9.57403],[-3.00765,9.74019],[-3.16609,9.85147],[-3.19306,9.93781],[-3.27228,9.84981],[-3.31779,9.91125],[-3.69703,9.94279],[-4.25999,9.76012],[-4.31392,9.60062],[-4.6426,9.70696],[-4.96621,9.89132],[-4.96453,9.99923],[-5.12465,10.29788],[-5.39602,10.2929],[-5.51058,10.43177],[-5.65135,10.46767],[-5.78124,10.43952],[-5.99478,10.19694],[-6.18851,10.24244],[-6.1731,10.46983],[-6.24795,10.74248],[-6.325,10.68624],[-6.40646,10.69922],[-6.42847,10.5694],[-6.52974,10.59104],[-6.63541,10.66893],[-6.68164,10.35074],[-6.93921,10.35291],[-7.01186,10.25111],[-6.97444,10.21644],[-7.00966,10.15794],[-7.0603,10.14711],[-7.13331,10.24877],[-7.3707,10.24677],[-7.44555,10.44602],[-7.52261,10.4655],[-7.54462,10.40921],[-7.63048,10.46334],[-7.92107,10.15577],[-7.97971,10.17117],[-8.01225,10.1021],[-8.11921,10.04577],[-8.15652,9.94288],[-8.09434,9.86936],[-8.14657,9.55062],[-8.03463,9.39604],[-7.85056,9.41812],[-7.90777,9.20456],[-7.73862,9.08422],[-7.92518,8.99332],[-7.95503,8.81146],[-7.69882,8.66148],[-7.65653,8.36873],[-7.92518,8.50652],[-8.22991,8.48438],[-8.2411,8.24196],[-8.062,8.16071],[-7.98675,8.20134],[-7.99919,8.11023],[-7.94695,8.00925],[-8.06449,8.04989],[-8.13414,7.87991],[-8.09931,7.78626],[-8.21374,7.54466],[-8.4003,7.6285],[-8.47114,7.55676],[-8.41935,7.51203],[-8.37458,7.25794],[-8.29249,7.1691],[-8.31736,6.82837],[-8.59456,6.50612],[-8.48652,6.43797],[-8.45666,6.49977],[-8.38453,6.35887],[-8.3298,6.36381],[-8.17557,6.28222],[-8.00642,6.31684],[-7.90692,6.27728],[-7.83478,6.20309],[-7.8497,6.08932],[-7.79747,6.07696],[-7.78254,5.99037],[-7.70294,5.90625],[-7.67309,5.94337],[-7.48155,5.80974],[-7.46165,5.84934],[-7.43677,5.84687],[-7.43926,5.74787],[-7.37209,5.61173],[-7.43428,5.42355],[-7.36463,5.32944],[-7.46165,5.26256],[-7.48901,5.14118],[-7.55369,5.08667],[-7.53876,4.94294],[-7.59349,4.8909],[-7.53259,4.35145],[-7.52774,3.7105]]]]}},{type:"Feature",properties:{iso1A2:"CK",iso1A3:"COK",iso1N3:"184",wikidata:"Q26988",nameEn:"Cook Islands",country:"NZ",groups:["061","009"],driveSide:"left",callingCodes:["682"]},geometry:{type:"MultiPolygon",coordinates:[[[[-167.73854,-14.92809],[-167.73129,-23.22266],[-156.46451,-23.21255],[-156.4957,-12.32002],[-156.50903,-7.4975],[-167.75329,-7.52784],[-167.75195,-10.12005],[-167.73854,-14.92809]]]]}},{type:"Feature",properties:{iso1A2:"CL",iso1A3:"CHL",iso1N3:"152",wikidata:"Q298",nameEn:"Chile",groups:["005","419","019"],callingCodes:["56"]},geometry:{type:"MultiPolygon",coordinates:[[[[-68.60702,-52.65781],[-68.41683,-52.33516],[-69.97824,-52.00845],[-71.99889,-51.98018],[-72.33873,-51.59954],[-72.31343,-50.58411],[-73.15765,-50.78337],[-73.55259,-49.92488],[-73.45156,-49.79461],[-73.09655,-49.14342],[-72.56894,-48.81116],[-72.54042,-48.52392],[-72.27662,-48.28727],[-72.50478,-47.80586],[-71.94152,-47.13595],[-71.68577,-46.55385],[-71.75614,-45.61611],[-71.35687,-45.22075],[-72.06985,-44.81756],[-71.26418,-44.75684],[-71.16436,-44.46244],[-71.81318,-44.38097],[-71.64206,-43.64774],[-72.14828,-42.85321],[-72.15541,-42.15941],[-71.74901,-42.11711],[-71.92726,-40.72714],[-71.37826,-38.91474],[-70.89532,-38.6923],[-71.24279,-37.20264],[-70.95047,-36.4321],[-70.38008,-36.02375],[-70.49416,-35.24145],[-69.87386,-34.13344],[-69.88099,-33.34489],[-70.55832,-31.51559],[-70.14479,-30.36595],[-69.8596,-30.26131],[-69.99507,-29.28351],[-69.80969,-29.07185],[-69.66709,-28.44055],[-69.22504,-27.95042],[-68.77586,-27.16029],[-68.43363,-27.08414],[-68.27677,-26.90626],[-68.59048,-26.49861],[-68.56909,-26.28146],[-68.38372,-26.15353],[-68.57622,-25.32505],[-68.38372,-25.08636],[-68.56909,-24.69831],[-68.24825,-24.42596],[-67.33563,-24.04237],[-66.99632,-22.99839],[-67.18382,-22.81525],[-67.54284,-22.89771],[-67.85114,-22.87076],[-68.18816,-21.28614],[-68.40403,-20.94562],[-68.53957,-20.91542],[-68.55383,-20.7355],[-68.44023,-20.62701],[-68.7276,-20.46178],[-68.74273,-20.08817],[-68.57132,-20.03134],[-68.54611,-19.84651],[-68.66761,-19.72118],[-68.41218,-19.40499],[-68.61989,-19.27584],[-68.80602,-19.08355],[-68.87082,-19.06003],[-68.94987,-18.93302],[-69.07432,-18.28259],[-69.14807,-18.16893],[-69.07496,-18.03715],[-69.28671,-17.94844],[-69.34126,-17.72753],[-69.46623,-17.60518],[-69.46897,-17.4988],[-69.66483,-17.65083],[-69.79087,-17.65563],[-69.82868,-17.72048],[-69.75305,-17.94605],[-69.81607,-18.12582],[-69.96732,-18.25992],[-70.16394,-18.31737],[-70.31267,-18.31258],[-70.378,-18.3495],[-70.59118,-18.35072],[-113.52687,-26.52828],[-68.11646,-58.14883],[-66.07313,-55.19618],[-67.11046,-54.94199],[-67.46182,-54.92205],[-68.01394,-54.8753],[-68.60733,-54.9125],[-68.60702,-52.65781]]]]}},{type:"Feature",properties:{iso1A2:"CM",iso1A3:"CMR",iso1N3:"120",wikidata:"Q1009",nameEn:"Cameroon",groups:["017","202","002"],callingCodes:["237"]},geometry:{type:"MultiPolygon",coordinates:[[[[14.83314,12.62963],[14.55058,12.78256],[14.56101,12.91036],[14.46881,13.08259],[14.08251,13.0797],[14.20204,12.53405],[14.17523,12.41916],[14.22215,12.36533],[14.4843,12.35223],[14.6474,12.17466],[14.61612,11.7798],[14.55207,11.72001],[14.64591,11.66166],[14.6124,11.51283],[14.17821,11.23831],[13.97489,11.30258],[13.78945,11.00154],[13.7403,11.00593],[13.70753,10.94451],[13.73434,10.9255],[13.54964,10.61236],[13.5705,10.53183],[13.43644,10.13326],[13.34111,10.12299],[13.25025,10.03647],[13.25323,10.00127],[13.286,9.9822],[13.27409,9.93232],[13.24132,9.91031],[13.25025,9.86042],[13.29941,9.8296],[13.25472,9.76795],[13.22642,9.57266],[13.02385,9.49334],[12.85628,9.36698],[12.91958,9.33905],[12.90022,9.11411],[12.81085,8.91992],[12.79,8.75361],[12.71701,8.7595],[12.68722,8.65938],[12.44146,8.6152],[12.4489,8.52536],[12.26123,8.43696],[12.24782,8.17904],[12.19271,8.10826],[12.20909,7.97553],[11.99908,7.67302],[12.01844,7.52981],[11.93205,7.47812],[11.84864,7.26098],[11.87396,7.09398],[11.63117,6.9905],[11.55818,6.86186],[11.57755,6.74059],[11.51499,6.60892],[11.42264,6.5882],[11.42041,6.53789],[11.09495,6.51717],[11.09644,6.68437],[10.94302,6.69325],[10.8179,6.83377],[10.83727,6.9358],[10.60789,7.06885],[10.59746,7.14719],[10.57214,7.16345],[10.53639,6.93432],[10.21466,6.88996],[10.15135,7.03781],[9.86314,6.77756],[9.77824,6.79088],[9.70674,6.51717],[9.51757,6.43874],[8.84209,5.82562],[8.88156,5.78857],[8.83687,5.68483],[8.92029,5.58403],[8.78027,5.1243],[8.60302,4.87353],[8.34397,4.30689],[9.22018,3.72052],[9.81162,2.33797],[9.82123,2.35097],[9.83754,2.32428],[9.83238,2.29079],[9.84716,2.24676],[9.89012,2.20457],[9.90749,2.20049],[9.991,2.16561],[11.3561,2.17217],[11.37116,2.29975],[13.28534,2.25716],[13.29457,2.16106],[14.61145,2.17866],[15.00996,1.98887],[15.22634,2.03243],[15.34776,1.91264],[15.48942,1.98265],[16.02959,1.76483],[16.02647,1.65591],[16.14634,1.70259],[16.05294,1.9811],[16.08563,2.19733],[16.15568,2.18955],[16.19357,2.21537],[16.08252,2.45708],[16.05449,3.02306],[15.77725,3.26835],[15.73522,3.24348],[15.07686,4.01805],[15.17482,4.05131],[15.10644,4.1362],[15.08609,4.30282],[15.00825,4.41458],[14.73383,4.6135],[14.65489,5.21343],[14.57083,5.23979],[14.52724,5.28319],[14.62531,5.51411],[14.58951,5.59777],[14.62375,5.70466],[14.60974,5.91838],[14.49455,5.91683],[14.42917,6.00508],[14.43073,6.08867],[14.56149,6.18928],[14.74206,6.26356],[14.80122,6.34866],[14.79966,6.39043],[14.96311,6.75693],[15.04717,6.77085],[15.23397,7.25135],[15.49743,7.52179],[15.56964,7.58936],[15.59272,7.7696],[15.50743,7.79302],[15.20426,8.50892],[15.09484,8.65982],[14.83566,8.80557],[14.35707,9.19611],[14.37094,9.2954],[13.97544,9.6365],[14.01793,9.73169],[14.1317,9.82413],[14.20411,10.00055],[14.4673,10.00264],[14.80082,9.93818],[14.95722,9.97926],[15.05999,9.94845],[15.14043,9.99246],[15.24618,9.99246],[15.41408,9.92876],[15.68761,9.99344],[15.50535,10.1098],[15.30874,10.31063],[15.23724,10.47764],[15.14936,10.53915],[15.15532,10.62846],[15.06737,10.80921],[15.09127,10.87431],[15.04957,11.02347],[15.10021,11.04101],[15.0585,11.40481],[15.13149,11.5537],[15.06595,11.71126],[15.11579,11.79313],[15.04808,11.8731],[15.05786,12.0608],[15.0349,12.10698],[15.00146,12.1223],[14.96952,12.0925],[14.89019,12.16593],[14.90827,12.3269],[14.83314,12.62963]]]]}},{type:"Feature",properties:{iso1A2:"CN",iso1A3:"CHN",iso1N3:"156",wikidata:"Q148",nameEn:"China",aliases:["RC"],groups:["030","142"],callingCodes:["86"]},geometry:{type:"MultiPolygon",coordinates:[[[[125.6131,53.07229],[125.17522,53.20225],[124.46078,53.21881],[123.86158,53.49391],[123.26989,53.54843],[122.85966,53.47395],[122.35063,53.49565],[121.39213,53.31888],[120.85633,53.28499],[120.0451,52.7359],[120.04049,52.58773],[120.46454,52.63811],[120.71673,52.54099],[120.61346,52.32447],[120.77337,52.20805],[120.65907,51.93544],[120.10963,51.671],[119.13553,50.37412],[119.38598,50.35162],[119.27996,50.13348],[119.11003,50.00276],[118.61623,49.93809],[117.82343,49.52696],[117.48208,49.62324],[117.27597,49.62544],[117.07142,49.68482],[116.71193,49.83813],[116.03781,48.87014],[116.06565,48.81716],[115.78876,48.51781],[115.811,48.25699],[115.52082,48.15367],[115.57128,47.91988],[115.94296,47.67741],[116.08431,47.80693],[116.2527,47.87766],[116.4465,47.83662],[116.67405,47.89039],[116.87527,47.88836],[117.08918,47.82242],[117.37875,47.63627],[117.50181,47.77216],[117.80196,48.01661],[118.03676,48.00982],[118.11009,48.04],[118.22677,48.03853],[118.29654,48.00246],[118.55766,47.99277],[118.7564,47.76947],[119.12343,47.66458],[119.13995,47.53997],[119.35892,47.48104],[119.31964,47.42617],[119.54918,47.29505],[119.56019,47.24874],[119.62403,47.24575],[119.71209,47.19192],[119.85518,46.92196],[119.91242,46.90091],[119.89261,46.66423],[119.80455,46.67631],[119.77373,46.62947],[119.68127,46.59015],[119.65265,46.62342],[119.42827,46.63783],[119.37306,46.61132],[119.30261,46.6083],[119.24978,46.64761],[119.10448,46.65516],[119.00541,46.74273],[118.92616,46.72765],[118.89974,46.77139],[118.8337,46.77742],[118.78747,46.68689],[118.30534,46.73519],[117.69554,46.50991],[117.60748,46.59771],[117.41782,46.57862],[117.36609,46.36335],[117.07252,46.35818],[116.83166,46.38637],[116.75551,46.33083],[116.58612,46.30211],[116.26678,45.96479],[116.24012,45.8778],[116.27366,45.78637],[116.16989,45.68603],[115.91898,45.6227],[115.69688,45.45761],[115.35757,45.39106],[114.94546,45.37377],[114.74612,45.43585],[114.54801,45.38337],[114.5166,45.27189],[114.08071,44.92847],[113.909,44.91444],[113.63821,44.74326],[112.74662,44.86297],[112.4164,45.06858],[111.98695,45.09074],[111.76275,44.98032],[111.40498,44.3461],[111.96289,43.81596],[111.93776,43.68709],[111.79758,43.6637],[111.59087,43.51207],[111.0149,43.3289],[110.4327,42.78293],[110.08401,42.6411],[109.89402,42.63111],[109.452,42.44842],[109.00679,42.45302],[108.84489,42.40246],[108.23156,42.45532],[107.57258,42.40898],[107.49681,42.46221],[107.29755,42.41395],[107.24774,42.36107],[106.76517,42.28741],[105.24708,41.7442],[105.01119,41.58382],[104.91272,41.64619],[104.51667,41.66113],[104.52258,41.8706],[103.92804,41.78246],[103.3685,41.89696],[102.72403,42.14675],[102.42826,42.15137],[102.07645,42.22519],[101.80515,42.50074],[101.28833,42.58524],[100.84979,42.67087],[100.33297,42.68231],[99.50671,42.56535],[97.1777,42.7964],[96.37926,42.72055],[96.35658,42.90363],[95.89543,43.2528],[95.52594,43.99353],[95.32891,44.02407],[95.39772,44.2805],[95.01191,44.25274],[94.71959,44.35284],[94.10003,44.71016],[93.51161,44.95964],[91.64048,45.07408],[90.89169,45.19667],[90.65114,45.49314],[90.70907,45.73437],[91.03026,46.04194],[90.99672,46.14207],[90.89639,46.30711],[91.07696,46.57315],[91.0147,46.58171],[91.03649,46.72916],[90.84035,46.99525],[90.76108,46.99399],[90.48542,47.30438],[90.48854,47.41826],[90.33598,47.68303],[90.10871,47.7375],[90.06512,47.88177],[89.76624,47.82745],[89.55453,48.0423],[89.0711,47.98528],[88.93186,48.10263],[88.8011,48.11302],[88.58316,48.21893],[88.58939,48.34531],[87.96361,48.58478],[88.0788,48.71436],[87.73822,48.89582],[87.88171,48.95853],[87.81333,49.17354],[87.48983,49.13794],[87.478,49.07403],[87.28386,49.11626],[86.87238,49.12432],[86.73568,48.99918],[86.75343,48.70331],[86.38069,48.46064],[85.73581,48.3939],[85.5169,48.05493],[85.61067,47.49753],[85.69696,47.2898],[85.54294,47.06171],[85.22443,47.04816],[84.93995,46.87399],[84.73077,47.01394],[83.92184,46.98912],[83.04622,47.19053],[82.21792,45.56619],[82.58474,45.40027],[82.51374,45.1755],[81.73278,45.3504],[80.11169,45.03352],[79.8987,44.89957],[80.38384,44.63073],[80.40229,44.23319],[80.40031,44.10986],[80.75156,43.44948],[80.69718,43.32589],[80.77771,43.30065],[80.78817,43.14235],[80.62913,43.141],[80.3735,43.01557],[80.58999,42.9011],[80.38169,42.83142],[80.26886,42.8366],[80.16892,42.61137],[80.26841,42.23797],[80.17807,42.21166],[80.17842,42.03211],[79.92977,42.04113],[78.3732,41.39603],[78.15757,41.38565],[78.12873,41.23091],[77.81287,41.14307],[77.76206,41.01574],[77.52723,41.00227],[77.3693,41.0375],[77.28004,41.0033],[76.99302,41.0696],[76.75681,40.95354],[76.5261,40.46114],[76.33659,40.3482],[75.96168,40.38064],[75.91361,40.2948],[75.69663,40.28642],[75.5854,40.66874],[75.22834,40.45382],[75.08243,40.43945],[74.82013,40.52197],[74.78168,40.44886],[74.85996,40.32857],[74.69875,40.34668],[74.35063,40.09742],[74.25533,40.13191],[73.97049,40.04378],[73.83006,39.76136],[73.9051,39.75073],[73.92354,39.69565],[73.94683,39.60733],[73.87018,39.47879],[73.59831,39.46425],[73.59241,39.40843],[73.5004,39.38402],[73.55396,39.3543],[73.54572,39.27567],[73.60638,39.24534],[73.75823,39.023],[73.81728,39.04007],[73.82964,38.91517],[73.7445,38.93867],[73.7033,38.84782],[73.80656,38.66449],[73.79806,38.61106],[73.97933,38.52945],[74.17022,38.65504],[74.51217,38.47034],[74.69619,38.42947],[74.69894,38.22155],[74.80331,38.19889],[74.82665,38.07359],[74.9063,38.03033],[74.92416,37.83428],[75.00935,37.77486],[74.8912,37.67576],[74.94338,37.55501],[75.06011,37.52779],[75.15899,37.41443],[75.09719,37.37297],[75.12328,37.31839],[74.88887,37.23275],[74.80605,37.21565],[74.49981,37.24518],[74.56453,37.03023],[75.13839,37.02622],[75.40481,36.95382],[75.45562,36.71971],[75.72737,36.7529],[75.92391,36.56986],[76.0324,36.41198],[76.00906,36.17511],[75.93028,36.13136],[76.15325,35.9264],[76.14913,35.82848],[76.33453,35.84296],[76.50961,35.8908],[76.77323,35.66062],[76.84539,35.67356],[76.96624,35.5932],[77.44277,35.46132],[77.70232,35.46244],[77.80532,35.52058],[78.11664,35.48022],[78.03466,35.3785],[78.00033,35.23954],[78.22692,34.88771],[78.18435,34.7998],[78.27781,34.61484],[78.54964,34.57283],[78.56475,34.50835],[78.74465,34.45174],[79.05364,34.32482],[78.99802,34.3027],[78.91769,34.15452],[78.66225,34.08858],[78.65657,34.03195],[78.73367,34.01121],[78.77349,33.73871],[78.67599,33.66445],[78.73636,33.56521],[79.15252,33.17156],[79.14016,33.02545],[79.46562,32.69668],[79.26768,32.53277],[79.13174,32.47766],[79.0979,32.38051],[78.99322,32.37948],[78.96713,32.33655],[78.7831,32.46873],[78.73916,32.69438],[78.38897,32.53938],[78.4645,32.45367],[78.49609,32.2762],[78.68754,32.10256],[78.74404,32.00384],[78.78036,31.99478],[78.69933,31.78723],[78.84516,31.60631],[78.71032,31.50197],[78.77898,31.31209],[79.01931,31.42817],[79.14016,31.43403],[79.22805,31.34963],[79.59884,30.93943],[79.93255,30.88288],[80.20721,30.58541],[80.54504,30.44936],[80.83343,30.32023],[81.03953,30.20059],[81.12842,30.01395],[81.24362,30.0126],[81.29032,30.08806],[81.2623,30.14596],[81.33355,30.15303],[81.39928,30.21862],[81.41018,30.42153],[81.62033,30.44703],[81.99082,30.33423],[82.10135,30.35439],[82.10757,30.23745],[82.19475,30.16884],[82.16984,30.0692],[82.38622,30.02608],[82.5341,29.9735],[82.73024,29.81695],[83.07116,29.61957],[83.28131,29.56813],[83.44787,29.30513],[83.63156,29.16249],[83.82303,29.30513],[83.97559,29.33091],[84.18107,29.23451],[84.24801,29.02783],[84.2231,28.89571],[84.47528,28.74023],[84.62317,28.73887],[84.85511,28.58041],[85.06059,28.68562],[85.19135,28.62825],[85.18668,28.54076],[85.10729,28.34092],[85.38127,28.28336],[85.4233,28.32996],[85.59765,28.30529],[85.60854,28.25045],[85.69105,28.38475],[85.71907,28.38064],[85.74864,28.23126],[85.84672,28.18187],[85.90743,28.05144],[85.97813,27.99023],[85.94946,27.9401],[86.06309,27.90021],[86.12069,27.93047],[86.08333,28.02121],[86.088,28.09264],[86.18607,28.17364],[86.22966,27.9786],[86.42736,27.91122],[86.51609,27.96623],[86.56265,28.09569],[86.74181,28.10638],[86.75582,28.04182],[87.03757,27.94835],[87.11696,27.84104],[87.56996,27.84517],[87.72718,27.80938],[87.82681,27.95248],[88.13378,27.88015],[88.1278,27.95417],[88.25332,27.9478],[88.54858,28.06057],[88.63235,28.12356],[88.83559,28.01936],[88.88091,27.85192],[88.77517,27.45415],[88.82981,27.38814],[88.91901,27.32483],[88.93678,27.33777],[88.96947,27.30319],[89.00216,27.32532],[88.95355,27.4106],[88.97213,27.51671],[89.0582,27.60985],[89.12825,27.62502],[89.59525,28.16433],[89.79762,28.23979],[90.13387,28.19178],[90.58842,28.02838],[90.69894,28.07784],[91.20019,27.98715],[91.25779,28.07509],[91.46327,28.0064],[91.48973,27.93903],[91.5629,27.84823],[91.6469,27.76358],[91.84722,27.76325],[91.87057,27.7195],[92.27432,27.89077],[92.32101,27.79363],[92.42538,27.80092],[92.7275,27.98662],[92.73025,28.05814],[92.65472,28.07632],[92.67486,28.15018],[92.93075,28.25671],[93.14635,28.37035],[93.18069,28.50319],[93.44621,28.67189],[93.72797,28.68821],[94.35897,29.01965],[94.2752,29.11687],[94.69318,29.31739],[94.81353,29.17804],[95.0978,29.14446],[95.11291,29.09527],[95.2214,29.10727],[95.26122,29.07727],[95.3038,29.13847],[95.41091,29.13007],[95.50842,29.13487],[95.72086,29.20797],[95.75149,29.32063],[95.84899,29.31464],[96.05361,29.38167],[96.31316,29.18643],[96.18682,29.11087],[96.20467,29.02325],[96.3626,29.10607],[96.61391,28.72742],[96.40929,28.51526],[96.48895,28.42955],[96.6455,28.61657],[96.85561,28.4875],[96.88445,28.39452],[96.98882,28.32564],[97.1289,28.3619],[97.34547,28.21385],[97.41729,28.29783],[97.47085,28.2688],[97.50518,28.49716],[97.56835,28.55628],[97.70705,28.5056],[97.79632,28.33168],[97.90069,28.3776],[98.15337,28.12114],[98.13964,27.9478],[98.32641,27.51385],[98.42529,27.55404],[98.43353,27.67086],[98.69582,27.56499],[98.7333,26.85615],[98.77547,26.61994],[98.72741,26.36183],[98.67797,26.24487],[98.7329,26.17218],[98.66884,26.09165],[98.63128,26.15492],[98.57085,26.11547],[98.60763,26.01512],[98.70818,25.86241],[98.63128,25.79937],[98.54064,25.85129],[98.40606,25.61129],[98.31268,25.55307],[98.25774,25.6051],[98.16848,25.62739],[98.18084,25.56298],[98.12591,25.50722],[98.14925,25.41547],[97.92541,25.20815],[97.83614,25.2715],[97.77023,25.11492],[97.72216,25.08508],[97.72903,24.91332],[97.79949,24.85655],[97.76481,24.8289],[97.73127,24.83015],[97.70181,24.84557],[97.64354,24.79171],[97.56648,24.76475],[97.56383,24.75535],[97.5542,24.74943],[97.54675,24.74202],[97.56525,24.72838],[97.56286,24.54535],[97.52757,24.43748],[97.60029,24.4401],[97.66998,24.45288],[97.7098,24.35658],[97.65624,24.33781],[97.66723,24.30027],[97.71941,24.29652],[97.76799,24.26365],[97.72998,24.2302],[97.72799,24.18883],[97.75305,24.16902],[97.72903,24.12606],[97.62363,24.00506],[97.5247,23.94032],[97.64667,23.84574],[97.72302,23.89288],[97.79456,23.94836],[97.79416,23.95663],[97.84328,23.97603],[97.86545,23.97723],[97.88811,23.97446],[97.8955,23.97758],[97.89676,23.97931],[97.89683,23.98389],[97.88814,23.98605],[97.88414,23.99405],[97.88616,24.00463],[97.90998,24.02094],[97.93951,24.01953],[97.98691,24.03897],[97.99583,24.04932],[98.04709,24.07616],[98.05302,24.07408],[98.05671,24.07961],[98.0607,24.07812],[98.06703,24.08028],[98.07806,24.07988],[98.20666,24.11406],[98.54476,24.13119],[98.59256,24.08371],[98.85319,24.13042],[98.87998,24.15624],[98.89632,24.10612],[98.67797,23.9644],[98.68209,23.80492],[98.79607,23.77947],[98.82933,23.72921],[98.81775,23.694],[98.88396,23.59555],[98.80294,23.5345],[98.82877,23.47908],[98.87683,23.48995],[98.92104,23.36946],[98.87573,23.33038],[98.93958,23.31414],[98.92515,23.29535],[98.88597,23.18656],[99.05975,23.16382],[99.04601,23.12215],[99.25741,23.09025],[99.34127,23.13099],[99.52214,23.08218],[99.54218,22.90014],[99.43537,22.94086],[99.45654,22.85726],[99.31243,22.73893],[99.38247,22.57544],[99.37972,22.50188],[99.28771,22.4105],[99.17318,22.18025],[99.19176,22.16983],[99.1552,22.15874],[99.33166,22.09656],[99.47585,22.13345],[99.85351,22.04183],[99.96612,22.05965],[99.99084,21.97053],[99.94003,21.82782],[99.98654,21.71064],[100.04956,21.66843],[100.12679,21.70539],[100.17486,21.65306],[100.10757,21.59945],[100.12542,21.50365],[100.1625,21.48704],[100.18447,21.51898],[100.25863,21.47043],[100.35201,21.53176],[100.42892,21.54325],[100.4811,21.46148],[100.57861,21.45637],[100.72143,21.51898],[100.87265,21.67396],[101.11744,21.77659],[101.15156,21.56129],[101.2124,21.56422],[101.19349,21.41959],[101.26912,21.36482],[101.2229,21.23271],[101.29326,21.17254],[101.54563,21.25668],[101.6068,21.23329],[101.59491,21.18621],[101.60886,21.17947],[101.66977,21.20004],[101.70548,21.14911],[101.7622,21.14813],[101.79266,21.19025],[101.76745,21.21571],[101.83887,21.20983],[101.84412,21.25291],[101.74014,21.30967],[101.74224,21.48276],[101.7727,21.51794],[101.7475,21.5873],[101.80001,21.57461],[101.83257,21.61562],[101.74555,21.72852],[101.7791,21.83019],[101.62566,21.96574],[101.57525,22.13026],[101.60675,22.13513],[101.53638,22.24794],[101.56789,22.28876],[101.61306,22.27515],[101.68973,22.46843],[101.7685,22.50337],[101.86828,22.38397],[101.90714,22.38688],[101.91344,22.44417],[101.98487,22.42766],[102.03633,22.46164],[102.1245,22.43372],[102.14099,22.40092],[102.16621,22.43336],[102.26428,22.41321],[102.25339,22.4607],[102.41061,22.64184],[102.38415,22.67919],[102.42618,22.69212],[102.46665,22.77108],[102.51802,22.77969],[102.57095,22.7036],[102.60675,22.73376],[102.8636,22.60735],[102.9321,22.48659],[103.0722,22.44775],[103.07843,22.50097],[103.17961,22.55705],[103.15782,22.59873],[103.18895,22.64471],[103.28079,22.68063],[103.32282,22.8127],[103.43179,22.75816],[103.43646,22.70648],[103.52675,22.59155],[103.57812,22.65764],[103.56255,22.69499],[103.64506,22.79979],[103.87904,22.56683],[103.93286,22.52703],[103.94513,22.52553],[103.95191,22.5134],[103.96352,22.50584],[103.96783,22.51173],[103.97384,22.50634],[103.99247,22.51958],[104.01088,22.51823],[104.03734,22.72945],[104.11384,22.80363],[104.27084,22.8457],[104.25683,22.76534],[104.35593,22.69353],[104.47225,22.75813],[104.58122,22.85571],[104.60457,22.81841],[104.65283,22.83419],[104.72755,22.81984],[104.77114,22.90017],[104.84942,22.93631],[104.86765,22.95178],[104.8334,23.01484],[104.79478,23.12934],[104.87382,23.12854],[104.87992,23.17141],[104.91435,23.18666],[104.9486,23.17235],[104.96532,23.20463],[104.98712,23.19176],[105.07002,23.26248],[105.11672,23.25247],[105.17276,23.28679],[105.22569,23.27249],[105.32376,23.39684],[105.40782,23.28107],[105.42805,23.30824],[105.49966,23.20669],[105.56037,23.16806],[105.57594,23.075],[105.72382,23.06641],[105.8726,22.92756],[105.90119,22.94168],[105.99568,22.94178],[106.00179,22.99049],[106.19705,22.98475],[106.27022,22.87722],[106.34961,22.86718],[106.49749,22.91164],[106.51306,22.94891],[106.55976,22.92311],[106.60179,22.92884],[106.6516,22.86862],[106.6734,22.89587],[106.71387,22.88296],[106.71128,22.85982],[106.78422,22.81532],[106.81271,22.8226],[106.83685,22.8098],[106.82404,22.7881],[106.76293,22.73491],[106.72321,22.63606],[106.71698,22.58432],[106.65316,22.5757],[106.61269,22.60301],[106.58395,22.474],[106.55665,22.46498],[106.57221,22.37],[106.55976,22.34841],[106.6516,22.33977],[106.69986,22.22309],[106.67495,22.1885],[106.6983,22.15102],[106.70142,22.02409],[106.68274,21.99811],[106.69276,21.96013],[106.72551,21.97923],[106.74345,22.00965],[106.81038,21.97934],[106.9178,21.97357],[106.92714,21.93459],[106.97228,21.92592],[106.99252,21.95191],[107.05634,21.92303],[107.06101,21.88982],[107.00964,21.85948],[107.02615,21.81981],[107.10771,21.79879],[107.20734,21.71493],[107.24625,21.7077],[107.29296,21.74674],[107.35834,21.6672],[107.35989,21.60063],[107.38636,21.59774],[107.41593,21.64839],[107.47197,21.6672],[107.49532,21.62958],[107.49065,21.59774],[107.54047,21.5934],[107.56537,21.61945],[107.66967,21.60787],[107.80355,21.66141],[107.86114,21.65128],[107.90006,21.5905],[107.92652,21.58906],[107.95232,21.5388],[107.96774,21.53601],[107.97074,21.54072],[107.97383,21.53961],[107.97932,21.54503],[108.02926,21.54997],[108.0569,21.53604],[108.10003,21.47338],[108.00365,17.98159],[111.60491,13.57105],[118.41371,24.06775],[118.11703,24.39734],[118.28244,24.51231],[118.35291,24.51645],[118.42453,24.54644],[118.56434,24.49266],[120.49232,25.22863],[121.03532,26.8787],[123.5458,31.01942],[122.29378,31.76513],[122.80525,33.30571],[123.85601,37.49093],[123.90497,38.79949],[124.17532,39.8232],[124.23201,39.9248],[124.35029,39.95639],[124.37089,40.03004],[124.3322,40.05573],[124.38556,40.11047],[124.40719,40.13655],[124.86913,40.45387],[125.71172,40.85223],[125.76869,40.87908],[126.00335,40.92835],[126.242,41.15454],[126.53189,41.35206],[126.60631,41.65565],[126.90729,41.79955],[127.17841,41.59714],[127.29712,41.49473],[127.92943,41.44291],[128.02633,41.42103],[128.03311,41.39232],[128.12967,41.37931],[128.18546,41.41279],[128.20061,41.40895],[128.30716,41.60322],[128.15119,41.74568],[128.04487,42.01769],[128.94007,42.03537],[128.96068,42.06657],[129.15178,42.17224],[129.22285,42.26491],[129.22423,42.3553],[129.28541,42.41574],[129.42882,42.44702],[129.54701,42.37254],[129.60482,42.44461],[129.72541,42.43739],[129.75294,42.59409],[129.77183,42.69435],[129.7835,42.76521],[129.80719,42.79218],[129.83277,42.86746],[129.85261,42.96494],[129.8865,43.00395],[129.95082,43.01051],[129.96409,42.97306],[130.12957,42.98361],[130.09764,42.91425],[130.26095,42.9027],[130.23068,42.80125],[130.2385,42.71127],[130.41826,42.6011],[130.44361,42.54849],[130.50123,42.61636],[130.55143,42.52158],[130.62107,42.58413],[130.56576,42.68925],[130.40213,42.70788],[130.44361,42.76205],[130.66524,42.84753],[131.02438,42.86518],[131.02668,42.91246],[131.135,42.94114],[131.10274,43.04734],[131.20414,43.13654],[131.19031,43.21385],[131.30324,43.39498],[131.29402,43.46695],[131.19492,43.53047],[131.21105,43.82383],[131.26176,43.94011],[131.23583,43.96085],[131.25484,44.03131],[131.30365,44.04262],[131.1108,44.70266],[130.95639,44.85154],[131.48415,44.99513],[131.68466,45.12374],[131.66852,45.2196],[131.76532,45.22609],[131.86903,45.33636],[131.99417,45.2567],[132.83978,45.05916],[132.96373,45.0212],[133.12293,45.1332],[133.09279,45.25693],[133.19419,45.51913],[133.41083,45.57723],[133.48457,45.86203],[133.60442,45.90053],[133.67569,45.9759],[133.72695,46.05576],[133.68047,46.14697],[133.88097,46.25066],[133.91496,46.4274],[133.84104,46.46681],[134.03538,46.75668],[134.20016,47.33458],[134.50898,47.4812],[134.7671,47.72051],[134.55508,47.98651],[134.67098,48.1564],[134.75328,48.36763],[134.49516,48.42884],[132.66989,47.96491],[132.57309,47.71741],[131.90448,47.68011],[131.2635,47.73325],[131.09871,47.6852],[130.95985,47.6957],[130.90915,47.90623],[130.65103,48.10052],[130.84462,48.30942],[130.52147,48.61745],[130.66946,48.88251],[130.43232,48.90844],[130.2355,48.86741],[129.85416,49.11067],[129.67598,49.29596],[129.50685,49.42398],[129.40398,49.44194],[129.35317,49.3481],[129.23232,49.40353],[129.11153,49.36813],[128.72896,49.58676],[127.83476,49.5748],[127.53516,49.84306],[127.49299,50.01251],[127.60515,50.23503],[127.37384,50.28393],[127.36009,50.43787],[127.28765,50.46585],[127.36335,50.58306],[127.28165,50.72075],[127.14586,50.91152],[126.93135,51.0841],[126.90369,51.3238],[126.68349,51.70607],[126.44606,51.98254],[126.558,52.13738],[125.6131,53.07229]],[[113.56865,22.20973],[113.57123,22.20416],[113.60504,22.20464],[113.63011,22.10782],[113.57191,22.07696],[113.54839,22.10909],[113.54942,22.14519],[113.54093,22.15497],[113.52659,22.18271],[113.53552,22.20607],[113.53301,22.21235],[113.53591,22.21369],[113.54093,22.21314],[113.54333,22.21688],[113.5508,22.21672],[113.56865,22.20973]],[[114.50148,22.15017],[113.92195,22.13873],[113.83338,22.1826],[113.81621,22.2163],[113.86771,22.42972],[114.03113,22.5065],[114.05438,22.5026],[114.05729,22.51104],[114.06272,22.51617],[114.07267,22.51855],[114.07817,22.52997],[114.08606,22.53276],[114.09048,22.53716],[114.09692,22.53435],[114.1034,22.5352],[114.11181,22.52878],[114.11656,22.53415],[114.12665,22.54003],[114.13823,22.54319],[114.1482,22.54091],[114.15123,22.55163],[114.1597,22.56041],[114.17247,22.55944],[114.18338,22.55444],[114.20655,22.55706],[114.22185,22.55343],[114.22888,22.5436],[114.25154,22.55977],[114.44998,22.55977],[114.50148,22.15017]]]]}},{type:"Feature",properties:{iso1A2:"CO",iso1A3:"COL",iso1N3:"170",wikidata:"Q739",nameEn:"Colombia",groups:["005","419","019"],callingCodes:["57"]},geometry:{type:"MultiPolygon",coordinates:[[[[-71.19849,12.65801],[-81.58685,18.0025],[-82.06974,14.49418],[-82.56142,11.91792],[-78.79327,9.93766],[-77.58292,9.22278],[-77.32389,8.81247],[-77.45064,8.49991],[-77.17257,7.97422],[-77.57185,7.51147],[-77.72514,7.72348],[-77.72157,7.47612],[-77.81426,7.48319],[-77.89178,7.22681],[-78.06168,7.07793],[-82.12561,4.00341],[-78.87137,1.47457],[-78.42749,1.15389],[-77.85677,.80197],[-77.7148,.85003],[-77.68613,.83029],[-77.66416,.81604],[-77.67815,.73863],[-77.49984,.64476],[-77.52001,.40782],[-76.89177,.24736],[-76.4094,.24015],[-76.41215,.38228],[-76.23441,.42294],[-75.82927,.09578],[-75.25764,-.11943],[-75.18513,-.0308],[-74.42701,-.50218],[-74.26675,-.97229],[-73.65312,-1.26222],[-72.92587,-2.44514],[-71.75223,-2.15058],[-70.94377,-2.23142],[-70.04609,-2.73906],[-70.71396,-3.7921],[-70.52393,-3.87553],[-70.3374,-3.79505],[-69.94708,-4.2431],[-69.43395,-1.42219],[-69.4215,-1.01853],[-69.59796,-.75136],[-69.603,-.51947],[-70.03658,-.19681],[-70.04162,.55437],[-69.47696,.71065],[-69.20976,.57958],[-69.14422,.84172],[-69.26017,1.06856],[-69.82987,1.07864],[-69.83491,1.69353],[-69.53746,1.76408],[-69.38621,1.70865],[-68.18128,1.72881],[-68.26699,1.83463],[-68.18632,2.00091],[-67.9292,1.82455],[-67.40488,2.22258],[-67.299,1.87494],[-67.15784,1.80439],[-67.08222,1.17441],[-66.85795,1.22998],[-67.21967,2.35778],[-67.65696,2.81691],[-67.85862,2.79173],[-67.85862,2.86727],[-67.30945,3.38393],[-67.50067,3.75812],[-67.62671,3.74303],[-67.85358,4.53249],[-67.83341,5.31104],[-67.59141,5.5369],[-67.63914,5.64963],[-67.58558,5.84537],[-67.43513,5.98835],[-67.4625,6.20625],[-67.60654,6.2891],[-69.41843,6.1072],[-70.10716,6.96516],[-70.7596,7.09799],[-71.03941,6.98163],[-71.37234,7.01588],[-71.42212,7.03854],[-71.44118,7.02116],[-71.82441,7.04314],[-72.04895,7.03837],[-72.19437,7.37034],[-72.43132,7.40034],[-72.47415,7.48928],[-72.45321,7.57232],[-72.47827,7.65604],[-72.46763,7.79518],[-72.44454,7.86031],[-72.46183,7.90682],[-72.45806,7.91141],[-72.47042,7.92306],[-72.48183,7.92909],[-72.48801,7.94329],[-72.47213,7.96106],[-72.39137,8.03534],[-72.35163,8.01163],[-72.36987,8.19976],[-72.4042,8.36513],[-72.65474,8.61428],[-72.77415,9.10165],[-72.94052,9.10663],[-73.02119,9.27584],[-73.36905,9.16636],[-72.98085,9.85253],[-72.88002,10.44309],[-72.4767,11.1117],[-72.24983,11.14138],[-71.9675,11.65536],[-71.3275,11.85],[-70.92579,11.96275],[-71.19849,12.65801]]]]}},{type:"Feature",properties:{iso1A2:"CP",iso1A3:"CPT",wikidata:"Q161258",nameEn:"Clipperton Island",country:"FR",isoStatus:"excRes"},geometry:{type:"MultiPolygon",coordinates:[[[[-110.36279,9.79626],[-108.755,9.84085],[-109.04145,11.13245],[-110.36279,9.79626]]]]}},{type:"Feature",properties:{iso1A2:"CR",iso1A3:"CRI",iso1N3:"188",wikidata:"Q800",nameEn:"Costa Rica",groups:["013","003","419","019"],callingCodes:["506"]},geometry:{type:"MultiPolygon",coordinates:[[[[-83.68276,11.01562],[-83.66597,10.79916],[-83.90838,10.71161],[-84.68197,11.07568],[-84.92439,10.9497],[-85.60529,11.22607],[-85.71223,11.06868],[-86.14524,11.09059],[-87.41779,5.02401],[-82.94503,7.93865],[-82.89978,8.04083],[-82.89137,8.05755],[-82.88641,8.10219],[-82.9388,8.26634],[-83.05209,8.33394],[-82.93056,8.43465],[-82.8679,8.44042],[-82.8382,8.48117],[-82.83322,8.52464],[-82.83975,8.54755],[-82.82739,8.60153],[-82.8794,8.6981],[-82.92068,8.74832],[-82.91377,8.774],[-82.88253,8.83331],[-82.72126,8.97125],[-82.93516,9.07687],[-82.93516,9.46741],[-82.84871,9.4973],[-82.87919,9.62645],[-82.77206,9.59573],[-82.66667,9.49746],[-82.61345,9.49881],[-82.56507,9.57279],[-82.51044,9.65379],[-83.54024,10.96805],[-83.68276,11.01562]]]]}},{type:"Feature",properties:{iso1A2:"CU",iso1A3:"CUB",iso1N3:"192",wikidata:"Q241",nameEn:"Cuba",groups:["029","003","419","019"],callingCodes:["53"]},geometry:{type:"MultiPolygon",coordinates:[[[[-73.62304,20.6935],[-82.02215,24.23074],[-85.77883,21.92705],[-74.81171,18.82201],[-73.62304,20.6935]]]]}},{type:"Feature",properties:{iso1A2:"CV",iso1A3:"CPV",iso1N3:"132",wikidata:"Q1011",nameEn:"Cape Verde",groups:["011","202","002"],callingCodes:["238"]},geometry:{type:"MultiPolygon",coordinates:[[[[-28.81604,14.57305],[-20.39702,14.12816],[-23.37101,19.134],[-28.81604,14.57305]]]]}},{type:"Feature",properties:{iso1A2:"CW",iso1A3:"CUW",iso1N3:"531",wikidata:"Q25279",nameEn:"Curaçao",country:"NL",groups:["029","003","419","019"],callingCodes:["599"]},geometry:{type:"MultiPolygon",coordinates:[[[[-68.90012,12.62309],[-69.59009,12.46019],[-68.99639,11.79035],[-68.33524,11.78151],[-68.90012,12.62309]]]]}},{type:"Feature",properties:{iso1A2:"CX",iso1A3:"CXR",iso1N3:"162",wikidata:"Q31063",nameEn:"Christmas Island",country:"AU",groups:["053","009"],driveSide:"left",callingCodes:["61"]},geometry:{type:"MultiPolygon",coordinates:[[[[105.66835,-9.31927],[104.67494,-11.2566],[106.66176,-11.14349],[105.66835,-9.31927]]]]}},{type:"Feature",properties:{iso1A2:"CY",iso1A3:"CYP",iso1N3:"196",wikidata:"Q229",nameEn:"Cyprus",groups:["EU","145","142"],driveSide:"left",callingCodes:["357"]},geometry:{type:"MultiPolygon",coordinates:[[[[33.70639,34.99303],[33.71514,35.00294],[33.69731,35.01754],[33.69938,35.03123],[33.67678,35.03866],[33.67742,35.05963],[33.68474,35.06602],[33.69095,35.06237],[33.70861,35.07644],[33.7161,35.07279],[33.70209,35.04882],[33.71482,35.03722],[33.73824,35.05321],[33.76106,35.04253],[33.78581,35.05104],[33.82067,35.07826],[33.84168,35.06823],[33.8541,35.07201],[33.87479,35.08881],[33.87097,35.09389],[33.87622,35.10457],[33.87224,35.12293],[33.88561,35.12449],[33.88943,35.12007],[33.88737,35.11408],[33.89853,35.11377],[33.91789,35.08688],[33.91299,35.07579],[33.90247,35.07686],[33.89485,35.06873],[33.88367,35.07877],[33.85261,35.0574],[33.8355,35.05777],[33.82051,35.0667],[33.8012,35.04786],[33.81524,35.04192],[33.83055,35.02865],[33.82875,35.01685],[33.84045,35.00616],[33.85216,35.00579],[33.85891,35.001],[33.85621,34.98956],[33.83505,34.98108],[33.84811,34.97075],[33.86432,34.97592],[33.90075,34.96623],[33.98684,34.76642],[35.48515,34.70851],[35.51152,36.10954],[32.82353,35.70297],[30.15137,34.08517],[32.74412,34.43926],[32.75515,34.64985],[32.76136,34.68318],[32.79433,34.67883],[32.82717,34.70622],[32.86014,34.70585],[32.86167,34.68734],[32.9068,34.66102],[32.91398,34.67343],[32.93043,34.67091],[32.92807,34.66736],[32.93449,34.66241],[32.93693,34.67027],[32.94379,34.67111],[32.94683,34.67907],[32.95539,34.68471],[32.99135,34.68061],[32.98668,34.67268],[32.99014,34.65518],[32.97736,34.65277],[32.97079,34.66112],[32.95325,34.66462],[32.94796,34.6587],[32.94976,34.65204],[32.95471,34.64528],[32.95323,34.64075],[32.95891,34.62919],[32.96718,34.63446],[32.96968,34.64046],[33.0138,34.64424],[33.26744,34.49942],[33.83531,34.73974],[33.70575,34.97947],[33.70639,34.99303]]],[[[33.74144,35.01053],[33.7492,35.01319],[33.74983,35.02274],[33.74265,35.02329],[33.73781,35.02181],[33.7343,35.01178],[33.74144,35.01053]]],[[[33.77312,34.9976],[33.75994,35.00113],[33.75682,34.99916],[33.76605,34.99543],[33.76738,34.99188],[33.7778,34.98981],[33.77843,34.988],[33.78149,34.98854],[33.78318,34.98699],[33.78571,34.98951],[33.78917,34.98854],[33.79191,34.98914],[33.78516,34.99582],[33.77553,34.99518],[33.77312,34.9976]]]]}},{type:"Feature",properties:{iso1A2:"CZ",iso1A3:"CZE",iso1N3:"203",wikidata:"Q213",nameEn:"Czechia",groups:["EU","151","150"],callingCodes:["420"]},geometry:{type:"MultiPolygon",coordinates:[[[[14.82803,50.86966],[14.79139,50.81438],[14.70661,50.84096],[14.61993,50.86049],[14.63434,50.8883],[14.65259,50.90513],[14.64802,50.93241],[14.58024,50.91443],[14.56374,50.922],[14.59702,50.96148],[14.59908,50.98685],[14.58215,50.99306],[14.56432,51.01008],[14.53438,51.00374],[14.53321,51.01679],[14.49873,51.02242],[14.50809,51.0427],[14.49991,51.04692],[14.49154,51.04382],[14.49202,51.02286],[14.45827,51.03712],[14.41335,51.02086],[14.30098,51.05515],[14.25665,50.98935],[14.28776,50.97718],[14.32353,50.98556],[14.32793,50.97379],[14.30251,50.96606],[14.31422,50.95243],[14.39848,50.93866],[14.38691,50.89907],[14.30098,50.88448],[14.27123,50.89386],[14.24314,50.88761],[14.22331,50.86049],[14.02982,50.80662],[13.98864,50.8177],[13.89113,50.78533],[13.89444,50.74142],[13.82942,50.7251],[13.76316,50.73487],[13.70204,50.71771],[13.65977,50.73096],[13.52474,50.70394],[13.53748,50.67654],[13.5226,50.64721],[13.49742,50.63133],[13.46413,50.60102],[13.42189,50.61243],[13.37485,50.64931],[13.37805,50.627],[13.32264,50.60317],[13.32594,50.58009],[13.29454,50.57904],[13.25158,50.59268],[13.19043,50.50237],[13.13424,50.51709],[13.08301,50.50132],[13.0312,50.50944],[13.02038,50.4734],[13.02147,50.44763],[12.98433,50.42016],[12.94058,50.40944],[12.82465,50.45738],[12.73476,50.43237],[12.73044,50.42268],[12.70731,50.39948],[12.67261,50.41949],[12.51356,50.39694],[12.48747,50.37278],[12.49214,50.35228],[12.48256,50.34784],[12.46643,50.35527],[12.43722,50.33774],[12.43371,50.32506],[12.39924,50.32302],[12.40158,50.29521],[12.36594,50.28289],[12.35425,50.23993],[12.33263,50.24367],[12.32445,50.20442],[12.33847,50.19432],[12.32596,50.17146],[12.29232,50.17524],[12.28063,50.19544],[12.28755,50.22429],[12.23943,50.24594],[12.24791,50.25525],[12.26953,50.25189],[12.25119,50.27079],[12.20823,50.2729],[12.18013,50.32146],[12.10907,50.32041],[12.13716,50.27396],[12.09287,50.25032],[12.19335,50.19997],[12.21484,50.16399],[12.1917,50.13434],[12.2073,50.10315],[12.23709,50.10213],[12.27433,50.0771],[12.26111,50.06331],[12.30798,50.05719],[12.49908,49.97305],[12.47264,49.94222],[12.55197,49.92094],[12.48256,49.83575],[12.46603,49.78882],[12.40489,49.76321],[12.4462,49.70233],[12.52553,49.68415],[12.53544,49.61888],[12.56188,49.6146],[12.60155,49.52887],[12.64782,49.52565],[12.64121,49.47628],[12.669,49.42935],[12.71227,49.42363],[12.75854,49.3989],[12.78168,49.34618],[12.88414,49.33541],[12.88249,49.35479],[12.94859,49.34079],[13.03618,49.30417],[13.02957,49.27399],[13.05883,49.26259],[13.17665,49.16713],[13.17019,49.14339],[13.20405,49.12303],[13.23689,49.11412],[13.28242,49.1228],[13.39479,49.04812],[13.40802,48.98851],[13.50221,48.93752],[13.50552,48.97441],[13.58319,48.96899],[13.61624,48.9462],[13.67739,48.87886],[13.73854,48.88538],[13.76994,48.83537],[13.78977,48.83319],[13.8096,48.77877],[13.84023,48.76988],[14.06151,48.66873],[14.01482,48.63788],[14.09104,48.5943],[14.20691,48.5898],[14.33909,48.55852],[14.43076,48.58855],[14.4587,48.64695],[14.56139,48.60429],[14.60808,48.62881],[14.66762,48.58215],[14.71794,48.59794],[14.72756,48.69502],[14.80584,48.73489],[14.80821,48.77711],[14.81545,48.7874],[14.94773,48.76268],[14.95641,48.75915],[14.9758,48.76857],[14.98112,48.77524],[14.9782,48.7766],[14.98032,48.77959],[14.95072,48.79101],[14.98917,48.90082],[14.97612,48.96983],[14.99878,49.01444],[15.15534,48.99056],[15.16358,48.94278],[15.26177,48.95766],[15.28305,48.98831],[15.34823,48.98444],[15.48027,48.94481],[15.51357,48.91549],[15.61622,48.89541],[15.6921,48.85973],[15.75341,48.8516],[15.78087,48.87644],[15.84404,48.86921],[16.06034,48.75436],[16.37345,48.729],[16.40915,48.74576],[16.46134,48.80865],[16.67008,48.77699],[16.68518,48.7281],[16.71883,48.73806],[16.79779,48.70998],[16.90354,48.71541],[16.93955,48.60371],[17.00215,48.70887],[17.11202,48.82925],[17.19355,48.87602],[17.29054,48.85546],[17.3853,48.80936],[17.45671,48.85004],[17.5295,48.81117],[17.7094,48.86721],[17.73126,48.87885],[17.77944,48.92318],[17.87831,48.92679],[17.91814,49.01784],[18.06885,49.03157],[18.1104,49.08624],[18.15022,49.24518],[18.18456,49.28909],[18.36446,49.3267],[18.4139,49.36517],[18.4084,49.40003],[18.44686,49.39467],[18.54848,49.47059],[18.53063,49.49022],[18.57183,49.51162],[18.6144,49.49824],[18.67757,49.50895],[18.74761,49.492],[18.84521,49.51672],[18.84786,49.5446],[18.80479,49.6815],[18.72838,49.68163],[18.69817,49.70473],[18.62676,49.71983],[18.62943,49.74603],[18.62645,49.75002],[18.61368,49.75426],[18.61278,49.7618],[18.57183,49.83334],[18.60341,49.86256],[18.57045,49.87849],[18.57697,49.91565],[18.54299,49.92537],[18.54495,49.9079],[18.53423,49.89906],[18.41604,49.93498],[18.33562,49.94747],[18.33278,49.92415],[18.31914,49.91565],[18.27794,49.93863],[18.27107,49.96779],[18.21752,49.97309],[18.20241,49.99958],[18.10628,50.00223],[18.07898,50.04535],[18.03212,50.06574],[18.00396,50.04954],[18.04585,50.03311],[18.04585,50.01194],[18.00191,50.01723],[17.86886,49.97452],[17.77669,50.02253],[17.7506,50.07896],[17.6888,50.12037],[17.66683,50.10275],[17.59404,50.16437],[17.70528,50.18812],[17.76296,50.23382],[17.72176,50.25665],[17.74648,50.29966],[17.69292,50.32859],[17.67764,50.28977],[17.58889,50.27837],[17.3702,50.28123],[17.34548,50.2628],[17.34273,50.32947],[17.27681,50.32246],[17.19991,50.3654],[17.19579,50.38817],[17.14498,50.38117],[17.1224,50.39494],[16.89229,50.45117],[16.85933,50.41093],[16.90877,50.38642],[16.94448,50.31281],[16.99803,50.30316],[17.02138,50.27772],[16.99803,50.25753],[17.02825,50.23118],[17.00353,50.21449],[16.98018,50.24172],[16.8456,50.20834],[16.7014,50.09659],[16.63137,50.1142],[16.55446,50.16613],[16.56407,50.21009],[16.42674,50.32509],[16.39379,50.3207],[16.3622,50.34875],[16.36495,50.37679],[16.30289,50.38292],[16.28118,50.36891],[16.22821,50.41054],[16.21585,50.40627],[16.19526,50.43291],[16.31413,50.50274],[16.34572,50.49575],[16.44597,50.58041],[16.33611,50.66579],[16.23174,50.67101],[16.20839,50.63096],[16.10265,50.66405],[16.02437,50.60046],[15.98317,50.61528],[16.0175,50.63009],[15.97219,50.69799],[15.87331,50.67188],[15.81683,50.75666],[15.73186,50.73885],[15.43798,50.80833],[15.3803,50.77187],[15.36656,50.83956],[15.2773,50.8907],[15.27043,50.97724],[15.2361,50.99886],[15.1743,50.9833],[15.16744,51.01959],[15.11937,50.99021],[15.10152,51.01095],[15.06218,51.02269],[15.03895,51.0123],[15.02433,51.0242],[14.96419,50.99108],[15.01088,50.97984],[14.99852,50.86817],[14.82803,50.86966]]]]}},{type:"Feature",properties:{iso1A2:"DE",iso1A3:"DEU",iso1N3:"276",wikidata:"Q183",nameEn:"Germany",groups:["EU","155","150"],callingCodes:["49"]},geometry:{type:"MultiPolygon",coordinates:[[[[8.70847,47.68904],[8.71773,47.69088],[8.70237,47.71453],[8.66416,47.71367],[8.67508,47.6979],[8.65769,47.68928],[8.66837,47.68437],[8.68985,47.69552],[8.70847,47.68904]]],[[[8.72617,47.69651],[8.72809,47.69282],[8.75856,47.68969],[8.79511,47.67462],[8.79966,47.70222],[8.76965,47.7075],[8.77309,47.72059],[8.80663,47.73821],[8.82002,47.71458],[8.86989,47.70504],[8.85065,47.68209],[8.87383,47.67045],[8.87625,47.65441],[8.89946,47.64769],[8.94093,47.65596],[9.02093,47.6868],[9.09891,47.67801],[9.13845,47.66389],[9.15181,47.66904],[9.1705,47.65513],[9.1755,47.65584],[9.17593,47.65399],[9.18203,47.65598],[9.25619,47.65939],[9.55125,47.53629],[9.72736,47.53457],[9.76748,47.5934],[9.80254,47.59419],[9.82591,47.58158],[9.8189,47.54688],[9.87499,47.52953],[9.87733,47.54688],[9.92407,47.53111],[9.96029,47.53899],[10.00003,47.48216],[10.03859,47.48927],[10.07131,47.45531],[10.09001,47.46005],[10.1052,47.4316],[10.06897,47.40709],[10.09819,47.35724],[10.11805,47.37228],[10.16362,47.36674],[10.17648,47.38889],[10.2127,47.38019],[10.22774,47.38904],[10.23757,47.37609],[10.19998,47.32832],[10.2147,47.31014],[10.17648,47.29149],[10.17531,47.27167],[10.23257,47.27088],[10.33424,47.30813],[10.39851,47.37623],[10.4324,47.38494],[10.4359,47.41183],[10.47446,47.43318],[10.46278,47.47901],[10.44291,47.48453],[10.4324,47.50111],[10.44992,47.5524],[10.43473,47.58394],[10.47329,47.58552],[10.48849,47.54057],[10.56912,47.53584],[10.60337,47.56755],[10.63456,47.5591],[10.68832,47.55752],[10.6965,47.54253],[10.7596,47.53228],[10.77596,47.51729],[10.88814,47.53701],[10.91268,47.51334],[10.86945,47.5015],[10.87061,47.4786],[10.90918,47.48571],[10.93839,47.48018],[10.92437,47.46991],[10.98513,47.42882],[10.97111,47.41617],[10.97111,47.39561],[11.11835,47.39719],[11.12536,47.41222],[11.20482,47.43198],[11.25157,47.43277],[11.22002,47.3964],[11.27844,47.39956],[11.29597,47.42566],[11.33804,47.44937],[11.4175,47.44621],[11.38128,47.47465],[11.4362,47.51413],[11.52618,47.50939],[11.58578,47.52281],[11.58811,47.55515],[11.60681,47.57881],[11.63934,47.59202],[11.84052,47.58354],[11.85572,47.60166],[12.0088,47.62451],[12.02282,47.61033],[12.05788,47.61742],[12.13734,47.60639],[12.17824,47.61506],[12.18145,47.61019],[12.17737,47.60121],[12.18568,47.6049],[12.20398,47.60667],[12.20801,47.61082],[12.19895,47.64085],[12.18507,47.65984],[12.18347,47.66663],[12.16769,47.68167],[12.16217,47.70105],[12.18303,47.70065],[12.22571,47.71776],[12.2542,47.7433],[12.26238,47.73544],[12.24017,47.69534],[12.26004,47.67725],[12.27991,47.68827],[12.336,47.69534],[12.37222,47.68433],[12.43883,47.6977],[12.44117,47.6741],[12.50076,47.62293],[12.53816,47.63553],[12.57438,47.63238],[12.6071,47.6741],[12.7357,47.6787],[12.77777,47.66689],[12.76492,47.64485],[12.82101,47.61493],[12.77427,47.58025],[12.80699,47.54477],[12.84672,47.54556],[12.85256,47.52741],[12.9624,47.47452],[12.98344,47.48716],[12.9998,47.46267],[13.04537,47.49426],[13.03252,47.53373],[13.05355,47.56291],[13.04537,47.58183],[13.06641,47.58577],[13.06407,47.60075],[13.09562,47.63304],[13.07692,47.68814],[13.01382,47.72116],[12.98578,47.7078],[12.92969,47.71094],[12.91333,47.7178],[12.90274,47.72513],[12.91711,47.74026],[12.9353,47.74788],[12.94371,47.76281],[12.93202,47.77302],[12.96311,47.79957],[12.98543,47.82896],[13.00588,47.84374],[12.94163,47.92927],[12.93886,47.94046],[12.93642,47.94436],[12.93419,47.94063],[12.92668,47.93879],[12.91985,47.94069],[12.9211,47.95135],[12.91683,47.95647],[12.87476,47.96195],[12.8549,48.01122],[12.76141,48.07373],[12.74973,48.10885],[12.7617,48.12796],[12.78595,48.12445],[12.80676,48.14979],[12.82673,48.15245],[12.8362,48.15876],[12.836,48.1647],[12.84475,48.16556],[12.87126,48.20318],[12.95306,48.20629],[13.02083,48.25689],[13.0851,48.27711],[13.126,48.27867],[13.18093,48.29577],[13.26039,48.29422],[13.30897,48.31575],[13.40709,48.37292],[13.43929,48.43386],[13.42527,48.45711],[13.45727,48.51092],[13.43695,48.55776],[13.45214,48.56472],[13.46967,48.55157],[13.50663,48.57506],[13.50131,48.58091],[13.51291,48.59023],[13.57535,48.55912],[13.59705,48.57013],[13.62508,48.55501],[13.65186,48.55092],[13.66113,48.53558],[13.72802,48.51208],[13.74816,48.53058],[13.7513,48.5624],[13.76921,48.55324],[13.80519,48.58026],[13.80038,48.59487],[13.82609,48.62345],[13.81901,48.6761],[13.81283,48.68426],[13.81791,48.69832],[13.79337,48.71375],[13.81863,48.73257],[13.82266,48.75544],[13.84023,48.76988],[13.8096,48.77877],[13.78977,48.83319],[13.76994,48.83537],[13.73854,48.88538],[13.67739,48.87886],[13.61624,48.9462],[13.58319,48.96899],[13.50552,48.97441],[13.50221,48.93752],[13.40802,48.98851],[13.39479,49.04812],[13.28242,49.1228],[13.23689,49.11412],[13.20405,49.12303],[13.17019,49.14339],[13.17665,49.16713],[13.05883,49.26259],[13.02957,49.27399],[13.03618,49.30417],[12.94859,49.34079],[12.88249,49.35479],[12.88414,49.33541],[12.78168,49.34618],[12.75854,49.3989],[12.71227,49.42363],[12.669,49.42935],[12.64121,49.47628],[12.64782,49.52565],[12.60155,49.52887],[12.56188,49.6146],[12.53544,49.61888],[12.52553,49.68415],[12.4462,49.70233],[12.40489,49.76321],[12.46603,49.78882],[12.48256,49.83575],[12.55197,49.92094],[12.47264,49.94222],[12.49908,49.97305],[12.30798,50.05719],[12.26111,50.06331],[12.27433,50.0771],[12.23709,50.10213],[12.2073,50.10315],[12.1917,50.13434],[12.21484,50.16399],[12.19335,50.19997],[12.09287,50.25032],[12.13716,50.27396],[12.10907,50.32041],[12.18013,50.32146],[12.20823,50.2729],[12.25119,50.27079],[12.26953,50.25189],[12.24791,50.25525],[12.23943,50.24594],[12.28755,50.22429],[12.28063,50.19544],[12.29232,50.17524],[12.32596,50.17146],[12.33847,50.19432],[12.32445,50.20442],[12.33263,50.24367],[12.35425,50.23993],[12.36594,50.28289],[12.40158,50.29521],[12.39924,50.32302],[12.43371,50.32506],[12.43722,50.33774],[12.46643,50.35527],[12.48256,50.34784],[12.49214,50.35228],[12.48747,50.37278],[12.51356,50.39694],[12.67261,50.41949],[12.70731,50.39948],[12.73044,50.42268],[12.73476,50.43237],[12.82465,50.45738],[12.94058,50.40944],[12.98433,50.42016],[13.02147,50.44763],[13.02038,50.4734],[13.0312,50.50944],[13.08301,50.50132],[13.13424,50.51709],[13.19043,50.50237],[13.25158,50.59268],[13.29454,50.57904],[13.32594,50.58009],[13.32264,50.60317],[13.37805,50.627],[13.37485,50.64931],[13.42189,50.61243],[13.46413,50.60102],[13.49742,50.63133],[13.5226,50.64721],[13.53748,50.67654],[13.52474,50.70394],[13.65977,50.73096],[13.70204,50.71771],[13.76316,50.73487],[13.82942,50.7251],[13.89444,50.74142],[13.89113,50.78533],[13.98864,50.8177],[14.02982,50.80662],[14.22331,50.86049],[14.24314,50.88761],[14.27123,50.89386],[14.30098,50.88448],[14.38691,50.89907],[14.39848,50.93866],[14.31422,50.95243],[14.30251,50.96606],[14.32793,50.97379],[14.32353,50.98556],[14.28776,50.97718],[14.25665,50.98935],[14.30098,51.05515],[14.41335,51.02086],[14.45827,51.03712],[14.49202,51.02286],[14.49154,51.04382],[14.49991,51.04692],[14.50809,51.0427],[14.49873,51.02242],[14.53321,51.01679],[14.53438,51.00374],[14.56432,51.01008],[14.58215,50.99306],[14.59908,50.98685],[14.59702,50.96148],[14.56374,50.922],[14.58024,50.91443],[14.64802,50.93241],[14.65259,50.90513],[14.63434,50.8883],[14.61993,50.86049],[14.70661,50.84096],[14.79139,50.81438],[14.82803,50.86966],[14.81664,50.88148],[14.89681,50.9422],[14.89252,50.94999],[14.92942,50.99744],[14.95529,51.04552],[14.97938,51.07742],[14.98229,51.11354],[14.99689,51.12205],[14.99079,51.14284],[14.99646,51.14365],[15.00083,51.14974],[14.99414,51.15813],[14.99311,51.16249],[15.0047,51.16874],[15.01242,51.21285],[15.04288,51.28387],[14.98008,51.33449],[14.96899,51.38367],[14.9652,51.44793],[14.94749,51.47155],[14.73219,51.52922],[14.72652,51.53902],[14.73047,51.54606],[14.71125,51.56209],[14.7727,51.61263],[14.75759,51.62318],[14.75392,51.67445],[14.69065,51.70842],[14.66386,51.73282],[14.64625,51.79472],[14.60493,51.80473],[14.59089,51.83302],[14.6588,51.88359],[14.6933,51.9044],[14.70601,51.92944],[14.7177,51.94048],[14.72163,51.95188],[14.71836,51.95606],[14.7139,51.95643],[14.70488,51.97679],[14.71339,52.00337],[14.76026,52.06624],[14.72971,52.09167],[14.6917,52.10283],[14.67683,52.13936],[14.70616,52.16927],[14.68344,52.19612],[14.71319,52.22144],[14.70139,52.25038],[14.58149,52.28007],[14.56378,52.33838],[14.55228,52.35264],[14.54423,52.42568],[14.63056,52.48993],[14.60081,52.53116],[14.6289,52.57136],[14.61073,52.59847],[14.22071,52.81175],[14.13806,52.82392],[14.12256,52.84311],[14.15873,52.87715],[14.14056,52.95786],[14.25954,53.00264],[14.35044,53.05829],[14.38679,53.13669],[14.36696,53.16444],[14.37853,53.20405],[14.40662,53.21098],[14.45125,53.26241],[14.44133,53.27427],[14.4215,53.27724],[14.35209,53.49506],[14.3273,53.50587],[14.30416,53.55499],[14.31904,53.61581],[14.2853,53.63392],[14.28477,53.65955],[14.27133,53.66613],[14.2836,53.67721],[14.26782,53.69866],[14.27249,53.74464],[14.21323,53.8664],[14.20823,53.90776],[14.18544,53.91258],[14.20647,53.91671],[14.22634,53.9291],[14.20811,54.12784],[13.93395,54.84044],[12.85844,54.82438],[11.90309,54.38543],[11.00303,54.63689],[10.31111,54.65968],[10.16755,54.73883],[9.89314,54.84171],[9.73563,54.8247],[9.61187,54.85548],[9.62734,54.88057],[9.58937,54.88785],[9.4659,54.83131],[9.43155,54.82586],[9.41213,54.84254],[9.38532,54.83968],[9.36496,54.81749],[9.33849,54.80233],[9.32771,54.80602],[9.2474,54.8112],[9.23445,54.83432],[9.24631,54.84726],[9.20571,54.85841],[9.14275,54.87421],[9.04629,54.87249],[8.92795,54.90452],[8.81178,54.90518],[8.76387,54.8948],[8.63979,54.91069],[8.55769,54.91837],[8.45719,55.06747],[8.02459,55.09613],[5.45168,54.20039],[6.91025,53.44221],[7.00198,53.32672],[7.19052,53.31866],[7.21679,53.20058],[7.22681,53.18165],[7.17898,53.13817],[7.21694,53.00742],[7.07253,52.81083],[7.04557,52.63318],[6.77307,52.65375],[6.71641,52.62905],[6.69507,52.488],[6.94293,52.43597],[6.99041,52.47235],[7.03417,52.40237],[7.07044,52.37805],[7.02703,52.27941],[7.06365,52.23789],[7.03729,52.22695],[6.9897,52.2271],[6.97189,52.20329],[6.83984,52.11728],[6.76117,52.11895],[6.68128,52.05052],[6.83035,51.9905],[6.82357,51.96711],[6.72319,51.89518],[6.68386,51.91861],[6.58556,51.89386],[6.50231,51.86313],[6.47179,51.85395],[6.38815,51.87257],[6.40704,51.82771],[6.30593,51.84998],[6.29872,51.86801],[6.21443,51.86801],[6.15349,51.90439],[6.11551,51.89769],[6.16902,51.84094],[6.10337,51.84829],[6.06705,51.86136],[5.99848,51.83195],[5.94568,51.82786],[5.98665,51.76944],[5.95003,51.7493],[6.04091,51.71821],[6.02767,51.6742],[6.11759,51.65609],[6.09055,51.60564],[6.18017,51.54096],[6.21724,51.48568],[6.20654,51.40049],[6.22641,51.39948],[6.22674,51.36135],[6.16977,51.33169],[6.07889,51.24432],[6.07889,51.17038],[6.17384,51.19589],[6.16706,51.15677],[5.98292,51.07469],[5.9541,51.03496],[5.9134,51.06736],[5.86735,51.05182],[5.87849,51.01969],[5.90493,51.00198],[5.90296,50.97356],[5.95282,50.98728],[6.02697,50.98303],[6.01615,50.93367],[6.09297,50.92066],[6.07486,50.89307],[6.08805,50.87223],[6.07693,50.86025],[6.07431,50.84674],[6.05702,50.85179],[6.05623,50.8572],[6.01921,50.84435],[6.02328,50.81694],[6.00462,50.80065],[5.98404,50.80988],[5.97497,50.79992],[6.02624,50.77453],[6.01976,50.75398],[6.03889,50.74618],[6.0326,50.72647],[6.0406,50.71848],[6.04428,50.72861],[6.11707,50.72231],[6.17852,50.6245],[6.26957,50.62444],[6.2476,50.60392],[6.24888,50.59869],[6.24005,50.58732],[6.22581,50.5907],[6.20281,50.56952],[6.17739,50.55875],[6.17802,50.54179],[6.19735,50.53576],[6.19579,50.5313],[6.18716,50.52653],[6.19193,50.5212],[6.20599,50.52089],[6.22335,50.49578],[6.26637,50.50272],[6.30809,50.50058],[6.3465,50.48833],[6.34005,50.46083],[6.37219,50.45397],[6.36852,50.40776],[6.34406,50.37994],[6.3688,50.35898],[6.40785,50.33557],[6.40641,50.32425],[6.35701,50.31139],[6.32488,50.32333],[6.29949,50.30887],[6.28797,50.27458],[6.208,50.25179],[6.16853,50.2234],[6.18364,50.20815],[6.18739,50.1822],[6.14588,50.17106],[6.14132,50.14971],[6.15298,50.14126],[6.1379,50.12964],[6.12055,50.09171],[6.11274,50.05916],[6.13458,50.04141],[6.13044,50.02929],[6.14666,50.02207],[6.13794,50.01466],[6.13273,50.02019],[6.1295,50.01849],[6.13806,50.01056],[6.14948,50.00908],[6.14147,49.99563],[6.1701,49.98518],[6.16466,49.97086],[6.17872,49.9537],[6.18554,49.95622],[6.18045,49.96611],[6.19089,49.96991],[6.19856,49.95053],[6.22094,49.94955],[6.22608,49.929],[6.21882,49.92403],[6.22926,49.92096],[6.23496,49.89972],[6.26146,49.88203],[6.28874,49.87592],[6.29692,49.86685],[6.30963,49.87021],[6.32303,49.85133],[6.32098,49.83728],[6.33585,49.83785],[6.34267,49.84974],[6.36576,49.85032],[6.40022,49.82029],[6.42521,49.81591],[6.42905,49.81091],[6.44131,49.81443],[6.45425,49.81164],[6.47111,49.82263],[6.48718,49.81267],[6.50647,49.80916],[6.51215,49.80124],[6.52121,49.81338],[6.53122,49.80666],[6.52169,49.79787],[6.50534,49.78952],[6.51669,49.78336],[6.51056,49.77515],[6.51828,49.76855],[6.51646,49.75961],[6.50174,49.75292],[6.50193,49.73291],[6.51805,49.72425],[6.51397,49.72058],[6.50261,49.72718],[6.49535,49.72645],[6.49694,49.72205],[6.5042,49.71808],[6.50647,49.71353],[6.49785,49.71118],[6.48014,49.69767],[6.46048,49.69092],[6.44654,49.67799],[6.42937,49.66857],[6.42726,49.66078],[6.43768,49.66021],[6.4413,49.65722],[6.41861,49.61723],[6.39822,49.60081],[6.385,49.59946],[6.37464,49.58886],[6.38342,49.5799],[6.38024,49.57593],[6.36676,49.57813],[6.35825,49.57053],[6.38228,49.55855],[6.38072,49.55171],[6.35666,49.52931],[6.36788,49.50377],[6.36907,49.48931],[6.36778,49.46937],[6.38352,49.46463],[6.39168,49.4667],[6.40274,49.46546],[6.42432,49.47683],[6.55404,49.42464],[6.533,49.40748],[6.60091,49.36864],[6.58807,49.35358],[6.572,49.35027],[6.60186,49.31055],[6.66583,49.28065],[6.69274,49.21661],[6.71843,49.2208],[6.73256,49.20486],[6.71137,49.18808],[6.73765,49.16375],[6.78265,49.16793],[6.83385,49.15162],[6.84703,49.15734],[6.86225,49.18185],[6.85016,49.19354],[6.85119,49.20038],[6.83555,49.21249],[6.85939,49.22376],[6.89298,49.20863],[6.91875,49.22261],[6.93831,49.2223],[6.94028,49.21641],[6.95963,49.203],[6.97273,49.2099],[7.01318,49.19018],[7.03459,49.19096],[7.0274,49.17042],[7.03178,49.15734],[7.04662,49.13724],[7.04409,49.12123],[7.04843,49.11422],[7.05548,49.11185],[7.06642,49.11415],[7.07162,49.1255],[7.09007,49.13094],[7.07859,49.15031],[7.10715,49.15631],[7.10384,49.13787],[7.12504,49.14253],[7.1358,49.1282],[7.1593,49.1204],[7.23473,49.12971],[7.29514,49.11426],[7.3195,49.14231],[7.35995,49.14399],[7.3662,49.17308],[7.44052,49.18354],[7.44455,49.16765],[7.49473,49.17],[7.49172,49.13915],[7.53012,49.09818],[7.56416,49.08136],[7.62575,49.07654],[7.63618,49.05428],[7.75948,49.04562],[7.79557,49.06583],[7.86386,49.03499],[7.93641,49.05544],[7.97783,49.03161],[8.14189,48.97833],[8.22604,48.97352],[8.20031,48.95856],[8.19989,48.95825],[8.12813,48.87985],[8.10253,48.81829],[8.06802,48.78957],[8.0326,48.79017],[8.01534,48.76085],[7.96994,48.75606],[7.96812,48.72491],[7.89002,48.66317],[7.84098,48.64217],[7.80057,48.5857],[7.80167,48.54758],[7.80647,48.51239],[7.76833,48.48945],[7.73109,48.39192],[7.74562,48.32736],[7.69022,48.30018],[7.6648,48.22219],[7.57137,48.12292],[7.56966,48.03265],[7.62302,47.97898],[7.55673,47.87371],[7.52921,47.77747],[7.54761,47.72912],[7.53722,47.71635],[7.51266,47.70197],[7.51915,47.68335],[7.52067,47.66437],[7.53384,47.65115],[7.5591,47.63849],[7.57423,47.61628],[7.58851,47.60794],[7.59301,47.60058],[7.58945,47.59017],[7.60523,47.58519],[7.60459,47.57869],[7.61929,47.57683],[7.64309,47.59151],[7.64213,47.5944],[7.64599,47.59695],[7.67395,47.59212],[7.68229,47.59905],[7.69385,47.60099],[7.68486,47.59601],[7.67115,47.5871],[7.68904,47.57133],[7.67655,47.56435],[7.63338,47.56256],[7.65083,47.54662],[7.66174,47.54554],[7.6656,47.53752],[7.68101,47.53232],[7.69642,47.53297],[7.71961,47.54219],[7.75261,47.54599],[7.79486,47.55691],[7.81901,47.58798],[7.84412,47.5841],[7.88664,47.58854],[7.90673,47.57674],[7.91251,47.55031],[7.94494,47.54511],[7.95682,47.55789],[7.97581,47.55493],[8.00113,47.55616],[8.02136,47.55096],[8.04383,47.55443],[8.06663,47.56374],[8.08557,47.55768],[8.10002,47.56504],[8.10395,47.57918],[8.11543,47.5841],[8.13662,47.58432],[8.13823,47.59147],[8.14947,47.59558],[8.1652,47.5945],[8.19378,47.61636],[8.20617,47.62141],[8.22011,47.6181],[8.22577,47.60385],[8.23809,47.61204],[8.25863,47.61571],[8.26313,47.6103],[8.2824,47.61225],[8.29722,47.60603],[8.29524,47.5919],[8.30277,47.58607],[8.32735,47.57133],[8.35512,47.57014],[8.38273,47.56608],[8.39477,47.57826],[8.43235,47.56617],[8.49431,47.58107],[8.48949,47.588],[8.46637,47.58389],[8.45578,47.60121],[8.50747,47.61897],[8.51686,47.63476],[8.55756,47.62394],[8.57586,47.59537],[8.60348,47.61204],[8.59545,47.64298],[8.60701,47.65271],[8.61471,47.64514],[8.60412,47.63735],[8.62049,47.63757],[8.62884,47.65098],[8.61113,47.66332],[8.6052,47.67258],[8.57683,47.66158],[8.56141,47.67088],[8.52801,47.66059],[8.5322,47.64687],[8.49656,47.64709],[8.46605,47.64103],[8.4667,47.65747],[8.44711,47.65379],[8.42264,47.66667],[8.41346,47.66676],[8.40473,47.67499],[8.4211,47.68407],[8.40569,47.69855],[8.44807,47.72426],[8.45771,47.7493],[8.48868,47.77215],[8.56814,47.78001],[8.56415,47.80633],[8.61657,47.79998],[8.62408,47.7626],[8.64425,47.76398],[8.65292,47.80066],[8.68022,47.78599],[8.68985,47.75686],[8.71778,47.76571],[8.74251,47.75168],[8.70543,47.73121],[8.73671,47.7169],[8.72617,47.69651]]]]}},{type:"Feature",properties:{iso1A2:"DG",iso1A3:"DGA",wikidata:"Q184851",nameEn:"Diego Garcia",country:"GB",groups:["IO","014","202","002"],isoStatus:"excRes",callingCodes:["246"]},geometry:{type:"MultiPolygon",coordinates:[[[[73.14823,-7.76302],[73.09982,-6.07324],[71.43792,-7.73904],[73.14823,-7.76302]]]]}},{type:"Feature",properties:{iso1A2:"DJ",iso1A3:"DJI",iso1N3:"262",wikidata:"Q977",nameEn:"Djibouti",groups:["014","202","002"],callingCodes:["253"]},geometry:{type:"MultiPolygon",coordinates:[[[[43.42425,11.70983],[43.90659,12.3823],[43.32909,12.59711],[43.29075,12.79154],[42.86195,12.58747],[42.7996,12.42629],[42.6957,12.36201],[42.46941,12.52661],[42.4037,12.46478],[41.95461,11.81157],[41.82878,11.72361],[41.77727,11.49902],[41.8096,11.33606],[41.80056,10.97127],[42.06302,10.92599],[42.13691,10.97586],[42.42669,10.98493],[42.62989,11.09711],[42.75111,11.06992],[42.79037,10.98493],[42.95776,10.98533],[43.42425,11.70983]]]]}},{type:"Feature",properties:{iso1A2:"DK",iso1A3:"DNK",iso1N3:"208",wikidata:"Q35",nameEn:"Denmark",groups:["EU","154","150"],callingCodes:["45"]},geometry:{type:"MultiPolygon",coordinates:[[[[12.16597,56.60205],[10.40861,58.38489],[7.28637,57.35913],[8.02459,55.09613],[8.45719,55.06747],[8.55769,54.91837],[8.63979,54.91069],[8.76387,54.8948],[8.81178,54.90518],[8.92795,54.90452],[9.04629,54.87249],[9.14275,54.87421],[9.20571,54.85841],[9.24631,54.84726],[9.23445,54.83432],[9.2474,54.8112],[9.32771,54.80602],[9.33849,54.80233],[9.36496,54.81749],[9.38532,54.83968],[9.41213,54.84254],[9.43155,54.82586],[9.4659,54.83131],[9.58937,54.88785],[9.62734,54.88057],[9.61187,54.85548],[9.73563,54.8247],[9.89314,54.84171],[10.16755,54.73883],[10.31111,54.65968],[11.00303,54.63689],[11.90309,54.38543],[12.85844,54.82438],[13.93395,54.84044],[15.36991,54.73263],[15.79951,55.54655],[14.89259,55.5623],[14.28399,55.1553],[12.84405,55.13257],[12.60345,55.42675],[12.88472,55.63369],[12.6372,55.91371],[12.65312,56.04345],[12.07466,56.29488],[12.16597,56.60205]]]]}},{type:"Feature",properties:{iso1A2:"DM",iso1A3:"DMA",iso1N3:"212",wikidata:"Q784",nameEn:"Dominica",groups:["029","003","419","019"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["1 767"]},geometry:{type:"MultiPolygon",coordinates:[[[[-61.51867,14.96709],[-60.69955,15.22234],[-60.95725,15.70997],[-61.44899,15.79571],[-61.81728,15.58058],[-61.51867,14.96709]]]]}},{type:"Feature",properties:{iso1A2:"DO",iso1A3:"DOM",iso1N3:"214",wikidata:"Q786",nameEn:"Dominican Republic",groups:["029","003","419","019"],callingCodes:["1 809","1 829","1 849"]},geometry:{type:"MultiPolygon",coordinates:[[[[-67.87844,21.7938],[-72.38946,20.27111],[-71.77419,19.73128],[-71.75865,19.70231],[-71.7429,19.58445],[-71.71449,19.55364],[-71.71268,19.53374],[-71.6802,19.45008],[-71.69448,19.37866],[-71.77766,19.33823],[-71.73229,19.26686],[-71.62642,19.21212],[-71.65337,19.11759],[-71.69938,19.10916],[-71.71088,19.08353],[-71.74088,19.0437],[-71.88102,18.95007],[-71.77766,18.95007],[-71.72624,18.87802],[-71.71885,18.78423],[-71.82556,18.62551],[-71.95412,18.64939],[-72.00201,18.62312],[-71.88102,18.50125],[-71.90875,18.45821],[-71.69952,18.34101],[-71.78271,18.18302],[-71.75465,18.14405],[-71.74994,18.11115],[-71.73783,18.07177],[-71.75671,18.03456],[-72.29523,17.48026],[-68.39466,16.14167],[-67.87844,21.7938]]]]}},{type:"Feature",properties:{iso1A2:"DZ",iso1A3:"DZA",iso1N3:"012",wikidata:"Q262",nameEn:"Algeria",groups:["015","002"],callingCodes:["213"]},geometry:{type:"MultiPolygon",coordinates:[[[[8.59123,37.14286],[2.46645,37.97429],[-2.27707,35.35051],[-2.21248,35.08532],[-2.21445,35.04378],[-2.04734,34.93218],[-1.97833,34.93218],[-1.97469,34.886],[-1.73707,34.74226],[-1.84569,34.61907],[-1.69788,34.48056],[-1.78042,34.39018],[-1.64666,34.10405],[-1.73494,33.71721],[-1.59508,33.59929],[-1.67067,33.27084],[-1.46249,33.0499],[-1.54244,32.95499],[-1.37794,32.73628],[-.9912,32.52467],[-1.24998,32.32993],[-1.24453,32.1917],[-1.15735,32.12096],[-1.22829,32.07832],[-2.46166,32.16603],[-2.93873,32.06557],[-2.82784,31.79459],[-3.66314,31.6339],[-3.66386,31.39202],[-3.77647,31.31912],[-3.77103,31.14984],[-3.54944,31.0503],[-3.65418,30.85566],[-3.64735,30.67539],[-4.31774,30.53229],[-4.6058,30.28343],[-5.21671,29.95253],[-5.58831,29.48103],[-5.72121,29.52322],[-5.75616,29.61407],[-6.69965,29.51623],[-6.78351,29.44634],[-6.95824,29.50924],[-7.61585,29.36252],[-8.6715,28.71194],[-8.66879,27.6666],[-8.66674,27.31569],[-4.83423,24.99935],[1.15698,21.12843],[1.20992,20.73533],[3.24648,19.81703],[3.12501,19.1366],[3.36082,18.9745],[4.26651,19.14224],[5.8153,19.45101],[7.38361,20.79165],[7.48273,20.87258],[11.96886,23.51735],[11.62498,24.26669],[11.41061,24.21456],[10.85323,24.5595],[10.33159,24.5465],[10.02432,24.98124],[10.03146,25.35635],[9.38834,26.19288],[9.51696,26.39148],[9.89569,26.57696],[9.78136,29.40961],[9.3876,30.16738],[9.55544,30.23971],[9.07483,32.07865],[8.35999,32.50101],[8.31895,32.83483],[8.1179,33.05086],[8.11433,33.10175],[7.83028,33.18851],[7.73687,33.42114],[7.54088,33.7726],[7.52851,34.06493],[7.66174,34.20167],[7.74207,34.16492],[7.81242,34.21841],[7.86264,34.3987],[8.20482,34.57575],[8.29655,34.72798],[8.25189,34.92009],[8.30727,34.95378],[8.3555,35.10007],[8.47318,35.23376],[8.30329,35.29884],[8.36086,35.47774],[8.35371,35.66373],[8.26472,35.73669],[8.2626,35.91733],[8.40731,36.42208],[8.18936,36.44939],[8.16167,36.48817],[8.47609,36.66607],[8.46537,36.7706],[8.57613,36.78062],[8.67706,36.8364],[8.62972,36.86499],[8.64044,36.9401],[8.59123,37.14286]]]]}},{type:"Feature",properties:{iso1A2:"EA",wikidata:"Q28868874",nameEn:"Ceuta, Melilla",country:"ES",groups:["015","002"],isoStatus:"excRes",callingCodes:["34"]},geometry:{type:"MultiPolygon",coordinates:[[[[-5.38491,35.92591],[-5.37338,35.88417],[-5.35844,35.87375],[-5.34379,35.8711],[-5.27056,35.88794],[-5.27635,35.91222],[-5.38491,35.92591]]],[[[-2.92224,35.3401],[-2.96038,35.31609],[-2.96648,35.30475],[-2.96978,35.29459],[-2.97035,35.28852],[-2.96507,35.28801],[-2.96826,35.28296],[-2.96516,35.27967],[-2.95431,35.2728],[-2.95065,35.26576],[-2.93893,35.26737],[-2.92674,35.27313],[-2.92181,35.28599],[-2.92224,35.3401]]]]}},{type:"Feature",properties:{iso1A2:"EC",iso1A3:"ECU",iso1N3:"218",wikidata:"Q736",nameEn:"Ecuador",groups:["005","419","019"],callingCodes:["593"]},geometry:{type:"MultiPolygon",coordinates:[[[[-75.25764,-.11943],[-75.82927,.09578],[-76.23441,.42294],[-76.41215,.38228],[-76.4094,.24015],[-76.89177,.24736],[-77.52001,.40782],[-77.49984,.64476],[-77.67815,.73863],[-77.66416,.81604],[-77.68613,.83029],[-77.7148,.85003],[-77.85677,.80197],[-78.42749,1.15389],[-78.87137,1.47457],[-93.12365,2.64343],[-92.46744,-2.52874],[-80.30602,-3.39149],[-80.20647,-3.431],[-80.24123,-3.46124],[-80.24475,-3.47846],[-80.24586,-3.48677],[-80.23651,-3.48652],[-80.22629,-3.501],[-80.20535,-3.51667],[-80.21642,-3.5888],[-80.19848,-3.59249],[-80.18741,-3.63994],[-80.19926,-3.68894],[-80.13232,-3.90317],[-80.46386,-4.01342],[-80.4822,-4.05477],[-80.45023,-4.20938],[-80.32114,-4.21323],[-80.46386,-4.41516],[-80.39256,-4.48269],[-80.13945,-4.29786],[-79.79722,-4.47558],[-79.59402,-4.46848],[-79.26248,-4.95167],[-79.1162,-4.97774],[-79.01659,-5.01481],[-78.85149,-4.66795],[-78.68394,-4.60754],[-78.34362,-3.38633],[-78.24589,-3.39907],[-78.22642,-3.51113],[-78.14324,-3.47653],[-78.19369,-3.36431],[-77.94147,-3.05454],[-76.6324,-2.58397],[-76.05203,-2.12179],[-75.57429,-1.55961],[-75.3872,-.9374],[-75.22862,-.95588],[-75.22862,-.60048],[-75.53615,-.19213],[-75.60169,-.18708],[-75.61997,-.10012],[-75.40192,-.17196],[-75.25764,-.11943]]]]}},{type:"Feature",properties:{iso1A2:"EE",iso1A3:"EST",iso1N3:"233",wikidata:"Q191",nameEn:"Estonia",aliases:["EW"],groups:["EU","154","150"],callingCodes:["372"]},geometry:{type:"MultiPolygon",coordinates:[[[[26.32936,60.00121],[20.5104,59.15546],[19.84909,57.57876],[22.80496,57.87798],[23.20055,57.56697],[24.26221,57.91787],[24.3579,57.87471],[25.19484,58.0831],[25.28237,57.98539],[25.29581,58.08288],[25.73499,57.90193],[26.05949,57.84744],[26.0324,57.79037],[26.02456,57.78342],[26.027,57.78158],[26.0266,57.77441],[26.02069,57.77169],[26.02415,57.76865],[26.03332,57.7718],[26.0543,57.76105],[26.08098,57.76619],[26.2029,57.7206],[26.1866,57.6849],[26.29253,57.59244],[26.46527,57.56885],[26.54675,57.51813],[26.90364,57.62823],[27.34698,57.52242],[27.31919,57.57672],[27.40393,57.62125],[27.3746,57.66834],[27.52615,57.72843],[27.50171,57.78842],[27.56689,57.83356],[27.78526,57.83963],[27.81841,57.89244],[27.67282,57.92627],[27.62393,58.09462],[27.48541,58.22615],[27.55489,58.39525],[27.36366,58.78381],[27.74429,58.98351],[27.80482,59.1116],[27.87978,59.18097],[27.90911,59.24353],[28.00689,59.28351],[28.14215,59.28934],[28.19284,59.35791],[28.20537,59.36491],[28.21137,59.38058],[28.19061,59.39962],[28.04187,59.47017],[27.85643,59.58538],[26.90044,59.63819],[26.32936,60.00121]]]]}},{type:"Feature",properties:{iso1A2:"EG",iso1A3:"EGY",iso1N3:"818",wikidata:"Q79",nameEn:"Egypt",groups:["015","002"],callingCodes:["20"]},geometry:{type:"MultiPolygon",coordinates:[[[[33.62659,31.82938],[25.63787,31.9359],[25.14001,31.67534],[25.06041,31.57937],[24.83101,31.31921],[25.01077,30.73861],[24.71117,30.17441],[24.99968,29.24574],[24.99885,21.99535],[33.17563,22.00405],[34.0765,22.00501],[37.8565,22.00903],[34.51305,27.70027],[34.46254,27.99552],[34.88293,29.37455],[34.92298,29.45305],[34.26742,31.21998],[34.24012,31.29591],[34.23572,31.2966],[34.21853,31.32363],[34.052,31.46619],[33.62659,31.82938]]]]}},{type:"Feature",properties:{iso1A2:"EH",iso1A3:"ESH",iso1N3:"732",wikidata:"Q6250",nameEn:"Western Sahara",groups:["015","002"],callingCodes:["212"]},geometry:{type:"MultiPolygon",coordinates:[[[[-8.66879,27.6666],[-8.77527,27.66663],[-8.71787,26.9898],[-9.08698,26.98639],[-9.56957,26.90042],[-9.81998,26.71379],[-10.68417,26.90984],[-11.35695,26.8505],[-11.23622,26.72023],[-11.38635,26.611],[-11.62052,26.05229],[-12.06001,26.04442],[-12.12281,25.13682],[-12.92147,24.39502],[-13.00628,24.01923],[-13.75627,23.77231],[-14.10361,22.75501],[-14.1291,22.41636],[-14.48112,22.00886],[-14.47329,21.63839],[-14.78487,21.36587],[-16.44269,21.39745],[-16.9978,21.36239],[-17.02707,21.34022],[-17.21511,21.34226],[-17.35589,20.80492],[-17.0471,20.76408],[-17.0695,20.85742],[-17.06781,20.92697],[-17.0396,20.9961],[-17.0357,21.05368],[-16.99806,21.12142],[-16.95474,21.33997],[-13.01525,21.33343],[-13.08438,22.53866],[-13.15313,22.75649],[-13.10753,22.89493],[-13.00412,23.02297],[-12.5741,23.28975],[-12.36213,23.3187],[-12.14969,23.41935],[-12.00251,23.4538],[-12.0002,25.9986],[-8.66721,25.99918],[-8.66674,27.31569],[-8.66879,27.6666]]]]}},{type:"Feature",properties:{iso1A2:"ER",iso1A3:"ERI",iso1N3:"232",wikidata:"Q986",nameEn:"Eritrea",groups:["014","202","002"],callingCodes:["291"]},geometry:{type:"MultiPolygon",coordinates:[[[[41.37609,16.19728],[39.63762,18.37348],[38.57727,17.98125],[38.45916,17.87167],[38.37133,17.66269],[38.13362,17.53906],[37.50967,17.32199],[37.42694,17.04041],[36.99777,17.07172],[36.92193,16.23451],[36.76371,15.80831],[36.69761,15.75323],[36.54276,15.23478],[36.44337,15.14963],[36.54376,14.25597],[36.56536,14.26177],[36.55659,14.28237],[36.63364,14.31172],[36.85787,14.32201],[37.01622,14.2561],[37.09486,14.27155],[37.13206,14.40746],[37.3106,14.44657],[37.47319,14.2149],[37.528,14.18413],[37.91287,14.89447],[38.0364,14.72745],[38.25562,14.67287],[38.3533,14.51323],[38.45748,14.41445],[38.78306,14.4754],[38.98058,14.54895],[39.02834,14.63717],[39.16074,14.65187],[39.14772,14.61827],[39.19547,14.56996],[39.23888,14.56365],[39.26927,14.48801],[39.2302,14.44598],[39.2519,14.40393],[39.37685,14.54402],[39.52756,14.49011],[39.50585,14.55735],[39.58182,14.60987],[39.76632,14.54264],[39.9443,14.41024],[40.07236,14.54264],[40.14649,14.53969],[40.21128,14.39342],[40.25686,14.41445],[40.9167,14.11152],[41.25097,13.60787],[41.62864,13.38626],[42.05841,12.80912],[42.21469,12.75832],[42.2798,12.6355],[42.4037,12.46478],[42.46941,12.52661],[42.6957,12.36201],[42.7996,12.42629],[42.86195,12.58747],[43.29075,12.79154],[42.63806,13.58268],[41.29956,15.565],[41.37609,16.19728]]]]}},{type:"Feature",properties:{iso1A2:"ES",iso1A3:"ESP",iso1N3:"724",wikidata:"Q29",nameEn:"Spain",groups:["EU","039","150"],callingCodes:["34"]},geometry:{type:"MultiPolygon",coordinates:[[[[-2.41312,35.17111],[-2.41265,35.1877],[-2.44896,35.18777],[-2.44887,35.17075],[-2.41312,35.17111]]],[[[-3.90602,35.21494],[-3.88926,35.20841],[-3.88617,35.21406],[-3.90288,35.22024],[-3.90602,35.21494]]],[[[-4.30191,35.17419],[-4.30112,35.17058],[-4.29436,35.17149],[-4.30191,35.17419]]],[[[-7.27694,35.93599],[-5.64962,35.93752],[-5.10878,36.05227],[-2.85819,35.63219],[-2.27707,35.35051],[2.46645,37.97429],[5.18061,39.43581],[3.4481,42.4358],[3.17156,42.43545],[3.11379,42.43646],[3.10027,42.42621],[3.08167,42.42748],[3.03734,42.47363],[2.96518,42.46692],[2.94283,42.48174],[2.92107,42.4573],[2.88413,42.45938],[2.86983,42.46843],[2.85675,42.45444],[2.84335,42.45724],[2.77464,42.41046],[2.75497,42.42578],[2.72056,42.42298],[2.65311,42.38771],[2.6747,42.33974],[2.57934,42.35808],[2.55516,42.35351],[2.54382,42.33406],[2.48457,42.33933],[2.43508,42.37568],[2.43299,42.39423],[2.38504,42.39977],[2.25551,42.43757],[2.20578,42.41633],[2.16599,42.42314],[2.12789,42.41291],[2.11621,42.38393],[2.06241,42.35906],[2.00488,42.35399],[1.96482,42.37787],[1.9574,42.42401],[1.94084,42.43039],[1.94061,42.43333],[1.94292,42.44316],[1.93663,42.45439],[1.88853,42.4501],[1.83037,42.48395],[1.76335,42.48863],[1.72515,42.50338],[1.70571,42.48867],[1.66826,42.50779],[1.65674,42.47125],[1.58933,42.46275],[1.57953,42.44957],[1.55937,42.45808],[1.55073,42.43299],[1.5127,42.42959],[1.44529,42.43724],[1.43838,42.47848],[1.41648,42.48315],[1.46661,42.50949],[1.44759,42.54431],[1.41245,42.53539],[1.4234,42.55959],[1.44529,42.56722],[1.42512,42.58292],[1.44197,42.60217],[1.35562,42.71944],[1.15928,42.71407],[1.0804,42.78569],[.98292,42.78754],[.96166,42.80629],[.93089,42.79154],[.711,42.86372],[.66121,42.84021],[.65421,42.75872],[.67873,42.69458],[.40214,42.69779],[.36251,42.72282],[.29407,42.67431],[.25336,42.7174],[.17569,42.73424],[-.02468,42.68513],[-.10519,42.72761],[-.16141,42.79535],[-.17939,42.78974],[-.3122,42.84788],[-.38833,42.80132],[-.41319,42.80776],[-.44334,42.79939],[-.50863,42.82713],[-.55497,42.77846],[-.67637,42.88303],[-.69837,42.87945],[-.72608,42.89318],[-.73422,42.91228],[-.72037,42.92541],[-.75478,42.96916],[-.81652,42.95166],[-.97133,42.96239],[-1.00963,42.99279],[-1.10333,43.0059],[-1.22881,43.05534],[-1.25244,43.04164],[-1.30531,43.06859],[-1.30052,43.09581],[-1.27118,43.11961],[-1.32209,43.1127],[-1.34419,43.09665],[-1.35272,43.02658],[-1.44067,43.047],[-1.47555,43.08372],[-1.41562,43.12815],[-1.3758,43.24511],[-1.40942,43.27272],[-1.45289,43.27049],[-1.50992,43.29481],[-1.55963,43.28828],[-1.57674,43.25269],[-1.61341,43.25269],[-1.63052,43.28591],[-1.62481,43.30726],[-1.69407,43.31378],[-1.73074,43.29481],[-1.7397,43.32979],[-1.75079,43.3317],[-1.75334,43.34107],[-1.77068,43.34396],[-1.78714,43.35476],[-1.78332,43.36399],[-1.79319,43.37497],[-1.77289,43.38957],[-1.81005,43.59738],[-10.14298,44.17365],[-9.14112,41.86623],[-8.87157,41.86488],[-8.81794,41.90375],[-8.75712,41.92833],[-8.74606,41.9469],[-8.7478,41.96282],[-8.69071,41.98862],[-8.6681,41.99703],[-8.65832,42.02972],[-8.64626,42.03668],[-8.63791,42.04691],[-8.59493,42.05708],[-8.58086,42.05147],[-8.54563,42.0537],[-8.5252,42.06264],[-8.52837,42.07658],[-8.48185,42.0811],[-8.44123,42.08218],[-8.42512,42.07199],[-8.40143,42.08052],[-8.38323,42.07683],[-8.36353,42.09065],[-8.33912,42.08358],[-8.32161,42.10218],[-8.29809,42.106],[-8.2732,42.12396],[-8.24681,42.13993],[-8.22406,42.1328],[-8.1986,42.15402],[-8.18947,42.13853],[-8.19406,42.12141],[-8.18178,42.06436],[-8.11729,42.08537],[-8.08847,42.05767],[-8.08796,42.01398],[-8.16232,41.9828],[-8.2185,41.91237],[-8.19551,41.87459],[-8.16944,41.87944],[-8.16455,41.81753],[-8.0961,41.81024],[-8.01136,41.83453],[-7.9804,41.87337],[-7.92336,41.8758],[-7.90707,41.92432],[-7.88751,41.92553],[-7.88055,41.84571],[-7.84188,41.88065],[-7.69848,41.90977],[-7.65774,41.88308],[-7.58603,41.87944],[-7.62188,41.83089],[-7.52737,41.83939],[-7.49803,41.87095],[-7.45566,41.86488],[-7.44759,41.84451],[-7.42854,41.83262],[-7.42864,41.80589],[-7.37092,41.85031],[-7.32366,41.8406],[-7.18677,41.88793],[-7.18549,41.97515],[-7.14115,41.98855],[-7.08574,41.97401],[-7.07596,41.94977],[-7.01078,41.94977],[-6.98144,41.9728],[-6.95537,41.96553],[-6.94396,41.94403],[-6.82174,41.94493],[-6.81196,41.99097],[-6.76959,41.98734],[-6.75004,41.94129],[-6.61967,41.94008],[-6.58544,41.96674],[-6.5447,41.94371],[-6.56752,41.88429],[-6.51374,41.8758],[-6.56426,41.74219],[-6.54633,41.68623],[-6.49907,41.65823],[-6.44204,41.68258],[-6.29863,41.66432],[-6.19128,41.57638],[-6.26777,41.48796],[-6.3306,41.37677],[-6.38553,41.38655],[-6.38551,41.35274],[-6.55937,41.24417],[-6.65046,41.24725],[-6.68286,41.21641],[-6.69711,41.1858],[-6.77319,41.13049],[-6.75655,41.10187],[-6.79241,41.05397],[-6.80942,41.03629],[-6.84781,41.02692],[-6.88843,41.03027],[-6.913,41.03922],[-6.9357,41.02888],[-6.8527,40.93958],[-6.84292,40.89771],[-6.80707,40.88047],[-6.79892,40.84842],[-6.82337,40.84472],[-6.82826,40.74603],[-6.79567,40.65955],[-6.84292,40.56801],[-6.80218,40.55067],[-6.7973,40.51723],[-6.84944,40.46394],[-6.84618,40.42177],[-6.78426,40.36468],[-6.80218,40.33239],[-6.86085,40.2976],[-6.86085,40.26776],[-7.00426,40.23169],[-7.02544,40.18564],[-7.00589,40.12087],[-6.94233,40.10716],[-6.86737,40.01986],[-6.91463,39.86618],[-6.97492,39.81488],[-7.01613,39.66877],[-7.24707,39.66576],[-7.33507,39.64569],[-7.54121,39.66717],[-7.49477,39.58794],[-7.2927,39.45847],[-7.3149,39.34857],[-7.23403,39.27579],[-7.23566,39.20132],[-7.12811,39.17101],[-7.14929,39.11287],[-7.10692,39.10275],[-7.04011,39.11919],[-6.97004,39.07619],[-6.95211,39.0243],[-7.051,38.907],[-7.03848,38.87221],[-7.26174,38.72107],[-7.265,38.61674],[-7.32529,38.44336],[-7.15581,38.27597],[-7.09389,38.17227],[-6.93418,38.21454],[-7.00375,38.01914],[-7.05966,38.01966],[-7.10366,38.04404],[-7.12648,38.00296],[-7.24544,37.98884],[-7.27314,37.90145],[-7.33441,37.81193],[-7.41981,37.75729],[-7.51759,37.56119],[-7.46878,37.47127],[-7.43974,37.38913],[-7.43227,37.25152],[-7.41854,37.23813],[-7.41133,37.20314],[-7.39769,37.16868],[-7.37282,36.96896],[-7.27694,35.93599]],[[-5.28217,36.09907],[-5.3004,36.07439],[-5.32837,36.05935],[-5.36503,36.06205],[-5.39074,36.10278],[-5.40134,36.14896],[-5.38545,36.15481],[-5.36494,36.15496],[-5.34536,36.15501],[-5.33822,36.15272],[-5.27801,36.14942],[-5.28217,36.09907]]],[[[1.99838,42.44682],[2.01564,42.45171],[1.99216,42.46208],[1.98579,42.47486],[1.99766,42.4858],[1.98916,42.49351],[1.98022,42.49569],[1.97697,42.48568],[1.97227,42.48487],[1.97003,42.48081],[1.96215,42.47854],[1.95606,42.45785],[1.96125,42.45364],[1.98378,42.44697],[1.99838,42.44682]]]]}},{type:"Feature",properties:{iso1A2:"ET",iso1A3:"ETH",iso1N3:"231",wikidata:"Q115",nameEn:"Ethiopia",groups:["014","202","002"],callingCodes:["251"]},geometry:{type:"MultiPolygon",coordinates:[[[[42.4037,12.46478],[42.2798,12.6355],[42.21469,12.75832],[42.05841,12.80912],[41.62864,13.38626],[41.25097,13.60787],[40.9167,14.11152],[40.25686,14.41445],[40.21128,14.39342],[40.14649,14.53969],[40.07236,14.54264],[39.9443,14.41024],[39.76632,14.54264],[39.58182,14.60987],[39.50585,14.55735],[39.52756,14.49011],[39.37685,14.54402],[39.2519,14.40393],[39.2302,14.44598],[39.26927,14.48801],[39.23888,14.56365],[39.19547,14.56996],[39.14772,14.61827],[39.16074,14.65187],[39.02834,14.63717],[38.98058,14.54895],[38.78306,14.4754],[38.45748,14.41445],[38.3533,14.51323],[38.25562,14.67287],[38.0364,14.72745],[37.91287,14.89447],[37.528,14.18413],[37.47319,14.2149],[37.3106,14.44657],[37.13206,14.40746],[37.09486,14.27155],[37.01622,14.2561],[36.85787,14.32201],[36.63364,14.31172],[36.55659,14.28237],[36.56536,14.26177],[36.54376,14.25597],[36.44653,13.95666],[36.48824,13.83954],[36.38993,13.56459],[36.24545,13.36759],[36.13374,12.92665],[36.16651,12.88019],[36.14268,12.70879],[36.01458,12.72478],[35.70476,12.67101],[35.24302,11.91132],[35.11492,11.85156],[35.05832,11.71158],[35.09556,11.56278],[34.95704,11.24448],[35.01215,11.19626],[34.93172,10.95946],[34.97789,10.91559],[34.97491,10.86147],[34.86916,10.78832],[34.86618,10.74588],[34.77532,10.69027],[34.77383,10.74588],[34.59062,10.89072],[34.4372,10.781],[34.2823,10.53508],[34.34783,10.23914],[34.32102,10.11599],[34.22718,10.02506],[34.20484,9.9033],[34.13186,9.7492],[34.08717,9.55243],[34.10229,9.50238],[34.14304,9.04654],[34.14453,8.60204],[34.01346,8.50041],[33.89579,8.4842],[33.87195,8.41938],[33.71407,8.3678],[33.66938,8.44442],[33.54575,8.47094],[33.3119,8.45474],[33.19721,8.40317],[33.1853,8.29264],[33.18083,8.13047],[33.08401,8.05822],[33.0006,7.90333],[33.04944,7.78989],[33.24637,7.77939],[33.32531,7.71297],[33.44745,7.7543],[33.71407,7.65983],[33.87642,7.5491],[34.02984,7.36449],[34.03878,7.27437],[34.01495,7.25664],[34.19369,7.12807],[34.19369,7.04382],[34.35753,6.91963],[34.47669,6.91076],[34.53925,6.82794],[34.53776,6.74808],[34.65096,6.72589],[34.77459,6.5957],[34.87736,6.60161],[35.01738,6.46991],[34.96227,6.26415],[35.00546,5.89387],[35.12611,5.68937],[35.13058,5.62118],[35.31188,5.50106],[35.29938,5.34042],[35.50792,5.42431],[35.8576,5.33413],[35.81968,5.10757],[35.82118,4.77382],[35.9419,4.61933],[35.95449,4.53244],[36.03924,4.44406],[36.84474,4.44518],[37.07724,4.33503],[38.14168,3.62487],[38.45812,3.60445],[38.52336,3.62551],[38.91938,3.51198],[39.07736,3.5267],[39.19954,3.47834],[39.49444,3.45521],[39.51551,3.40895],[39.55132,3.39634],[39.58339,3.47434],[39.76808,3.67058],[39.86043,3.86974],[40.77498,4.27683],[41.1754,3.94079],[41.89488,3.97375],[42.07619,4.17667],[42.55853,4.20518],[42.84526,4.28357],[42.97746,4.44032],[43.04177,4.57923],[43.40263,4.79289],[44.02436,4.9451],[44.98104,4.91821],[47.97917,8.00124],[47.92477,8.00111],[46.99339,7.9989],[44.19222,8.93028],[43.32613,9.59205],[43.23518,9.84605],[43.0937,9.90579],[42.87643,10.18441],[42.69452,10.62672],[42.95776,10.98533],[42.79037,10.98493],[42.75111,11.06992],[42.62989,11.09711],[42.42669,10.98493],[42.13691,10.97586],[42.06302,10.92599],[41.80056,10.97127],[41.8096,11.33606],[41.77727,11.49902],[41.82878,11.72361],[41.95461,11.81157],[42.4037,12.46478]]]]}},{type:"Feature",properties:{iso1A2:"EU",iso1A3:"EUE",wikidata:"Q458",nameEn:"European Union",level:"union",isoStatus:"excRes"},geometry:null},{type:"Feature",properties:{iso1A2:"FI",iso1A3:"FIN",iso1N3:"246",wikidata:"Q33",nameEn:"Finland",aliases:["SF"],groups:["EU","154","150"],callingCodes:["358"]},geometry:{type:"MultiPolygon",coordinates:[[[[29.12697,69.69193],[28.36883,69.81658],[28.32849,69.88605],[27.97558,69.99671],[27.95542,70.0965],[27.57226,70.06215],[27.05802,69.92069],[26.64461,69.96565],[26.40261,69.91377],[25.96904,69.68397],[25.69679,69.27039],[25.75729,68.99383],[25.61613,68.89602],[25.42455,68.90328],[25.12206,68.78684],[25.10189,68.63307],[24.93048,68.61102],[24.90023,68.55579],[24.74898,68.65143],[24.18432,68.73936],[24.02299,68.81601],[23.781,68.84514],[23.68017,68.70276],[23.13064,68.64684],[22.53321,68.74393],[22.38367,68.71561],[22.27276,68.89514],[21.63833,69.27485],[21.27827,69.31281],[21.00732,69.22755],[20.98641,69.18809],[21.11099,69.10291],[21.05775,69.0356],[20.72171,69.11874],[20.55258,69.06069],[20.78802,69.03087],[20.91658,68.96764],[20.85104,68.93142],[20.90649,68.89696],[21.03001,68.88969],[22.00429,68.50692],[22.73028,68.40881],[23.10336,68.26551],[23.15377,68.14759],[23.26469,68.15134],[23.40081,68.05545],[23.65793,67.9497],[23.45627,67.85297],[23.54701,67.59306],[23.39577,67.46974],[23.75372,67.43688],[23.75372,67.29914],[23.54701,67.25435],[23.58735,67.20752],[23.56214,67.17038],[23.98563,66.84149],[23.98059,66.79585],[23.89488,66.772],[23.85959,66.56434],[23.63776,66.43568],[23.67591,66.3862],[23.64982,66.30603],[23.71339,66.21299],[23.90497,66.15802],[24.15791,65.85385],[24.14798,65.83466],[24.15107,65.81427],[24.14112,65.39731],[20.15877,63.06556],[19.23413,60.61414],[20.96741,60.71528],[21.15143,60.54555],[21.08159,60.20167],[21.02509,60.12142],[21.35468,59.67511],[20.5104,59.15546],[26.32936,60.00121],[27.44953,60.22766],[27.71177,60.3893],[27.77352,60.52722],[28.47974,60.93365],[28.82816,61.1233],[29.01829,61.17448],[31.10136,62.43042],[31.38369,62.66284],[31.58535,62.91642],[31.29294,63.09035],[31.23244,63.22239],[30.49637,63.46666],[29.98213,63.75795],[30.25437,63.83364],[30.55687,64.09036],[30.4762,64.25728],[30.06279,64.35782],[30.01238,64.57513],[30.12329,64.64862],[30.05271,64.79072],[29.68972,64.80789],[29.61914,65.05993],[29.84096,65.1109],[29.8813,65.22101],[29.61914,65.23791],[29.68972,65.31803],[29.84096,65.56945],[29.74013,65.64025],[29.97205,65.70256],[30.16363,65.66935],[29.91155,66.13863],[28.9839,66.94139],[29.91155,67.51507],[30.02041,67.67523],[29.66955,67.79872],[29.34179,68.06655],[28.62982,68.19816],[28.43941,68.53366],[28.78224,68.86696],[28.45957,68.91417],[28.91738,69.04774],[28.81248,69.11997],[28.8629,69.22395],[29.31664,69.47994],[29.12697,69.69193]]]]}},{type:"Feature",properties:{iso1A2:"FJ",iso1A3:"FJI",iso1N3:"242",wikidata:"Q712",nameEn:"Fiji",groups:["054","009"],driveSide:"left",callingCodes:["679"]},geometry:{type:"MultiPolygon",coordinates:[[[[174,-22.5],[179.99999,-22.5],[179.99999,-11.5],[174,-11.5],[174,-22.5]]],[[[-178.60161,-14.95666],[-180,-14.96041],[-180,-22.90585],[-176.74538,-22.89767],[-176.76826,-14.95183],[-178.60161,-14.95666]]]]}},{type:"Feature",properties:{iso1A2:"FK",iso1A3:"FLK",iso1N3:"238",wikidata:"Q9648",nameEn:"Falkland Islands",country:"GB",groups:["005","419","019"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["500"]},geometry:{type:"MultiPolygon",coordinates:[[[[-63.67376,-55.11859],[-54.56126,-51.26248],[-61.26735,-50.63919],[-63.67376,-55.11859]]]]}},{type:"Feature",properties:{iso1A2:"FM",iso1A3:"FSM",iso1N3:"583",wikidata:"Q702",nameEn:"Federated States of Micronesia",groups:["057","009"],roadSpeedUnit:"mph",callingCodes:["691"]},geometry:{type:"MultiPolygon",coordinates:[[[[136.04605,12.45908],[136.27107,6.73747],[156.88247,-1.39237],[165.35175,6.367],[159.04653,10.59067],[136.04605,12.45908]]]]}},{type:"Feature",properties:{iso1A2:"FO",iso1A3:"FRO",iso1N3:"234",wikidata:"Q4628",nameEn:"Faroe Islands",country:"DK",groups:["154","150"],callingCodes:["298"]},geometry:{type:"MultiPolygon",coordinates:[[[[-8.51774,62.35338],[-6.51083,60.95272],[-5.70102,62.77194],[-8.51774,62.35338]]]]}},{type:"Feature",properties:{iso1A2:"FR",iso1A3:"FRA",iso1N3:"250",wikidata:"Q142",nameEn:"France",groups:["EU","155","150"],callingCodes:["33"]},geometry:null},{type:"Feature",properties:{iso1A2:"FX",iso1A3:"FXX",iso1N3:"249",wikidata:"Q212429",nameEn:"Metropolitan France",country:"FR",groups:["EU","155","150"],isoStatus:"excRes",callingCodes:["33"]},geometry:{type:"MultiPolygon",coordinates:[[[[2.55904,51.07014],[2.18458,51.52087],[1.17405,50.74239],[-2.02963,49.91866],[-2.09454,49.46288],[-1.83944,49.23037],[-2.00491,48.86706],[-2.65349,49.15373],[-6.13339,48.73907],[-1.81005,43.59738],[-1.77289,43.38957],[-1.79319,43.37497],[-1.78332,43.36399],[-1.78714,43.35476],[-1.77068,43.34396],[-1.75334,43.34107],[-1.75079,43.3317],[-1.7397,43.32979],[-1.73074,43.29481],[-1.69407,43.31378],[-1.62481,43.30726],[-1.63052,43.28591],[-1.61341,43.25269],[-1.57674,43.25269],[-1.55963,43.28828],[-1.50992,43.29481],[-1.45289,43.27049],[-1.40942,43.27272],[-1.3758,43.24511],[-1.41562,43.12815],[-1.47555,43.08372],[-1.44067,43.047],[-1.35272,43.02658],[-1.34419,43.09665],[-1.32209,43.1127],[-1.27118,43.11961],[-1.30052,43.09581],[-1.30531,43.06859],[-1.25244,43.04164],[-1.22881,43.05534],[-1.10333,43.0059],[-1.00963,42.99279],[-.97133,42.96239],[-.81652,42.95166],[-.75478,42.96916],[-.72037,42.92541],[-.73422,42.91228],[-.72608,42.89318],[-.69837,42.87945],[-.67637,42.88303],[-.55497,42.77846],[-.50863,42.82713],[-.44334,42.79939],[-.41319,42.80776],[-.38833,42.80132],[-.3122,42.84788],[-.17939,42.78974],[-.16141,42.79535],[-.10519,42.72761],[-.02468,42.68513],[.17569,42.73424],[.25336,42.7174],[.29407,42.67431],[.36251,42.72282],[.40214,42.69779],[.67873,42.69458],[.65421,42.75872],[.66121,42.84021],[.711,42.86372],[.93089,42.79154],[.96166,42.80629],[.98292,42.78754],[1.0804,42.78569],[1.15928,42.71407],[1.35562,42.71944],[1.44197,42.60217],[1.47986,42.61346],[1.46718,42.63296],[1.48043,42.65203],[1.50867,42.64483],[1.55418,42.65669],[1.60085,42.62703],[1.63485,42.62957],[1.6625,42.61982],[1.68267,42.62533],[1.73452,42.61515],[1.72588,42.59098],[1.7858,42.57698],[1.73683,42.55492],[1.72515,42.50338],[1.76335,42.48863],[1.83037,42.48395],[1.88853,42.4501],[1.93663,42.45439],[1.94292,42.44316],[1.94061,42.43333],[1.94084,42.43039],[1.9574,42.42401],[1.96482,42.37787],[2.00488,42.35399],[2.06241,42.35906],[2.11621,42.38393],[2.12789,42.41291],[2.16599,42.42314],[2.20578,42.41633],[2.25551,42.43757],[2.38504,42.39977],[2.43299,42.39423],[2.43508,42.37568],[2.48457,42.33933],[2.54382,42.33406],[2.55516,42.35351],[2.57934,42.35808],[2.6747,42.33974],[2.65311,42.38771],[2.72056,42.42298],[2.75497,42.42578],[2.77464,42.41046],[2.84335,42.45724],[2.85675,42.45444],[2.86983,42.46843],[2.88413,42.45938],[2.92107,42.4573],[2.94283,42.48174],[2.96518,42.46692],[3.03734,42.47363],[3.08167,42.42748],[3.10027,42.42621],[3.11379,42.43646],[3.17156,42.43545],[3.4481,42.4358],[7.60802,41.05927],[10.09675,41.44089],[9.56115,43.20816],[7.50102,43.51859],[7.42422,43.72209],[7.40903,43.7296],[7.41113,43.73156],[7.41291,43.73168],[7.41298,43.73311],[7.41233,43.73439],[7.42062,43.73977],[7.42299,43.74176],[7.42443,43.74087],[7.42809,43.74396],[7.43013,43.74895],[7.43624,43.75014],[7.43708,43.75197],[7.4389,43.75151],[7.4379,43.74963],[7.47823,43.73341],[7.53006,43.78405],[7.50423,43.84345],[7.49355,43.86551],[7.51162,43.88301],[7.56075,43.89932],[7.56858,43.94506],[7.60771,43.95772],[7.65266,43.9763],[7.66848,43.99943],[7.6597,44.03009],[7.72508,44.07578],[7.66878,44.12795],[7.68694,44.17487],[7.63245,44.17877],[7.62155,44.14881],[7.36364,44.11882],[7.34547,44.14359],[7.27827,44.1462],[7.16929,44.20352],[7.00764,44.23736],[6.98221,44.28289],[6.89171,44.36637],[6.88784,44.42043],[6.94504,44.43112],[6.86233,44.49834],[6.85507,44.53072],[6.96042,44.62129],[6.95133,44.66264],[7.00582,44.69364],[7.07484,44.68073],[7.00401,44.78782],[7.02217,44.82519],[6.93499,44.8664],[6.90774,44.84322],[6.75518,44.89915],[6.74519,44.93661],[6.74791,45.01939],[6.66981,45.02324],[6.62803,45.11175],[6.7697,45.16044],[6.85144,45.13226],[6.96706,45.20841],[7.07074,45.21228],[7.13115,45.25386],[7.10572,45.32924],[7.18019,45.40071],[7.00037,45.509],[6.98948,45.63869],[6.80785,45.71864],[6.80785,45.83265],[6.95315,45.85163],[7.04151,45.92435],[7.00946,45.9944],[6.93862,46.06502],[6.87868,46.03855],[6.89321,46.12548],[6.78968,46.14058],[6.86052,46.28512],[6.77152,46.34784],[6.8024,46.39171],[6.82312,46.42661],[6.53358,46.45431],[6.25432,46.3632],[6.21981,46.31304],[6.24826,46.30175],[6.25137,46.29014],[6.23775,46.27822],[6.24952,46.26255],[6.26749,46.24745],[6.29474,46.26221],[6.31041,46.24417],[6.29663,46.22688],[6.27694,46.21566],[6.26007,46.21165],[6.24821,46.20531],[6.23913,46.20511],[6.23544,46.20714],[6.22175,46.20045],[6.22222,46.19888],[6.21844,46.19837],[6.21603,46.19507],[6.21273,46.19409],[6.21114,46.1927],[6.20539,46.19163],[6.19807,46.18369],[6.19552,46.18401],[6.18707,46.17999],[6.18871,46.16644],[6.18116,46.16187],[6.15305,46.15194],[6.13397,46.1406],[6.09926,46.14373],[6.09199,46.15191],[6.07491,46.14879],[6.05203,46.15191],[6.04564,46.14031],[6.03614,46.13712],[6.01791,46.14228],[5.9871,46.14499],[5.97893,46.13303],[5.95781,46.12925],[5.9641,46.14412],[5.97508,46.15863],[5.98188,46.17392],[5.98846,46.17046],[5.99573,46.18587],[5.96515,46.19638],[5.97542,46.21525],[6.02461,46.23313],[6.03342,46.2383],[6.04602,46.23127],[6.05029,46.23518],[6.0633,46.24583],[6.07072,46.24085],[6.08563,46.24651],[6.10071,46.23772],[6.12446,46.25059],[6.11926,46.2634],[6.1013,46.28512],[6.11697,46.29547],[6.1198,46.31157],[6.13876,46.33844],[6.15738,46.3491],[6.16987,46.36759],[6.15985,46.37721],[6.15016,46.3778],[6.09926,46.40768],[6.06407,46.41676],[6.08427,46.44305],[6.07269,46.46244],[6.1567,46.54402],[6.11084,46.57649],[6.27135,46.68251],[6.38351,46.73171],[6.45209,46.77502],[6.43216,46.80336],[6.46456,46.88865],[6.43341,46.92703],[6.71531,47.0494],[6.68823,47.06616],[6.76788,47.1208],[6.8489,47.15933],[6.9508,47.24338],[6.95108,47.26428],[6.94316,47.28747],[7.05305,47.33304],[7.0564,47.35134],[7.03125,47.36996],[6.87959,47.35335],[6.88542,47.37262],[6.93744,47.40714],[6.93953,47.43388],[7.0024,47.45264],[6.98425,47.49432],[7.0231,47.50522],[7.07425,47.48863],[7.12781,47.50371],[7.16249,47.49025],[7.19583,47.49455],[7.17026,47.44312],[7.24669,47.4205],[7.33526,47.44186],[7.35603,47.43432],[7.40308,47.43638],[7.43088,47.45846],[7.4462,47.46264],[7.4583,47.47216],[7.42923,47.48628],[7.43356,47.49712],[7.47534,47.47932],[7.51076,47.49651],[7.49804,47.51798],[7.5229,47.51644],[7.53199,47.5284],[7.51904,47.53515],[7.50588,47.52856],[7.49691,47.53821],[7.50873,47.54546],[7.51723,47.54578],[7.52831,47.55347],[7.53634,47.55553],[7.55652,47.56779],[7.55689,47.57232],[7.56548,47.57617],[7.56684,47.57785],[7.58386,47.57536],[7.58945,47.59017],[7.59301,47.60058],[7.58851,47.60794],[7.57423,47.61628],[7.5591,47.63849],[7.53384,47.65115],[7.52067,47.66437],[7.51915,47.68335],[7.51266,47.70197],[7.53722,47.71635],[7.54761,47.72912],[7.52921,47.77747],[7.55673,47.87371],[7.62302,47.97898],[7.56966,48.03265],[7.57137,48.12292],[7.6648,48.22219],[7.69022,48.30018],[7.74562,48.32736],[7.73109,48.39192],[7.76833,48.48945],[7.80647,48.51239],[7.80167,48.54758],[7.80057,48.5857],[7.84098,48.64217],[7.89002,48.66317],[7.96812,48.72491],[7.96994,48.75606],[8.01534,48.76085],[8.0326,48.79017],[8.06802,48.78957],[8.10253,48.81829],[8.12813,48.87985],[8.19989,48.95825],[8.20031,48.95856],[8.22604,48.97352],[8.14189,48.97833],[7.97783,49.03161],[7.93641,49.05544],[7.86386,49.03499],[7.79557,49.06583],[7.75948,49.04562],[7.63618,49.05428],[7.62575,49.07654],[7.56416,49.08136],[7.53012,49.09818],[7.49172,49.13915],[7.49473,49.17],[7.44455,49.16765],[7.44052,49.18354],[7.3662,49.17308],[7.35995,49.14399],[7.3195,49.14231],[7.29514,49.11426],[7.23473,49.12971],[7.1593,49.1204],[7.1358,49.1282],[7.12504,49.14253],[7.10384,49.13787],[7.10715,49.15631],[7.07859,49.15031],[7.09007,49.13094],[7.07162,49.1255],[7.06642,49.11415],[7.05548,49.11185],[7.04843,49.11422],[7.04409,49.12123],[7.04662,49.13724],[7.03178,49.15734],[7.0274,49.17042],[7.03459,49.19096],[7.01318,49.19018],[6.97273,49.2099],[6.95963,49.203],[6.94028,49.21641],[6.93831,49.2223],[6.91875,49.22261],[6.89298,49.20863],[6.85939,49.22376],[6.83555,49.21249],[6.85119,49.20038],[6.85016,49.19354],[6.86225,49.18185],[6.84703,49.15734],[6.83385,49.15162],[6.78265,49.16793],[6.73765,49.16375],[6.71137,49.18808],[6.73256,49.20486],[6.71843,49.2208],[6.69274,49.21661],[6.66583,49.28065],[6.60186,49.31055],[6.572,49.35027],[6.58807,49.35358],[6.60091,49.36864],[6.533,49.40748],[6.55404,49.42464],[6.42432,49.47683],[6.40274,49.46546],[6.39168,49.4667],[6.38352,49.46463],[6.36778,49.46937],[6.3687,49.4593],[6.28818,49.48465],[6.27875,49.503],[6.25029,49.50609],[6.2409,49.51408],[6.19543,49.50536],[6.17386,49.50934],[6.15366,49.50226],[6.16115,49.49297],[6.14321,49.48796],[6.12814,49.49365],[6.12346,49.4735],[6.10325,49.4707],[6.09845,49.46351],[6.10072,49.45268],[6.08373,49.45594],[6.07887,49.46399],[6.05553,49.46663],[6.04176,49.44801],[6.02743,49.44845],[6.02648,49.45451],[5.97693,49.45513],[5.96876,49.49053],[5.94224,49.49608],[5.94128,49.50034],[5.86571,49.50015],[5.83389,49.52152],[5.83467,49.52717],[5.84466,49.53027],[5.83648,49.5425],[5.81664,49.53775],[5.80871,49.5425],[5.81838,49.54777],[5.79195,49.55228],[5.77435,49.56298],[5.7577,49.55915],[5.75649,49.54321],[5.64505,49.55146],[5.60909,49.51228],[5.55001,49.52729],[5.46541,49.49825],[5.46734,49.52648],[5.43713,49.5707],[5.3974,49.61596],[5.34837,49.62889],[5.33851,49.61599],[5.3137,49.61225],[5.30214,49.63055],[5.33039,49.6555],[5.31465,49.66846],[5.26232,49.69456],[5.14545,49.70287],[5.09249,49.76193],[4.96714,49.79872],[4.85464,49.78995],[4.86965,49.82271],[4.85134,49.86457],[4.88529,49.9236],[4.78827,49.95609],[4.8382,50.06738],[4.88602,50.15182],[4.83279,50.15331],[4.82438,50.16878],[4.75237,50.11314],[4.70064,50.09384],[4.68695,49.99685],[4.5414,49.96911],[4.51098,49.94659],[4.43488,49.94122],[4.35051,49.95315],[4.31963,49.97043],[4.20532,49.95803],[4.14239,49.98034],[4.13508,50.01976],[4.16294,50.04719],[4.23101,50.06945],[4.20147,50.13535],[4.13561,50.13078],[4.16014,50.19239],[4.15524,50.21103],[4.21945,50.25539],[4.20651,50.27333],[4.17861,50.27443],[4.17347,50.28838],[4.15524,50.2833],[4.16808,50.25786],[4.13665,50.25609],[4.11954,50.30425],[4.10957,50.30234],[4.10237,50.31247],[4.0689,50.3254],[4.0268,50.35793],[3.96771,50.34989],[3.90781,50.32814],[3.84314,50.35219],[3.73911,50.34809],[3.70987,50.3191],[3.71009,50.30305],[3.66976,50.34563],[3.65709,50.36873],[3.67262,50.38663],[3.67494,50.40239],[3.66153,50.45165],[3.64426,50.46275],[3.61014,50.49568],[3.58361,50.49049],[3.5683,50.50192],[3.49509,50.48885],[3.51564,50.5256],[3.47385,50.53397],[3.44629,50.51009],[3.37693,50.49538],[3.28575,50.52724],[3.2729,50.60718],[3.23951,50.6585],[3.264,50.67668],[3.2536,50.68977],[3.26141,50.69151],[3.26063,50.70086],[3.24593,50.71389],[3.22042,50.71019],[3.20845,50.71662],[3.19017,50.72569],[3.20064,50.73547],[3.18811,50.74025],[3.18339,50.74981],[3.16476,50.76843],[3.15017,50.79031],[3.1257,50.78603],[3.11987,50.79188],[3.11206,50.79416],[3.10614,50.78303],[3.09163,50.77717],[3.04314,50.77674],[3.00537,50.76588],[2.96778,50.75242],[2.95019,50.75138],[2.90873,50.702],[2.91036,50.6939],[2.90069,50.69263],[2.88504,50.70656],[2.87937,50.70298],[2.86985,50.7033],[2.8483,50.72276],[2.81056,50.71773],[2.71165,50.81295],[2.63331,50.81457],[2.59093,50.91751],[2.63074,50.94746],[2.57551,51.00326],[2.55904,51.07014]]]]}},{type:"Feature",properties:{iso1A2:"GA",iso1A3:"GAB",iso1N3:"266",wikidata:"Q1000",nameEn:"Gabon",groups:["017","202","002"],callingCodes:["241"]},geometry:{type:"MultiPolygon",coordinates:[[[[13.29457,2.16106],[13.28534,2.25716],[11.37116,2.29975],[11.3561,2.17217],[11.35307,1.00251],[9.79648,1.0019],[9.78058,1.03996],[9.76085,1.05949],[9.73014,1.06721],[9.68638,1.06836],[9.66092,1.05865],[9.62096,1.03039],[9.54793,1.0185],[9.51998,.96418],[9.35563,.84865],[7.24416,-.64092],[10.75913,-4.39519],[11.12647,-3.94169],[11.22301,-3.69888],[11.48764,-3.51089],[11.57949,-3.52798],[11.68608,-3.68942],[11.87083,-3.71571],[11.92719,-3.62768],[11.8318,-3.5812],[11.96554,-3.30267],[11.70227,-3.17465],[11.70558,-3.0773],[11.80365,-3.00424],[11.64798,-2.81146],[11.5359,-2.85654],[11.64487,-2.61865],[11.57637,-2.33379],[11.74605,-2.39936],[11.96866,-2.33559],[12.04895,-2.41704],[12.47925,-2.32626],[12.44656,-1.92025],[12.61312,-1.8129],[12.82172,-1.91091],[13.02759,-2.33098],[13.47977,-2.43224],[13.75884,-2.09293],[13.92073,-2.35581],[13.85846,-2.46935],[14.10442,-2.49268],[14.23829,-2.33715],[14.16202,-2.23916],[14.23518,-2.15671],[14.25932,-1.97624],[14.41838,-1.89412],[14.52569,-.57818],[14.41887,-.44799],[14.2165,-.38261],[14.06862,-.20826],[13.90632,-.2287],[13.88648,.26652],[14.10909,.58563],[14.26066,.57255],[14.48179,.9152],[14.25186,1.39842],[13.89582,1.4261],[13.15519,1.23368],[13.25447,1.32339],[13.13461,1.57238],[13.29457,2.16106]]]]}},{type:"Feature",properties:{iso1A2:"GB",iso1A3:"GBR",iso1N3:"826",wikidata:"Q145",nameEn:"United Kingdom",aliases:["UK","Britain","Great Britain"],groups:["154","150"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["44"]},geometry:{type:"MultiPolygon",coordinates:[[[[-5.83481,53.87749],[-4.1819,54.57861],[-3.64906,54.12723],[-5.37267,53.63269],[-5.79914,52.03902],[-7.74976,48.64773],[1.17405,50.74239],[2.18458,51.52087],[2.56575,51.85301],[-.3751,61.32236],[-14.78497,57.60709],[-7.93366,55.84142],[-6.79943,55.54107],[-6.71944,55.27952],[-6.9734,55.19878],[-7.2471,55.06933],[-7.34464,55.04688],[-7.4033,55.00391],[-7.40004,54.94498],[-7.44404,54.9403],[-7.4473,54.87003],[-7.47626,54.83084],[-7.54508,54.79401],[-7.54671,54.74606],[-7.64449,54.75265],[-7.75041,54.7103],[-7.83352,54.73854],[-7.93293,54.66603],[-7.70315,54.62077],[-7.8596,54.53671],[-7.99812,54.54427],[-8.04538,54.48941],[-8.179,54.46763],[-8.04555,54.36292],[-7.87101,54.29299],[-7.8596,54.21779],[-7.81397,54.20159],[-7.69501,54.20731],[-7.55812,54.12239],[-7.4799,54.12239],[-7.44567,54.1539],[-7.32834,54.11475],[-7.30553,54.11869],[-7.34005,54.14698],[-7.29157,54.17191],[-7.28017,54.16714],[-7.29687,54.1354],[-7.29493,54.12013],[-7.26316,54.13863],[-7.25012,54.20063],[-7.14908,54.22732],[-7.19145,54.31296],[-7.02034,54.4212],[-6.87775,54.34682],[-6.85179,54.29176],[-6.81583,54.22791],[-6.74575,54.18788],[-6.70175,54.20218],[-6.6382,54.17071],[-6.66264,54.0666],[-6.62842,54.03503],[-6.47849,54.06947],[-6.36605,54.07234],[-6.36279,54.11248],[-6.32694,54.09337],[-6.29003,54.11278],[-6.26218,54.09785],[-5.83481,53.87749]]],[[[33.70575,34.97947],[33.83531,34.73974],[33.98684,34.76642],[33.90075,34.96623],[33.86432,34.97592],[33.84811,34.97075],[33.83505,34.98108],[33.85621,34.98956],[33.85891,35.001],[33.85216,35.00579],[33.84045,35.00616],[33.82875,35.01685],[33.83055,35.02865],[33.81524,35.04192],[33.8012,35.04786],[33.82051,35.0667],[33.8355,35.05777],[33.85261,35.0574],[33.88367,35.07877],[33.89485,35.06873],[33.90247,35.07686],[33.91299,35.07579],[33.91789,35.08688],[33.89853,35.11377],[33.88737,35.11408],[33.88943,35.12007],[33.88561,35.12449],[33.87224,35.12293],[33.87622,35.10457],[33.87097,35.09389],[33.87479,35.08881],[33.8541,35.07201],[33.84168,35.06823],[33.82067,35.07826],[33.78581,35.05104],[33.76106,35.04253],[33.73824,35.05321],[33.71482,35.03722],[33.70209,35.04882],[33.7161,35.07279],[33.70861,35.07644],[33.69095,35.06237],[33.68474,35.06602],[33.67742,35.05963],[33.67678,35.03866],[33.69938,35.03123],[33.69731,35.01754],[33.71514,35.00294],[33.70639,34.99303],[33.70575,34.97947]],[[33.77312,34.9976],[33.77553,34.99518],[33.78516,34.99582],[33.79191,34.98914],[33.78917,34.98854],[33.78571,34.98951],[33.78318,34.98699],[33.78149,34.98854],[33.77843,34.988],[33.7778,34.98981],[33.76738,34.99188],[33.76605,34.99543],[33.75682,34.99916],[33.75994,35.00113],[33.77312,34.9976]],[[33.74144,35.01053],[33.7343,35.01178],[33.73781,35.02181],[33.74265,35.02329],[33.74983,35.02274],[33.7492,35.01319],[33.74144,35.01053]]],[[[32.86014,34.70585],[32.82717,34.70622],[32.79433,34.67883],[32.76136,34.68318],[32.75515,34.64985],[32.74412,34.43926],[33.26744,34.49942],[33.0138,34.64424],[32.96968,34.64046],[32.96718,34.63446],[32.95891,34.62919],[32.95323,34.64075],[32.95471,34.64528],[32.94976,34.65204],[32.94796,34.6587],[32.95325,34.66462],[32.97079,34.66112],[32.97736,34.65277],[32.99014,34.65518],[32.98668,34.67268],[32.99135,34.68061],[32.95539,34.68471],[32.94683,34.67907],[32.94379,34.67111],[32.93693,34.67027],[32.93449,34.66241],[32.92807,34.66736],[32.93043,34.67091],[32.91398,34.67343],[32.9068,34.66102],[32.86167,34.68734],[32.86014,34.70585]]]]}},{type:"Feature",properties:{iso1A2:"GD",iso1A3:"GRD",iso1N3:"308",wikidata:"Q769",nameEn:"Grenada",aliases:["WG"],groups:["029","003","419","019"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["1 473"]},geometry:{type:"MultiPolygon",coordinates:[[[[-62.14806,11.87638],[-61.57265,11.65795],[-61.13395,12.51526],[-61.38256,12.52991],[-61.73897,12.61191],[-62.14806,11.87638]]]]}},{type:"Feature",properties:{iso1A2:"GE",iso1A3:"GEO",iso1N3:"268",wikidata:"Q230",nameEn:"Georgia",groups:["145","142"],callingCodes:["995"]},geometry:{type:"MultiPolygon",coordinates:[[[[46.42738,41.91323],[45.61676,42.20768],[45.78692,42.48358],[45.36501,42.55268],[45.15318,42.70598],[44.88754,42.74934],[44.80941,42.61277],[44.70002,42.74679],[44.54202,42.75699],[43.95517,42.55396],[43.73119,42.62043],[43.81453,42.74297],[43.0419,43.02413],[43.03322,43.08883],[42.75889,43.19651],[42.66667,43.13917],[42.40563,43.23226],[41.64935,43.22331],[40.65957,43.56212],[40.10657,43.57344],[40.04445,43.47776],[40.03312,43.44262],[40.01007,43.42411],[40.01552,43.42025],[40.00853,43.40578],[40.0078,43.38551],[39.81147,43.06294],[40.89217,41.72528],[41.54366,41.52185],[41.7148,41.4932],[41.7124,41.47417],[41.81939,41.43621],[41.95134,41.52466],[42.26387,41.49346],[42.51772,41.43606],[42.59202,41.58183],[42.72794,41.59714],[42.84471,41.58912],[42.78995,41.50126],[42.84899,41.47265],[42.8785,41.50516],[43.02956,41.37891],[43.21707,41.30331],[43.13373,41.25503],[43.1945,41.25242],[43.23096,41.17536],[43.36118,41.2028],[43.44973,41.17666],[43.4717,41.12611],[43.67712,41.13398],[43.74717,41.1117],[43.84835,41.16329],[44.16591,41.19141],[44.18148,41.24644],[44.32139,41.2079],[44.34337,41.20312],[44.34417,41.2382],[44.46791,41.18204],[44.59322,41.1933],[44.61462,41.24018],[44.72814,41.20338],[44.82084,41.21513],[44.87887,41.20195],[44.89911,41.21366],[44.84358,41.23088],[44.81749,41.23488],[44.80053,41.25949],[44.81437,41.30371],[44.93493,41.25685],[45.0133,41.29747],[45.09867,41.34065],[45.1797,41.42231],[45.26285,41.46433],[45.31352,41.47168],[45.4006,41.42402],[45.45973,41.45898],[45.68389,41.3539],[45.71035,41.36208],[45.75705,41.35157],[45.69946,41.29545],[45.80842,41.2229],[45.95786,41.17956],[46.13221,41.19479],[46.27698,41.19011],[46.37661,41.10805],[46.456,41.09984],[46.48558,41.0576],[46.55096,41.1104],[46.63969,41.09515],[46.66148,41.20533],[46.72375,41.28609],[46.63658,41.37727],[46.4669,41.43331],[46.40307,41.48464],[46.33925,41.4963],[46.29794,41.5724],[46.34126,41.57454],[46.34039,41.5947],[46.3253,41.60912],[46.28182,41.60089],[46.26531,41.63339],[46.24429,41.59883],[46.19759,41.62327],[46.17891,41.72094],[46.20538,41.77205],[46.23962,41.75811],[46.30863,41.79133],[46.3984,41.84399],[46.42738,41.91323]]]]}},{type:"Feature",properties:{iso1A2:"GF",iso1A3:"GUF",iso1N3:"254",wikidata:"Q3769",nameEn:"French Guiana",country:"FR",groups:["EU","005","419","019"],callingCodes:["594"]},geometry:{type:"MultiPolygon",coordinates:[[[[-51.35485,4.8383],[-53.7094,6.2264],[-54.01074,5.68785],[-54.01877,5.52789],[-54.26916,5.26909],[-54.4717,4.91964],[-54.38444,4.13222],[-54.19367,3.84387],[-54.05128,3.63557],[-53.98914,3.627],[-53.9849,3.58697],[-54.28534,2.67798],[-54.42864,2.42442],[-54.6084,2.32856],[-54.16286,2.10779],[-53.78743,2.34412],[-52.96539,2.1881],[-52.6906,2.37298],[-52.31787,3.17896],[-51.85573,3.83427],[-51.82312,3.85825],[-51.79599,3.89336],[-51.61983,4.14596],[-51.63798,4.51394],[-51.35485,4.8383]]]]}},{type:"Feature",properties:{iso1A2:"GG",iso1A3:"GGY",iso1N3:"831",wikidata:"Q25230",nameEn:"Guernsey",country:"GB",groups:["830","154","150"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["44 01481"]},geometry:{type:"MultiPolygon",coordinates:[[[[-2.65349,49.15373],[-2.36485,49.48223],[-2.09454,49.46288],[-2.02963,49.91866],[-3.28154,49.57329],[-2.65349,49.15373]]]]}},{type:"Feature",properties:{iso1A2:"GH",iso1A3:"GHA",iso1N3:"288",wikidata:"Q117",nameEn:"Ghana",groups:["011","202","002"],callingCodes:["233"]},geometry:{type:"MultiPolygon",coordinates:[[[[-.13493,11.14075],[-.27374,11.17157],[-.28566,11.12713],[-.35955,11.07801],[-.38219,11.12596],[-.42391,11.11661],[-.44298,11.04292],[-.61937,10.91305],[-.67143,10.99811],[-2.83373,11.0067],[-2.94232,10.64281],[-2.83108,10.40252],[-2.74174,9.83172],[-2.76534,9.56589],[-2.68802,9.49343],[-2.69814,9.22717],[-2.77799,9.04949],[-2.66357,9.01771],[-2.58243,8.7789],[-2.49037,8.20872],[-2.62901,8.11495],[-2.61232,8.02645],[-2.67787,8.02055],[-2.74819,7.92613],[-2.78395,7.94974],[-2.79467,7.86002],[-2.92339,7.60847],[-2.97822,7.27165],[-2.95438,7.23737],[-3.23327,6.81744],[-3.21954,6.74407],[-3.25999,6.62521],[-3.01896,5.71697],[-2.95323,5.71865],[-2.96671,5.6415],[-2.93132,5.62137],[-2.85378,5.65156],[-2.76614,5.60963],[-2.72737,5.34789],[-2.77625,5.34621],[-2.73074,5.1364],[-2.75502,5.10657],[-2.95261,5.12477],[-2.96554,5.10397],[-3.063,5.13665],[-3.11073,5.12675],[-3.10675,5.08515],[-3.34019,4.17519],[1.07031,5.15655],[1.27574,5.93551],[1.19771,6.11522],[1.19966,6.17069],[1.09187,6.17074],[1.05969,6.22998],[1.03108,6.24064],[.99652,6.33779],[.89283,6.33779],[.71048,6.53083],[.74862,6.56517],[.63659,6.63857],[.6497,6.73682],[.58176,6.76049],[.57406,6.80348],[.52853,6.82921],[.56508,6.92971],[.52098,6.94391],[.52217,6.9723],[.59606,7.01252],[.65327,7.31643],[.62943,7.41099],[.57223,7.39326],[.52455,7.45354],[.51979,7.58706],[.58295,7.62368],[.62943,7.85751],[.58891,8.12779],[.6056,8.13959],[.61156,8.18324],[.5913,8.19622],[.63897,8.25873],[.73432,8.29529],[.64731,8.48866],[.47211,8.59945],[.37319,8.75262],[.52455,8.87746],[.45424,9.04581],[.56388,9.40697],[.49118,9.48339],[.36485,9.49749],[.33148,9.44812],[.25758,9.42696],[.2254,9.47869],[.31241,9.50337],[.30406,9.521],[.2409,9.52335],[.23851,9.57389],[.38153,9.58682],[.36008,9.6256],[.29334,9.59387],[.26712,9.66437],[.28261,9.69022],[.32313,9.6491],[.34816,9.66907],[.34816,9.71607],[.32075,9.72781],[.36366,10.03309],[.41252,10.02018],[.41371,10.06361],[.35293,10.09412],[.39584,10.31112],[.33028,10.30408],[.29453,10.41546],[.18846,10.4096],[.12886,10.53149],[-.05945,10.63458],[-.09141,10.7147],[-.07327,10.71845],[-.07183,10.76794],[-.0228,10.81916],[-.02685,10.8783],[-.00908,10.91644],[-.0063,10.96417],[.03355,10.9807],[.02395,11.06229],[.00342,11.08317],[-.00514,11.10763],[-.0275,11.11202],[-.05733,11.08628],[-.14462,11.10811],[-.13493,11.14075]]]]}},{type:"Feature",properties:{iso1A2:"GI",iso1A3:"GIB",iso1N3:"292",wikidata:"Q1410",nameEn:"Gibraltar",country:"GB",groups:["039","150"],callingCodes:["350"]},geometry:{type:"MultiPolygon",coordinates:[[[[-5.28217,36.09907],[-5.27801,36.14942],[-5.33822,36.15272],[-5.34536,36.15501],[-5.36494,36.15496],[-5.38545,36.15481],[-5.40134,36.14896],[-5.39074,36.10278],[-5.36503,36.06205],[-5.32837,36.05935],[-5.3004,36.07439],[-5.28217,36.09907]]]]}},{type:"Feature",properties:{iso1A2:"GL",iso1A3:"GRL",iso1N3:"304",wikidata:"Q223",nameEn:"Greenland",country:"DK",groups:["021","003","019"],callingCodes:["299"]},geometry:{type:"MultiPolygon",coordinates:[[[[-45.47832,84.58738],[-68.21821,80.48551],[-76.75614,76.72014],[-46.37635,57.3249],[-9.68082,72.73731],[-5.7106,84.28058],[-45.47832,84.58738]]]]}},{type:"Feature",properties:{iso1A2:"GM",iso1A3:"GMB",iso1N3:"270",wikidata:"Q1005",nameEn:"The Gambia",groups:["011","202","002"],callingCodes:["220"]},geometry:{type:"MultiPolygon",coordinates:[[[[-15.14917,13.57989],[-14.36795,13.23033],[-13.79409,13.34472],[-13.8955,13.59126],[-14.34721,13.46578],[-14.93719,13.80173],[-15.36504,13.79313],[-15.47902,13.58758],[-17.43598,13.59273],[-17.43966,13.04579],[-16.74676,13.06025],[-16.69343,13.16791],[-15.80355,13.16729],[-15.80478,13.34832],[-15.26908,13.37768],[-15.14917,13.57989]]]]}},{type:"Feature",properties:{iso1A2:"GN",iso1A3:"GIN",iso1N3:"324",wikidata:"Q1006",nameEn:"Guinea",groups:["011","202","002"],callingCodes:["224"]},geometry:{type:"MultiPolygon",coordinates:[[[[-11.37536,12.40788],[-11.46267,12.44559],[-11.91331,12.42008],[-12.35415,12.32758],[-12.87336,12.51892],[-13.06603,12.49342],[-13.05296,12.64003],[-13.70523,12.68013],[-13.7039,12.60313],[-13.65089,12.49515],[-13.64168,12.42764],[-13.70851,12.24978],[-13.92745,12.24077],[-13.94589,12.16869],[-13.7039,12.00869],[-13.7039,11.70195],[-14.09799,11.63649],[-14.26623,11.67486],[-14.31513,11.60713],[-14.51173,11.49708],[-14.66677,11.51188],[-14.77786,11.36323],[-14.95993,10.99244],[-15.07174,10.89557],[-15.96748,10.162],[-14.36218,8.64107],[-13.29911,9.04245],[-13.18586,9.0925],[-13.08953,9.0409],[-12.94095,9.26335],[-12.76788,9.3133],[-12.47254,9.86834],[-12.24262,9.92386],[-12.12634,9.87203],[-11.91023,9.93927],[-11.89624,9.99763],[-11.2118,10.00098],[-10.6534,9.29919],[-10.74484,9.07998],[-10.5783,9.06386],[-10.56197,8.81225],[-10.47707,8.67669],[-10.61422,8.5314],[-10.70565,8.29235],[-10.63934,8.35326],[-10.54891,8.31174],[-10.37257,8.48941],[-10.27575,8.48711],[-10.203,8.47991],[-10.14579,8.52665],[-10.05375,8.50697],[-10.05873,8.42578],[-9.77763,8.54633],[-9.47415,8.35195],[-9.50898,8.18455],[-9.41445,8.02448],[-9.44928,7.9284],[-9.35724,7.74111],[-9.37465,7.62032],[-9.48161,7.37122],[-9.41943,7.41809],[-9.305,7.42056],[-9.20798,7.38109],[-9.18311,7.30461],[-9.09107,7.1985],[-8.93435,7.2824],[-8.85724,7.26019],[-8.8448,7.35149],[-8.72789,7.51429],[-8.67814,7.69428],[-8.55874,7.70167],[-8.55874,7.62525],[-8.47114,7.55676],[-8.4003,7.6285],[-8.21374,7.54466],[-8.09931,7.78626],[-8.13414,7.87991],[-8.06449,8.04989],[-7.94695,8.00925],[-7.99919,8.11023],[-7.98675,8.20134],[-8.062,8.16071],[-8.2411,8.24196],[-8.22991,8.48438],[-7.92518,8.50652],[-7.65653,8.36873],[-7.69882,8.66148],[-7.95503,8.81146],[-7.92518,8.99332],[-7.73862,9.08422],[-7.90777,9.20456],[-7.85056,9.41812],[-8.03463,9.39604],[-8.14657,9.55062],[-8.09434,9.86936],[-8.15652,9.94288],[-8.11921,10.04577],[-8.01225,10.1021],[-7.97971,10.17117],[-7.9578,10.2703],[-8.10207,10.44649],[-8.22711,10.41722],[-8.32614,10.69273],[-8.2667,10.91762],[-8.35083,11.06234],[-8.66923,10.99397],[-8.40058,11.37466],[-8.80854,11.66715],[-8.94784,12.34842],[-9.13689,12.50875],[-9.38067,12.48446],[-9.32097,12.29009],[-9.63938,12.18312],[-9.714,12.0226],[-10.30604,12.24634],[-10.71897,11.91552],[-10.80355,12.1053],[-10.99758,12.24634],[-11.24136,12.01286],[-11.50006,12.17826],[-11.37536,12.40788]]]]}},{type:"Feature",properties:{iso1A2:"GP",iso1A3:"GLP",iso1N3:"312",wikidata:"Q17012",nameEn:"Guadeloupe",country:"FR",groups:["EU","029","003","419","019"],callingCodes:["590"]},geometry:{type:"MultiPolygon",coordinates:[[[[-60.95725,15.70997],[-60.71337,16.48911],[-61.44461,16.81958],[-61.83929,16.66647],[-62.17275,16.35721],[-61.81728,15.58058],[-61.44899,15.79571],[-60.95725,15.70997]]]]}},{type:"Feature",properties:{iso1A2:"GQ",iso1A3:"GNQ",iso1N3:"226",wikidata:"Q983",nameEn:"Equatorial Guinea",groups:["017","202","002"],callingCodes:["240"]},geometry:{type:"MultiPolygon",coordinates:[[[[9.22018,3.72052],[8.34397,4.30689],[8.05799,3.48284],[8.0168,1.79377],[6.69416,-.53945],[5.38965,-1.19244],[5.3459,-2.30107],[7.24416,-.64092],[9.35563,.84865],[9.51998,.96418],[9.54793,1.0185],[9.62096,1.03039],[9.66092,1.05865],[9.68638,1.06836],[9.73014,1.06721],[9.76085,1.05949],[9.78058,1.03996],[9.79648,1.0019],[11.35307,1.00251],[11.3561,2.17217],[9.991,2.16561],[9.90749,2.20049],[9.89012,2.20457],[9.84716,2.24676],[9.83238,2.29079],[9.83754,2.32428],[9.82123,2.35097],[9.81162,2.33797],[9.22018,3.72052]]]]}},{type:"Feature",properties:{iso1A2:"GR",iso1A3:"GRC",iso1N3:"300",wikidata:"Q41",nameEn:"Greece",aliases:["EL"],groups:["EU","039","150"],callingCodes:["30"]},geometry:{type:"MultiPolygon",coordinates:[[[[26.03489,40.73051],[26.0754,40.72772],[26.08638,40.73214],[26.12495,40.74283],[26.12854,40.77339],[26.15685,40.80709],[26.21351,40.83298],[26.20856,40.86048],[26.26169,40.9168],[26.29441,40.89119],[26.28623,40.93005],[26.32259,40.94042],[26.35894,40.94292],[26.33297,40.98388],[26.3606,41.02027],[26.31928,41.07386],[26.32259,41.24929],[26.39861,41.25053],[26.5209,41.33993],[26.5837,41.32131],[26.62997,41.34613],[26.61767,41.42281],[26.59742,41.48058],[26.59196,41.60491],[26.5209,41.62592],[26.47958,41.67037],[26.35957,41.71149],[26.30255,41.70925],[26.2654,41.71544],[26.22888,41.74139],[26.21325,41.73223],[26.16841,41.74858],[26.06148,41.70345],[26.07083,41.64584],[26.15146,41.60828],[26.14328,41.55496],[26.17951,41.55409],[26.176,41.50072],[26.14796,41.47533],[26.20288,41.43943],[26.16548,41.42278],[26.12926,41.35878],[25.87919,41.30526],[25.8266,41.34563],[25.70507,41.29209],[25.66183,41.31316],[25.61042,41.30614],[25.55082,41.31667],[25.52394,41.2798],[25.48187,41.28506],[25.28322,41.23411],[25.11611,41.34212],[24.942,41.38685],[24.90928,41.40876],[24.86136,41.39298],[24.82514,41.4035],[24.8041,41.34913],[24.71529,41.41928],[24.61129,41.42278],[24.52599,41.56808],[24.30513,41.51297],[24.27124,41.57682],[24.18126,41.51735],[24.10063,41.54796],[24.06323,41.53222],[24.06908,41.46132],[23.96975,41.44118],[23.91483,41.47971],[23.89613,41.45257],[23.80148,41.43943],[23.76525,41.40175],[23.67644,41.41139],[23.63203,41.37632],[23.52453,41.40262],[23.40416,41.39999],[23.33639,41.36317],[23.31301,41.40525],[23.22771,41.37106],[23.21953,41.33773],[23.1833,41.31755],[22.93334,41.34104],[22.81199,41.3398],[22.76408,41.32225],[22.74538,41.16321],[22.71266,41.13945],[22.65306,41.18168],[22.62852,41.14385],[22.58295,41.11568],[22.5549,41.13065],[22.42285,41.11921],[22.26744,41.16409],[22.17629,41.15969],[22.1424,41.12449],[22.06527,41.15617],[21.90869,41.09191],[21.91102,41.04786],[21.7556,40.92525],[21.69601,40.9429],[21.57448,40.86076],[21.53007,40.90759],[21.41555,40.9173],[21.35595,40.87578],[21.25779,40.86165],[21.21105,40.8855],[21.15262,40.85546],[20.97887,40.85475],[20.98396,40.79109],[20.95752,40.76982],[20.98134,40.76046],[21.05833,40.66586],[21.03932,40.56299],[20.96908,40.51526],[20.94925,40.46625],[20.83688,40.47882],[20.7906,40.42726],[20.78234,40.35803],[20.71789,40.27739],[20.67162,40.09433],[20.62566,40.0897],[20.61081,40.07866],[20.55593,40.06524],[20.51297,40.08168],[20.48487,40.06271],[20.42373,40.06777],[20.37911,39.99058],[20.31135,39.99438],[20.41546,39.82832],[20.41475,39.81437],[20.38572,39.78516],[20.30804,39.81563],[20.29152,39.80421],[20.31961,39.72799],[20.27412,39.69884],[20.22707,39.67459],[20.22376,39.64532],[20.15988,39.652],[20.12956,39.65805],[20.05189,39.69112],[20.00957,39.69227],[19.98042,39.6504],[19.92466,39.69533],[19.97622,39.78684],[19.95905,39.82857],[19.0384,40.35325],[19.20409,39.7532],[22.5213,33.45682],[29.73302,35.92555],[29.69611,36.10365],[29.61805,36.14179],[29.61002,36.1731],[29.48192,36.18377],[29.30783,36.01033],[28.23708,36.56812],[27.95037,36.46155],[27.89482,36.69898],[27.46117,36.53789],[27.24613,36.71622],[27.45627,36.9008],[27.20312,36.94571],[27.14757,37.32],[26.95583,37.64989],[26.99377,37.69034],[27.16428,37.72343],[27.05537,37.9131],[26.21136,38.17558],[26.24183,38.44695],[26.32173,38.48731],[26.21136,38.65436],[26.61814,38.81372],[26.70773,39.0312],[26.43357,39.43096],[25.94257,39.39358],[25.61285,40.17161],[26.04292,40.3958],[25.94795,40.72797],[26.03489,40.73051]]]]}},{type:"Feature",properties:{iso1A2:"GS",iso1A3:"SGS",iso1N3:"239",wikidata:"Q35086",nameEn:"South Georgia and South Sandwich Islands",country:"GB",groups:["005","419","019"],driveSide:"left",callingCodes:["500"]},geometry:{type:"MultiPolygon",coordinates:[[[[-35.26394,-43.68272],[-53.39656,-59.87088],[-22.31757,-59.85974],[-35.26394,-43.68272]]]]}},{type:"Feature",properties:{iso1A2:"GT",iso1A3:"GTM",iso1N3:"320",wikidata:"Q774",nameEn:"Guatemala",groups:["013","003","419","019"],callingCodes:["502"]},geometry:{type:"MultiPolygon",coordinates:[[[[-89.14985,17.81563],[-90.98678,17.81655],[-90.99199,17.25192],[-91.43809,17.25373],[-91.04436,16.92175],[-90.69064,16.70697],[-90.61212,16.49832],[-90.40499,16.40524],[-90.44567,16.07573],[-91.73182,16.07371],[-92.20983,15.26077],[-92.0621,15.07406],[-92.1454,14.98143],[-92.1423,14.88647],[-92.18161,14.84147],[-92.1454,14.6804],[-92.2261,14.53423],[-92.37213,14.39277],[-90.55276,12.8866],[-90.11344,13.73679],[-90.10505,13.85104],[-89.88937,14.0396],[-89.81807,14.07073],[-89.76103,14.02923],[-89.73251,14.04133],[-89.75569,14.07073],[-89.70756,14.1537],[-89.61844,14.21937],[-89.52397,14.22628],[-89.50614,14.26084],[-89.58814,14.33165],[-89.57441,14.41637],[-89.39028,14.44561],[-89.34776,14.43013],[-89.35189,14.47553],[-89.23719,14.58046],[-89.15653,14.57802],[-89.13132,14.71582],[-89.23467,14.85596],[-89.15149,14.97775],[-89.18048,14.99967],[-89.15149,15.07392],[-88.97343,15.14039],[-88.32467,15.63665],[-88.31459,15.66942],[-88.24022,15.69247],[-88.22552,15.72294],[-88.20359,16.03858],[-88.40779,16.09624],[-88.95358,15.88698],[-89.02415,15.9063],[-89.17418,15.90898],[-89.22683,15.88619],[-89.15025,17.04813],[-89.14985,17.81563]]]]}},{type:"Feature",properties:{iso1A2:"GU",iso1A3:"GUM",iso1N3:"316",wikidata:"Q16635",nameEn:"Guam",country:"US",groups:["057","009"],roadSpeedUnit:"mph",callingCodes:["1 671"]},geometry:{type:"MultiPolygon",coordinates:[[[[146.25931,13.85876],[143.82485,13.92273],[144.61642,12.82462],[146.25931,13.85876]]]]}},{type:"Feature",properties:{iso1A2:"GW",iso1A3:"GNB",iso1N3:"624",wikidata:"Q1007",nameEn:"Guinea-Bissau",groups:["011","202","002"],callingCodes:["245"]},geometry:{type:"MultiPolygon",coordinates:[[[[-14.31513,11.60713],[-14.26623,11.67486],[-14.09799,11.63649],[-13.7039,11.70195],[-13.7039,12.00869],[-13.94589,12.16869],[-13.92745,12.24077],[-13.70851,12.24978],[-13.64168,12.42764],[-13.65089,12.49515],[-13.7039,12.60313],[-13.70523,12.68013],[-15.17582,12.6847],[-15.67302,12.42974],[-16.20591,12.46157],[-16.38191,12.36449],[-16.70562,12.34803],[-17.4623,11.92379],[-15.96748,10.162],[-15.07174,10.89557],[-14.95993,10.99244],[-14.77786,11.36323],[-14.66677,11.51188],[-14.51173,11.49708],[-14.31513,11.60713]]]]}},{type:"Feature",properties:{iso1A2:"GY",iso1A3:"GUY",iso1N3:"328",wikidata:"Q734",nameEn:"Guyana",groups:["005","419","019"],driveSide:"left",callingCodes:["592"]},geometry:{type:"MultiPolygon",coordinates:[[[[-56.84822,6.73257],[-59.54058,8.6862],[-59.98508,8.53046],[-59.85562,8.35213],[-59.80661,8.28906],[-59.83156,8.23261],[-59.97059,8.20791],[-60.02407,8.04557],[-60.38056,7.8302],[-60.51959,7.83373],[-60.64793,7.56877],[-60.71923,7.55817],[-60.59802,7.33194],[-60.63367,7.25061],[-60.54098,7.14804],[-60.44116,7.20817],[-60.28074,7.1162],[-60.39419,6.94847],[-60.54873,6.8631],[-61.13632,6.70922],[-61.20762,6.58174],[-61.15058,6.19558],[-61.4041,5.95304],[-60.73204,5.20931],[-60.32352,5.21299],[-60.20944,5.28754],[-59.98129,5.07097],[-60.04189,4.69801],[-60.15953,4.53456],[-59.78878,4.45637],[-59.69361,4.34069],[-59.73353,4.20399],[-59.51963,3.91951],[-59.86899,3.57089],[-59.79769,3.37162],[-59.99733,2.92312],[-59.91177,2.36759],[-59.7264,2.27497],[-59.74066,1.87596],[-59.25583,1.40559],[-58.92072,1.31293],[-58.84229,1.17749],[-58.53571,1.29154],[-58.4858,1.48399],[-58.33887,1.58014],[-58.01873,1.51966],[-57.97336,1.64566],[-57.77281,1.73344],[-57.55743,1.69605],[-57.35073,1.98327],[-57.23981,1.95808],[-57.09109,2.01854],[-57.07092,1.95304],[-56.7659,1.89509],[-56.47045,1.95135],[-56.55439,2.02003],[-56.70519,2.02964],[-57.35891,3.32121],[-58.0307,3.95513],[-57.8699,4.89394],[-57.37442,5.0208],[-57.22536,5.15605],[-57.31629,5.33714],[-56.84822,6.73257]]]]}},{type:"Feature",properties:{iso1A2:"HK",iso1A3:"HKG",iso1N3:"344",wikidata:"Q8646",nameEn:"Hong Kong",country:"CN",groups:["030","142"],driveSide:"left",callingCodes:["852"]},geometry:{type:"MultiPolygon",coordinates:[[[[113.92195,22.13873],[114.50148,22.15017],[114.44998,22.55977],[114.25154,22.55977],[114.22888,22.5436],[114.22185,22.55343],[114.20655,22.55706],[114.18338,22.55444],[114.17247,22.55944],[114.1597,22.56041],[114.15123,22.55163],[114.1482,22.54091],[114.13823,22.54319],[114.12665,22.54003],[114.11656,22.53415],[114.11181,22.52878],[114.1034,22.5352],[114.09692,22.53435],[114.09048,22.53716],[114.08606,22.53276],[114.07817,22.52997],[114.07267,22.51855],[114.06272,22.51617],[114.05729,22.51104],[114.05438,22.5026],[114.03113,22.5065],[113.86771,22.42972],[113.81621,22.2163],[113.83338,22.1826],[113.92195,22.13873]]]]}},{type:"Feature",properties:{iso1A2:"HM",iso1A3:"HMD",iso1N3:"334",wikidata:"Q131198",nameEn:"Heard Island and McDonald Islands",country:"AU",groups:["053","009"],driveSide:"left"},geometry:{type:"MultiPolygon",coordinates:[[[[71.08716,-53.87687],[75.44182,-53.99822],[72.87012,-51.48322],[71.08716,-53.87687]]]]}},{type:"Feature",properties:{iso1A2:"HN",iso1A3:"HND",iso1N3:"340",wikidata:"Q783",nameEn:"Honduras",groups:["013","003","419","019"],callingCodes:["504"]},geometry:{type:"MultiPolygon",coordinates:[[[[-83.86109,17.73736],[-88.20359,16.03858],[-88.22552,15.72294],[-88.24022,15.69247],[-88.31459,15.66942],[-88.32467,15.63665],[-88.97343,15.14039],[-89.15149,15.07392],[-89.18048,14.99967],[-89.15149,14.97775],[-89.23467,14.85596],[-89.13132,14.71582],[-89.15653,14.57802],[-89.23719,14.58046],[-89.35189,14.47553],[-89.34776,14.43013],[-89.04187,14.33644],[-88.94608,14.20207],[-88.85785,14.17763],[-88.815,14.11652],[-88.73182,14.10919],[-88.70661,14.04317],[-88.49738,13.97224],[-88.48982,13.86458],[-88.25791,13.91108],[-88.23018,13.99915],[-88.07641,13.98447],[-88.00331,13.86948],[-87.7966,13.91353],[-87.68821,13.80829],[-87.73106,13.75443],[-87.78148,13.52906],[-87.71657,13.50577],[-87.72115,13.46083],[-87.73841,13.44169],[-87.77354,13.45767],[-87.83467,13.44655],[-87.84675,13.41078],[-87.80177,13.35689],[-87.73714,13.32715],[-87.69751,13.25228],[-87.55124,13.12523],[-87.37107,12.98646],[-87.06306,13.00892],[-87.03785,12.98682],[-86.93197,13.05313],[-86.93383,13.18677],[-86.87066,13.30641],[-86.71267,13.30348],[-86.76812,13.79605],[-86.35219,13.77157],[-86.14801,14.04317],[-86.00685,14.08474],[-86.03458,13.99181],[-85.75477,13.8499],[-85.73964,13.9698],[-85.45762,14.11304],[-85.32149,14.2562],[-85.18602,14.24929],[-85.1575,14.53934],[-84.90082,14.80489],[-84.82596,14.82212],[-84.70119,14.68078],[-84.48373,14.63249],[-84.10584,14.76353],[-83.89551,14.76697],[-83.62101,14.89448],[-83.49268,15.01158],[-83.13724,15.00002],[-83.04763,15.03256],[-82.06974,14.49418],[-81.58685,18.0025],[-83.86109,17.73736]]]]}},{type:"Feature",properties:{iso1A2:"HR",iso1A3:"HRV",iso1N3:"191",wikidata:"Q224",nameEn:"Croatia",groups:["EU","039","150"],callingCodes:["385"]},geometry:{type:"MultiPolygon",coordinates:[[[[17.6444,42.88641],[17.5392,42.92787],[17.70879,42.97223],[17.64268,43.08595],[17.46986,43.16559],[17.286,43.33065],[17.25579,43.40353],[17.29699,43.44542],[17.24411,43.49376],[17.15828,43.49376],[17.00585,43.58037],[16.80736,43.76011],[16.75316,43.77157],[16.70922,43.84887],[16.55472,43.95326],[16.50528,44.0244],[16.43629,44.02826],[16.43662,44.07523],[16.36864,44.08263],[16.18688,44.27012],[16.21346,44.35231],[16.12969,44.38275],[16.16814,44.40679],[16.10566,44.52586],[16.03012,44.55572],[16.00884,44.58605],[16.05828,44.61538],[15.89348,44.74964],[15.8255,44.71501],[15.72584,44.82334],[15.79472,44.8455],[15.76096,44.87045],[15.74723,44.96818],[15.78568,44.97401],[15.74585,45.0638],[15.78842,45.11519],[15.76371,45.16508],[15.83512,45.22459],[15.98412,45.23088],[16.12153,45.09616],[16.29036,44.99732],[16.35404,45.00241],[16.35863,45.03529],[16.3749,45.05206],[16.38219,45.05139],[16.38309,45.05955],[16.40023,45.1147],[16.4634,45.14522],[16.49155,45.21153],[16.52982,45.22713],[16.5501,45.2212],[16.56559,45.22307],[16.60194,45.23042],[16.64962,45.20714],[16.74845,45.20393],[16.78219,45.19002],[16.81137,45.18434],[16.83804,45.18951],[16.92405,45.27607],[16.9385,45.22742],[17.0415,45.20759],[17.18438,45.14764],[17.24325,45.146],[17.25131,45.14957],[17.26815,45.18444],[17.32092,45.16246],[17.33573,45.14521],[17.41229,45.13335],[17.4498,45.16119],[17.45615,45.12523],[17.47589,45.12656],[17.51469,45.10791],[17.59104,45.10816],[17.66571,45.13408],[17.84826,45.04489],[17.87148,45.04645],[17.93706,45.08016],[17.97336,45.12245],[17.97834,45.13831],[17.99479,45.14958],[18.01594,45.15163],[18.03121,45.12632],[18.1624,45.07654],[18.24387,45.13699],[18.32077,45.1021],[18.41896,45.11083],[18.47939,45.05871],[18.65723,45.07544],[18.78357,44.97741],[18.80661,44.93561],[18.76369,44.93707],[18.76347,44.90669],[18.8704,44.85097],[19.01994,44.85493],[18.98957,44.90645],[19.02871,44.92541],[19.06853,44.89915],[19.15573,44.95409],[19.05205,44.97692],[19.1011,45.01191],[19.07952,45.14668],[19.14063,45.12972],[19.19144,45.17863],[19.43589,45.17137],[19.41941,45.23475],[19.28208,45.23813],[19.10774,45.29547],[18.97446,45.37528],[18.99918,45.49333],[19.08364,45.48804],[19.07471,45.53086],[18.94562,45.53712],[18.88776,45.57253],[18.96691,45.66731],[18.90305,45.71863],[18.85783,45.85493],[18.81394,45.91329],[18.80211,45.87995],[18.6792,45.92057],[18.57483,45.80772],[18.44368,45.73972],[18.12439,45.78905],[18.08869,45.76511],[17.99805,45.79671],[17.87377,45.78522],[17.66545,45.84207],[17.56821,45.93728],[17.35672,45.95209],[17.14592,46.16697],[16.8903,46.28122],[16.8541,46.36255],[16.7154,46.39523],[16.6639,46.45203],[16.59527,46.47524],[16.52604,46.47831],[16.5007,46.49644],[16.44036,46.5171],[16.38771,46.53608],[16.37193,46.55008],[16.29793,46.5121],[16.26733,46.51505],[16.26759,46.50566],[16.23961,46.49653],[16.25124,46.48067],[16.27398,46.42875],[16.27329,46.41467],[16.30162,46.40437],[16.30233,46.37837],[16.18824,46.38282],[16.14859,46.40547],[16.05281,46.39141],[16.05065,46.3833],[16.07314,46.36458],[16.07616,46.3463],[15.97965,46.30652],[15.79284,46.25811],[15.78817,46.21719],[15.75479,46.20336],[15.75436,46.21969],[15.67395,46.22478],[15.6434,46.21396],[15.64904,46.19229],[15.59909,46.14761],[15.6083,46.11992],[15.62317,46.09103],[15.72977,46.04682],[15.71246,46.01196],[15.70327,46.00015],[15.70636,45.92116],[15.67967,45.90455],[15.68383,45.88867],[15.68232,45.86819],[15.70411,45.8465],[15.66662,45.84085],[15.64185,45.82915],[15.57952,45.84953],[15.52234,45.82195],[15.47325,45.8253],[15.47531,45.79802],[15.40836,45.79491],[15.25423,45.72275],[15.30872,45.69014],[15.34919,45.71623],[15.4057,45.64727],[15.38952,45.63682],[15.34214,45.64702],[15.34695,45.63382],[15.31027,45.6303],[15.27747,45.60504],[15.29837,45.5841],[15.30249,45.53224],[15.38188,45.48752],[15.33051,45.45258],[15.27758,45.46678],[15.16862,45.42309],[15.05187,45.49079],[15.02385,45.48533],[14.92266,45.52788],[14.90554,45.47769],[14.81992,45.45913],[14.80124,45.49515],[14.71718,45.53442],[14.68605,45.53006],[14.69694,45.57366],[14.59576,45.62812],[14.60977,45.66403],[14.57397,45.67165],[14.53816,45.6205],[14.5008,45.60852],[14.49769,45.54424],[14.36693,45.48642],[14.32487,45.47142],[14.27681,45.4902],[14.26611,45.48239],[14.24239,45.50607],[14.22371,45.50388],[14.20348,45.46896],[14.07116,45.48752],[14.00578,45.52352],[13.96063,45.50825],[13.99488,45.47551],[13.97309,45.45258],[13.90771,45.45149],[13.88124,45.42637],[13.81742,45.43729],[13.7785,45.46787],[13.67398,45.4436],[13.62902,45.45898],[13.56979,45.4895],[13.45644,45.59464],[13.05142,45.33128],[13.12821,44.48877],[16.15283,42.18525],[18.45131,42.21682],[18.54128,42.39171],[18.52152,42.42302],[18.43588,42.48556],[18.44307,42.51077],[18.43735,42.55921],[18.36197,42.61423],[18.24318,42.6112],[17.88201,42.83668],[17.80854,42.9182],[17.7948,42.89556],[17.68151,42.92725],[17.6444,42.88641]]]]}},{type:"Feature",properties:{iso1A2:"HT",iso1A3:"HTI",iso1N3:"332",wikidata:"Q790",nameEn:"Haiti",aliases:["RH"],groups:["029","003","419","019"],callingCodes:["509"]},geometry:{type:"MultiPolygon",coordinates:[[[[-71.71885,18.78423],[-71.72624,18.87802],[-71.77766,18.95007],[-71.88102,18.95007],[-71.74088,19.0437],[-71.71088,19.08353],[-71.69938,19.10916],[-71.65337,19.11759],[-71.62642,19.21212],[-71.73229,19.26686],[-71.77766,19.33823],[-71.69448,19.37866],[-71.6802,19.45008],[-71.71268,19.53374],[-71.71449,19.55364],[-71.7429,19.58445],[-71.75865,19.70231],[-71.77419,19.73128],[-72.38946,20.27111],[-73.37289,20.43199],[-74.7289,18.71009],[-74.76465,18.06252],[-72.29523,17.48026],[-71.75671,18.03456],[-71.73783,18.07177],[-71.74994,18.11115],[-71.75465,18.14405],[-71.78271,18.18302],[-71.69952,18.34101],[-71.90875,18.45821],[-71.88102,18.50125],[-72.00201,18.62312],[-71.95412,18.64939],[-71.82556,18.62551],[-71.71885,18.78423]]]]}},{type:"Feature",properties:{iso1A2:"HU",iso1A3:"HUN",iso1N3:"348",wikidata:"Q28",nameEn:"Hungary",groups:["EU","151","150"],callingCodes:["36"]},geometry:{type:"MultiPolygon",coordinates:[[[[21.72525,48.34628],[21.67134,48.3989],[21.6068,48.50365],[21.44063,48.58456],[21.11516,48.49546],[20.83248,48.5824],[20.5215,48.53336],[20.29943,48.26104],[20.24312,48.2784],[19.92452,48.1283],[19.63338,48.25006],[19.52489,48.19791],[19.47957,48.09437],[19.28182,48.08336],[19.23924,48.0595],[19.01952,48.07052],[18.82176,48.04206],[18.76134,47.97499],[18.76821,47.87469],[18.8506,47.82308],[18.74074,47.8157],[18.66521,47.76772],[18.56496,47.76588],[18.29305,47.73541],[18.02938,47.75665],[17.71215,47.7548],[17.23699,48.02094],[17.16001,48.00636],[17.09786,47.97336],[17.11022,47.92461],[17.08275,47.87719],[17.00997,47.86245],[17.07039,47.81129],[17.05048,47.79377],[17.08893,47.70928],[16.87538,47.68895],[16.86509,47.72268],[16.82938,47.68432],[16.7511,47.67878],[16.72089,47.73469],[16.65679,47.74197],[16.61183,47.76171],[16.54779,47.75074],[16.53514,47.73837],[16.55129,47.72268],[16.4222,47.66537],[16.58699,47.61772],[16.64193,47.63114],[16.71059,47.52692],[16.64821,47.50155],[16.6718,47.46139],[16.57152,47.40868],[16.52414,47.41007],[16.49908,47.39416],[16.45104,47.41181],[16.47782,47.25918],[16.44142,47.25079],[16.43663,47.21127],[16.41739,47.20649],[16.42801,47.18422],[16.4523,47.18812],[16.46442,47.16845],[16.44932,47.14418],[16.52863,47.13974],[16.46134,47.09395],[16.52176,47.05747],[16.43936,47.03548],[16.51369,47.00084],[16.28202,47.00159],[16.27594,46.9643],[16.22403,46.939],[16.19904,46.94134],[16.10983,46.867],[16.14365,46.8547],[16.15711,46.85434],[16.21892,46.86961],[16.2365,46.87775],[16.2941,46.87137],[16.34547,46.83836],[16.3408,46.80641],[16.31303,46.79838],[16.30966,46.7787],[16.37816,46.69975],[16.42641,46.69228],[16.41863,46.66238],[16.38594,46.6549],[16.39217,46.63673],[16.50139,46.56684],[16.52885,46.53303],[16.52604,46.5051],[16.59527,46.47524],[16.6639,46.45203],[16.7154,46.39523],[16.8541,46.36255],[16.8903,46.28122],[17.14592,46.16697],[17.35672,45.95209],[17.56821,45.93728],[17.66545,45.84207],[17.87377,45.78522],[17.99805,45.79671],[18.08869,45.76511],[18.12439,45.78905],[18.44368,45.73972],[18.57483,45.80772],[18.6792,45.92057],[18.80211,45.87995],[18.81394,45.91329],[18.99712,45.93537],[19.01284,45.96529],[19.0791,45.96458],[19.10388,46.04015],[19.14543,45.9998],[19.28826,45.99694],[19.52473,46.1171],[19.56113,46.16824],[19.66007,46.19005],[19.81491,46.1313],[19.93508,46.17553],[20.01816,46.17696],[20.03533,46.14509],[20.09713,46.17315],[20.26068,46.12332],[20.28324,46.1438],[20.35573,46.16629],[20.45377,46.14405],[20.49718,46.18721],[20.63863,46.12728],[20.76085,46.21002],[20.74574,46.25467],[20.86797,46.28884],[21.06572,46.24897],[21.16872,46.30118],[21.28061,46.44941],[21.26929,46.4993],[21.33214,46.63035],[21.43926,46.65109],[21.5151,46.72147],[21.48935,46.7577],[21.52028,46.84118],[21.59307,46.86935],[21.59581,46.91628],[21.68645,46.99595],[21.648,47.03902],[21.78395,47.11104],[21.94463,47.38046],[22.01055,47.37767],[22.03389,47.42508],[22.00917,47.50492],[22.31816,47.76126],[22.41979,47.7391],[22.46559,47.76583],[22.67247,47.7871],[22.76617,47.8417],[22.77991,47.87211],[22.89849,47.95851],[22.84276,47.98602],[22.87847,48.04665],[22.81804,48.11363],[22.73427,48.12005],[22.66835,48.09162],[22.58733,48.10813],[22.59007,48.15121],[22.49806,48.25189],[22.38133,48.23726],[22.2083,48.42534],[22.14689,48.4005],[21.83339,48.36242],[21.8279,48.33321],[21.72525,48.34628]]]]}},{type:"Feature",properties:{iso1A2:"IC",wikidata:"Q5813",nameEn:"Canary Islands",country:"ES",groups:["EU","039","150"],isoStatus:"excRes",callingCodes:["34"]},geometry:{type:"MultiPolygon",coordinates:[[[[-15.92339,29.50503],[-25.3475,27.87574],[-14.43883,27.02969],[-9.94494,32.97138],[-15.92339,29.50503]]]]}},{type:"Feature",properties:{iso1A2:"ID",iso1A3:"IDN",iso1N3:"360",wikidata:"Q252",nameEn:"Indonesia",aliases:["RI"],groups:["035","142"],driveSide:"left",callingCodes:["62"]},geometry:{type:"MultiPolygon",coordinates:[[[[141.02352,.08993],[128.97621,3.08804],[126.69413,6.02692],[124.97752,4.82064],[118.41402,3.99509],[118.07935,4.15511],[117.89538,4.16637],[117.67641,4.16535],[117.47313,4.18857],[117.25801,4.35108],[115.90217,4.37708],[115.58276,3.93499],[115.53713,3.14776],[115.11343,2.82879],[115.1721,2.49671],[114.80706,2.21665],[114.80706,1.92351],[114.57892,1.5],[114.03788,1.44787],[113.64677,1.23933],[113.01448,1.42832],[113.021,1.57819],[112.48648,1.56516],[112.2127,1.44135],[112.15679,1.17004],[111.94553,1.12016],[111.82846,.99349],[111.55434,.97864],[111.22979,1.08326],[110.62374,.873],[110.49182,.88088],[110.35354,.98869],[109.66397,1.60425],[109.66397,1.79972],[109.57923,1.80624],[109.53794,1.91771],[109.62558,1.99182],[109.64506,2.08014],[109.71058,2.32059],[108.10426,5.42408],[105.01437,3.24936],[104.56723,1.44271],[104.34728,1.33529],[104.12282,1.27714],[104.03085,1.26954],[103.74084,1.12902],[103.66049,1.18825],[103.56591,1.19719],[103.03657,1.30383],[96.11174,6.69841],[74.28481,-3.17525],[122.14954,-11.52517],[125.68138,-9.85176],[125.09025,-9.46406],[124.97892,-9.19281],[125.04044,-9.17093],[125.09434,-9.19669],[125.18907,-9.16434],[125.18632,-9.03142],[125.11764,-8.96359],[124.97742,-9.08128],[124.94011,-8.85617],[124.46701,-9.13002],[124.45971,-9.30263],[124.38554,-9.3582],[124.35258,-9.43002],[124.3535,-9.48493],[124.28115,-9.50453],[124.28115,-9.42189],[124.21247,-9.36904],[124.14517,-9.42324],[124.10539,-9.41206],[124.04286,-9.34243],[124.04628,-9.22671],[124.33472,-9.11416],[124.92337,-8.75859],[125.31127,-8.22976],[125.65946,-8.06136],[125.87691,-8.31789],[127.42116,-8.22471],[127.55165,-9.05052],[140.88922,-9.34945],[141.00782,-9.1242],[141.01763,-6.90181],[140.85295,-6.72996],[140.99813,-6.3233],[141.02352,.08993]]]]}},{type:"Feature",properties:{iso1A2:"IE",iso1A3:"IRL",iso1N3:"372",wikidata:"Q27",nameEn:"Ireland",groups:["EU","154","150"],driveSide:"left",callingCodes:["353"]},geometry:{type:"MultiPolygon",coordinates:[[[[-6.26218,54.09785],[-6.29003,54.11278],[-6.32694,54.09337],[-6.36279,54.11248],[-6.36605,54.07234],[-6.47849,54.06947],[-6.62842,54.03503],[-6.66264,54.0666],[-6.6382,54.17071],[-6.70175,54.20218],[-6.74575,54.18788],[-6.81583,54.22791],[-6.85179,54.29176],[-6.87775,54.34682],[-7.02034,54.4212],[-7.19145,54.31296],[-7.14908,54.22732],[-7.25012,54.20063],[-7.26316,54.13863],[-7.29493,54.12013],[-7.29687,54.1354],[-7.28017,54.16714],[-7.29157,54.17191],[-7.34005,54.14698],[-7.30553,54.11869],[-7.32834,54.11475],[-7.44567,54.1539],[-7.4799,54.12239],[-7.55812,54.12239],[-7.69501,54.20731],[-7.81397,54.20159],[-7.8596,54.21779],[-7.87101,54.29299],[-8.04555,54.36292],[-8.179,54.46763],[-8.04538,54.48941],[-7.99812,54.54427],[-7.8596,54.53671],[-7.70315,54.62077],[-7.93293,54.66603],[-7.83352,54.73854],[-7.75041,54.7103],[-7.64449,54.75265],[-7.54671,54.74606],[-7.54508,54.79401],[-7.47626,54.83084],[-7.4473,54.87003],[-7.44404,54.9403],[-7.40004,54.94498],[-7.4033,55.00391],[-7.34464,55.04688],[-7.2471,55.06933],[-6.9734,55.19878],[-6.71944,55.27952],[-6.79943,55.54107],[-7.93366,55.84142],[-22.01468,48.19557],[-5.79914,52.03902],[-5.37267,53.63269],[-5.83481,53.87749],[-6.26218,54.09785]]]]}},{type:"Feature",properties:{iso1A2:"IL",iso1A3:"ISR",iso1N3:"376",wikidata:"Q801",nameEn:"Israel",groups:["145","142"],callingCodes:["972"]},geometry:{type:"MultiPolygon",coordinates:[[[[34.052,31.46619],[34.29262,31.70393],[34.48681,31.59711],[34.56797,31.54197],[34.48892,31.48365],[34.40077,31.40926],[34.36505,31.36404],[34.37381,31.30598],[34.36523,31.28963],[34.29417,31.24194],[34.26742,31.21998],[34.92298,29.45305],[34.97718,29.54294],[34.98207,29.58147],[35.02147,29.66343],[35.14108,30.07374],[35.19183,30.34636],[35.16218,30.43535],[35.19595,30.50297],[35.21379,30.60401],[35.29311,30.71365],[35.33456,30.81224],[35.33984,30.8802],[35.41371,30.95565],[35.43658,31.12444],[35.40316,31.25535],[35.47672,31.49578],[35.39675,31.49572],[35.22921,31.37445],[35.13033,31.3551],[35.02459,31.35979],[34.92571,31.34337],[34.88932,31.37093],[34.87833,31.39321],[34.89756,31.43891],[34.93258,31.47816],[34.94356,31.50743],[34.9415,31.55601],[34.95249,31.59813],[35.00879,31.65426],[35.08226,31.69107],[35.10782,31.71594],[35.11895,31.71454],[35.12933,31.7325],[35.13931,31.73012],[35.15119,31.73634],[35.15474,31.73352],[35.16478,31.73242],[35.18023,31.72067],[35.20538,31.72388],[35.21937,31.71578],[35.22392,31.71899],[35.23972,31.70896],[35.24315,31.71244],[35.2438,31.7201],[35.24981,31.72543],[35.25182,31.73945],[35.26319,31.74846],[35.25225,31.7678],[35.26058,31.79064],[35.25573,31.81362],[35.26404,31.82567],[35.251,31.83085],[35.25753,31.8387],[35.24816,31.8458],[35.2304,31.84222],[35.2249,31.85433],[35.22817,31.8638],[35.22567,31.86745],[35.22294,31.87889],[35.22014,31.88264],[35.2136,31.88241],[35.21276,31.88153],[35.21016,31.88237],[35.20945,31.8815],[35.20791,31.8821],[35.20673,31.88151],[35.20381,31.86716],[35.21128,31.863],[35.216,31.83894],[35.21469,31.81835],[35.19461,31.82687],[35.18169,31.82542],[35.18603,31.80901],[35.14174,31.81325],[35.07677,31.85627],[35.05617,31.85685],[35.01978,31.82944],[34.9724,31.83352],[34.99712,31.85569],[35.03489,31.85919],[35.03978,31.89276],[35.03489,31.92448],[35.00124,31.93264],[34.98682,31.96935],[35.00261,32.027],[34.9863,32.09551],[34.99437,32.10962],[34.98507,32.12606],[34.99039,32.14626],[34.96009,32.17503],[34.95703,32.19522],[34.98885,32.20758],[35.01841,32.23981],[35.02939,32.2671],[35.01119,32.28684],[35.01772,32.33863],[35.04243,32.35008],[35.05142,32.3667],[35.0421,32.38242],[35.05311,32.4024],[35.05423,32.41754],[35.07059,32.4585],[35.08564,32.46948],[35.09236,32.47614],[35.10024,32.47856],[35.10882,32.4757],[35.15937,32.50466],[35.2244,32.55289],[35.25049,32.52453],[35.29306,32.50947],[35.30685,32.51024],[35.35212,32.52047],[35.40224,32.50136],[35.42034,32.46009],[35.41598,32.45593],[35.41048,32.43706],[35.42078,32.41562],[35.55807,32.38674],[35.55494,32.42687],[35.57485,32.48669],[35.56614,32.64393],[35.59813,32.65159],[35.61669,32.67999],[35.66527,32.681],[35.68467,32.70715],[35.75983,32.74803],[35.78745,32.77938],[35.83758,32.82817],[35.84021,32.8725],[35.87012,32.91976],[35.89298,32.9456],[35.87188,32.98028],[35.84802,33.1031],[35.81911,33.11077],[35.81911,33.1336],[35.84285,33.16673],[35.83846,33.19397],[35.81647,33.2028],[35.81295,33.24841],[35.77513,33.27342],[35.813,33.3172],[35.77477,33.33609],[35.62019,33.27278],[35.62283,33.24226],[35.58502,33.26653],[35.58326,33.28381],[35.56523,33.28969],[35.55555,33.25844],[35.54544,33.25513],[35.54808,33.236],[35.5362,33.23196],[35.54228,33.19865],[35.52573,33.11921],[35.50335,33.114],[35.50272,33.09056],[35.448,33.09264],[35.43059,33.06659],[35.35223,33.05617],[35.31429,33.10515],[35.1924,33.08743],[35.10645,33.09318],[34.78515,33.20368],[33.62659,31.82938],[34.052,31.46619]]]]}},{type:"Feature",properties:{iso1A2:"IM",iso1A3:"IMN",iso1N3:"833",wikidata:"Q9676",nameEn:"Isle of Man",country:"GB",groups:["154","150"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["44 01624","44 07624","44 07524","44 07924"]},geometry:{type:"MultiPolygon",coordinates:[[[[-3.64906,54.12723],[-4.1819,54.57861],[-5.83481,53.87749],[-5.37267,53.63269],[-3.64906,54.12723]]]]}},{type:"Feature",properties:{iso1A2:"IN",iso1A3:"IND",iso1N3:"356",wikidata:"Q668",nameEn:"India",groups:["034","142"],driveSide:"left",callingCodes:["91"]},geometry:{type:"MultiPolygon",coordinates:[[[[78.11664,35.48022],[77.80532,35.52058],[77.70232,35.46244],[77.44277,35.46132],[76.96624,35.5932],[76.84539,35.67356],[76.77323,35.66062],[76.75475,35.52617],[76.85088,35.39754],[76.93465,35.39866],[77.11796,35.05419],[76.99251,34.93349],[76.87193,34.96906],[76.74514,34.92488],[76.74377,34.84039],[76.67648,34.76371],[76.47186,34.78965],[76.15463,34.6429],[76.04614,34.67566],[75.75438,34.51827],[75.38009,34.55021],[75.01479,34.64629],[74.6663,34.703],[74.58083,34.77386],[74.31239,34.79626],[74.12897,34.70073],[73.96423,34.68244],[73.93401,34.63386],[73.93951,34.57169],[73.89419,34.54568],[73.88732,34.48911],[73.74999,34.3781],[73.74862,34.34183],[73.8475,34.32935],[73.90517,34.35317],[73.98208,34.2522],[73.90677,34.10504],[73.88732,34.05105],[73.91341,34.01235],[74.21554,34.03853],[74.25262,34.01577],[74.26086,33.92237],[74.14001,33.83002],[74.05898,33.82089],[74.00891,33.75437],[73.96423,33.73071],[73.98968,33.66155],[73.97367,33.64061],[74.03576,33.56718],[74.10115,33.56392],[74.18121,33.4745],[74.17983,33.3679],[74.08782,33.26232],[74.01366,33.25199],[74.02144,33.18908],[74.15374,33.13477],[74.17571,33.07495],[74.31854,33.02891],[74.34875,32.97823],[74.31227,32.92795],[74.41467,32.90563],[74.45312,32.77755],[74.6289,32.75561],[74.64675,32.82604],[74.7113,32.84219],[74.65345,32.71225],[74.69542,32.66792],[74.64424,32.60985],[74.65251,32.56416],[74.67431,32.56676],[74.68362,32.49298],[74.84725,32.49075],[74.97634,32.45367],[75.03265,32.49538],[75.28259,32.36556],[75.38046,32.26836],[75.25649,32.10187],[75.00793,32.03786],[74.9269,32.0658],[74.86236,32.04485],[74.79919,31.95983],[74.58907,31.87824],[74.47771,31.72227],[74.57498,31.60382],[74.61517,31.55698],[74.59319,31.50197],[74.64713,31.45605],[74.59773,31.4136],[74.53223,31.30321],[74.51629,31.13829],[74.56023,31.08303],[74.60281,31.10419],[74.60006,31.13711],[74.6852,31.12771],[74.67971,31.05479],[74.5616,31.04153],[73.88993,30.36305],[73.95736,30.28466],[73.97225,30.19829],[73.80299,30.06969],[73.58665,30.01848],[73.3962,29.94707],[73.28094,29.56646],[73.05886,29.1878],[73.01337,29.16422],[72.94272,29.02487],[72.40402,28.78283],[72.29495,28.66367],[72.20329,28.3869],[71.9244,28.11555],[71.89921,27.96035],[70.79054,27.68423],[70.60927,28.02178],[70.37307,28.01208],[70.12502,27.8057],[70.03136,27.56627],[69.58519,27.18109],[69.50904,26.74892],[69.88555,26.56836],[70.05584,26.60398],[70.17532,26.55362],[70.17532,26.24118],[70.08193,26.08094],[70.0985,25.93238],[70.2687,25.71156],[70.37444,25.67443],[70.53649,25.68928],[70.60378,25.71898],[70.67382,25.68186],[70.66695,25.39314],[70.89148,25.15064],[70.94002,24.92843],[71.09405,24.69017],[70.97594,24.60904],[71.00341,24.46038],[71.12838,24.42662],[71.04461,24.34657],[70.94985,24.3791],[70.85784,24.30903],[70.88393,24.27398],[70.71502,24.23517],[70.57906,24.27774],[70.5667,24.43787],[70.11712,24.30915],[70.03428,24.172],[69.73335,24.17007],[69.59579,24.29777],[69.29778,24.28712],[69.19341,24.25646],[69.07806,24.29777],[68.97781,24.26021],[68.90914,24.33156],[68.7416,24.31904],[68.74643,23.97027],[68.39339,23.96838],[68.20763,23.85849],[68.11329,23.53945],[72.15131,7.6285],[78.52781,7.63099],[79.50447,8.91876],[79.42124,9.80115],[80.48418,10.20786],[94.53911,5.99016],[94.6371,13.81803],[92.61042,13.76986],[89.13606,21.42955],[89.13927,21.60785],[89.03553,21.77397],[89.07114,22.15335],[88.9367,22.58527],[88.94614,22.66941],[88.9151,22.75228],[88.96713,22.83346],[88.87063,22.95235],[88.88327,23.03885],[88.86377,23.08759],[88.99148,23.21134],[88.71133,23.2492],[88.79254,23.46028],[88.79351,23.50535],[88.74841,23.47361],[88.56507,23.64044],[88.58087,23.87105],[88.66189,23.87607],[88.73743,23.91751],[88.6976,24.14703],[88.74841,24.1959],[88.68801,24.31464],[88.50934,24.32474],[88.12296,24.51301],[88.08786,24.63232],[88.00683,24.66477],[88.15515,24.85806],[88.14004,24.93529],[88.21832,24.96642],[88.27325,24.88796],[88.33917,24.86803],[88.46277,25.07468],[88.44766,25.20149],[88.94067,25.18534],[89.00463,25.26583],[89.01105,25.30303],[88.85278,25.34679],[88.81296,25.51546],[88.677,25.46959],[88.4559,25.59227],[88.45103,25.66245],[88.242,25.80811],[88.13138,25.78773],[88.08804,25.91334],[88.16581,26.0238],[88.1844,26.14417],[88.34757,26.22216],[88.35153,26.29123],[88.51649,26.35923],[88.48749,26.45855],[88.36938,26.48683],[88.35153,26.45241],[88.33093,26.48929],[88.41196,26.63837],[88.4298,26.54489],[88.62144,26.46783],[88.69485,26.38353],[88.67837,26.26291],[88.78961,26.31093],[88.85004,26.23211],[89.05328,26.2469],[88.91321,26.37984],[88.92357,26.40711],[88.95612,26.4564],[89.08899,26.38845],[89.15869,26.13708],[89.35953,26.0077],[89.53515,26.00382],[89.57101,25.9682],[89.63968,26.22595],[89.70201,26.15138],[89.73581,26.15818],[89.77865,26.08387],[89.77728,26.04254],[89.86592,25.93115],[89.80585,25.82489],[89.84388,25.70042],[89.86129,25.61714],[89.81208,25.37244],[89.84086,25.31854],[89.83371,25.29548],[89.87629,25.28337],[89.90478,25.31038],[90.1155,25.22686],[90.40034,25.1534],[90.65042,25.17788],[90.87427,25.15799],[91.25517,25.20677],[91.63648,25.12846],[92.0316,25.1834],[92.33957,25.07593],[92.39147,25.01471],[92.49887,24.88796],[92.38626,24.86055],[92.25854,24.9191],[92.15796,24.54435],[92.11662,24.38997],[91.96603,24.3799],[91.89258,24.14674],[91.82596,24.22345],[91.76004,24.23848],[91.73257,24.14703],[91.65292,24.22095],[91.63782,24.1132],[91.55542,24.08687],[91.37414,24.10693],[91.35741,23.99072],[91.29587,24.0041],[91.22308,23.89616],[91.25192,23.83463],[91.15579,23.6599],[91.28293,23.37538],[91.36453,23.06612],[91.40848,23.07117],[91.4035,23.27522],[91.46615,23.2328],[91.54993,23.01051],[91.61571,22.93929],[91.7324,23.00043],[91.81634,23.08001],[91.76417,23.26619],[91.84789,23.42235],[91.95642,23.47361],[91.95093,23.73284],[92.04706,23.64229],[92.15417,23.73409],[92.26541,23.70392],[92.38214,23.28705],[92.37665,22.9435],[92.5181,22.71441],[92.60029,22.1522],[92.56616,22.13554],[92.60949,21.97638],[92.67532,22.03547],[92.70416,22.16017],[92.86208,22.05456],[92.89504,21.95143],[92.93899,22.02656],[92.99804,21.98964],[92.99255,22.05965],[93.04885,22.20595],[93.15734,22.18687],[93.14224,22.24535],[93.19991,22.25425],[93.18206,22.43716],[93.13537,22.45873],[93.11477,22.54374],[93.134,22.59573],[93.09417,22.69459],[93.134,22.92498],[93.12988,23.05772],[93.2878,23.00464],[93.38478,23.13698],[93.36862,23.35426],[93.38781,23.36139],[93.39981,23.38828],[93.38805,23.4728],[93.43475,23.68299],[93.3908,23.7622],[93.3908,23.92925],[93.36059,23.93176],[93.32351,24.04468],[93.34735,24.10151],[93.41415,24.07854],[93.46633,23.97067],[93.50616,23.94432],[93.62871,24.00922],[93.75952,24.0003],[93.80279,23.92549],[93.92089,23.95812],[94.14081,23.83333],[94.30215,24.23752],[94.32362,24.27692],[94.45279,24.56656],[94.50729,24.59281],[94.5526,24.70764],[94.60204,24.70889],[94.73937,25.00545],[94.74212,25.13606],[94.57458,25.20318],[94.68032,25.47003],[94.80117,25.49359],[95.18556,26.07338],[95.11428,26.1019],[95.12801,26.38397],[95.05798,26.45408],[95.23513,26.68499],[95.30339,26.65372],[95.437,26.7083],[95.81603,27.01335],[95.93002,27.04149],[96.04949,27.19428],[96.15591,27.24572],[96.40779,27.29818],[96.55761,27.29928],[96.73888,27.36638],[96.88445,27.25046],[96.85287,27.2065],[96.89132,27.17474],[97.14675,27.09041],[97.17422,27.14052],[96.91431,27.45752],[96.90112,27.62149],[97.29919,27.92233],[97.35824,27.87256],[97.38845,28.01329],[97.35412,28.06663],[97.31292,28.06784],[97.34547,28.21385],[97.1289,28.3619],[96.98882,28.32564],[96.88445,28.39452],[96.85561,28.4875],[96.6455,28.61657],[96.48895,28.42955],[96.40929,28.51526],[96.61391,28.72742],[96.3626,29.10607],[96.20467,29.02325],[96.18682,29.11087],[96.31316,29.18643],[96.05361,29.38167],[95.84899,29.31464],[95.75149,29.32063],[95.72086,29.20797],[95.50842,29.13487],[95.41091,29.13007],[95.3038,29.13847],[95.26122,29.07727],[95.2214,29.10727],[95.11291,29.09527],[95.0978,29.14446],[94.81353,29.17804],[94.69318,29.31739],[94.2752,29.11687],[94.35897,29.01965],[93.72797,28.68821],[93.44621,28.67189],[93.18069,28.50319],[93.14635,28.37035],[92.93075,28.25671],[92.67486,28.15018],[92.65472,28.07632],[92.73025,28.05814],[92.7275,27.98662],[92.42538,27.80092],[92.32101,27.79363],[92.27432,27.89077],[91.87057,27.7195],[91.84722,27.76325],[91.6469,27.76358],[91.55819,27.6144],[91.65007,27.48287],[92.01132,27.47352],[92.12019,27.27829],[92.04702,27.26861],[92.03457,27.07334],[92.11863,26.893],[92.05523,26.8692],[91.83181,26.87318],[91.50067,26.79223],[90.67715,26.77215],[90.48504,26.8594],[90.39271,26.90704],[90.30402,26.85098],[90.04535,26.72422],[89.86124,26.73307],[89.63369,26.74402],[89.42349,26.83727],[89.3901,26.84225],[89.38319,26.85963],[89.37913,26.86224],[89.1926,26.81329],[89.12825,26.81661],[89.09554,26.89089],[88.95807,26.92668],[88.92301,26.99286],[88.8714,26.97488],[88.86984,27.10937],[88.74219,27.144],[88.91901,27.32483],[88.82981,27.38814],[88.77517,27.45415],[88.88091,27.85192],[88.83559,28.01936],[88.63235,28.12356],[88.54858,28.06057],[88.25332,27.9478],[88.1278,27.95417],[88.13378,27.88015],[88.1973,27.85067],[88.19107,27.79285],[88.04008,27.49223],[88.07277,27.43007],[88.01646,27.21612],[88.01587,27.21388],[87.9887,27.11045],[88.11719,26.98758],[88.13422,26.98705],[88.12302,26.95324],[88.19107,26.75516],[88.1659,26.68177],[88.16452,26.64111],[88.09963,26.54195],[88.09414,26.43732],[88.00895,26.36029],[87.90115,26.44923],[87.89085,26.48565],[87.84193,26.43663],[87.7918,26.46737],[87.76004,26.40711],[87.67893,26.43501],[87.66803,26.40294],[87.59175,26.38342],[87.55274,26.40596],[87.51571,26.43106],[87.46566,26.44058],[87.37314,26.40815],[87.34568,26.34787],[87.26568,26.37294],[87.26587,26.40592],[87.24682,26.4143],[87.18863,26.40558],[87.14751,26.40542],[87.09147,26.45039],[87.0707,26.58571],[87.04691,26.58685],[87.01559,26.53228],[86.95912,26.52076],[86.94543,26.52076],[86.82898,26.43919],[86.76797,26.45892],[86.74025,26.42386],[86.69124,26.45169],[86.62686,26.46891],[86.61313,26.48658],[86.57073,26.49825],[86.54258,26.53819],[86.49726,26.54218],[86.31564,26.61925],[86.26235,26.61886],[86.22513,26.58863],[86.13596,26.60651],[86.02729,26.66756],[85.8492,26.56667],[85.85126,26.60866],[85.83126,26.61134],[85.76907,26.63076],[85.72315,26.67471],[85.73483,26.79613],[85.66239,26.84822],[85.61621,26.86721],[85.59461,26.85161],[85.5757,26.85955],[85.56471,26.84133],[85.47752,26.79292],[85.34302,26.74954],[85.21159,26.75933],[85.18046,26.80519],[85.19291,26.86909],[85.15883,26.86966],[85.02635,26.85381],[85.05592,26.88991],[85.00536,26.89523],[84.97186,26.9149],[84.96687,26.95599],[84.85754,26.98984],[84.82913,27.01989],[84.793,26.9968],[84.64496,27.04669],[84.69166,27.21294],[84.62161,27.33885],[84.29315,27.39],[84.25735,27.44941],[84.21376,27.45218],[84.10791,27.52399],[84.02229,27.43836],[83.93306,27.44939],[83.86182,27.4241],[83.85595,27.35797],[83.61288,27.47013],[83.39495,27.4798],[83.38872,27.39276],[83.35136,27.33885],[83.29999,27.32778],[83.2673,27.36235],[83.27197,27.38309],[83.19413,27.45632],[82.94938,27.46036],[82.93261,27.50328],[82.74119,27.49838],[82.70378,27.72122],[82.46405,27.6716],[82.06554,27.92222],[81.97214,27.93322],[81.91223,27.84995],[81.47867,28.08303],[81.48179,28.12148],[81.38683,28.17638],[81.32923,28.13521],[81.19847,28.36284],[81.08507,28.38346],[80.89648,28.47237],[80.55142,28.69182],[80.50575,28.6706],[80.52443,28.54897],[80.44504,28.63098],[80.37188,28.63371],[80.12125,28.82346],[80.06957,28.82763],[80.05743,28.91479],[80.18085,29.13649],[80.23178,29.11626],[80.26602,29.13938],[80.24112,29.21414],[80.28626,29.20327],[80.31428,29.30784],[80.24322,29.44299],[80.37939,29.57098],[80.41858,29.63581],[80.38428,29.68513],[80.36803,29.73865],[80.41554,29.79451],[80.43458,29.80466],[80.48997,29.79566],[80.56247,29.86661],[80.56957,29.88176],[80.60226,29.95732],[80.67076,29.95732],[80.8778,30.13384],[80.93695,30.18229],[81.03953,30.20059],[80.83343,30.32023],[80.54504,30.44936],[80.20721,30.58541],[79.93255,30.88288],[79.59884,30.93943],[79.22805,31.34963],[79.14016,31.43403],[79.01931,31.42817],[78.77898,31.31209],[78.71032,31.50197],[78.84516,31.60631],[78.69933,31.78723],[78.78036,31.99478],[78.74404,32.00384],[78.68754,32.10256],[78.49609,32.2762],[78.4645,32.45367],[78.38897,32.53938],[78.73916,32.69438],[78.7831,32.46873],[78.96713,32.33655],[78.99322,32.37948],[79.0979,32.38051],[79.13174,32.47766],[79.26768,32.53277],[79.46562,32.69668],[79.14016,33.02545],[79.15252,33.17156],[78.73636,33.56521],[78.67599,33.66445],[78.77349,33.73871],[78.73367,34.01121],[78.65657,34.03195],[78.66225,34.08858],[78.91769,34.15452],[78.99802,34.3027],[79.05364,34.32482],[78.74465,34.45174],[78.56475,34.50835],[78.54964,34.57283],[78.27781,34.61484],[78.18435,34.7998],[78.22692,34.88771],[78.00033,35.23954],[78.03466,35.3785],[78.11664,35.48022]]]]}},{type:"Feature",properties:{iso1A2:"IO",iso1A3:"IOT",iso1N3:"086",wikidata:"Q43448",nameEn:"British Indian Ocean Territory",country:"GB",groups:["014","202","002"],callingCodes:["246"]},geometry:{type:"MultiPolygon",coordinates:[[[[70.64754,-4.95745],[70.67958,-8.2663],[73.70488,-4.92492],[70.64754,-4.95745]]]]}},{type:"Feature",properties:{iso1A2:"IQ",iso1A3:"IRQ",iso1N3:"368",wikidata:"Q796",nameEn:"Iraq",groups:["145","142"],callingCodes:["964"]},geometry:{type:"MultiPolygon",coordinates:[[[[42.78887,37.38615],[42.56725,37.14878],[42.35724,37.10998],[42.36697,37.0627],[41.81736,36.58782],[41.40058,36.52502],[41.28864,36.35368],[41.2564,36.06012],[41.37027,35.84095],[41.38184,35.62502],[41.26569,35.42708],[41.21654,35.1508],[41.2345,34.80049],[41.12388,34.65742],[40.97676,34.39788],[40.64314,34.31604],[38.79171,33.37328],[39.08202,32.50304],[38.98762,32.47694],[39.04251,32.30203],[39.26157,32.35555],[39.29903,32.23259],[40.01521,32.05667],[42.97601,30.72204],[42.97796,30.48295],[44.72255,29.19736],[46.42415,29.05947],[46.5527,29.10283],[46.89695,29.50584],[47.15166,30.01044],[47.37192,30.10421],[47.7095,30.10453],[48.01114,29.98906],[48.06782,30.02906],[48.17332,30.02448],[48.40479,29.85763],[48.59531,29.66815],[48.83867,29.78572],[48.61441,29.93675],[48.51011,29.96238],[48.44785,30.00148],[48.4494,30.04456],[48.43384,30.08233],[48.38869,30.11062],[48.38714,30.13485],[48.41671,30.17254],[48.41117,30.19846],[48.26393,30.3408],[48.24385,30.33846],[48.21279,30.31644],[48.19425,30.32796],[48.18321,30.39703],[48.14585,30.44133],[48.02443,30.4789],[48.03221,30.9967],[47.68219,31.00004],[47.6804,31.39086],[47.86337,31.78422],[47.64771,32.07666],[47.52474,32.15972],[47.57144,32.20583],[47.37529,32.47808],[47.17218,32.45393],[46.46788,32.91992],[46.32298,32.9731],[46.17198,32.95612],[46.09103,32.98354],[46.15175,33.07229],[46.03966,33.09577],[46.05367,33.13097],[46.11905,33.11924],[46.20623,33.20395],[45.99919,33.5082],[45.86687,33.49263],[45.96183,33.55751],[45.89801,33.63661],[45.77814,33.60938],[45.50261,33.94968],[45.42789,33.9458],[45.41077,33.97421],[45.47264,34.03099],[45.56176,34.15088],[45.58667,34.30147],[45.53552,34.35148],[45.49171,34.3439],[45.46697,34.38221],[45.43879,34.45949],[45.51883,34.47692],[45.53219,34.60441],[45.59074,34.55558],[45.60224,34.55057],[45.73923,34.54416],[45.70031,34.69277],[45.65672,34.7222],[45.68284,34.76624],[45.70031,34.82322],[45.73641,34.83975],[45.79682,34.85133],[45.78904,34.91135],[45.86532,34.89858],[45.89477,34.95805],[45.87864,35.03441],[45.92173,35.0465],[45.92203,35.09538],[45.93108,35.08148],[45.94756,35.09188],[46.06508,35.03699],[46.07747,35.0838],[46.11763,35.07551],[46.19116,35.11097],[46.15642,35.1268],[46.16229,35.16984],[46.19738,35.18536],[46.18457,35.22561],[46.11367,35.23729],[46.15474,35.2883],[46.13152,35.32548],[46.05358,35.38568],[45.98453,35.49848],[46.01518,35.52012],[45.97584,35.58132],[46.03028,35.57416],[46.01307,35.59756],[46.0165,35.61501],[45.99452,35.63574],[46.0117,35.65059],[46.01631,35.69139],[46.23736,35.71414],[46.34166,35.78363],[46.32921,35.82655],[46.17198,35.8013],[46.08325,35.8581],[45.94711,35.82218],[45.89784,35.83708],[45.81442,35.82107],[45.76145,35.79898],[45.6645,35.92872],[45.60018,35.96069],[45.55245,35.99943],[45.46594,36.00042],[45.38275,35.97156],[45.33916,35.99424],[45.37652,36.06222],[45.37312,36.09917],[45.32235,36.17383],[45.30038,36.27769],[45.26261,36.3001],[45.27394,36.35846],[45.23953,36.43257],[45.11811,36.40751],[45.00759,36.5402],[45.06985,36.62645],[45.06985,36.6814],[45.01537,36.75128],[44.84725,36.77622],[44.83479,36.81362],[44.90173,36.86096],[44.91199,36.91468],[44.89862,37.01897],[44.81611,37.04383],[44.75229,37.11958],[44.78319,37.1431],[44.76698,37.16162],[44.63179,37.19229],[44.42631,37.05825],[44.38117,37.05825],[44.35315,37.04955],[44.35937,37.02843],[44.30645,36.97373],[44.25975,36.98119],[44.18503,37.09551],[44.22239,37.15756],[44.27998,37.16501],[44.2613,37.25055],[44.13521,37.32486],[44.02002,37.33229],[43.90949,37.22453],[43.84878,37.22205],[43.82699,37.19477],[43.8052,37.22825],[43.7009,37.23692],[43.63085,37.21957],[43.56702,37.25675],[43.50787,37.24436],[43.33508,37.33105],[43.30083,37.30629],[43.11403,37.37436],[42.93705,37.32015],[42.78887,37.38615]]]]}},{type:"Feature",properties:{iso1A2:"IR",iso1A3:"IRN",iso1N3:"364",wikidata:"Q794",nameEn:"Iran",groups:["034","142"],callingCodes:["98"]},geometry:{type:"MultiPolygon",coordinates:[[[[44.96746,39.42998],[44.88916,39.59653],[44.81043,39.62677],[44.71806,39.71124],[44.65422,39.72163],[44.6137,39.78393],[44.47298,39.68788],[44.48111,39.61579],[44.41849,39.56659],[44.42832,39.4131],[44.37921,39.4131],[44.29818,39.378],[44.22452,39.4169],[44.03667,39.39223],[44.1043,39.19842],[44.20946,39.13975],[44.18863,38.93881],[44.30322,38.81581],[44.26155,38.71427],[44.28065,38.6465],[44.32058,38.62752],[44.3207,38.49799],[44.3119,38.37887],[44.38309,38.36117],[44.44386,38.38295],[44.50115,38.33939],[44.42476,38.25763],[44.22509,37.88859],[44.3883,37.85433],[44.45948,37.77065],[44.55498,37.783],[44.62096,37.71985],[44.56887,37.6429],[44.61401,37.60165],[44.58449,37.45018],[44.81021,37.2915],[44.75986,37.21549],[44.7868,37.16644],[44.78319,37.1431],[44.75229,37.11958],[44.81611,37.04383],[44.89862,37.01897],[44.91199,36.91468],[44.90173,36.86096],[44.83479,36.81362],[44.84725,36.77622],[45.01537,36.75128],[45.06985,36.6814],[45.06985,36.62645],[45.00759,36.5402],[45.11811,36.40751],[45.23953,36.43257],[45.27394,36.35846],[45.26261,36.3001],[45.30038,36.27769],[45.32235,36.17383],[45.37312,36.09917],[45.37652,36.06222],[45.33916,35.99424],[45.38275,35.97156],[45.46594,36.00042],[45.55245,35.99943],[45.60018,35.96069],[45.6645,35.92872],[45.76145,35.79898],[45.81442,35.82107],[45.89784,35.83708],[45.94711,35.82218],[46.08325,35.8581],[46.17198,35.8013],[46.32921,35.82655],[46.34166,35.78363],[46.23736,35.71414],[46.01631,35.69139],[46.0117,35.65059],[45.99452,35.63574],[46.0165,35.61501],[46.01307,35.59756],[46.03028,35.57416],[45.97584,35.58132],[46.01518,35.52012],[45.98453,35.49848],[46.05358,35.38568],[46.13152,35.32548],[46.15474,35.2883],[46.11367,35.23729],[46.18457,35.22561],[46.19738,35.18536],[46.16229,35.16984],[46.15642,35.1268],[46.19116,35.11097],[46.11763,35.07551],[46.07747,35.0838],[46.06508,35.03699],[45.94756,35.09188],[45.93108,35.08148],[45.92203,35.09538],[45.92173,35.0465],[45.87864,35.03441],[45.89477,34.95805],[45.86532,34.89858],[45.78904,34.91135],[45.79682,34.85133],[45.73641,34.83975],[45.70031,34.82322],[45.68284,34.76624],[45.65672,34.7222],[45.70031,34.69277],[45.73923,34.54416],[45.60224,34.55057],[45.59074,34.55558],[45.53219,34.60441],[45.51883,34.47692],[45.43879,34.45949],[45.46697,34.38221],[45.49171,34.3439],[45.53552,34.35148],[45.58667,34.30147],[45.56176,34.15088],[45.47264,34.03099],[45.41077,33.97421],[45.42789,33.9458],[45.50261,33.94968],[45.77814,33.60938],[45.89801,33.63661],[45.96183,33.55751],[45.86687,33.49263],[45.99919,33.5082],[46.20623,33.20395],[46.11905,33.11924],[46.05367,33.13097],[46.03966,33.09577],[46.15175,33.07229],[46.09103,32.98354],[46.17198,32.95612],[46.32298,32.9731],[46.46788,32.91992],[47.17218,32.45393],[47.37529,32.47808],[47.57144,32.20583],[47.52474,32.15972],[47.64771,32.07666],[47.86337,31.78422],[47.6804,31.39086],[47.68219,31.00004],[48.03221,30.9967],[48.02443,30.4789],[48.14585,30.44133],[48.18321,30.39703],[48.19425,30.32796],[48.21279,30.31644],[48.24385,30.33846],[48.26393,30.3408],[48.41117,30.19846],[48.41671,30.17254],[48.38714,30.13485],[48.38869,30.11062],[48.43384,30.08233],[48.4494,30.04456],[48.44785,30.00148],[48.51011,29.96238],[48.61441,29.93675],[48.83867,29.78572],[49.98877,27.87827],[50.37726,27.89227],[54.39838,25.68383],[55.14145,25.62624],[55.81777,26.18798],[56.2644,26.58649],[56.68954,26.76645],[56.79239,26.41236],[56.82555,25.7713],[56.86325,25.03856],[61.5251,24.57287],[61.57592,25.0492],[61.6433,25.27541],[61.683,25.66638],[61.83968,25.7538],[61.83831,26.07249],[61.89391,26.26251],[62.05117,26.31647],[62.21304,26.26601],[62.31484,26.528],[62.77352,26.64099],[63.1889,26.65072],[63.18688,26.83844],[63.25005,26.84212],[63.25005,27.08692],[63.32283,27.14437],[63.19649,27.25674],[62.80604,27.22412],[62.79684,27.34381],[62.84905,27.47627],[62.7638,28.02992],[62.79412,28.28108],[62.59499,28.24842],[62.40259,28.42703],[61.93581,28.55284],[61.65978,28.77937],[61.53765,29.00507],[61.31508,29.38903],[60.87231,29.86514],[61.80829,30.84224],[61.78268,30.92724],[61.8335,30.97669],[61.83257,31.0452],[61.80957,31.12576],[61.80569,31.16167],[61.70929,31.37391],[60.84541,31.49561],[60.86191,32.22565],[60.56485,33.12944],[60.88908,33.50219],[60.91133,33.55596],[60.69573,33.56054],[60.57762,33.59772],[60.5485,33.73422],[60.5838,33.80793],[60.50209,34.13992],[60.66502,34.31539],[60.91321,34.30411],[60.72316,34.52857],[60.99922,34.63064],[61.00197,34.70631],[61.06926,34.82139],[61.12831,35.09938],[61.0991,35.27845],[61.18187,35.30249],[61.27371,35.61482],[61.22719,35.67038],[61.26152,35.80749],[61.22444,35.92879],[61.12007,35.95992],[61.22719,36.12759],[61.1393,36.38782],[61.18187,36.55348],[61.14516,36.64644],[60.34767,36.63214],[60.00768,37.04102],[59.74678,37.12499],[59.55178,37.13594],[59.39385,37.34257],[59.39797,37.47892],[59.33507,37.53146],[59.22905,37.51161],[58.9338,37.67374],[58.6921,37.64548],[58.5479,37.70526],[58.47786,37.6433],[58.39959,37.63134],[58.22999,37.6856],[58.21399,37.77281],[57.79534,37.89299],[57.35042,37.98546],[57.37236,38.09321],[57.21169,38.28965],[57.03453,38.18717],[56.73928,38.27887],[56.62255,38.24005],[56.43303,38.26054],[56.32454,38.18502],[56.33278,38.08132],[55.97847,38.08024],[55.76561,38.12238],[55.44152,38.08564],[55.13412,37.94705],[54.851,37.75739],[54.77684,37.62264],[54.81804,37.61285],[54.77822,37.51597],[54.67247,37.43532],[54.58664,37.45809],[54.36211,37.34912],[54.24565,37.32047],[53.89734,37.3464],[48.88288,38.43975],[48.84969,38.45015],[48.81072,38.44853],[48.78979,38.45026],[48.70001,38.40564],[48.62217,38.40198],[48.58793,38.45076],[48.45084,38.61013],[48.3146,38.59958],[48.24773,38.71883],[48.02581,38.82705],[48.01409,38.90333],[48.07734,38.91616],[48.08627,38.94434],[48.28437,38.97186],[48.33884,39.03022],[48.31239,39.09278],[48.15361,39.19419],[48.12404,39.25208],[48.15984,39.30028],[48.37385,39.37584],[48.34264,39.42935],[47.98977,39.70999],[47.84774,39.66285],[47.50099,39.49615],[47.38978,39.45999],[47.31301,39.37492],[47.05927,39.24846],[47.05771,39.20143],[46.95341,39.13505],[46.92539,39.16644],[46.83822,39.13143],[46.75752,39.03231],[46.53497,38.86548],[46.34059,38.92076],[46.20601,38.85262],[46.14785,38.84206],[46.06766,38.87861],[46.00228,38.87376],[45.94624,38.89072],[45.90266,38.87739],[45.83883,38.90768],[45.65172,38.95199],[45.6155,38.94304],[45.6131,38.964],[45.44966,38.99243],[45.44811,39.04927],[45.40452,39.07224],[45.40148,39.09007],[45.30489,39.18333],[45.16168,39.21952],[45.08751,39.35052],[45.05932,39.36435],[44.96746,39.42998]]]]}},{type:"Feature",properties:{iso1A2:"IS",iso1A3:"ISL",iso1N3:"352",wikidata:"Q189",nameEn:"Iceland",groups:["154","150"],callingCodes:["354"]},geometry:{type:"MultiPolygon",coordinates:[[[[-33.15676,62.62995],[-8.25539,63.0423],[-15.70914,69.67442],[-33.15676,62.62995]]]]}},{type:"Feature",properties:{iso1A2:"IT",iso1A3:"ITA",iso1N3:"380",wikidata:"Q38",nameEn:"Italy",groups:["EU","039","150"],callingCodes:["39"]},geometry:{type:"MultiPolygon",coordinates:[[[[8.95861,45.96485],[8.97604,45.96151],[8.97741,45.98317],[8.96668,45.98436],[8.95861,45.96485]]],[[[7.63035,43.57419],[9.56115,43.20816],[10.09675,41.44089],[7.60802,41.05927],[7.89009,38.19924],[11.2718,37.6713],[12.13667,34.20326],[14.02721,36.53141],[17.67657,35.68918],[18.83516,40.36999],[16.15283,42.18525],[13.12821,44.48877],[13.05142,45.33128],[13.45644,45.59464],[13.6076,45.64761],[13.7198,45.59352],[13.74587,45.59811],[13.78445,45.5825],[13.84106,45.58185],[13.86771,45.59898],[13.8695,45.60835],[13.9191,45.6322],[13.87933,45.65207],[13.83422,45.68703],[13.83332,45.70855],[13.8235,45.7176],[13.66986,45.79955],[13.59784,45.8072],[13.58858,45.83503],[13.57563,45.8425],[13.58644,45.88173],[13.59565,45.89446],[13.60857,45.89907],[13.61931,45.91782],[13.63815,45.93607],[13.6329,45.94894],[13.64307,45.98326],[13.63458,45.98947],[13.62074,45.98388],[13.58903,45.99009],[13.56759,45.96991],[13.52963,45.96588],[13.50104,45.98078],[13.47474,46.00546],[13.49702,46.01832],[13.50998,46.04498],[13.49568,46.04839],[13.50104,46.05986],[13.57072,46.09022],[13.64053,46.13587],[13.66472,46.17392],[13.64451,46.18966],[13.56682,46.18703],[13.56114,46.2054],[13.47587,46.22725],[13.42218,46.20758],[13.37671,46.29668],[13.44808,46.33507],[13.43418,46.35992],[13.47019,46.3621],[13.5763,46.40915],[13.5763,46.42613],[13.59777,46.44137],[13.68684,46.43881],[13.7148,46.5222],[13.64088,46.53438],[13.27627,46.56059],[12.94445,46.60401],[12.59992,46.6595],[12.38708,46.71529],[12.27591,46.88651],[12.2006,46.88854],[12.11675,47.01241],[12.21781,47.03996],[12.19254,47.09331],[11.74789,46.98484],[11.50739,47.00644],[11.33355,46.99862],[11.10618,46.92966],[11.00764,46.76896],[10.72974,46.78972],[10.75753,46.82258],[10.66405,46.87614],[10.54783,46.84505],[10.47197,46.85698],[10.38659,46.67847],[10.40475,46.63671],[10.44686,46.64162],[10.49375,46.62049],[10.46136,46.53164],[10.25309,46.57432],[10.23674,46.63484],[10.10307,46.61003],[10.03715,46.44479],[10.165,46.41051],[10.10506,46.3372],[10.17862,46.25626],[10.14439,46.22992],[10.07055,46.21668],[9.95249,46.38045],[9.73086,46.35071],[9.71273,46.29266],[9.57015,46.2958],[9.46117,46.37481],[9.45936,46.50873],[9.40487,46.46621],[9.36128,46.5081],[9.28136,46.49685],[9.25502,46.43743],[9.29226,46.32717],[9.24503,46.23616],[9.01618,46.04928],[8.99257,45.9698],[9.09065,45.89906],[9.06642,45.8761],[9.04546,45.84968],[9.04059,45.8464],[9.03505,45.83976],[9.03793,45.83548],[9.03279,45.82865],[9.0298,45.82127],[9.00324,45.82055],[8.99663,45.83466],[8.9621,45.83707],[8.94737,45.84285],[8.91129,45.8388],[8.93504,45.86245],[8.94372,45.86587],[8.93649,45.86775],[8.88904,45.95465],[8.86688,45.96135],[8.85121,45.97239],[8.8319,45.9879],[8.79362,45.99207],[8.78585,45.98973],[8.79414,46.00913],[8.85617,46.0748],[8.80778,46.10085],[8.75697,46.10395],[8.62242,46.12112],[8.45032,46.26869],[8.46317,46.43712],[8.42464,46.46367],[8.30648,46.41587],[8.31162,46.38044],[8.08814,46.26692],[8.16866,46.17817],[8.11383,46.11577],[8.02906,46.10331],[7.98881,45.99867],[7.9049,45.99945],[7.85949,45.91485],[7.56343,45.97421],[7.10685,45.85653],[7.04151,45.92435],[6.95315,45.85163],[6.80785,45.83265],[6.80785,45.71864],[6.98948,45.63869],[7.00037,45.509],[7.18019,45.40071],[7.10572,45.32924],[7.13115,45.25386],[7.07074,45.21228],[6.96706,45.20841],[6.85144,45.13226],[6.7697,45.16044],[6.62803,45.11175],[6.66981,45.02324],[6.74791,45.01939],[6.74519,44.93661],[6.75518,44.89915],[6.90774,44.84322],[6.93499,44.8664],[7.02217,44.82519],[7.00401,44.78782],[7.07484,44.68073],[7.00582,44.69364],[6.95133,44.66264],[6.96042,44.62129],[6.85507,44.53072],[6.86233,44.49834],[6.94504,44.43112],[6.88784,44.42043],[6.89171,44.36637],[6.98221,44.28289],[7.00764,44.23736],[7.16929,44.20352],[7.27827,44.1462],[7.34547,44.14359],[7.36364,44.11882],[7.62155,44.14881],[7.63245,44.17877],[7.68694,44.17487],[7.66878,44.12795],[7.72508,44.07578],[7.6597,44.03009],[7.66848,43.99943],[7.65266,43.9763],[7.60771,43.95772],[7.56858,43.94506],[7.56075,43.89932],[7.51162,43.88301],[7.49355,43.86551],[7.50423,43.84345],[7.53006,43.78405],[7.63035,43.57419]],[[12.45181,41.90056],[12.44834,41.90095],[12.44582,41.90194],[12.44815,41.90326],[12.44984,41.90545],[12.45091,41.90625],[12.45543,41.90738],[12.45561,41.90629],[12.45762,41.9058],[12.45755,41.9033],[12.45826,41.90281],[12.45834,41.90174],[12.4577,41.90115],[12.45691,41.90125],[12.45626,41.90172],[12.45435,41.90143],[12.45446,41.90028],[12.45181,41.90056]],[[12.45648,43.89369],[12.44184,43.90498],[12.41641,43.89991],[12.40935,43.9024],[12.41233,43.90956],[12.40733,43.92379],[12.41551,43.92984],[12.41165,43.93769],[12.40506,43.94325],[12.40415,43.95485],[12.41414,43.95273],[12.42005,43.9578],[12.43662,43.95698],[12.44684,43.96597],[12.46205,43.97463],[12.47853,43.98052],[12.49406,43.98492],[12.50678,43.99113],[12.51463,43.99122],[12.5154,43.98508],[12.51064,43.98165],[12.51109,43.97201],[12.50622,43.97131],[12.50875,43.96198],[12.50655,43.95796],[12.51427,43.94897],[12.51553,43.94096],[12.50496,43.93017],[12.50269,43.92363],[12.49724,43.92248],[12.49247,43.91774],[12.49429,43.90973],[12.48771,43.89706],[12.45648,43.89369]]]]}},{type:"Feature",properties:{iso1A2:"JE",iso1A3:"JEY",iso1N3:"832",wikidata:"Q785",nameEn:"Jersey",country:"GB",groups:["830","154","150"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["44 01534"]},geometry:{type:"MultiPolygon",coordinates:[[[[-2.00491,48.86706],[-1.83944,49.23037],[-2.09454,49.46288],[-2.65349,49.15373],[-2.00491,48.86706]]]]}},{type:"Feature",properties:{iso1A2:"JM",iso1A3:"JAM",iso1N3:"388",wikidata:"Q766",nameEn:"Jamaica",aliases:["JA"],groups:["029","003","419","019"],driveSide:"left",callingCodes:["1 876","1 658"]},geometry:{type:"MultiPolygon",coordinates:[[[[-75.50728,17.08879],[-76.34192,18.86145],[-78.75694,18.78765],[-78.34606,16.57862],[-75.50728,17.08879]]]]}},{type:"Feature",properties:{iso1A2:"JO",iso1A3:"JOR",iso1N3:"400",wikidata:"Q810",nameEn:"Jordan",groups:["145","142"],callingCodes:["962"]},geometry:{type:"MultiPolygon",coordinates:[[[[39.04251,32.30203],[38.98762,32.47694],[39.08202,32.50304],[38.79171,33.37328],[36.83946,32.31293],[36.40959,32.37908],[36.23948,32.50108],[36.20875,32.49529],[36.20379,32.52751],[36.08074,32.51463],[36.02239,32.65911],[35.96633,32.66237],[35.93307,32.71966],[35.88405,32.71321],[35.75983,32.74803],[35.68467,32.70715],[35.66527,32.681],[35.61669,32.67999],[35.59813,32.65159],[35.56614,32.64393],[35.57485,32.48669],[35.55494,32.42687],[35.55807,32.38674],[35.57111,32.21877],[35.52012,32.04076],[35.54375,31.96587],[35.52758,31.9131],[35.55941,31.76535],[35.47672,31.49578],[35.40316,31.25535],[35.43658,31.12444],[35.41371,30.95565],[35.33984,30.8802],[35.33456,30.81224],[35.29311,30.71365],[35.21379,30.60401],[35.19595,30.50297],[35.16218,30.43535],[35.19183,30.34636],[35.14108,30.07374],[35.02147,29.66343],[34.98207,29.58147],[34.97718,29.54294],[34.92298,29.45305],[34.88293,29.37455],[34.95987,29.35727],[36.07081,29.18469],[36.50005,29.49696],[36.75083,29.86903],[37.4971,29.99949],[37.66395,30.33245],[37.99354,30.49998],[36.99791,31.50081],[38.99233,31.99721],[39.29903,32.23259],[39.26157,32.35555],[39.04251,32.30203]]]]}},{type:"Feature",properties:{iso1A2:"JP",iso1A3:"JPN",iso1N3:"392",wikidata:"Q17",nameEn:"Japan",groups:["030","142"],driveSide:"left",callingCodes:["81"]},geometry:{type:"MultiPolygon",coordinates:[[[[145.82361,43.38904],[145.23667,43.76813],[145.82343,44.571],[140.9182,45.92937],[133.61399,37.41],[129.2669,34.87122],[122.26612,25.98197],[123.92912,17.8782],[155.16731,23.60141],[145.82361,43.38904]]]]}},{type:"Feature",properties:{iso1A2:"KE",iso1A3:"KEN",iso1N3:"404",wikidata:"Q114",nameEn:"Kenya",groups:["014","202","002"],driveSide:"left",callingCodes:["254"]},geometry:{type:"MultiPolygon",coordinates:[[[[35.9419,4.61933],[35.51424,4.61643],[35.42366,4.76969],[35.47843,4.91872],[35.30992,4.90402],[35.34151,5.02364],[34.47601,4.72162],[33.9873,4.23316],[34.06046,4.15235],[34.15429,3.80464],[34.45815,3.67385],[34.44922,3.51627],[34.39112,3.48802],[34.41794,3.44342],[34.40006,3.37949],[34.45815,3.18319],[34.56242,3.11478],[34.60114,2.93034],[34.65774,2.8753],[34.73967,2.85447],[34.78137,2.76223],[34.77244,2.70272],[34.95267,2.47209],[34.90947,2.42447],[34.98692,1.97348],[34.9899,1.6668],[34.92734,1.56109],[34.87819,1.5596],[34.7918,1.36752],[34.82606,1.30944],[34.82606,1.26626],[34.80223,1.22754],[34.67562,1.21265],[34.58029,1.14712],[34.57427,1.09868],[34.52369,1.10692],[34.43349,.85254],[34.40041,.80266],[34.31516,.75693],[34.27345,.63182],[34.20196,.62289],[34.13493,.58118],[34.11408,.48884],[34.08727,.44713],[34.10067,.36372],[33.90936,.10581],[33.98449,-.13079],[33.9264,-.54188],[33.93107,-.99298],[34.02286,-1.00779],[34.03084,-1.05101],[34.0824,-1.02264],[37.67199,-3.06222],[37.71745,-3.304],[37.5903,-3.42735],[37.63099,-3.50723],[37.75036,-3.54243],[37.81321,-3.69179],[39.21631,-4.67835],[39.44306,-4.93877],[39.62121,-4.68136],[41.75542,-1.85308],[41.56362,-1.66375],[41.56,-1.59812],[41.00099,-.83068],[40.98767,2.82959],[41.31368,3.14314],[41.89488,3.97375],[41.1754,3.94079],[40.77498,4.27683],[39.86043,3.86974],[39.76808,3.67058],[39.58339,3.47434],[39.55132,3.39634],[39.51551,3.40895],[39.49444,3.45521],[39.19954,3.47834],[39.07736,3.5267],[38.91938,3.51198],[38.52336,3.62551],[38.45812,3.60445],[38.14168,3.62487],[37.07724,4.33503],[36.84474,4.44518],[36.03924,4.44406],[35.95449,4.53244],[35.9419,4.61933]]]]}},{type:"Feature",properties:{iso1A2:"KG",iso1A3:"KGZ",iso1N3:"417",wikidata:"Q813",nameEn:"Kyrgyzstan",groups:["143","142"],callingCodes:["996"]},geometry:{type:"MultiPolygon",coordinates:[[[[74.88756,42.98612],[74.75,42.99029],[74.70331,43.02519],[74.64615,43.05881],[74.57491,43.13702],[74.22489,43.24657],[73.55634,43.03071],[73.50992,42.82356],[73.44393,42.43098],[71.88792,42.83578],[71.62405,42.76613],[71.53272,42.8014],[71.2724,42.77853],[71.22785,42.69248],[71.17807,42.67381],[71.15232,42.60486],[70.97717,42.50147],[70.85973,42.30188],[70.94483,42.26238],[71.13263,42.28356],[71.28719,42.18033],[70.69777,41.92554],[70.17682,41.5455],[70.48909,41.40335],[70.67586,41.47953],[70.78572,41.36419],[70.77885,41.24813],[70.86263,41.23833],[70.9615,41.16393],[71.02193,41.19494],[71.11806,41.15359],[71.25813,41.18796],[71.27187,41.11015],[71.34877,41.16807],[71.40198,41.09436],[71.46148,41.13958],[71.43814,41.19644],[71.46688,41.31883],[71.57227,41.29175],[71.6787,41.42111],[71.65914,41.49599],[71.73054,41.54713],[71.71132,41.43012],[71.76625,41.4466],[71.83914,41.3546],[71.91457,41.2982],[71.85964,41.19081],[72.07249,41.11739],[72.10745,41.15483],[72.16433,41.16483],[72.17594,41.15522],[72.14864,41.13363],[72.1792,41.10621],[72.21061,41.05607],[72.17594,41.02377],[72.18339,40.99571],[72.324,41.03381],[72.34026,41.04539],[72.34757,41.06104],[72.36138,41.04384],[72.38511,41.02785],[72.45206,41.03018],[72.48742,40.97136],[72.55109,40.96046],[72.59136,40.86947],[72.68157,40.84942],[72.84291,40.85512],[72.94454,40.8094],[73.01869,40.84681],[73.13267,40.83512],[73.13412,40.79122],[73.0612,40.76678],[72.99133,40.76457],[72.93296,40.73089],[72.8722,40.71111],[72.85372,40.7116],[72.84754,40.67229],[72.80137,40.67856],[72.74866,40.60873],[72.74894,40.59592],[72.75982,40.57273],[72.74862,40.57131],[72.74768,40.58051],[72.73995,40.58409],[72.69579,40.59778],[72.66713,40.59076],[72.66713,40.5219],[72.47795,40.5532],[72.40517,40.61917],[72.34406,40.60144],[72.41714,40.55736],[72.38384,40.51535],[72.41513,40.50856],[72.44191,40.48222],[72.40346,40.4007],[72.24368,40.46091],[72.18648,40.49893],[71.96401,40.31907],[72.05464,40.27586],[71.85002,40.25647],[71.82646,40.21872],[71.73054,40.14818],[71.71719,40.17886],[71.69621,40.18492],[71.70569,40.20391],[71.68386,40.26984],[71.61931,40.26775],[71.61725,40.20615],[71.51549,40.22986],[71.51215,40.26943],[71.4246,40.28619],[71.36663,40.31593],[71.13042,40.34106],[71.05901,40.28765],[70.95789,40.28761],[70.9818,40.22392],[70.80495,40.16813],[70.7928,40.12797],[70.65827,40.0981],[70.65946,39.9878],[70.58912,39.95211],[70.55033,39.96619],[70.47557,39.93216],[70.57384,39.99394],[70.58297,40.00891],[70.01283,40.23288],[69.67001,40.10639],[69.64704,40.12165],[69.57615,40.10524],[69.55555,40.12296],[69.53794,40.11833],[69.53855,40.0887],[69.5057,40.03277],[69.53615,39.93991],[69.43557,39.92877],[69.43134,39.98431],[69.35649,40.01994],[69.26938,39.8127],[69.3594,39.52516],[69.68677,39.59281],[69.87491,39.53882],[70.11111,39.58223],[70.2869,39.53141],[70.44757,39.60128],[70.64087,39.58792],[70.7854,39.38933],[71.06418,39.41586],[71.08752,39.50704],[71.49814,39.61397],[71.55856,39.57588],[71.5517,39.45722],[71.62688,39.44056],[71.76816,39.45456],[71.80164,39.40631],[71.7522,39.32031],[71.79202,39.27355],[71.90601,39.27674],[72.04059,39.36704],[72.09689,39.26823],[72.17242,39.2661],[72.23834,39.17248],[72.33173,39.33093],[72.62027,39.39696],[72.85934,39.35116],[73.18454,39.35536],[73.31912,39.38615],[73.45096,39.46677],[73.59831,39.46425],[73.87018,39.47879],[73.94683,39.60733],[73.92354,39.69565],[73.9051,39.75073],[73.83006,39.76136],[73.97049,40.04378],[74.25533,40.13191],[74.35063,40.09742],[74.69875,40.34668],[74.85996,40.32857],[74.78168,40.44886],[74.82013,40.52197],[75.08243,40.43945],[75.22834,40.45382],[75.5854,40.66874],[75.69663,40.28642],[75.91361,40.2948],[75.96168,40.38064],[76.33659,40.3482],[76.5261,40.46114],[76.75681,40.95354],[76.99302,41.0696],[77.28004,41.0033],[77.3693,41.0375],[77.52723,41.00227],[77.76206,41.01574],[77.81287,41.14307],[78.12873,41.23091],[78.15757,41.38565],[78.3732,41.39603],[79.92977,42.04113],[80.17842,42.03211],[80.17807,42.21166],[79.97364,42.42816],[79.52921,42.44778],[79.19763,42.804],[78.91502,42.76839],[78.48469,42.89649],[75.82823,42.94848],[75.72174,42.79672],[75.29966,42.86183],[75.22619,42.85528],[74.88756,42.98612]],[[70.74189,39.86319],[70.63105,39.77923],[70.59667,39.83542],[70.54998,39.85137],[70.52631,39.86989],[70.53651,39.89155],[70.74189,39.86319]],[[71.86463,39.98598],[71.84316,39.95582],[71.7504,39.93701],[71.71511,39.96348],[71.78838,40.01404],[71.86463,39.98598]],[[71.21139,40.03369],[71.1427,39.95026],[71.23067,39.93581],[71.16101,39.88423],[71.10531,39.91354],[71.04979,39.89808],[71.10501,39.95568],[71.09063,39.99],[71.11668,39.99291],[71.11037,40.01984],[71.01035,40.05481],[71.00236,40.18154],[71.06305,40.1771],[71.12218,40.03052],[71.21139,40.03369]]]]}},{type:"Feature",properties:{iso1A2:"KH",iso1A3:"KHM",iso1N3:"116",wikidata:"Q424",nameEn:"Cambodia",groups:["035","142"],callingCodes:["855"]},geometry:{type:"MultiPolygon",coordinates:[[[[105.87328,11.55953],[105.81645,11.56876],[105.80867,11.60536],[105.8507,11.66635],[105.88962,11.67854],[105.95188,11.63738],[106.00792,11.7197],[106.02038,11.77457],[106.06708,11.77761],[106.13158,11.73283],[106.18539,11.75171],[106.26478,11.72122],[106.30525,11.67549],[106.37219,11.69836],[106.44691,11.66787],[106.45158,11.68616],[106.41577,11.76999],[106.44535,11.8279],[106.44068,11.86294],[106.4687,11.86751],[106.4111,11.97413],[106.70687,11.96956],[106.79405,12.0807],[106.92325,12.06548],[106.99953,12.08983],[107.15831,12.27547],[107.34511,12.33327],[107.42917,12.24657],[107.4463,12.29373],[107.55059,12.36824],[107.5755,12.52177],[107.55993,12.7982],[107.49611,12.88926],[107.49144,13.01215],[107.62843,13.3668],[107.61909,13.52577],[107.53503,13.73908],[107.45252,13.78897],[107.46498,13.91593],[107.44318,13.99751],[107.38247,13.99147],[107.35757,14.02319],[107.37158,14.07906],[107.33577,14.11832],[107.40427,14.24509],[107.39493,14.32655],[107.44941,14.41552],[107.48521,14.40346],[107.52569,14.54665],[107.52102,14.59034],[107.55371,14.628],[107.54361,14.69092],[107.47238,14.61523],[107.44435,14.52785],[107.37897,14.54443],[107.3276,14.58812],[107.29803,14.58963],[107.26534,14.54292],[107.256,14.48716],[107.21241,14.48716],[107.17038,14.41782],[107.09722,14.3937],[107.03962,14.45099],[107.04585,14.41782],[106.98825,14.36806],[106.9649,14.3198],[106.90574,14.33639],[106.8497,14.29416],[106.80767,14.31226],[106.73762,14.42687],[106.63333,14.44194],[106.59908,14.50977],[106.57106,14.50525],[106.54148,14.59565],[106.50723,14.58963],[106.45898,14.55045],[106.47766,14.50977],[106.43874,14.52032],[106.40916,14.45249],[106.32355,14.44043],[106.25194,14.48415],[106.21302,14.36203],[106.00131,14.36957],[105.99509,14.32734],[106.02311,14.30623],[106.04801,14.20363],[106.10872,14.18401],[106.11962,14.11307],[106.18656,14.06324],[106.16632,14.01794],[106.10094,13.98471],[106.10405,13.9137],[105.90791,13.92881],[105.78182,14.02247],[105.78338,14.08438],[105.5561,14.15684],[105.44869,14.10703],[105.36775,14.09948],[105.2759,14.17496],[105.20894,14.34967],[105.17748,14.34432],[105.14012,14.23873],[105.08408,14.20402],[105.02804,14.23722],[104.97667,14.38806],[104.69335,14.42726],[104.55014,14.36091],[104.27616,14.39861],[103.93836,14.3398],[103.70175,14.38052],[103.71109,14.4348],[103.53518,14.42575],[103.39353,14.35639],[103.16469,14.33075],[102.93275,14.19044],[102.91251,14.01531],[102.77864,13.93374],[102.72727,13.77806],[102.56848,13.69366],[102.5481,13.6589],[102.58635,13.6286],[102.62483,13.60883],[102.57573,13.60461],[102.5358,13.56933],[102.44601,13.5637],[102.36859,13.57488],[102.33828,13.55613],[102.361,13.50551],[102.35563,13.47307],[102.35692,13.38274],[102.34611,13.35618],[102.36001,13.31142],[102.36146,13.26006],[102.43422,13.09061],[102.46011,13.08057],[102.52275,12.99813],[102.48694,12.97537],[102.49335,12.92711],[102.53053,12.77506],[102.4994,12.71736],[102.51963,12.66117],[102.57567,12.65358],[102.7796,12.43781],[102.78116,12.40284],[102.73134,12.37091],[102.70176,12.1686],[102.77026,12.06815],[102.78427,11.98746],[102.83957,11.8519],[102.90973,11.75613],[102.91449,11.65512],[102.52395,11.25257],[102.47649,9.66162],[103.99198,10.48391],[104.43778,10.42386],[104.47963,10.43046],[104.49869,10.4057],[104.59018,10.53073],[104.87933,10.52833],[104.95094,10.64003],[105.09571,10.72722],[105.02722,10.89236],[105.08326,10.95656],[105.11449,10.96332],[105.34011,10.86179],[105.42884,10.96878],[105.50045,10.94586],[105.77751,11.03671],[105.86376,10.89839],[105.84603,10.85873],[105.93403,10.83853],[105.94535,10.9168],[106.06708,10.8098],[106.18539,10.79451],[106.14301,10.98176],[106.20095,10.97795],[106.1757,11.07301],[106.1527,11.10476],[106.10444,11.07879],[105.86782,11.28343],[105.88962,11.43605],[105.87328,11.55953]]]]}},{type:"Feature",properties:{iso1A2:"KI",iso1A3:"KIR",iso1N3:"296",wikidata:"Q710",nameEn:"Kiribati",groups:["057","009"],driveSide:"left",callingCodes:["686"]},geometry:{type:"MultiPolygon",coordinates:[[[[169,3.9],[169,-3.5],[178,-3.5],[178,3.9],[169,3.9]]],[[[-158.62058,-1.35506],[-161.04969,-1.36251],[-175.33482,-1.40631],[-175.31804,-7.54825],[-174.18707,-7.54408],[-167.75329,-7.52784],[-156.50903,-7.4975],[-156.4957,-12.32002],[-149.61166,-12.30171],[-149.6249,-7.51261],[-149.65979,5.27712],[-161.06795,5.2462],[-161.05669,1.11722],[-158.62734,1.1296],[-158.62058,-1.35506]]]]}},{type:"Feature",properties:{iso1A2:"KM",iso1A3:"COM",iso1N3:"174",wikidata:"Q970",nameEn:"Comoros",groups:["014","202","002"],callingCodes:["269"]},geometry:{type:"MultiPolygon",coordinates:[[[[42.93552,-11.11413],[42.99868,-12.65261],[44.75722,-12.58368],[44.69407,-11.04481],[42.93552,-11.11413]]]]}},{type:"Feature",properties:{iso1A2:"KN",iso1A3:"KNA",iso1N3:"659",wikidata:"Q763",nameEn:"St. Kitts and Nevis",groups:["029","003","419","019"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["1 869"]},geometry:{type:"MultiPolygon",coordinates:[[[[-62.27053,17.22145],[-62.76692,17.64353],[-63.11114,17.23125],[-62.62949,16.82364],[-62.27053,17.22145]]]]}},{type:"Feature",properties:{iso1A2:"KP",iso1A3:"PRK",iso1N3:"408",wikidata:"Q423",nameEn:"North Korea",groups:["030","142"],callingCodes:["850"]},geometry:{type:"MultiPolygon",coordinates:[[[[130.26095,42.9027],[130.09764,42.91425],[130.12957,42.98361],[129.96409,42.97306],[129.95082,43.01051],[129.8865,43.00395],[129.85261,42.96494],[129.83277,42.86746],[129.80719,42.79218],[129.7835,42.76521],[129.77183,42.69435],[129.75294,42.59409],[129.72541,42.43739],[129.60482,42.44461],[129.54701,42.37254],[129.42882,42.44702],[129.28541,42.41574],[129.22423,42.3553],[129.22285,42.26491],[129.15178,42.17224],[128.96068,42.06657],[128.94007,42.03537],[128.04487,42.01769],[128.15119,41.74568],[128.30716,41.60322],[128.20061,41.40895],[128.18546,41.41279],[128.12967,41.37931],[128.03311,41.39232],[128.02633,41.42103],[127.92943,41.44291],[127.29712,41.49473],[127.17841,41.59714],[126.90729,41.79955],[126.60631,41.65565],[126.53189,41.35206],[126.242,41.15454],[126.00335,40.92835],[125.76869,40.87908],[125.71172,40.85223],[124.86913,40.45387],[124.40719,40.13655],[124.38556,40.11047],[124.3322,40.05573],[124.37089,40.03004],[124.35029,39.95639],[124.23201,39.9248],[124.17532,39.8232],[123.90497,38.79949],[123.85601,37.49093],[124.67666,38.05679],[124.84224,37.977],[124.87921,37.80827],[125.06408,37.66334],[125.37112,37.62643],[125.81159,37.72949],[126.13074,37.70512],[126.18776,37.74728],[126.19097,37.81462],[126.24402,37.83113],[126.43239,37.84095],[126.46818,37.80873],[126.56709,37.76857],[126.59918,37.76364],[126.66067,37.7897],[126.68793,37.83728],[126.68793,37.9175],[126.67023,37.95852],[126.84961,38.0344],[126.88106,38.10246],[126.95887,38.1347],[126.95338,38.17735],[127.04479,38.25518],[127.15749,38.30722],[127.38727,38.33227],[127.49672,38.30647],[127.55013,38.32257],[128.02917,38.31861],[128.27652,38.41657],[128.31105,38.58462],[128.37487,38.62345],[128.65655,38.61914],[131.95041,41.5445],[130.65022,42.32281],[130.66367,42.38024],[130.64181,42.41422],[130.60805,42.4317],[130.56835,42.43281],[130.55143,42.52158],[130.50123,42.61636],[130.44361,42.54849],[130.41826,42.6011],[130.2385,42.71127],[130.23068,42.80125],[130.26095,42.9027]]]]}},{type:"Feature",properties:{iso1A2:"KR",iso1A3:"KOR",iso1N3:"410",wikidata:"Q884",nameEn:"South Korea",groups:["030","142"],callingCodes:["82"]},geometry:{type:"MultiPolygon",coordinates:[[[[133.61399,37.41],[128.65655,38.61914],[128.37487,38.62345],[128.31105,38.58462],[128.27652,38.41657],[128.02917,38.31861],[127.55013,38.32257],[127.49672,38.30647],[127.38727,38.33227],[127.15749,38.30722],[127.04479,38.25518],[126.95338,38.17735],[126.95887,38.1347],[126.88106,38.10246],[126.84961,38.0344],[126.67023,37.95852],[126.68793,37.9175],[126.68793,37.83728],[126.66067,37.7897],[126.59918,37.76364],[126.56709,37.76857],[126.46818,37.80873],[126.43239,37.84095],[126.24402,37.83113],[126.19097,37.81462],[126.18776,37.74728],[126.13074,37.70512],[125.81159,37.72949],[125.37112,37.62643],[125.06408,37.66334],[124.87921,37.80827],[124.84224,37.977],[124.67666,38.05679],[123.85601,37.49093],[122.80525,33.30571],[125.99728,32.63328],[129.2669,34.87122],[133.61399,37.41]]]]}},{type:"Feature",properties:{iso1A2:"KW",iso1A3:"KWT",iso1N3:"414",wikidata:"Q817",nameEn:"Kuwait",groups:["145","142"],callingCodes:["965"]},geometry:{type:"MultiPolygon",coordinates:[[[[49.00421,28.81495],[48.59531,29.66815],[48.40479,29.85763],[48.17332,30.02448],[48.06782,30.02906],[48.01114,29.98906],[47.7095,30.10453],[47.37192,30.10421],[47.15166,30.01044],[46.89695,29.50584],[46.5527,29.10283],[47.46202,29.0014],[47.58376,28.83382],[47.59863,28.66798],[47.70561,28.5221],[48.42991,28.53628],[49.00421,28.81495]]]]}},{type:"Feature",properties:{iso1A2:"KY",iso1A3:"CYM",iso1N3:"136",wikidata:"Q5785",nameEn:"Cayman Islands",country:"GB",groups:["029","003","419","019"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["1 345"]},geometry:{type:"MultiPolygon",coordinates:[[[[-82.11509,19.60401],[-80.36068,18.11751],[-79.32727,20.06742],[-82.11509,19.60401]]]]}},{type:"Feature",properties:{iso1A2:"KZ",iso1A3:"KAZ",iso1N3:"398",wikidata:"Q232",nameEn:"Kazakhstan",groups:["143","142"],callingCodes:["7"]},geometry:{type:"MultiPolygon",coordinates:[[[[68.90865,55.38148],[68.19206,55.18823],[68.26661,55.09226],[68.21308,54.98645],[65.20174,54.55216],[65.24663,54.35721],[65.11033,54.33028],[64.97216,54.4212],[63.97686,54.29763],[64.02715,54.22679],[63.91224,54.20013],[63.80604,54.27079],[62.58651,54.05871],[62.56876,53.94047],[62.45931,53.90737],[62.38535,54.03961],[62.00966,54.04134],[62.03913,53.94768],[61.65318,54.02445],[61.56941,53.95703],[61.47603,54.08048],[61.3706,54.08464],[61.26863,53.92797],[60.99796,53.93699],[61.14283,53.90063],[61.22574,53.80268],[60.90626,53.62937],[61.55706,53.57144],[61.57185,53.50112],[61.37957,53.45887],[61.29082,53.50992],[61.14291,53.41481],[61.19024,53.30536],[62.14574,53.09626],[62.12799,52.99133],[62.0422,52.96105],[61.23462,53.03227],[61.05842,52.92217],[60.71989,52.75923],[60.71693,52.66245],[60.84118,52.63912],[60.84709,52.52228],[60.98021,52.50068],[61.05417,52.35096],[60.78201,52.22067],[60.72581,52.15538],[60.48915,52.15175],[60.19925,51.99173],[59.99809,51.98263],[60.09867,51.87135],[60.50986,51.7964],[60.36787,51.66815],[60.5424,51.61675],[60.92401,51.61124],[60.95655,51.48615],[61.50677,51.40687],[61.55114,51.32746],[61.6813,51.25716],[61.56889,51.23679],[61.4431,50.80679],[60.81833,50.6629],[60.31914,50.67705],[60.17262,50.83312],[60.01288,50.8163],[59.81172,50.54451],[59.51886,50.49937],[59.48928,50.64216],[58.87974,50.70852],[58.3208,51.15151],[57.75578,51.13852],[57.74986,50.93017],[57.44221,50.88354],[57.17302,51.11253],[56.17906,50.93204],[56.11398,50.7471],[55.67774,50.54508],[54.72067,51.03261],[54.56685,51.01958],[54.71476,50.61214],[54.55797,50.52006],[54.41894,50.61214],[54.46331,50.85554],[54.12248,51.11542],[53.69299,51.23466],[53.46165,51.49445],[52.54329,51.48444],[52.36119,51.74161],[51.8246,51.67916],[51.77431,51.49536],[51.301,51.48799],[51.26254,51.68466],[50.59695,51.61859],[50.26859,51.28677],[49.97277,51.2405],[49.76866,51.11067],[49.39001,51.09396],[49.41959,50.85927],[49.12673,50.78639],[48.86936,50.61589],[48.57946,50.63278],[48.90782,50.02281],[48.68352,49.89546],[48.42564,49.82283],[48.24519,49.86099],[48.10044,50.09242],[47.58551,50.47867],[47.30448,50.30894],[47.34589,50.09308],[47.18319,49.93721],[46.9078,49.86707],[46.78398,49.34026],[46.98795,49.23531],[47.04416,49.17152],[47.01458,49.07085],[46.91104,48.99715],[46.78392,48.95352],[46.49011,48.43019],[47.11516,48.27188],[47.12107,47.83687],[47.38731,47.68176],[47.41689,47.83687],[47.64973,47.76559],[48.15348,47.74545],[48.45173,47.40818],[48.52326,47.4102],[49.01136,46.72716],[48.51142,46.69268],[48.54988,46.56267],[49.16518,46.38542],[49.32259,46.26944],[49.88945,46.04554],[49.2134,44.84989],[52.26048,41.69249],[52.47884,41.78034],[52.97575,42.1308],[54.20635,42.38477],[54.95182,41.92424],[55.45471,41.25609],[56.00314,41.32584],[55.97584,44.99322],[55.97584,44.99328],[55.97584,44.99338],[55.97584,44.99343],[55.97584,44.99348],[55.97584,44.99353],[55.97584,44.99359],[55.97584,44.99369],[55.97584,44.99374],[55.97584,44.99384],[55.97584,44.9939],[55.97584,44.994],[55.97584,44.99405],[55.97584,44.99415],[55.97584,44.99421],[55.97584,44.99426],[55.97584,44.99431],[55.97584,44.99436],[55.97584,44.99441],[55.97594,44.99446],[55.97605,44.99452],[55.97605,44.99457],[55.97605,44.99462],[55.97605,44.99467],[55.97605,44.99477],[55.97615,44.99477],[55.97615,44.99483],[55.97615,44.99493],[55.97615,44.99498],[55.97615,44.99503],[55.97615,44.99508],[55.97625,44.99514],[55.97636,44.99519],[55.97636,44.99524],[55.97646,44.99529],[55.97646,44.99534],[55.97656,44.99539],[55.97667,44.99545],[55.97677,44.9955],[55.97677,44.99555],[55.97677,44.9956],[55.97687,44.9956],[55.97698,44.99565],[55.97698,44.9957],[55.97708,44.99576],[55.97718,44.99581],[55.97729,44.99586],[55.97739,44.99586],[55.97739,44.99591],[55.97749,44.99591],[55.9776,44.99591],[55.9777,44.99596],[55.9777,44.99601],[55.9778,44.99607],[55.97791,44.99607],[55.97801,44.99607],[55.97801,44.99612],[55.97811,44.99617],[55.97822,44.99617],[55.97832,44.99622],[55.97842,44.99622],[58.59711,45.58671],[61.01475,44.41383],[62.01711,43.51008],[63.34656,43.64003],[64.53885,43.56941],[64.96464,43.74748],[65.18666,43.48835],[65.53277,43.31856],[65.85194,42.85481],[66.09482,42.93426],[66.00546,41.94455],[66.53302,41.87388],[66.69129,41.1311],[67.9644,41.14611],[67.98511,41.02794],[68.08273,41.08148],[68.1271,41.0324],[67.96736,40.83798],[68.49983,40.56437],[68.63,40.59358],[68.58444,40.91447],[68.49983,40.99669],[68.62221,41.03019],[68.65662,40.93861],[68.73945,40.96989],[68.7217,41.05025],[69.01308,41.22804],[69.05006,41.36183],[69.15137,41.43078],[69.17701,41.43769],[69.18528,41.45175],[69.20439,41.45391],[69.22671,41.46298],[69.23332,41.45847],[69.25059,41.46693],[69.29778,41.43673],[69.35554,41.47211],[69.37468,41.46555],[69.45081,41.46246],[69.39485,41.51518],[69.45751,41.56863],[69.49545,41.545],[70.94483,42.26238],[70.85973,42.30188],[70.97717,42.50147],[71.15232,42.60486],[71.17807,42.67381],[71.22785,42.69248],[71.2724,42.77853],[71.53272,42.8014],[71.62405,42.76613],[71.88792,42.83578],[73.44393,42.43098],[73.50992,42.82356],[73.55634,43.03071],[74.22489,43.24657],[74.57491,43.13702],[74.64615,43.05881],[74.70331,43.02519],[74.75,42.99029],[74.88756,42.98612],[75.22619,42.85528],[75.29966,42.86183],[75.72174,42.79672],[75.82823,42.94848],[78.48469,42.89649],[78.91502,42.76839],[79.19763,42.804],[79.52921,42.44778],[79.97364,42.42816],[80.17807,42.21166],[80.26841,42.23797],[80.16892,42.61137],[80.26886,42.8366],[80.38169,42.83142],[80.58999,42.9011],[80.3735,43.01557],[80.62913,43.141],[80.78817,43.14235],[80.77771,43.30065],[80.69718,43.32589],[80.75156,43.44948],[80.40031,44.10986],[80.40229,44.23319],[80.38384,44.63073],[79.8987,44.89957],[80.11169,45.03352],[81.73278,45.3504],[82.51374,45.1755],[82.58474,45.40027],[82.21792,45.56619],[83.04622,47.19053],[83.92184,46.98912],[84.73077,47.01394],[84.93995,46.87399],[85.22443,47.04816],[85.54294,47.06171],[85.69696,47.2898],[85.61067,47.49753],[85.5169,48.05493],[85.73581,48.3939],[86.38069,48.46064],[86.75343,48.70331],[86.73568,48.99918],[86.87238,49.12432],[87.28386,49.11626],[87.31465,49.23603],[87.03071,49.25142],[86.82606,49.51796],[86.61307,49.60239],[86.79056,49.74787],[86.63674,49.80136],[86.18709,49.50259],[85.24047,49.60239],[84.99198,50.06793],[84.29385,50.27257],[83.8442,50.87375],[83.14607,51.00796],[82.55443,50.75412],[81.94999,50.79307],[81.46581,50.77658],[81.41248,50.97524],[81.06091,50.94833],[81.16999,51.15662],[80.80318,51.28262],[80.44819,51.20855],[80.4127,50.95581],[80.08138,50.77658],[79.11255,52.01171],[77.90383,53.29807],[76.54243,53.99329],[76.44076,54.16017],[76.82266,54.1798],[76.91052,54.4677],[75.3668,54.07439],[75.43398,53.98652],[75.07405,53.80831],[73.39218,53.44623],[73.25412,53.61532],[73.68921,53.86522],[73.74778,54.07194],[73.37963,53.96132],[72.71026,54.1161],[72.43415,53.92685],[72.17477,54.36303],[71.96141,54.17736],[71.10379,54.13326],[71.08706,54.33376],[71.24185,54.64965],[71.08288,54.71253],[70.96009,55.10558],[70.76493,55.3027],[70.19179,55.1476],[69.74917,55.35545],[69.34224,55.36344],[68.90865,55.38148]]]]}},{type:"Feature",properties:{iso1A2:"LA",iso1A3:"LAO",iso1N3:"418",wikidata:"Q819",nameEn:"Laos",groups:["035","142"],callingCodes:["856"]},geometry:{type:"MultiPolygon",coordinates:[[[[102.1245,22.43372],[102.03633,22.46164],[101.98487,22.42766],[101.91344,22.44417],[101.90714,22.38688],[101.86828,22.38397],[101.7685,22.50337],[101.68973,22.46843],[101.61306,22.27515],[101.56789,22.28876],[101.53638,22.24794],[101.60675,22.13513],[101.57525,22.13026],[101.62566,21.96574],[101.7791,21.83019],[101.74555,21.72852],[101.83257,21.61562],[101.80001,21.57461],[101.7475,21.5873],[101.7727,21.51794],[101.74224,21.48276],[101.74014,21.30967],[101.84412,21.25291],[101.83887,21.20983],[101.76745,21.21571],[101.79266,21.19025],[101.7622,21.14813],[101.70548,21.14911],[101.66977,21.20004],[101.60886,21.17947],[101.59491,21.18621],[101.6068,21.23329],[101.54563,21.25668],[101.29326,21.17254],[101.2229,21.23271],[101.26912,21.36482],[101.19349,21.41959],[101.2124,21.56422],[101.15156,21.56129],[101.16198,21.52808],[101.00234,21.39612],[100.80173,21.2934],[100.72716,21.31786],[100.63578,21.05639],[100.55281,21.02796],[100.50974,20.88574],[100.64628,20.88279],[100.60112,20.8347],[100.51079,20.82194],[100.36375,20.82783],[100.1957,20.68247],[100.08404,20.36626],[100.09999,20.31614],[100.09337,20.26293],[100.11785,20.24787],[100.1712,20.24324],[100.16668,20.2986],[100.22076,20.31598],[100.25769,20.3992],[100.33383,20.4028],[100.37439,20.35156],[100.41473,20.25625],[100.44992,20.23644],[100.4537,20.19971],[100.47567,20.19133],[100.51052,20.14928],[100.55218,20.17741],[100.58808,20.15791],[100.5094,19.87904],[100.398,19.75047],[100.49604,19.53504],[100.58219,19.49164],[100.64606,19.55884],[100.77231,19.48324],[100.90302,19.61901],[101.08928,19.59748],[101.26545,19.59242],[101.26991,19.48324],[101.21347,19.46223],[101.20604,19.35296],[101.24911,19.33334],[101.261,19.12717],[101.35606,19.04716],[101.25803,18.89545],[101.22832,18.73377],[101.27585,18.68875],[101.06047,18.43247],[101.18227,18.34367],[101.15108,18.25624],[101.19118,18.2125],[101.1793,18.0544],[101.02185,17.87637],[100.96541,17.57926],[101.15108,17.47586],[101.44667,17.7392],[101.72294,17.92867],[101.78087,18.07559],[101.88485,18.02474],[102.11359,18.21532],[102.45523,17.97106],[102.59234,17.96127],[102.60971,17.95411],[102.61432,17.92273],[102.5896,17.84889],[102.59485,17.83537],[102.68194,17.80151],[102.69946,17.81686],[102.67543,17.84529],[102.68538,17.86653],[102.75954,17.89561],[102.79044,17.93612],[102.81988,17.94233],[102.86323,17.97531],[102.95812,18.0054],[102.9912,17.9949],[103.01998,17.97095],[103.0566,18.00144],[103.07823,18.03833],[103.07343,18.12351],[103.1493,18.17799],[103.14994,18.23172],[103.17093,18.2618],[103.29757,18.30475],[103.23818,18.34875],[103.24779,18.37807],[103.30977,18.4341],[103.41044,18.4486],[103.47773,18.42841],[103.60957,18.40528],[103.699,18.34125],[103.82449,18.33979],[103.85642,18.28666],[103.93916,18.33914],[103.97725,18.33631],[104.06533,18.21656],[104.10927,18.10826],[104.21776,17.99335],[104.2757,17.86139],[104.35432,17.82871],[104.45404,17.66788],[104.69867,17.53038],[104.80061,17.39367],[104.80716,17.19025],[104.73712,17.01404],[104.7373,16.91125],[104.76442,16.84752],[104.7397,16.81005],[104.76099,16.69302],[104.73349,16.565],[104.88057,16.37311],[105.00262,16.25627],[105.06204,16.09792],[105.42001,16.00657],[105.38508,15.987],[105.34115,15.92737],[105.37959,15.84074],[105.42285,15.76971],[105.46573,15.74742],[105.61756,15.68792],[105.60446,15.53301],[105.58191,15.41031],[105.47635,15.3796],[105.4692,15.33709],[105.50662,15.32054],[105.58043,15.32724],[105.46661,15.13132],[105.61162,15.00037],[105.5121,14.80802],[105.53864,14.55731],[105.43783,14.43865],[105.20894,14.34967],[105.2759,14.17496],[105.36775,14.09948],[105.44869,14.10703],[105.5561,14.15684],[105.78338,14.08438],[105.78182,14.02247],[105.90791,13.92881],[106.10405,13.9137],[106.10094,13.98471],[106.16632,14.01794],[106.18656,14.06324],[106.11962,14.11307],[106.10872,14.18401],[106.04801,14.20363],[106.02311,14.30623],[105.99509,14.32734],[106.00131,14.36957],[106.21302,14.36203],[106.25194,14.48415],[106.32355,14.44043],[106.40916,14.45249],[106.43874,14.52032],[106.47766,14.50977],[106.45898,14.55045],[106.50723,14.58963],[106.54148,14.59565],[106.57106,14.50525],[106.59908,14.50977],[106.63333,14.44194],[106.73762,14.42687],[106.80767,14.31226],[106.8497,14.29416],[106.90574,14.33639],[106.9649,14.3198],[106.98825,14.36806],[107.04585,14.41782],[107.03962,14.45099],[107.09722,14.3937],[107.17038,14.41782],[107.21241,14.48716],[107.256,14.48716],[107.26534,14.54292],[107.29803,14.58963],[107.3276,14.58812],[107.37897,14.54443],[107.44435,14.52785],[107.47238,14.61523],[107.54361,14.69092],[107.51579,14.79282],[107.59285,14.87795],[107.48277,14.93751],[107.46516,15.00982],[107.61486,15.0566],[107.61926,15.13949],[107.58844,15.20111],[107.62587,15.2266],[107.60605,15.37524],[107.62367,15.42193],[107.53341,15.40496],[107.50699,15.48771],[107.3815,15.49832],[107.34408,15.62345],[107.27583,15.62769],[107.27143,15.71459],[107.21859,15.74638],[107.21419,15.83747],[107.34188,15.89464],[107.39471,15.88829],[107.46296,16.01106],[107.44975,16.08511],[107.33968,16.05549],[107.25822,16.13587],[107.14595,16.17816],[107.15035,16.26271],[107.09091,16.3092],[107.02597,16.31132],[106.97385,16.30204],[106.96638,16.34938],[106.88067,16.43594],[106.88727,16.52671],[106.84104,16.55415],[106.74418,16.41904],[106.65832,16.47816],[106.66052,16.56892],[106.61477,16.60713],[106.58267,16.6012],[106.59013,16.62259],[106.55485,16.68704],[106.55265,16.86831],[106.52183,16.87884],[106.51963,16.92097],[106.54824,16.92729],[106.55045,17.0031],[106.50862,16.9673],[106.43597,17.01362],[106.31929,17.20509],[106.29287,17.3018],[106.24444,17.24714],[106.18991,17.28227],[106.09019,17.36399],[105.85744,17.63221],[105.76612,17.67147],[105.60381,17.89356],[105.64784,17.96687],[105.46292,18.22008],[105.38366,18.15315],[105.15942,18.38691],[105.10408,18.43533],[105.1327,18.58355],[105.19654,18.64196],[105.12829,18.70453],[104.64617,18.85668],[104.5361,18.97747],[103.87125,19.31854],[104.06058,19.43484],[104.10832,19.51575],[104.05617,19.61743],[104.06498,19.66926],[104.23229,19.70242],[104.41281,19.70035],[104.53169,19.61743],[104.64837,19.62365],[104.68359,19.72729],[104.8355,19.80395],[104.8465,19.91783],[104.9874,20.09573],[104.91695,20.15567],[104.86852,20.14121],[104.61315,20.24452],[104.62195,20.36633],[104.72102,20.40554],[104.66158,20.47774],[104.47886,20.37459],[104.40621,20.3849],[104.38199,20.47155],[104.63957,20.6653],[104.27412,20.91433],[104.11121,20.96779],[103.98024,20.91531],[103.82282,20.8732],[103.73478,20.6669],[103.68633,20.66324],[103.45737,20.82382],[103.38032,20.79501],[103.21497,20.89832],[103.12055,20.89994],[103.03469,21.05821],[102.97745,21.05821],[102.89825,21.24707],[102.80794,21.25736],[102.88939,21.3107],[102.94223,21.46034],[102.86297,21.4255],[102.98846,21.58936],[102.97965,21.74076],[102.86077,21.71213],[102.85637,21.84501],[102.81894,21.83888],[102.82115,21.73667],[102.74189,21.66713],[102.67145,21.65894],[102.62301,21.91447],[102.49092,21.99002],[102.51734,22.02676],[102.18712,22.30403],[102.14099,22.40092],[102.1245,22.43372]]]]}},{type:"Feature",properties:{iso1A2:"LB",iso1A3:"LBN",iso1N3:"422",wikidata:"Q822",nameEn:"Lebanon",aliases:["RL"],groups:["145","142"],callingCodes:["961"]},geometry:{type:"MultiPolygon",coordinates:[[[[35.94816,33.47886],[35.94465,33.52774],[36.05723,33.57904],[35.9341,33.6596],[36.06778,33.82927],[36.14517,33.85118],[36.3967,33.83365],[36.38263,33.86579],[36.28589,33.91981],[36.41078,34.05253],[36.50576,34.05982],[36.5128,34.09916],[36.62537,34.20251],[36.59195,34.2316],[36.58667,34.27667],[36.60778,34.31009],[36.56556,34.31881],[36.53039,34.3798],[36.55853,34.41609],[36.46179,34.46541],[36.4442,34.50165],[36.34745,34.5002],[36.3369,34.52629],[36.39846,34.55672],[36.41429,34.61175],[36.45299,34.59438],[36.46003,34.6378],[36.42941,34.62505],[36.35384,34.65447],[36.35135,34.68516],[36.32399,34.69334],[36.29165,34.62991],[35.98718,34.64977],[35.97386,34.63322],[35.48515,34.70851],[34.78515,33.20368],[35.10645,33.09318],[35.1924,33.08743],[35.31429,33.10515],[35.35223,33.05617],[35.43059,33.06659],[35.448,33.09264],[35.50272,33.09056],[35.50335,33.114],[35.52573,33.11921],[35.54228,33.19865],[35.5362,33.23196],[35.54808,33.236],[35.54544,33.25513],[35.55555,33.25844],[35.56523,33.28969],[35.58326,33.28381],[35.58502,33.26653],[35.62283,33.24226],[35.62019,33.27278],[35.77477,33.33609],[35.81324,33.36354],[35.82577,33.40479],[35.88668,33.43183],[35.94816,33.47886]]]]}},{type:"Feature",properties:{iso1A2:"LC",iso1A3:"LCA",iso1N3:"662",wikidata:"Q760",nameEn:"St. Lucia",aliases:["WL"],groups:["029","003","419","019"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["1 758"]},geometry:{type:"MultiPolygon",coordinates:[[[[-60.5958,14.23076],[-61.26561,14.25664],[-61.43129,13.68336],[-60.70539,13.41452],[-60.5958,14.23076]]]]}},{type:"Feature",properties:{iso1A2:"LI",iso1A3:"LIE",iso1N3:"438",wikidata:"Q347",nameEn:"Liechtenstein",aliases:["FL"],groups:["155","150"],callingCodes:["423"]},geometry:{type:"MultiPolygon",coordinates:[[[[9.60717,47.06091],[9.61216,47.07732],[9.63395,47.08443],[9.62623,47.14685],[9.56539,47.17124],[9.58264,47.20673],[9.56981,47.21926],[9.55176,47.22585],[9.56766,47.24281],[9.53116,47.27029],[9.52406,47.24959],[9.50318,47.22153],[9.4891,47.19346],[9.48774,47.17402],[9.51044,47.13727],[9.52089,47.10019],[9.51362,47.08505],[9.47139,47.06402],[9.47548,47.05257],[9.54041,47.06495],[9.55721,47.04762],[9.60717,47.06091]]]]}},{type:"Feature",properties:{iso1A2:"LK",iso1A3:"LKA",iso1N3:"144",wikidata:"Q854",nameEn:"Sri Lanka",groups:["034","142"],driveSide:"left",callingCodes:["94"]},geometry:{type:"MultiPolygon",coordinates:[[[[76.25812,4.62435],[85.15017,5.21497],[80.48418,10.20786],[79.42124,9.80115],[79.50447,8.91876],[76.25812,4.62435]]]]}},{type:"Feature",properties:{iso1A2:"LR",iso1A3:"LBR",iso1N3:"430",wikidata:"Q1014",nameEn:"Liberia",groups:["011","202","002"],callingCodes:["231"]},geometry:{type:"MultiPolygon",coordinates:[[[[-8.47114,7.55676],[-8.55874,7.62525],[-8.55874,7.70167],[-8.67814,7.69428],[-8.72789,7.51429],[-8.8448,7.35149],[-8.85724,7.26019],[-8.93435,7.2824],[-9.09107,7.1985],[-9.18311,7.30461],[-9.20798,7.38109],[-9.305,7.42056],[-9.41943,7.41809],[-9.48161,7.37122],[-9.37465,7.62032],[-9.35724,7.74111],[-9.44928,7.9284],[-9.41445,8.02448],[-9.50898,8.18455],[-9.47415,8.35195],[-9.77763,8.54633],[-10.05873,8.42578],[-10.05375,8.50697],[-10.14579,8.52665],[-10.203,8.47991],[-10.27575,8.48711],[-10.30084,8.30008],[-10.31635,8.28554],[-10.29839,8.21283],[-10.35227,8.15223],[-10.45023,8.15627],[-10.51554,8.1393],[-10.57523,8.04829],[-10.60492,8.04072],[-10.60422,7.7739],[-11.29417,7.21576],[-11.4027,6.97746],[-11.50429,6.92704],[-12.15048,6.15992],[-7.52774,3.7105],[-7.53259,4.35145],[-7.59349,4.8909],[-7.53876,4.94294],[-7.55369,5.08667],[-7.48901,5.14118],[-7.46165,5.26256],[-7.36463,5.32944],[-7.43428,5.42355],[-7.37209,5.61173],[-7.43926,5.74787],[-7.43677,5.84687],[-7.46165,5.84934],[-7.48155,5.80974],[-7.67309,5.94337],[-7.70294,5.90625],[-7.78254,5.99037],[-7.79747,6.07696],[-7.8497,6.08932],[-7.83478,6.20309],[-7.90692,6.27728],[-8.00642,6.31684],[-8.17557,6.28222],[-8.3298,6.36381],[-8.38453,6.35887],[-8.45666,6.49977],[-8.48652,6.43797],[-8.59456,6.50612],[-8.31736,6.82837],[-8.29249,7.1691],[-8.37458,7.25794],[-8.41935,7.51203],[-8.47114,7.55676]]]]}},{type:"Feature",properties:{iso1A2:"LS",iso1A3:"LSO",iso1N3:"426",wikidata:"Q1013",nameEn:"Lesotho",groups:["018","202","002"],driveSide:"left",callingCodes:["266"]},geometry:{type:"MultiPolygon",coordinates:[[[[29.33204,-29.45598],[29.44883,-29.3772],[29.40524,-29.21246],[28.68043,-28.58744],[28.65091,-28.57025],[28.40612,-28.6215],[28.30518,-28.69531],[28.2348,-28.69471],[28.1317,-28.7293],[28.02503,-28.85991],[27.98675,-28.8787],[27.9392,-28.84864],[27.88933,-28.88156],[27.8907,-28.91612],[27.75458,-28.89839],[27.55974,-29.18954],[27.5158,-29.2261],[27.54258,-29.25575],[27.48679,-29.29349],[27.45125,-29.29708],[27.47254,-29.31968],[27.4358,-29.33465],[27.33464,-29.48161],[27.01016,-29.65439],[27.09489,-29.72796],[27.22719,-30.00718],[27.29603,-30.05473],[27.32555,-30.14785],[27.40778,-30.14577],[27.37293,-30.19401],[27.36649,-30.27246],[27.38108,-30.33456],[27.45452,-30.32239],[27.56901,-30.42504],[27.56781,-30.44562],[27.62137,-30.50509],[27.6521,-30.51707],[27.67819,-30.53437],[27.69467,-30.55862],[27.74814,-30.60635],[28.12073,-30.68072],[28.2319,-30.28476],[28.399,-30.1592],[28.68627,-30.12885],[28.80222,-30.10579],[28.9338,-30.05072],[29.16548,-29.91706],[29.12553,-29.76266],[29.28545,-29.58456],[29.33204,-29.45598]]]]}},{type:"Feature",properties:{iso1A2:"LT",iso1A3:"LTU",iso1N3:"440",wikidata:"Q37",nameEn:"Lithuania",groups:["EU","154","150"],callingCodes:["370"]},geometry:{type:"MultiPolygon",coordinates:[[[[24.89005,56.46666],[24.83686,56.41565],[24.70022,56.40483],[24.57353,56.31525],[24.58143,56.29125],[24.42746,56.26522],[24.32334,56.30226],[24.13139,56.24881],[24.02657,56.3231],[23.75726,56.37282],[23.49803,56.34307],[23.40486,56.37689],[23.31606,56.3827],[23.17312,56.36795],[23.09531,56.30511],[22.96988,56.41213],[22.83048,56.367],[22.69354,56.36284],[22.56441,56.39305],[22.3361,56.4016],[22.09728,56.42851],[22.00548,56.41508],[21.74558,56.33181],[21.57888,56.31406],[21.49736,56.29106],[21.24644,56.16917],[21.15016,56.07818],[20.68447,56.04073],[20.60454,55.40986],[20.95181,55.27994],[21.26425,55.24456],[21.35465,55.28427],[21.38446,55.29348],[21.46766,55.21115],[21.51095,55.18507],[21.55605,55.20311],[21.64954,55.1791],[21.85521,55.09493],[21.96505,55.07353],[21.99543,55.08691],[22.03984,55.07888],[22.02582,55.05078],[22.06087,55.02935],[22.11697,55.02131],[22.14267,55.05345],[22.31562,55.0655],[22.47688,55.04408],[22.58907,55.07085],[22.60075,55.01863],[22.65451,54.97037],[22.68723,54.9811],[22.76422,54.92521],[22.85083,54.88711],[22.87317,54.79492],[22.73631,54.72952],[22.73397,54.66604],[22.75467,54.6483],[22.74225,54.64339],[22.7522,54.63525],[22.68021,54.58486],[22.71293,54.56454],[22.67788,54.532],[22.70208,54.45312],[22.7253,54.41732],[22.79705,54.36264],[22.83756,54.40827],[23.00584,54.38514],[22.99649,54.35927],[23.05726,54.34565],[23.04323,54.31567],[23.104,54.29794],[23.13905,54.31567],[23.15526,54.31076],[23.15938,54.29894],[23.24656,54.25701],[23.3494,54.25155],[23.39525,54.21672],[23.42418,54.17911],[23.45223,54.17775],[23.49196,54.14764],[23.52702,54.04622],[23.48261,53.98855],[23.51284,53.95052],[23.61677,53.92691],[23.71726,53.93379],[23.80543,53.89558],[23.81309,53.94205],[23.95098,53.9613],[23.98837,53.92554],[24.19638,53.96405],[24.34128,53.90076],[24.44411,53.90076],[24.62275,54.00217],[24.69652,54.01901],[24.69185,53.96543],[24.74279,53.96663],[24.85311,54.02862],[24.77131,54.11091],[24.96894,54.17589],[24.991,54.14241],[25.0728,54.13419],[25.19199,54.219],[25.22705,54.26271],[25.35559,54.26544],[25.509,54.30267],[25.56823,54.25212],[25.51452,54.17799],[25.54724,54.14925],[25.64875,54.1259],[25.71084,54.16704],[25.78563,54.15747],[25.78553,54.23327],[25.68513,54.31727],[25.55425,54.31591],[25.5376,54.33158],[25.63371,54.42075],[25.62203,54.4656],[25.64813,54.48704],[25.68045,54.5321],[25.75977,54.57252],[25.74122,54.80108],[25.89462,54.93438],[25.99129,54.95705],[26.05907,54.94631],[26.13386,54.98924],[26.20397,54.99729],[26.26941,55.08032],[26.23202,55.10439],[26.30628,55.12536],[26.35121,55.1525],[26.46249,55.12814],[26.51481,55.16051],[26.54753,55.14181],[26.69243,55.16718],[26.68075,55.19787],[26.72983,55.21788],[26.73017,55.24226],[26.835,55.28182],[26.83266,55.30444],[26.80929,55.31642],[26.6714,55.33902],[26.5709,55.32572],[26.44937,55.34832],[26.5522,55.40277],[26.55094,55.5093],[26.63167,55.57887],[26.63231,55.67968],[26.58248,55.6754],[26.46661,55.70375],[26.39561,55.71156],[26.18509,55.86813],[26.03815,55.95884],[25.90047,56.0013],[25.85893,56.00188],[25.81773,56.05444],[25.69246,56.08892],[25.68588,56.14725],[25.53621,56.16663],[25.39751,56.15707],[25.23099,56.19147],[25.09325,56.1878],[25.05762,56.26742],[24.89005,56.46666]]]]}},{type:"Feature",properties:{iso1A2:"LU",iso1A3:"LUX",iso1N3:"442",wikidata:"Q32",nameEn:"Luxembourg",groups:["EU","155","150"],callingCodes:["352"]},geometry:{type:"MultiPolygon",coordinates:[[[[6.1379,50.12964],[6.1137,50.13668],[6.12028,50.16374],[6.08577,50.17246],[6.06406,50.15344],[6.03093,50.16362],[6.02488,50.18283],[5.96453,50.17259],[5.95929,50.13295],[5.89488,50.11476],[5.8857,50.07824],[5.85474,50.06342],[5.86904,50.04614],[5.8551,50.02683],[5.81866,50.01286],[5.82331,49.99662],[5.83968,49.9892],[5.83467,49.97823],[5.81163,49.97142],[5.80833,49.96451],[5.77291,49.96056],[5.77314,49.93646],[5.73621,49.89796],[5.78415,49.87922],[5.75269,49.8711],[5.75861,49.85631],[5.74567,49.85368],[5.75884,49.84811],[5.74953,49.84709],[5.74975,49.83933],[5.74076,49.83823],[5.7404,49.83452],[5.74844,49.82435],[5.74364,49.82058],[5.74953,49.81428],[5.75409,49.79239],[5.78871,49.7962],[5.82245,49.75048],[5.83149,49.74729],[5.82562,49.72395],[5.84193,49.72161],[5.86503,49.72739],[5.88677,49.70951],[5.86527,49.69291],[5.86175,49.67862],[5.9069,49.66377],[5.90164,49.6511],[5.90599,49.63853],[5.88552,49.63507],[5.88393,49.62802],[5.87609,49.62047],[5.8762,49.60898],[5.84826,49.5969],[5.84971,49.58674],[5.86986,49.58756],[5.87256,49.57539],[5.8424,49.56082],[5.84692,49.55663],[5.84143,49.5533],[5.81838,49.54777],[5.80871,49.5425],[5.81664,49.53775],[5.83648,49.5425],[5.84466,49.53027],[5.83467,49.52717],[5.83389,49.52152],[5.86571,49.50015],[5.94128,49.50034],[5.94224,49.49608],[5.96876,49.49053],[5.97693,49.45513],[6.02648,49.45451],[6.02743,49.44845],[6.04176,49.44801],[6.05553,49.46663],[6.07887,49.46399],[6.08373,49.45594],[6.10072,49.45268],[6.09845,49.46351],[6.10325,49.4707],[6.12346,49.4735],[6.12814,49.49365],[6.14321,49.48796],[6.16115,49.49297],[6.15366,49.50226],[6.17386,49.50934],[6.19543,49.50536],[6.2409,49.51408],[6.25029,49.50609],[6.27875,49.503],[6.28818,49.48465],[6.3687,49.4593],[6.36778,49.46937],[6.36907,49.48931],[6.36788,49.50377],[6.35666,49.52931],[6.38072,49.55171],[6.38228,49.55855],[6.35825,49.57053],[6.36676,49.57813],[6.38024,49.57593],[6.38342,49.5799],[6.37464,49.58886],[6.385,49.59946],[6.39822,49.60081],[6.41861,49.61723],[6.4413,49.65722],[6.43768,49.66021],[6.42726,49.66078],[6.42937,49.66857],[6.44654,49.67799],[6.46048,49.69092],[6.48014,49.69767],[6.49785,49.71118],[6.50647,49.71353],[6.5042,49.71808],[6.49694,49.72205],[6.49535,49.72645],[6.50261,49.72718],[6.51397,49.72058],[6.51805,49.72425],[6.50193,49.73291],[6.50174,49.75292],[6.51646,49.75961],[6.51828,49.76855],[6.51056,49.77515],[6.51669,49.78336],[6.50534,49.78952],[6.52169,49.79787],[6.53122,49.80666],[6.52121,49.81338],[6.51215,49.80124],[6.50647,49.80916],[6.48718,49.81267],[6.47111,49.82263],[6.45425,49.81164],[6.44131,49.81443],[6.42905,49.81091],[6.42521,49.81591],[6.40022,49.82029],[6.36576,49.85032],[6.34267,49.84974],[6.33585,49.83785],[6.32098,49.83728],[6.32303,49.85133],[6.30963,49.87021],[6.29692,49.86685],[6.28874,49.87592],[6.26146,49.88203],[6.23496,49.89972],[6.22926,49.92096],[6.21882,49.92403],[6.22608,49.929],[6.22094,49.94955],[6.19856,49.95053],[6.19089,49.96991],[6.18045,49.96611],[6.18554,49.95622],[6.17872,49.9537],[6.16466,49.97086],[6.1701,49.98518],[6.14147,49.99563],[6.14948,50.00908],[6.13806,50.01056],[6.1295,50.01849],[6.13273,50.02019],[6.13794,50.01466],[6.14666,50.02207],[6.13044,50.02929],[6.13458,50.04141],[6.11274,50.05916],[6.12055,50.09171],[6.1379,50.12964]]]]}},{type:"Feature",properties:{iso1A2:"LV",iso1A3:"LVA",iso1N3:"428",wikidata:"Q211",nameEn:"Latvia",groups:["EU","154","150"],callingCodes:["371"]},geometry:{type:"MultiPolygon",coordinates:[[[[27.34698,57.52242],[26.90364,57.62823],[26.54675,57.51813],[26.46527,57.56885],[26.29253,57.59244],[26.1866,57.6849],[26.2029,57.7206],[26.08098,57.76619],[26.0543,57.76105],[26.03332,57.7718],[26.02415,57.76865],[26.02069,57.77169],[26.0266,57.77441],[26.027,57.78158],[26.02456,57.78342],[26.0324,57.79037],[26.05949,57.84744],[25.73499,57.90193],[25.29581,58.08288],[25.28237,57.98539],[25.19484,58.0831],[24.3579,57.87471],[24.26221,57.91787],[23.20055,57.56697],[22.80496,57.87798],[19.84909,57.57876],[19.64795,57.06466],[20.68447,56.04073],[21.15016,56.07818],[21.24644,56.16917],[21.49736,56.29106],[21.57888,56.31406],[21.74558,56.33181],[22.00548,56.41508],[22.09728,56.42851],[22.3361,56.4016],[22.56441,56.39305],[22.69354,56.36284],[22.83048,56.367],[22.96988,56.41213],[23.09531,56.30511],[23.17312,56.36795],[23.31606,56.3827],[23.40486,56.37689],[23.49803,56.34307],[23.75726,56.37282],[24.02657,56.3231],[24.13139,56.24881],[24.32334,56.30226],[24.42746,56.26522],[24.58143,56.29125],[24.57353,56.31525],[24.70022,56.40483],[24.83686,56.41565],[24.89005,56.46666],[25.05762,56.26742],[25.09325,56.1878],[25.23099,56.19147],[25.39751,56.15707],[25.53621,56.16663],[25.68588,56.14725],[25.69246,56.08892],[25.81773,56.05444],[25.85893,56.00188],[25.90047,56.0013],[26.03815,55.95884],[26.18509,55.86813],[26.39561,55.71156],[26.46661,55.70375],[26.58248,55.6754],[26.63231,55.67968],[26.64888,55.70515],[26.71802,55.70645],[26.76872,55.67658],[26.87448,55.7172],[26.97153,55.8102],[27.1559,55.85032],[27.27804,55.78299],[27.3541,55.8089],[27.61683,55.78558],[27.63065,55.89687],[27.97865,56.11849],[28.15217,56.16964],[28.23716,56.27588],[28.16599,56.37806],[28.19057,56.44637],[28.10069,56.524],[28.13526,56.57989],[28.04768,56.59004],[27.86101,56.88204],[27.66511,56.83921],[27.86101,57.29402],[27.52453,57.42826],[27.56832,57.53728],[27.34698,57.52242]]]]}},{type:"Feature",properties:{iso1A2:"LY",iso1A3:"LBY",iso1N3:"434",wikidata:"Q1016",nameEn:"Libya",groups:["015","002"],callingCodes:["218"]},geometry:{type:"MultiPolygon",coordinates:[[[[22.5213,33.45682],[11.66543,33.34642],[11.56255,33.16754],[11.55852,33.1409],[11.51549,33.09826],[11.46037,32.6307],[11.57828,32.48013],[11.53898,32.4138],[11.04234,32.2145],[10.7315,31.97235],[10.62788,31.96629],[10.48497,31.72956],[10.31364,31.72648],[10.12239,31.42098],[10.29516,30.90337],[9.88152,30.34074],[9.76848,30.34366],[9.55544,30.23971],[9.3876,30.16738],[9.78136,29.40961],[9.89569,26.57696],[9.51696,26.39148],[9.38834,26.19288],[10.03146,25.35635],[10.02432,24.98124],[10.33159,24.5465],[10.85323,24.5595],[11.41061,24.21456],[11.62498,24.26669],[11.96886,23.51735],[13.5631,23.16574],[14.22918,22.61719],[14.99751,23.00539],[15.99566,23.49639],[23.99539,19.49944],[23.99715,20.00038],[24.99794,19.99661],[24.99885,21.99535],[24.99968,29.24574],[24.71117,30.17441],[25.01077,30.73861],[24.83101,31.31921],[25.06041,31.57937],[25.14001,31.67534],[25.63787,31.9359],[22.5213,33.45682]]]]}},{type:"Feature",properties:{iso1A2:"MA",iso1A3:"MAR",iso1N3:"504",wikidata:"Q1028",nameEn:"Morocco",groups:["015","002"],callingCodes:["212"]},geometry:{type:"MultiPolygon",coordinates:[[[[-2.27707,35.35051],[-2.85819,35.63219],[-5.10878,36.05227],[-5.64962,35.93752],[-7.27694,35.93599],[-14.43883,27.02969],[-17.27295,21.93519],[-17.21511,21.34226],[-17.02707,21.34022],[-16.9978,21.36239],[-16.44269,21.39745],[-14.78487,21.36587],[-14.47329,21.63839],[-14.48112,22.00886],[-14.1291,22.41636],[-14.10361,22.75501],[-13.75627,23.77231],[-13.00628,24.01923],[-12.92147,24.39502],[-12.12281,25.13682],[-12.06001,26.04442],[-11.62052,26.05229],[-11.38635,26.611],[-11.23622,26.72023],[-11.35695,26.8505],[-10.68417,26.90984],[-9.81998,26.71379],[-9.56957,26.90042],[-9.08698,26.98639],[-8.71787,26.9898],[-8.77527,27.66663],[-8.66879,27.6666],[-8.6715,28.71194],[-7.61585,29.36252],[-6.95824,29.50924],[-6.78351,29.44634],[-6.69965,29.51623],[-5.75616,29.61407],[-5.72121,29.52322],[-5.58831,29.48103],[-5.21671,29.95253],[-4.6058,30.28343],[-4.31774,30.53229],[-3.64735,30.67539],[-3.65418,30.85566],[-3.54944,31.0503],[-3.77103,31.14984],[-3.77647,31.31912],[-3.66386,31.39202],[-3.66314,31.6339],[-2.82784,31.79459],[-2.93873,32.06557],[-2.46166,32.16603],[-1.22829,32.07832],[-1.15735,32.12096],[-1.24453,32.1917],[-1.24998,32.32993],[-.9912,32.52467],[-1.37794,32.73628],[-1.54244,32.95499],[-1.46249,33.0499],[-1.67067,33.27084],[-1.59508,33.59929],[-1.73494,33.71721],[-1.64666,34.10405],[-1.78042,34.39018],[-1.69788,34.48056],[-1.84569,34.61907],[-1.73707,34.74226],[-1.97469,34.886],[-1.97833,34.93218],[-2.04734,34.93218],[-2.21445,35.04378],[-2.21248,35.08532],[-2.27707,35.35051]],[[-2.92224,35.3401],[-2.92181,35.28599],[-2.92674,35.27313],[-2.93893,35.26737],[-2.95065,35.26576],[-2.95431,35.2728],[-2.96516,35.27967],[-2.96826,35.28296],[-2.96507,35.28801],[-2.97035,35.28852],[-2.96978,35.29459],[-2.96648,35.30475],[-2.96038,35.31609],[-2.92224,35.3401]],[[-3.90602,35.21494],[-3.90288,35.22024],[-3.88617,35.21406],[-3.88926,35.20841],[-3.90602,35.21494]],[[-4.30191,35.17419],[-4.29436,35.17149],[-4.30112,35.17058],[-4.30191,35.17419]],[[-2.41312,35.17111],[-2.44887,35.17075],[-2.44896,35.18777],[-2.41265,35.1877],[-2.41312,35.17111]],[[-5.38491,35.92591],[-5.27635,35.91222],[-5.27056,35.88794],[-5.34379,35.8711],[-5.35844,35.87375],[-5.37338,35.88417],[-5.38491,35.92591]]]]}},{type:"Feature",properties:{iso1A2:"MC",iso1A3:"MCO",iso1N3:"492",wikidata:"Q235",nameEn:"Monaco",groups:["155","150"],callingCodes:["377"]},geometry:{type:"MultiPolygon",coordinates:[[[[7.47823,43.73341],[7.4379,43.74963],[7.4389,43.75151],[7.43708,43.75197],[7.43624,43.75014],[7.43013,43.74895],[7.42809,43.74396],[7.42443,43.74087],[7.42299,43.74176],[7.42062,43.73977],[7.41233,43.73439],[7.41298,43.73311],[7.41291,43.73168],[7.41113,43.73156],[7.40903,43.7296],[7.42422,43.72209],[7.47823,43.73341]]]]}},{type:"Feature",properties:{iso1A2:"MD",iso1A3:"MDA",iso1N3:"498",wikidata:"Q217",nameEn:"Moldova",groups:["151","150"],callingCodes:["373"]},geometry:{type:"MultiPolygon",coordinates:[[[[27.74422,48.45926],[27.6658,48.44034],[27.59027,48.46311],[27.5889,48.49224],[27.46942,48.454],[27.44333,48.41209],[27.37741,48.41026],[27.37604,48.44398],[27.32159,48.4434],[27.27855,48.37534],[27.13434,48.37288],[27.08078,48.43214],[27.0231,48.42485],[27.03821,48.37653],[26.93384,48.36558],[26.85556,48.41095],[26.71274,48.40388],[26.82809,48.31629],[26.79239,48.29071],[26.6839,48.35828],[26.62823,48.25804],[26.81161,48.25049],[26.87708,48.19919],[26.94265,48.1969],[26.98042,48.15752],[26.96119,48.13003],[27.04118,48.12522],[27.02985,48.09083],[27.15622,47.98538],[27.1618,47.92391],[27.29069,47.73722],[27.25519,47.71366],[27.32202,47.64009],[27.3979,47.59473],[27.47942,47.48113],[27.55731,47.46637],[27.60263,47.32507],[27.68706,47.28962],[27.73172,47.29248],[27.81892,47.1381],[28.09095,46.97621],[28.12173,46.82283],[28.24808,46.64305],[28.22281,46.50481],[28.25769,46.43334],[28.18902,46.35283],[28.19864,46.31869],[28.10937,46.22852],[28.13684,46.18099],[28.08612,46.01105],[28.13111,45.92819],[28.16568,45.6421],[28.08927,45.6051],[28.18741,45.47358],[28.21139,45.46895],[28.30201,45.54744],[28.41836,45.51715],[28.43072,45.48538],[28.51449,45.49982],[28.49252,45.56716],[28.54196,45.58062],[28.51587,45.6613],[28.47879,45.66994],[28.52823,45.73803],[28.70401,45.78019],[28.69852,45.81753],[28.78503,45.83475],[28.74383,45.96664],[28.98004,46.00385],[29.00613,46.04962],[28.94643,46.09176],[29.06656,46.19716],[28.94953,46.25852],[28.98478,46.31803],[29.004,46.31495],[28.9306,46.45699],[29.01241,46.46177],[29.02409,46.49582],[29.23547,46.55435],[29.24886,46.37912],[29.35357,46.49505],[29.49914,46.45889],[29.5939,46.35472],[29.6763,46.36041],[29.66359,46.4215],[29.74496,46.45605],[29.88329,46.35851],[29.94114,46.40114],[30.09103,46.38694],[30.16794,46.40967],[30.02511,46.45132],[29.88916,46.54302],[29.94409,46.56002],[29.9743,46.75325],[29.94522,46.80055],[29.98814,46.82358],[29.87405,46.88199],[29.75458,46.8604],[29.72986,46.92234],[29.57056,46.94766],[29.62137,47.05069],[29.61038,47.09932],[29.53044,47.07851],[29.49732,47.12878],[29.57696,47.13581],[29.54996,47.24962],[29.59665,47.25521],[29.5733,47.36508],[29.48678,47.36043],[29.47854,47.30366],[29.39889,47.30179],[29.3261,47.44664],[29.18603,47.43387],[29.11743,47.55001],[29.22414,47.60012],[29.22242,47.73607],[29.27255,47.79953],[29.20663,47.80367],[29.27804,47.88893],[29.19839,47.89261],[29.1723,47.99013],[28.9306,47.96255],[28.8414,48.03392],[28.85232,48.12506],[28.69896,48.13106],[28.53921,48.17453],[28.48428,48.0737],[28.42454,48.12047],[28.43701,48.15832],[28.38712,48.17567],[28.34009,48.13147],[28.30609,48.14018],[28.30586,48.1597],[28.34912,48.1787],[28.36996,48.20543],[28.35519,48.24957],[28.32508,48.23384],[28.2856,48.23202],[28.19314,48.20749],[28.17666,48.25963],[28.07504,48.23494],[28.09873,48.3124],[28.04527,48.32661],[27.95883,48.32368],[27.88391,48.36699],[27.87533,48.4037],[27.81902,48.41874],[27.79225,48.44244],[27.74422,48.45926]]]]}},{type:"Feature",properties:{iso1A2:"ME",iso1A3:"MNE",iso1N3:"499",wikidata:"Q236",nameEn:"Montenegro",groups:["039","150"],callingCodes:["382"]},geometry:{type:"MultiPolygon",coordinates:[[[[19.22807,43.5264],[19.15685,43.53943],[19.13933,43.5282],[19.04934,43.50384],[19.01078,43.55806],[18.91379,43.50299],[18.95469,43.49367],[18.96053,43.45042],[19.01078,43.43854],[19.04071,43.397],[19.08673,43.31453],[19.08206,43.29668],[19.04233,43.30008],[19.00844,43.24988],[18.95001,43.29327],[18.95819,43.32899],[18.90911,43.36383],[18.83912,43.34795],[18.84794,43.33735],[18.85342,43.32426],[18.76538,43.29838],[18.6976,43.25243],[18.71747,43.2286],[18.66605,43.2056],[18.64735,43.14766],[18.66254,43.03928],[18.52232,43.01451],[18.49076,42.95553],[18.49661,42.89306],[18.4935,42.86433],[18.47633,42.85829],[18.45921,42.81682],[18.47324,42.74992],[18.56789,42.72074],[18.55221,42.69045],[18.54603,42.69171],[18.54841,42.68328],[18.57373,42.64429],[18.52232,42.62279],[18.55504,42.58409],[18.53751,42.57376],[18.49778,42.58409],[18.43735,42.55921],[18.44307,42.51077],[18.43588,42.48556],[18.52152,42.42302],[18.54128,42.39171],[18.45131,42.21682],[19.26406,41.74971],[19.37597,41.84849],[19.37451,41.8842],[19.33812,41.90669],[19.34601,41.95675],[19.37691,41.96977],[19.36867,42.02564],[19.37548,42.06835],[19.40687,42.10024],[19.28623,42.17745],[19.42,42.33019],[19.42352,42.36546],[19.4836,42.40831],[19.65972,42.62774],[19.73244,42.66299],[19.77375,42.58517],[19.74731,42.57422],[19.76549,42.50237],[19.82333,42.46581],[19.9324,42.51699],[20.00842,42.5109],[20.01834,42.54622],[20.07761,42.55582],[20.0969,42.65559],[20.02915,42.71147],[20.02088,42.74789],[20.04898,42.77701],[20.2539,42.76245],[20.27869,42.81945],[20.35692,42.8335],[20.34528,42.90676],[20.16415,42.97177],[20.14896,42.99058],[20.12325,42.96237],[20.05431,42.99571],[20.04729,43.02732],[19.98887,43.0538],[19.96549,43.11098],[19.92576,43.08539],[19.79255,43.11951],[19.76918,43.16044],[19.64063,43.19027],[19.62661,43.2286],[19.54598,43.25158],[19.52962,43.31623],[19.48171,43.32644],[19.44315,43.38846],[19.22229,43.47926],[19.22807,43.5264]]]]}},{type:"Feature",properties:{iso1A2:"MF",iso1A3:"MAF",iso1N3:"663",wikidata:"Q126125",nameEn:"Saint-Martin",country:"FR",groups:["EU","029","003","419","019"],callingCodes:["590"]},geometry:{type:"MultiPolygon",coordinates:[[[[-62.93924,18.02904],[-62.75637,18.13489],[-62.86666,18.19278],[-63.35989,18.06012],[-63.33064,17.9615],[-63.13584,18.0541],[-63.11096,18.05368],[-63.09686,18.04608],[-63.07759,18.04943],[-63.0579,18.06614],[-63.04039,18.05619],[-63.02323,18.05757],[-62.93924,18.02904]]]]}},{type:"Feature",properties:{iso1A2:"MG",iso1A3:"MDG",iso1N3:"450",wikidata:"Q1019",nameEn:"Madagascar",aliases:["RM"],groups:["014","202","002"],callingCodes:["261"]},geometry:{type:"MultiPolygon",coordinates:[[[[51.94557,-12.74579],[49.10033,-10.96054],[43.72277,-16.09877],[40.40841,-23.17181],[45.90777,-29.77366],[51.94557,-12.74579]]]]}},{type:"Feature",properties:{iso1A2:"MH",iso1A3:"MHL",iso1N3:"584",wikidata:"Q709",nameEn:"Marshall Islands",groups:["057","009"],roadSpeedUnit:"mph",callingCodes:["692"]},geometry:{type:"MultiPolygon",coordinates:[[[[169,3.9],[173.53711,5.70687],[169.29099,15.77133],[159.04653,10.59067],[169,3.9]]]]}},{type:"Feature",properties:{iso1A2:"MK",iso1A3:"MKD",iso1N3:"807",wikidata:"Q221",nameEn:"North Macedonia",groups:["039","150"],callingCodes:["389"]},geometry:{type:"MultiPolygon",coordinates:[[[[22.34773,42.31725],[22.29275,42.34913],[22.29605,42.37477],[22.16384,42.32103],[22.02908,42.29848],[21.94405,42.34669],[21.91595,42.30392],[21.84654,42.3247],[21.77176,42.2648],[21.70111,42.23789],[21.58992,42.25915],[21.52145,42.24465],[21.50823,42.27156],[21.43882,42.2789],[21.43882,42.23609],[21.38428,42.24465],[21.30496,42.1418],[21.29913,42.13954],[21.31983,42.10993],[21.22728,42.08909],[21.16614,42.19815],[21.11491,42.20794],[20.75464,42.05229],[20.76786,41.91839],[20.68523,41.85318],[20.59524,41.8818],[20.55976,41.87068],[20.57144,41.7897],[20.53405,41.78099],[20.51301,41.72433],[20.52937,41.69292],[20.51769,41.65975],[20.55508,41.58113],[20.52103,41.56473],[20.45809,41.5549],[20.45331,41.51436],[20.49039,41.49277],[20.51301,41.442],[20.55976,41.4087],[20.52119,41.34381],[20.49432,41.33679],[20.51068,41.2323],[20.59715,41.13644],[20.58546,41.11179],[20.59832,41.09066],[20.63454,41.0889],[20.65558,41.08009],[20.71634,40.91781],[20.73504,40.9081],[20.81567,40.89662],[20.83671,40.92752],[20.94305,40.92399],[20.97693,40.90103],[20.97887,40.85475],[21.15262,40.85546],[21.21105,40.8855],[21.25779,40.86165],[21.35595,40.87578],[21.41555,40.9173],[21.53007,40.90759],[21.57448,40.86076],[21.69601,40.9429],[21.7556,40.92525],[21.91102,41.04786],[21.90869,41.09191],[22.06527,41.15617],[22.1424,41.12449],[22.17629,41.15969],[22.26744,41.16409],[22.42285,41.11921],[22.5549,41.13065],[22.58295,41.11568],[22.62852,41.14385],[22.65306,41.18168],[22.71266,41.13945],[22.74538,41.16321],[22.76408,41.32225],[22.81199,41.3398],[22.93334,41.34104],[22.96331,41.35782],[22.95513,41.63265],[23.03342,41.71034],[23.01239,41.76527],[22.96682,41.77137],[22.90254,41.87587],[22.86749,42.02275],[22.67701,42.06614],[22.51224,42.15457],[22.50289,42.19527],[22.47251,42.20393],[22.38136,42.30339],[22.34773,42.31725]]]]}},{type:"Feature",properties:{iso1A2:"ML",iso1A3:"MLI",iso1N3:"466",wikidata:"Q912",nameEn:"Mali",groups:["011","202","002"],callingCodes:["223"]},geometry:{type:"MultiPolygon",coordinates:[[[[-4.83423,24.99935],[-6.57191,25.0002],[-5.60725,16.49919],[-5.33435,16.33354],[-5.50165,15.50061],[-9.32979,15.50032],[-9.31106,15.69412],[-9.33314,15.7044],[-9.44673,15.60553],[-9.40447,15.4396],[-10.71721,15.4223],[-10.90932,15.11001],[-11.43483,15.62339],[-11.70705,15.51558],[-11.94903,14.76143],[-12.23936,14.76324],[-11.93043,13.84505],[-12.06897,13.71049],[-11.83345,13.33333],[-11.63025,13.39174],[-11.39935,12.97808],[-11.37536,12.40788],[-11.50006,12.17826],[-11.24136,12.01286],[-10.99758,12.24634],[-10.80355,12.1053],[-10.71897,11.91552],[-10.30604,12.24634],[-9.714,12.0226],[-9.63938,12.18312],[-9.32097,12.29009],[-9.38067,12.48446],[-9.13689,12.50875],[-8.94784,12.34842],[-8.80854,11.66715],[-8.40058,11.37466],[-8.66923,10.99397],[-8.35083,11.06234],[-8.2667,10.91762],[-8.32614,10.69273],[-8.22711,10.41722],[-8.10207,10.44649],[-7.9578,10.2703],[-7.97971,10.17117],[-7.92107,10.15577],[-7.63048,10.46334],[-7.54462,10.40921],[-7.52261,10.4655],[-7.44555,10.44602],[-7.3707,10.24677],[-7.13331,10.24877],[-7.0603,10.14711],[-7.00966,10.15794],[-6.97444,10.21644],[-7.01186,10.25111],[-6.93921,10.35291],[-6.68164,10.35074],[-6.63541,10.66893],[-6.52974,10.59104],[-6.42847,10.5694],[-6.40646,10.69922],[-6.325,10.68624],[-6.24795,10.74248],[-6.1731,10.46983],[-6.18851,10.24244],[-5.99478,10.19694],[-5.78124,10.43952],[-5.65135,10.46767],[-5.51058,10.43177],[-5.46643,10.56074],[-5.47083,10.75329],[-5.41579,10.84628],[-5.49284,11.07538],[-5.32994,11.13371],[-5.32553,11.21578],[-5.25949,11.24816],[-5.25509,11.36905],[-5.20665,11.43811],[-5.22867,11.60421],[-5.29251,11.61715],[-5.26389,11.75728],[-5.40258,11.8327],[-5.26389,11.84778],[-5.07897,11.97918],[-4.72893,12.01579],[-4.70692,12.06746],[-4.62987,12.06531],[-4.62546,12.13204],[-4.54841,12.1385],[-4.57703,12.19875],[-4.41412,12.31922],[-4.47356,12.71252],[-4.238,12.71467],[-4.21819,12.95722],[-4.34477,13.12927],[-3.96501,13.49778],[-3.90558,13.44375],[-3.96282,13.38164],[-3.7911,13.36665],[-3.54454,13.1781],[-3.4313,13.1588],[-3.43507,13.27272],[-3.23599,13.29035],[-3.28396,13.5422],[-3.26407,13.70699],[-2.88189,13.64921],[-2.90831,13.81174],[-2.84667,14.05532],[-2.66175,14.14713],[-2.47587,14.29671],[-2.10223,14.14878],[-1.9992,14.19011],[-1.97945,14.47709],[-1.68083,14.50023],[-1.32166,14.72774],[-1.05875,14.7921],[-.72004,15.08655],[-.24673,15.07805],[.06588,14.96961],[.23859,15.00135],[.72632,14.95898],[.96711,14.98275],[1.31275,15.27978],[3.01806,15.34571],[3.03134,15.42221],[3.50368,15.35934],[4.19893,16.39923],[4.21787,17.00118],[4.26762,17.00432],[4.26651,19.14224],[3.36082,18.9745],[3.12501,19.1366],[3.24648,19.81703],[1.20992,20.73533],[1.15698,21.12843],[-4.83423,24.99935]]]]}},{type:"Feature",properties:{iso1A2:"MM",iso1A3:"MMR",iso1N3:"104",wikidata:"Q836",nameEn:"Myanmar",aliases:["Burma","BU"],groups:["035","142"],callingCodes:["95"]},geometry:{type:"MultiPolygon",coordinates:[[[[92.62187,21.87037],[92.59775,21.6092],[92.68152,21.28454],[92.60187,21.24615],[92.55105,21.3856],[92.43158,21.37025],[92.37939,21.47764],[92.20087,21.337],[92.17752,21.17445],[92.26071,21.05697],[92.37665,20.72172],[92.28464,20.63179],[92.31348,20.57137],[92.4302,20.5688],[92.39837,20.38919],[92.61042,13.76986],[94.6371,13.81803],[97.63455,9.60854],[98.12555,9.44056],[98.33094,9.91973],[98.47298,9.95782],[98.52291,9.92389],[98.55174,9.92804],[98.7391,10.31488],[98.81944,10.52761],[98.77275,10.62548],[98.78511,10.68351],[98.86819,10.78336],[99.0069,10.85485],[98.99701,10.92962],[99.02337,10.97217],[99.06938,10.94857],[99.32756,11.28545],[99.31573,11.32081],[99.39485,11.3925],[99.47598,11.62434],[99.5672,11.62732],[99.64108,11.78948],[99.64891,11.82699],[99.53424,12.02317],[99.56445,12.14805],[99.47519,12.1353],[99.409,12.60603],[99.29254,12.68921],[99.18905,12.84799],[99.18748,12.9898],[99.10646,13.05804],[99.12225,13.19847],[99.20617,13.20575],[99.16695,13.72621],[98.97356,14.04868],[98.56762,14.37701],[98.24874,14.83013],[98.18821,15.13125],[98.22,15.21327],[98.30446,15.30667],[98.40522,15.25268],[98.41906,15.27103],[98.39351,15.34177],[98.4866,15.39154],[98.56027,15.33471],[98.58598,15.46821],[98.541,15.65406],[98.59853,15.87197],[98.57019,16.04578],[98.69585,16.13353],[98.8376,16.11706],[98.92656,16.36425],[98.84485,16.42354],[98.68074,16.27068],[98.63817,16.47424],[98.57912,16.55983],[98.5695,16.62826],[98.51113,16.64503],[98.51833,16.676],[98.51472,16.68521],[98.51579,16.69433],[98.51043,16.70107],[98.49713,16.69022],[98.50253,16.7139],[98.46994,16.73613],[98.53833,16.81934],[98.49603,16.8446],[98.52624,16.89979],[98.39441,17.06266],[98.34566,17.04822],[98.10439,17.33847],[98.11185,17.36829],[97.91829,17.54504],[97.76407,17.71595],[97.66794,17.88005],[97.73723,17.97912],[97.60841,18.23846],[97.64116,18.29778],[97.56219,18.33885],[97.50383,18.26844],[97.34522,18.54596],[97.36444,18.57138],[97.5258,18.4939],[97.76752,18.58097],[97.73836,18.88478],[97.66487,18.9371],[97.73654,18.9812],[97.73797,19.04261],[97.83479,19.09972],[97.84024,19.22217],[97.78606,19.26769],[97.84186,19.29526],[97.78769,19.39429],[97.88423,19.5041],[97.84715,19.55782],[98.04364,19.65755],[98.03314,19.80941],[98.13829,19.78541],[98.24884,19.67876],[98.51182,19.71303],[98.56065,19.67807],[98.83661,19.80931],[98.98679,19.7419],[99.0735,20.10298],[99.20328,20.12877],[99.416,20.08614],[99.52943,20.14811],[99.5569,20.20676],[99.46077,20.36198],[99.46008,20.39673],[99.68255,20.32077],[99.81096,20.33687],[99.86383,20.44371],[99.88211,20.44488],[99.88451,20.44596],[99.89168,20.44548],[99.89301,20.44311],[99.89692,20.44789],[99.90499,20.4487],[99.91616,20.44986],[99.95721,20.46301],[100.08404,20.36626],[100.1957,20.68247],[100.36375,20.82783],[100.51079,20.82194],[100.60112,20.8347],[100.64628,20.88279],[100.50974,20.88574],[100.55281,21.02796],[100.63578,21.05639],[100.72716,21.31786],[100.80173,21.2934],[101.00234,21.39612],[101.16198,21.52808],[101.15156,21.56129],[101.11744,21.77659],[100.87265,21.67396],[100.72143,21.51898],[100.57861,21.45637],[100.4811,21.46148],[100.42892,21.54325],[100.35201,21.53176],[100.25863,21.47043],[100.18447,21.51898],[100.1625,21.48704],[100.12542,21.50365],[100.10757,21.59945],[100.17486,21.65306],[100.12679,21.70539],[100.04956,21.66843],[99.98654,21.71064],[99.94003,21.82782],[99.99084,21.97053],[99.96612,22.05965],[99.85351,22.04183],[99.47585,22.13345],[99.33166,22.09656],[99.1552,22.15874],[99.19176,22.16983],[99.17318,22.18025],[99.28771,22.4105],[99.37972,22.50188],[99.38247,22.57544],[99.31243,22.73893],[99.45654,22.85726],[99.43537,22.94086],[99.54218,22.90014],[99.52214,23.08218],[99.34127,23.13099],[99.25741,23.09025],[99.04601,23.12215],[99.05975,23.16382],[98.88597,23.18656],[98.92515,23.29535],[98.93958,23.31414],[98.87573,23.33038],[98.92104,23.36946],[98.87683,23.48995],[98.82877,23.47908],[98.80294,23.5345],[98.88396,23.59555],[98.81775,23.694],[98.82933,23.72921],[98.79607,23.77947],[98.68209,23.80492],[98.67797,23.9644],[98.89632,24.10612],[98.87998,24.15624],[98.85319,24.13042],[98.59256,24.08371],[98.54476,24.13119],[98.20666,24.11406],[98.07806,24.07988],[98.06703,24.08028],[98.0607,24.07812],[98.05671,24.07961],[98.05302,24.07408],[98.04709,24.07616],[97.99583,24.04932],[97.98691,24.03897],[97.93951,24.01953],[97.90998,24.02094],[97.88616,24.00463],[97.88414,23.99405],[97.88814,23.98605],[97.89683,23.98389],[97.89676,23.97931],[97.8955,23.97758],[97.88811,23.97446],[97.86545,23.97723],[97.84328,23.97603],[97.79416,23.95663],[97.79456,23.94836],[97.72302,23.89288],[97.64667,23.84574],[97.5247,23.94032],[97.62363,24.00506],[97.72903,24.12606],[97.75305,24.16902],[97.72799,24.18883],[97.72998,24.2302],[97.76799,24.26365],[97.71941,24.29652],[97.66723,24.30027],[97.65624,24.33781],[97.7098,24.35658],[97.66998,24.45288],[97.60029,24.4401],[97.52757,24.43748],[97.56286,24.54535],[97.56525,24.72838],[97.54675,24.74202],[97.5542,24.74943],[97.56383,24.75535],[97.56648,24.76475],[97.64354,24.79171],[97.70181,24.84557],[97.73127,24.83015],[97.76481,24.8289],[97.79949,24.85655],[97.72903,24.91332],[97.72216,25.08508],[97.77023,25.11492],[97.83614,25.2715],[97.92541,25.20815],[98.14925,25.41547],[98.12591,25.50722],[98.18084,25.56298],[98.16848,25.62739],[98.25774,25.6051],[98.31268,25.55307],[98.40606,25.61129],[98.54064,25.85129],[98.63128,25.79937],[98.70818,25.86241],[98.60763,26.01512],[98.57085,26.11547],[98.63128,26.15492],[98.66884,26.09165],[98.7329,26.17218],[98.67797,26.24487],[98.72741,26.36183],[98.77547,26.61994],[98.7333,26.85615],[98.69582,27.56499],[98.43353,27.67086],[98.42529,27.55404],[98.32641,27.51385],[98.13964,27.9478],[98.15337,28.12114],[97.90069,28.3776],[97.79632,28.33168],[97.70705,28.5056],[97.56835,28.55628],[97.50518,28.49716],[97.47085,28.2688],[97.41729,28.29783],[97.34547,28.21385],[97.31292,28.06784],[97.35412,28.06663],[97.38845,28.01329],[97.35824,27.87256],[97.29919,27.92233],[96.90112,27.62149],[96.91431,27.45752],[97.17422,27.14052],[97.14675,27.09041],[96.89132,27.17474],[96.85287,27.2065],[96.88445,27.25046],[96.73888,27.36638],[96.55761,27.29928],[96.40779,27.29818],[96.15591,27.24572],[96.04949,27.19428],[95.93002,27.04149],[95.81603,27.01335],[95.437,26.7083],[95.30339,26.65372],[95.23513,26.68499],[95.05798,26.45408],[95.12801,26.38397],[95.11428,26.1019],[95.18556,26.07338],[94.80117,25.49359],[94.68032,25.47003],[94.57458,25.20318],[94.74212,25.13606],[94.73937,25.00545],[94.60204,24.70889],[94.5526,24.70764],[94.50729,24.59281],[94.45279,24.56656],[94.32362,24.27692],[94.30215,24.23752],[94.14081,23.83333],[93.92089,23.95812],[93.80279,23.92549],[93.75952,24.0003],[93.62871,24.00922],[93.50616,23.94432],[93.46633,23.97067],[93.41415,24.07854],[93.34735,24.10151],[93.32351,24.04468],[93.36059,23.93176],[93.3908,23.92925],[93.3908,23.7622],[93.43475,23.68299],[93.38805,23.4728],[93.39981,23.38828],[93.38781,23.36139],[93.36862,23.35426],[93.38478,23.13698],[93.2878,23.00464],[93.12988,23.05772],[93.134,22.92498],[93.09417,22.69459],[93.134,22.59573],[93.11477,22.54374],[93.13537,22.45873],[93.18206,22.43716],[93.19991,22.25425],[93.14224,22.24535],[93.15734,22.18687],[93.04885,22.20595],[92.99255,22.05965],[92.99804,21.98964],[92.93899,22.02656],[92.89504,21.95143],[92.86208,22.05456],[92.70416,22.16017],[92.67532,22.03547],[92.60949,21.97638],[92.62187,21.87037]]]]}},{type:"Feature",properties:{iso1A2:"MN",iso1A3:"MNG",iso1N3:"496",wikidata:"Q711",nameEn:"Mongolia",groups:["030","142"],callingCodes:["976"]},geometry:{type:"MultiPolygon",coordinates:[[[[102.14032,51.35566],[101.5044,51.50467],[101.39085,51.45753],[100.61116,51.73028],[99.89203,51.74903],[99.75578,51.90108],[99.27888,51.96876],[98.87768,52.14563],[98.74142,51.8637],[98.33222,51.71832],[98.22053,51.46579],[98.05257,51.46696],[97.83305,51.00248],[98.01472,50.86652],[97.9693,50.78044],[98.06393,50.61262],[98.31373,50.4996],[98.29481,50.33561],[97.85197,49.91339],[97.76871,49.99861],[97.56432,49.92801],[97.56811,49.84265],[97.24639,49.74737],[96.97388,49.88413],[95.80056,50.04239],[95.74757,49.97915],[95.02465,49.96941],[94.97166,50.04725],[94.6121,50.04239],[94.49477,50.17832],[94.39258,50.22193],[94.30823,50.57498],[92.99595,50.63183],[93.01109,50.79001],[92.44714,50.78762],[92.07173,50.69585],[91.86048,50.73734],[89.59711,49.90851],[89.70687,49.72535],[88.82499,49.44808],[88.42449,49.48821],[88.17223,49.46934],[88.15543,49.30314],[87.98977,49.18147],[87.81333,49.17354],[87.88171,48.95853],[87.73822,48.89582],[88.0788,48.71436],[87.96361,48.58478],[88.58939,48.34531],[88.58316,48.21893],[88.8011,48.11302],[88.93186,48.10263],[89.0711,47.98528],[89.55453,48.0423],[89.76624,47.82745],[90.06512,47.88177],[90.10871,47.7375],[90.33598,47.68303],[90.48854,47.41826],[90.48542,47.30438],[90.76108,46.99399],[90.84035,46.99525],[91.03649,46.72916],[91.0147,46.58171],[91.07696,46.57315],[90.89639,46.30711],[90.99672,46.14207],[91.03026,46.04194],[90.70907,45.73437],[90.65114,45.49314],[90.89169,45.19667],[91.64048,45.07408],[93.51161,44.95964],[94.10003,44.71016],[94.71959,44.35284],[95.01191,44.25274],[95.39772,44.2805],[95.32891,44.02407],[95.52594,43.99353],[95.89543,43.2528],[96.35658,42.90363],[96.37926,42.72055],[97.1777,42.7964],[99.50671,42.56535],[100.33297,42.68231],[100.84979,42.67087],[101.28833,42.58524],[101.80515,42.50074],[102.07645,42.22519],[102.42826,42.15137],[102.72403,42.14675],[103.3685,41.89696],[103.92804,41.78246],[104.52258,41.8706],[104.51667,41.66113],[104.91272,41.64619],[105.01119,41.58382],[105.24708,41.7442],[106.76517,42.28741],[107.24774,42.36107],[107.29755,42.41395],[107.49681,42.46221],[107.57258,42.40898],[108.23156,42.45532],[108.84489,42.40246],[109.00679,42.45302],[109.452,42.44842],[109.89402,42.63111],[110.08401,42.6411],[110.4327,42.78293],[111.0149,43.3289],[111.59087,43.51207],[111.79758,43.6637],[111.93776,43.68709],[111.96289,43.81596],[111.40498,44.3461],[111.76275,44.98032],[111.98695,45.09074],[112.4164,45.06858],[112.74662,44.86297],[113.63821,44.74326],[113.909,44.91444],[114.08071,44.92847],[114.5166,45.27189],[114.54801,45.38337],[114.74612,45.43585],[114.94546,45.37377],[115.35757,45.39106],[115.69688,45.45761],[115.91898,45.6227],[116.16989,45.68603],[116.27366,45.78637],[116.24012,45.8778],[116.26678,45.96479],[116.58612,46.30211],[116.75551,46.33083],[116.83166,46.38637],[117.07252,46.35818],[117.36609,46.36335],[117.41782,46.57862],[117.60748,46.59771],[117.69554,46.50991],[118.30534,46.73519],[118.78747,46.68689],[118.8337,46.77742],[118.89974,46.77139],[118.92616,46.72765],[119.00541,46.74273],[119.10448,46.65516],[119.24978,46.64761],[119.30261,46.6083],[119.37306,46.61132],[119.42827,46.63783],[119.65265,46.62342],[119.68127,46.59015],[119.77373,46.62947],[119.80455,46.67631],[119.89261,46.66423],[119.91242,46.90091],[119.85518,46.92196],[119.71209,47.19192],[119.62403,47.24575],[119.56019,47.24874],[119.54918,47.29505],[119.31964,47.42617],[119.35892,47.48104],[119.13995,47.53997],[119.12343,47.66458],[118.7564,47.76947],[118.55766,47.99277],[118.29654,48.00246],[118.22677,48.03853],[118.11009,48.04],[118.03676,48.00982],[117.80196,48.01661],[117.50181,47.77216],[117.37875,47.63627],[117.08918,47.82242],[116.87527,47.88836],[116.67405,47.89039],[116.4465,47.83662],[116.2527,47.87766],[116.08431,47.80693],[115.94296,47.67741],[115.57128,47.91988],[115.52082,48.15367],[115.811,48.25699],[115.78876,48.51781],[116.06565,48.81716],[116.03781,48.87014],[116.71193,49.83813],[116.62502,49.92919],[116.22402,50.04477],[115.73602,49.87688],[115.26068,49.97367],[114.9703,50.19254],[114.325,50.28098],[113.20216,49.83356],[113.02647,49.60772],[110.64493,49.1816],[110.39891,49.25083],[110.24373,49.16676],[109.51325,49.22859],[109.18017,49.34709],[108.53969,49.32325],[108.27937,49.53167],[107.95387,49.66659],[107.96116,49.93191],[107.36407,49.97612],[107.1174,50.04239],[107.00007,50.1977],[106.80326,50.30177],[106.58373,50.34044],[106.51122,50.34408],[106.49628,50.32436],[106.47156,50.31909],[106.07865,50.33474],[106.05562,50.40582],[105.32528,50.4648],[103.70343,50.13952],[102.71178,50.38873],[102.32194,50.67982],[102.14032,51.35566]]]]}},{type:"Feature",properties:{iso1A2:"MO",iso1A3:"MAC",iso1N3:"446",wikidata:"Q14773",nameEn:"Macau",aliases:["Macao"],country:"CN",groups:["030","142"],driveSide:"left",callingCodes:["853"]},geometry:{type:"MultiPolygon",coordinates:[[[[113.54942,22.14519],[113.54839,22.10909],[113.57191,22.07696],[113.63011,22.10782],[113.60504,22.20464],[113.57123,22.20416],[113.56865,22.20973],[113.5508,22.21672],[113.54333,22.21688],[113.54093,22.21314],[113.53593,22.2137],[113.53301,22.21235],[113.53552,22.20607],[113.52659,22.18271],[113.54093,22.15497],[113.54942,22.14519]]]]}},{type:"Feature",properties:{iso1A2:"MP",iso1A3:"MNP",iso1N3:"580",wikidata:"Q16644",nameEn:"Northern Mariana Islands",country:"US",groups:["057","009"],roadSpeedUnit:"mph",callingCodes:["1 670"]},geometry:{type:"MultiPolygon",coordinates:[[[[143.82485,13.92273],[146.25931,13.85876],[146.6755,21.00809],[144.18594,21.03576],[143.82485,13.92273]]]]}},{type:"Feature",properties:{iso1A2:"MQ",iso1A3:"MTQ",iso1N3:"474",wikidata:"Q17054",nameEn:"Martinique",country:"FR",groups:["EU","029","003","419","019"],callingCodes:["596"]},geometry:{type:"MultiPolygon",coordinates:[[[[-60.5958,14.23076],[-60.69955,15.22234],[-61.51867,14.96709],[-61.26561,14.25664],[-60.5958,14.23076]]]]}},{type:"Feature",properties:{iso1A2:"MR",iso1A3:"MRT",iso1N3:"478",wikidata:"Q1025",nameEn:"Mauritania",groups:["011","202","002"],callingCodes:["222"]},geometry:{type:"MultiPolygon",coordinates:[[[[-5.60725,16.49919],[-6.57191,25.0002],[-4.83423,24.99935],[-8.66674,27.31569],[-8.66721,25.99918],[-12.0002,25.9986],[-12.00251,23.4538],[-12.14969,23.41935],[-12.36213,23.3187],[-12.5741,23.28975],[-13.00412,23.02297],[-13.10753,22.89493],[-13.15313,22.75649],[-13.08438,22.53866],[-13.01525,21.33343],[-16.95474,21.33997],[-16.99806,21.12142],[-17.0357,21.05368],[-17.0396,20.9961],[-17.06781,20.92697],[-17.0695,20.85742],[-17.0471,20.76408],[-17.15288,16.07139],[-16.50854,16.09032],[-16.48967,16.0496],[-16.44814,16.09753],[-16.4429,16.20605],[-16.27016,16.51565],[-15.6509,16.50315],[-15.00557,16.64997],[-14.32144,16.61495],[-13.80075,16.13961],[-13.43135,16.09022],[-13.11029,15.52116],[-12.23936,14.76324],[-11.94903,14.76143],[-11.70705,15.51558],[-11.43483,15.62339],[-10.90932,15.11001],[-10.71721,15.4223],[-9.40447,15.4396],[-9.44673,15.60553],[-9.33314,15.7044],[-9.31106,15.69412],[-9.32979,15.50032],[-5.50165,15.50061],[-5.33435,16.33354],[-5.60725,16.49919]]]]}},{type:"Feature",properties:{iso1A2:"MS",iso1A3:"MSR",iso1N3:"500",wikidata:"Q13353",nameEn:"Montserrat",country:"GB",groups:["029","003","419","019"],driveSide:"left",callingCodes:["1 664"]},geometry:{type:"MultiPolygon",coordinates:[[[[-61.83929,16.66647],[-62.14123,17.02632],[-62.52079,16.69392],[-62.17275,16.35721],[-61.83929,16.66647]]]]}},{type:"Feature",properties:{iso1A2:"MT",iso1A3:"MLT",iso1N3:"470",wikidata:"Q233",nameEn:"Malta",groups:["EU","039","150"],driveSide:"left",callingCodes:["356"]},geometry:{type:"MultiPolygon",coordinates:[[[[15.70991,35.79901],[14.07544,36.41525],[13.27636,35.20764],[15.70991,35.79901]]]]}},{type:"Feature",properties:{iso1A2:"MU",iso1A3:"MUS",iso1N3:"480",wikidata:"Q1027",nameEn:"Mauritius",groups:["014","202","002"],driveSide:"left",callingCodes:["230"]},geometry:{type:"MultiPolygon",coordinates:[[[[56.73473,-21.9174],[64.11105,-21.5783],[63.47388,-9.1938],[56.09755,-9.55401],[56.73473,-21.9174]]]]}},{type:"Feature",properties:{iso1A2:"MV",iso1A3:"MDV",iso1N3:"462",wikidata:"Q826",nameEn:"Maldives",groups:["034","142"],driveSide:"left",callingCodes:["960"]},geometry:{type:"MultiPolygon",coordinates:[[[[71.27292,7.36038],[73.37814,-3.88401],[74.6203,7.39289],[71.27292,7.36038]]]]}},{type:"Feature",properties:{iso1A2:"MW",iso1A3:"MWI",iso1N3:"454",wikidata:"Q1020",nameEn:"Malawi",groups:["014","202","002"],driveSide:"left",callingCodes:["265"]},geometry:{type:"MultiPolygon",coordinates:[[[[33.48052,-9.62442],[33.31581,-9.48554],[33.14925,-9.49322],[32.99397,-9.36712],[32.95389,-9.40138],[33.00476,-9.5133],[33.00256,-9.63053],[33.05485,-9.61316],[33.10163,-9.66525],[33.12144,-9.58929],[33.2095,-9.61099],[33.31517,-9.82364],[33.36581,-9.81063],[33.37902,-9.9104],[33.31297,-10.05133],[33.53863,-10.20148],[33.54797,-10.36077],[33.70675,-10.56896],[33.47636,-10.78465],[33.28022,-10.84428],[33.25998,-10.88862],[33.39697,-11.15296],[33.29267,-11.3789],[33.29267,-11.43536],[33.23663,-11.40637],[33.24252,-11.59302],[33.32692,-11.59248],[33.33937,-11.91252],[33.25998,-12.14242],[33.3705,-12.34931],[33.47636,-12.32498],[33.54485,-12.35996],[33.37517,-12.54085],[33.28177,-12.54692],[33.18837,-12.61377],[33.05917,-12.59554],[32.94397,-12.76868],[32.96733,-12.88251],[33.02181,-12.88707],[32.98289,-13.12671],[33.0078,-13.19492],[32.86113,-13.47292],[32.84176,-13.52794],[32.73683,-13.57682],[32.68436,-13.55769],[32.66468,-13.60019],[32.68654,-13.64268],[32.7828,-13.64805],[32.84528,-13.71576],[32.76962,-13.77224],[32.79015,-13.80755],[32.88985,-13.82956],[32.99042,-13.95689],[33.02977,-14.05022],[33.07568,-13.98447],[33.16749,-13.93992],[33.24249,-14.00019],[33.66677,-14.61306],[33.7247,-14.4989],[33.88503,-14.51652],[33.92898,-14.47929],[34.08588,-14.48893],[34.18733,-14.43823],[34.22355,-14.43607],[34.34453,-14.3985],[34.35843,-14.38652],[34.39277,-14.39467],[34.4192,-14.43191],[34.44641,-14.47746],[34.45053,-14.49873],[34.47628,-14.53363],[34.48932,-14.53646],[34.49636,-14.55091],[34.52366,-14.5667],[34.53962,-14.59776],[34.55112,-14.64494],[34.53516,-14.67782],[34.52057,-14.68263],[34.54503,-14.74672],[34.567,-14.77345],[34.61522,-14.99583],[34.57503,-15.30619],[34.43126,-15.44778],[34.44981,-15.60864],[34.25195,-15.90321],[34.43126,-16.04737],[34.40344,-16.20923],[35.04805,-16.83167],[35.13771,-16.81687],[35.17017,-16.93521],[35.04805,-17.00027],[35.0923,-17.13235],[35.3062,-17.1244],[35.27065,-16.93817],[35.30929,-16.82871],[35.27219,-16.69402],[35.14235,-16.56812],[35.25828,-16.4792],[35.30157,-16.2211],[35.43355,-16.11371],[35.52365,-16.15414],[35.70107,-16.10147],[35.80487,-16.03907],[35.85303,-15.41913],[35.78799,-15.17428],[35.91812,-14.89514],[35.87212,-14.89478],[35.86945,-14.67481],[35.5299,-14.27714],[35.47989,-14.15594],[34.86229,-13.48958],[34.60253,-13.48487],[34.37831,-12.17408],[34.46088,-12.0174],[34.70739,-12.15652],[34.82903,-12.04837],[34.57917,-11.87849],[34.64241,-11.57499],[34.96296,-11.57354],[34.91153,-11.39799],[34.79375,-11.32245],[34.63305,-11.11731],[34.61161,-11.01611],[34.67047,-10.93796],[34.65946,-10.6828],[34.57581,-10.56271],[34.51911,-10.12279],[34.54499,-10.0678],[34.03865,-9.49398],[33.95829,-9.54066],[33.9638,-9.62206],[33.93298,-9.71647],[33.76677,-9.58516],[33.48052,-9.62442]]]]}},{type:"Feature",properties:{iso1A2:"MX",iso1A3:"MEX",iso1N3:"484",wikidata:"Q96",nameEn:"Mexico",groups:["013","003","419","019"],callingCodes:["52"]},geometry:{type:"MultiPolygon",coordinates:[[[[-117.1243,32.53427],[-118.48109,32.5991],[-120.12904,18.41089],[-92.37213,14.39277],[-92.2261,14.53423],[-92.1454,14.6804],[-92.18161,14.84147],[-92.1423,14.88647],[-92.1454,14.98143],[-92.0621,15.07406],[-92.20983,15.26077],[-91.73182,16.07371],[-90.44567,16.07573],[-90.40499,16.40524],[-90.61212,16.49832],[-90.69064,16.70697],[-91.04436,16.92175],[-91.43809,17.25373],[-90.99199,17.25192],[-90.98678,17.81655],[-89.14985,17.81563],[-89.15105,17.95104],[-89.03839,18.0067],[-88.8716,17.89535],[-88.71505,18.0707],[-88.48242,18.49164],[-88.3268,18.49048],[-88.29909,18.47591],[-88.26593,18.47617],[-88.03238,18.41778],[-88.03165,18.16657],[-87.90671,18.15213],[-87.87604,18.18313],[-87.86657,18.19971],[-87.85693,18.18266],[-87.84815,18.18511],[-86.92368,17.61462],[-85.9092,21.8218],[-96.92418,25.97377],[-97.13927,25.96583],[-97.35946,25.92189],[-97.37332,25.83854],[-97.42511,25.83969],[-97.45669,25.86874],[-97.49828,25.89877],[-97.52025,25.88518],[-97.66511,26.01708],[-97.95155,26.0625],[-97.97017,26.05232],[-98.24603,26.07191],[-98.27075,26.09457],[-98.30491,26.10475],[-98.35126,26.15129],[-99.00546,26.3925],[-99.03053,26.41249],[-99.08477,26.39849],[-99.53573,27.30926],[-99.49744,27.43746],[-99.482,27.47128],[-99.48045,27.49016],[-99.50208,27.50021],[-99.52955,27.49747],[-99.51478,27.55836],[-99.55409,27.61314],[-100.50029,28.66117],[-100.51222,28.70679],[-100.5075,28.74066],[-100.52313,28.75598],[-100.59809,28.88197],[-100.63689,28.90812],[-100.67294,29.09744],[-100.79696,29.24688],[-100.87982,29.296],[-100.94056,29.33371],[-100.94579,29.34523],[-100.96725,29.3477],[-101.01128,29.36947],[-101.05686,29.44738],[-101.47277,29.7744],[-102.60596,29.8192],[-103.15787,28.93865],[-104.37752,29.54255],[-104.39363,29.55396],[-104.3969,29.57105],[-104.5171,29.64671],[-104.77674,30.4236],[-106.00363,31.39181],[-106.09025,31.40569],[-106.20346,31.46305],[-106.23711,31.51262],[-106.24612,31.54193],[-106.28084,31.56173],[-106.30305,31.62154],[-106.33419,31.66303],[-106.34864,31.69663],[-106.3718,31.71165],[-106.38003,31.73151],[-106.41773,31.75196],[-106.43419,31.75478],[-106.45244,31.76523],[-106.46726,31.75998],[-106.47298,31.75054],[-106.48815,31.74769],[-106.50111,31.75714],[-106.50962,31.76155],[-106.51251,31.76922],[-106.52266,31.77509],[-106.529,31.784],[-108.20899,31.78534],[-108.20979,31.33316],[-109.05235,31.3333],[-111.07523,31.33232],[-112.34553,31.7357],[-114.82011,32.49609],[-114.79524,32.55731],[-114.81141,32.55543],[-114.80584,32.62028],[-114.76736,32.64094],[-114.71871,32.71894],[-115.88053,32.63624],[-117.1243,32.53427]]]]}},{type:"Feature",properties:{iso1A2:"MY",iso1A3:"MYS",iso1N3:"458",wikidata:"Q833",nameEn:"Malaysia",groups:["035","142"],driveSide:"left",callingCodes:["60"]},geometry:{type:"MultiPolygon",coordinates:[[[[114.08532,4.64632],[109.55486,8.10026],[104.81582,8.03101],[102.46318,7.22462],[102.09086,6.23546],[102.08127,6.22679],[102.07732,6.193],[102.09182,6.14161],[102.01835,6.05407],[101.99209,6.04075],[101.97114,6.01992],[101.9714,6.00575],[101.94712,5.98421],[101.92819,5.85511],[101.91776,5.84269],[101.89188,5.8386],[101.80144,5.74505],[101.75074,5.79091],[101.69773,5.75881],[101.58019,5.93534],[101.25524,5.78633],[101.25755,5.71065],[101.14062,5.61613],[100.98815,5.79464],[101.02708,5.91013],[101.087,5.9193],[101.12388,6.11411],[101.06165,6.14161],[101.12618,6.19431],[101.10313,6.25617],[100.85884,6.24929],[100.81045,6.45086],[100.74822,6.46231],[100.74361,6.50811],[100.66986,6.45086],[100.43027,6.52389],[100.42351,6.51762],[100.41791,6.5189],[100.41152,6.52299],[100.35413,6.54932],[100.31929,6.65413],[100.32607,6.65933],[100.32671,6.66526],[100.31884,6.66423],[100.31618,6.66781],[100.30828,6.66462],[100.29651,6.68439],[100.19511,6.72559],[100.12,6.42105],[100.0756,6.4045],[99.91873,6.50233],[99.50117,6.44501],[99.31854,5.99868],[99.75778,3.86466],[103.03657,1.30383],[103.56591,1.19719],[103.62738,1.35255],[103.67468,1.43166],[103.7219,1.46108],[103.74161,1.4502],[103.76395,1.45183],[103.81181,1.47953],[103.86383,1.46288],[103.89565,1.42841],[103.93384,1.42926],[104.00131,1.42405],[104.02277,1.4438],[104.04622,1.44691],[104.07348,1.43322],[104.08871,1.42015],[104.09162,1.39694],[104.08072,1.35998],[104.12282,1.27714],[104.34728,1.33529],[104.56723,1.44271],[105.01437,3.24936],[108.10426,5.42408],[109.71058,2.32059],[109.64506,2.08014],[109.62558,1.99182],[109.53794,1.91771],[109.57923,1.80624],[109.66397,1.79972],[109.66397,1.60425],[110.35354,.98869],[110.49182,.88088],[110.62374,.873],[111.22979,1.08326],[111.55434,.97864],[111.82846,.99349],[111.94553,1.12016],[112.15679,1.17004],[112.2127,1.44135],[112.48648,1.56516],[113.021,1.57819],[113.01448,1.42832],[113.64677,1.23933],[114.03788,1.44787],[114.57892,1.5],[114.80706,1.92351],[114.80706,2.21665],[115.1721,2.49671],[115.11343,2.82879],[115.53713,3.14776],[115.58276,3.93499],[115.90217,4.37708],[117.25801,4.35108],[117.47313,4.18857],[117.67641,4.16535],[117.89538,4.16637],[118.07935,4.15511],[118.8663,4.44172],[118.75416,4.59798],[119.44841,5.09568],[119.34756,5.53889],[117.89159,6.25755],[117.43832,7.3895],[117.17735,7.52841],[116.79524,7.43869],[115.02521,5.35005],[115.16236,5.01011],[115.15092,4.87604],[115.20737,4.8256],[115.27819,4.63661],[115.2851,4.42295],[115.36346,4.33563],[115.31275,4.30806],[115.09978,4.39123],[115.07737,4.53418],[115.04064,4.63706],[115.02278,4.74137],[115.02955,4.82087],[115.05038,4.90275],[114.99417,4.88201],[114.96982,4.81146],[114.88841,4.81905],[114.8266,4.75062],[114.77303,4.72871],[114.83189,4.42387],[114.88039,4.4257],[114.78539,4.12205],[114.64211,4.00694],[114.49922,4.13108],[114.4416,4.27588],[114.32176,4.2552],[114.32176,4.34942],[114.26876,4.49878],[114.15813,4.57],[114.07448,4.58441],[114.08532,4.64632]]]]}},{type:"Feature",properties:{iso1A2:"MZ",iso1A3:"MOZ",iso1N3:"508",wikidata:"Q1029",nameEn:"Mozambique",groups:["014","202","002"],driveSide:"left",callingCodes:["258"]},geometry:{type:"MultiPolygon",coordinates:[[[[40.74206,-10.25691],[40.44265,-10.4618],[40.00295,-10.80255],[39.58249,-10.96043],[39.24395,-11.17433],[38.88996,-11.16978],[38.47258,-11.4199],[38.21598,-11.27289],[37.93618,-11.26228],[37.8388,-11.3123],[37.76614,-11.53352],[37.3936,-11.68949],[36.80309,-11.56836],[36.62068,-11.72884],[36.19094,-11.70008],[36.19094,-11.57593],[35.82767,-11.41081],[35.63599,-11.55927],[34.96296,-11.57354],[34.64241,-11.57499],[34.57917,-11.87849],[34.82903,-12.04837],[34.70739,-12.15652],[34.46088,-12.0174],[34.37831,-12.17408],[34.60253,-13.48487],[34.86229,-13.48958],[35.47989,-14.15594],[35.5299,-14.27714],[35.86945,-14.67481],[35.87212,-14.89478],[35.91812,-14.89514],[35.78799,-15.17428],[35.85303,-15.41913],[35.80487,-16.03907],[35.70107,-16.10147],[35.52365,-16.15414],[35.43355,-16.11371],[35.30157,-16.2211],[35.25828,-16.4792],[35.14235,-16.56812],[35.27219,-16.69402],[35.30929,-16.82871],[35.27065,-16.93817],[35.3062,-17.1244],[35.0923,-17.13235],[35.04805,-17.00027],[35.17017,-16.93521],[35.13771,-16.81687],[35.04805,-16.83167],[34.40344,-16.20923],[34.43126,-16.04737],[34.25195,-15.90321],[34.44981,-15.60864],[34.43126,-15.44778],[34.57503,-15.30619],[34.61522,-14.99583],[34.567,-14.77345],[34.54503,-14.74672],[34.52057,-14.68263],[34.53516,-14.67782],[34.55112,-14.64494],[34.53962,-14.59776],[34.52366,-14.5667],[34.49636,-14.55091],[34.48932,-14.53646],[34.47628,-14.53363],[34.45053,-14.49873],[34.44641,-14.47746],[34.4192,-14.43191],[34.39277,-14.39467],[34.35843,-14.38652],[34.34453,-14.3985],[34.22355,-14.43607],[34.18733,-14.43823],[34.08588,-14.48893],[33.92898,-14.47929],[33.88503,-14.51652],[33.7247,-14.4989],[33.66677,-14.61306],[33.24249,-14.00019],[30.22098,-14.99447],[30.41902,-15.62269],[30.42568,-15.9962],[30.91597,-15.99924],[30.97761,-16.05848],[31.13171,-15.98019],[31.30563,-16.01193],[31.42451,-16.15154],[31.67988,-16.19595],[31.90223,-16.34388],[31.91324,-16.41569],[32.02772,-16.43892],[32.28529,-16.43892],[32.42838,-16.4727],[32.71017,-16.59932],[32.69917,-16.66893],[32.78943,-16.70267],[32.97655,-16.70689],[32.91051,-16.89446],[32.84113,-16.92259],[32.96554,-17.11971],[33.00517,-17.30477],[33.0426,-17.3468],[32.96554,-17.48964],[32.98536,-17.55891],[33.0492,-17.60298],[32.94133,-17.99705],[33.03159,-18.35054],[33.02278,-18.4696],[32.88629,-18.51344],[32.88629,-18.58023],[32.95013,-18.69079],[32.9017,-18.7992],[32.82465,-18.77419],[32.70137,-18.84712],[32.73439,-18.92628],[32.69917,-18.94293],[32.72118,-19.02204],[32.84006,-19.0262],[32.87088,-19.09279],[32.85107,-19.29238],[32.77966,-19.36098],[32.78282,-19.47513],[32.84446,-19.48343],[32.84666,-19.68462],[32.95013,-19.67219],[33.06461,-19.77787],[33.01178,-20.02007],[32.93032,-20.03868],[32.85987,-20.16686],[32.85987,-20.27841],[32.66174,-20.56106],[32.55167,-20.56312],[32.48122,-20.63319],[32.51644,-20.91929],[32.37115,-21.133],[32.48236,-21.32873],[32.41234,-21.31246],[31.38336,-22.36919],[31.30611,-22.422],[31.55779,-23.176],[31.56539,-23.47268],[31.67942,-23.60858],[31.70223,-23.72695],[31.77445,-23.90082],[31.87707,-23.95293],[31.90368,-24.18892],[31.9835,-24.29983],[32.03196,-25.10785],[32.01676,-25.38117],[31.97875,-25.46356],[32.00631,-25.65044],[31.92649,-25.84216],[31.974,-25.95387],[32.00916,-25.999],[32.08599,-26.00978],[32.10435,-26.15656],[32.07352,-26.40185],[32.13409,-26.5317],[32.13315,-26.84345],[32.19409,-26.84032],[32.22302,-26.84136],[32.29584,-26.852],[32.35222,-26.86027],[34.51034,-26.91792],[42.99868,-12.65261],[40.74206,-10.25691]]]]}},{type:"Feature",properties:{iso1A2:"NA",iso1A3:"NAM",iso1N3:"516",wikidata:"Q1030",nameEn:"Namibia",groups:["018","202","002"],driveSide:"left",callingCodes:["264"]},geometry:{type:"MultiPolygon",coordinates:[[[[14.28743,-17.38814],[13.95896,-17.43141],[13.36212,-16.98048],[12.97145,-16.98567],[12.52111,-17.24495],[12.07076,-17.15165],[11.75063,-17.25013],[10.5065,-17.25284],[12.51595,-32.27486],[16.45332,-28.63117],[16.46592,-28.57126],[16.59922,-28.53246],[16.90446,-28.057],[17.15405,-28.08573],[17.4579,-28.68718],[18.99885,-28.89165],[19.99882,-28.42622],[19.99817,-24.76768],[19.99912,-21.99991],[20.99751,-22.00026],[20.99904,-18.31743],[21.45556,-18.31795],[23.0996,-18.00075],[23.29618,-17.99855],[23.61088,-18.4881],[24.19416,-18.01919],[24.40577,-17.95726],[24.57485,-18.07151],[24.6303,-17.9863],[24.71887,-17.9218],[24.73364,-17.89338],[24.95586,-17.79674],[25.05895,-17.84452],[25.16882,-17.78253],[25.26433,-17.79571],[25.00198,-17.58221],[24.70864,-17.49501],[24.5621,-17.52963],[24.38712,-17.46818],[24.32811,-17.49082],[24.23619,-17.47489],[23.47474,-17.62877],[21.42741,-18.02787],[21.14283,-17.94318],[18.84226,-17.80375],[18.39229,-17.38927],[14.28743,-17.38814]]]]}},{type:"Feature",properties:{iso1A2:"NC",iso1A3:"NCL",iso1N3:"540",wikidata:"Q33788",nameEn:"New Caledonia",country:"FR",groups:["054","009"],callingCodes:["687"]},geometry:{type:"MultiPolygon",coordinates:[[[[158.65519,-23.4036],[174.90025,-23.53966],[162.93363,-17.28904],[157.83842,-18.82563],[158.65519,-23.4036]]]]}},{type:"Feature",properties:{iso1A2:"NE",iso1A3:"NER",iso1N3:"562",wikidata:"Q1032",nameEn:"Niger",aliases:["RN"],groups:["011","202","002"],callingCodes:["227"]},geometry:{type:"MultiPolygon",coordinates:[[[[14.22918,22.61719],[13.5631,23.16574],[11.96886,23.51735],[7.48273,20.87258],[7.38361,20.79165],[5.8153,19.45101],[4.26651,19.14224],[4.26762,17.00432],[4.21787,17.00118],[4.19893,16.39923],[3.50368,15.35934],[3.03134,15.42221],[3.01806,15.34571],[1.31275,15.27978],[.96711,14.98275],[.72632,14.95898],[.23859,15.00135],[.16936,14.51654],[.38051,14.05575],[.61924,13.68491],[.77377,13.6866],[.77637,13.64442],[.99514,13.5668],[1.02813,13.46635],[1.20088,13.38951],[1.24429,13.39373],[1.28509,13.35488],[1.24516,13.33968],[1.21217,13.37853],[1.18873,13.31771],[.99253,13.37515],[.99167,13.10727],[2.26349,12.41915],[2.05785,12.35539],[2.39723,11.89473],[2.45824,11.98672],[2.39657,12.10952],[2.37783,12.24804],[2.6593,12.30631],[2.83978,12.40585],[3.25352,12.01467],[3.31613,11.88495],[3.48187,11.86092],[3.59375,11.70269],[3.61075,11.69181],[3.67988,11.75429],[3.67122,11.80865],[3.63063,11.83042],[3.61955,11.91847],[3.67775,11.97599],[3.63136,12.11826],[3.66364,12.25884],[3.65111,12.52223],[3.94339,12.74979],[4.10006,12.98862],[4.14367,13.17189],[4.14186,13.47586],[4.23456,13.47725],[4.4668,13.68286],[4.87425,13.78],[4.9368,13.7345],[5.07396,13.75052],[5.21026,13.73627],[5.27797,13.75474],[5.35437,13.83567],[5.52957,13.8845],[6.15771,13.64564],[6.27411,13.67835],[6.43053,13.6006],[6.69617,13.34057],[6.94445,12.99825],[7.0521,13.00076],[7.12676,13.02445],[7.22399,13.1293],[7.39241,13.09717],[7.81085,13.34902],[8.07997,13.30847],[8.25185,13.20369],[8.41853,13.06166],[8.49493,13.07519],[8.60431,13.01768],[8.64251,12.93985],[8.97413,12.83661],[9.65995,12.80614],[10.00373,13.18171],[10.19993,13.27129],[10.46731,13.28819],[10.66004,13.36422],[11.4535,13.37773],[11.88236,13.2527],[12.04209,13.14452],[12.16189,13.10056],[12.19315,13.12423],[12.47095,13.06673],[12.58033,13.27805],[12.6793,13.29157],[12.87376,13.48919],[13.05085,13.53984],[13.19844,13.52802],[13.33213,13.71195],[13.6302,13.71094],[13.47559,14.40881],[13.48259,14.46704],[13.68573,14.55276],[13.67878,14.64013],[13.809,14.72915],[13.78991,14.87519],[13.86301,15.04043],[14.37425,15.72591],[15.50373,16.89649],[15.6032,18.77402],[15.75098,19.93002],[15.99632,20.35364],[15.6721,20.70069],[15.59841,20.74039],[15.56004,20.79488],[15.55382,20.86507],[15.57248,20.92138],[15.62515,20.95395],[15.28332,21.44557],[15.20213,21.49365],[15.19692,21.99339],[14.99751,23.00539],[14.22918,22.61719]]]]}},{type:"Feature",properties:{iso1A2:"NF",iso1A3:"NFK",iso1N3:"574",wikidata:"Q31057",nameEn:"Norfolk Island",country:"AU",groups:["053","009"],driveSide:"left",callingCodes:["672 3"]},geometry:{type:"MultiPolygon",coordinates:[[[[169.82316,-28.16667],[166.29505,-28.29175],[167.94076,-30.60745],[169.82316,-28.16667]]]]}},{type:"Feature",properties:{iso1A2:"NG",iso1A3:"NGA",iso1N3:"566",wikidata:"Q1033",nameEn:"Nigeria",groups:["011","202","002"],callingCodes:["234"]},geometry:{type:"MultiPolygon",coordinates:[[[[6.15771,13.64564],[5.52957,13.8845],[5.35437,13.83567],[5.27797,13.75474],[5.21026,13.73627],[5.07396,13.75052],[4.9368,13.7345],[4.87425,13.78],[4.4668,13.68286],[4.23456,13.47725],[4.14186,13.47586],[4.14367,13.17189],[4.10006,12.98862],[3.94339,12.74979],[3.65111,12.52223],[3.66364,12.25884],[3.63136,12.11826],[3.67775,11.97599],[3.61955,11.91847],[3.63063,11.83042],[3.67122,11.80865],[3.67988,11.75429],[3.61075,11.69181],[3.59375,11.70269],[3.49175,11.29765],[3.71505,11.13015],[3.84243,10.59316],[3.78292,10.40538],[3.6844,10.46351],[3.57275,10.27185],[3.66908,10.18136],[3.54429,9.87739],[3.35383,9.83641],[3.32099,9.78032],[3.34726,9.70696],[3.25093,9.61632],[3.13928,9.47167],[3.14147,9.28375],[3.08017,9.10006],[2.77907,9.06924],[2.67523,7.87825],[2.73095,7.7755],[2.73405,7.5423],[2.78668,7.5116],[2.79442,7.43486],[2.74489,7.42565],[2.76965,7.13543],[2.71702,6.95722],[2.74024,6.92802],[2.73405,6.78508],[2.78823,6.76356],[2.78204,6.70514],[2.7325,6.64057],[2.74334,6.57291],[2.70464,6.50831],[2.70566,6.38038],[2.74181,6.13349],[5.87055,3.78489],[8.34397,4.30689],[8.60302,4.87353],[8.78027,5.1243],[8.92029,5.58403],[8.83687,5.68483],[8.88156,5.78857],[8.84209,5.82562],[9.51757,6.43874],[9.70674,6.51717],[9.77824,6.79088],[9.86314,6.77756],[10.15135,7.03781],[10.21466,6.88996],[10.53639,6.93432],[10.57214,7.16345],[10.59746,7.14719],[10.60789,7.06885],[10.83727,6.9358],[10.8179,6.83377],[10.94302,6.69325],[11.09644,6.68437],[11.09495,6.51717],[11.42041,6.53789],[11.42264,6.5882],[11.51499,6.60892],[11.57755,6.74059],[11.55818,6.86186],[11.63117,6.9905],[11.87396,7.09398],[11.84864,7.26098],[11.93205,7.47812],[12.01844,7.52981],[11.99908,7.67302],[12.20909,7.97553],[12.19271,8.10826],[12.24782,8.17904],[12.26123,8.43696],[12.4489,8.52536],[12.44146,8.6152],[12.68722,8.65938],[12.71701,8.7595],[12.79,8.75361],[12.81085,8.91992],[12.90022,9.11411],[12.91958,9.33905],[12.85628,9.36698],[13.02385,9.49334],[13.22642,9.57266],[13.25472,9.76795],[13.29941,9.8296],[13.25025,9.86042],[13.24132,9.91031],[13.27409,9.93232],[13.286,9.9822],[13.25323,10.00127],[13.25025,10.03647],[13.34111,10.12299],[13.43644,10.13326],[13.5705,10.53183],[13.54964,10.61236],[13.73434,10.9255],[13.70753,10.94451],[13.7403,11.00593],[13.78945,11.00154],[13.97489,11.30258],[14.17821,11.23831],[14.6124,11.51283],[14.64591,11.66166],[14.55207,11.72001],[14.61612,11.7798],[14.6474,12.17466],[14.4843,12.35223],[14.22215,12.36533],[14.17523,12.41916],[14.20204,12.53405],[14.08251,13.0797],[13.6302,13.71094],[13.33213,13.71195],[13.19844,13.52802],[13.05085,13.53984],[12.87376,13.48919],[12.6793,13.29157],[12.58033,13.27805],[12.47095,13.06673],[12.19315,13.12423],[12.16189,13.10056],[12.04209,13.14452],[11.88236,13.2527],[11.4535,13.37773],[10.66004,13.36422],[10.46731,13.28819],[10.19993,13.27129],[10.00373,13.18171],[9.65995,12.80614],[8.97413,12.83661],[8.64251,12.93985],[8.60431,13.01768],[8.49493,13.07519],[8.41853,13.06166],[8.25185,13.20369],[8.07997,13.30847],[7.81085,13.34902],[7.39241,13.09717],[7.22399,13.1293],[7.12676,13.02445],[7.0521,13.00076],[6.94445,12.99825],[6.69617,13.34057],[6.43053,13.6006],[6.27411,13.67835],[6.15771,13.64564]]]]}},{type:"Feature",properties:{iso1A2:"NI",iso1A3:"NIC",iso1N3:"558",wikidata:"Q811",nameEn:"Nicaragua",groups:["013","003","419","019"],callingCodes:["505"]},geometry:{type:"MultiPolygon",coordinates:[[[[-83.13724,15.00002],[-83.49268,15.01158],[-83.62101,14.89448],[-83.89551,14.76697],[-84.10584,14.76353],[-84.48373,14.63249],[-84.70119,14.68078],[-84.82596,14.82212],[-84.90082,14.80489],[-85.1575,14.53934],[-85.18602,14.24929],[-85.32149,14.2562],[-85.45762,14.11304],[-85.73964,13.9698],[-85.75477,13.8499],[-86.03458,13.99181],[-86.00685,14.08474],[-86.14801,14.04317],[-86.35219,13.77157],[-86.76812,13.79605],[-86.71267,13.30348],[-86.87066,13.30641],[-86.93383,13.18677],[-86.93197,13.05313],[-87.03785,12.98682],[-87.06306,13.00892],[-87.37107,12.98646],[-87.55124,13.12523],[-87.7346,13.13228],[-88.11443,12.63306],[-86.14524,11.09059],[-85.71223,11.06868],[-85.60529,11.22607],[-84.92439,10.9497],[-84.68197,11.07568],[-83.90838,10.71161],[-83.66597,10.79916],[-83.68276,11.01562],[-82.56142,11.91792],[-82.06974,14.49418],[-83.04763,15.03256],[-83.13724,15.00002]]]]}},{type:"Feature",properties:{iso1A2:"NL",iso1A3:"NLD",iso1N3:"528",wikidata:"Q55",nameEn:"Netherlands",groups:["EU","155","150"],callingCodes:["31"]},geometry:{type:"MultiPolygon",coordinates:[[[[5.45168,54.20039],[2.56575,51.85301],[3.36263,51.37112],[3.38696,51.33436],[3.35847,51.31572],[3.38289,51.27331],[3.41704,51.25933],[3.43488,51.24135],[3.52698,51.2458],[3.51502,51.28697],[3.58939,51.30064],[3.78999,51.25766],[3.78783,51.2151],[3.90125,51.20371],[3.97889,51.22537],[4.01957,51.24504],[4.05165,51.24171],[4.16721,51.29348],[4.24024,51.35371],[4.21923,51.37443],[4.33265,51.37687],[4.34086,51.35738],[4.39292,51.35547],[4.43777,51.36989],[4.38064,51.41965],[4.39747,51.43316],[4.38122,51.44905],[4.47736,51.4778],[4.5388,51.48184],[4.54675,51.47265],[4.52846,51.45002],[4.53521,51.4243],[4.57489,51.4324],[4.65442,51.42352],[4.72935,51.48424],[4.74578,51.48937],[4.77321,51.50529],[4.78803,51.50284],[4.84139,51.4799],[4.82409,51.44736],[4.82946,51.4213],[4.78314,51.43319],[4.76577,51.43046],[4.77229,51.41337],[4.78941,51.41102],[4.84988,51.41502],[4.90016,51.41404],[4.92152,51.39487],[5.00393,51.44406],[5.0106,51.47167],[5.03281,51.48679],[5.04774,51.47022],[5.07891,51.4715],[5.10456,51.43163],[5.07102,51.39469],[5.13105,51.34791],[5.13377,51.31592],[5.16222,51.31035],[5.2002,51.32243],[5.24244,51.30495],[5.22542,51.26888],[5.23814,51.26064],[5.26461,51.26693],[5.29716,51.26104],[5.33886,51.26314],[5.347,51.27502],[5.41672,51.26248],[5.4407,51.28169],[5.46519,51.2849],[5.48476,51.30053],[5.515,51.29462],[5.5569,51.26544],[5.5603,51.22249],[5.65145,51.19788],[5.65528,51.18736],[5.70344,51.1829],[5.74617,51.18928],[5.77735,51.17845],[5.77697,51.1522],[5.82564,51.16753],[5.85508,51.14445],[5.80798,51.11661],[5.8109,51.10861],[5.83226,51.10585],[5.82921,51.09328],[5.79903,51.09371],[5.79835,51.05834],[5.77258,51.06196],[5.75961,51.03113],[5.77688,51.02483],[5.76242,50.99703],[5.71864,50.96092],[5.72875,50.95428],[5.74752,50.96202],[5.75927,50.95601],[5.74644,50.94723],[5.72545,50.92312],[5.72644,50.91167],[5.71626,50.90796],[5.69858,50.91046],[5.67886,50.88142],[5.64504,50.87107],[5.64009,50.84742],[5.65259,50.82309],[5.70118,50.80764],[5.68995,50.79641],[5.70107,50.7827],[5.68091,50.75804],[5.69469,50.75529],[5.72216,50.76398],[5.73904,50.75674],[5.74356,50.7691],[5.76533,50.78159],[5.77513,50.78308],[5.80673,50.7558],[5.84548,50.76542],[5.84888,50.75448],[5.88734,50.77092],[5.89129,50.75125],[5.89132,50.75124],[5.95942,50.7622],[5.97545,50.75441],[6.01976,50.75398],[6.02624,50.77453],[5.97497,50.79992],[5.98404,50.80988],[6.00462,50.80065],[6.02328,50.81694],[6.01921,50.84435],[6.05623,50.8572],[6.05702,50.85179],[6.07431,50.84674],[6.07693,50.86025],[6.08805,50.87223],[6.07486,50.89307],[6.09297,50.92066],[6.01615,50.93367],[6.02697,50.98303],[5.95282,50.98728],[5.90296,50.97356],[5.90493,51.00198],[5.87849,51.01969],[5.86735,51.05182],[5.9134,51.06736],[5.9541,51.03496],[5.98292,51.07469],[6.16706,51.15677],[6.17384,51.19589],[6.07889,51.17038],[6.07889,51.24432],[6.16977,51.33169],[6.22674,51.36135],[6.22641,51.39948],[6.20654,51.40049],[6.21724,51.48568],[6.18017,51.54096],[6.09055,51.60564],[6.11759,51.65609],[6.02767,51.6742],[6.04091,51.71821],[5.95003,51.7493],[5.98665,51.76944],[5.94568,51.82786],[5.99848,51.83195],[6.06705,51.86136],[6.10337,51.84829],[6.16902,51.84094],[6.11551,51.89769],[6.15349,51.90439],[6.21443,51.86801],[6.29872,51.86801],[6.30593,51.84998],[6.40704,51.82771],[6.38815,51.87257],[6.47179,51.85395],[6.50231,51.86313],[6.58556,51.89386],[6.68386,51.91861],[6.72319,51.89518],[6.82357,51.96711],[6.83035,51.9905],[6.68128,52.05052],[6.76117,52.11895],[6.83984,52.11728],[6.97189,52.20329],[6.9897,52.2271],[7.03729,52.22695],[7.06365,52.23789],[7.02703,52.27941],[7.07044,52.37805],[7.03417,52.40237],[6.99041,52.47235],[6.94293,52.43597],[6.69507,52.488],[6.71641,52.62905],[6.77307,52.65375],[7.04557,52.63318],[7.07253,52.81083],[7.21694,53.00742],[7.17898,53.13817],[7.22681,53.18165],[7.21679,53.20058],[7.19052,53.31866],[7.00198,53.32672],[6.91025,53.44221],[5.45168,54.20039]],[[4.93295,51.44945],[4.95244,51.45207],[4.9524,51.45014],[4.93909,51.44632],[4.93295,51.44945]],[[4.91493,51.4353],[4.91935,51.43634],[4.92227,51.44252],[4.91811,51.44621],[4.92287,51.44741],[4.92811,51.4437],[4.92566,51.44273],[4.92815,51.43856],[4.92879,51.44161],[4.93544,51.44634],[4.94025,51.44193],[4.93416,51.44185],[4.93471,51.43861],[4.94265,51.44003],[4.93986,51.43064],[4.92952,51.42984],[4.92652,51.43329],[4.91493,51.4353]]]]}},{type:"Feature",properties:{iso1A2:"NO",iso1A3:"NOR",iso1N3:"578",wikidata:"Q20",nameEn:"Norway",groups:["154","150"],callingCodes:["47"]},geometry:{type:"MultiPolygon",coordinates:[[[[10.40861,58.38489],[10.64958,58.89391],[11.08911,58.98745],[11.15367,59.07862],[11.34459,59.11672],[11.4601,58.99022],[11.45199,58.89604],[11.65732,58.90177],[11.8213,59.24985],[11.69297,59.59442],[11.92112,59.69531],[11.87121,59.86039],[12.15641,59.8926],[12.36317,59.99259],[12.52003,60.13846],[12.59133,60.50559],[12.2277,61.02442],[12.69115,61.06584],[12.86939,61.35427],[12.57707,61.56547],[12.40595,61.57226],[12.14746,61.7147],[12.29187,62.25699],[12.07085,62.6297],[12.19919,63.00104],[11.98529,63.27487],[12.19919,63.47935],[12.14928,63.59373],[12.74105,64.02171],[13.23411,64.09087],[13.98222,64.00953],[14.16051,64.18725],[14.11117,64.46674],[13.64276,64.58402],[14.50926,65.31786],[14.53778,66.12399],[15.05113,66.15572],[15.49318,66.28509],[15.37197,66.48217],[16.35589,67.06419],[16.39154,67.21653],[16.09922,67.4364],[16.12774,67.52106],[16.38441,67.52923],[16.7409,67.91037],[17.30416,68.11591],[17.90787,67.96537],[18.13836,68.20874],[18.1241,68.53721],[18.39503,68.58672],[18.63032,68.50849],[18.97255,68.52416],[19.93508,68.35911],[20.22027,68.48759],[19.95647,68.55546],[20.22027,68.67246],[20.33435,68.80174],[20.28444,68.93283],[20.0695,69.04469],[20.55258,69.06069],[20.72171,69.11874],[21.05775,69.0356],[21.11099,69.10291],[20.98641,69.18809],[21.00732,69.22755],[21.27827,69.31281],[21.63833,69.27485],[22.27276,68.89514],[22.38367,68.71561],[22.53321,68.74393],[23.13064,68.64684],[23.68017,68.70276],[23.781,68.84514],[24.02299,68.81601],[24.18432,68.73936],[24.74898,68.65143],[24.90023,68.55579],[24.93048,68.61102],[25.10189,68.63307],[25.12206,68.78684],[25.42455,68.90328],[25.61613,68.89602],[25.75729,68.99383],[25.69679,69.27039],[25.96904,69.68397],[26.40261,69.91377],[26.64461,69.96565],[27.05802,69.92069],[27.57226,70.06215],[27.95542,70.0965],[27.97558,69.99671],[28.32849,69.88605],[28.36883,69.81658],[29.12697,69.69193],[29.31664,69.47994],[28.8629,69.22395],[28.81248,69.11997],[28.91738,69.04774],[29.0444,69.0119],[29.26623,69.13794],[29.27631,69.2811],[29.97205,69.41623],[30.16363,69.65244],[30.52662,69.54699],[30.95011,69.54699],[30.84095,69.80584],[31.59909,70.16571],[32.07813,72.01005],[18.46509,71.28681],[-.3751,61.32236],[7.28637,57.35913],[10.40861,58.38489]]]]}},{type:"Feature",properties:{iso1A2:"NP",iso1A3:"NPL",iso1N3:"524",wikidata:"Q837",nameEn:"Nepal",groups:["034","142"],driveSide:"left",callingCodes:["977"]},geometry:{type:"MultiPolygon",coordinates:[[[[88.13378,27.88015],[87.82681,27.95248],[87.72718,27.80938],[87.56996,27.84517],[87.11696,27.84104],[87.03757,27.94835],[86.75582,28.04182],[86.74181,28.10638],[86.56265,28.09569],[86.51609,27.96623],[86.42736,27.91122],[86.22966,27.9786],[86.18607,28.17364],[86.088,28.09264],[86.08333,28.02121],[86.12069,27.93047],[86.06309,27.90021],[85.94946,27.9401],[85.97813,27.99023],[85.90743,28.05144],[85.84672,28.18187],[85.74864,28.23126],[85.71907,28.38064],[85.69105,28.38475],[85.60854,28.25045],[85.59765,28.30529],[85.4233,28.32996],[85.38127,28.28336],[85.10729,28.34092],[85.18668,28.54076],[85.19135,28.62825],[85.06059,28.68562],[84.85511,28.58041],[84.62317,28.73887],[84.47528,28.74023],[84.2231,28.89571],[84.24801,29.02783],[84.18107,29.23451],[83.97559,29.33091],[83.82303,29.30513],[83.63156,29.16249],[83.44787,29.30513],[83.28131,29.56813],[83.07116,29.61957],[82.73024,29.81695],[82.5341,29.9735],[82.38622,30.02608],[82.16984,30.0692],[82.19475,30.16884],[82.10757,30.23745],[82.10135,30.35439],[81.99082,30.33423],[81.62033,30.44703],[81.41018,30.42153],[81.39928,30.21862],[81.33355,30.15303],[81.2623,30.14596],[81.29032,30.08806],[81.24362,30.0126],[81.12842,30.01395],[81.03953,30.20059],[80.93695,30.18229],[80.8778,30.13384],[80.67076,29.95732],[80.60226,29.95732],[80.56957,29.88176],[80.56247,29.86661],[80.48997,29.79566],[80.43458,29.80466],[80.41554,29.79451],[80.36803,29.73865],[80.38428,29.68513],[80.41858,29.63581],[80.37939,29.57098],[80.24322,29.44299],[80.31428,29.30784],[80.28626,29.20327],[80.24112,29.21414],[80.26602,29.13938],[80.23178,29.11626],[80.18085,29.13649],[80.05743,28.91479],[80.06957,28.82763],[80.12125,28.82346],[80.37188,28.63371],[80.44504,28.63098],[80.52443,28.54897],[80.50575,28.6706],[80.55142,28.69182],[80.89648,28.47237],[81.08507,28.38346],[81.19847,28.36284],[81.32923,28.13521],[81.38683,28.17638],[81.48179,28.12148],[81.47867,28.08303],[81.91223,27.84995],[81.97214,27.93322],[82.06554,27.92222],[82.46405,27.6716],[82.70378,27.72122],[82.74119,27.49838],[82.93261,27.50328],[82.94938,27.46036],[83.19413,27.45632],[83.27197,27.38309],[83.2673,27.36235],[83.29999,27.32778],[83.35136,27.33885],[83.38872,27.39276],[83.39495,27.4798],[83.61288,27.47013],[83.85595,27.35797],[83.86182,27.4241],[83.93306,27.44939],[84.02229,27.43836],[84.10791,27.52399],[84.21376,27.45218],[84.25735,27.44941],[84.29315,27.39],[84.62161,27.33885],[84.69166,27.21294],[84.64496,27.04669],[84.793,26.9968],[84.82913,27.01989],[84.85754,26.98984],[84.96687,26.95599],[84.97186,26.9149],[85.00536,26.89523],[85.05592,26.88991],[85.02635,26.85381],[85.15883,26.86966],[85.19291,26.86909],[85.18046,26.80519],[85.21159,26.75933],[85.34302,26.74954],[85.47752,26.79292],[85.56471,26.84133],[85.5757,26.85955],[85.59461,26.85161],[85.61621,26.86721],[85.66239,26.84822],[85.73483,26.79613],[85.72315,26.67471],[85.76907,26.63076],[85.83126,26.61134],[85.85126,26.60866],[85.8492,26.56667],[86.02729,26.66756],[86.13596,26.60651],[86.22513,26.58863],[86.26235,26.61886],[86.31564,26.61925],[86.49726,26.54218],[86.54258,26.53819],[86.57073,26.49825],[86.61313,26.48658],[86.62686,26.46891],[86.69124,26.45169],[86.74025,26.42386],[86.76797,26.45892],[86.82898,26.43919],[86.94543,26.52076],[86.95912,26.52076],[87.01559,26.53228],[87.04691,26.58685],[87.0707,26.58571],[87.09147,26.45039],[87.14751,26.40542],[87.18863,26.40558],[87.24682,26.4143],[87.26587,26.40592],[87.26568,26.37294],[87.34568,26.34787],[87.37314,26.40815],[87.46566,26.44058],[87.51571,26.43106],[87.55274,26.40596],[87.59175,26.38342],[87.66803,26.40294],[87.67893,26.43501],[87.76004,26.40711],[87.7918,26.46737],[87.84193,26.43663],[87.89085,26.48565],[87.90115,26.44923],[88.00895,26.36029],[88.09414,26.43732],[88.09963,26.54195],[88.16452,26.64111],[88.1659,26.68177],[88.19107,26.75516],[88.12302,26.95324],[88.13422,26.98705],[88.11719,26.98758],[87.9887,27.11045],[88.01587,27.21388],[88.01646,27.21612],[88.07277,27.43007],[88.04008,27.49223],[88.19107,27.79285],[88.1973,27.85067],[88.13378,27.88015]]]]}},{type:"Feature",properties:{iso1A2:"NR",iso1A3:"NRU",iso1N3:"520",wikidata:"Q697",nameEn:"Nauru",groups:["057","009"],driveSide:"left",callingCodes:["674"]},geometry:{type:"MultiPolygon",coordinates:[[[[166.95155,.14829],[166.21778,-.7977],[167.60042,-.88259],[166.95155,.14829]]]]}},{type:"Feature",properties:{iso1A2:"NU",iso1A3:"NIU",iso1N3:"570",wikidata:"Q34020",nameEn:"Niue",country:"NZ",groups:["061","009"],driveSide:"left",callingCodes:["683"]},geometry:{type:"MultiPolygon",coordinates:[[[[-173.13438,-14.94228],[-173.11048,-23.23027],[-167.73129,-23.22266],[-167.73854,-14.92809],[-171.14262,-14.93704],[-173.13438,-14.94228]]]]}},{type:"Feature",properties:{iso1A2:"NZ",iso1A3:"NZL",iso1N3:"554",wikidata:"Q664",nameEn:"New Zealand",groups:["053","009"],driveSide:"left",callingCodes:["64"]},geometry:{type:"MultiPolygon",coordinates:[[[[-180,-24.21376],[-179.93224,-45.18423],[-155.99562,-45.16785],[-180,-24.21376]]],[[[161.96603,-56.07661],[179.49541,-50.04657],[179.49541,-36.79303],[169.6687,-29.09191],[161.96603,-56.07661]]]]}},{type:"Feature",properties:{iso1A2:"OM",iso1A3:"OMN",iso1N3:"512",wikidata:"Q842",nameEn:"Oman",groups:["145","142"],callingCodes:["968"]},geometry:{type:"MultiPolygon",coordinates:[[[[56.82555,25.7713],[56.79239,26.41236],[56.68954,26.76645],[56.2644,26.58649],[55.81777,26.18798],[56.08666,26.05038],[56.15498,26.06828],[56.19334,25.9795],[56.13963,25.82765],[56.17416,25.77239],[56.13579,25.73524],[56.14826,25.66351],[56.18363,25.65508],[56.20473,25.61119],[56.25365,25.60211],[56.26636,25.60643],[56.25341,25.61443],[56.26534,25.62825],[56.82555,25.7713]]],[[[56.26062,25.33108],[56.23362,25.31253],[56.25008,25.28843],[56.24465,25.27505],[56.20838,25.25668],[56.20872,25.24104],[56.24341,25.22867],[56.27628,25.23404],[56.34438,25.26653],[56.35172,25.30681],[56.3111,25.30107],[56.3005,25.31815],[56.26062,25.33108]],[[56.28423,25.26344],[56.27086,25.26128],[56.2716,25.27916],[56.28102,25.28486],[56.29379,25.2754],[56.28423,25.26344]]],[[[61.45114,22.55394],[56.86325,25.03856],[56.3227,24.97284],[56.34873,24.93205],[56.30269,24.88334],[56.20568,24.85063],[56.20062,24.78565],[56.13684,24.73699],[56.06128,24.74457],[56.03535,24.81161],[55.97836,24.87673],[55.97467,24.89639],[56.05106,24.87461],[56.05715,24.95727],[55.96316,25.00857],[55.90849,24.96771],[55.85094,24.96858],[55.81116,24.9116],[55.81348,24.80102],[55.83408,24.77858],[55.83271,24.68567],[55.76461,24.5287],[55.83271,24.41521],[55.83395,24.32776],[55.80747,24.31069],[55.79145,24.27914],[55.76781,24.26209],[55.75939,24.26114],[55.75382,24.2466],[55.75257,24.23466],[55.76558,24.23227],[55.77658,24.23476],[55.83367,24.20193],[55.95472,24.2172],[56.01799,24.07426],[55.8308,24.01633],[55.73301,24.05994],[55.48677,23.94946],[55.57358,23.669],[55.22634,23.10378],[55.2137,22.71065],[55.66469,21.99658],[54.99756,20.00083],[52.00311,19.00083],[52.78009,17.35124],[52.74267,17.29519],[52.81185,17.28568],[53.09917,16.67084],[53.32998,16.16312],[56.66759,17.24021],[61.45114,22.55394]]]]}},{type:"Feature",properties:{iso1A2:"PA",iso1A3:"PAN",iso1N3:"591",wikidata:"Q804",nameEn:"Panama",groups:["013","003","419","019"],callingCodes:["507"]},geometry:{type:"MultiPolygon",coordinates:[[[[-77.32389,8.81247],[-77.58292,9.22278],[-78.79327,9.93766],[-82.51044,9.65379],[-82.56507,9.57279],[-82.61345,9.49881],[-82.66667,9.49746],[-82.77206,9.59573],[-82.87919,9.62645],[-82.84871,9.4973],[-82.93516,9.46741],[-82.93516,9.07687],[-82.72126,8.97125],[-82.88253,8.83331],[-82.91377,8.774],[-82.92068,8.74832],[-82.8794,8.6981],[-82.82739,8.60153],[-82.83975,8.54755],[-82.83322,8.52464],[-82.8382,8.48117],[-82.8679,8.44042],[-82.93056,8.43465],[-83.05209,8.33394],[-82.9388,8.26634],[-82.88641,8.10219],[-82.89137,8.05755],[-82.89978,8.04083],[-82.94503,7.93865],[-82.13751,6.97312],[-78.06168,7.07793],[-77.89178,7.22681],[-77.81426,7.48319],[-77.72157,7.47612],[-77.72514,7.72348],[-77.57185,7.51147],[-77.17257,7.97422],[-77.45064,8.49991],[-77.32389,8.81247]]]]}},{type:"Feature",properties:{iso1A2:"PE",iso1A3:"PER",iso1N3:"604",wikidata:"Q419",nameEn:"Peru",groups:["005","419","019"],callingCodes:["51"]},geometry:{type:"MultiPolygon",coordinates:[[[[-74.26675,-.97229],[-74.42701,-.50218],[-75.18513,-.0308],[-75.25764,-.11943],[-75.40192,-.17196],[-75.61997,-.10012],[-75.60169,-.18708],[-75.53615,-.19213],[-75.22862,-.60048],[-75.22862,-.95588],[-75.3872,-.9374],[-75.57429,-1.55961],[-76.05203,-2.12179],[-76.6324,-2.58397],[-77.94147,-3.05454],[-78.19369,-3.36431],[-78.14324,-3.47653],[-78.22642,-3.51113],[-78.24589,-3.39907],[-78.34362,-3.38633],[-78.68394,-4.60754],[-78.85149,-4.66795],[-79.01659,-5.01481],[-79.1162,-4.97774],[-79.26248,-4.95167],[-79.59402,-4.46848],[-79.79722,-4.47558],[-80.13945,-4.29786],[-80.39256,-4.48269],[-80.46386,-4.41516],[-80.32114,-4.21323],[-80.45023,-4.20938],[-80.4822,-4.05477],[-80.46386,-4.01342],[-80.13232,-3.90317],[-80.19926,-3.68894],[-80.18741,-3.63994],[-80.19848,-3.59249],[-80.21642,-3.5888],[-80.20535,-3.51667],[-80.22629,-3.501],[-80.23651,-3.48652],[-80.24586,-3.48677],[-80.24475,-3.47846],[-80.24123,-3.46124],[-80.20647,-3.431],[-80.30602,-3.39149],[-84.52388,-3.36941],[-85.71054,-21.15413],[-70.59118,-18.35072],[-70.378,-18.3495],[-70.31267,-18.31258],[-70.16394,-18.31737],[-69.96732,-18.25992],[-69.81607,-18.12582],[-69.75305,-17.94605],[-69.82868,-17.72048],[-69.79087,-17.65563],[-69.66483,-17.65083],[-69.46897,-17.4988],[-69.46863,-17.37466],[-69.62883,-17.28142],[-69.16896,-16.72233],[-69.00853,-16.66769],[-69.04027,-16.57214],[-68.98358,-16.42165],[-68.79464,-16.33272],[-68.96238,-16.194],[-69.09986,-16.22693],[-69.20291,-16.16668],[-69.40336,-15.61358],[-69.14856,-15.23478],[-69.36254,-14.94634],[-68.88135,-14.18639],[-69.05265,-13.68546],[-68.8864,-13.40792],[-68.85615,-12.87769],[-68.65044,-12.50689],[-68.98115,-11.8979],[-69.57156,-10.94555],[-69.57835,-10.94051],[-69.90896,-10.92744],[-70.38791,-11.07096],[-70.51395,-10.92249],[-70.64134,-11.0108],[-70.62487,-9.80666],[-70.55429,-9.76692],[-70.58453,-9.58303],[-70.53373,-9.42628],[-71.23394,-9.9668],[-72.14742,-9.98049],[-72.31883,-9.5184],[-72.72216,-9.41397],[-73.21498,-9.40904],[-72.92886,-9.04074],[-73.76576,-7.89884],[-73.65485,-7.77897],[-73.96938,-7.58465],[-73.77011,-7.28944],[-73.73986,-6.87919],[-73.12983,-6.43852],[-73.24579,-6.05764],[-72.83973,-5.14765],[-72.64391,-5.0391],[-71.87003,-4.51661],[-70.96814,-4.36915],[-70.77601,-4.15717],[-70.33236,-4.15214],[-70.19582,-4.3607],[-70.11305,-4.27281],[-70.00888,-4.37833],[-69.94708,-4.2431],[-70.3374,-3.79505],[-70.52393,-3.87553],[-70.71396,-3.7921],[-70.04609,-2.73906],[-70.94377,-2.23142],[-71.75223,-2.15058],[-72.92587,-2.44514],[-73.65312,-1.26222],[-74.26675,-.97229]]]]}},{type:"Feature",properties:{iso1A2:"PF",iso1A3:"PYF",iso1N3:"258",wikidata:"Q30971",nameEn:"French Polynesia",country:"FR",groups:["061","009"],callingCodes:["689"]},geometry:{type:"MultiPolygon",coordinates:[[[[-149.6249,-7.51261],[-149.61166,-12.30171],[-156.4957,-12.32002],[-156.46451,-23.21255],[-156.44843,-28.52556],[-133.59543,-28.4709],[-133.61511,-21.93325],[-133.65593,-7.46952],[-149.6249,-7.51261]]]]}},{type:"Feature",properties:{iso1A2:"PG",iso1A3:"PNG",iso1N3:"598",wikidata:"Q691",nameEn:"Papua New Guinea",groups:["054","009"],driveSide:"left",callingCodes:["675"]},geometry:{type:"MultiPolygon",coordinates:[[[[141.03157,2.12829],[140.99813,-6.3233],[140.85295,-6.72996],[141.01763,-6.90181],[141.00782,-9.1242],[140.88922,-9.34945],[142.0601,-9.56571],[142.0953,-9.23534],[142.1462,-9.19923],[142.23304,-9.19253],[142.31447,-9.24611],[142.5723,-9.35994],[142.81927,-9.31709],[144.30183,-9.48146],[155.22803,-12.9001],[154.74815,-7.33315],[155.60735,-6.92266],[155.69784,-6.92661],[155.92557,-6.84664],[156.03993,-6.65703],[156.03296,-6.55528],[160.43769,-4.17974],[141.03157,2.12829]]]]}},{type:"Feature",properties:{iso1A2:"PH",iso1A3:"PHL",iso1N3:"608",wikidata:"Q928",nameEn:"Philippines",aliases:["PI","RP"],groups:["035","142"],callingCodes:["63"]},geometry:{type:"MultiPolygon",coordinates:[[[[129.19694,7.84182],[121.8109,21.77688],[120.69238,21.52331],[118.82252,14.67191],[115.39742,10.92666],[116.79524,7.43869],[117.17735,7.52841],[117.43832,7.3895],[117.89159,6.25755],[119.34756,5.53889],[119.44841,5.09568],[118.75416,4.59798],[118.8663,4.44172],[118.07935,4.15511],[118.41402,3.99509],[124.97752,4.82064],[129.19694,7.84182]]]]}},{type:"Feature",properties:{iso1A2:"PK",iso1A3:"PAK",iso1N3:"586",wikidata:"Q843",nameEn:"Pakistan",groups:["034","142"],driveSide:"left",callingCodes:["92"]},geometry:{type:"MultiPolygon",coordinates:[[[[75.72737,36.7529],[75.45562,36.71971],[75.40481,36.95382],[75.13839,37.02622],[74.56453,37.03023],[74.53739,36.96224],[74.43389,37.00977],[74.04856,36.82648],[73.82685,36.91421],[72.6323,36.84601],[72.18135,36.71838],[71.80267,36.49924],[71.60491,36.39429],[71.19505,36.04134],[71.37969,35.95865],[71.55273,35.71483],[71.49917,35.6267],[71.65435,35.4479],[71.54294,35.31037],[71.5541,35.28776],[71.67495,35.21262],[71.52938,35.09023],[71.55273,35.02615],[71.49917,35.00478],[71.50329,34.97328],[71.29472,34.87728],[71.28356,34.80882],[71.08718,34.69034],[71.11602,34.63047],[71.0089,34.54568],[71.02401,34.44835],[71.17662,34.36769],[71.12815,34.26619],[71.13078,34.16503],[71.09453,34.13524],[71.09307,34.11961],[71.06933,34.10564],[71.07345,34.06242],[70.88119,33.97933],[70.54336,33.9463],[69.90203,34.04194],[69.87307,33.9689],[69.85671,33.93719],[70.00503,33.73528],[70.14236,33.71701],[70.14785,33.6553],[70.20141,33.64387],[70.17062,33.53535],[70.32775,33.34496],[70.13686,33.21064],[70.07369,33.22557],[70.02563,33.14282],[69.85259,33.09451],[69.79766,33.13247],[69.71526,33.09911],[69.57656,33.09911],[69.49004,33.01509],[69.49854,32.88843],[69.5436,32.8768],[69.47082,32.85834],[69.38018,32.76601],[69.43649,32.7302],[69.44747,32.6678],[69.38155,32.56601],[69.2868,32.53938],[69.23599,32.45946],[69.27932,32.29119],[69.27032,32.14141],[69.3225,31.93186],[69.20577,31.85957],[69.11514,31.70782],[69.00939,31.62249],[68.95995,31.64822],[68.91078,31.59687],[68.79997,31.61665],[68.6956,31.75687],[68.57475,31.83158],[68.44222,31.76446],[68.27605,31.75863],[68.25614,31.80357],[68.1655,31.82691],[68.00071,31.6564],[67.86887,31.63536],[67.72056,31.52304],[67.58323,31.52772],[67.62374,31.40473],[67.7748,31.4188],[67.78854,31.33203],[67.29964,31.19586],[67.03323,31.24519],[67.04147,31.31561],[66.83273,31.26867],[66.72561,31.20526],[66.68166,31.07597],[66.58175,30.97532],[66.42645,30.95309],[66.39194,30.9408],[66.28413,30.57001],[66.34869,30.404],[66.23609,30.06321],[66.36042,29.9583],[66.24175,29.85181],[65.04005,29.53957],[64.62116,29.58903],[64.19796,29.50407],[64.12966,29.39157],[63.5876,29.50456],[62.47751,29.40782],[60.87231,29.86514],[61.31508,29.38903],[61.53765,29.00507],[61.65978,28.77937],[61.93581,28.55284],[62.40259,28.42703],[62.59499,28.24842],[62.79412,28.28108],[62.7638,28.02992],[62.84905,27.47627],[62.79684,27.34381],[62.80604,27.22412],[63.19649,27.25674],[63.32283,27.14437],[63.25005,27.08692],[63.25005,26.84212],[63.18688,26.83844],[63.1889,26.65072],[62.77352,26.64099],[62.31484,26.528],[62.21304,26.26601],[62.05117,26.31647],[61.89391,26.26251],[61.83831,26.07249],[61.83968,25.7538],[61.683,25.66638],[61.6433,25.27541],[61.57592,25.0492],[61.5251,24.57287],[68.11329,23.53945],[68.20763,23.85849],[68.39339,23.96838],[68.74643,23.97027],[68.7416,24.31904],[68.90914,24.33156],[68.97781,24.26021],[69.07806,24.29777],[69.19341,24.25646],[69.29778,24.28712],[69.59579,24.29777],[69.73335,24.17007],[70.03428,24.172],[70.11712,24.30915],[70.5667,24.43787],[70.57906,24.27774],[70.71502,24.23517],[70.88393,24.27398],[70.85784,24.30903],[70.94985,24.3791],[71.04461,24.34657],[71.12838,24.42662],[71.00341,24.46038],[70.97594,24.60904],[71.09405,24.69017],[70.94002,24.92843],[70.89148,25.15064],[70.66695,25.39314],[70.67382,25.68186],[70.60378,25.71898],[70.53649,25.68928],[70.37444,25.67443],[70.2687,25.71156],[70.0985,25.93238],[70.08193,26.08094],[70.17532,26.24118],[70.17532,26.55362],[70.05584,26.60398],[69.88555,26.56836],[69.50904,26.74892],[69.58519,27.18109],[70.03136,27.56627],[70.12502,27.8057],[70.37307,28.01208],[70.60927,28.02178],[70.79054,27.68423],[71.89921,27.96035],[71.9244,28.11555],[72.20329,28.3869],[72.29495,28.66367],[72.40402,28.78283],[72.94272,29.02487],[73.01337,29.16422],[73.05886,29.1878],[73.28094,29.56646],[73.3962,29.94707],[73.58665,30.01848],[73.80299,30.06969],[73.97225,30.19829],[73.95736,30.28466],[73.88993,30.36305],[74.5616,31.04153],[74.67971,31.05479],[74.6852,31.12771],[74.60006,31.13711],[74.60281,31.10419],[74.56023,31.08303],[74.51629,31.13829],[74.53223,31.30321],[74.59773,31.4136],[74.64713,31.45605],[74.59319,31.50197],[74.61517,31.55698],[74.57498,31.60382],[74.47771,31.72227],[74.58907,31.87824],[74.79919,31.95983],[74.86236,32.04485],[74.9269,32.0658],[75.00793,32.03786],[75.25649,32.10187],[75.38046,32.26836],[75.28259,32.36556],[75.03265,32.49538],[74.97634,32.45367],[74.84725,32.49075],[74.68362,32.49298],[74.67431,32.56676],[74.65251,32.56416],[74.64424,32.60985],[74.69542,32.66792],[74.65345,32.71225],[74.7113,32.84219],[74.64675,32.82604],[74.6289,32.75561],[74.45312,32.77755],[74.41467,32.90563],[74.31227,32.92795],[74.34875,32.97823],[74.31854,33.02891],[74.17571,33.07495],[74.15374,33.13477],[74.02144,33.18908],[74.01366,33.25199],[74.08782,33.26232],[74.17983,33.3679],[74.18121,33.4745],[74.10115,33.56392],[74.03576,33.56718],[73.97367,33.64061],[73.98968,33.66155],[73.96423,33.73071],[74.00891,33.75437],[74.05898,33.82089],[74.14001,33.83002],[74.26086,33.92237],[74.25262,34.01577],[74.21554,34.03853],[73.91341,34.01235],[73.88732,34.05105],[73.90677,34.10504],[73.98208,34.2522],[73.90517,34.35317],[73.8475,34.32935],[73.74862,34.34183],[73.74999,34.3781],[73.88732,34.48911],[73.89419,34.54568],[73.93951,34.57169],[73.93401,34.63386],[73.96423,34.68244],[74.12897,34.70073],[74.31239,34.79626],[74.58083,34.77386],[74.6663,34.703],[75.01479,34.64629],[75.38009,34.55021],[75.75438,34.51827],[76.04614,34.67566],[76.15463,34.6429],[76.47186,34.78965],[76.67648,34.76371],[76.74377,34.84039],[76.74514,34.92488],[76.87193,34.96906],[76.99251,34.93349],[77.11796,35.05419],[76.93465,35.39866],[76.85088,35.39754],[76.75475,35.52617],[76.77323,35.66062],[76.50961,35.8908],[76.33453,35.84296],[76.14913,35.82848],[76.15325,35.9264],[75.93028,36.13136],[76.00906,36.17511],[76.0324,36.41198],[75.92391,36.56986],[75.72737,36.7529]]]]}},{type:"Feature",properties:{iso1A2:"PL",iso1A3:"POL",iso1N3:"616",wikidata:"Q36",nameEn:"Poland",groups:["EU","151","150"],callingCodes:["48"]},geometry:{type:"MultiPolygon",coordinates:[[[[18.57853,55.25302],[14.20811,54.12784],[14.22634,53.9291],[14.20647,53.91671],[14.18544,53.91258],[14.20823,53.90776],[14.21323,53.8664],[14.27249,53.74464],[14.26782,53.69866],[14.2836,53.67721],[14.27133,53.66613],[14.28477,53.65955],[14.2853,53.63392],[14.31904,53.61581],[14.30416,53.55499],[14.3273,53.50587],[14.35209,53.49506],[14.4215,53.27724],[14.44133,53.27427],[14.45125,53.26241],[14.40662,53.21098],[14.37853,53.20405],[14.36696,53.16444],[14.38679,53.13669],[14.35044,53.05829],[14.25954,53.00264],[14.14056,52.95786],[14.15873,52.87715],[14.12256,52.84311],[14.13806,52.82392],[14.22071,52.81175],[14.61073,52.59847],[14.6289,52.57136],[14.60081,52.53116],[14.63056,52.48993],[14.54423,52.42568],[14.55228,52.35264],[14.56378,52.33838],[14.58149,52.28007],[14.70139,52.25038],[14.71319,52.22144],[14.68344,52.19612],[14.70616,52.16927],[14.67683,52.13936],[14.6917,52.10283],[14.72971,52.09167],[14.76026,52.06624],[14.71339,52.00337],[14.70488,51.97679],[14.7139,51.95643],[14.71836,51.95606],[14.72163,51.95188],[14.7177,51.94048],[14.70601,51.92944],[14.6933,51.9044],[14.6588,51.88359],[14.59089,51.83302],[14.60493,51.80473],[14.64625,51.79472],[14.66386,51.73282],[14.69065,51.70842],[14.75392,51.67445],[14.75759,51.62318],[14.7727,51.61263],[14.71125,51.56209],[14.73047,51.54606],[14.72652,51.53902],[14.73219,51.52922],[14.94749,51.47155],[14.9652,51.44793],[14.96899,51.38367],[14.98008,51.33449],[15.04288,51.28387],[15.01242,51.21285],[15.0047,51.16874],[14.99311,51.16249],[14.99414,51.15813],[15.00083,51.14974],[14.99646,51.14365],[14.99079,51.14284],[14.99689,51.12205],[14.98229,51.11354],[14.97938,51.07742],[14.95529,51.04552],[14.92942,50.99744],[14.89252,50.94999],[14.89681,50.9422],[14.81664,50.88148],[14.82803,50.86966],[14.99852,50.86817],[15.01088,50.97984],[14.96419,50.99108],[15.02433,51.0242],[15.03895,51.0123],[15.06218,51.02269],[15.10152,51.01095],[15.11937,50.99021],[15.16744,51.01959],[15.1743,50.9833],[15.2361,50.99886],[15.27043,50.97724],[15.2773,50.8907],[15.36656,50.83956],[15.3803,50.77187],[15.43798,50.80833],[15.73186,50.73885],[15.81683,50.75666],[15.87331,50.67188],[15.97219,50.69799],[16.0175,50.63009],[15.98317,50.61528],[16.02437,50.60046],[16.10265,50.66405],[16.20839,50.63096],[16.23174,50.67101],[16.33611,50.66579],[16.44597,50.58041],[16.34572,50.49575],[16.31413,50.50274],[16.19526,50.43291],[16.21585,50.40627],[16.22821,50.41054],[16.28118,50.36891],[16.30289,50.38292],[16.36495,50.37679],[16.3622,50.34875],[16.39379,50.3207],[16.42674,50.32509],[16.56407,50.21009],[16.55446,50.16613],[16.63137,50.1142],[16.7014,50.09659],[16.8456,50.20834],[16.98018,50.24172],[17.00353,50.21449],[17.02825,50.23118],[16.99803,50.25753],[17.02138,50.27772],[16.99803,50.30316],[16.94448,50.31281],[16.90877,50.38642],[16.85933,50.41093],[16.89229,50.45117],[17.1224,50.39494],[17.14498,50.38117],[17.19579,50.38817],[17.19991,50.3654],[17.27681,50.32246],[17.34273,50.32947],[17.34548,50.2628],[17.3702,50.28123],[17.58889,50.27837],[17.67764,50.28977],[17.69292,50.32859],[17.74648,50.29966],[17.72176,50.25665],[17.76296,50.23382],[17.70528,50.18812],[17.59404,50.16437],[17.66683,50.10275],[17.6888,50.12037],[17.7506,50.07896],[17.77669,50.02253],[17.86886,49.97452],[18.00191,50.01723],[18.04585,50.01194],[18.04585,50.03311],[18.00396,50.04954],[18.03212,50.06574],[18.07898,50.04535],[18.10628,50.00223],[18.20241,49.99958],[18.21752,49.97309],[18.27107,49.96779],[18.27794,49.93863],[18.31914,49.91565],[18.33278,49.92415],[18.33562,49.94747],[18.41604,49.93498],[18.53423,49.89906],[18.54495,49.9079],[18.54299,49.92537],[18.57697,49.91565],[18.57045,49.87849],[18.60341,49.86256],[18.57183,49.83334],[18.61278,49.7618],[18.61368,49.75426],[18.62645,49.75002],[18.62943,49.74603],[18.62676,49.71983],[18.69817,49.70473],[18.72838,49.68163],[18.80479,49.6815],[18.84786,49.5446],[18.84521,49.51672],[18.94536,49.52143],[18.97283,49.49914],[18.9742,49.39557],[19.18019,49.41165],[19.25435,49.53391],[19.36009,49.53747],[19.37795,49.574],[19.45348,49.61583],[19.52626,49.57311],[19.53313,49.52856],[19.57845,49.46077],[19.64162,49.45184],[19.6375,49.40897],[19.72127,49.39288],[19.78581,49.41701],[19.82237,49.27806],[19.75286,49.20751],[19.86409,49.19316],[19.90529,49.23532],[19.98494,49.22904],[20.08238,49.1813],[20.13738,49.31685],[20.21977,49.35265],[20.31453,49.34817],[20.31728,49.39914],[20.39939,49.3896],[20.46422,49.41612],[20.5631,49.375],[20.61666,49.41791],[20.72274,49.41813],[20.77971,49.35383],[20.9229,49.29626],[20.98733,49.30774],[21.09799,49.37176],[21.041,49.41791],[21.12477,49.43666],[21.19756,49.4054],[21.27858,49.45988],[21.43376,49.41433],[21.62328,49.4447],[21.77983,49.35443],[21.82927,49.39467],[21.96385,49.3437],[22.04427,49.22136],[22.56155,49.08865],[22.89122,49.00725],[22.86336,49.10513],[22.72009,49.20288],[22.748,49.32759],[22.69444,49.49378],[22.64534,49.53094],[22.78304,49.65543],[22.80261,49.69098],[22.83179,49.69875],[22.99329,49.84249],[23.28221,50.0957],[23.67635,50.33385],[23.71382,50.38248],[23.79445,50.40481],[23.99563,50.41289],[24.03668,50.44507],[24.07048,50.5071],[24.0996,50.60752],[24.0595,50.71625],[23.95925,50.79271],[23.99254,50.83847],[24.0952,50.83262],[24.14524,50.86128],[24.04576,50.90196],[23.92217,51.00836],[23.90376,51.07697],[23.80678,51.18405],[23.63858,51.32182],[23.69905,51.40871],[23.62751,51.50512],[23.56236,51.53673],[23.57053,51.55938],[23.53198,51.74298],[23.62691,51.78208],[23.61523,51.92066],[23.68733,51.9906],[23.64066,52.07626],[23.61,52.11264],[23.54314,52.12148],[23.47859,52.18215],[23.20071,52.22848],[23.18196,52.28812],[23.34141,52.44845],[23.45112,52.53774],[23.58296,52.59868],[23.73615,52.6149],[23.93763,52.71332],[23.91805,52.94016],[23.94689,52.95919],[23.92184,53.02079],[23.87548,53.0831],[23.91393,53.16469],[23.85657,53.22923],[23.81995,53.24131],[23.62004,53.60942],[23.51284,53.95052],[23.48261,53.98855],[23.52702,54.04622],[23.49196,54.14764],[23.45223,54.17775],[23.42418,54.17911],[23.39525,54.21672],[23.3494,54.25155],[23.24656,54.25701],[23.15938,54.29894],[23.15526,54.31076],[23.13905,54.31567],[23.104,54.29794],[23.04323,54.31567],[23.05726,54.34565],[22.99649,54.35927],[23.00584,54.38514],[22.83756,54.40827],[22.79705,54.36264],[21.41123,54.32395],[20.63871,54.3706],[19.8038,54.44203],[19.64312,54.45423],[18.57853,55.25302]]]]}},{type:"Feature",properties:{iso1A2:"PM",iso1A3:"SPM",iso1N3:"666",wikidata:"Q34617",nameEn:"Saint Pierre and Miquelon",country:"FR",groups:["021","003","019"],callingCodes:["508"]},geometry:{type:"MultiPolygon",coordinates:[[[[-56.72993,46.65575],[-55.90758,46.6223],[-56.27503,47.39728],[-56.72993,46.65575]]]]}},{type:"Feature",properties:{iso1A2:"PN",iso1A3:"PCN",iso1N3:"612",wikidata:"Q35672",nameEn:"Pitcairn Islands",country:"GB",groups:["061","009"],driveSide:"left",callingCodes:["64"]},geometry:{type:"MultiPolygon",coordinates:[[[[-133.59543,-28.4709],[-122.0366,-24.55017],[-133.61511,-21.93325],[-133.59543,-28.4709]]]]}},{type:"Feature",properties:{iso1A2:"PR",iso1A3:"PRI",iso1N3:"630",wikidata:"Q1183",nameEn:"Puerto Rico",country:"US",groups:["029","003","419","019"],roadSpeedUnit:"mph",callingCodes:["1 787","1 939"]},geometry:{type:"MultiPolygon",coordinates:[[[[-65.27974,17.56928],[-65.02435,18.73231],[-67.99519,18.97186],[-68.20301,17.83927],[-65.27974,17.56928]]]]}},{type:"Feature",properties:{iso1A2:"PS",iso1A3:"PSE",iso1N3:"275",wikidata:"Q23792",nameEn:"Palestine",country:"IL",groups:["145","142"],callingCodes:["970"]},geometry:{type:"MultiPolygon",coordinates:[[[[34.052,31.46619],[34.21853,31.32363],[34.23572,31.2966],[34.24012,31.29591],[34.26742,31.21998],[34.29417,31.24194],[34.36523,31.28963],[34.37381,31.30598],[34.36505,31.36404],[34.40077,31.40926],[34.48892,31.48365],[34.56797,31.54197],[34.48681,31.59711],[34.29262,31.70393],[34.052,31.46619]]],[[[35.47672,31.49578],[35.55941,31.76535],[35.52758,31.9131],[35.54375,31.96587],[35.52012,32.04076],[35.57111,32.21877],[35.55807,32.38674],[35.42078,32.41562],[35.41048,32.43706],[35.41598,32.45593],[35.42034,32.46009],[35.40224,32.50136],[35.35212,32.52047],[35.30685,32.51024],[35.29306,32.50947],[35.25049,32.52453],[35.2244,32.55289],[35.15937,32.50466],[35.10882,32.4757],[35.10024,32.47856],[35.09236,32.47614],[35.08564,32.46948],[35.07059,32.4585],[35.05423,32.41754],[35.05311,32.4024],[35.0421,32.38242],[35.05142,32.3667],[35.04243,32.35008],[35.01772,32.33863],[35.01119,32.28684],[35.02939,32.2671],[35.01841,32.23981],[34.98885,32.20758],[34.95703,32.19522],[34.96009,32.17503],[34.99039,32.14626],[34.98507,32.12606],[34.99437,32.10962],[34.9863,32.09551],[35.00261,32.027],[34.98682,31.96935],[35.00124,31.93264],[35.03489,31.92448],[35.03978,31.89276],[35.03489,31.85919],[34.99712,31.85569],[34.9724,31.83352],[35.01978,31.82944],[35.05617,31.85685],[35.07677,31.85627],[35.14174,31.81325],[35.18603,31.80901],[35.18169,31.82542],[35.19461,31.82687],[35.21469,31.81835],[35.216,31.83894],[35.21128,31.863],[35.20381,31.86716],[35.20673,31.88151],[35.20791,31.8821],[35.20945,31.8815],[35.21016,31.88237],[35.21276,31.88153],[35.2136,31.88241],[35.22014,31.88264],[35.22294,31.87889],[35.22567,31.86745],[35.22817,31.8638],[35.2249,31.85433],[35.2304,31.84222],[35.24816,31.8458],[35.25753,31.8387],[35.251,31.83085],[35.26404,31.82567],[35.25573,31.81362],[35.26058,31.79064],[35.25225,31.7678],[35.26319,31.74846],[35.25182,31.73945],[35.24981,31.72543],[35.2438,31.7201],[35.24315,31.71244],[35.23972,31.70896],[35.22392,31.71899],[35.21937,31.71578],[35.20538,31.72388],[35.18023,31.72067],[35.16478,31.73242],[35.15474,31.73352],[35.15119,31.73634],[35.13931,31.73012],[35.12933,31.7325],[35.11895,31.71454],[35.10782,31.71594],[35.08226,31.69107],[35.00879,31.65426],[34.95249,31.59813],[34.9415,31.55601],[34.94356,31.50743],[34.93258,31.47816],[34.89756,31.43891],[34.87833,31.39321],[34.88932,31.37093],[34.92571,31.34337],[35.02459,31.35979],[35.13033,31.3551],[35.22921,31.37445],[35.39675,31.49572],[35.47672,31.49578]]]]}},{type:"Feature",properties:{iso1A2:"PT",iso1A3:"PRT",iso1N3:"620",wikidata:"Q45",nameEn:"Portugal",groups:["EU","039","150"],callingCodes:["351"]},geometry:{type:"MultiPolygon",coordinates:[[[[-6.19128,41.57638],[-6.29863,41.66432],[-6.44204,41.68258],[-6.49907,41.65823],[-6.54633,41.68623],[-6.56426,41.74219],[-6.51374,41.8758],[-6.56752,41.88429],[-6.5447,41.94371],[-6.58544,41.96674],[-6.61967,41.94008],[-6.75004,41.94129],[-6.76959,41.98734],[-6.81196,41.99097],[-6.82174,41.94493],[-6.94396,41.94403],[-6.95537,41.96553],[-6.98144,41.9728],[-7.01078,41.94977],[-7.07596,41.94977],[-7.08574,41.97401],[-7.14115,41.98855],[-7.18549,41.97515],[-7.18677,41.88793],[-7.32366,41.8406],[-7.37092,41.85031],[-7.42864,41.80589],[-7.42854,41.83262],[-7.44759,41.84451],[-7.45566,41.86488],[-7.49803,41.87095],[-7.52737,41.83939],[-7.62188,41.83089],[-7.58603,41.87944],[-7.65774,41.88308],[-7.69848,41.90977],[-7.84188,41.88065],[-7.88055,41.84571],[-7.88751,41.92553],[-7.90707,41.92432],[-7.92336,41.8758],[-7.9804,41.87337],[-8.01136,41.83453],[-8.0961,41.81024],[-8.16455,41.81753],[-8.16944,41.87944],[-8.19551,41.87459],[-8.2185,41.91237],[-8.16232,41.9828],[-8.08796,42.01398],[-8.08847,42.05767],[-8.11729,42.08537],[-8.18178,42.06436],[-8.19406,42.12141],[-8.18947,42.13853],[-8.1986,42.15402],[-8.22406,42.1328],[-8.24681,42.13993],[-8.2732,42.12396],[-8.29809,42.106],[-8.32161,42.10218],[-8.33912,42.08358],[-8.36353,42.09065],[-8.38323,42.07683],[-8.40143,42.08052],[-8.42512,42.07199],[-8.44123,42.08218],[-8.48185,42.0811],[-8.52837,42.07658],[-8.5252,42.06264],[-8.54563,42.0537],[-8.58086,42.05147],[-8.59493,42.05708],[-8.63791,42.04691],[-8.64626,42.03668],[-8.65832,42.02972],[-8.6681,41.99703],[-8.69071,41.98862],[-8.7478,41.96282],[-8.74606,41.9469],[-8.75712,41.92833],[-8.81794,41.90375],[-8.87157,41.86488],[-9.14112,41.86623],[-36.43765,41.39418],[-15.92339,29.50503],[-7.37282,36.96896],[-7.39769,37.16868],[-7.41133,37.20314],[-7.41854,37.23813],[-7.43227,37.25152],[-7.43974,37.38913],[-7.46878,37.47127],[-7.51759,37.56119],[-7.41981,37.75729],[-7.33441,37.81193],[-7.27314,37.90145],[-7.24544,37.98884],[-7.12648,38.00296],[-7.10366,38.04404],[-7.05966,38.01966],[-7.00375,38.01914],[-6.93418,38.21454],[-7.09389,38.17227],[-7.15581,38.27597],[-7.32529,38.44336],[-7.265,38.61674],[-7.26174,38.72107],[-7.03848,38.87221],[-7.051,38.907],[-6.95211,39.0243],[-6.97004,39.07619],[-7.04011,39.11919],[-7.10692,39.10275],[-7.14929,39.11287],[-7.12811,39.17101],[-7.23566,39.20132],[-7.23403,39.27579],[-7.3149,39.34857],[-7.2927,39.45847],[-7.49477,39.58794],[-7.54121,39.66717],[-7.33507,39.64569],[-7.24707,39.66576],[-7.01613,39.66877],[-6.97492,39.81488],[-6.91463,39.86618],[-6.86737,40.01986],[-6.94233,40.10716],[-7.00589,40.12087],[-7.02544,40.18564],[-7.00426,40.23169],[-6.86085,40.26776],[-6.86085,40.2976],[-6.80218,40.33239],[-6.78426,40.36468],[-6.84618,40.42177],[-6.84944,40.46394],[-6.7973,40.51723],[-6.80218,40.55067],[-6.84292,40.56801],[-6.79567,40.65955],[-6.82826,40.74603],[-6.82337,40.84472],[-6.79892,40.84842],[-6.80707,40.88047],[-6.84292,40.89771],[-6.8527,40.93958],[-6.9357,41.02888],[-6.913,41.03922],[-6.88843,41.03027],[-6.84781,41.02692],[-6.80942,41.03629],[-6.79241,41.05397],[-6.75655,41.10187],[-6.77319,41.13049],[-6.69711,41.1858],[-6.68286,41.21641],[-6.65046,41.24725],[-6.55937,41.24417],[-6.38551,41.35274],[-6.38553,41.38655],[-6.3306,41.37677],[-6.26777,41.48796],[-6.19128,41.57638]]]]}},{type:"Feature",properties:{iso1A2:"PW",iso1A3:"PLW",iso1N3:"585",wikidata:"Q695",nameEn:"Palau",groups:["057","009"],roadSpeedUnit:"mph",callingCodes:["680"]},geometry:{type:"MultiPolygon",coordinates:[[[[128.97621,3.08804],[134.40878,1.79674],[136.27107,6.73747],[136.04605,12.45908],[128.97621,3.08804]]]]}},{type:"Feature",properties:{iso1A2:"PY",iso1A3:"PRY",iso1N3:"600",wikidata:"Q733",nameEn:"Paraguay",groups:["005","419","019"],callingCodes:["595"]},geometry:{type:"MultiPolygon",coordinates:[[[[-58.16225,-20.16193],[-58.23216,-19.80058],[-59.06965,-19.29148],[-60.00638,-19.2981],[-61.73723,-19.63958],[-61.93912,-20.10053],[-62.26883,-20.55311],[-62.2757,-21.06657],[-62.64455,-22.25091],[-62.51761,-22.37684],[-62.22768,-22.55807],[-61.9756,-23.0507],[-61.0782,-23.62932],[-60.99754,-23.80934],[-60.28163,-24.04436],[-60.03367,-24.00701],[-59.45482,-24.34787],[-59.33886,-24.49935],[-58.33055,-24.97099],[-58.25492,-24.92528],[-57.80821,-25.13863],[-57.57431,-25.47269],[-57.87176,-25.93604],[-58.1188,-26.16704],[-58.3198,-26.83443],[-58.65321,-27.14028],[-58.59549,-27.29973],[-58.04205,-27.2387],[-56.85337,-27.5165],[-56.18313,-27.29851],[-55.89195,-27.3467],[-55.74475,-27.44485],[-55.59094,-27.32444],[-55.62322,-27.1941],[-55.39611,-26.97679],[-55.25243,-26.93808],[-55.16948,-26.96068],[-55.06351,-26.80195],[-55.00584,-26.78754],[-54.80868,-26.55669],[-54.70732,-26.45099],[-54.69333,-26.37705],[-54.67359,-25.98607],[-54.60664,-25.9691],[-54.62063,-25.91213],[-54.59398,-25.59224],[-54.59509,-25.53696],[-54.60196,-25.48397],[-54.62033,-25.46026],[-54.4423,-25.13381],[-54.28207,-24.07305],[-54.32807,-24.01865],[-54.6238,-23.83078],[-55.02691,-23.97317],[-55.0518,-23.98666],[-55.12292,-23.99669],[-55.41784,-23.9657],[-55.44117,-23.9185],[-55.43585,-23.87157],[-55.5555,-23.28237],[-55.52288,-23.2595],[-55.5446,-23.22811],[-55.63849,-22.95122],[-55.62493,-22.62765],[-55.68742,-22.58407],[-55.6986,-22.56268],[-55.72366,-22.5519],[-55.741,-22.52018],[-55.74941,-22.46436],[-55.8331,-22.29008],[-56.23206,-22.25347],[-56.45893,-22.08072],[-56.5212,-22.11556],[-56.6508,-22.28387],[-57.98625,-22.09157],[-57.94642,-21.73799],[-57.88239,-21.6868],[-57.93492,-21.65505],[-57.84536,-20.93155],[-58.16225,-20.16193]]]]}},{type:"Feature",properties:{iso1A2:"QA",iso1A3:"QAT",iso1N3:"634",wikidata:"Q846",nameEn:"Qatar",groups:["145","142"],callingCodes:["974"]},geometry:{type:"MultiPolygon",coordinates:[[[[50.92992,24.54396],[51.09638,24.46907],[51.29972,24.50747],[51.39468,24.62785],[51.58834,24.66608],[51.83108,24.71675],[51.83682,26.70231],[50.93865,26.30758],[50.81266,25.88946],[50.86149,25.6965],[50.7801,25.595],[50.80824,25.54641],[50.57069,25.57887],[50.8133,24.74049],[50.92992,24.54396]]]]}},{type:"Feature",properties:{iso1A2:"RE",iso1A3:"REU",iso1N3:"638",wikidata:"Q17070",nameEn:"Réunion",country:"FR",groups:["EU","014","202","002"],callingCodes:["262"]},geometry:{type:"MultiPolygon",coordinates:[[[[53.37984,-21.23941],[56.73473,-21.9174],[56.62373,-20.2711],[53.37984,-21.23941]]]]}},{type:"Feature",properties:{iso1A2:"RO",iso1A3:"ROU",iso1N3:"642",wikidata:"Q218",nameEn:"Romania",groups:["EU","151","150"],callingCodes:["40"]},geometry:{type:"MultiPolygon",coordinates:[[[[27.15622,47.98538],[27.02985,48.09083],[27.04118,48.12522],[26.96119,48.13003],[26.98042,48.15752],[26.94265,48.1969],[26.87708,48.19919],[26.81161,48.25049],[26.62823,48.25804],[26.55202,48.22445],[26.33504,48.18418],[26.17711,47.99246],[26.05901,47.9897],[25.77723,47.93919],[25.63878,47.94924],[25.23778,47.89403],[25.11144,47.75203],[24.88896,47.7234],[24.81893,47.82031],[24.70632,47.84428],[24.61994,47.95062],[24.43578,47.97131],[24.34926,47.9244],[24.22566,47.90231],[24.11281,47.91487],[24.06466,47.95317],[24.02999,47.95087],[24.00801,47.968],[23.98553,47.96076],[23.96337,47.96672],[23.94192,47.94868],[23.89352,47.94512],[23.8602,47.9329],[23.80904,47.98142],[23.75188,47.99705],[23.66262,47.98786],[23.63894,48.00293],[23.5653,48.00499],[23.52803,48.01818],[23.4979,47.96858],[23.33577,48.0237],[23.27397,48.08245],[23.15999,48.12188],[23.1133,48.08061],[23.08858,48.00716],[23.0158,47.99338],[22.92241,48.02002],[22.94301,47.96672],[22.89849,47.95851],[22.77991,47.87211],[22.76617,47.8417],[22.67247,47.7871],[22.46559,47.76583],[22.41979,47.7391],[22.31816,47.76126],[22.00917,47.50492],[22.03389,47.42508],[22.01055,47.37767],[21.94463,47.38046],[21.78395,47.11104],[21.648,47.03902],[21.68645,46.99595],[21.59581,46.91628],[21.59307,46.86935],[21.52028,46.84118],[21.48935,46.7577],[21.5151,46.72147],[21.43926,46.65109],[21.33214,46.63035],[21.26929,46.4993],[21.28061,46.44941],[21.16872,46.30118],[21.06572,46.24897],[20.86797,46.28884],[20.74574,46.25467],[20.76085,46.21002],[20.63863,46.12728],[20.49718,46.18721],[20.45377,46.14405],[20.35573,46.16629],[20.28324,46.1438],[20.26068,46.12332],[20.35862,45.99356],[20.54818,45.89939],[20.65645,45.82801],[20.70069,45.7493],[20.77416,45.75601],[20.78446,45.78522],[20.82364,45.77738],[20.80361,45.65875],[20.76798,45.60969],[20.83321,45.53567],[20.77217,45.49788],[20.86026,45.47295],[20.87948,45.42743],[21.09894,45.30144],[21.17612,45.32566],[21.20392,45.2677],[21.29398,45.24148],[21.48278,45.19557],[21.51299,45.15345],[21.4505,45.04294],[21.35855,45.01941],[21.54938,44.9327],[21.56328,44.89502],[21.48202,44.87199],[21.44013,44.87613],[21.35643,44.86364],[21.38802,44.78133],[21.55007,44.77304],[21.60019,44.75208],[21.61942,44.67059],[21.67504,44.67107],[21.71692,44.65349],[21.7795,44.66165],[21.99364,44.63395],[22.08016,44.49844],[22.13234,44.47444],[22.18315,44.48179],[22.30844,44.6619],[22.45301,44.7194],[22.61917,44.61489],[22.69196,44.61587],[22.76749,44.54446],[22.70981,44.51852],[22.61368,44.55719],[22.56493,44.53419],[22.54021,44.47836],[22.45436,44.47258],[22.56012,44.30712],[22.68166,44.28206],[22.67173,44.21564],[23.04988,44.07694],[23.01674,44.01946],[22.87873,43.9844],[22.83753,43.88055],[22.85314,43.84452],[23.05288,43.79494],[23.26772,43.84843],[23.4507,43.84936],[23.61687,43.79289],[23.73978,43.80627],[24.18149,43.68218],[24.35364,43.70211],[24.50264,43.76314],[24.62281,43.74082],[24.73542,43.68523],[24.96682,43.72693],[25.10718,43.6831],[25.17144,43.70261],[25.39528,43.61866],[25.72792,43.69263],[25.94911,43.85745],[26.05584,43.90925],[26.10115,43.96908],[26.38764,44.04356],[26.62712,44.05698],[26.95141,44.13555],[27.26845,44.12602],[27.39757,44.0141],[27.60834,44.01206],[27.64542,44.04958],[27.73468,43.95326],[27.92008,44.00761],[27.99558,43.84193],[28.23293,43.76],[29.24336,43.70874],[30.04414,45.08461],[29.69272,45.19227],[29.65428,45.25629],[29.68175,45.26885],[29.59798,45.38857],[29.42632,45.44545],[29.24779,45.43388],[28.96077,45.33164],[28.94292,45.28045],[28.81383,45.3384],[28.78911,45.24179],[28.71358,45.22631],[28.5735,45.24759],[28.34554,45.32102],[28.28504,45.43907],[28.21139,45.46895],[28.18741,45.47358],[28.08927,45.6051],[28.16568,45.6421],[28.13111,45.92819],[28.08612,46.01105],[28.13684,46.18099],[28.10937,46.22852],[28.19864,46.31869],[28.18902,46.35283],[28.25769,46.43334],[28.22281,46.50481],[28.24808,46.64305],[28.12173,46.82283],[28.09095,46.97621],[27.81892,47.1381],[27.73172,47.29248],[27.68706,47.28962],[27.60263,47.32507],[27.55731,47.46637],[27.47942,47.48113],[27.3979,47.59473],[27.32202,47.64009],[27.25519,47.71366],[27.29069,47.73722],[27.1618,47.92391],[27.15622,47.98538]]]]}},{type:"Feature",properties:{iso1A2:"RS",iso1A3:"SRB",iso1N3:"688",wikidata:"Q403",nameEn:"Serbia",groups:["039","150"],callingCodes:["381"]},geometry:{type:"MultiPolygon",coordinates:[[[[19.66007,46.19005],[19.56113,46.16824],[19.52473,46.1171],[19.28826,45.99694],[19.14543,45.9998],[19.10388,46.04015],[19.0791,45.96458],[19.01284,45.96529],[18.99712,45.93537],[18.81394,45.91329],[18.85783,45.85493],[18.90305,45.71863],[18.96691,45.66731],[18.88776,45.57253],[18.94562,45.53712],[19.07471,45.53086],[19.08364,45.48804],[18.99918,45.49333],[18.97446,45.37528],[19.10774,45.29547],[19.28208,45.23813],[19.41941,45.23475],[19.43589,45.17137],[19.19144,45.17863],[19.14063,45.12972],[19.07952,45.14668],[19.1011,45.01191],[19.05205,44.97692],[19.15573,44.95409],[19.06853,44.89915],[19.02871,44.92541],[18.98957,44.90645],[19.01994,44.85493],[19.18183,44.92055],[19.36722,44.88164],[19.32543,44.74058],[19.26388,44.65412],[19.16699,44.52197],[19.13369,44.52521],[19.12278,44.50132],[19.14837,44.45253],[19.14681,44.41463],[19.11785,44.40313],[19.10749,44.39421],[19.10704,44.38249],[19.10365,44.37795],[19.10298,44.36924],[19.11865,44.36712],[19.1083,44.3558],[19.11547,44.34218],[19.13556,44.338],[19.13332,44.31492],[19.16741,44.28648],[19.18328,44.28383],[19.20508,44.2917],[19.23306,44.26097],[19.26945,44.26957],[19.32464,44.27185],[19.34773,44.23244],[19.3588,44.18353],[19.40927,44.16722],[19.43905,44.13088],[19.47338,44.15034],[19.48386,44.14332],[19.47321,44.1193],[19.51167,44.08158],[19.55999,44.06894],[19.57467,44.04716],[19.61991,44.05254],[19.61836,44.01464],[19.56498,43.99922],[19.52515,43.95573],[19.38439,43.96611],[19.24363,44.01502],[19.23465,43.98764],[19.3986,43.79668],[19.5176,43.71403],[19.50455,43.58385],[19.42696,43.57987],[19.41941,43.54056],[19.36653,43.60921],[19.33426,43.58833],[19.2553,43.5938],[19.24774,43.53061],[19.22807,43.5264],[19.22229,43.47926],[19.44315,43.38846],[19.48171,43.32644],[19.52962,43.31623],[19.54598,43.25158],[19.62661,43.2286],[19.64063,43.19027],[19.76918,43.16044],[19.79255,43.11951],[19.92576,43.08539],[19.96549,43.11098],[19.98887,43.0538],[20.04729,43.02732],[20.05431,42.99571],[20.12325,42.96237],[20.14896,42.99058],[20.16415,42.97177],[20.34528,42.90676],[20.35692,42.8335],[20.40594,42.84853],[20.43734,42.83157],[20.53484,42.8885],[20.48692,42.93208],[20.59929,43.01067],[20.64557,43.00826],[20.69515,43.09641],[20.59929,43.20492],[20.68688,43.21335],[20.73811,43.25068],[20.82145,43.26769],[20.88685,43.21697],[20.83727,43.17842],[20.96287,43.12416],[21.00749,43.13984],[21.05378,43.10707],[21.08952,43.13471],[21.14465,43.11089],[21.16734,42.99694],[21.2041,43.02277],[21.23877,43.00848],[21.23534,42.95523],[21.2719,42.8994],[21.32974,42.90424],[21.36941,42.87397],[21.44047,42.87276],[21.39045,42.74888],[21.47498,42.74695],[21.59154,42.72643],[21.58755,42.70418],[21.6626,42.67813],[21.75025,42.70125],[21.79413,42.65923],[21.75672,42.62695],[21.7327,42.55041],[21.70522,42.54176],[21.7035,42.51899],[21.62556,42.45106],[21.64209,42.41081],[21.62887,42.37664],[21.59029,42.38042],[21.57021,42.3647],[21.53467,42.36809],[21.5264,42.33634],[21.56772,42.30946],[21.58992,42.25915],[21.70111,42.23789],[21.77176,42.2648],[21.84654,42.3247],[21.91595,42.30392],[21.94405,42.34669],[22.02908,42.29848],[22.16384,42.32103],[22.29605,42.37477],[22.29275,42.34913],[22.34773,42.31725],[22.45919,42.33822],[22.47498,42.3915],[22.51961,42.3991],[22.55669,42.50144],[22.43983,42.56851],[22.4997,42.74144],[22.43309,42.82057],[22.54302,42.87774],[22.74826,42.88701],[22.78397,42.98253],[22.89521,43.03625],[22.98104,43.11199],[23.00806,43.19279],[22.89727,43.22417],[22.82036,43.33665],[22.53397,43.47225],[22.47582,43.6558],[22.41043,43.69566],[22.35558,43.81281],[22.41449,44.00514],[22.61688,44.06534],[22.61711,44.16938],[22.67173,44.21564],[22.68166,44.28206],[22.56012,44.30712],[22.45436,44.47258],[22.54021,44.47836],[22.56493,44.53419],[22.61368,44.55719],[22.70981,44.51852],[22.76749,44.54446],[22.69196,44.61587],[22.61917,44.61489],[22.45301,44.7194],[22.30844,44.6619],[22.18315,44.48179],[22.13234,44.47444],[22.08016,44.49844],[21.99364,44.63395],[21.7795,44.66165],[21.71692,44.65349],[21.67504,44.67107],[21.61942,44.67059],[21.60019,44.75208],[21.55007,44.77304],[21.38802,44.78133],[21.35643,44.86364],[21.44013,44.87613],[21.48202,44.87199],[21.56328,44.89502],[21.54938,44.9327],[21.35855,45.01941],[21.4505,45.04294],[21.51299,45.15345],[21.48278,45.19557],[21.29398,45.24148],[21.20392,45.2677],[21.17612,45.32566],[21.09894,45.30144],[20.87948,45.42743],[20.86026,45.47295],[20.77217,45.49788],[20.83321,45.53567],[20.76798,45.60969],[20.80361,45.65875],[20.82364,45.77738],[20.78446,45.78522],[20.77416,45.75601],[20.70069,45.7493],[20.65645,45.82801],[20.54818,45.89939],[20.35862,45.99356],[20.26068,46.12332],[20.09713,46.17315],[20.03533,46.14509],[20.01816,46.17696],[19.93508,46.17553],[19.81491,46.1313],[19.66007,46.19005]]]]}},{type:"Feature",properties:{iso1A2:"RU",iso1A3:"RUS",iso1N3:"643",wikidata:"Q159",nameEn:"Russia",groups:["151","150"],callingCodes:["7"]},geometry:{type:"MultiPolygon",coordinates:[[[[-179.99933,64.74703],[-172.76104,63.77445],[-169.03888,65.48473],[-168.95635,65.98512],[-168.25765,71.99091],[-179.9843,71.90735],[-179.99933,64.74703]]],[[[39.81147,43.06294],[40.0078,43.38551],[40.00853,43.40578],[40.01552,43.42025],[40.01007,43.42411],[40.03312,43.44262],[40.04445,43.47776],[40.10657,43.57344],[40.65957,43.56212],[41.64935,43.22331],[42.40563,43.23226],[42.66667,43.13917],[42.75889,43.19651],[43.03322,43.08883],[43.0419,43.02413],[43.81453,42.74297],[43.73119,42.62043],[43.95517,42.55396],[44.54202,42.75699],[44.70002,42.74679],[44.80941,42.61277],[44.88754,42.74934],[45.15318,42.70598],[45.36501,42.55268],[45.78692,42.48358],[45.61676,42.20768],[46.42738,41.91323],[46.5332,41.87389],[46.58924,41.80547],[46.75269,41.8623],[46.8134,41.76252],[47.00955,41.63583],[46.99554,41.59743],[47.03757,41.55434],[47.10762,41.59044],[47.34579,41.27884],[47.49004,41.26366],[47.54504,41.20275],[47.62288,41.22969],[47.75831,41.19455],[47.87973,41.21798],[48.07587,41.49957],[48.22064,41.51472],[48.2878,41.56221],[48.40277,41.60441],[48.42301,41.65444],[48.55078,41.77917],[48.5867,41.84306],[48.80971,41.95365],[49.2134,44.84989],[49.88945,46.04554],[49.32259,46.26944],[49.16518,46.38542],[48.54988,46.56267],[48.51142,46.69268],[49.01136,46.72716],[48.52326,47.4102],[48.45173,47.40818],[48.15348,47.74545],[47.64973,47.76559],[47.41689,47.83687],[47.38731,47.68176],[47.12107,47.83687],[47.11516,48.27188],[46.49011,48.43019],[46.78392,48.95352],[46.91104,48.99715],[47.01458,49.07085],[47.04416,49.17152],[46.98795,49.23531],[46.78398,49.34026],[46.9078,49.86707],[47.18319,49.93721],[47.34589,50.09308],[47.30448,50.30894],[47.58551,50.47867],[48.10044,50.09242],[48.24519,49.86099],[48.42564,49.82283],[48.68352,49.89546],[48.90782,50.02281],[48.57946,50.63278],[48.86936,50.61589],[49.12673,50.78639],[49.41959,50.85927],[49.39001,51.09396],[49.76866,51.11067],[49.97277,51.2405],[50.26859,51.28677],[50.59695,51.61859],[51.26254,51.68466],[51.301,51.48799],[51.77431,51.49536],[51.8246,51.67916],[52.36119,51.74161],[52.54329,51.48444],[53.46165,51.49445],[53.69299,51.23466],[54.12248,51.11542],[54.46331,50.85554],[54.41894,50.61214],[54.55797,50.52006],[54.71476,50.61214],[54.56685,51.01958],[54.72067,51.03261],[55.67774,50.54508],[56.11398,50.7471],[56.17906,50.93204],[57.17302,51.11253],[57.44221,50.88354],[57.74986,50.93017],[57.75578,51.13852],[58.3208,51.15151],[58.87974,50.70852],[59.48928,50.64216],[59.51886,50.49937],[59.81172,50.54451],[60.01288,50.8163],[60.17262,50.83312],[60.31914,50.67705],[60.81833,50.6629],[61.4431,50.80679],[61.56889,51.23679],[61.6813,51.25716],[61.55114,51.32746],[61.50677,51.40687],[60.95655,51.48615],[60.92401,51.61124],[60.5424,51.61675],[60.36787,51.66815],[60.50986,51.7964],[60.09867,51.87135],[59.99809,51.98263],[60.19925,51.99173],[60.48915,52.15175],[60.72581,52.15538],[60.78201,52.22067],[61.05417,52.35096],[60.98021,52.50068],[60.84709,52.52228],[60.84118,52.63912],[60.71693,52.66245],[60.71989,52.75923],[61.05842,52.92217],[61.23462,53.03227],[62.0422,52.96105],[62.12799,52.99133],[62.14574,53.09626],[61.19024,53.30536],[61.14291,53.41481],[61.29082,53.50992],[61.37957,53.45887],[61.57185,53.50112],[61.55706,53.57144],[60.90626,53.62937],[61.22574,53.80268],[61.14283,53.90063],[60.99796,53.93699],[61.26863,53.92797],[61.3706,54.08464],[61.47603,54.08048],[61.56941,53.95703],[61.65318,54.02445],[62.03913,53.94768],[62.00966,54.04134],[62.38535,54.03961],[62.45931,53.90737],[62.56876,53.94047],[62.58651,54.05871],[63.80604,54.27079],[63.91224,54.20013],[64.02715,54.22679],[63.97686,54.29763],[64.97216,54.4212],[65.11033,54.33028],[65.24663,54.35721],[65.20174,54.55216],[68.21308,54.98645],[68.26661,55.09226],[68.19206,55.18823],[68.90865,55.38148],[69.34224,55.36344],[69.74917,55.35545],[70.19179,55.1476],[70.76493,55.3027],[70.96009,55.10558],[71.08288,54.71253],[71.24185,54.64965],[71.08706,54.33376],[71.10379,54.13326],[71.96141,54.17736],[72.17477,54.36303],[72.43415,53.92685],[72.71026,54.1161],[73.37963,53.96132],[73.74778,54.07194],[73.68921,53.86522],[73.25412,53.61532],[73.39218,53.44623],[75.07405,53.80831],[75.43398,53.98652],[75.3668,54.07439],[76.91052,54.4677],[76.82266,54.1798],[76.44076,54.16017],[76.54243,53.99329],[77.90383,53.29807],[79.11255,52.01171],[80.08138,50.77658],[80.4127,50.95581],[80.44819,51.20855],[80.80318,51.28262],[81.16999,51.15662],[81.06091,50.94833],[81.41248,50.97524],[81.46581,50.77658],[81.94999,50.79307],[82.55443,50.75412],[83.14607,51.00796],[83.8442,50.87375],[84.29385,50.27257],[84.99198,50.06793],[85.24047,49.60239],[86.18709,49.50259],[86.63674,49.80136],[86.79056,49.74787],[86.61307,49.60239],[86.82606,49.51796],[87.03071,49.25142],[87.31465,49.23603],[87.28386,49.11626],[87.478,49.07403],[87.48983,49.13794],[87.81333,49.17354],[87.98977,49.18147],[88.15543,49.30314],[88.17223,49.46934],[88.42449,49.48821],[88.82499,49.44808],[89.70687,49.72535],[89.59711,49.90851],[91.86048,50.73734],[92.07173,50.69585],[92.44714,50.78762],[93.01109,50.79001],[92.99595,50.63183],[94.30823,50.57498],[94.39258,50.22193],[94.49477,50.17832],[94.6121,50.04239],[94.97166,50.04725],[95.02465,49.96941],[95.74757,49.97915],[95.80056,50.04239],[96.97388,49.88413],[97.24639,49.74737],[97.56811,49.84265],[97.56432,49.92801],[97.76871,49.99861],[97.85197,49.91339],[98.29481,50.33561],[98.31373,50.4996],[98.06393,50.61262],[97.9693,50.78044],[98.01472,50.86652],[97.83305,51.00248],[98.05257,51.46696],[98.22053,51.46579],[98.33222,51.71832],[98.74142,51.8637],[98.87768,52.14563],[99.27888,51.96876],[99.75578,51.90108],[99.89203,51.74903],[100.61116,51.73028],[101.39085,51.45753],[101.5044,51.50467],[102.14032,51.35566],[102.32194,50.67982],[102.71178,50.38873],[103.70343,50.13952],[105.32528,50.4648],[106.05562,50.40582],[106.07865,50.33474],[106.47156,50.31909],[106.49628,50.32436],[106.51122,50.34408],[106.58373,50.34044],[106.80326,50.30177],[107.00007,50.1977],[107.1174,50.04239],[107.36407,49.97612],[107.96116,49.93191],[107.95387,49.66659],[108.27937,49.53167],[108.53969,49.32325],[109.18017,49.34709],[109.51325,49.22859],[110.24373,49.16676],[110.39891,49.25083],[110.64493,49.1816],[113.02647,49.60772],[113.20216,49.83356],[114.325,50.28098],[114.9703,50.19254],[115.26068,49.97367],[115.73602,49.87688],[116.22402,50.04477],[116.62502,49.92919],[116.71193,49.83813],[117.07142,49.68482],[117.27597,49.62544],[117.48208,49.62324],[117.82343,49.52696],[118.61623,49.93809],[119.11003,50.00276],[119.27996,50.13348],[119.38598,50.35162],[119.13553,50.37412],[120.10963,51.671],[120.65907,51.93544],[120.77337,52.20805],[120.61346,52.32447],[120.71673,52.54099],[120.46454,52.63811],[120.04049,52.58773],[120.0451,52.7359],[120.85633,53.28499],[121.39213,53.31888],[122.35063,53.49565],[122.85966,53.47395],[123.26989,53.54843],[123.86158,53.49391],[124.46078,53.21881],[125.17522,53.20225],[125.6131,53.07229],[126.558,52.13738],[126.44606,51.98254],[126.68349,51.70607],[126.90369,51.3238],[126.93135,51.0841],[127.14586,50.91152],[127.28165,50.72075],[127.36335,50.58306],[127.28765,50.46585],[127.36009,50.43787],[127.37384,50.28393],[127.60515,50.23503],[127.49299,50.01251],[127.53516,49.84306],[127.83476,49.5748],[128.72896,49.58676],[129.11153,49.36813],[129.23232,49.40353],[129.35317,49.3481],[129.40398,49.44194],[129.50685,49.42398],[129.67598,49.29596],[129.85416,49.11067],[130.2355,48.86741],[130.43232,48.90844],[130.66946,48.88251],[130.52147,48.61745],[130.84462,48.30942],[130.65103,48.10052],[130.90915,47.90623],[130.95985,47.6957],[131.09871,47.6852],[131.2635,47.73325],[131.90448,47.68011],[132.57309,47.71741],[132.66989,47.96491],[134.49516,48.42884],[134.75328,48.36763],[134.67098,48.1564],[134.55508,47.98651],[134.7671,47.72051],[134.50898,47.4812],[134.20016,47.33458],[134.03538,46.75668],[133.84104,46.46681],[133.91496,46.4274],[133.88097,46.25066],[133.68047,46.14697],[133.72695,46.05576],[133.67569,45.9759],[133.60442,45.90053],[133.48457,45.86203],[133.41083,45.57723],[133.19419,45.51913],[133.09279,45.25693],[133.12293,45.1332],[132.96373,45.0212],[132.83978,45.05916],[131.99417,45.2567],[131.86903,45.33636],[131.76532,45.22609],[131.66852,45.2196],[131.68466,45.12374],[131.48415,44.99513],[130.95639,44.85154],[131.1108,44.70266],[131.30365,44.04262],[131.25484,44.03131],[131.23583,43.96085],[131.26176,43.94011],[131.21105,43.82383],[131.19492,43.53047],[131.29402,43.46695],[131.30324,43.39498],[131.19031,43.21385],[131.20414,43.13654],[131.10274,43.04734],[131.135,42.94114],[131.02668,42.91246],[131.02438,42.86518],[130.66524,42.84753],[130.44361,42.76205],[130.40213,42.70788],[130.56576,42.68925],[130.62107,42.58413],[130.55143,42.52158],[130.56835,42.43281],[130.60805,42.4317],[130.64181,42.41422],[130.66367,42.38024],[130.65022,42.32281],[131.95041,41.5445],[140.9182,45.92937],[145.82343,44.571],[145.23667,43.76813],[153.94307,38.42848],[180,62.52334],[180,71.53642],[155.31937,81.93282],[36.48095,82.16765],[32.07813,72.01005],[31.59909,70.16571],[30.84095,69.80584],[30.95011,69.54699],[30.52662,69.54699],[30.16363,69.65244],[29.97205,69.41623],[29.27631,69.2811],[29.26623,69.13794],[29.0444,69.0119],[28.91738,69.04774],[28.45957,68.91417],[28.78224,68.86696],[28.43941,68.53366],[28.62982,68.19816],[29.34179,68.06655],[29.66955,67.79872],[30.02041,67.67523],[29.91155,67.51507],[28.9839,66.94139],[29.91155,66.13863],[30.16363,65.66935],[29.97205,65.70256],[29.74013,65.64025],[29.84096,65.56945],[29.68972,65.31803],[29.61914,65.23791],[29.8813,65.22101],[29.84096,65.1109],[29.61914,65.05993],[29.68972,64.80789],[30.05271,64.79072],[30.12329,64.64862],[30.01238,64.57513],[30.06279,64.35782],[30.4762,64.25728],[30.55687,64.09036],[30.25437,63.83364],[29.98213,63.75795],[30.49637,63.46666],[31.23244,63.22239],[31.29294,63.09035],[31.58535,62.91642],[31.38369,62.66284],[31.10136,62.43042],[29.01829,61.17448],[28.82816,61.1233],[28.47974,60.93365],[27.77352,60.52722],[27.71177,60.3893],[27.44953,60.22766],[26.32936,60.00121],[26.90044,59.63819],[27.85643,59.58538],[28.04187,59.47017],[28.19061,59.39962],[28.21137,59.38058],[28.20537,59.36491],[28.19284,59.35791],[28.14215,59.28934],[28.00689,59.28351],[27.90911,59.24353],[27.87978,59.18097],[27.80482,59.1116],[27.74429,58.98351],[27.36366,58.78381],[27.55489,58.39525],[27.48541,58.22615],[27.62393,58.09462],[27.67282,57.92627],[27.81841,57.89244],[27.78526,57.83963],[27.56689,57.83356],[27.50171,57.78842],[27.52615,57.72843],[27.3746,57.66834],[27.40393,57.62125],[27.31919,57.57672],[27.34698,57.52242],[27.56832,57.53728],[27.52453,57.42826],[27.86101,57.29402],[27.66511,56.83921],[27.86101,56.88204],[28.04768,56.59004],[28.13526,56.57989],[28.10069,56.524],[28.19057,56.44637],[28.16599,56.37806],[28.23716,56.27588],[28.15217,56.16964],[28.30571,56.06035],[28.36888,56.05805],[28.37987,56.11399],[28.43068,56.09407],[28.5529,56.11705],[28.68337,56.10173],[28.63668,56.07262],[28.73418,55.97131],[29.08299,56.03427],[29.21717,55.98971],[29.44692,55.95978],[29.3604,55.75862],[29.51283,55.70294],[29.61446,55.77716],[29.80672,55.79569],[29.97975,55.87281],[30.12136,55.8358],[30.27776,55.86819],[30.30987,55.83592],[30.48257,55.81066],[30.51346,55.78982],[30.51037,55.76568],[30.63344,55.73079],[30.67464,55.64176],[30.72957,55.66268],[30.7845,55.58514],[30.86003,55.63169],[30.93419,55.6185],[30.95204,55.50667],[30.90123,55.46621],[30.93144,55.3914],[30.8257,55.3313],[30.81946,55.27931],[30.87944,55.28223],[30.97369,55.17134],[31.02071,55.06167],[31.00972,55.02783],[30.94243,55.03964],[30.9081,55.02232],[30.95754,54.98609],[30.93144,54.9585],[30.81759,54.94064],[30.8264,54.90062],[30.75165,54.80699],[30.95479,54.74346],[30.97127,54.71967],[31.0262,54.70698],[30.98226,54.68872],[30.99187,54.67046],[31.19339,54.66947],[31.21399,54.63113],[31.08543,54.50361],[31.22945,54.46585],[31.3177,54.34067],[31.30791,54.25315],[31.57002,54.14535],[31.89599,54.0837],[31.88744,54.03653],[31.85019,53.91801],[31.77028,53.80015],[31.89137,53.78099],[32.12621,53.81586],[32.36663,53.7166],[32.45717,53.74039],[32.50112,53.68594],[32.40499,53.6656],[32.47777,53.5548],[32.74968,53.45597],[32.73257,53.33494],[32.51725,53.28431],[32.40773,53.18856],[32.15368,53.07594],[31.82373,53.10042],[31.787,53.18033],[31.62496,53.22886],[31.56316,53.19432],[31.40523,53.21406],[31.36403,53.13504],[31.3915,53.09712],[31.33519,53.08805],[31.32283,53.04101],[31.24147,53.031],[31.35667,52.97854],[31.592,52.79011],[31.57277,52.71613],[31.50406,52.69707],[31.63869,52.55361],[31.56316,52.51518],[31.61397,52.48843],[31.62084,52.33849],[31.57971,52.32146],[31.70735,52.26711],[31.6895,52.1973],[31.77877,52.18636],[31.7822,52.11406],[31.81722,52.09955],[31.85018,52.11305],[31.96141,52.08015],[31.92159,52.05144],[32.08813,52.03319],[32.23331,52.08085],[32.2777,52.10266],[32.34044,52.1434],[32.33083,52.23685],[32.38988,52.24946],[32.3528,52.32842],[32.54781,52.32423],[32.69475,52.25535],[32.85405,52.27888],[32.89937,52.2461],[33.18913,52.3754],[33.51323,52.35779],[33.48027,52.31499],[33.55718,52.30324],[33.78789,52.37204],[34.05239,52.20132],[34.11199,52.14087],[34.09413,52.00835],[34.41136,51.82793],[34.42922,51.72852],[34.07765,51.67065],[34.17599,51.63253],[34.30562,51.5205],[34.22048,51.4187],[34.33446,51.363],[34.23009,51.26429],[34.31661,51.23936],[34.38802,51.2746],[34.6613,51.25053],[34.6874,51.18],[34.82472,51.17483],[34.97304,51.2342],[35.14058,51.23162],[35.12685,51.16191],[35.20375,51.04723],[35.31774,51.08434],[35.40837,51.04119],[35.32598,50.94524],[35.39307,50.92145],[35.41367,50.80227],[35.47704,50.77274],[35.48116,50.66405],[35.39464,50.64751],[35.47463,50.49247],[35.58003,50.45117],[35.61711,50.35707],[35.73659,50.35489],[35.80388,50.41356],[35.8926,50.43829],[36.06893,50.45205],[36.20763,50.3943],[36.30101,50.29088],[36.47817,50.31457],[36.58371,50.28563],[36.56655,50.2413],[36.64571,50.218],[36.69377,50.26982],[36.91762,50.34963],[37.08468,50.34935],[37.48204,50.46079],[37.47243,50.36277],[37.62486,50.29966],[37.62879,50.24481],[37.61113,50.21976],[37.75807,50.07896],[37.79515,50.08425],[37.90776,50.04194],[38.02999,49.94482],[38.02999,49.90592],[38.21675,49.98104],[38.18517,50.08161],[38.32524,50.08866],[38.35408,50.00664],[38.65688,49.97176],[38.68677,50.00904],[38.73311,49.90238],[38.90477,49.86787],[38.9391,49.79524],[39.1808,49.88911],[39.27968,49.75976],[39.44496,49.76067],[39.59142,49.73758],[39.65047,49.61761],[39.84548,49.56064],[40.13249,49.61672],[40.16683,49.56865],[40.03636,49.52321],[40.03087,49.45452],[40.1141,49.38798],[40.14912,49.37681],[40.18331,49.34996],[40.22176,49.25683],[40.01988,49.1761],[39.93437,49.05709],[39.6836,49.05121],[39.6683,48.99454],[39.71353,48.98959],[39.72649,48.9754],[39.74874,48.98675],[39.78368,48.91596],[39.98967,48.86901],[40.03636,48.91957],[40.08168,48.87443],[39.97182,48.79398],[39.79466,48.83739],[39.73104,48.7325],[39.71765,48.68673],[39.67226,48.59368],[39.79764,48.58668],[39.84548,48.57821],[39.86196,48.46633],[39.88794,48.44226],[39.94847,48.35055],[39.84136,48.33321],[39.84273,48.30947],[39.90041,48.3049],[39.91465,48.26743],[39.95248,48.29972],[39.9693,48.29904],[39.97325,48.31399],[39.99241,48.31768],[40.00752,48.22445],[39.94847,48.22811],[39.83724,48.06501],[39.88256,48.04482],[39.77544,48.04206],[39.82213,47.96396],[39.73935,47.82876],[38.87979,47.87719],[38.79628,47.81109],[38.76379,47.69346],[38.35062,47.61631],[38.28679,47.53552],[38.28954,47.39255],[38.22225,47.30788],[38.33074,47.30508],[38.32112,47.2585],[38.23049,47.2324],[38.22955,47.12069],[38.3384,46.98085],[38.12112,46.86078],[37.62608,46.82615],[35.23066,45.79231],[34.96015,45.75634],[34.79905,45.81009],[34.80153,45.90047],[34.75479,45.90705],[34.66679,45.97136],[34.60861,45.99347],[34.55889,45.99347],[34.52011,45.95097],[34.48729,45.94267],[34.44155,45.95995],[34.41221,46.00245],[34.33912,46.06114],[34.25111,46.0532],[34.181,46.06804],[34.12929,46.10494],[34.07311,46.11769],[34.05272,46.10838],[33.91549,46.15938],[33.85234,46.19863],[33.79715,46.20482],[33.74047,46.18555],[33.646,46.23028],[33.61517,46.22615],[33.63854,46.14147],[33.61467,46.13561],[33.57318,46.10317],[33.59087,46.06013],[33.54017,46.0123],[31.62627,45.50633],[32.99857,44.48323],[33.66142,43.9825],[39.81147,43.06294]]],[[[21.46766,55.21115],[21.38446,55.29348],[21.35465,55.28427],[21.26425,55.24456],[20.95181,55.27994],[20.60454,55.40986],[18.57853,55.25302],[19.64312,54.45423],[19.8038,54.44203],[20.63871,54.3706],[21.41123,54.32395],[22.79705,54.36264],[22.7253,54.41732],[22.70208,54.45312],[22.67788,54.532],[22.71293,54.56454],[22.68021,54.58486],[22.7522,54.63525],[22.74225,54.64339],[22.75467,54.6483],[22.73397,54.66604],[22.73631,54.72952],[22.87317,54.79492],[22.85083,54.88711],[22.76422,54.92521],[22.68723,54.9811],[22.65451,54.97037],[22.60075,55.01863],[22.58907,55.07085],[22.47688,55.04408],[22.31562,55.0655],[22.14267,55.05345],[22.11697,55.02131],[22.06087,55.02935],[22.02582,55.05078],[22.03984,55.07888],[21.99543,55.08691],[21.96505,55.07353],[21.85521,55.09493],[21.64954,55.1791],[21.55605,55.20311],[21.51095,55.18507],[21.46766,55.21115]]]]}},{type:"Feature",properties:{iso1A2:"RW",iso1A3:"RWA",iso1N3:"646",wikidata:"Q1037",nameEn:"Rwanda",groups:["014","202","002"],callingCodes:["250"]},geometry:{type:"MultiPolygon",coordinates:[[[[30.47194,-1.0555],[30.35212,-1.06896],[30.16369,-1.34303],[29.912,-1.48269],[29.82657,-1.31187],[29.59061,-1.39016],[29.53062,-1.40499],[29.45038,-1.5054],[29.36322,-1.50887],[29.24323,-1.66826],[29.24458,-1.69663],[29.11847,-1.90576],[29.17562,-2.12278],[29.105,-2.27043],[29.00051,-2.29001],[28.95642,-2.37321],[28.89601,-2.37321],[28.86826,-2.41888],[28.86846,-2.44866],[28.89132,-2.47557],[28.89342,-2.49017],[28.88846,-2.50493],[28.87497,-2.50887],[28.86209,-2.5231],[28.86193,-2.53185],[28.87943,-2.55165],[28.89288,-2.55848],[28.90226,-2.62385],[28.89793,-2.66111],[28.94346,-2.69124],[29.00357,-2.70596],[29.04081,-2.7416],[29.0562,-2.58632],[29.32234,-2.6483],[29.36805,-2.82933],[29.88237,-2.75105],[29.95911,-2.33348],[30.14034,-2.43626],[30.42933,-2.31064],[30.54501,-2.41404],[30.83915,-2.35795],[30.89303,-2.08223],[30.80802,-1.91477],[30.84079,-1.64652],[30.71974,-1.43244],[30.57123,-1.33264],[30.50889,-1.16412],[30.45116,-1.10641],[30.47194,-1.0555]]]]}},{type:"Feature",properties:{iso1A2:"SA",iso1A3:"SAU",iso1N3:"682",wikidata:"Q851",nameEn:"Saudi Arabia",groups:["145","142"],callingCodes:["966"]},geometry:{type:"MultiPolygon",coordinates:[[[[40.01521,32.05667],[39.29903,32.23259],[38.99233,31.99721],[36.99791,31.50081],[37.99354,30.49998],[37.66395,30.33245],[37.4971,29.99949],[36.75083,29.86903],[36.50005,29.49696],[36.07081,29.18469],[34.95987,29.35727],[34.88293,29.37455],[34.46254,27.99552],[34.51305,27.70027],[37.8565,22.00903],[39.63762,18.37348],[41.37609,16.19728],[42.15205,16.40211],[42.76801,16.40371],[42.94625,16.39721],[42.94351,16.49467],[42.97215,16.51093],[43.11601,16.53166],[43.15274,16.67248],[43.22066,16.65179],[43.21325,16.74416],[43.25857,16.75304],[43.26303,16.79479],[43.24801,16.80613],[43.22956,16.80613],[43.22012,16.83932],[43.18338,16.84852],[43.1398,16.90696],[43.19328,16.94703],[43.1813,16.98438],[43.18233,17.02673],[43.23967,17.03428],[43.17787,17.14717],[43.20156,17.25901],[43.32653,17.31179],[43.22533,17.38343],[43.29185,17.53224],[43.43005,17.56148],[43.70631,17.35762],[44.50126,17.47475],[46.31018,17.20464],[46.76494,17.29151],[47.00571,16.94765],[47.48245,17.10808],[47.58351,17.50366],[48.19996,18.20584],[49.04884,18.59899],[52.00311,19.00083],[54.99756,20.00083],[55.66469,21.99658],[55.2137,22.71065],[55.13599,22.63334],[52.56622,22.94341],[51.59617,24.12041],[51.58871,24.27256],[51.41644,24.39615],[51.58834,24.66608],[51.39468,24.62785],[51.29972,24.50747],[51.09638,24.46907],[50.92992,24.54396],[50.8133,24.74049],[50.57069,25.57887],[50.302,25.87592],[50.26923,26.08243],[50.38162,26.53976],[50.71771,26.73086],[50.37726,27.89227],[49.98877,27.87827],[49.00421,28.81495],[48.42991,28.53628],[47.70561,28.5221],[47.59863,28.66798],[47.58376,28.83382],[47.46202,29.0014],[46.5527,29.10283],[46.42415,29.05947],[44.72255,29.19736],[42.97796,30.48295],[42.97601,30.72204],[40.01521,32.05667]]]]}},{type:"Feature",properties:{iso1A2:"SB",iso1A3:"SLB",iso1N3:"090",wikidata:"Q685",nameEn:"Solomon Islands",groups:["054","009"],driveSide:"left",callingCodes:["677"]},geometry:{type:"MultiPolygon",coordinates:[[[[174,-12.72535],[160.43769,-4.17974],[156.03296,-6.55528],[156.03993,-6.65703],[155.92557,-6.84664],[155.69784,-6.92661],[155.60735,-6.92266],[154.74815,-7.33315],[160.04026,-13.08769],[174,-12.72535]]]]}},{type:"Feature",properties:{iso1A2:"SC",iso1A3:"SYC",iso1N3:"690",wikidata:"Q1042",nameEn:"Seychelles",groups:["014","202","002"],driveSide:"left",callingCodes:["248"]},geometry:{type:"MultiPolygon",coordinates:[[[[43.75112,-10.38913],[54.83239,-10.93575],[66.3222,5.65313],[43.75112,-10.38913]]]]}},{type:"Feature",properties:{iso1A2:"SD",iso1A3:"SDN",iso1N3:"729",wikidata:"Q1049",nameEn:"Sudan",groups:["015","002"],callingCodes:["249"]},geometry:{type:"MultiPolygon",coordinates:[[[[37.8565,22.00903],[34.0765,22.00501],[33.99686,21.76784],[33.57251,21.72406],[33.17563,22.00405],[24.99885,21.99535],[24.99794,19.99661],[23.99715,20.00038],[23.99539,19.49944],[23.99997,15.69575],[23.62785,15.7804],[23.38812,15.69649],[23.10792,15.71297],[22.93201,15.55107],[22.92579,15.47007],[22.99584,15.40105],[22.99584,15.22989],[22.66115,14.86308],[22.70474,14.69149],[22.38562,14.58907],[22.44944,14.24986],[22.55997,14.23024],[22.5553,14.11704],[22.22995,13.96754],[22.08674,13.77863],[22.29689,13.3731],[22.1599,13.19281],[22.02914,13.13976],[21.94819,13.05637],[21.81432,12.81362],[21.89371,12.68001],[21.98711,12.63292],[22.15679,12.66634],[22.22684,12.74682],[22.46345,12.61925],[22.38873,12.45514],[22.50548,12.16769],[22.48369,12.02766],[22.64092,12.07485],[22.54907,11.64372],[22.7997,11.40424],[22.93124,11.41645],[22.97249,11.21955],[22.87758,10.91915],[23.02221,10.69235],[23.3128,10.45214],[23.67164,9.86923],[23.69155,9.67566],[24.09319,9.66572],[24.12744,9.73784],[24.49389,9.79962],[24.84653,9.80643],[24.97739,9.9081],[25.05688,10.06776],[25.0918,10.33718],[25.78141,10.42599],[25.93163,10.38159],[25.93241,10.17941],[26.21338,9.91545],[26.35815,9.57946],[26.70685,9.48735],[27.14427,9.62858],[27.90704,9.61323],[28.99983,9.67155],[29.06988,9.74826],[29.53844,9.75133],[29.54,10.07949],[29.94629,10.29245],[30.00389,10.28633],[30.53005,9.95992],[30.82893,9.71451],[30.84605,9.7498],[31.28504,9.75287],[31.77539,10.28939],[31.99177,10.65065],[32.46967,11.04662],[32.39358,11.18207],[32.39578,11.70208],[32.10079,11.95203],[32.73921,11.95203],[32.73921,12.22757],[33.25876,12.22111],[33.13988,11.43248],[33.26977,10.83632],[33.24645,10.77913],[33.52294,10.64382],[33.66604,10.44254],[33.80913,10.32994],[33.90159,10.17179],[33.96984,10.15446],[33.99185,9.99623],[33.96323,9.80972],[33.9082,9.762],[33.87958,9.49937],[34.10229,9.50238],[34.08717,9.55243],[34.13186,9.7492],[34.20484,9.9033],[34.22718,10.02506],[34.32102,10.11599],[34.34783,10.23914],[34.2823,10.53508],[34.4372,10.781],[34.59062,10.89072],[34.77383,10.74588],[34.77532,10.69027],[34.86618,10.74588],[34.86916,10.78832],[34.97491,10.86147],[34.97789,10.91559],[34.93172,10.95946],[35.01215,11.19626],[34.95704,11.24448],[35.09556,11.56278],[35.05832,11.71158],[35.11492,11.85156],[35.24302,11.91132],[35.70476,12.67101],[36.01458,12.72478],[36.14268,12.70879],[36.16651,12.88019],[36.13374,12.92665],[36.24545,13.36759],[36.38993,13.56459],[36.48824,13.83954],[36.44653,13.95666],[36.54376,14.25597],[36.44337,15.14963],[36.54276,15.23478],[36.69761,15.75323],[36.76371,15.80831],[36.92193,16.23451],[36.99777,17.07172],[37.42694,17.04041],[37.50967,17.32199],[38.13362,17.53906],[38.37133,17.66269],[38.45916,17.87167],[38.57727,17.98125],[39.63762,18.37348],[37.8565,22.00903]]]]}},{type:"Feature",properties:{iso1A2:"SE",iso1A3:"SWE",iso1N3:"752",wikidata:"Q34",nameEn:"Sweden",groups:["EU","154","150"],callingCodes:["46"]},geometry:{type:"MultiPolygon",coordinates:[[[[24.15791,65.85385],[23.90497,66.15802],[23.71339,66.21299],[23.64982,66.30603],[23.67591,66.3862],[23.63776,66.43568],[23.85959,66.56434],[23.89488,66.772],[23.98059,66.79585],[23.98563,66.84149],[23.56214,67.17038],[23.58735,67.20752],[23.54701,67.25435],[23.75372,67.29914],[23.75372,67.43688],[23.39577,67.46974],[23.54701,67.59306],[23.45627,67.85297],[23.65793,67.9497],[23.40081,68.05545],[23.26469,68.15134],[23.15377,68.14759],[23.10336,68.26551],[22.73028,68.40881],[22.00429,68.50692],[21.03001,68.88969],[20.90649,68.89696],[20.85104,68.93142],[20.91658,68.96764],[20.78802,69.03087],[20.55258,69.06069],[20.0695,69.04469],[20.28444,68.93283],[20.33435,68.80174],[20.22027,68.67246],[19.95647,68.55546],[20.22027,68.48759],[19.93508,68.35911],[18.97255,68.52416],[18.63032,68.50849],[18.39503,68.58672],[18.1241,68.53721],[18.13836,68.20874],[17.90787,67.96537],[17.30416,68.11591],[16.7409,67.91037],[16.38441,67.52923],[16.12774,67.52106],[16.09922,67.4364],[16.39154,67.21653],[16.35589,67.06419],[15.37197,66.48217],[15.49318,66.28509],[15.05113,66.15572],[14.53778,66.12399],[14.50926,65.31786],[13.64276,64.58402],[14.11117,64.46674],[14.16051,64.18725],[13.98222,64.00953],[13.23411,64.09087],[12.74105,64.02171],[12.14928,63.59373],[12.19919,63.47935],[11.98529,63.27487],[12.19919,63.00104],[12.07085,62.6297],[12.29187,62.25699],[12.14746,61.7147],[12.40595,61.57226],[12.57707,61.56547],[12.86939,61.35427],[12.69115,61.06584],[12.2277,61.02442],[12.59133,60.50559],[12.52003,60.13846],[12.36317,59.99259],[12.15641,59.8926],[11.87121,59.86039],[11.92112,59.69531],[11.69297,59.59442],[11.8213,59.24985],[11.65732,58.90177],[11.45199,58.89604],[11.4601,58.99022],[11.34459,59.11672],[11.15367,59.07862],[11.08911,58.98745],[10.64958,58.89391],[10.40861,58.38489],[12.16597,56.60205],[12.07466,56.29488],[12.65312,56.04345],[12.6372,55.91371],[12.88472,55.63369],[12.60345,55.42675],[12.84405,55.13257],[14.28399,55.1553],[14.89259,55.5623],[15.79951,55.54655],[19.64795,57.06466],[19.84909,57.57876],[20.5104,59.15546],[19.08191,60.19152],[19.23413,60.61414],[20.15877,63.06556],[24.14112,65.39731],[24.15107,65.81427],[24.14798,65.83466],[24.15791,65.85385]]]]}},{type:"Feature",properties:{iso1A2:"SG",iso1A3:"SGP",iso1N3:"702",wikidata:"Q334",nameEn:"Singapore",groups:["035","142"],driveSide:"left",callingCodes:["65"]},geometry:{type:"MultiPolygon",coordinates:[[[[104.00131,1.42405],[103.93384,1.42926],[103.89565,1.42841],[103.86383,1.46288],[103.81181,1.47953],[103.76395,1.45183],[103.74161,1.4502],[103.7219,1.46108],[103.67468,1.43166],[103.62738,1.35255],[103.56591,1.19719],[103.66049,1.18825],[103.74084,1.12902],[104.03085,1.26954],[104.12282,1.27714],[104.08072,1.35998],[104.09162,1.39694],[104.08871,1.42015],[104.07348,1.43322],[104.04622,1.44691],[104.02277,1.4438],[104.00131,1.42405]]]]}},{type:"Feature",properties:{iso1A2:"SH",iso1A3:"SHN",iso1N3:"654",wikidata:"Q34497",nameEn:"Saint Helena, Ascension and Tristan da Cunha",country:"GB",groups:["011","202","002"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["290"]},geometry:{type:"MultiPolygon",coordinates:[[[[-14.82771,-8.70814],[-13.48367,-36.6746],[-11.55782,-36.60319],[-11.48092,-37.8367],[-13.41694,-37.88844],[-13.29655,-40.02846],[-9.34669,-41.00353],[-4.97086,-15.55882],[-13.33271,-8.07391],[-14.82771,-8.70814]]]]}},{type:"Feature",properties:{iso1A2:"SI",iso1A3:"SVN",iso1N3:"705",wikidata:"Q215",nameEn:"Slovenia",groups:["EU","039","150"],callingCodes:["386"]},geometry:{type:"MultiPolygon",coordinates:[[[[16.50139,46.56684],[16.39217,46.63673],[16.38594,46.6549],[16.41863,46.66238],[16.42641,46.69228],[16.37816,46.69975],[16.30966,46.7787],[16.31303,46.79838],[16.3408,46.80641],[16.34547,46.83836],[16.2941,46.87137],[16.2365,46.87775],[16.21892,46.86961],[16.15711,46.85434],[16.14365,46.8547],[16.10983,46.867],[16.05786,46.83927],[15.99054,46.82772],[15.99126,46.78199],[15.98432,46.74991],[15.99769,46.7266],[16.02808,46.71094],[16.04347,46.68694],[16.04036,46.6549],[15.99988,46.67947],[15.98512,46.68463],[15.94864,46.68769],[15.87691,46.7211],[15.8162,46.71897],[15.78518,46.70712],[15.76771,46.69863],[15.73823,46.70011],[15.72279,46.69548],[15.69523,46.69823],[15.67411,46.70735],[15.6543,46.70616],[15.6543,46.69228],[15.6365,46.6894],[15.63255,46.68069],[15.62317,46.67947],[15.59826,46.68908],[15.54533,46.66985],[15.55333,46.64988],[15.54431,46.6312],[15.46906,46.61321],[15.45514,46.63697],[15.41235,46.65556],[15.23711,46.63994],[15.14215,46.66131],[15.01451,46.641],[14.98024,46.6009],[14.96002,46.63459],[14.92283,46.60848],[14.87129,46.61],[14.86419,46.59411],[14.83549,46.56614],[14.81836,46.51046],[14.72185,46.49974],[14.66892,46.44936],[14.5942,46.43434],[14.56463,46.37208],[14.52176,46.42617],[14.45877,46.41717],[14.42608,46.44614],[14.314,46.43327],[14.28326,46.44315],[14.15989,46.43327],[14.12097,46.47724],[14.04002,46.49117],[14.00422,46.48474],[13.89837,46.52331],[13.7148,46.5222],[13.68684,46.43881],[13.59777,46.44137],[13.5763,46.42613],[13.5763,46.40915],[13.47019,46.3621],[13.43418,46.35992],[13.44808,46.33507],[13.37671,46.29668],[13.42218,46.20758],[13.47587,46.22725],[13.56114,46.2054],[13.56682,46.18703],[13.64451,46.18966],[13.66472,46.17392],[13.64053,46.13587],[13.57072,46.09022],[13.50104,46.05986],[13.49568,46.04839],[13.50998,46.04498],[13.49702,46.01832],[13.47474,46.00546],[13.50104,45.98078],[13.52963,45.96588],[13.56759,45.96991],[13.58903,45.99009],[13.62074,45.98388],[13.63458,45.98947],[13.64307,45.98326],[13.6329,45.94894],[13.63815,45.93607],[13.61931,45.91782],[13.60857,45.89907],[13.59565,45.89446],[13.58644,45.88173],[13.57563,45.8425],[13.58858,45.83503],[13.59784,45.8072],[13.66986,45.79955],[13.8235,45.7176],[13.83332,45.70855],[13.83422,45.68703],[13.87933,45.65207],[13.9191,45.6322],[13.8695,45.60835],[13.86771,45.59898],[13.84106,45.58185],[13.78445,45.5825],[13.74587,45.59811],[13.7198,45.59352],[13.6076,45.64761],[13.45644,45.59464],[13.56979,45.4895],[13.62902,45.45898],[13.67398,45.4436],[13.7785,45.46787],[13.81742,45.43729],[13.88124,45.42637],[13.90771,45.45149],[13.97309,45.45258],[13.99488,45.47551],[13.96063,45.50825],[14.00578,45.52352],[14.07116,45.48752],[14.20348,45.46896],[14.22371,45.50388],[14.24239,45.50607],[14.26611,45.48239],[14.27681,45.4902],[14.32487,45.47142],[14.36693,45.48642],[14.49769,45.54424],[14.5008,45.60852],[14.53816,45.6205],[14.57397,45.67165],[14.60977,45.66403],[14.59576,45.62812],[14.69694,45.57366],[14.68605,45.53006],[14.71718,45.53442],[14.80124,45.49515],[14.81992,45.45913],[14.90554,45.47769],[14.92266,45.52788],[15.02385,45.48533],[15.05187,45.49079],[15.16862,45.42309],[15.27758,45.46678],[15.33051,45.45258],[15.38188,45.48752],[15.30249,45.53224],[15.29837,45.5841],[15.27747,45.60504],[15.31027,45.6303],[15.34695,45.63382],[15.34214,45.64702],[15.38952,45.63682],[15.4057,45.64727],[15.34919,45.71623],[15.30872,45.69014],[15.25423,45.72275],[15.40836,45.79491],[15.47531,45.79802],[15.47325,45.8253],[15.52234,45.82195],[15.57952,45.84953],[15.64185,45.82915],[15.66662,45.84085],[15.70411,45.8465],[15.68232,45.86819],[15.68383,45.88867],[15.67967,45.90455],[15.70636,45.92116],[15.70327,46.00015],[15.71246,46.01196],[15.72977,46.04682],[15.62317,46.09103],[15.6083,46.11992],[15.59909,46.14761],[15.64904,46.19229],[15.6434,46.21396],[15.67395,46.22478],[15.75436,46.21969],[15.75479,46.20336],[15.78817,46.21719],[15.79284,46.25811],[15.97965,46.30652],[16.07616,46.3463],[16.07314,46.36458],[16.05065,46.3833],[16.05281,46.39141],[16.14859,46.40547],[16.18824,46.38282],[16.30233,46.37837],[16.30162,46.40437],[16.27329,46.41467],[16.27398,46.42875],[16.25124,46.48067],[16.23961,46.49653],[16.26759,46.50566],[16.26733,46.51505],[16.29793,46.5121],[16.37193,46.55008],[16.38771,46.53608],[16.44036,46.5171],[16.5007,46.49644],[16.52604,46.47831],[16.59527,46.47524],[16.52604,46.5051],[16.52885,46.53303],[16.50139,46.56684]]]]}},{type:"Feature",properties:{iso1A2:"SJ",iso1A3:"SJM",iso1N3:"744",wikidata:"Q842829",nameEn:"Svalbard and Jan Mayen",country:"NO",groups:["154","150"],callingCodes:["47 79"]},geometry:{type:"MultiPolygon",coordinates:[[[[-7.49892,77.24208],[32.07813,72.01005],[36.85549,84.09565],[-7.49892,77.24208]]],[[[-9.18243,72.23144],[-10.71459,70.09565],[-5.93364,70.76368],[-9.18243,72.23144]]]]}},{type:"Feature",properties:{iso1A2:"SK",iso1A3:"SVK",iso1N3:"703",wikidata:"Q214",nameEn:"Slovakia",groups:["EU","151","150"],callingCodes:["421"]},geometry:{type:"MultiPolygon",coordinates:[[[[19.82237,49.27806],[19.78581,49.41701],[19.72127,49.39288],[19.6375,49.40897],[19.64162,49.45184],[19.57845,49.46077],[19.53313,49.52856],[19.52626,49.57311],[19.45348,49.61583],[19.37795,49.574],[19.36009,49.53747],[19.25435,49.53391],[19.18019,49.41165],[18.9742,49.39557],[18.97283,49.49914],[18.94536,49.52143],[18.84521,49.51672],[18.74761,49.492],[18.67757,49.50895],[18.6144,49.49824],[18.57183,49.51162],[18.53063,49.49022],[18.54848,49.47059],[18.44686,49.39467],[18.4084,49.40003],[18.4139,49.36517],[18.36446,49.3267],[18.18456,49.28909],[18.15022,49.24518],[18.1104,49.08624],[18.06885,49.03157],[17.91814,49.01784],[17.87831,48.92679],[17.77944,48.92318],[17.73126,48.87885],[17.7094,48.86721],[17.5295,48.81117],[17.45671,48.85004],[17.3853,48.80936],[17.29054,48.85546],[17.19355,48.87602],[17.11202,48.82925],[17.00215,48.70887],[16.93955,48.60371],[16.94611,48.53614],[16.85204,48.44968],[16.8497,48.38321],[16.83588,48.3844],[16.83317,48.38138],[16.84243,48.35258],[16.90903,48.32519],[16.89461,48.31332],[16.97701,48.17385],[17.02919,48.13996],[17.05735,48.14179],[17.09168,48.09366],[17.07039,48.0317],[17.16001,48.00636],[17.23699,48.02094],[17.71215,47.7548],[18.02938,47.75665],[18.29305,47.73541],[18.56496,47.76588],[18.66521,47.76772],[18.74074,47.8157],[18.8506,47.82308],[18.76821,47.87469],[18.76134,47.97499],[18.82176,48.04206],[19.01952,48.07052],[19.23924,48.0595],[19.28182,48.08336],[19.47957,48.09437],[19.52489,48.19791],[19.63338,48.25006],[19.92452,48.1283],[20.24312,48.2784],[20.29943,48.26104],[20.5215,48.53336],[20.83248,48.5824],[21.11516,48.49546],[21.44063,48.58456],[21.6068,48.50365],[21.67134,48.3989],[21.72525,48.34628],[21.8279,48.33321],[21.83339,48.36242],[22.14689,48.4005],[22.16023,48.56548],[22.21379,48.6218],[22.34151,48.68893],[22.42934,48.92857],[22.48296,48.99172],[22.54338,49.01424],[22.56155,49.08865],[22.04427,49.22136],[21.96385,49.3437],[21.82927,49.39467],[21.77983,49.35443],[21.62328,49.4447],[21.43376,49.41433],[21.27858,49.45988],[21.19756,49.4054],[21.12477,49.43666],[21.041,49.41791],[21.09799,49.37176],[20.98733,49.30774],[20.9229,49.29626],[20.77971,49.35383],[20.72274,49.41813],[20.61666,49.41791],[20.5631,49.375],[20.46422,49.41612],[20.39939,49.3896],[20.31728,49.39914],[20.31453,49.34817],[20.21977,49.35265],[20.13738,49.31685],[20.08238,49.1813],[19.98494,49.22904],[19.90529,49.23532],[19.86409,49.19316],[19.75286,49.20751],[19.82237,49.27806]]]]}},{type:"Feature",properties:{iso1A2:"SL",iso1A3:"SLE",iso1N3:"694",wikidata:"Q1044",nameEn:"Sierra Leone",groups:["011","202","002"],callingCodes:["232"]},geometry:{type:"MultiPolygon",coordinates:[[[[-10.27575,8.48711],[-10.37257,8.48941],[-10.54891,8.31174],[-10.63934,8.35326],[-10.70565,8.29235],[-10.61422,8.5314],[-10.47707,8.67669],[-10.56197,8.81225],[-10.5783,9.06386],[-10.74484,9.07998],[-10.6534,9.29919],[-11.2118,10.00098],[-11.89624,9.99763],[-11.91023,9.93927],[-12.12634,9.87203],[-12.24262,9.92386],[-12.47254,9.86834],[-12.76788,9.3133],[-12.94095,9.26335],[-13.08953,9.0409],[-13.18586,9.0925],[-13.29911,9.04245],[-14.36218,8.64107],[-12.15048,6.15992],[-11.50429,6.92704],[-11.4027,6.97746],[-11.29417,7.21576],[-10.60422,7.7739],[-10.60492,8.04072],[-10.57523,8.04829],[-10.51554,8.1393],[-10.45023,8.15627],[-10.35227,8.15223],[-10.29839,8.21283],[-10.31635,8.28554],[-10.30084,8.30008],[-10.27575,8.48711]]]]}},{type:"Feature",properties:{iso1A2:"SM",iso1A3:"SMR",iso1N3:"674",wikidata:"Q238",nameEn:"San Marino",groups:["039","150"],callingCodes:["378"]},geometry:{type:"MultiPolygon",coordinates:[[[[12.45648,43.89369],[12.48771,43.89706],[12.49429,43.90973],[12.49247,43.91774],[12.49724,43.92248],[12.50269,43.92363],[12.50496,43.93017],[12.51553,43.94096],[12.51427,43.94897],[12.50655,43.95796],[12.50875,43.96198],[12.50622,43.97131],[12.51109,43.97201],[12.51064,43.98165],[12.5154,43.98508],[12.51463,43.99122],[12.50678,43.99113],[12.49406,43.98492],[12.47853,43.98052],[12.46205,43.97463],[12.44684,43.96597],[12.43662,43.95698],[12.42005,43.9578],[12.41414,43.95273],[12.40415,43.95485],[12.40506,43.94325],[12.41165,43.93769],[12.41551,43.92984],[12.40733,43.92379],[12.41233,43.90956],[12.40935,43.9024],[12.41641,43.89991],[12.44184,43.90498],[12.45648,43.89369]]]]}},{type:"Feature",properties:{iso1A2:"SN",iso1A3:"SEN",iso1N3:"686",wikidata:"Q1041",nameEn:"Senegal",groups:["011","202","002"],callingCodes:["221"]},geometry:{type:"MultiPolygon",coordinates:[[[[-14.32144,16.61495],[-15.00557,16.64997],[-15.6509,16.50315],[-16.27016,16.51565],[-16.4429,16.20605],[-16.44814,16.09753],[-16.48967,16.0496],[-16.50854,16.09032],[-17.15288,16.07139],[-18.35085,14.63444],[-17.43598,13.59273],[-15.47902,13.58758],[-15.36504,13.79313],[-14.93719,13.80173],[-14.34721,13.46578],[-13.8955,13.59126],[-13.79409,13.34472],[-14.36795,13.23033],[-15.14917,13.57989],[-15.26908,13.37768],[-15.80478,13.34832],[-15.80355,13.16729],[-16.69343,13.16791],[-16.74676,13.06025],[-17.43966,13.04579],[-17.4623,11.92379],[-16.70562,12.34803],[-16.38191,12.36449],[-16.20591,12.46157],[-15.67302,12.42974],[-15.17582,12.6847],[-13.70523,12.68013],[-13.05296,12.64003],[-13.06603,12.49342],[-12.87336,12.51892],[-12.35415,12.32758],[-11.91331,12.42008],[-11.46267,12.44559],[-11.37536,12.40788],[-11.39935,12.97808],[-11.63025,13.39174],[-11.83345,13.33333],[-12.06897,13.71049],[-11.93043,13.84505],[-12.23936,14.76324],[-13.11029,15.52116],[-13.43135,16.09022],[-13.80075,16.13961],[-14.32144,16.61495]]]]}},{type:"Feature",properties:{iso1A2:"SO",iso1A3:"SOM",iso1N3:"706",wikidata:"Q1045",nameEn:"Somalia",groups:["014","202","002"],callingCodes:["252"]},geometry:{type:"MultiPolygon",coordinates:[[[[48.95249,11.56816],[43.42425,11.70983],[42.95776,10.98533],[42.69452,10.62672],[42.87643,10.18441],[43.0937,9.90579],[43.23518,9.84605],[43.32613,9.59205],[44.19222,8.93028],[46.99339,7.9989],[47.92477,8.00111],[47.97917,8.00124],[44.98104,4.91821],[44.02436,4.9451],[43.40263,4.79289],[43.04177,4.57923],[42.97746,4.44032],[42.84526,4.28357],[42.55853,4.20518],[42.07619,4.17667],[41.89488,3.97375],[41.31368,3.14314],[40.98767,2.82959],[41.00099,-.83068],[41.56,-1.59812],[41.56362,-1.66375],[41.75542,-1.85308],[49.16337,2.78611],[52.253,11.68582],[51.12877,12.56479],[48.95249,11.56816]]]]}},{type:"Feature",properties:{iso1A2:"SR",iso1A3:"SUR",iso1N3:"740",wikidata:"Q730",nameEn:"Suriname",groups:["005","419","019"],driveSide:"left",callingCodes:["597"]},geometry:{type:"MultiPolygon",coordinates:[[[[-54.26916,5.26909],[-54.01877,5.52789],[-54.01074,5.68785],[-53.7094,6.2264],[-56.84822,6.73257],[-57.31629,5.33714],[-57.22536,5.15605],[-57.37442,5.0208],[-57.8699,4.89394],[-58.0307,3.95513],[-57.35891,3.32121],[-56.70519,2.02964],[-56.55439,2.02003],[-56.47045,1.95135],[-55.99278,1.83137],[-55.89863,1.89861],[-55.92159,2.05236],[-56.13054,2.27723],[-55.96292,2.53188],[-55.71493,2.40342],[-55.01919,2.564],[-54.6084,2.32856],[-54.42864,2.42442],[-54.28534,2.67798],[-53.9849,3.58697],[-53.98914,3.627],[-54.05128,3.63557],[-54.19367,3.84387],[-54.38444,4.13222],[-54.4717,4.91964],[-54.26916,5.26909]]]]}},{type:"Feature",properties:{iso1A2:"SS",iso1A3:"SSD",iso1N3:"728",wikidata:"Q958",nameEn:"South Sudan",groups:["014","202","002"],callingCodes:["211"]},geometry:{type:"MultiPolygon",coordinates:[[[[34.10229,9.50238],[33.87958,9.49937],[33.9082,9.762],[33.96323,9.80972],[33.99185,9.99623],[33.96984,10.15446],[33.90159,10.17179],[33.80913,10.32994],[33.66604,10.44254],[33.52294,10.64382],[33.24645,10.77913],[33.26977,10.83632],[33.13988,11.43248],[33.25876,12.22111],[32.73921,12.22757],[32.73921,11.95203],[32.10079,11.95203],[32.39578,11.70208],[32.39358,11.18207],[32.46967,11.04662],[31.99177,10.65065],[31.77539,10.28939],[31.28504,9.75287],[30.84605,9.7498],[30.82893,9.71451],[30.53005,9.95992],[30.00389,10.28633],[29.94629,10.29245],[29.54,10.07949],[29.53844,9.75133],[29.06988,9.74826],[28.99983,9.67155],[27.90704,9.61323],[27.14427,9.62858],[26.70685,9.48735],[26.35815,9.57946],[26.21338,9.91545],[25.93241,10.17941],[25.93163,10.38159],[25.78141,10.42599],[25.0918,10.33718],[25.05688,10.06776],[24.97739,9.9081],[24.84653,9.80643],[24.49389,9.79962],[24.12744,9.73784],[24.09319,9.66572],[23.69155,9.67566],[23.62179,9.53823],[23.64981,9.44303],[23.64358,9.28637],[23.56263,9.19418],[23.4848,9.16959],[23.44744,8.99128],[23.59065,8.99743],[23.51905,8.71749],[24.25691,8.69288],[24.13238,8.36959],[24.35965,8.26177],[24.85156,8.16933],[24.98855,7.96588],[25.25319,7.8487],[25.29214,7.66675],[25.20649,7.61115],[25.20337,7.50312],[25.35281,7.42595],[25.37461,7.33024],[25.90076,7.09549],[26.38022,6.63493],[26.32729,6.36272],[26.58259,6.1987],[26.51721,6.09655],[27.22705,5.71254],[27.22705,5.62889],[27.28621,5.56382],[27.23017,5.37167],[27.26886,5.25876],[27.44012,5.07349],[27.56656,4.89375],[27.65462,4.89375],[27.76469,4.79284],[27.79551,4.59976],[28.20719,4.35614],[28.6651,4.42638],[28.8126,4.48784],[29.03054,4.48784],[29.22207,4.34297],[29.43341,4.50101],[29.49726,4.7007],[29.82087,4.56246],[29.79666,4.37809],[30.06964,4.13221],[30.1621,4.10586],[30.22374,3.93896],[30.27658,3.95653],[30.47691,3.83353],[30.55396,3.84451],[30.57378,3.74567],[30.56277,3.62703],[30.78512,3.67097],[30.80713,3.60506],[30.85997,3.5743],[30.85153,3.48867],[30.97601,3.693],[31.16666,3.79853],[31.29476,3.8015],[31.50478,3.67814],[31.50776,3.63652],[31.72075,3.74354],[31.81459,3.82083],[31.86821,3.78664],[31.96205,3.6499],[31.95907,3.57408],[32.05187,3.589],[32.08491,3.56287],[32.08866,3.53543],[32.19888,3.50867],[32.20782,3.6053],[32.41337,3.748],[32.72021,3.77327],[32.89746,3.81339],[33.02852,3.89296],[33.18356,3.77812],[33.51264,3.75068],[33.9873,4.23316],[34.47601,4.72162],[35.34151,5.02364],[35.30992,4.90402],[35.47843,4.91872],[35.42366,4.76969],[35.51424,4.61643],[35.9419,4.61933],[35.82118,4.77382],[35.81968,5.10757],[35.8576,5.33413],[35.50792,5.42431],[35.29938,5.34042],[35.31188,5.50106],[35.13058,5.62118],[35.12611,5.68937],[35.00546,5.89387],[34.96227,6.26415],[35.01738,6.46991],[34.87736,6.60161],[34.77459,6.5957],[34.65096,6.72589],[34.53776,6.74808],[34.53925,6.82794],[34.47669,6.91076],[34.35753,6.91963],[34.19369,7.04382],[34.19369,7.12807],[34.01495,7.25664],[34.03878,7.27437],[34.02984,7.36449],[33.87642,7.5491],[33.71407,7.65983],[33.44745,7.7543],[33.32531,7.71297],[33.24637,7.77939],[33.04944,7.78989],[33.0006,7.90333],[33.08401,8.05822],[33.18083,8.13047],[33.1853,8.29264],[33.19721,8.40317],[33.3119,8.45474],[33.54575,8.47094],[33.66938,8.44442],[33.71407,8.3678],[33.87195,8.41938],[33.89579,8.4842],[34.01346,8.50041],[34.14453,8.60204],[34.14304,9.04654],[34.10229,9.50238]]]]}},{type:"Feature",properties:{iso1A2:"ST",iso1A3:"STP",iso1N3:"678",wikidata:"Q1039",nameEn:"São Tomé and Principe",groups:["017","202","002"],callingCodes:["239"]},geometry:{type:"MultiPolygon",coordinates:[[[[5.9107,-.09539],[6.69416,-.53945],[8.0168,1.79377],[7.23334,2.23756],[5.9107,-.09539]]]]}},{type:"Feature",properties:{iso1A2:"SV",iso1A3:"SLV",iso1N3:"222",wikidata:"Q792",nameEn:"El Salvador",groups:["013","003","419","019"],callingCodes:["503"]},geometry:{type:"MultiPolygon",coordinates:[[[[-89.34776,14.43013],[-89.39028,14.44561],[-89.57441,14.41637],[-89.58814,14.33165],[-89.50614,14.26084],[-89.52397,14.22628],[-89.61844,14.21937],[-89.70756,14.1537],[-89.75569,14.07073],[-89.73251,14.04133],[-89.76103,14.02923],[-89.81807,14.07073],[-89.88937,14.0396],[-90.10505,13.85104],[-90.11344,13.73679],[-90.55276,12.8866],[-88.11443,12.63306],[-87.7346,13.13228],[-87.55124,13.12523],[-87.69751,13.25228],[-87.73714,13.32715],[-87.80177,13.35689],[-87.84675,13.41078],[-87.83467,13.44655],[-87.77354,13.45767],[-87.73841,13.44169],[-87.72115,13.46083],[-87.71657,13.50577],[-87.78148,13.52906],[-87.73106,13.75443],[-87.68821,13.80829],[-87.7966,13.91353],[-88.00331,13.86948],[-88.07641,13.98447],[-88.23018,13.99915],[-88.25791,13.91108],[-88.48982,13.86458],[-88.49738,13.97224],[-88.70661,14.04317],[-88.73182,14.10919],[-88.815,14.11652],[-88.85785,14.17763],[-88.94608,14.20207],[-89.04187,14.33644],[-89.34776,14.43013]]]]}},{type:"Feature",properties:{iso1A2:"SX",iso1A3:"SXM",iso1N3:"534",wikidata:"Q26273",nameEn:"Sint Maarten",country:"NL",groups:["029","003","419","019"],callingCodes:["1 721"]},geometry:{type:"MultiPolygon",coordinates:[[[[-63.29212,17.90532],[-63.07669,17.79659],[-62.93924,18.02904],[-63.02323,18.05757],[-63.04039,18.05619],[-63.0579,18.06614],[-63.07759,18.04943],[-63.09686,18.04608],[-63.11096,18.05368],[-63.13584,18.0541],[-63.33064,17.9615],[-63.29212,17.90532]]]]}},{type:"Feature",properties:{iso1A2:"SY",iso1A3:"SYR",iso1N3:"760",wikidata:"Q858",nameEn:"Syria",groups:["145","142"],callingCodes:["963"]},geometry:{type:"MultiPolygon",coordinates:[[[[42.23683,37.2863],[42.21548,37.28026],[42.20454,37.28715],[42.22381,37.30238],[42.22257,37.31395],[42.2112,37.32491],[42.19301,37.31323],[42.18225,37.28569],[42.00894,37.17209],[41.515,37.08084],[41.21937,37.07665],[40.90856,37.13147],[40.69136,37.0996],[39.81589,36.75538],[39.21538,36.66834],[39.03217,36.70911],[38.74042,36.70629],[38.55908,36.84429],[38.38859,36.90064],[38.21064,36.91842],[37.81974,36.76055],[37.68048,36.75065],[37.49103,36.66904],[37.47253,36.63243],[37.21988,36.6736],[37.16177,36.66069],[37.10894,36.6704],[37.08279,36.63495],[37.02088,36.66422],[37.01647,36.69512],[37.04619,36.71101],[37.04399,36.73483],[36.99886,36.74012],[36.99557,36.75997],[36.66727,36.82901],[36.61581,36.74629],[36.62681,36.71189],[36.57398,36.65186],[36.58829,36.58295],[36.54206,36.49539],[36.6081,36.33772],[36.65653,36.33861],[36.68672,36.23677],[36.6125,36.22592],[36.50463,36.2419],[36.4617,36.20461],[36.39206,36.22088],[36.37474,36.01163],[36.33956,35.98687],[36.30099,36.00985],[36.28338,36.00273],[36.29769,35.96086],[36.27678,35.94839],[36.25366,35.96264],[36.19973,35.95195],[36.17441,35.92076],[36.1623,35.80925],[36.14029,35.81015],[36.13919,35.83692],[36.11827,35.85923],[35.99829,35.88242],[36.01844,35.92403],[36.00514,35.94113],[35.98499,35.94107],[35.931,35.92109],[35.51152,36.10954],[35.48515,34.70851],[35.97386,34.63322],[35.98718,34.64977],[36.29165,34.62991],[36.32399,34.69334],[36.35135,34.68516],[36.35384,34.65447],[36.42941,34.62505],[36.46003,34.6378],[36.45299,34.59438],[36.41429,34.61175],[36.39846,34.55672],[36.3369,34.52629],[36.34745,34.5002],[36.4442,34.50165],[36.46179,34.46541],[36.55853,34.41609],[36.53039,34.3798],[36.56556,34.31881],[36.60778,34.31009],[36.58667,34.27667],[36.59195,34.2316],[36.62537,34.20251],[36.5128,34.09916],[36.50576,34.05982],[36.41078,34.05253],[36.28589,33.91981],[36.38263,33.86579],[36.3967,33.83365],[36.14517,33.85118],[36.06778,33.82927],[35.9341,33.6596],[36.05723,33.57904],[35.94465,33.52774],[35.94816,33.47886],[35.88668,33.43183],[35.82577,33.40479],[35.81324,33.36354],[35.77477,33.33609],[35.813,33.3172],[35.77513,33.27342],[35.81295,33.24841],[35.81647,33.2028],[35.83846,33.19397],[35.84285,33.16673],[35.81911,33.1336],[35.81911,33.11077],[35.84802,33.1031],[35.87188,32.98028],[35.89298,32.9456],[35.87012,32.91976],[35.84021,32.8725],[35.83758,32.82817],[35.78745,32.77938],[35.75983,32.74803],[35.88405,32.71321],[35.93307,32.71966],[35.96633,32.66237],[36.02239,32.65911],[36.08074,32.51463],[36.20379,32.52751],[36.20875,32.49529],[36.23948,32.50108],[36.40959,32.37908],[36.83946,32.31293],[38.79171,33.37328],[40.64314,34.31604],[40.97676,34.39788],[41.12388,34.65742],[41.2345,34.80049],[41.21654,35.1508],[41.26569,35.42708],[41.38184,35.62502],[41.37027,35.84095],[41.2564,36.06012],[41.28864,36.35368],[41.40058,36.52502],[41.81736,36.58782],[42.36697,37.0627],[42.35724,37.10998],[42.32313,37.17814],[42.34735,37.22548],[42.2824,37.2798],[42.26039,37.27017],[42.23683,37.2863]]]]}},{type:"Feature",properties:{iso1A2:"SZ",iso1A3:"SWZ",iso1N3:"748",wikidata:"Q1050",nameEn:"Eswatini",aliases:["Swaziland"],groups:["018","202","002"],driveSide:"left",callingCodes:["268"]},geometry:{type:"MultiPolygon",coordinates:[[[[31.86881,-25.99973],[31.4175,-25.71886],[31.31237,-25.7431],[31.13073,-25.91558],[30.95819,-26.26303],[30.78927,-26.48271],[30.81101,-26.84722],[30.88826,-26.79622],[30.97757,-26.92706],[30.96088,-27.0245],[31.15027,-27.20151],[31.49834,-27.31549],[31.97592,-27.31675],[31.97463,-27.11057],[32.00893,-26.8096],[32.09664,-26.80721],[32.13315,-26.84345],[32.13409,-26.5317],[32.07352,-26.40185],[32.10435,-26.15656],[32.08599,-26.00978],[32.00916,-25.999],[31.974,-25.95387],[31.86881,-25.99973]]]]}},{type:"Feature",properties:{iso1A2:"TA",iso1A3:"TAA",wikidata:"Q220982",nameEn:"Tristan da Cunha",country:"GB",groups:["SH","011","202","002"],isoStatus:"excRes",driveSide:"left",roadSpeedUnit:"mph",callingCodes:["290 8","44 20"]},geometry:{type:"MultiPolygon",coordinates:[[[[-13.48367,-36.6746],[-13.41694,-37.88844],[-11.48092,-37.8367],[-11.55782,-36.60319],[-13.48367,-36.6746]]]]}},{type:"Feature",properties:{iso1A2:"TC",iso1A3:"TCA",iso1N3:"796",wikidata:"Q18221",nameEn:"Turks and Caicos Islands",country:"GB",groups:["029","003","419","019"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["1 649"]},geometry:{type:"MultiPolygon",coordinates:[[[[-72.41726,22.40371],[-72.72017,21.48055],[-71.46138,20.64433],[-70.63262,21.53631],[-72.41726,22.40371]]]]}},{type:"Feature",properties:{iso1A2:"TD",iso1A3:"TCD",iso1N3:"148",wikidata:"Q657",nameEn:"Chad",groups:["017","202","002"],callingCodes:["235"]},geometry:{type:"MultiPolygon",coordinates:[[[[23.99539,19.49944],[15.99566,23.49639],[14.99751,23.00539],[15.19692,21.99339],[15.20213,21.49365],[15.28332,21.44557],[15.62515,20.95395],[15.57248,20.92138],[15.55382,20.86507],[15.56004,20.79488],[15.59841,20.74039],[15.6721,20.70069],[15.99632,20.35364],[15.75098,19.93002],[15.6032,18.77402],[15.50373,16.89649],[14.37425,15.72591],[13.86301,15.04043],[13.78991,14.87519],[13.809,14.72915],[13.67878,14.64013],[13.68573,14.55276],[13.48259,14.46704],[13.47559,14.40881],[13.6302,13.71094],[14.08251,13.0797],[14.46881,13.08259],[14.56101,12.91036],[14.55058,12.78256],[14.83314,12.62963],[14.90827,12.3269],[14.89019,12.16593],[14.96952,12.0925],[15.00146,12.1223],[15.0349,12.10698],[15.05786,12.0608],[15.04808,11.8731],[15.11579,11.79313],[15.06595,11.71126],[15.13149,11.5537],[15.0585,11.40481],[15.10021,11.04101],[15.04957,11.02347],[15.09127,10.87431],[15.06737,10.80921],[15.15532,10.62846],[15.14936,10.53915],[15.23724,10.47764],[15.30874,10.31063],[15.50535,10.1098],[15.68761,9.99344],[15.41408,9.92876],[15.24618,9.99246],[15.14043,9.99246],[15.05999,9.94845],[14.95722,9.97926],[14.80082,9.93818],[14.4673,10.00264],[14.20411,10.00055],[14.1317,9.82413],[14.01793,9.73169],[13.97544,9.6365],[14.37094,9.2954],[14.35707,9.19611],[14.83566,8.80557],[15.09484,8.65982],[15.20426,8.50892],[15.50743,7.79302],[15.59272,7.7696],[15.56964,7.58936],[15.49743,7.52179],[15.73118,7.52006],[15.79942,7.44149],[16.40703,7.68809],[16.41583,7.77971],[16.58315,7.88657],[16.59415,7.76444],[16.658,7.75353],[16.6668,7.67281],[16.8143,7.53971],[17.67288,7.98905],[17.93926,7.95853],[18.02731,8.01085],[18.6085,8.05009],[18.64153,8.08714],[18.62612,8.14163],[18.67455,8.22226],[18.79783,8.25929],[19.11044,8.68172],[18.86388,8.87971],[19.06421,9.00367],[20.36748,9.11019],[20.82979,9.44696],[21.26348,9.97642],[21.34934,9.95907],[21.52766,10.2105],[21.63553,10.217],[21.71479,10.29932],[21.72139,10.64136],[22.45889,11.00246],[22.87758,10.91915],[22.97249,11.21955],[22.93124,11.41645],[22.7997,11.40424],[22.54907,11.64372],[22.64092,12.07485],[22.48369,12.02766],[22.50548,12.16769],[22.38873,12.45514],[22.46345,12.61925],[22.22684,12.74682],[22.15679,12.66634],[21.98711,12.63292],[21.89371,12.68001],[21.81432,12.81362],[21.94819,13.05637],[22.02914,13.13976],[22.1599,13.19281],[22.29689,13.3731],[22.08674,13.77863],[22.22995,13.96754],[22.5553,14.11704],[22.55997,14.23024],[22.44944,14.24986],[22.38562,14.58907],[22.70474,14.69149],[22.66115,14.86308],[22.99584,15.22989],[22.99584,15.40105],[22.92579,15.47007],[22.93201,15.55107],[23.10792,15.71297],[23.38812,15.69649],[23.62785,15.7804],[23.99997,15.69575],[23.99539,19.49944]]]]}},{type:"Feature",properties:{iso1A2:"TF",iso1A3:"ATF",iso1N3:"260",wikidata:"Q129003",nameEn:"French Southern and Antarctic Lands",country:"FR",groups:["014","202","002"]},geometry:{type:"MultiPolygon",coordinates:[[[[53.53458,-16.36909],[54.96649,-16.28353],[54.61476,-15.02273],[53.53458,-16.36909]]],[[[39.10324,-21.48967],[40.40841,-23.17181],[43.72277,-16.09877],[41.06663,-17.08802],[39.10324,-21.48967]]],[[[46.52682,-10.83678],[47.29063,-12.45583],[48.86266,-10.8109],[46.52682,-10.83678]]],[[[80.15867,-36.04977],[46.31615,-46.28749],[70.67507,-51.14192],[80.15867,-36.04977]]]]}},{type:"Feature",properties:{iso1A2:"TG",iso1A3:"TGO",iso1N3:"768",wikidata:"Q945",nameEn:"Togo",groups:["011","202","002"],callingCodes:["228"]},geometry:{type:"MultiPolygon",coordinates:[[[[.50388,11.01011],[-.13493,11.14075],[-.14462,11.10811],[-.05733,11.08628],[-.0275,11.11202],[-.00514,11.10763],[.00342,11.08317],[.02395,11.06229],[.03355,10.9807],[-.0063,10.96417],[-.00908,10.91644],[-.02685,10.8783],[-.0228,10.81916],[-.07183,10.76794],[-.07327,10.71845],[-.09141,10.7147],[-.05945,10.63458],[.12886,10.53149],[.18846,10.4096],[.29453,10.41546],[.33028,10.30408],[.39584,10.31112],[.35293,10.09412],[.41371,10.06361],[.41252,10.02018],[.36366,10.03309],[.32075,9.72781],[.34816,9.71607],[.34816,9.66907],[.32313,9.6491],[.28261,9.69022],[.26712,9.66437],[.29334,9.59387],[.36008,9.6256],[.38153,9.58682],[.23851,9.57389],[.2409,9.52335],[.30406,9.521],[.31241,9.50337],[.2254,9.47869],[.25758,9.42696],[.33148,9.44812],[.36485,9.49749],[.49118,9.48339],[.56388,9.40697],[.45424,9.04581],[.52455,8.87746],[.37319,8.75262],[.47211,8.59945],[.64731,8.48866],[.73432,8.29529],[.63897,8.25873],[.5913,8.19622],[.61156,8.18324],[.6056,8.13959],[.58891,8.12779],[.62943,7.85751],[.58295,7.62368],[.51979,7.58706],[.52455,7.45354],[.57223,7.39326],[.62943,7.41099],[.65327,7.31643],[.59606,7.01252],[.52217,6.9723],[.52098,6.94391],[.56508,6.92971],[.52853,6.82921],[.57406,6.80348],[.58176,6.76049],[.6497,6.73682],[.63659,6.63857],[.74862,6.56517],[.71048,6.53083],[.89283,6.33779],[.99652,6.33779],[1.03108,6.24064],[1.05969,6.22998],[1.09187,6.17074],[1.19966,6.17069],[1.19771,6.11522],[1.27574,5.93551],[1.67336,6.02702],[1.62913,6.24075],[1.79826,6.28221],[1.76906,6.43189],[1.58105,6.68619],[1.61812,6.74843],[1.55877,6.99737],[1.64249,6.99562],[1.61838,9.0527],[1.5649,9.16941],[1.41746,9.3226],[1.33675,9.54765],[1.36624,9.5951],[1.35507,9.99525],[.77666,10.37665],[.80358,10.71459],[.8804,10.803],[.91245,10.99597],[.66104,10.99964],[.4958,10.93269],[.50521,10.98035],[.48852,10.98561],[.50388,11.01011]]]]}},{type:"Feature",properties:{iso1A2:"TH",iso1A3:"THA",iso1N3:"764",wikidata:"Q869",nameEn:"Thailand",groups:["035","142"],driveSide:"left",callingCodes:["66"]},geometry:{type:"MultiPolygon",coordinates:[[[[100.08404,20.36626],[99.95721,20.46301],[99.91616,20.44986],[99.90499,20.4487],[99.89692,20.44789],[99.89301,20.44311],[99.89168,20.44548],[99.88451,20.44596],[99.88211,20.44488],[99.86383,20.44371],[99.81096,20.33687],[99.68255,20.32077],[99.46008,20.39673],[99.46077,20.36198],[99.5569,20.20676],[99.52943,20.14811],[99.416,20.08614],[99.20328,20.12877],[99.0735,20.10298],[98.98679,19.7419],[98.83661,19.80931],[98.56065,19.67807],[98.51182,19.71303],[98.24884,19.67876],[98.13829,19.78541],[98.03314,19.80941],[98.04364,19.65755],[97.84715,19.55782],[97.88423,19.5041],[97.78769,19.39429],[97.84186,19.29526],[97.78606,19.26769],[97.84024,19.22217],[97.83479,19.09972],[97.73797,19.04261],[97.73654,18.9812],[97.66487,18.9371],[97.73836,18.88478],[97.76752,18.58097],[97.5258,18.4939],[97.36444,18.57138],[97.34522,18.54596],[97.50383,18.26844],[97.56219,18.33885],[97.64116,18.29778],[97.60841,18.23846],[97.73723,17.97912],[97.66794,17.88005],[97.76407,17.71595],[97.91829,17.54504],[98.11185,17.36829],[98.10439,17.33847],[98.34566,17.04822],[98.39441,17.06266],[98.52624,16.89979],[98.49603,16.8446],[98.53833,16.81934],[98.46994,16.73613],[98.50253,16.7139],[98.49713,16.69022],[98.51043,16.70107],[98.51579,16.69433],[98.51472,16.68521],[98.51833,16.676],[98.51113,16.64503],[98.5695,16.62826],[98.57912,16.55983],[98.63817,16.47424],[98.68074,16.27068],[98.84485,16.42354],[98.92656,16.36425],[98.8376,16.11706],[98.69585,16.13353],[98.57019,16.04578],[98.59853,15.87197],[98.541,15.65406],[98.58598,15.46821],[98.56027,15.33471],[98.4866,15.39154],[98.39351,15.34177],[98.41906,15.27103],[98.40522,15.25268],[98.30446,15.30667],[98.22,15.21327],[98.18821,15.13125],[98.24874,14.83013],[98.56762,14.37701],[98.97356,14.04868],[99.16695,13.72621],[99.20617,13.20575],[99.12225,13.19847],[99.10646,13.05804],[99.18748,12.9898],[99.18905,12.84799],[99.29254,12.68921],[99.409,12.60603],[99.47519,12.1353],[99.56445,12.14805],[99.53424,12.02317],[99.64891,11.82699],[99.64108,11.78948],[99.5672,11.62732],[99.47598,11.62434],[99.39485,11.3925],[99.31573,11.32081],[99.32756,11.28545],[99.06938,10.94857],[99.02337,10.97217],[98.99701,10.92962],[99.0069,10.85485],[98.86819,10.78336],[98.78511,10.68351],[98.77275,10.62548],[98.81944,10.52761],[98.7391,10.31488],[98.55174,9.92804],[98.52291,9.92389],[98.47298,9.95782],[98.33094,9.91973],[98.12555,9.44056],[97.63455,9.60854],[97.19814,8.18901],[99.31854,5.99868],[99.50117,6.44501],[99.91873,6.50233],[100.0756,6.4045],[100.12,6.42105],[100.19511,6.72559],[100.29651,6.68439],[100.30828,6.66462],[100.31618,6.66781],[100.31884,6.66423],[100.32671,6.66526],[100.32607,6.65933],[100.31929,6.65413],[100.35413,6.54932],[100.41152,6.52299],[100.41791,6.5189],[100.42351,6.51762],[100.43027,6.52389],[100.66986,6.45086],[100.74361,6.50811],[100.74822,6.46231],[100.81045,6.45086],[100.85884,6.24929],[101.10313,6.25617],[101.12618,6.19431],[101.06165,6.14161],[101.12388,6.11411],[101.087,5.9193],[101.02708,5.91013],[100.98815,5.79464],[101.14062,5.61613],[101.25755,5.71065],[101.25524,5.78633],[101.58019,5.93534],[101.69773,5.75881],[101.75074,5.79091],[101.80144,5.74505],[101.89188,5.8386],[101.91776,5.84269],[101.92819,5.85511],[101.94712,5.98421],[101.9714,6.00575],[101.97114,6.01992],[101.99209,6.04075],[102.01835,6.05407],[102.09182,6.14161],[102.07732,6.193],[102.08127,6.22679],[102.09086,6.23546],[102.46318,7.22462],[102.47649,9.66162],[102.52395,11.25257],[102.91449,11.65512],[102.90973,11.75613],[102.83957,11.8519],[102.78427,11.98746],[102.77026,12.06815],[102.70176,12.1686],[102.73134,12.37091],[102.78116,12.40284],[102.7796,12.43781],[102.57567,12.65358],[102.51963,12.66117],[102.4994,12.71736],[102.53053,12.77506],[102.49335,12.92711],[102.48694,12.97537],[102.52275,12.99813],[102.46011,13.08057],[102.43422,13.09061],[102.36146,13.26006],[102.36001,13.31142],[102.34611,13.35618],[102.35692,13.38274],[102.35563,13.47307],[102.361,13.50551],[102.33828,13.55613],[102.36859,13.57488],[102.44601,13.5637],[102.5358,13.56933],[102.57573,13.60461],[102.62483,13.60883],[102.58635,13.6286],[102.5481,13.6589],[102.56848,13.69366],[102.72727,13.77806],[102.77864,13.93374],[102.91251,14.01531],[102.93275,14.19044],[103.16469,14.33075],[103.39353,14.35639],[103.53518,14.42575],[103.71109,14.4348],[103.70175,14.38052],[103.93836,14.3398],[104.27616,14.39861],[104.55014,14.36091],[104.69335,14.42726],[104.97667,14.38806],[105.02804,14.23722],[105.08408,14.20402],[105.14012,14.23873],[105.17748,14.34432],[105.20894,14.34967],[105.43783,14.43865],[105.53864,14.55731],[105.5121,14.80802],[105.61162,15.00037],[105.46661,15.13132],[105.58043,15.32724],[105.50662,15.32054],[105.4692,15.33709],[105.47635,15.3796],[105.58191,15.41031],[105.60446,15.53301],[105.61756,15.68792],[105.46573,15.74742],[105.42285,15.76971],[105.37959,15.84074],[105.34115,15.92737],[105.38508,15.987],[105.42001,16.00657],[105.06204,16.09792],[105.00262,16.25627],[104.88057,16.37311],[104.73349,16.565],[104.76099,16.69302],[104.7397,16.81005],[104.76442,16.84752],[104.7373,16.91125],[104.73712,17.01404],[104.80716,17.19025],[104.80061,17.39367],[104.69867,17.53038],[104.45404,17.66788],[104.35432,17.82871],[104.2757,17.86139],[104.21776,17.99335],[104.10927,18.10826],[104.06533,18.21656],[103.97725,18.33631],[103.93916,18.33914],[103.85642,18.28666],[103.82449,18.33979],[103.699,18.34125],[103.60957,18.40528],[103.47773,18.42841],[103.41044,18.4486],[103.30977,18.4341],[103.24779,18.37807],[103.23818,18.34875],[103.29757,18.30475],[103.17093,18.2618],[103.14994,18.23172],[103.1493,18.17799],[103.07343,18.12351],[103.07823,18.03833],[103.0566,18.00144],[103.01998,17.97095],[102.9912,17.9949],[102.95812,18.0054],[102.86323,17.97531],[102.81988,17.94233],[102.79044,17.93612],[102.75954,17.89561],[102.68538,17.86653],[102.67543,17.84529],[102.69946,17.81686],[102.68194,17.80151],[102.59485,17.83537],[102.5896,17.84889],[102.61432,17.92273],[102.60971,17.95411],[102.59234,17.96127],[102.45523,17.97106],[102.11359,18.21532],[101.88485,18.02474],[101.78087,18.07559],[101.72294,17.92867],[101.44667,17.7392],[101.15108,17.47586],[100.96541,17.57926],[101.02185,17.87637],[101.1793,18.0544],[101.19118,18.2125],[101.15108,18.25624],[101.18227,18.34367],[101.06047,18.43247],[101.27585,18.68875],[101.22832,18.73377],[101.25803,18.89545],[101.35606,19.04716],[101.261,19.12717],[101.24911,19.33334],[101.20604,19.35296],[101.21347,19.46223],[101.26991,19.48324],[101.26545,19.59242],[101.08928,19.59748],[100.90302,19.61901],[100.77231,19.48324],[100.64606,19.55884],[100.58219,19.49164],[100.49604,19.53504],[100.398,19.75047],[100.5094,19.87904],[100.58808,20.15791],[100.55218,20.17741],[100.51052,20.14928],[100.47567,20.19133],[100.4537,20.19971],[100.44992,20.23644],[100.41473,20.25625],[100.37439,20.35156],[100.33383,20.4028],[100.25769,20.3992],[100.22076,20.31598],[100.16668,20.2986],[100.1712,20.24324],[100.11785,20.24787],[100.09337,20.26293],[100.09999,20.31614],[100.08404,20.36626]]]]}},{type:"Feature",properties:{iso1A2:"TJ",iso1A3:"TJK",iso1N3:"762",wikidata:"Q863",nameEn:"Tajikistan",groups:["143","142"],callingCodes:["992"]},geometry:{type:"MultiPolygon",coordinates:[[[[70.45251,41.04438],[70.38028,41.02014],[70.36655,40.90296],[69.69434,40.62615],[69.59441,40.70181],[69.53021,40.77621],[69.38327,40.7918],[69.32834,40.70233],[69.3455,40.57988],[69.2643,40.57506],[69.21063,40.54469],[69.27066,40.49274],[69.28525,40.41894],[69.30774,40.36102],[69.33794,40.34819],[69.32833,40.29794],[69.30808,40.2821],[69.24817,40.30357],[69.25229,40.26362],[69.30104,40.24502],[69.30448,40.18774],[69.2074,40.21488],[69.15659,40.2162],[69.04544,40.22904],[68.85832,40.20885],[68.84357,40.18604],[68.79276,40.17555],[68.77902,40.20492],[68.5332,40.14826],[68.52771,40.11676],[68.62796,40.07789],[69.01523,40.15771],[69.01935,40.11466],[68.96579,40.06949],[68.84906,40.04952],[68.93695,39.91167],[68.88889,39.87163],[68.63071,39.85265],[68.61972,39.68905],[68.54166,39.53929],[68.12053,39.56317],[67.70992,39.66156],[67.62889,39.60234],[67.44899,39.57799],[67.46547,39.53564],[67.39681,39.52505],[67.46822,39.46146],[67.45998,39.315],[67.36522,39.31287],[67.33226,39.23739],[67.67833,39.14479],[67.68915,39.00775],[68.09704,39.02589],[68.19743,38.85985],[68.06948,38.82115],[68.12877,38.73677],[68.05598,38.71641],[68.0807,38.64136],[68.05873,38.56087],[68.11366,38.47169],[68.06274,38.39435],[68.13289,38.40822],[68.40343,38.19484],[68.27159,37.91477],[68.12635,37.93],[67.81566,37.43107],[67.8474,37.31594],[67.78329,37.1834],[67.7803,37.08978],[67.87917,37.0591],[68.02194,36.91923],[68.18542,37.02074],[68.27605,37.00977],[68.29253,37.10621],[68.41201,37.10402],[68.41888,37.13906],[68.61851,37.19815],[68.6798,37.27906],[68.81438,37.23862],[68.80889,37.32494],[68.91189,37.26704],[68.88168,37.33368],[68.96407,37.32603],[69.03274,37.25174],[69.25152,37.09426],[69.39529,37.16752],[69.45022,37.23315],[69.36645,37.40462],[69.44954,37.4869],[69.51888,37.5844],[69.80041,37.5746],[69.84435,37.60616],[69.93362,37.61378],[69.95971,37.5659],[70.15015,37.52519],[70.28243,37.66706],[70.27694,37.81258],[70.1863,37.84296],[70.17206,37.93276],[70.4898,38.12546],[70.54673,38.24541],[70.60407,38.28046],[70.61526,38.34774],[70.64966,38.34999],[70.69189,38.37031],[70.6761,38.39144],[70.67438,38.40597],[70.69807,38.41861],[70.72485,38.4131],[70.75455,38.4252],[70.77132,38.45548],[70.78581,38.45502],[70.78702,38.45031],[70.79766,38.44944],[70.80521,38.44447],[70.81697,38.44507],[70.82538,38.45394],[70.84376,38.44688],[70.88719,38.46826],[70.92728,38.43021],[70.98693,38.48862],[71.03545,38.44779],[71.0556,38.40176],[71.09542,38.42517],[71.10592,38.42077],[71.10957,38.40671],[71.1451,38.40106],[71.21291,38.32797],[71.33114,38.30339],[71.33869,38.27335],[71.37803,38.25641],[71.36444,38.15358],[71.29878,38.04429],[71.28922,38.01272],[71.27622,37.99946],[71.27278,37.96496],[71.24969,37.93031],[71.2809,37.91995],[71.296,37.93403],[71.32871,37.88564],[71.51565,37.95349],[71.58843,37.92425],[71.59255,37.79956],[71.55752,37.78677],[71.54324,37.77104],[71.53053,37.76534],[71.55234,37.73209],[71.54186,37.69691],[71.51972,37.61945],[71.5065,37.60912],[71.49693,37.53527],[71.50616,37.50733],[71.5256,37.47971],[71.49612,37.4279],[71.47685,37.40281],[71.4862,37.33405],[71.49821,37.31975],[71.50674,37.31502],[71.48536,37.26017],[71.4824,37.24921],[71.48339,37.23937],[71.47386,37.2269],[71.4555,37.21418],[71.4494,37.18137],[71.44127,37.11856],[71.43097,37.05855],[71.45578,37.03094],[71.46923,36.99925],[71.48481,36.93218],[71.51502,36.89128],[71.57195,36.74943],[71.67083,36.67346],[71.83229,36.68084],[72.31676,36.98115],[72.54095,37.00007],[72.66381,37.02014],[72.79693,37.22222],[73.06884,37.31729],[73.29633,37.46495],[73.77197,37.4417],[73.76647,37.33913],[73.61129,37.27469],[73.64974,37.23643],[73.82552,37.22659],[73.8564,37.26158],[74.20308,37.34208],[74.23339,37.41116],[74.41055,37.3948],[74.56161,37.37734],[74.68383,37.3948],[74.8294,37.3435],[74.88887,37.23275],[75.12328,37.31839],[75.09719,37.37297],[75.15899,37.41443],[75.06011,37.52779],[74.94338,37.55501],[74.8912,37.67576],[75.00935,37.77486],[74.92416,37.83428],[74.9063,38.03033],[74.82665,38.07359],[74.80331,38.19889],[74.69894,38.22155],[74.69619,38.42947],[74.51217,38.47034],[74.17022,38.65504],[73.97933,38.52945],[73.79806,38.61106],[73.80656,38.66449],[73.7033,38.84782],[73.7445,38.93867],[73.82964,38.91517],[73.81728,39.04007],[73.75823,39.023],[73.60638,39.24534],[73.54572,39.27567],[73.55396,39.3543],[73.5004,39.38402],[73.59241,39.40843],[73.59831,39.46425],[73.45096,39.46677],[73.31912,39.38615],[73.18454,39.35536],[72.85934,39.35116],[72.62027,39.39696],[72.33173,39.33093],[72.23834,39.17248],[72.17242,39.2661],[72.09689,39.26823],[72.04059,39.36704],[71.90601,39.27674],[71.79202,39.27355],[71.7522,39.32031],[71.80164,39.40631],[71.76816,39.45456],[71.62688,39.44056],[71.5517,39.45722],[71.55856,39.57588],[71.49814,39.61397],[71.08752,39.50704],[71.06418,39.41586],[70.7854,39.38933],[70.64087,39.58792],[70.44757,39.60128],[70.2869,39.53141],[70.11111,39.58223],[69.87491,39.53882],[69.68677,39.59281],[69.3594,39.52516],[69.26938,39.8127],[69.35649,40.01994],[69.43134,39.98431],[69.43557,39.92877],[69.53615,39.93991],[69.5057,40.03277],[69.53855,40.0887],[69.53794,40.11833],[69.55555,40.12296],[69.57615,40.10524],[69.64704,40.12165],[69.67001,40.10639],[70.01283,40.23288],[70.58297,40.00891],[70.57384,39.99394],[70.47557,39.93216],[70.55033,39.96619],[70.58912,39.95211],[70.65946,39.9878],[70.65827,40.0981],[70.7928,40.12797],[70.80495,40.16813],[70.9818,40.22392],[70.8607,40.217],[70.62342,40.17396],[70.56394,40.26421],[70.57149,40.3442],[70.37511,40.38605],[70.32626,40.45174],[70.49871,40.52503],[70.80009,40.72825],[70.45251,41.04438]]],[[[70.68112,40.90612],[70.6158,40.97661],[70.56077,41.00642],[70.54223,40.98787],[70.57501,40.98941],[70.6721,40.90555],[70.68112,40.90612]]],[[[70.74189,39.86319],[70.53651,39.89155],[70.52631,39.86989],[70.54998,39.85137],[70.59667,39.83542],[70.63105,39.77923],[70.74189,39.86319]]]]}},{type:"Feature",properties:{iso1A2:"TK",iso1A3:"TKL",iso1N3:"772",wikidata:"Q36823",nameEn:"Tokelau",country:"NZ",groups:["061","009"],driveSide:"left",callingCodes:["690"]},geometry:{type:"MultiPolygon",coordinates:[[[[-167.75195,-10.12005],[-167.75329,-7.52784],[-174.18707,-7.54408],[-174.17993,-10.13616],[-167.75195,-10.12005]]]]}},{type:"Feature",properties:{iso1A2:"TL",iso1A3:"TLS",iso1N3:"626",wikidata:"Q574",nameEn:"East Timor",aliases:["Timor-Leste","TP"],groups:["035","142"],driveSide:"left",callingCodes:["670"]},geometry:{type:"MultiPolygon",coordinates:[[[[124.46701,-9.13002],[124.94011,-8.85617],[124.97742,-9.08128],[125.11764,-8.96359],[125.18632,-9.03142],[125.18907,-9.16434],[125.09434,-9.19669],[125.04044,-9.17093],[124.97892,-9.19281],[125.09025,-9.46406],[125.68138,-9.85176],[127.55165,-9.05052],[127.42116,-8.22471],[125.87691,-8.31789],[125.65946,-8.06136],[125.31127,-8.22976],[124.92337,-8.75859],[124.33472,-9.11416],[124.04628,-9.22671],[124.04286,-9.34243],[124.10539,-9.41206],[124.14517,-9.42324],[124.21247,-9.36904],[124.28115,-9.42189],[124.28115,-9.50453],[124.3535,-9.48493],[124.35258,-9.43002],[124.38554,-9.3582],[124.45971,-9.30263],[124.46701,-9.13002]]]]}},{type:"Feature",properties:{iso1A2:"TM",iso1A3:"TKM",iso1N3:"795",wikidata:"Q874",nameEn:"Turkmenistan",groups:["143","142"],callingCodes:["993"]},geometry:{type:"MultiPolygon",coordinates:[[[[60.5078,41.21694],[60.06581,41.4363],[60.18117,41.60082],[60.06032,41.76287],[60.08504,41.80997],[60.33223,41.75058],[59.95046,41.97966],[60.0356,42.01028],[60.04659,42.08982],[59.96419,42.1428],[60.00539,42.212],[59.94633,42.27655],[59.4341,42.29738],[59.2955,42.37064],[59.17317,42.52248],[58.93422,42.5407],[58.6266,42.79314],[58.57991,42.64988],[58.27504,42.69632],[58.14321,42.62159],[58.29427,42.56497],[58.51674,42.30348],[58.40688,42.29535],[58.3492,42.43335],[57.99214,42.50021],[57.90975,42.4374],[57.92897,42.24047],[57.84932,42.18555],[57.6296,42.16519],[57.30275,42.14076],[57.03633,41.92043],[56.96218,41.80383],[57.03359,41.41777],[57.13796,41.36625],[57.03423,41.25435],[56.00314,41.32584],[55.45471,41.25609],[54.95182,41.92424],[54.20635,42.38477],[52.97575,42.1308],[52.47884,41.78034],[52.26048,41.69249],[51.7708,40.29239],[53.89734,37.3464],[54.24565,37.32047],[54.36211,37.34912],[54.58664,37.45809],[54.67247,37.43532],[54.77822,37.51597],[54.81804,37.61285],[54.77684,37.62264],[54.851,37.75739],[55.13412,37.94705],[55.44152,38.08564],[55.76561,38.12238],[55.97847,38.08024],[56.33278,38.08132],[56.32454,38.18502],[56.43303,38.26054],[56.62255,38.24005],[56.73928,38.27887],[57.03453,38.18717],[57.21169,38.28965],[57.37236,38.09321],[57.35042,37.98546],[57.79534,37.89299],[58.21399,37.77281],[58.22999,37.6856],[58.39959,37.63134],[58.47786,37.6433],[58.5479,37.70526],[58.6921,37.64548],[58.9338,37.67374],[59.22905,37.51161],[59.33507,37.53146],[59.39797,37.47892],[59.39385,37.34257],[59.55178,37.13594],[59.74678,37.12499],[60.00768,37.04102],[60.34767,36.63214],[61.14516,36.64644],[61.18187,36.55348],[61.1393,36.38782],[61.22719,36.12759],[61.12007,35.95992],[61.22444,35.92879],[61.26152,35.80749],[61.22719,35.67038],[61.27371,35.61482],[61.58742,35.43803],[61.77693,35.41341],[61.97743,35.4604],[62.05709,35.43803],[62.15871,35.33278],[62.29191,35.25964],[62.29878,35.13312],[62.48006,35.28796],[62.62288,35.22067],[62.74098,35.25432],[62.90853,35.37086],[63.0898,35.43131],[63.12276,35.53196],[63.10079,35.63024],[63.23262,35.67487],[63.10318,35.81782],[63.12276,35.86208],[63.29579,35.85985],[63.53475,35.90881],[63.56496,35.95106],[63.98519,36.03773],[64.05385,36.10433],[64.43288,36.24401],[64.57295,36.34362],[64.62514,36.44311],[64.61141,36.6351],[64.97945,37.21913],[65.51778,37.23881],[65.64263,37.34388],[65.64137,37.45061],[65.72274,37.55438],[66.30993,37.32409],[66.55743,37.35409],[66.52303,37.39827],[66.65761,37.45497],[66.52852,37.58568],[66.53676,37.80084],[66.67684,37.96776],[66.56697,38.0435],[66.41042,38.02403],[66.24013,38.16238],[65.83913,38.25733],[65.55873,38.29052],[64.32576,38.98691],[64.19086,38.95561],[63.70778,39.22349],[63.6913,39.27666],[62.43337,39.98528],[62.34273,40.43206],[62.11751,40.58242],[61.87856,41.12257],[61.4446,41.29407],[61.39732,41.19873],[61.33199,41.14946],[61.22212,41.14946],[61.03261,41.25691],[60.5078,41.21694]]]]}},{type:"Feature",properties:{iso1A2:"TN",iso1A3:"TUN",iso1N3:"788",wikidata:"Q948",nameEn:"Tunisia",groups:["015","002"],callingCodes:["216"]},geometry:{type:"MultiPolygon",coordinates:[[[[11.2718,37.6713],[7.89009,38.19924],[8.59123,37.14286],[8.64044,36.9401],[8.62972,36.86499],[8.67706,36.8364],[8.57613,36.78062],[8.46537,36.7706],[8.47609,36.66607],[8.16167,36.48817],[8.18936,36.44939],[8.40731,36.42208],[8.2626,35.91733],[8.26472,35.73669],[8.35371,35.66373],[8.36086,35.47774],[8.30329,35.29884],[8.47318,35.23376],[8.3555,35.10007],[8.30727,34.95378],[8.25189,34.92009],[8.29655,34.72798],[8.20482,34.57575],[7.86264,34.3987],[7.81242,34.21841],[7.74207,34.16492],[7.66174,34.20167],[7.52851,34.06493],[7.54088,33.7726],[7.73687,33.42114],[7.83028,33.18851],[8.11433,33.10175],[8.1179,33.05086],[8.31895,32.83483],[8.35999,32.50101],[9.07483,32.07865],[9.55544,30.23971],[9.76848,30.34366],[9.88152,30.34074],[10.29516,30.90337],[10.12239,31.42098],[10.31364,31.72648],[10.48497,31.72956],[10.62788,31.96629],[10.7315,31.97235],[11.04234,32.2145],[11.53898,32.4138],[11.57828,32.48013],[11.46037,32.6307],[11.51549,33.09826],[11.55852,33.1409],[11.56255,33.16754],[11.66543,33.34642],[11.2718,37.6713]]]]}},{type:"Feature",properties:{iso1A2:"TO",iso1A3:"TON",iso1N3:"776",wikidata:"Q678",nameEn:"Tonga",groups:["061","009"],driveSide:"left",callingCodes:["676"]},geometry:{type:"MultiPolygon",coordinates:[[[[-176.74538,-22.89767],[-180,-22.90585],[-180,-24.21376],[-173.10761,-24.19665],[-173.11048,-23.23027],[-173.13438,-14.94228],[-174.17905,-14.94502],[-176.76826,-14.95183],[-176.74538,-22.89767]]]]}},{type:"Feature",properties:{iso1A2:"TR",iso1A3:"TUR",iso1N3:"792",wikidata:"Q43",nameEn:"Turkey",groups:["145","142"],callingCodes:["90"]},geometry:{type:"MultiPolygon",coordinates:[[[[41.54366,41.52185],[40.89217,41.72528],[34.8305,42.4581],[28.32297,41.98371],[28.02971,41.98066],[27.91479,41.97902],[27.83492,41.99709],[27.81235,41.94803],[27.69949,41.97515],[27.55191,41.90928],[27.52379,41.93756],[27.45478,41.96591],[27.27411,42.10409],[27.22376,42.10152],[27.19251,42.06028],[27.08486,42.08735],[27.03277,42.0809],[26.95638,42.00741],[26.79143,41.97386],[26.62996,41.97644],[26.56051,41.92995],[26.57961,41.90024],[26.53968,41.82653],[26.36952,41.82265],[26.33589,41.76802],[26.32952,41.73637],[26.35957,41.71149],[26.47958,41.67037],[26.5209,41.62592],[26.59196,41.60491],[26.59742,41.48058],[26.61767,41.42281],[26.62997,41.34613],[26.5837,41.32131],[26.5209,41.33993],[26.39861,41.25053],[26.32259,41.24929],[26.31928,41.07386],[26.3606,41.02027],[26.33297,40.98388],[26.35894,40.94292],[26.32259,40.94042],[26.28623,40.93005],[26.29441,40.89119],[26.26169,40.9168],[26.20856,40.86048],[26.21351,40.83298],[26.15685,40.80709],[26.12854,40.77339],[26.12495,40.74283],[26.08638,40.73214],[26.0754,40.72772],[26.03489,40.73051],[25.94795,40.72797],[26.04292,40.3958],[25.61285,40.17161],[25.94257,39.39358],[26.43357,39.43096],[26.70773,39.0312],[26.61814,38.81372],[26.21136,38.65436],[26.32173,38.48731],[26.24183,38.44695],[26.21136,38.17558],[27.05537,37.9131],[27.16428,37.72343],[26.99377,37.69034],[26.95583,37.64989],[27.14757,37.32],[27.20312,36.94571],[27.45627,36.9008],[27.24613,36.71622],[27.46117,36.53789],[27.89482,36.69898],[27.95037,36.46155],[28.23708,36.56812],[29.30783,36.01033],[29.48192,36.18377],[29.61002,36.1731],[29.61805,36.14179],[29.69611,36.10365],[29.73302,35.92555],[32.82353,35.70297],[35.51152,36.10954],[35.931,35.92109],[35.98499,35.94107],[36.00514,35.94113],[36.01844,35.92403],[35.99829,35.88242],[36.11827,35.85923],[36.13919,35.83692],[36.14029,35.81015],[36.1623,35.80925],[36.17441,35.92076],[36.19973,35.95195],[36.25366,35.96264],[36.27678,35.94839],[36.29769,35.96086],[36.28338,36.00273],[36.30099,36.00985],[36.33956,35.98687],[36.37474,36.01163],[36.39206,36.22088],[36.4617,36.20461],[36.50463,36.2419],[36.6125,36.22592],[36.68672,36.23677],[36.65653,36.33861],[36.6081,36.33772],[36.54206,36.49539],[36.58829,36.58295],[36.57398,36.65186],[36.62681,36.71189],[36.61581,36.74629],[36.66727,36.82901],[36.99557,36.75997],[36.99886,36.74012],[37.04399,36.73483],[37.04619,36.71101],[37.01647,36.69512],[37.02088,36.66422],[37.08279,36.63495],[37.10894,36.6704],[37.16177,36.66069],[37.21988,36.6736],[37.47253,36.63243],[37.49103,36.66904],[37.68048,36.75065],[37.81974,36.76055],[38.21064,36.91842],[38.38859,36.90064],[38.55908,36.84429],[38.74042,36.70629],[39.03217,36.70911],[39.21538,36.66834],[39.81589,36.75538],[40.69136,37.0996],[40.90856,37.13147],[41.21937,37.07665],[41.515,37.08084],[42.00894,37.17209],[42.18225,37.28569],[42.19301,37.31323],[42.2112,37.32491],[42.22257,37.31395],[42.22381,37.30238],[42.20454,37.28715],[42.21548,37.28026],[42.23683,37.2863],[42.26039,37.27017],[42.2824,37.2798],[42.34735,37.22548],[42.32313,37.17814],[42.35724,37.10998],[42.56725,37.14878],[42.78887,37.38615],[42.93705,37.32015],[43.11403,37.37436],[43.30083,37.30629],[43.33508,37.33105],[43.50787,37.24436],[43.56702,37.25675],[43.63085,37.21957],[43.7009,37.23692],[43.8052,37.22825],[43.82699,37.19477],[43.84878,37.22205],[43.90949,37.22453],[44.02002,37.33229],[44.13521,37.32486],[44.2613,37.25055],[44.27998,37.16501],[44.22239,37.15756],[44.18503,37.09551],[44.25975,36.98119],[44.30645,36.97373],[44.35937,37.02843],[44.35315,37.04955],[44.38117,37.05825],[44.42631,37.05825],[44.63179,37.19229],[44.76698,37.16162],[44.78319,37.1431],[44.7868,37.16644],[44.75986,37.21549],[44.81021,37.2915],[44.58449,37.45018],[44.61401,37.60165],[44.56887,37.6429],[44.62096,37.71985],[44.55498,37.783],[44.45948,37.77065],[44.3883,37.85433],[44.22509,37.88859],[44.42476,38.25763],[44.50115,38.33939],[44.44386,38.38295],[44.38309,38.36117],[44.3119,38.37887],[44.3207,38.49799],[44.32058,38.62752],[44.28065,38.6465],[44.26155,38.71427],[44.30322,38.81581],[44.18863,38.93881],[44.20946,39.13975],[44.1043,39.19842],[44.03667,39.39223],[44.22452,39.4169],[44.29818,39.378],[44.37921,39.4131],[44.42832,39.4131],[44.41849,39.56659],[44.48111,39.61579],[44.47298,39.68788],[44.6137,39.78393],[44.65422,39.72163],[44.71806,39.71124],[44.81043,39.62677],[44.80977,39.65768],[44.75779,39.7148],[44.61845,39.8281],[44.46635,39.97733],[44.26973,40.04866],[44.1778,40.02845],[44.1057,40.03555],[43.92307,40.01787],[43.65688,40.11199],[43.65221,40.14889],[43.71136,40.16673],[43.59928,40.34019],[43.60862,40.43267],[43.54791,40.47413],[43.63664,40.54159],[43.7425,40.66805],[43.74872,40.7365],[43.67712,40.84846],[43.67712,40.93084],[43.58683,40.98961],[43.47319,41.02251],[43.44984,41.0988],[43.4717,41.12611],[43.44973,41.17666],[43.36118,41.2028],[43.23096,41.17536],[43.1945,41.25242],[43.13373,41.25503],[43.21707,41.30331],[43.02956,41.37891],[42.8785,41.50516],[42.84899,41.47265],[42.78995,41.50126],[42.84471,41.58912],[42.72794,41.59714],[42.59202,41.58183],[42.51772,41.43606],[42.26387,41.49346],[41.95134,41.52466],[41.81939,41.43621],[41.7124,41.47417],[41.7148,41.4932],[41.54366,41.52185]]]]}},{type:"Feature",properties:{iso1A2:"TT",iso1A3:"TTO",iso1N3:"780",wikidata:"Q754",nameEn:"Trinidad and Tobago",groups:["029","003","419","019"],driveSide:"left",callingCodes:["1 868"]},geometry:{type:"MultiPolygon",coordinates:[[[[-61.62505,11.18974],[-62.08693,10.04435],[-60.89962,9.81445],[-60.07172,11.77667],[-61.62505,11.18974]]]]}},{type:"Feature",properties:{iso1A2:"TV",iso1A3:"TUV",iso1N3:"798",wikidata:"Q672",nameEn:"Tuvalu",groups:["061","009"],driveSide:"left",callingCodes:["688"]},geometry:{type:"MultiPolygon",coordinates:[[[[174,-5],[174,-11.5],[179.99999,-11.5],[179.99999,-5],[174,-5]]]]}},{type:"Feature",properties:{iso1A2:"TW",iso1A3:"TWN",iso1N3:"158",wikidata:"Q865",nameEn:"Taiwan",groups:["030","142"],callingCodes:["886"]},geometry:{type:"MultiPolygon",coordinates:[[[[123.0791,22.07818],[122.26612,25.98197],[120.49232,25.22863],[118.56434,24.49266],[118.42453,24.54644],[118.35291,24.51645],[118.28244,24.51231],[118.11703,24.39734],[120.69238,21.52331],[123.0791,22.07818]]]]}},{type:"Feature",properties:{iso1A2:"TZ",iso1A3:"TZA",iso1N3:"834",wikidata:"Q924",nameEn:"Tanzania",groups:["014","202","002"],driveSide:"left",callingCodes:["255"]},geometry:{type:"MultiPolygon",coordinates:[[[[30.80408,-.99911],[30.76635,-.9852],[30.70631,-1.01175],[30.64166,-1.06601],[30.47194,-1.0555],[30.45116,-1.10641],[30.50889,-1.16412],[30.57123,-1.33264],[30.71974,-1.43244],[30.84079,-1.64652],[30.80802,-1.91477],[30.89303,-2.08223],[30.83915,-2.35795],[30.54501,-2.41404],[30.41789,-2.66266],[30.52747,-2.65841],[30.40662,-2.86151],[30.4987,-2.9573],[30.57926,-2.89791],[30.6675,-2.98987],[30.83823,-2.97837],[30.84165,-3.25152],[30.45915,-3.56532],[30.22042,-4.01738],[30.03323,-4.26631],[29.88172,-4.35743],[29.82885,-4.36153],[29.77289,-4.41733],[29.75109,-4.45836],[29.63827,-4.44681],[29.43673,-4.44845],[29.52552,-6.2731],[30.2567,-7.14121],[30.79243,-8.27382],[31.00796,-8.58615],[31.37533,-8.60769],[31.57147,-8.70619],[31.57147,-8.81388],[31.71158,-8.91386],[31.81587,-8.88618],[31.94663,-8.93846],[31.94196,-9.02303],[31.98866,-9.07069],[32.08206,-9.04609],[32.16146,-9.05993],[32.25486,-9.13371],[32.43543,-9.11988],[32.49147,-9.14754],[32.53661,-9.24281],[32.75611,-9.28583],[32.76233,-9.31963],[32.95389,-9.40138],[32.99397,-9.36712],[33.14925,-9.49322],[33.31581,-9.48554],[33.48052,-9.62442],[33.76677,-9.58516],[33.93298,-9.71647],[33.9638,-9.62206],[33.95829,-9.54066],[34.03865,-9.49398],[34.54499,-10.0678],[34.51911,-10.12279],[34.57581,-10.56271],[34.65946,-10.6828],[34.67047,-10.93796],[34.61161,-11.01611],[34.63305,-11.11731],[34.79375,-11.32245],[34.91153,-11.39799],[34.96296,-11.57354],[35.63599,-11.55927],[35.82767,-11.41081],[36.19094,-11.57593],[36.19094,-11.70008],[36.62068,-11.72884],[36.80309,-11.56836],[37.3936,-11.68949],[37.76614,-11.53352],[37.8388,-11.3123],[37.93618,-11.26228],[38.21598,-11.27289],[38.47258,-11.4199],[38.88996,-11.16978],[39.24395,-11.17433],[39.58249,-10.96043],[40.00295,-10.80255],[40.44265,-10.4618],[40.74206,-10.25691],[40.14328,-4.64201],[39.62121,-4.68136],[39.44306,-4.93877],[39.21631,-4.67835],[37.81321,-3.69179],[37.75036,-3.54243],[37.63099,-3.50723],[37.5903,-3.42735],[37.71745,-3.304],[37.67199,-3.06222],[34.0824,-1.02264],[34.03084,-1.05101],[34.02286,-1.00779],[33.93107,-.99298],[30.80408,-.99911]]]]}},{type:"Feature",properties:{iso1A2:"UA",iso1A3:"UKR",iso1N3:"804",wikidata:"Q212",nameEn:"Ukraine",groups:["151","150"],callingCodes:["380"]},geometry:{type:"MultiPolygon",coordinates:[[[[33.57318,46.10317],[33.61467,46.13561],[33.63854,46.14147],[33.61517,46.22615],[33.646,46.23028],[33.74047,46.18555],[33.79715,46.20482],[33.85234,46.19863],[33.91549,46.15938],[34.05272,46.10838],[34.07311,46.11769],[34.12929,46.10494],[34.181,46.06804],[34.25111,46.0532],[34.33912,46.06114],[34.41221,46.00245],[34.44155,45.95995],[34.48729,45.94267],[34.52011,45.95097],[34.55889,45.99347],[34.60861,45.99347],[34.66679,45.97136],[34.75479,45.90705],[34.80153,45.90047],[34.79905,45.81009],[34.96015,45.75634],[35.23066,45.79231],[37.62608,46.82615],[38.12112,46.86078],[38.3384,46.98085],[38.22955,47.12069],[38.23049,47.2324],[38.32112,47.2585],[38.33074,47.30508],[38.22225,47.30788],[38.28954,47.39255],[38.28679,47.53552],[38.35062,47.61631],[38.76379,47.69346],[38.79628,47.81109],[38.87979,47.87719],[39.73935,47.82876],[39.82213,47.96396],[39.77544,48.04206],[39.88256,48.04482],[39.83724,48.06501],[39.94847,48.22811],[40.00752,48.22445],[39.99241,48.31768],[39.97325,48.31399],[39.9693,48.29904],[39.95248,48.29972],[39.91465,48.26743],[39.90041,48.3049],[39.84273,48.30947],[39.84136,48.33321],[39.94847,48.35055],[39.88794,48.44226],[39.86196,48.46633],[39.84548,48.57821],[39.79764,48.58668],[39.67226,48.59368],[39.71765,48.68673],[39.73104,48.7325],[39.79466,48.83739],[39.97182,48.79398],[40.08168,48.87443],[40.03636,48.91957],[39.98967,48.86901],[39.78368,48.91596],[39.74874,48.98675],[39.72649,48.9754],[39.71353,48.98959],[39.6683,48.99454],[39.6836,49.05121],[39.93437,49.05709],[40.01988,49.1761],[40.22176,49.25683],[40.18331,49.34996],[40.14912,49.37681],[40.1141,49.38798],[40.03087,49.45452],[40.03636,49.52321],[40.16683,49.56865],[40.13249,49.61672],[39.84548,49.56064],[39.65047,49.61761],[39.59142,49.73758],[39.44496,49.76067],[39.27968,49.75976],[39.1808,49.88911],[38.9391,49.79524],[38.90477,49.86787],[38.73311,49.90238],[38.68677,50.00904],[38.65688,49.97176],[38.35408,50.00664],[38.32524,50.08866],[38.18517,50.08161],[38.21675,49.98104],[38.02999,49.90592],[38.02999,49.94482],[37.90776,50.04194],[37.79515,50.08425],[37.75807,50.07896],[37.61113,50.21976],[37.62879,50.24481],[37.62486,50.29966],[37.47243,50.36277],[37.48204,50.46079],[37.08468,50.34935],[36.91762,50.34963],[36.69377,50.26982],[36.64571,50.218],[36.56655,50.2413],[36.58371,50.28563],[36.47817,50.31457],[36.30101,50.29088],[36.20763,50.3943],[36.06893,50.45205],[35.8926,50.43829],[35.80388,50.41356],[35.73659,50.35489],[35.61711,50.35707],[35.58003,50.45117],[35.47463,50.49247],[35.39464,50.64751],[35.48116,50.66405],[35.47704,50.77274],[35.41367,50.80227],[35.39307,50.92145],[35.32598,50.94524],[35.40837,51.04119],[35.31774,51.08434],[35.20375,51.04723],[35.12685,51.16191],[35.14058,51.23162],[34.97304,51.2342],[34.82472,51.17483],[34.6874,51.18],[34.6613,51.25053],[34.38802,51.2746],[34.31661,51.23936],[34.23009,51.26429],[34.33446,51.363],[34.22048,51.4187],[34.30562,51.5205],[34.17599,51.63253],[34.07765,51.67065],[34.42922,51.72852],[34.41136,51.82793],[34.09413,52.00835],[34.11199,52.14087],[34.05239,52.20132],[33.78789,52.37204],[33.55718,52.30324],[33.48027,52.31499],[33.51323,52.35779],[33.18913,52.3754],[32.89937,52.2461],[32.85405,52.27888],[32.69475,52.25535],[32.54781,52.32423],[32.3528,52.32842],[32.38988,52.24946],[32.33083,52.23685],[32.34044,52.1434],[32.2777,52.10266],[32.23331,52.08085],[32.08813,52.03319],[31.92159,52.05144],[31.96141,52.08015],[31.85018,52.11305],[31.81722,52.09955],[31.7822,52.11406],[31.38326,52.12991],[31.25142,52.04131],[31.13332,52.1004],[30.95589,52.07775],[30.90897,52.00699],[30.76443,51.89739],[30.68804,51.82806],[30.51946,51.59649],[30.64992,51.35014],[30.56203,51.25655],[30.36153,51.33984],[30.34642,51.42555],[30.17888,51.51025],[29.77376,51.4461],[29.7408,51.53417],[29.54372,51.48372],[29.49773,51.39814],[29.42357,51.4187],[29.32881,51.37843],[29.25191,51.49828],[29.25603,51.57089],[29.20659,51.56918],[29.16402,51.64679],[29.1187,51.65872],[28.99098,51.56833],[28.95528,51.59222],[28.81795,51.55552],[28.76027,51.48802],[28.78224,51.45294],[28.75615,51.41442],[28.73143,51.46236],[28.69161,51.44695],[28.64429,51.5664],[28.47051,51.59734],[28.37592,51.54505],[28.23452,51.66988],[28.10658,51.57857],[27.95827,51.56065],[27.91844,51.61952],[27.85253,51.62293],[27.76052,51.47604],[27.67125,51.50854],[27.71932,51.60672],[27.55727,51.63486],[27.51058,51.5854],[27.47212,51.61184],[27.24828,51.60161],[27.26613,51.65957],[27.20948,51.66713],[27.20602,51.77291],[26.99422,51.76933],[26.9489,51.73788],[26.80043,51.75777],[26.69759,51.82284],[26.46962,51.80501],[26.39367,51.87315],[26.19084,51.86781],[26.00408,51.92967],[25.83217,51.92587],[25.80574,51.94556],[25.73673,51.91973],[25.46163,51.92205],[25.20228,51.97143],[24.98784,51.91273],[24.37123,51.88222],[24.29021,51.80841],[24.3163,51.75063],[24.13075,51.66979],[23.99907,51.58369],[23.8741,51.59734],[23.91118,51.63316],[23.7766,51.66809],[23.60906,51.62122],[23.6736,51.50255],[23.62751,51.50512],[23.69905,51.40871],[23.63858,51.32182],[23.80678,51.18405],[23.90376,51.07697],[23.92217,51.00836],[24.04576,50.90196],[24.14524,50.86128],[24.0952,50.83262],[23.99254,50.83847],[23.95925,50.79271],[24.0595,50.71625],[24.0996,50.60752],[24.07048,50.5071],[24.03668,50.44507],[23.99563,50.41289],[23.79445,50.40481],[23.71382,50.38248],[23.67635,50.33385],[23.28221,50.0957],[22.99329,49.84249],[22.83179,49.69875],[22.80261,49.69098],[22.78304,49.65543],[22.64534,49.53094],[22.69444,49.49378],[22.748,49.32759],[22.72009,49.20288],[22.86336,49.10513],[22.89122,49.00725],[22.56155,49.08865],[22.54338,49.01424],[22.48296,48.99172],[22.42934,48.92857],[22.34151,48.68893],[22.21379,48.6218],[22.16023,48.56548],[22.14689,48.4005],[22.2083,48.42534],[22.38133,48.23726],[22.49806,48.25189],[22.59007,48.15121],[22.58733,48.10813],[22.66835,48.09162],[22.73427,48.12005],[22.81804,48.11363],[22.87847,48.04665],[22.84276,47.98602],[22.89849,47.95851],[22.94301,47.96672],[22.92241,48.02002],[23.0158,47.99338],[23.08858,48.00716],[23.1133,48.08061],[23.15999,48.12188],[23.27397,48.08245],[23.33577,48.0237],[23.4979,47.96858],[23.52803,48.01818],[23.5653,48.00499],[23.63894,48.00293],[23.66262,47.98786],[23.75188,47.99705],[23.80904,47.98142],[23.8602,47.9329],[23.89352,47.94512],[23.94192,47.94868],[23.96337,47.96672],[23.98553,47.96076],[24.00801,47.968],[24.02999,47.95087],[24.06466,47.95317],[24.11281,47.91487],[24.22566,47.90231],[24.34926,47.9244],[24.43578,47.97131],[24.61994,47.95062],[24.70632,47.84428],[24.81893,47.82031],[24.88896,47.7234],[25.11144,47.75203],[25.23778,47.89403],[25.63878,47.94924],[25.77723,47.93919],[26.05901,47.9897],[26.17711,47.99246],[26.33504,48.18418],[26.55202,48.22445],[26.62823,48.25804],[26.6839,48.35828],[26.79239,48.29071],[26.82809,48.31629],[26.71274,48.40388],[26.85556,48.41095],[26.93384,48.36558],[27.03821,48.37653],[27.0231,48.42485],[27.08078,48.43214],[27.13434,48.37288],[27.27855,48.37534],[27.32159,48.4434],[27.37604,48.44398],[27.37741,48.41026],[27.44333,48.41209],[27.46942,48.454],[27.5889,48.49224],[27.59027,48.46311],[27.6658,48.44034],[27.74422,48.45926],[27.79225,48.44244],[27.81902,48.41874],[27.87533,48.4037],[27.88391,48.36699],[27.95883,48.32368],[28.04527,48.32661],[28.09873,48.3124],[28.07504,48.23494],[28.17666,48.25963],[28.19314,48.20749],[28.2856,48.23202],[28.32508,48.23384],[28.35519,48.24957],[28.36996,48.20543],[28.34912,48.1787],[28.30586,48.1597],[28.30609,48.14018],[28.34009,48.13147],[28.38712,48.17567],[28.43701,48.15832],[28.42454,48.12047],[28.48428,48.0737],[28.53921,48.17453],[28.69896,48.13106],[28.85232,48.12506],[28.8414,48.03392],[28.9306,47.96255],[29.1723,47.99013],[29.19839,47.89261],[29.27804,47.88893],[29.20663,47.80367],[29.27255,47.79953],[29.22242,47.73607],[29.22414,47.60012],[29.11743,47.55001],[29.18603,47.43387],[29.3261,47.44664],[29.39889,47.30179],[29.47854,47.30366],[29.48678,47.36043],[29.5733,47.36508],[29.59665,47.25521],[29.54996,47.24962],[29.57696,47.13581],[29.49732,47.12878],[29.53044,47.07851],[29.61038,47.09932],[29.62137,47.05069],[29.57056,46.94766],[29.72986,46.92234],[29.75458,46.8604],[29.87405,46.88199],[29.98814,46.82358],[29.94522,46.80055],[29.9743,46.75325],[29.94409,46.56002],[29.88916,46.54302],[30.02511,46.45132],[30.16794,46.40967],[30.09103,46.38694],[29.94114,46.40114],[29.88329,46.35851],[29.74496,46.45605],[29.66359,46.4215],[29.6763,46.36041],[29.5939,46.35472],[29.49914,46.45889],[29.35357,46.49505],[29.24886,46.37912],[29.23547,46.55435],[29.02409,46.49582],[29.01241,46.46177],[28.9306,46.45699],[29.004,46.31495],[28.98478,46.31803],[28.94953,46.25852],[29.06656,46.19716],[28.94643,46.09176],[29.00613,46.04962],[28.98004,46.00385],[28.74383,45.96664],[28.78503,45.83475],[28.69852,45.81753],[28.70401,45.78019],[28.52823,45.73803],[28.47879,45.66994],[28.51587,45.6613],[28.54196,45.58062],[28.49252,45.56716],[28.51449,45.49982],[28.43072,45.48538],[28.41836,45.51715],[28.30201,45.54744],[28.21139,45.46895],[28.28504,45.43907],[28.34554,45.32102],[28.5735,45.24759],[28.71358,45.22631],[28.78911,45.24179],[28.81383,45.3384],[28.94292,45.28045],[28.96077,45.33164],[29.24779,45.43388],[29.42632,45.44545],[29.59798,45.38857],[29.68175,45.26885],[29.65428,45.25629],[29.69272,45.19227],[30.04414,45.08461],[31.62627,45.50633],[33.54017,46.0123],[33.59087,46.06013],[33.57318,46.10317]]]]}},{type:"Feature",properties:{iso1A2:"UG",iso1A3:"UGA",iso1N3:"800",wikidata:"Q1036",nameEn:"Uganda",groups:["014","202","002"],driveSide:"left",callingCodes:["256"]},geometry:{type:"MultiPolygon",coordinates:[[[[33.93107,-.99298],[33.9264,-.54188],[33.98449,-.13079],[33.90936,.10581],[34.10067,.36372],[34.08727,.44713],[34.11408,.48884],[34.13493,.58118],[34.20196,.62289],[34.27345,.63182],[34.31516,.75693],[34.40041,.80266],[34.43349,.85254],[34.52369,1.10692],[34.57427,1.09868],[34.58029,1.14712],[34.67562,1.21265],[34.80223,1.22754],[34.82606,1.26626],[34.82606,1.30944],[34.7918,1.36752],[34.87819,1.5596],[34.92734,1.56109],[34.9899,1.6668],[34.98692,1.97348],[34.90947,2.42447],[34.95267,2.47209],[34.77244,2.70272],[34.78137,2.76223],[34.73967,2.85447],[34.65774,2.8753],[34.60114,2.93034],[34.56242,3.11478],[34.45815,3.18319],[34.40006,3.37949],[34.41794,3.44342],[34.39112,3.48802],[34.44922,3.51627],[34.45815,3.67385],[34.15429,3.80464],[34.06046,4.15235],[33.9873,4.23316],[33.51264,3.75068],[33.18356,3.77812],[33.02852,3.89296],[32.89746,3.81339],[32.72021,3.77327],[32.41337,3.748],[32.20782,3.6053],[32.19888,3.50867],[32.08866,3.53543],[32.08491,3.56287],[32.05187,3.589],[31.95907,3.57408],[31.96205,3.6499],[31.86821,3.78664],[31.81459,3.82083],[31.72075,3.74354],[31.50776,3.63652],[31.50478,3.67814],[31.29476,3.8015],[31.16666,3.79853],[30.97601,3.693],[30.85153,3.48867],[30.94081,3.50847],[30.93486,3.40737],[30.84251,3.26908],[30.77101,3.04897],[30.8574,2.9508],[30.8857,2.83923],[30.75612,2.5863],[30.74271,2.43601],[30.83059,2.42559],[30.91102,2.33332],[30.96911,2.41071],[31.06593,2.35862],[31.07934,2.30207],[31.12104,2.27676],[31.1985,2.29462],[31.20148,2.2217],[31.28042,2.17853],[31.30127,2.11006],[30.48503,1.21675],[30.24671,1.14974],[30.22139,.99635],[30.1484,.89805],[29.98307,.84295],[29.95477,.64486],[29.97413,.52124],[29.87284,.39166],[29.81922,.16824],[29.77454,.16675],[29.7224,.07291],[29.72687,-.08051],[29.65091,-.46777],[29.67474,-.47969],[29.67176,-.55714],[29.62708,-.71055],[29.63006,-.8997],[29.58388,-.89821],[29.59061,-1.39016],[29.82657,-1.31187],[29.912,-1.48269],[30.16369,-1.34303],[30.35212,-1.06896],[30.47194,-1.0555],[30.64166,-1.06601],[30.70631,-1.01175],[30.76635,-.9852],[30.80408,-.99911],[33.93107,-.99298]]]]}},{type:"Feature",properties:{iso1A2:"UM",iso1A3:"UMI",iso1N3:"581",wikidata:"Q16645",nameEn:"United States Minor Outlying Islands",country:"US",groups:["057","009"]},geometry:{type:"MultiPolygon",coordinates:[[[[-175.33482,-1.40631],[-175.33167,1.67574],[-177.43928,1.65656],[-177.43039,-1.43294],[-175.33482,-1.40631]]],[[[-161.04969,-1.36251],[-158.62058,-1.35506],[-158.62734,1.1296],[-161.05669,1.11722],[-161.04969,-1.36251]]],[[[-161.06795,5.2462],[-161.0731,7.1291],[-163.24994,7.12322],[-163.24478,5.24198],[-161.06795,5.2462]]],[[[-170.65691,16.57199],[-168.87689,16.01159],[-169.2329,17.4933],[-170.65691,16.57199]]],[[[-176.29741,29.09786],[-177.77531,29.29793],[-177.5224,27.7635],[-176.29741,29.09786]]],[[[-74.7289,18.71009],[-75.71816,18.46438],[-74.76465,18.06252],[-74.7289,18.71009]]],[[[167.34779,18.97692],[166.67967,20.14834],[165.82549,18.97692],[167.34779,18.97692]]]]}},{type:"Feature",properties:{iso1A2:"US",iso1A3:"USA",iso1N3:"840",wikidata:"Q30",nameEn:"United States of America",groups:["021","003","019"],roadSpeedUnit:"mph",callingCodes:["1"]},geometry:{type:"MultiPolygon",coordinates:[[[[-177.8563,29.18961],[-179.49839,27.86265],[-151.6784,9.55515],[-154.05867,45.51124],[-177.5224,27.7635],[-177.8563,29.18961]]],[[[169.34848,52.47228],[180,51.0171],[179.84401,55.10087],[169.34848,52.47228]]],[[[-168.95635,65.98512],[-169.03888,65.48473],[-172.76104,63.77445],[-179.55295,57.62081],[-179.55295,50.81807],[-133.92876,54.62289],[-130.61931,54.70835],[-130.64499,54.76912],[-130.44184,54.85377],[-130.27203,54.97174],[-130.18765,55.07744],[-130.08035,55.21556],[-129.97513,55.28029],[-130.15373,55.74895],[-130.00857,55.91344],[-130.00093,56.00325],[-130.10173,56.12178],[-130.33965,56.10849],[-130.77769,56.36185],[-131.8271,56.62247],[-133.38523,58.42773],[-133.84645,58.73543],[-134.27175,58.8634],[-134.48059,59.13231],[-134.55699,59.1297],[-134.7047,59.2458],[-135.00267,59.28745],[-135.03069,59.56208],[-135.48007,59.79937],[-136.31566,59.59083],[-136.22381,59.55526],[-136.33727,59.44466],[-136.47323,59.46617],[-136.52365,59.16752],[-136.82619,59.16198],[-137.4925,58.89415],[-137.60623,59.24465],[-138.62145,59.76431],[-138.71149,59.90728],[-139.05365,59.99655],[-139.20603,60.08896],[-139.05831,60.35205],[-139.68991,60.33693],[-139.98024,60.18027],[-140.45648,60.30919],[-140.5227,60.22077],[-141.00116,60.30648],[-140.97446,84.39275],[-168.25765,71.99091],[-168.95635,65.98512]]],[[[-97.13927,25.96583],[-96.92418,25.97377],[-82.02215,24.23074],[-79.89631,24.6597],[-79.14818,27.83105],[-61.98255,37.34815],[-67.16117,44.20069],[-66.93432,44.82597],[-66.96824,44.83078],[-66.98249,44.87071],[-66.96824,44.90965],[-67.0216,44.95333],[-67.11316,45.11176],[-67.15965,45.16179],[-67.19603,45.16771],[-67.20349,45.1722],[-67.22751,45.16344],[-67.27039,45.1934],[-67.29748,45.18173],[-67.29754,45.14865],[-67.34927,45.122],[-67.48201,45.27351],[-67.42394,45.37969],[-67.50578,45.48971],[-67.42144,45.50584],[-67.43815,45.59162],[-67.6049,45.60725],[-67.80705,45.69528],[-67.80653,45.80022],[-67.75654,45.82324],[-67.80961,45.87531],[-67.75196,45.91814],[-67.78111,45.9392],[-67.78578,47.06473],[-67.87993,47.10377],[-67.94843,47.1925],[-68.23244,47.35712],[-68.37458,47.35851],[-68.38332,47.28723],[-68.57914,47.28431],[-68.60575,47.24659],[-68.70125,47.24399],[-68.89222,47.1807],[-69.05039,47.2456],[-69.05073,47.30076],[-69.05148,47.42012],[-69.22119,47.46461],[-69.99966,46.69543],[-70.05812,46.41768],[-70.18547,46.35357],[-70.29078,46.18832],[-70.23855,46.1453],[-70.31025,45.96424],[-70.24694,45.95138],[-70.25976,45.89675],[-70.41523,45.79497],[-70.38934,45.73215],[-70.54019,45.67291],[-70.68516,45.56964],[-70.72651,45.49771],[-70.62518,45.42286],[-70.65383,45.37592],[-70.78372,45.43269],[-70.82638,45.39828],[-70.80236,45.37444],[-70.84816,45.22698],[-70.89864,45.2398],[-70.91169,45.29849],[-70.95193,45.33895],[-71.0107,45.34819],[-71.01866,45.31573],[-71.08364,45.30623],[-71.14568,45.24128],[-71.19723,45.25438],[-71.22338,45.25184],[-71.29371,45.29996],[-71.37133,45.24624],[-71.44252,45.2361],[-71.40364,45.21382],[-71.42778,45.12624],[-71.48735,45.07784],[-71.50067,45.01357],[-73.35025,45.00942],[-74.32699,44.99029],[-74.66689,45.00646],[-74.8447,45.00606],[-74.99101,44.98051],[-75.01363,44.95608],[-75.2193,44.87821],[-75.41441,44.76614],[-75.76813,44.51537],[-75.8217,44.43176],[-75.95947,44.34463],[-76.00018,44.34896],[-76.16285,44.28262],[-76.1664,44.23051],[-76.244,44.19643],[-76.31222,44.19894],[-76.35324,44.13493],[-76.43859,44.09393],[-76.79706,43.63099],[-79.25796,43.54052],[-79.06921,43.26183],[-79.05512,43.25375],[-79.05544,43.21224],[-79.05002,43.20133],[-79.05384,43.17418],[-79.04652,43.16396],[-79.0427,43.13934],[-79.06881,43.12029],[-79.05671,43.10937],[-79.07486,43.07845],[-79.01055,43.06659],[-78.99941,43.05612],[-79.02424,43.01983],[-79.02074,42.98444],[-78.98126,42.97],[-78.96312,42.95509],[-78.93224,42.95229],[-78.90905,42.93022],[-78.90712,42.89733],[-78.93684,42.82887],[-82.67862,41.67615],[-83.11184,41.95671],[-83.14962,42.04089],[-83.12724,42.2376],[-83.09837,42.28877],[-83.07837,42.30978],[-83.02253,42.33045],[-82.82964,42.37355],[-82.64242,42.55594],[-82.58873,42.54984],[-82.57583,42.5718],[-82.51858,42.611],[-82.51063,42.66025],[-82.46613,42.76615],[-82.4826,42.8068],[-82.45331,42.93139],[-82.4253,42.95423],[-82.4146,42.97626],[-82.42469,42.992],[-82.48419,45.30225],[-83.59589,45.82131],[-83.43746,45.99749],[-83.57017,46.105],[-83.83329,46.12169],[-83.90453,46.05922],[-83.95399,46.05634],[-84.1096,46.23987],[-84.09756,46.25512],[-84.11615,46.2681],[-84.11254,46.32329],[-84.13451,46.39218],[-84.11196,46.50248],[-84.12885,46.53068],[-84.17723,46.52753],[-84.1945,46.54061],[-84.2264,46.53337],[-84.26351,46.49508],[-84.29893,46.49127],[-84.34174,46.50683],[-84.42101,46.49853],[-84.4481,46.48972],[-84.47607,46.45225],[-84.55635,46.45974],[-84.85871,46.88881],[-88.37033,48.30586],[-89.48837,48.01412],[-89.57972,48.00023],[-89.77248,48.02607],[-89.89974,47.98109],[-90.07418,48.11043],[-90.56312,48.09488],[-90.56444,48.12184],[-90.75045,48.09143],[-90.87588,48.2484],[-91.08016,48.18096],[-91.25025,48.08522],[-91.43248,48.04912],[-91.45829,48.07454],[-91.58025,48.04339],[-91.55649,48.10611],[-91.70451,48.11805],[-91.71231,48.19875],[-91.86125,48.21278],[-91.98929,48.25409],[-92.05339,48.35958],[-92.14732,48.36578],[-92.202,48.35252],[-92.26662,48.35651],[-92.30939,48.31251],[-92.27167,48.25046],[-92.37185,48.22259],[-92.48147,48.36609],[-92.45588,48.40624],[-92.50712,48.44921],[-92.65606,48.43471],[-92.71323,48.46081],[-92.69927,48.49573],[-92.62747,48.50278],[-92.6342,48.54133],[-92.7287,48.54005],[-92.94973,48.60866],[-93.25391,48.64266],[-93.33946,48.62787],[-93.3712,48.60599],[-93.39758,48.60364],[-93.40693,48.60948],[-93.44472,48.59147],[-93.47022,48.54357],[-93.66382,48.51845],[-93.79267,48.51631],[-93.80939,48.52439],[-93.80676,48.58232],[-93.83288,48.62745],[-93.85769,48.63284],[-94.23215,48.65202],[-94.25104,48.65729],[-94.25172,48.68404],[-94.27153,48.70232],[-94.4174,48.71049],[-94.44258,48.69223],[-94.53826,48.70216],[-94.54885,48.71543],[-94.58903,48.71803],[-94.69335,48.77883],[-94.69669,48.80918],[-94.70486,48.82365],[-94.70087,48.8339],[-94.687,48.84077],[-94.75017,49.09931],[-94.77355,49.11998],[-94.82487,49.29483],[-94.8159,49.32299],[-94.85381,49.32492],[-94.95681,49.37035],[-94.99532,49.36579],[-95.01419,49.35647],[-95.05825,49.35311],[-95.12903,49.37056],[-95.15357,49.384],[-95.15355,48.9996],[-97.24024,48.99952],[-101.36198,48.99935],[-104.05004,48.99925],[-110.0051,48.99901],[-114.0683,48.99885],[-116.04938,48.99999],[-117.03266,49.00056],[-123.32163,49.00419],[-123.0093,48.83186],[-123.0093,48.76586],[-123.26565,48.6959],[-123.15614,48.35395],[-123.50039,48.21223],[-125.03842,48.53282],[-133.98258,38.06389],[-118.48109,32.5991],[-117.1243,32.53427],[-115.88053,32.63624],[-114.71871,32.71894],[-114.76736,32.64094],[-114.80584,32.62028],[-114.81141,32.55543],[-114.79524,32.55731],[-114.82011,32.49609],[-112.34553,31.7357],[-111.07523,31.33232],[-109.05235,31.3333],[-108.20979,31.33316],[-108.20899,31.78534],[-106.529,31.784],[-106.52266,31.77509],[-106.51251,31.76922],[-106.50962,31.76155],[-106.50111,31.75714],[-106.48815,31.74769],[-106.47298,31.75054],[-106.46726,31.75998],[-106.45244,31.76523],[-106.43419,31.75478],[-106.41773,31.75196],[-106.38003,31.73151],[-106.3718,31.71165],[-106.34864,31.69663],[-106.33419,31.66303],[-106.30305,31.62154],[-106.28084,31.56173],[-106.24612,31.54193],[-106.23711,31.51262],[-106.20346,31.46305],[-106.09025,31.40569],[-106.00363,31.39181],[-104.77674,30.4236],[-104.5171,29.64671],[-104.3969,29.57105],[-104.39363,29.55396],[-104.37752,29.54255],[-103.15787,28.93865],[-102.60596,29.8192],[-101.47277,29.7744],[-101.05686,29.44738],[-101.01128,29.36947],[-100.96725,29.3477],[-100.94579,29.34523],[-100.94056,29.33371],[-100.87982,29.296],[-100.79696,29.24688],[-100.67294,29.09744],[-100.63689,28.90812],[-100.59809,28.88197],[-100.52313,28.75598],[-100.5075,28.74066],[-100.51222,28.70679],[-100.50029,28.66117],[-99.55409,27.61314],[-99.51478,27.55836],[-99.52955,27.49747],[-99.50208,27.50021],[-99.48045,27.49016],[-99.482,27.47128],[-99.49744,27.43746],[-99.53573,27.30926],[-99.08477,26.39849],[-99.03053,26.41249],[-99.00546,26.3925],[-98.35126,26.15129],[-98.30491,26.10475],[-98.27075,26.09457],[-98.24603,26.07191],[-97.97017,26.05232],[-97.95155,26.0625],[-97.66511,26.01708],[-97.52025,25.88518],[-97.49828,25.89877],[-97.45669,25.86874],[-97.42511,25.83969],[-97.37332,25.83854],[-97.35946,25.92189],[-97.13927,25.96583]]]]}},{type:"Feature",properties:{iso1A2:"UY",iso1A3:"URY",iso1N3:"858",wikidata:"Q77",nameEn:"Uruguay",groups:["005","419","019"],callingCodes:["598"]},geometry:{type:"MultiPolygon",coordinates:[[[[-57.65132,-30.19229],[-57.61478,-30.25165],[-57.64859,-30.35095],[-57.89115,-30.49572],[-57.8024,-30.77193],[-57.89476,-30.95994],[-57.86729,-31.06352],[-57.9908,-31.34924],[-57.98127,-31.3872],[-58.07569,-31.44916],[-58.0023,-31.53084],[-58.00076,-31.65016],[-58.20252,-31.86966],[-58.10036,-32.25338],[-58.22362,-32.52416],[-58.1224,-32.98842],[-58.40475,-33.11777],[-58.44442,-33.84033],[-58.34425,-34.15035],[-57.83001,-34.69099],[-54.78916,-36.21945],[-52.83257,-34.01481],[-53.37138,-33.74313],[-53.39593,-33.75169],[-53.44031,-33.69344],[-53.52794,-33.68908],[-53.53459,-33.16843],[-53.1111,-32.71147],[-53.37671,-32.57005],[-53.39572,-32.58596],[-53.76024,-32.0751],[-54.17384,-31.86168],[-55.50821,-30.91349],[-55.50841,-30.9027],[-55.51862,-30.89828],[-55.52712,-30.89997],[-55.53276,-30.90218],[-55.53431,-30.89714],[-55.54572,-30.89051],[-55.55218,-30.88193],[-55.55373,-30.8732],[-55.5634,-30.8686],[-55.58866,-30.84117],[-55.87388,-31.05053],[-56.4619,-30.38457],[-56.4795,-30.3899],[-56.49267,-30.39471],[-56.90236,-30.02578],[-57.22502,-30.26121],[-57.65132,-30.19229]]]]}},{type:"Feature",properties:{iso1A2:"UZ",iso1A3:"UZB",iso1N3:"860",wikidata:"Q265",nameEn:"Uzbekistan",groups:["143","142"],callingCodes:["998"]},geometry:{type:"MultiPolygon",coordinates:[[[[65.85194,42.85481],[65.53277,43.31856],[65.18666,43.48835],[64.96464,43.74748],[64.53885,43.56941],[63.34656,43.64003],[62.01711,43.51008],[61.01475,44.41383],[58.59711,45.58671],[55.97842,44.99622],[55.97832,44.99622],[55.97822,44.99617],[55.97811,44.99617],[55.97801,44.99612],[55.97801,44.99607],[55.97791,44.99607],[55.9778,44.99607],[55.9777,44.99601],[55.9777,44.99596],[55.9776,44.99591],[55.97749,44.99591],[55.97739,44.99591],[55.97739,44.99586],[55.97729,44.99586],[55.97718,44.99581],[55.97708,44.99576],[55.97698,44.9957],[55.97698,44.99565],[55.97687,44.9956],[55.97677,44.9956],[55.97677,44.99555],[55.97677,44.9955],[55.97667,44.99545],[55.97656,44.99539],[55.97646,44.99534],[55.97646,44.99529],[55.97636,44.99524],[55.97636,44.99519],[55.97625,44.99514],[55.97615,44.99508],[55.97615,44.99503],[55.97615,44.99498],[55.97615,44.99493],[55.97615,44.99483],[55.97615,44.99477],[55.97605,44.99477],[55.97605,44.99467],[55.97605,44.99462],[55.97605,44.99457],[55.97605,44.99452],[55.97594,44.99446],[55.97584,44.99441],[55.97584,44.99436],[55.97584,44.99431],[55.97584,44.99426],[55.97584,44.99421],[55.97584,44.99415],[55.97584,44.99405],[55.97584,44.994],[55.97584,44.9939],[55.97584,44.99384],[55.97584,44.99374],[55.97584,44.99369],[55.97584,44.99359],[55.97584,44.99353],[55.97584,44.99348],[55.97584,44.99343],[55.97584,44.99338],[55.97584,44.99328],[55.97584,44.99322],[56.00314,41.32584],[57.03423,41.25435],[57.13796,41.36625],[57.03359,41.41777],[56.96218,41.80383],[57.03633,41.92043],[57.30275,42.14076],[57.6296,42.16519],[57.84932,42.18555],[57.92897,42.24047],[57.90975,42.4374],[57.99214,42.50021],[58.3492,42.43335],[58.40688,42.29535],[58.51674,42.30348],[58.29427,42.56497],[58.14321,42.62159],[58.27504,42.69632],[58.57991,42.64988],[58.6266,42.79314],[58.93422,42.5407],[59.17317,42.52248],[59.2955,42.37064],[59.4341,42.29738],[59.94633,42.27655],[60.00539,42.212],[59.96419,42.1428],[60.04659,42.08982],[60.0356,42.01028],[59.95046,41.97966],[60.33223,41.75058],[60.08504,41.80997],[60.06032,41.76287],[60.18117,41.60082],[60.06581,41.4363],[60.5078,41.21694],[61.03261,41.25691],[61.22212,41.14946],[61.33199,41.14946],[61.39732,41.19873],[61.4446,41.29407],[61.87856,41.12257],[62.11751,40.58242],[62.34273,40.43206],[62.43337,39.98528],[63.6913,39.27666],[63.70778,39.22349],[64.19086,38.95561],[64.32576,38.98691],[65.55873,38.29052],[65.83913,38.25733],[66.24013,38.16238],[66.41042,38.02403],[66.56697,38.0435],[66.67684,37.96776],[66.53676,37.80084],[66.52852,37.58568],[66.65761,37.45497],[66.52303,37.39827],[66.55743,37.35409],[66.64699,37.32958],[66.95598,37.40162],[67.08232,37.35469],[67.13039,37.27168],[67.2224,37.24545],[67.2581,37.17216],[67.51868,37.26102],[67.78329,37.1834],[67.8474,37.31594],[67.81566,37.43107],[68.12635,37.93],[68.27159,37.91477],[68.40343,38.19484],[68.13289,38.40822],[68.06274,38.39435],[68.11366,38.47169],[68.05873,38.56087],[68.0807,38.64136],[68.05598,38.71641],[68.12877,38.73677],[68.06948,38.82115],[68.19743,38.85985],[68.09704,39.02589],[67.68915,39.00775],[67.67833,39.14479],[67.33226,39.23739],[67.36522,39.31287],[67.45998,39.315],[67.46822,39.46146],[67.39681,39.52505],[67.46547,39.53564],[67.44899,39.57799],[67.62889,39.60234],[67.70992,39.66156],[68.12053,39.56317],[68.54166,39.53929],[68.61972,39.68905],[68.63071,39.85265],[68.88889,39.87163],[68.93695,39.91167],[68.84906,40.04952],[68.96579,40.06949],[69.01935,40.11466],[69.01523,40.15771],[68.62796,40.07789],[68.52771,40.11676],[68.5332,40.14826],[68.77902,40.20492],[68.79276,40.17555],[68.84357,40.18604],[68.85832,40.20885],[69.04544,40.22904],[69.15659,40.2162],[69.2074,40.21488],[69.30448,40.18774],[69.30104,40.24502],[69.25229,40.26362],[69.24817,40.30357],[69.30808,40.2821],[69.32833,40.29794],[69.33794,40.34819],[69.30774,40.36102],[69.28525,40.41894],[69.27066,40.49274],[69.21063,40.54469],[69.2643,40.57506],[69.3455,40.57988],[69.32834,40.70233],[69.38327,40.7918],[69.53021,40.77621],[69.59441,40.70181],[69.69434,40.62615],[70.36655,40.90296],[70.38028,41.02014],[70.45251,41.04438],[70.80009,40.72825],[70.49871,40.52503],[70.32626,40.45174],[70.37511,40.38605],[70.57149,40.3442],[70.56394,40.26421],[70.62342,40.17396],[70.8607,40.217],[70.9818,40.22392],[70.95789,40.28761],[71.05901,40.28765],[71.13042,40.34106],[71.36663,40.31593],[71.4246,40.28619],[71.51215,40.26943],[71.51549,40.22986],[71.61725,40.20615],[71.61931,40.26775],[71.68386,40.26984],[71.70569,40.20391],[71.69621,40.18492],[71.71719,40.17886],[71.73054,40.14818],[71.82646,40.21872],[71.85002,40.25647],[72.05464,40.27586],[71.96401,40.31907],[72.18648,40.49893],[72.24368,40.46091],[72.40346,40.4007],[72.44191,40.48222],[72.41513,40.50856],[72.38384,40.51535],[72.41714,40.55736],[72.34406,40.60144],[72.40517,40.61917],[72.47795,40.5532],[72.66713,40.5219],[72.66713,40.59076],[72.69579,40.59778],[72.73995,40.58409],[72.74768,40.58051],[72.74862,40.57131],[72.75982,40.57273],[72.74894,40.59592],[72.74866,40.60873],[72.80137,40.67856],[72.84754,40.67229],[72.85372,40.7116],[72.8722,40.71111],[72.93296,40.73089],[72.99133,40.76457],[73.0612,40.76678],[73.13412,40.79122],[73.13267,40.83512],[73.01869,40.84681],[72.94454,40.8094],[72.84291,40.85512],[72.68157,40.84942],[72.59136,40.86947],[72.55109,40.96046],[72.48742,40.97136],[72.45206,41.03018],[72.38511,41.02785],[72.36138,41.04384],[72.34757,41.06104],[72.34026,41.04539],[72.324,41.03381],[72.18339,40.99571],[72.17594,41.02377],[72.21061,41.05607],[72.1792,41.10621],[72.14864,41.13363],[72.17594,41.15522],[72.16433,41.16483],[72.10745,41.15483],[72.07249,41.11739],[71.85964,41.19081],[71.91457,41.2982],[71.83914,41.3546],[71.76625,41.4466],[71.71132,41.43012],[71.73054,41.54713],[71.65914,41.49599],[71.6787,41.42111],[71.57227,41.29175],[71.46688,41.31883],[71.43814,41.19644],[71.46148,41.13958],[71.40198,41.09436],[71.34877,41.16807],[71.27187,41.11015],[71.25813,41.18796],[71.11806,41.15359],[71.02193,41.19494],[70.9615,41.16393],[70.86263,41.23833],[70.77885,41.24813],[70.78572,41.36419],[70.67586,41.47953],[70.48909,41.40335],[70.17682,41.5455],[70.69777,41.92554],[71.28719,42.18033],[71.13263,42.28356],[70.94483,42.26238],[69.49545,41.545],[69.45751,41.56863],[69.39485,41.51518],[69.45081,41.46246],[69.37468,41.46555],[69.35554,41.47211],[69.29778,41.43673],[69.25059,41.46693],[69.23332,41.45847],[69.22671,41.46298],[69.20439,41.45391],[69.18528,41.45175],[69.17701,41.43769],[69.15137,41.43078],[69.05006,41.36183],[69.01308,41.22804],[68.7217,41.05025],[68.73945,40.96989],[68.65662,40.93861],[68.62221,41.03019],[68.49983,40.99669],[68.58444,40.91447],[68.63,40.59358],[68.49983,40.56437],[67.96736,40.83798],[68.1271,41.0324],[68.08273,41.08148],[67.98511,41.02794],[67.9644,41.14611],[66.69129,41.1311],[66.53302,41.87388],[66.00546,41.94455],[66.09482,42.93426],[65.85194,42.85481]],[[70.68112,40.90612],[70.6721,40.90555],[70.57501,40.98941],[70.54223,40.98787],[70.56077,41.00642],[70.6158,40.97661],[70.68112,40.90612]]],[[[71.21139,40.03369],[71.12218,40.03052],[71.06305,40.1771],[71.00236,40.18154],[71.01035,40.05481],[71.11037,40.01984],[71.11668,39.99291],[71.09063,39.99],[71.10501,39.95568],[71.04979,39.89808],[71.10531,39.91354],[71.16101,39.88423],[71.23067,39.93581],[71.1427,39.95026],[71.21139,40.03369]]],[[[71.86463,39.98598],[71.78838,40.01404],[71.71511,39.96348],[71.7504,39.93701],[71.84316,39.95582],[71.86463,39.98598]]]]}},{type:"Feature",properties:{iso1A2:"VA",iso1A3:"VAT",iso1N3:"336",wikidata:"Q237",nameEn:"Vatican City",aliases:["Holy See"],groups:["039","150"],callingCodes:["379","39 06"]},geometry:{type:"MultiPolygon",coordinates:[[[[12.45181,41.90056],[12.45446,41.90028],[12.45435,41.90143],[12.45626,41.90172],[12.45691,41.90125],[12.4577,41.90115],[12.45834,41.90174],[12.45826,41.90281],[12.45755,41.9033],[12.45762,41.9058],[12.45561,41.90629],[12.45543,41.90738],[12.45091,41.90625],[12.44984,41.90545],[12.44815,41.90326],[12.44582,41.90194],[12.44834,41.90095],[12.45181,41.90056]]]]}},{type:"Feature",properties:{iso1A2:"VC",iso1A3:"VCT",iso1N3:"670",wikidata:"Q757",nameEn:"St. Vincent and the Grenadines",aliases:["WV"],groups:["029","003","419","019"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["1 784"]},geometry:{type:"MultiPolygon",coordinates:[[[[-61.73897,12.61191],[-61.38256,12.52991],[-61.13395,12.51526],[-60.70539,13.41452],[-61.43129,13.68336],[-61.73897,12.61191]]]]}},{type:"Feature",properties:{iso1A2:"VE",iso1A3:"VEN",iso1N3:"862",wikidata:"Q717",nameEn:"Venezuela",aliases:["YV"],groups:["005","419","019"],callingCodes:["58"]},geometry:{type:"MultiPolygon",coordinates:[[[[-71.22331,13.01387],[-70.92579,11.96275],[-71.3275,11.85],[-71.9675,11.65536],[-72.24983,11.14138],[-72.4767,11.1117],[-72.88002,10.44309],[-72.98085,9.85253],[-73.36905,9.16636],[-73.02119,9.27584],[-72.94052,9.10663],[-72.77415,9.10165],[-72.65474,8.61428],[-72.4042,8.36513],[-72.36987,8.19976],[-72.35163,8.01163],[-72.39137,8.03534],[-72.47213,7.96106],[-72.48801,7.94329],[-72.48183,7.92909],[-72.47042,7.92306],[-72.45806,7.91141],[-72.46183,7.90682],[-72.44454,7.86031],[-72.46763,7.79518],[-72.47827,7.65604],[-72.45321,7.57232],[-72.47415,7.48928],[-72.43132,7.40034],[-72.19437,7.37034],[-72.04895,7.03837],[-71.82441,7.04314],[-71.44118,7.02116],[-71.42212,7.03854],[-71.37234,7.01588],[-71.03941,6.98163],[-70.7596,7.09799],[-70.10716,6.96516],[-69.41843,6.1072],[-67.60654,6.2891],[-67.4625,6.20625],[-67.43513,5.98835],[-67.58558,5.84537],[-67.63914,5.64963],[-67.59141,5.5369],[-67.83341,5.31104],[-67.85358,4.53249],[-67.62671,3.74303],[-67.50067,3.75812],[-67.30945,3.38393],[-67.85862,2.86727],[-67.85862,2.79173],[-67.65696,2.81691],[-67.21967,2.35778],[-66.85795,1.22998],[-66.28507,.74585],[-65.6727,1.01353],[-65.50158,.92086],[-65.57288,.62856],[-65.11657,1.12046],[-64.38932,1.5125],[-64.34654,1.35569],[-64.08274,1.64792],[-64.06135,1.94722],[-63.39827,2.16098],[-63.39114,2.4317],[-64.0257,2.48156],[-64.02908,2.79797],[-64.48379,3.7879],[-64.84028,4.24665],[-64.72977,4.28931],[-64.57648,4.12576],[-64.14512,4.12932],[-63.99183,3.90172],[-63.86082,3.94796],[-63.70218,3.91417],[-63.67099,4.01731],[-63.50611,3.83592],[-63.42233,3.89995],[-63.4464,3.9693],[-63.21111,3.96219],[-62.98296,3.59935],[-62.7655,3.73099],[-62.74411,4.03331],[-62.57656,4.04754],[-62.44822,4.18621],[-62.13094,4.08309],[-61.54629,4.2822],[-61.48569,4.43149],[-61.29675,4.44216],[-61.31457,4.54167],[-61.15703,4.49839],[-60.98303,4.54167],[-60.86539,4.70512],[-60.5802,4.94312],[-60.73204,5.20931],[-61.4041,5.95304],[-61.15058,6.19558],[-61.20762,6.58174],[-61.13632,6.70922],[-60.54873,6.8631],[-60.39419,6.94847],[-60.28074,7.1162],[-60.44116,7.20817],[-60.54098,7.14804],[-60.63367,7.25061],[-60.59802,7.33194],[-60.71923,7.55817],[-60.64793,7.56877],[-60.51959,7.83373],[-60.38056,7.8302],[-60.02407,8.04557],[-59.97059,8.20791],[-59.83156,8.23261],[-59.80661,8.28906],[-59.85562,8.35213],[-59.98508,8.53046],[-59.54058,8.6862],[-60.89962,9.81445],[-62.08693,10.04435],[-61.62505,11.18974],[-63.73917,11.92623],[-63.19938,16.44103],[-67.89186,12.4116],[-68.01417,11.77722],[-68.33524,11.78151],[-68.99639,11.79035],[-71.22331,13.01387]]]]}},{type:"Feature",properties:{iso1A2:"VG",iso1A3:"VGB",iso1N3:"092",wikidata:"Q25305",nameEn:"British Virgin Islands",country:"GB",groups:["029","003","419","019"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["1 284"]},geometry:{type:"MultiPolygon",coordinates:[[[[-64.03057,18.08241],[-63.75633,19.39745],[-65.02435,18.73231],[-64.86027,18.39056],[-64.64067,18.36478],[-64.646,18.10286],[-64.03057,18.08241]]]]}},{type:"Feature",properties:{iso1A2:"VI",iso1A3:"VIR",iso1N3:"850",wikidata:"Q11703",nameEn:"United States Virgin Islands",country:"US",groups:["029","003","419","019"],driveSide:"left",roadSpeedUnit:"mph",callingCodes:["1 340"]},geometry:{type:"MultiPolygon",coordinates:[[[[-65.02435,18.73231],[-65.27974,17.56928],[-64.35558,17.48384],[-64.646,18.10286],[-64.64067,18.36478],[-64.86027,18.39056],[-65.02435,18.73231]]]]}},{type:"Feature",properties:{iso1A2:"VN",iso1A3:"VNM",iso1N3:"704",wikidata:"Q881",nameEn:"Vietnam",groups:["035","142"],callingCodes:["84"]},geometry:{type:"MultiPolygon",coordinates:[[[[108.10003,21.47338],[108.0569,21.53604],[108.02926,21.54997],[107.97932,21.54503],[107.97383,21.53961],[107.97074,21.54072],[107.96774,21.53601],[107.95232,21.5388],[107.92652,21.58906],[107.90006,21.5905],[107.86114,21.65128],[107.80355,21.66141],[107.66967,21.60787],[107.56537,21.61945],[107.54047,21.5934],[107.49065,21.59774],[107.49532,21.62958],[107.47197,21.6672],[107.41593,21.64839],[107.38636,21.59774],[107.35989,21.60063],[107.35834,21.6672],[107.29296,21.74674],[107.24625,21.7077],[107.20734,21.71493],[107.10771,21.79879],[107.02615,21.81981],[107.00964,21.85948],[107.06101,21.88982],[107.05634,21.92303],[106.99252,21.95191],[106.97228,21.92592],[106.92714,21.93459],[106.9178,21.97357],[106.81038,21.97934],[106.74345,22.00965],[106.72551,21.97923],[106.69276,21.96013],[106.68274,21.99811],[106.70142,22.02409],[106.6983,22.15102],[106.67495,22.1885],[106.69986,22.22309],[106.6516,22.33977],[106.55976,22.34841],[106.57221,22.37],[106.55665,22.46498],[106.58395,22.474],[106.61269,22.60301],[106.65316,22.5757],[106.71698,22.58432],[106.72321,22.63606],[106.76293,22.73491],[106.82404,22.7881],[106.83685,22.8098],[106.81271,22.8226],[106.78422,22.81532],[106.71128,22.85982],[106.71387,22.88296],[106.6734,22.89587],[106.6516,22.86862],[106.60179,22.92884],[106.55976,22.92311],[106.51306,22.94891],[106.49749,22.91164],[106.34961,22.86718],[106.27022,22.87722],[106.19705,22.98475],[106.00179,22.99049],[105.99568,22.94178],[105.90119,22.94168],[105.8726,22.92756],[105.72382,23.06641],[105.57594,23.075],[105.56037,23.16806],[105.49966,23.20669],[105.42805,23.30824],[105.40782,23.28107],[105.32376,23.39684],[105.22569,23.27249],[105.17276,23.28679],[105.11672,23.25247],[105.07002,23.26248],[104.98712,23.19176],[104.96532,23.20463],[104.9486,23.17235],[104.91435,23.18666],[104.87992,23.17141],[104.87382,23.12854],[104.79478,23.12934],[104.8334,23.01484],[104.86765,22.95178],[104.84942,22.93631],[104.77114,22.90017],[104.72755,22.81984],[104.65283,22.83419],[104.60457,22.81841],[104.58122,22.85571],[104.47225,22.75813],[104.35593,22.69353],[104.25683,22.76534],[104.27084,22.8457],[104.11384,22.80363],[104.03734,22.72945],[104.01088,22.51823],[103.99247,22.51958],[103.97384,22.50634],[103.96783,22.51173],[103.96352,22.50584],[103.95191,22.5134],[103.94513,22.52553],[103.93286,22.52703],[103.87904,22.56683],[103.64506,22.79979],[103.56255,22.69499],[103.57812,22.65764],[103.52675,22.59155],[103.43646,22.70648],[103.43179,22.75816],[103.32282,22.8127],[103.28079,22.68063],[103.18895,22.64471],[103.15782,22.59873],[103.17961,22.55705],[103.07843,22.50097],[103.0722,22.44775],[102.9321,22.48659],[102.8636,22.60735],[102.60675,22.73376],[102.57095,22.7036],[102.51802,22.77969],[102.46665,22.77108],[102.42618,22.69212],[102.38415,22.67919],[102.41061,22.64184],[102.25339,22.4607],[102.26428,22.41321],[102.16621,22.43336],[102.14099,22.40092],[102.18712,22.30403],[102.51734,22.02676],[102.49092,21.99002],[102.62301,21.91447],[102.67145,21.65894],[102.74189,21.66713],[102.82115,21.73667],[102.81894,21.83888],[102.85637,21.84501],[102.86077,21.71213],[102.97965,21.74076],[102.98846,21.58936],[102.86297,21.4255],[102.94223,21.46034],[102.88939,21.3107],[102.80794,21.25736],[102.89825,21.24707],[102.97745,21.05821],[103.03469,21.05821],[103.12055,20.89994],[103.21497,20.89832],[103.38032,20.79501],[103.45737,20.82382],[103.68633,20.66324],[103.73478,20.6669],[103.82282,20.8732],[103.98024,20.91531],[104.11121,20.96779],[104.27412,20.91433],[104.63957,20.6653],[104.38199,20.47155],[104.40621,20.3849],[104.47886,20.37459],[104.66158,20.47774],[104.72102,20.40554],[104.62195,20.36633],[104.61315,20.24452],[104.86852,20.14121],[104.91695,20.15567],[104.9874,20.09573],[104.8465,19.91783],[104.8355,19.80395],[104.68359,19.72729],[104.64837,19.62365],[104.53169,19.61743],[104.41281,19.70035],[104.23229,19.70242],[104.06498,19.66926],[104.05617,19.61743],[104.10832,19.51575],[104.06058,19.43484],[103.87125,19.31854],[104.5361,18.97747],[104.64617,18.85668],[105.12829,18.70453],[105.19654,18.64196],[105.1327,18.58355],[105.10408,18.43533],[105.15942,18.38691],[105.38366,18.15315],[105.46292,18.22008],[105.64784,17.96687],[105.60381,17.89356],[105.76612,17.67147],[105.85744,17.63221],[106.09019,17.36399],[106.18991,17.28227],[106.24444,17.24714],[106.29287,17.3018],[106.31929,17.20509],[106.43597,17.01362],[106.50862,16.9673],[106.55045,17.0031],[106.54824,16.92729],[106.51963,16.92097],[106.52183,16.87884],[106.55265,16.86831],[106.55485,16.68704],[106.59013,16.62259],[106.58267,16.6012],[106.61477,16.60713],[106.66052,16.56892],[106.65832,16.47816],[106.74418,16.41904],[106.84104,16.55415],[106.88727,16.52671],[106.88067,16.43594],[106.96638,16.34938],[106.97385,16.30204],[107.02597,16.31132],[107.09091,16.3092],[107.15035,16.26271],[107.14595,16.17816],[107.25822,16.13587],[107.33968,16.05549],[107.44975,16.08511],[107.46296,16.01106],[107.39471,15.88829],[107.34188,15.89464],[107.21419,15.83747],[107.21859,15.74638],[107.27143,15.71459],[107.27583,15.62769],[107.34408,15.62345],[107.3815,15.49832],[107.50699,15.48771],[107.53341,15.40496],[107.62367,15.42193],[107.60605,15.37524],[107.62587,15.2266],[107.58844,15.20111],[107.61926,15.13949],[107.61486,15.0566],[107.46516,15.00982],[107.48277,14.93751],[107.59285,14.87795],[107.51579,14.79282],[107.54361,14.69092],[107.55371,14.628],[107.52102,14.59034],[107.52569,14.54665],[107.48521,14.40346],[107.44941,14.41552],[107.39493,14.32655],[107.40427,14.24509],[107.33577,14.11832],[107.37158,14.07906],[107.35757,14.02319],[107.38247,13.99147],[107.44318,13.99751],[107.46498,13.91593],[107.45252,13.78897],[107.53503,13.73908],[107.61909,13.52577],[107.62843,13.3668],[107.49144,13.01215],[107.49611,12.88926],[107.55993,12.7982],[107.5755,12.52177],[107.55059,12.36824],[107.4463,12.29373],[107.42917,12.24657],[107.34511,12.33327],[107.15831,12.27547],[106.99953,12.08983],[106.92325,12.06548],[106.79405,12.0807],[106.70687,11.96956],[106.4111,11.97413],[106.4687,11.86751],[106.44068,11.86294],[106.44535,11.8279],[106.41577,11.76999],[106.45158,11.68616],[106.44691,11.66787],[106.37219,11.69836],[106.30525,11.67549],[106.26478,11.72122],[106.18539,11.75171],[106.13158,11.73283],[106.06708,11.77761],[106.02038,11.77457],[106.00792,11.7197],[105.95188,11.63738],[105.88962,11.67854],[105.8507,11.66635],[105.80867,11.60536],[105.81645,11.56876],[105.87328,11.55953],[105.88962,11.43605],[105.86782,11.28343],[106.10444,11.07879],[106.1527,11.10476],[106.1757,11.07301],[106.20095,10.97795],[106.14301,10.98176],[106.18539,10.79451],[106.06708,10.8098],[105.94535,10.9168],[105.93403,10.83853],[105.84603,10.85873],[105.86376,10.89839],[105.77751,11.03671],[105.50045,10.94586],[105.42884,10.96878],[105.34011,10.86179],[105.11449,10.96332],[105.08326,10.95656],[105.02722,10.89236],[105.09571,10.72722],[104.95094,10.64003],[104.87933,10.52833],[104.59018,10.53073],[104.49869,10.4057],[104.47963,10.43046],[104.43778,10.42386],[103.99198,10.48391],[102.47649,9.66162],[104.81582,8.03101],[109.55486,8.10026],[111.60491,13.57105],[108.00365,17.98159],[108.10003,21.47338]]]]}},{type:"Feature",properties:{iso1A2:"VU",iso1A3:"VUT",iso1N3:"548",wikidata:"Q686",nameEn:"Vanuatu",groups:["054","009"],callingCodes:["678"]},geometry:{type:"MultiPolygon",coordinates:[[[[162.93363,-17.28904],[173.26254,-22.69968],[168.21179,-12.88558],[166.02864,-12.9396],[162.93363,-17.28904]]]]}},{type:"Feature",properties:{iso1A2:"WF",iso1A3:"WLF",iso1N3:"876",wikidata:"Q35555",nameEn:"Wallis and Futuna",country:"FR",groups:["061","009"],callingCodes:["681"]},geometry:{type:"MultiPolygon",coordinates:[[[[-178.60161,-14.95666],[-176.76826,-14.95183],[-174.17905,-14.94502],[-174.18596,-12.48057],[-178.60852,-12.49232],[-178.60161,-14.95666]]]]}},{type:"Feature",properties:{iso1A2:"WS",iso1A3:"WSM",iso1N3:"882",wikidata:"Q683",nameEn:"Samoa",groups:["061","009"],driveSide:"left",callingCodes:["685"]},geometry:{type:"MultiPolygon",coordinates:[[[[-174.17905,-14.94502],[-173.13438,-14.94228],[-171.14262,-14.93704],[-171.14953,-12.4725],[-174.18596,-12.48057],[-174.17905,-14.94502]]]]}},{type:"Feature",properties:{iso1A2:"XK",iso1A3:"XKX",wikidata:"Q1246",nameEn:"Kosovo",aliases:["KV"],groups:["039","150"],isoStatus:"usrAssn",callingCodes:["383"]},geometry:{type:"MultiPolygon",coordinates:[[[[21.39045,42.74888],[21.44047,42.87276],[21.36941,42.87397],[21.32974,42.90424],[21.2719,42.8994],[21.23534,42.95523],[21.23877,43.00848],[21.2041,43.02277],[21.16734,42.99694],[21.14465,43.11089],[21.08952,43.13471],[21.05378,43.10707],[21.00749,43.13984],[20.96287,43.12416],[20.83727,43.17842],[20.88685,43.21697],[20.82145,43.26769],[20.73811,43.25068],[20.68688,43.21335],[20.59929,43.20492],[20.69515,43.09641],[20.64557,43.00826],[20.59929,43.01067],[20.48692,42.93208],[20.53484,42.8885],[20.43734,42.83157],[20.40594,42.84853],[20.35692,42.8335],[20.27869,42.81945],[20.2539,42.76245],[20.04898,42.77701],[20.02088,42.74789],[20.02915,42.71147],[20.0969,42.65559],[20.07761,42.55582],[20.17127,42.50469],[20.21797,42.41237],[20.24399,42.32168],[20.34479,42.32656],[20.3819,42.3029],[20.48857,42.25444],[20.56955,42.12097],[20.55633,42.08173],[20.59434,42.03879],[20.63069,41.94913],[20.57946,41.91593],[20.59524,41.8818],[20.68523,41.85318],[20.76786,41.91839],[20.75464,42.05229],[21.11491,42.20794],[21.16614,42.19815],[21.22728,42.08909],[21.31983,42.10993],[21.29913,42.13954],[21.30496,42.1418],[21.38428,42.24465],[21.43882,42.23609],[21.43882,42.2789],[21.50823,42.27156],[21.52145,42.24465],[21.58992,42.25915],[21.56772,42.30946],[21.5264,42.33634],[21.53467,42.36809],[21.57021,42.3647],[21.59029,42.38042],[21.62887,42.37664],[21.64209,42.41081],[21.62556,42.45106],[21.7035,42.51899],[21.70522,42.54176],[21.7327,42.55041],[21.75672,42.62695],[21.79413,42.65923],[21.75025,42.70125],[21.6626,42.67813],[21.58755,42.70418],[21.59154,42.72643],[21.47498,42.74695],[21.39045,42.74888]]]]}},{type:"Feature",properties:{iso1A2:"YE",iso1A3:"YEM",iso1N3:"887",wikidata:"Q805",nameEn:"Yemen",groups:["145","142"],callingCodes:["967"]},geometry:{type:"MultiPolygon",coordinates:[[[[53.32998,16.16312],[53.09917,16.67084],[52.81185,17.28568],[52.74267,17.29519],[52.78009,17.35124],[52.00311,19.00083],[49.04884,18.59899],[48.19996,18.20584],[47.58351,17.50366],[47.48245,17.10808],[47.00571,16.94765],[46.76494,17.29151],[46.31018,17.20464],[44.50126,17.47475],[43.70631,17.35762],[43.43005,17.56148],[43.29185,17.53224],[43.22533,17.38343],[43.32653,17.31179],[43.20156,17.25901],[43.17787,17.14717],[43.23967,17.03428],[43.18233,17.02673],[43.1813,16.98438],[43.19328,16.94703],[43.1398,16.90696],[43.18338,16.84852],[43.22012,16.83932],[43.22956,16.80613],[43.24801,16.80613],[43.26303,16.79479],[43.25857,16.75304],[43.21325,16.74416],[43.22066,16.65179],[43.15274,16.67248],[43.11601,16.53166],[42.97215,16.51093],[42.94351,16.49467],[42.94625,16.39721],[42.76801,16.40371],[42.15205,16.40211],[41.37609,16.19728],[41.29956,15.565],[42.63806,13.58268],[43.29075,12.79154],[43.32909,12.59711],[43.90659,12.3823],[50.51849,13.0483],[51.12877,12.56479],[52.253,11.68582],[55.69862,12.12478],[53.32998,16.16312]]]]}},{type:"Feature",properties:{iso1A2:"YT",iso1A3:"MYT",iso1N3:"175",wikidata:"Q17063",nameEn:"Mayotte",country:"FR",groups:["EU","014","202","002"],callingCodes:["262"]},geometry:{type:"MultiPolygon",coordinates:[[[[43.83794,-13.66915],[45.54824,-13.22353],[45.50237,-11.90315],[43.83794,-13.66915]]]]}},{type:"Feature",properties:{iso1A2:"ZA",iso1A3:"ZAF",iso1N3:"710",wikidata:"Q258",nameEn:"South Africa",groups:["018","202","002"],driveSide:"left",callingCodes:["27"]},geometry:{type:"MultiPolygon",coordinates:[[[[31.30611,-22.422],[31.16344,-22.32599],[31.08932,-22.34884],[30.86696,-22.28907],[30.6294,-22.32599],[30.48686,-22.31368],[30.38614,-22.34533],[30.28351,-22.35587],[30.2265,-22.2961],[30.13147,-22.30841],[29.92242,-22.19408],[29.76848,-22.14128],[29.64609,-22.12917],[29.37703,-22.19581],[29.21955,-22.17771],[29.18974,-22.18599],[29.15268,-22.21399],[29.10881,-22.21202],[29.0151,-22.22907],[28.91889,-22.44299],[28.63287,-22.55887],[28.34874,-22.5694],[28.04562,-22.8394],[28.04752,-22.90243],[27.93729,-22.96194],[27.93539,-23.04941],[27.74154,-23.2137],[27.6066,-23.21894],[27.52393,-23.37952],[27.33768,-23.40917],[26.99749,-23.65486],[26.84165,-24.24885],[26.51667,-24.47219],[26.46346,-24.60358],[26.39409,-24.63468],[25.8515,-24.75727],[25.84295,-24.78661],[25.88571,-24.87802],[25.72702,-25.25503],[25.69661,-25.29284],[25.6643,-25.4491],[25.58543,-25.6343],[25.33076,-25.76616],[25.12266,-25.75931],[25.01718,-25.72507],[24.8946,-25.80723],[24.67319,-25.81749],[24.44703,-25.73021],[24.36531,-25.773],[24.18287,-25.62916],[23.9244,-25.64286],[23.47588,-25.29971],[23.03497,-25.29971],[22.86012,-25.50572],[22.70808,-25.99186],[22.56365,-26.19668],[22.41921,-26.23078],[22.21206,-26.3773],[22.06192,-26.61882],[21.90703,-26.66808],[21.83291,-26.65959],[21.77114,-26.69015],[21.7854,-26.79199],[21.69322,-26.86152],[21.37869,-26.82083],[21.13353,-26.86661],[20.87031,-26.80047],[20.68596,-26.9039],[20.63275,-26.78181],[20.61754,-26.4692],[20.86081,-26.14892],[20.64795,-25.47827],[20.29826,-24.94869],[20.03678,-24.81004],[20.02809,-24.78725],[19.99817,-24.76768],[19.99882,-28.42622],[18.99885,-28.89165],[17.4579,-28.68718],[17.15405,-28.08573],[16.90446,-28.057],[16.59922,-28.53246],[16.46592,-28.57126],[16.45332,-28.63117],[12.51595,-32.27486],[38.88176,-48.03306],[34.51034,-26.91792],[32.35222,-26.86027],[32.29584,-26.852],[32.22302,-26.84136],[32.19409,-26.84032],[32.13315,-26.84345],[32.09664,-26.80721],[32.00893,-26.8096],[31.97463,-27.11057],[31.97592,-27.31675],[31.49834,-27.31549],[31.15027,-27.20151],[30.96088,-27.0245],[30.97757,-26.92706],[30.88826,-26.79622],[30.81101,-26.84722],[30.78927,-26.48271],[30.95819,-26.26303],[31.13073,-25.91558],[31.31237,-25.7431],[31.4175,-25.71886],[31.86881,-25.99973],[31.974,-25.95387],[31.92649,-25.84216],[32.00631,-25.65044],[31.97875,-25.46356],[32.01676,-25.38117],[32.03196,-25.10785],[31.9835,-24.29983],[31.90368,-24.18892],[31.87707,-23.95293],[31.77445,-23.90082],[31.70223,-23.72695],[31.67942,-23.60858],[31.56539,-23.47268],[31.55779,-23.176],[31.30611,-22.422]],[[29.33204,-29.45598],[29.28545,-29.58456],[29.12553,-29.76266],[29.16548,-29.91706],[28.9338,-30.05072],[28.80222,-30.10579],[28.68627,-30.12885],[28.399,-30.1592],[28.2319,-30.28476],[28.12073,-30.68072],[27.74814,-30.60635],[27.69467,-30.55862],[27.67819,-30.53437],[27.6521,-30.51707],[27.62137,-30.50509],[27.56781,-30.44562],[27.56901,-30.42504],[27.45452,-30.32239],[27.38108,-30.33456],[27.36649,-30.27246],[27.37293,-30.19401],[27.40778,-30.14577],[27.32555,-30.14785],[27.29603,-30.05473],[27.22719,-30.00718],[27.09489,-29.72796],[27.01016,-29.65439],[27.33464,-29.48161],[27.4358,-29.33465],[27.47254,-29.31968],[27.45125,-29.29708],[27.48679,-29.29349],[27.54258,-29.25575],[27.5158,-29.2261],[27.55974,-29.18954],[27.75458,-28.89839],[27.8907,-28.91612],[27.88933,-28.88156],[27.9392,-28.84864],[27.98675,-28.8787],[28.02503,-28.85991],[28.1317,-28.7293],[28.2348,-28.69471],[28.30518,-28.69531],[28.40612,-28.6215],[28.65091,-28.57025],[28.68043,-28.58744],[29.40524,-29.21246],[29.44883,-29.3772],[29.33204,-29.45598]]]]}},{type:"Feature",properties:{iso1A2:"ZM",iso1A3:"ZMB",iso1N3:"894",wikidata:"Q953",nameEn:"Zambia",groups:["014","202","002"],driveSide:"left",callingCodes:["260"]},geometry:{type:"MultiPolygon",coordinates:[[[[32.95389,-9.40138],[32.76233,-9.31963],[32.75611,-9.28583],[32.53661,-9.24281],[32.49147,-9.14754],[32.43543,-9.11988],[32.25486,-9.13371],[32.16146,-9.05993],[32.08206,-9.04609],[31.98866,-9.07069],[31.94196,-9.02303],[31.94663,-8.93846],[31.81587,-8.88618],[31.71158,-8.91386],[31.57147,-8.81388],[31.57147,-8.70619],[31.37533,-8.60769],[31.00796,-8.58615],[30.79243,-8.27382],[28.88917,-8.4831],[28.9711,-8.66935],[28.38526,-9.23393],[28.36562,-9.30091],[28.52636,-9.35379],[28.51627,-9.44726],[28.56208,-9.49122],[28.68532,-9.78],[28.62795,-9.92942],[28.65032,-10.65133],[28.37241,-11.57848],[28.48357,-11.87532],[29.18592,-12.37921],[29.4992,-12.43843],[29.48404,-12.23604],[29.8139,-12.14898],[29.81551,-13.44683],[29.65078,-13.41844],[29.60531,-13.21685],[29.01918,-13.41353],[28.33199,-12.41375],[27.59932,-12.22123],[27.21025,-11.76157],[27.22541,-11.60323],[27.04351,-11.61312],[26.88687,-12.01868],[26.01777,-11.91488],[25.33058,-11.65767],[25.34069,-11.19707],[24.42612,-11.44975],[24.34528,-11.06816],[24.00027,-10.89356],[24.02603,-11.15368],[23.98804,-12.13149],[24.06672,-12.29058],[23.90937,-12.844],[24.03339,-12.99091],[21.97988,-13.00148],[22.00323,-16.18028],[22.17217,-16.50269],[23.20038,-17.47563],[23.47474,-17.62877],[24.23619,-17.47489],[24.32811,-17.49082],[24.38712,-17.46818],[24.5621,-17.52963],[24.70864,-17.49501],[25.00198,-17.58221],[25.26433,-17.79571],[25.51646,-17.86232],[25.6827,-17.81987],[25.85738,-17.91403],[25.85892,-17.97726],[26.08925,-17.98168],[26.0908,-17.93021],[26.21601,-17.88608],[26.55918,-17.99638],[26.68403,-18.07411],[26.74314,-18.0199],[26.89926,-17.98756],[27.14196,-17.81398],[27.30736,-17.60487],[27.61377,-17.34378],[27.62795,-17.24365],[27.83141,-16.96274],[28.73725,-16.5528],[28.76199,-16.51575],[28.81454,-16.48611],[28.8501,-16.04537],[28.9243,-15.93987],[29.01298,-15.93805],[29.21955,-15.76589],[29.4437,-15.68702],[29.8317,-15.6126],[30.35574,-15.6513],[30.41902,-15.62269],[30.22098,-14.99447],[33.24249,-14.00019],[33.16749,-13.93992],[33.07568,-13.98447],[33.02977,-14.05022],[32.99042,-13.95689],[32.88985,-13.82956],[32.79015,-13.80755],[32.76962,-13.77224],[32.84528,-13.71576],[32.7828,-13.64805],[32.68654,-13.64268],[32.66468,-13.60019],[32.68436,-13.55769],[32.73683,-13.57682],[32.84176,-13.52794],[32.86113,-13.47292],[33.0078,-13.19492],[32.98289,-13.12671],[33.02181,-12.88707],[32.96733,-12.88251],[32.94397,-12.76868],[33.05917,-12.59554],[33.18837,-12.61377],[33.28177,-12.54692],[33.37517,-12.54085],[33.54485,-12.35996],[33.47636,-12.32498],[33.3705,-12.34931],[33.25998,-12.14242],[33.33937,-11.91252],[33.32692,-11.59248],[33.24252,-11.59302],[33.23663,-11.40637],[33.29267,-11.43536],[33.29267,-11.3789],[33.39697,-11.15296],[33.25998,-10.88862],[33.28022,-10.84428],[33.47636,-10.78465],[33.70675,-10.56896],[33.54797,-10.36077],[33.53863,-10.20148],[33.31297,-10.05133],[33.37902,-9.9104],[33.36581,-9.81063],[33.31517,-9.82364],[33.2095,-9.61099],[33.12144,-9.58929],[33.10163,-9.66525],[33.05485,-9.61316],[33.00256,-9.63053],[33.00476,-9.5133],[32.95389,-9.40138]]]]}},{type:"Feature",properties:{iso1A2:"ZW",iso1A3:"ZWE",iso1N3:"716",wikidata:"Q954",nameEn:"Zimbabwe",groups:["014","202","002"],driveSide:"left",callingCodes:["263"]},geometry:{type:"MultiPolygon",coordinates:[[[[30.41902,-15.62269],[30.35574,-15.6513],[29.8317,-15.6126],[29.4437,-15.68702],[29.21955,-15.76589],[29.01298,-15.93805],[28.9243,-15.93987],[28.8501,-16.04537],[28.81454,-16.48611],[28.76199,-16.51575],[28.73725,-16.5528],[27.83141,-16.96274],[27.62795,-17.24365],[27.61377,-17.34378],[27.30736,-17.60487],[27.14196,-17.81398],[26.89926,-17.98756],[26.74314,-18.0199],[26.68403,-18.07411],[26.55918,-17.99638],[26.21601,-17.88608],[26.0908,-17.93021],[26.08925,-17.98168],[25.85892,-17.97726],[25.85738,-17.91403],[25.6827,-17.81987],[25.51646,-17.86232],[25.26433,-17.79571],[25.23909,-17.90832],[25.31799,-18.07091],[25.39972,-18.12691],[25.53465,-18.39041],[25.68859,-18.56165],[25.79217,-18.6355],[25.82353,-18.82808],[25.94326,-18.90362],[25.99837,-19.02943],[25.96226,-19.08152],[26.17227,-19.53709],[26.72246,-19.92707],[27.21278,-20.08244],[27.29831,-20.28935],[27.28865,-20.49873],[27.69361,-20.48531],[27.72972,-20.51735],[27.69171,-21.08409],[27.91407,-21.31621],[28.01669,-21.57624],[28.29416,-21.59037],[28.49942,-21.66634],[28.58114,-21.63455],[29.07763,-21.81877],[29.04023,-21.85864],[29.02191,-21.90647],[29.02191,-21.95665],[29.04108,-22.00563],[29.08495,-22.04867],[29.14501,-22.07275],[29.1974,-22.07472],[29.24648,-22.05967],[29.3533,-22.18363],[29.37703,-22.19581],[29.64609,-22.12917],[29.76848,-22.14128],[29.92242,-22.19408],[30.13147,-22.30841],[30.2265,-22.2961],[30.28351,-22.35587],[30.38614,-22.34533],[30.48686,-22.31368],[30.6294,-22.32599],[30.86696,-22.28907],[31.08932,-22.34884],[31.16344,-22.32599],[31.30611,-22.422],[31.38336,-22.36919],[32.41234,-21.31246],[32.48236,-21.32873],[32.37115,-21.133],[32.51644,-20.91929],[32.48122,-20.63319],[32.55167,-20.56312],[32.66174,-20.56106],[32.85987,-20.27841],[32.85987,-20.16686],[32.93032,-20.03868],[33.01178,-20.02007],[33.06461,-19.77787],[32.95013,-19.67219],[32.84666,-19.68462],[32.84446,-19.48343],[32.78282,-19.47513],[32.77966,-19.36098],[32.85107,-19.29238],[32.87088,-19.09279],[32.84006,-19.0262],[32.72118,-19.02204],[32.69917,-18.94293],[32.73439,-18.92628],[32.70137,-18.84712],[32.82465,-18.77419],[32.9017,-18.7992],[32.95013,-18.69079],[32.88629,-18.58023],[32.88629,-18.51344],[33.02278,-18.4696],[33.03159,-18.35054],[32.94133,-17.99705],[33.0492,-17.60298],[32.98536,-17.55891],[32.96554,-17.48964],[33.0426,-17.3468],[33.00517,-17.30477],[32.96554,-17.11971],[32.84113,-16.92259],[32.91051,-16.89446],[32.97655,-16.70689],[32.78943,-16.70267],[32.69917,-16.66893],[32.71017,-16.59932],[32.42838,-16.4727],[32.28529,-16.43892],[32.02772,-16.43892],[31.91324,-16.41569],[31.90223,-16.34388],[31.67988,-16.19595],[31.42451,-16.15154],[31.30563,-16.01193],[31.13171,-15.98019],[30.97761,-16.05848],[30.91597,-15.99924],[30.42568,-15.9962],[30.41902,-15.62269]]]]}}],rawBorders={type:type,features:features},borders=rawBorders,whichPolygonGetter={},featuresByCode={},idFilterRegex=/\bThe\b|\bthe\b|\band\b|\bof\b|[-_ .,()&[\]/]/g,levels=["subterritory","territory","country","intermediateRegion","subregion","region","union","world"],_dataDeprecated,_nsi;function loadDerivedDataAndCaches(e){var t,n,r,i,a=["iso1A2","iso1A3","m49","wikidata","emojiFlag","nameEn"],o=[];for(var s in e.features){var l=e.features[s];l.properties.id=l.properties.iso1A2||l.properties.m49,i=void 0,!(i=l.properties).m49&&i.iso1N3&&(i.m49=i.iso1N3),r=void 0,!(r=l.properties).isoStatus&&r.iso1A2&&(r.isoStatus="official"),function(e){var t=e.properties;if(t.level)return;t.country?"official"===t.isoStatus?t.level="territory":t.level="subterritory":t.level="country"}(l),function(e){var t=e.properties;t.groups||(t.groups=[]);t.country&&t.groups.push(t.country);"001"!==t.m49&&t.groups.push("001")}(l),(n=void 0)===(n=l.properties).roadSpeedUnit&&n.iso1A2&&"EU"!==n.iso1A2&&(n.roadSpeedUnit="km/h"),(t=void 0)===(t=l.properties).driveSide&&t.iso1A2&&"EU"!==t.iso1A2&&(t.driveSide="right"),function(e){if(!e.properties.iso1A2)return;var t=e.properties.iso1A2.replace(/./g,function(e){return String.fromCodePoint(e.charCodeAt(0)+127397)});e.properties.emojiFlag=t}(l),function(e){for(var t in a){var n=a[t],r=n&&e.properties[n];r&&(r=r.replace(idFilterRegex,"").toUpperCase(),featuresByCode[r]=e)}if(e.properties.aliases)for(var i in e.properties.aliases){var o=e.properties.aliases[i].replace(idFilterRegex,"").toUpperCase();featuresByCode[o]=e}}(l),l.geometry&&o.push(l)}for(var c in e.features){var u=e.features[c];u.properties.groups.sort(function(e,t){return levels.indexOf(featuresByCode[e].properties.level)-levels.indexOf(featuresByCode[t].properties.level)}),function(e){var t=e.properties.id,n=[];for(var r in e.properties.groups){var i=e.properties.groups[r],o=featuresByCode[i];n.push(o.properties.id),o.properties.members?o.properties.members.push(t):o.properties.members=[t]}e.properties.groups=n}(u)}whichPolygonGetter=whichPolygon_1({type:"RegionFeatureCollection",features:o})}function locArray(e){return Array.isArray(e)?e:e.coordinates?e.coordinates:e.geometry.coordinates}function smallestFeature(e){var t=locArray(e),n=whichPolygonGetter(t);return n?featuresByCode[n.id]:null}function countryFeature(e){var t=smallestFeature(e);if(!t)return null;var n=t.properties.country||t.properties.iso1A2;return featuresByCode[n]}function featureForLoc(e,t){if(t&&t.level&&"country"!==t.level){var n=featuresContaining(e),r=t.level,i=levels.indexOf(r);if(-1===i)return null;for(var o in n){var a=n[o];if(a.properties.level===r||levels.indexOf(a.properties.level)>i)return a}return null}return countryFeature(e)}function featureForID(e){var t;return"number"==typeof e?1===(t=e.toString()).length?t="00"+t:2===t.length&&(t="0"+t):t=e.replace(idFilterRegex,"").toUpperCase(),featuresByCode[t]||null}function smallestOrMatchingFeature(e){return("object"==typeof e?smallestFeature:featureForID)(e)}function feature(e,t){return"object"==typeof e?featureForLoc(e,t):featureForID(e)}function iso1A2Code(e,t){var n=feature(e,t);return n&&n.properties.iso1A2||null}function featuresContaining(e,t){var n=smallestOrMatchingFeature(e);if(!n)return[];var r=[];t&&"object"!=typeof e||r.push(n);var i=n.properties;for(var o in i.groups){var a=i.groups[o];r.push(featuresByCode[a])}return r}function roadSpeedUnit(e){var t=smallestOrMatchingFeature(e);return t&&t.properties.roadSpeedUnit||null}function validationOutdatedTags(){var b="outdated_tags",w=["amenity","shop","tourism","leisure","office"];function r(r,t){var e,n,i=Object.assign({},r.tags),o=_mainPresetIndex.match(r,t),a="deprecated_tags";if(!o)return[];o.replacement&&(e=_mainPresetIndex.item(o.replacement),t=actionChangePreset(r.id,o,e,!0)(t),r=t.entity(r.id),o=e),!_dataDeprecated||(n=r.deprecatedTags(_dataDeprecated)).length&&(n.forEach(function(e){t=actionUpgradeTags(r.id,e.old,e.replace)(t)}),r=t.entity(r.id));var s,l=Object.assign({},r.tags);if((o.tags!==o.addTags&&Object.keys(o.addTags).forEach(function(e){l[e]||("*"===o.addTags[e]?l[e]="yes":l[e]=o.addTags[e])}),_nsi)&&(l.wikidata&&(s=_nsi.wikidata[l.wikidata]),!s&&l.wikipedia&&(s=_nsi.wikipedia[l.wikipedia]),s&&!l.office&&(l.wikidata&&(l["brand:wikidata"]=l.wikidata,delete l.wikidata),l.wikipedia&&(l["brand:wikipedia"]=l.wikipedia,delete l.wikipedia)),l.name))for(var c=0;c<w.length;c++){var u=w[c];if(l[u]){var p=iso1A2Code(r.extent(t).center()),d=_nsi.matcher.matchKVN(u,l[u],l.name,p&&p.toLowerCase());if(d&&!d.d){var f=_nsi.brands[d.kvnd];if(f&&f.tags["brand:wikidata"]&&f.tags["brand:wikidata"]!==r.tags["not:brand:wikidata"]){a="noncanonical_brand";var h=["takeaway"].reduce(function(e,t){return l[t]&&(e[t]=l[t]),e},{});w.forEach(function(e){return delete l[e]}),Object.assign(l,f.tags,h);break}}}}var g=utilTagDiff(i,l);if(!g.length)return[];var m=g.every(function(e){return"+"===e.type}),y="";"noncanonical_brand"===a?y="noncanonical_brand.":"deprecated_tags"===a&&m&&(a="incomplete_tags",y="incomplete.");var v="noncanonical_brand"!==a?[_,_t("issues.fix.upgrade_tags.annotation")]:null;return[new validationIssue({type:b,subtype:a,severity:"warning",message:function(e){var t=e.hasEntity(r.id);if(!t)return"";var n="issues.outdated_tags."+y+"message";"noncanonical_brand"===a&&m&&(n+="_incomplete");return _t(n,{feature:utilDisplayLabel(t,e.graph())})},reference:function(e){var t=e.selectAll(".issue-reference").data([0]).enter();t.append("div").attr("class","issue-reference").text(_t("issues.outdated_tags."+y+"reference")),t.append("strong").text(_t("issues.suggested")),t.append("table").attr("class","tagDiff-table").selectAll(".tagDiff-row").data(g).enter().append("tr").attr("class","tagDiff-row").append("td").attr("class",function(e){return"tagDiff-cell tagDiff-cell-"+("+"===e.type?"add":"remove")}).text(function(e){return e.display})},entityIds:[r.id],hash:JSON.stringify(g),dynamicFixes:function(){return[new validationIssueFix({autoArgs:v,title:_t("issues.fix.upgrade_tags.title"),onClick:function(e){e.perform(_,_t("issues.fix.upgrade_tags.annotation"))}})]}})];function _(e){var t=e.hasEntity(r.id);if(!t)return e;var n=Object.assign({},t.tags);return g.forEach(function(e){"-"===e.type?delete n[e.key]:"+"===e.type&&(n[e.key]=e.newVal)}),actionChangeTags(t.id,n)(e)}}function i(e,t){var r,i;if("relation"===e.type)i=osmOldMultipolygonOuterMemberOfRelation(e,t),r=e;else{if("way"!==e.type)return[];r=osmIsOldMultipolygonOuterMember(e,t),i=e}return r&&i?[new validationIssue({type:b,subtype:"old_multipolygon",severity:"warning",message:function(e){var t=e.hasEntity(r.id);return t?_t("issues.old_multipolygon.message",{multipolygon:utilDisplayLabel(t,e.graph())}):""},reference:function(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.old_multipolygon.reference"))},entityIds:[i.id,r.id],dynamicFixes:function(){return[new validationIssueFix({autoArgs:[n,_t("issues.fix.move_tags.annotation")],title:_t("issues.fix.move_tags.title"),onClick:function(e){e.perform(n,_t("issues.fix.move_tags.annotation"))}})]}})]:[];function n(e){var t=e.hasEntity(r.id),n=e.hasEntity(i.id);return t&&n?(t=t.mergeTags(n.tags),e=e.replace(t),actionChangeTags(n.id,{})(e)):e}}_mainFileFetcher.get("deprecated").then(function(e){return _dataDeprecated=e}).catch(function(){}),_mainFileFetcher.get("nsi_brands").then(function(i){return(_nsi={brands:i.brands,matcher:matcher$1(),wikidata:{},wikipedia:{}}).matcher.buildMatchIndex(i.brands),Object.keys(i.brands).forEach(function(e){var t=i.brands[e],n=t.tags["brand:wikidata"],r=t.tags["brand:wikipedia"];n&&(_nsi.wikidata[n]=e),r&&(_nsi.wikipedia[r]=e)}),_nsi}).catch(function(){});function e(e,t){var n=i(e,t);return n.length||(n=r(e,t)),n}return e.type=b,e}function validationPrivateData(){function e(r){var e=r.tags;if(!e.building||!l[e.building])return[];var t={};for(var n in e){if(c[n])return[];u[n]||(t[n]=e[n])}var i=utilTagDiff(e,t);if(!i.length)return[];var o=1===i.length?"remove_tag":"remove_tags";return[new validationIssue({type:s,severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]);return t?_t("issues.private_data.contact.message",{feature:utilDisplayLabel(t,e.graph())}):""},reference:function(e){var t=e.selectAll(".issue-reference").data([0]).enter();t.append("div").attr("class","issue-reference").text(_t("issues.private_data.reference")),t.append("strong").text(_t("issues.suggested")),t.append("table").attr("class","tagDiff-table").selectAll(".tagDiff-row").data(i).enter().append("tr").attr("class","tagDiff-row").append("td").attr("class",function(e){return"tagDiff-cell tagDiff-cell-"+("+"===e.type?"add":"remove")}).text(function(e){return e.display})},entityIds:[r.id],dynamicFixes:function(){return[new validationIssueFix({icon:"iD-operation-delete",title:_t("issues.fix."+o+".title"),onClick:function(e){e.perform(a,_t("issues.fix.upgrade_tags.annotation"))}})]}})];function a(e){var t=e.hasEntity(r.id);if(!t)return e;var n=Object.assign({},t.tags);return i.forEach(function(e){"-"===e.type?delete n[e.key]:"+"===e.type&&(n[e.key]=e.newVal)}),actionChangeTags(t.id,n)(e)}}var s="private_data",l={detached:!0,farm:!0,house:!0,houseboat:!0,residential:!0,semidetached_house:!0,static_caravan:!0},c={amenity:!0,craft:!0,historic:!0,leisure:!0,office:!0,shop:!0,tourism:!0},u={"contact:email":!0,"contact:fax":!0,"contact:phone":!0,email:!0,fax:!0,phone:!0};return e.type=s,e}loadDerivedDataAndCaches(borders);var _discardNameRegexes=[];function validationSuspiciousName(){var t="suspicious_name",o=["aerialway","aeroway","amenity","building","craft","highway","leisure","railway","man_made","office","shop","tourism","waterway"];function c(e,t){return function(e,t){for(var n=0;n<o.length;n++){var r=o[n],i=t[r];if(i&&(i=i.toLowerCase(),r===e||i===e||r.replace(/\_/g," ")===e||i.replace(/\_/g," ")===e))return 1}return}(e=e.toLowerCase(),t)||(n=e,_discardNameRegexes.some(function(e){return e.test(n)}));var n}function u(e,i,o,a){return new validationIssue({type:t,subtype:"generic_name",severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]);if(!t)return"";var n=_mainPresetIndex.match(t,e.graph()),r=a&&_mainLocalizer.languageName(a);return _t("issues.generic_name.message"+(r?"_language":""),{feature:n.name(),name:o,language:r})},reference:function(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.generic_name.reference"))},entityIds:[e],hash:i+"="+o,dynamicFixes:function(){return[new validationIssueFix({icon:"iD-operation-delete",title:_t("issues.fix.remove_the_name.title"),onClick:function(e){var t=this.issue.entityIds[0],n=e.entity(t),r=Object.assign({},n.tags);delete r[i],e.perform(actionChangeTags(t,r),_t("issues.fix.remove_generic_name.annotation"))}})]}})}function p(e,i,o,a){return new validationIssue({type:t,subtype:"not_name",severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]);if(!t)return"";var n=_mainPresetIndex.match(t,e.graph()),r=a&&_mainLocalizer.languageName(a);return _t("issues.incorrect_name.message"+(r?"_language":""),{feature:n.name(),name:o,language:r})},reference:function(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.generic_name.reference"))},entityIds:[e],hash:i+"="+o,dynamicFixes:function(){return[new validationIssueFix({icon:"iD-operation-delete",title:_t("issues.fix.remove_the_name.title"),onClick:function(e){var t=this.issue.entityIds[0],n=e.entity(t),r=Object.assign({},n.tags);delete r[i],e.perform(actionChangeTags(t,r),_t("issues.fix.remove_mistaken_name.annotation"))}})]}})}_mainFileFetcher.get("nsi_filters").then(function(e){_discardNameRegexes=e.discardNames.map(function(e){return new RegExp(e,"i")})}).catch(function(){});function e(e){if(e.hasWikidata())return[];var t=[],n=(e.tags["not:name"]||"").split(";");for(var r in e.tags){var i=r.match(/^name(?:(?::)([a-zA-Z_-]+))?$/);if(i){var o=2<=i.length?i[1]:null,a=e.tags[r];if(n.length)for(var s in n){var l=n[s];l&&a===l&&t.push(p(e.id,r,a,o))}c(a,e.tags)&&t.push(u(e.id,r,a,o))}}return t}return e.type=t,e}function validationUnsquareWay(c){var u="unsquare_way";function p(e,t){return"way"===e.type&&"area"===e.geometry(t)&&(e.tags.building&&"no"!==e.tags.building)}function e(t,n){if(!p(t,n))return[];if("yes"===t.tags.nonsquare)return[];var e=t.isClosed();if(!e)return[];var r=n.childNodes(t).slice();if(11<r.length)return[];var i=services.osm;if(!i||r.some(function(e){return!i.isDataLoaded(e.loc)}))return[];if(r.some(function(e){return n.parentWays(e).some(function(e){return e.id!==t.id&&(!!p(e,n)||n.parentRelations(e).some(function(e){return e.isMultipolygon()&&e.tags.building&&"no"!==e.tags.building}))})}))return[];var o,a,s=corePreferences("validate-square-degrees"),l=isNaN(s)?5:parseFloat(s);return geoOrthoCanOrthogonalize(r.map(function(e){return c.projection(e.loc)}),e,.05,l,!0)?(t.tags.wikidata||((a=actionOrthogonalize(t.id,c.projection,void 0,l)).transitionable=!1,o=[a,_t("operations.orthogonalize.annotation.feature.single")]),[new validationIssue({type:u,subtype:"building",severity:"warning",message:function(e){var t=e.hasEntity(this.entityIds[0]);return t?_t("issues.unsquare_way.message",{feature:utilDisplayLabel(t,e.graph())}):""},reference:function(e){e.selectAll(".issue-reference").data([0]).enter().append("div").attr("class","issue-reference").text(_t("issues.unsquare_way.buildings.reference"))},entityIds:[t.id],hash:JSON.stringify(void 0!==o)+l,dynamicFixes:function(){return[new validationIssueFix({icon:"iD-operation-orthogonalize",title:_t("issues.fix.square_feature.title"),autoArgs:o,onClick:function(e,t){var n=this.issue.entityIds[0];e.perform(actionOrthogonalize(n,e.projection,void 0,l),_t("operations.orthogonalize.annotation.feature.single")),window.setTimeout(function(){t()},175)}})]}})]):[]}return e.type=u,e}var Validations=Object.freeze({__proto__:null,validationAlmostJunction:validationAlmostJunction,validationCloseNodes:validationCloseNodes,validationCrossingWays:validationCrossingWays,validationDisconnectedWay:validationDisconnectedWay,validationFormatting:validationFormatting,validationHelpRequest:validationHelpRequest,validationImpossibleOneway:validationImpossibleOneway,validationIncompatibleSource:validationIncompatibleSource,validationMaprules:validationMaprules,validationMismatchedGeometry:validationMismatchedGeometry,validationMissingRole:validationMissingRole,validationMissingTag:validationMissingTag,validationOutdatedTags:validationOutdatedTags,validationPrivateData:validationPrivateData,validationSuspiciousName:validationSuspiciousName,validationUnsquareWay:validationUnsquareWay});function coreValidator(s){var i=dispatch("validated","focusedIssue"),n=utilRebind({},i,"on"),a={},l={},c={},u=validationCache(),p=validationCache(),o=null,t=new Set;function e(r,i){var o=a.unsquare_way;"function"==typeof o&&(r.uncacheIssuesOfType("unsquare_way"),s.history().tree().intersects(geoExtent([-180,-90],[180,90]),i).filter(function(e){return"way"===e.type&&e.tags.building&&"no"!==e.tags.building}).forEach(function(e){var t,n=o(e,i);1===n.length&&(t=n[0],r.issuesByEntityID[e.id]||(r.issuesByEntityID[e.id]=new Set),r.issuesByEntityID[e.id].add(t.id),r.issuesByIssueID[t.id]=t)}))}n.init=function(){Object.values(Validations).forEach(function(e){var t,n;"function"==typeof e&&(n=(t=e(s)).type,a[n]=t)});var e=corePreferences("validate-disabledRules");e&&e.split(",").forEach(function(e){l[e]=!0})},n.reset=function(){Array.from(t).forEach(function(e){window.cancelIdleCallback(e),t.delete(e)}),c={},u=validationCache(),p=validationCache(),o=null},n.resetIgnoredIssues=function(){c={},i.call("validated")},n.reloadUnsquareIssues=function(){e(p,s.graph()),e(u,s.history().base()),i.call("validated")},n.getIssues=function(e){var o=Object.assign({what:"all",where:"all",includeIgnored:!1,includeDisabledRules:!1},e),t=Object.values(p.issuesByIssueID),a=s.map().extent();return t.filter(function(e){if(!e)return!1;if("only"===o.includeDisabledRules&&!l[e.type])return!1;if(!o.includeDisabledRules&&l[e.type])return!1;if("only"===o.includeIgnored&&!c[e.id])return!1;if(!o.includeIgnored&&c[e.id])return!1;for(var t=e.entityIds||[],n=0;n<t.length;n++){var r=t[n];if(!s.hasEntity(r))return delete p.issuesByEntityID[r],delete p.issuesByIssueID[e.id],!1}if("edited"===o.what&&u.issuesByIssueID[e.id])return!1;if("visible"===o.where){var i=e.extent(s.graph());if(!a.intersects(i))return!1}return!0})},n.getResolvedIssues=function(){return Object.values(u.issuesByIssueID).filter(function(e){return!p.issuesByIssueID[e.id]})},n.focusIssue=function(t){var e,n=t.extent(s.graph());n&&(e=Math.max(s.map().zoom(),19),s.map().unobscuredCenterZoomEase(n.center(),e),t.entityIds&&t.entityIds.length&&window.setTimeout(function(){var e=t.entityIds;s.enter(modeSelect(s,[e[0]])),i.call("focusedIssue",this,t)},250))},n.getIssuesBySeverity=function(e){var t=utilArrayGroupBy(n.getIssues(e),"severity");return t.error=t.error||[],t.warning=t.warning||[],t};var d=["missing_tag","missing_role","outdated_tags","mismatched_geometry","crossing_ways","almost_junction","disconnected_way","impossible_oneway"];function f(r,i){var o=[];return Object.keys(a).forEach(function(e){var t,n=a[e];"function"==typeof n?(t=n(r,i),o=o.concat(t)):console.error("no such validation rule = "+e)}),o}function h(e,i){var o=new Set;return e.reduce(function(t,e){if(o.has(e))return t;o.add(e);var n=i.hasEntity(e);if(!n)return t;t.add(e);var r=[n];return"node"===n.type?i.parentWays(n).forEach(function(e){t.add(e.id),r.push(e)}):"relation"===n.type?n.members.forEach(function(e){t.add(e.id)}):"way"===n.type&&n.nodes.forEach(function(e){t.add(e),i._parentWays[e].forEach(function(e){t.add(e)})}),r.forEach(function(e){"relation"!==e.type&&i.parentRelations(e).forEach(function(e){t.add(e.id)})}),t},new Set)}function g(e,r,i){e.forEach(i.uncacheEntityID),e.forEach(function(e){var t,n=r.hasEntity(e);n&&(t=f(n,r),i.cacheIssues(t))})}return n.getSharedEntityIssues=function(e,t){var r=p,n=e.reduce(function(e,t){var n=r.issuesByEntityID[t]||new Set;return e?new Set([].concat(e).filter(function(e){return n.has(e)})):new Set(n)},null)||[],i=t||{};return Array.from(n).map(function(e){return r.issuesByIssueID[e]}).filter(function(e){return!!e&&(!("only"===i.includeDisabledRules&&!l[e.type])&&(!(!i.includeDisabledRules&&l[e.type])&&(!("only"===i.includeIgnored&&!c[e.id])&&!(!i.includeIgnored&&c[e.id]))))}).sort(function(e,t){if(e.type===t.type)return e.id<t.id?-1:1;var n=d.indexOf(e.type),r=d.indexOf(t.type);return-1!==n&&-1!==r?n-r:-1===n&&-1===r?e.type<t.type?-1:1:-1!==n?-1:1})},n.getEntityIssues=function(e,t){return n.getSharedEntityIssues([e],t)},n.getRuleKeys=function(){return Object.keys(a)},n.isRuleEnabled=function(e){return!l[e]},n.toggleRule=function(e){l[e]?delete l[e]:l[e]=!0,corePreferences("validate-disabledRules",Object.keys(l).join(",")),n.validate()},n.disableRules=function(e){l={},e.forEach(function(e){l[e]=!0}),corePreferences("validate-disabledRules",Object.keys(l).join(",")),n.validate()},n.ignoreIssue=function(e){c[e]=!0},n.validate=function(){var e,t,n,r=s.graph();r!==(o=o||s.history().base())&&(t=coreDifference(e=o,r),o=r,n=h(t.extantIDs(!0),r),h(t.deleted().concat(t.modified()).map(function(e){return e.id}),e).forEach(n.add,n),g(n,s.graph(),p)),i.call("validated")},s.history().on("restore.validator",n.validate).on("undone.validator",n.validate).on("redone.validator",n.validate),s.on("exit.validator",n.validate),s.history().on("merge.validator",function(r){var e;r&&(e=window.requestIdleCallback(function(){var e=r.map(function(e){return e.id}),t=s.graph();g(h(e,t),t,p);var n=s.history().base();g(h(e,n),n,u),i.call("validated")}),t.add(e))}),n}function validationCache(){var n={issuesByIssueID:{},issuesByEntityID:{},cacheIssues:function(e){e.forEach(function(t){(t.entityIds||[]).forEach(function(e){n.issuesByEntityID[e]||(n.issuesByEntityID[e]=new Set),n.issuesByEntityID[e].add(t.id)}),n.issuesByIssueID[t.id]=t})},uncacheIssue:function(t){(t.entityIds||[]).forEach(function(e){n.issuesByEntityID[e]&&n.issuesByEntityID[e].delete(t.id)}),delete n.issuesByIssueID[t.id]},uncacheIssues:function(e){e.forEach(n.uncacheIssue)},uncacheIssuesOfType:function(t){var e=Object.values(n.issuesByIssueID).filter(function(e){return e.type===t});n.uncacheIssues(e)},uncacheEntityID:function(e){var t=n.issuesByEntityID[e];t&&(t.forEach(function(e){var t=n.issuesByIssueID[e];t?n.uncacheIssue(t):delete n.issuesByIssueID[e]}),delete n.issuesByEntityID[e])}};return n}function coreUploader(u){var o,m=dispatch("saveStarted","saveEnded","willAttemptUpload","progressChanged","resultNoChanges","resultErrors","resultConflicts","resultSuccess"),a=!1,y=[],v=[],_={};_mainFileFetcher.get("discarded").then(function(e){_=e}).catch(function(){});var s=utilRebind({},m,"on");function b(e){var t,n,r=u.connection();r||v.push({msg:"No OSM Service"}),y.length?function(e){y.sort(function(e,t){return t.id.localeCompare(e.id)}),m.call("resultConflicts",this,e,y,o),l()}(e):v.length?w():(n=(t=u.history()).changes(actionDiscardTags(t.difference(),_))).modified.length||n.created.length||n.deleted.length?(m.call("willAttemptUpload",this),r.putChangeset(e,n,i)):function(){m.call("resultNoChanges",this),l(),u.flush()}()}function i(e,t){e?409===e.status?s.save(t,!0,!0):(v.push({msg:e.message||e.responseText,details:[_t("save.status_code",{code:e.status})]}),w()):function(e){u.history().clearSaved(),m.call("resultSuccess",this,e),window.setTimeout(function(){l(),u.flush()},2500)}(t)}function w(){u.history().pop(),m.call("resultErrors",this,v),l()}function l(){a=!1,m.call("saveEnded",this)}return s.isSaving=function(){return a},s.save=function(t,n,r){var e,i;a&&!n||(e=u.connection())&&(e.authenticated()?(a||(a=!0,m.call("saveStarted",this)),i=u.history(),y=[],v=[],o=i.changes(actionDiscardTags(i.difference(),_)),n||i.perform(actionNoop()),(r?function(i){var o=u.connection();if(!o)return;for(var d=u.history(),f=u.graph(),h=coreGraph(d.base(),!0),e=d.difference().summary(),a=[],t=0;t<e.length;t++){var n=e[t];"modified"===n.changeType&&a.push(n.entity.id)}var s=function(e,n){var r=new Set(e);return e.forEach(function(e){var t=n.entity(e);"way"===t.type&&n.childNodes(t).forEach(function(e){void 0!==e.version&&r.add(e.id)})}),Array.from(r)}(a,f),l={},c=0,g=s.length;a.length?(m.call("progressChanged",this,c,g),s.forEach(function(e){l[e]=!1}),o.loadMultiple(s,function e(t,n){if(v.length)return;{var r;t?(v.push({msg:t.message||t.responseText,details:[_t("save.status_code",{code:t.status})]}),w()):(r=[],n.data.forEach(function(t){var e,n;if(h.replace(t),l[t.id]=!0,s=s.filter(function(e){return e!==t.id}),t.visible)if("way"===t.type)for(e=0;e<t.nodes.length;e++)n=t.nodes[e],void 0===l[n]&&(l[n]=!1,r.push(n));else if("relation"===t.type&&t.isMultipolygon())for(e=0;e<t.members.length;e++)n=t.members[e].id,void 0===l[n]&&(l[n]=!1,r.push(n))}),c+=n.data.length,g+=r.length,m.call("progressChanged",this,c,g),r.length&&(s.push.apply(s,r),o.loadMultiple(r,e)),s.length||(a.forEach(function(e){var t,n,r,i,o,a,s,l=f.entity(e),c=h.entity(e);!function(e,t){if(e.version!==t.version)return!1;if("way"===e.type)for(var n=utilArrayUnion(e.nodes,t.nodes),r=0;r<n.length;r++){var i=f.hasEntity(n[r]),o=h.hasEntity(n[r]);if(i&&o&&i.version!==o.version)return!1}return!0}(l,c)&&(t=actionMergeRemoteChanges(e,f,h,_,p),d.replace(t),(n=t.conflicts()).length&&(r=actionMergeRemoteChanges(e,f,h,_).withOption("force_local"),i=actionMergeRemoteChanges(e,f,h,_).withOption("force_remote"),o=_t("save.conflict."+(c.visible?"keep_local":"restore")),a=_t("save.conflict."+(c.visible?"keep_remote":"delete")),y.push({id:e,name:utilDisplayName(s=l)||utilDisplayType(s.id)+" "+s.id,details:n,chosen:1,choices:[u(e,o,r),u(e,a,i)]})))}),b(i)))}function u(e,t,n){return{id:e,text:t,action:function(){d.replace(n)}}}function p(e){return'<a href="'+o.userURL(e)+'" target="_blank">'+e+"</a>"}})):b(i)}:b)(t)):e.authenticate(function(e){e||s.save(t,n,r)}))},s.cancelConflictResolution=function(){u.history().pop()},s.processResolvedConflicts=function(e){for(var t=u.history(),n=0;n<y.length;n++)if(1===y[n].chosen){var r=u.hasEntity(y[n].id);if(r&&"way"===r.type)for(var i=utilArrayUniq(r.nodes),o=0;o<i.length;o++)t.replace(actionRevert(i[o]));t.replace(actionRevert(y[n].id))}s.save(e,!0,!1)},s.reset=function(){},s}var isRetina=window.devicePixelRatio&&2<=window.devicePixelRatio;function localeDateString(e){if(!e)return null;var t=new Date(e);return isNaN(t.getTime())?null:t.toLocaleDateString(_mainLocalizer.localeCode(),{day:"numeric",month:"short",year:"numeric"})}function vintageRange(e){var t;return(e.start||e.end)&&(t=e.start||"?",e.start!==e.end&&(t+=" - "+(e.end||"?"))),t}function rendererBackgroundSource(t){var l=Object.assign({},t),n=[0,0],r=l.name,i=l.description,e=!!l.best,s=l.encrypted?utilAesDecrypt(l.template):l.template;return l.tileSize=t.tileSize||256,l.zoomExtent=t.zoomExtent||[0,22],l.overzoom=!1!==t.overzoom,l.offset=function(e){return arguments.length?(n=e,l):n},l.nudge=function(e,t){return n[0]+=e[0]/Math.pow(2,t),n[1]+=e[1]/Math.pow(2,t),l},l.name=function(){var e=l.id.replace(/\./g,"<TX_DOT>");return _t("imagery."+e+".name",{default:r})},l.description=function(){var e=l.id.replace(/\./g,"<TX_DOT>");return _t("imagery."+e+".description",{default:i})},l.best=function(){return e},l.area=function(){if(!t.polygon)return Number.MAX_VALUE;var e=d3_geoArea({type:"MultiPolygon",coordinates:[t.polygon]});return isNaN(e)?0:e},l.imageryUsed=function(){return name||l.id},l.template=function(e){return arguments.length?("custom"===l.id&&(s=e),l):s},l.url=function(i){var e,n,r,o,a,t=s;return""===t?t:(l.type||(/\{(proj|wkid|bbox)\}/.test(s)?(l.type="wms",l.projection="EPSG:3857"):/\{(x|y)\}/.test(s)?l.type="tms":/\{u\}/.test(s)&&(l.type="bing")),"wms"===l.type?(e=function(e,t,n){var r=Math.sinh||function(e){var t=Math.exp(e);return(t-1/t)/2},i=Math.pow(2,n),o=e/i*Math.PI*2-Math.PI,a=Math.atan(r(Math.PI*(1-2*t/i)));switch(l.projection){case"EPSG:4326":return{x:180*o/Math.PI,y:180*a/Math.PI};default:var s=mercatorRaw(o,a);return{x:20037508.34/Math.PI*s[0],y:20037508.34/Math.PI*s[1]}}},n=l.tileSize,r=l.projection,o=e(i[0],i[1],i[2]),a=e(i[0]+1,i[1]+1,i[2]),t=t.replace(/\{(\w+)\}/g,function(e,t){switch(t){case"width":case"height":return n;case"proj":return r;case"wkid":return r.replace(/^EPSG:/,"");case"bbox":return o.x+","+a.y+","+a.x+","+o.y;case"w":return o.x;case"s":return a.y;case"n":return a.x;case"e":return o.y;default:return e}})):"tms"===l.type?t=t.replace("{x}",i[0]).replace("{y}",i[1]).replace(/\{[t-]y\}/,Math.pow(2,i[2])-i[1]-1).replace(/\{z(oom)?\}/,i[2]).replace(/\{@2x\}|\{r\}/,isRetina?"@2x":""):"bing"===l.type&&(t=t.replace("{u}",function(){for(var e="",t=i[2];0<t;t--){var n=0,r=1<<t-1;0!=(i[0]&r)&&n++,0!=(i[1]&r)&&(n+=2),e+=n.toString()}return e})),t=t.replace(/\{switch:([^}]+)\}/,function(e,t){var n=t.split(",");return n[(i[0]+i[1])%n.length]}))},l.validZoom=function(e){return l.zoomExtent[0]<=e&&(l.overzoom||l.zoomExtent[1]>e)},l.isLocatorOverlay=function(){return"mapbox_locator_overlay"===l.id},l.isHidden=function(){return"DigitalGlobe-Premium-vintage"===l.id||"DigitalGlobe-Standard-vintage"===l.id},l.copyrightNotices=function(){},l.getMetadata=function(e,t,n){var r={start:localeDateString(l.startDate),end:localeDateString(l.endDate)};r.range=vintageRange(r),n(null,{vintage:r})},l}function rendererTileLayer(m){var r,y,v,_,b=utilPrefixCSSProperty("Transform"),w=utilTiler(),x=256,S={};function E(e){for(var t,n,r,i=-1;i>-e[2];i--){var o=(t=e,n=i,r=void 0,r=Math.pow(2,n),[Math.floor(t[0]*r),Math.floor(t[1]*r),t[2]+n]);if(!1!==S[_.url(o)])return o}}function C(e,t){for(var n=[],r={},i=0;i<e.length;i++)void 0===r[e[i][t]]&&(n.push(e[i]),r[e[i][t]]=!0);return n}function A(e){return e.push(_.url(e)),e}function t(e){var t;v=geoScaleToZoom(r.scale(),x),t=_?[_.offset()[0]*Math.pow(2,v),_.offset()[1]*Math.pow(2,v)]:[0,0];var n=[r.translate()[0]+t[0],r.translate()[1]+t[1]];w.scale(2*r.scale()*Math.PI).translate(n),y=[r.scale()*Math.PI-n[0],r.scale()*Math.PI-n[1]],function t(n){if(!_)return;var r=[];var e=m.getDebug("tile")&&!_.overlay;_.validZoom(v)&&(w.skipNullIsland(!!_.overlay),w().forEach(function(e){A(e),""!==e[3]&&"string"==typeof e[3]&&(r.push(e),!1===S[e[3]]&&E(e)&&r.push(A(E(e))))}),r=C(r,3).filter(function(e){return!1!==S[e[3]]}));function i(e){S[e[3]]=!0,select(this).on("error",null).on("load",null).classed("tile-loaded",!0),t(n)}function o(e){S[e[3]]=!1,select(this).on("error",null).on("load",null).remove(),t(n)}function a(e){var t,n,r=x*Math.pow(2,v-e[2]),i=(t=e,n=v,x*Math.pow(2,n-t[2])/x+.002);return"translate("+(e[0]*r-y[0])+"px,"+(e[1]*r-y[1])+"px) scale("+i+","+i+")"}function s(e){var t=x*Math.pow(2,v-e[2]);return[e[0]*t-y[0]+t/2,e[1]*t-y[1]+t/2]}function l(e){var t=s(e);return"translate("+t[0]+"px,"+t[1]+"px)"}var c=w.size();var u=[c[0]/2,c[1]/2];var p=Math.max(c[0],c[1]);var d;r.forEach(function(e){var t=s(e),n=geoVecLength(t,u);n<p&&(p=n,d=e)});var f=n.selectAll("img").data(r,function(e){return e[3]});f.exit().style(b,a).classed("tile-removing",!0).classed("tile-center",!1).each(function(){var e=select(this);window.setTimeout(function(){e.classed("tile-removing")&&e.remove()},300)});f.enter().append("img").attr("class","tile").attr("draggable","false").style("width",x+"px").style("height",x+"px").attr("src",function(e){return e[3]}).on("error",o).on("load",i).merge(f).style(b,a).classed("tile-debug",e).classed("tile-removing",!1).classed("tile-center",function(e){return e===d});var h=n.selectAll(".tile-label-debug").data(e?r:[],function(e){return e[3]});h.exit().remove();{var g;e&&((g=h.enter().append("div").attr("class","tile-label-debug")).append("div").attr("class","tile-label-debug-coord"),g.append("div").attr("class","tile-label-debug-vintage"),(h=h.merge(g)).style(b,l),h.selectAll(".tile-label-debug-coord").text(function(e){return e[2]+" / "+e[0]+" / "+e[1]}),h.selectAll(".tile-label-debug-vintage").each(function(e){var n=select(this),t=m.projection.invert(s(e));_.getMetadata(t,e,function(e,t){n.text(t&&t.vintage&&t.vintage.range||_t("info_panels.background.vintage")+": "+_t("info_panels.background.unknown"))})}))}}(e)}return t.projection=function(e){return arguments.length?(r=e,t):r},t.dimensions=function(e){return arguments.length?(w.size(e),t):w.size()},t.source=function(e){return arguments.length?(x=(_=e).tileSize,S={},w.tileSize(_.tileSize).zoomExtent(_.zoomExtent),t):_},t}window.matchMedia("\n        (-webkit-min-device-pixel-ratio: 2), /* Safari */\n        (min-resolution: 2dppx),             /* standard */\n        (min-resolution: 192dpi)             /* fallback */\n    ").addListener(function(){isRetina=window.devicePixelRatio&&2<=window.devicePixelRatio}),rendererBackgroundSource.Bing=function(e,t){e.template="https://ecn.t{switch:0,1,2,3}.tiles.virtualearth.net/tiles/a{u}.jpeg?g=587&mkt=en-gb&n=z";var n=rendererBackgroundSource(e),a="Ak5oTE46TUbjRp08OFVcGpkARErDobfpuyNKa-W2mQ8wbt1K1KL8p1bIRwWwcF-Q",s={},l={},r=[];return d3_json("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/Aerial?include=ImageryProviders&key=Ak5oTE46TUbjRp08OFVcGpkARErDobfpuyNKa-W2mQ8wbt1K1KL8p1bIRwWwcF-Q").then(function(e){r=e.resourceSets[0].resources[0].imageryProviders.map(function(e){return{attribution:e.attribution,areas:e.coverageAreas.map(function(e){return{zoom:[e.zoomMin,e.zoomMax],extent:geoExtent([e.bbox[1],e.bbox[0]],[e.bbox[3],e.bbox[2]])}})}}),t.call("change")}).catch(function(){}),n.copyrightNotices=function(t,n){return t=Math.min(t,21),r.filter(function(e){return e.areas.some(function(e){return n.intersects(e.extent)&&e.zoom[0]<=t&&e.zoom[1]>=t})}).map(function(e){return e.attribution}).join(", ")},n.getMetadata=function(e,t,r){var i=t.slice(0,3).join("/"),n=Math.min(t[2],21),o="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/Aerial/"+(e[1]+","+e[0])+"?zl="+n+"&key="+a;if(!l[i]){if(s[i]||(s[i]={}),s[i]&&s[i].metadata)return r(null,s[i].metadata);l[i]=!0,d3_json(o).then(function(e){if(delete l[i],!e)throw new Error("Unknown Error");var t={start:localeDateString(e.resourceSets[0].resources[0].vintageStart),end:localeDateString(e.resourceSets[0].resources[0].vintageEnd)};t.range=vintageRange(t);var n={vintage:t};s[i].metadata=n,r&&r(null,n)}).catch(function(e){delete l[i],r&&r(e.message)})}},n.terms_url="https://blog.openstreetmap.org/2010/11/30/microsoft-imagery-details",n},rendererBackgroundSource.Esri=function(e){null===e.template.match(/blankTile/)&&(e.template=e.template+"?blankTile=false");var i,p=rendererBackgroundSource(e),d={},f={};return p.fetchTilemap=function(e){var t,n,r;i&&geoSphericalDistance(e,i)<5e3||(i=e,t=p.url([1,2,3]),n=Math.floor((e[0]+180)/360*Math.pow(2,20)),r=Math.floor((1-Math.log(Math.tan(e[1]*Math.PI/180)+1/Math.cos(e[1]*Math.PI/180))/Math.PI)/2*Math.pow(2,20)),d3_json(t.replace(/tile\/[0-9]+\/[0-9]+\/[0-9]+\?blankTile=false/,"tilemap")+"/20/"+r+"/"+n+"/8/8").then(function(e){if(!e)throw new Error("Unknown Error");for(var t=!0,n=0;n<e.data.length;n++)if(!e.data[n]){t=!1;break}p.zoomExtent[1]=t?22:19}).catch(function(){}))},p.getMetadata=function(e,t,n){var r,i,o=t.slice(0,3).join("/"),a=Math.min(t[2],p.zoomExtent[1]),s=e[0]+","+e[1],l=_t("info_panels.background.unknown"),c={};if(!f[o]){switch(!0){case 20<=a&&"EsriWorldImageryClarity"===p.id:r=4;break;case 19<=a:r=3;break;case 17<=a:r=2;break;case 13<=a:r=0;break;default:r=99}if("EsriWorldImagery"===p.id?i="https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/":"EsriWorldImageryClarity"===p.id&&(i="https://serviceslab.arcgisonline.com/arcgis/rest/services/Clarity_World_Imagery/MapServer/"),i+=r+"/query?returnGeometry=false&geometry="+s+"&inSR=4326&geometryType=esriGeometryPoint&outFields=*&f=json",d[o]||(d[o]={}),d[o]&&d[o].metadata)return n(null,d[o].metadata);99===r?n(null,c={vintage:null,source:l,description:l,resolution:l,accuracy:l}):(f[o]=!0,d3_json(i).then(function(e){if(delete f[o],!e)throw new Error("Unknown Error");if(e.features&&e.features.length<1)throw new Error("No Results");if(e.error&&e.error.message)throw new Error(e.error.message);var t=localeDateString(e.features[0].attributes.SRC_DATE2);c={vintage:{start:t,end:t,range:t},source:u(e.features[0].attributes.NICE_NAME),description:u(e.features[0].attributes.NICE_DESC),resolution:u(+parseFloat(e.features[0].attributes.SRC_RES).toFixed(4)),accuracy:u(+parseFloat(e.features[0].attributes.SRC_ACC).toFixed(4))},isFinite(c.resolution)&&(c.resolution+=" m"),isFinite(c.accuracy)&&(c.accuracy+=" m"),d[o].metadata=c,n&&n(null,c)}).catch(function(e){delete f[o],n&&n(e.message)}))}function u(e){return String(e).trim()||l}},p},rendererBackgroundSource.None=function(){var e=rendererBackgroundSource({id:"none",template:""});return e.name=function(){return _t("background.none")},e.imageryUsed=function(){return null},e.area=function(){return-1},e},rendererBackgroundSource.Custom=function(e){var r=rendererBackgroundSource({id:"custom",template:e});return r.name=function(){return _t("background.custom")},r.imageryUsed=function(){var e,t,n=r.template();return-1!==n.indexOf("?")&&(e=n.split("?",2),t=utilStringQs(e[1]),["access_token","connectId","token"].forEach(function(e){t[e]&&(t[e]="{apikey}")}),n=e[0]+"?"+utilQsString(t,!0)),"Custom ("+(n=n.replace(/token\/(\w+)/,"token/{apikey}"))+" )"},r.area=function(){return-2},r};var _imageryIndex=null;function rendererBackground(h){var e,s=dispatch("change"),p=utilDetect(),g=rendererTileLayer(h).projection(h.projection),m=!0,y=[],d=1,f=1,v=1,_=1;function b(e){var t,n=g.source();18<h.map().zoom()&&n&&/^EsriWorldImagery/.test(n.id)&&(t=h.map().center(),n.fetchTilemap(t));var r=b.sources(h.map().extent());m!==(m=!!r.filter(function(e){return e===n}).length)&&b.updateImagery();var i="";p.cssfilters&&(1!==d&&(i+=" brightness("+d+")"),1!==f&&(i+=" contrast("+f+")"),1!==v&&(i+=" saturate("+v+")"),_<1&&(i+=" blur("+d3_interpolateNumber(.5,5)(1-_)+"px)"));var o=(o=e.selectAll(".layer-background").data([0])).enter().insert("div",".layer-data").attr("class","layer layer-background").merge(o);p.cssfilters?o.style("filter",i||null):o.style("opacity",d);var a=o.selectAll(".layer-imagery").data([0]);a.enter().append("div").attr("class","layer layer-imagery").merge(a).call(g);var s="",l="";p.cssfilters&&1<_&&(l="overlay",s="saturate(0) blur(3px) invert(1)",s+=" contrast("+(_-1)+")",s+=" brightness("+d3_interpolateNumber(1,.85)(_-1)+")");var c=o.selectAll(".layer-unsharp-mask").data(p.cssfilters&&1<_?[0]:[]);c.exit().remove(),c.enter().append("div").attr("class","layer layer-mask layer-unsharp-mask").merge(c).call(g).style("filter",s||null).style("mix-blend-mode",l||null);var u=e.selectAll(".layer-overlay").data(y,function(e){return e.source().name()});u.exit().remove(),u.enter().insert("div",".layer-data").attr("class","layer layer-overlay").merge(u).each(function(e,t,n){return select(n[t]).call(e)})}return b.updateImagery=function(){var e=g.source();if(!h.inIntro()&&e){var t=y.filter(function(e){return!e.source().isLocatorOverlay()&&!e.source().isHidden()}).map(function(e){return e.source().id}).join(","),n=geoOffsetToMeters(e.offset()),r=+n[0].toFixed(2),i=+n[1].toFixed(2),o=utilStringQs(window.location.hash),a=e.id;"custom"===a&&(a="custom:"+e.template()),a?o.background=a:delete o.background,t?o.overlays=t:delete o.overlays,.01<Math.abs(r)||.01<Math.abs(i)?o.offset=r+","+i:delete o.offset,window.mocha||window.location.replace("#"+utilQsString(o,!0));var s=[],l=[],c=e.imageryUsed();c&&m&&s.push(c),y.filter(function(e){return!e.source().isLocatorOverlay()&&!e.source().isHidden()}).forEach(function(e){return s.push(e.source().imageryUsed())});var u=h.layers().layer("data");u&&u.enabled()&&u.hasData()&&s.push(u.getSrc());var p={streetside:"Bing Streetside",mapillary:"Mapillary Images","mapillary-map-features":"Mapillary Map Features","mapillary-signs":"Mapillary Signs",openstreetcam:"OpenStreetCam Images"};for(var d in p){var f=h.layers().layer(d);f&&f.enabled()&&(l.push(d),s.push(p[d]))}h.history().imageryUsed(s),h.history().photoOverlaysUsed(l)}},b.sources=function(e,t,n){if(!_imageryIndex)return[];var r={};(_imageryIndex.query.bbox(e.rectangle(),!0)||[]).forEach(function(e){return r[e.id]=!0});var i=g.source();return _imageryIndex.backgrounds.filter(function(e){return!e.polygon||(!(!n||i!==e)||!(t&&t<6)&&r[e.id])})},b.dimensions=function(t){t&&(g.dimensions(t),y.forEach(function(e){return e.dimensions(t)}))},b.baseLayerSource=function(e){if(!arguments.length)return g.source();var t=h.connection();if(!t)return b;for(var n=t.imageryBlacklists(),r=e.template(),i=!1,o=0,a=0;a<n.length;a++)try{if(i=new RegExp(n[a]).test(r),o++,i)break}catch(e){}return o||(i=new RegExp(".*.google(apis)?..*/(vt|kh)[?/].*([xyz]=.*){3}.*").test(r)),g.source(i?b.findSource("none"):e),s.call("change"),b.updateImagery(),b},b.findSource=function(t){return t&&_imageryIndex?_imageryIndex.backgrounds.find(function(e){return e.id&&e.id===t}):null},b.bing=function(){b.baseLayerSource(b.findSource("Bing"))},b.showsLayer=function(t){var e=g.source();return!(!t||!e)&&(t.id===e.id||y.some(function(e){return t.id===e.source().id}))},b.overlayLayerSources=function(){return y.map(function(e){return e.source()})},b.toggleOverlayLayer=function(e){for(var t,n=0;n<y.length;n++)if((t=y[n]).source()===e)return y.splice(n,1),s.call("change"),void b.updateImagery();t=rendererTileLayer(h).source(e).projection(h.projection).dimensions(g.dimensions()),y.push(t),s.call("change"),b.updateImagery()},b.nudge=function(e,t){var n=g.source();return n&&(n.nudge(e,t),s.call("change"),b.updateImagery()),b},b.offset=function(e){var t=g.source();return arguments.length?(t&&(t.offset(e),s.call("change"),b.updateImagery()),b):t&&t.offset()||[0,0]},b.brightness=function(e){return arguments.length?(d=e,h.mode()&&s.call("change"),b):d},b.contrast=function(e){return arguments.length?(f=e,h.mode()&&s.call("change"),b):f},b.saturation=function(e){return arguments.length?(v=e,h.mode()&&s.call("change"),b):v},b.sharpness=function(e){return arguments.length?(_=e,h.mode()&&s.call("change"),b):_},b.ensureLoaded=function(){if(e)return e;var l=utilStringQs(window.location.hash),c=l.background||l.layer,u=function(e){if(!e)return!1;var t=e.split("/").map(Number);return!(t.length<3||t.some(isNaN))&&geoExtent([t[2],t[1]])}(l.map);return e=_mainFileFetcher.get("imagery").then(function(e){if(_imageryIndex)return _imageryIndex;_imageryIndex={imagery:e,features:{}};var t=e.map(function(e){if(!e.polygon)return null;var t=e.polygon.map(function(e){return[e]}),n={type:"Feature",properties:{id:e.id},geometry:{type:"MultiPolygon",coordinates:t}};return _imageryIndex.features[e.id]=n}).filter(Boolean);_imageryIndex.query=whichPolygon_1({type:"FeatureCollection",features:t}),_imageryIndex.backgrounds=e.map(function(e){return"bing"===e.type?rendererBackgroundSource.Bing(e,s):/^EsriWorldImagery/.test(e.id)?rendererBackgroundSource.Esri(e):rendererBackgroundSource(e)}),_imageryIndex.backgrounds.unshift(rendererBackgroundSource.None());var n=corePreferences("background-custom-template")||"",r=rendererBackgroundSource.Custom(n);return _imageryIndex.backgrounds.unshift(r),_imageryIndex}).then(function(e){var t,n,r,i=e.backgrounds.length&&e.backgrounds[0];!c&&u&&(t=b.sources(u).find(function(e){return e.best()})),c&&0===c.indexOf("custom:")?(n=c.replace(/^custom:/,""),r=b.findSource("custom"),b.baseLayerSource(r.template(n)),corePreferences("background-custom-template",n)):b.baseLayerSource(b.findSource(c)||t||b.findSource(corePreferences("background-last-used"))||b.findSource("Bing")||i||b.findSource("none"));var o,a,s=e.backgrounds.find(function(e){return e.overlay&&e.default});s&&b.toggleOverlayLayer(s),(l.overlays||"").split(",").forEach(function(e){(e=b.findSource(e))&&b.toggleOverlayLayer(e)}),!l.gpx||(o=h.layers().layer("data"))&&o.url(l.gpx,".gpx"),!l.offset||2===(a=l.offset.replace(/;/g,",").split(",").map(function(e){return!isNaN(e)&&e})).length&&b.offset(geoMetersToOffset(a))}).catch(function(){})},utilRebind(b,s,"on")}function rendererFeatures(a){var p=dispatch("change","redraw"),d=utilRebind({},p,"on"),t=new Set,i={motorway:!0,motorway_link:!0,trunk:!0,trunk_link:!0,primary:!0,primary_link:!0,secondary:!0,secondary_link:!0,tertiary:!0,tertiary_link:!0,residential:!0,unclassified:!0,living_street:!0},o={service:!0,road:!0,track:!0},s={path:!0,footway:!0,cycleway:!0,bridleway:!0,steps:!0,pedestrian:!0},l={proposed:!0,construction:!0,abandoned:!0,dismantled:!0,disused:!0,razed:!0,demolished:!0,obliterated:!0},f=1,c={},h={},n={},g=[],m=[],u={};function r(){var e,t;window.mocha||(e=utilStringQs(window.location.hash),(t=d.disabled()).length?e.disable_features=t.join(","):delete e.disable_features,window.location.replace("#"+utilQsString(e,!0)),corePreferences("disabled-features",t.join(","))),m=d.hidden(),p.call("change"),p.call("redraw")}function e(e,t,n){g.push(e),h[e]={filter:t,enabled:!0,count:0,currentMax:n||1/0,defaultMax:n||1/0,enable:function(){this.enabled=!0,this.currentMax=this.defaultMax},disable:function(){this.enabled=!1,this.currentMax=0},hidden:function(){return 0===this.count&&!this.enabled||this.count>this.currentMax*f},autoHidden:function(){return this.hidden()&&0<this.currentMax}}}return e("points",function(e,t){return"point"===t},200),e("traffic_roads",function(e){return i[e.highway]}),e("service_roads",function(e){return o[e.highway]}),e("paths",function(e){return s[e.highway]}),e("buildings",function(e){return!!e.building&&"no"!==e.building||"multi-storey"===e.parking||"sheds"===e.parking||"carports"===e.parking||"garage_boxes"===e.parking},250),e("building_parts",function(e){return e["building:part"]}),e("indoor",function(e){return e.indoor}),e("landuse",function(e,t){return!("area"!==t||h.buildings.filter(e)||h.building_parts.filter(e)||h.indoor.filter(e)||h.water.filter(e)||h.pistes.filter(e))}),e("boundaries",function(e){return!!e.boundary&&!(i[e.highway]||o[e.highway]||s[e.highway]||e.waterway||e.railway||e.landuse||e.natural||e.building||e.power)}),e("water",function(e){return!!e.waterway||"water"===e.natural||"coastline"===e.natural||"bay"===e.natural||"pond"===e.landuse||"basin"===e.landuse||"reservoir"===e.landuse||"salt_pond"===e.landuse}),e("rail",function(e){return!(!e.railway&&"railway"!==e.landuse||i[e.highway]||o[e.highway]||s[e.highway])}),e("pistes",function(e){return e["piste:type"]}),e("aerialways",function(e){return e.aerialway&&"yes"!==e.aerialway&&"station"!==e.aerialway}),e("power",function(e){return!!e.power}),e("past_future",function(e){if(i[e.highway]||o[e.highway]||s[e.highway])return!1;for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n];if(l[r]||l[e[r]])return!0}return!1}),e("others",function(e,t){return"line"===t||"area"===t}),d.features=function(){return h},d.keys=function(){return g},d.enabled=function(e){return arguments.length?h[e]&&h[e].enabled:g.filter(function(e){return h[e].enabled})},d.disabled=function(e){return arguments.length?h[e]&&!h[e].enabled:g.filter(function(e){return!h[e].enabled})},d.hidden=function(e){return arguments.length?h[e]&&h[e].hidden():g.filter(function(e){return h[e].hidden()})},d.autoHidden=function(e){return arguments.length?h[e]&&h[e].autoHidden():g.filter(function(e){return h[e].autoHidden()})},d.enable=function(e){h[e]&&!h[e].enabled&&(h[e].enable(),r())},d.enableAll=function(){var e=!1;for(var t in h)h[t].enabled||(e=!0,h[t].enable());e&&r()},d.disable=function(e){h[e]&&h[e].enabled&&(h[e].disable(),r())},d.disableAll=function(){var e=!1;for(var t in h)h[t].enabled&&(e=!0,h[t].disable());e&&r()},d.toggle=function(e){var t;h[e]&&((t=h[e]).enabled?t.disable():t.enable(),r())},d.resetStats=function(){for(var e=0;e<g.length;e++)h[g[e]].count=0;p.call("change")},d.gatherStats=function(e,t,n){for(var r,i,o,a,s=!1,l=utilArrayGroupBy(e,"type"),c=[].concat(l.relation||[],l.way||[],l.node||[]),u=0;u<g.length;u++)h[g[u]].count=0;for(f=n[0]*n[1]/1e6,u=0;u<c.length;u++)for(i=c[u].geometry(t),o=Object.keys(d.getMatches(c[u],t,i)),a=0;a<o.length;a++)h[o[a]].count++;return(r=d.hidden())!==m&&(m=r,s=!0,p.call("change")),s},d.stats=function(){for(var e=0;e<g.length;e++)n[g[e]]=h[g[e]].count;return n},d.clear=function(e){for(var t=0;t<e.length;t++)d.clearEntity(e[t])},d.clearEntity=function(e){delete c[osmEntity.key(e)]},d.reset=function(){Array.from(t).forEach(function(e){window.cancelIdleCallback(e),t.delete(e)}),c={}},d.getMatches=function(e,t,n){if("vertex"===n||"relation"===n&&"boundary"!==e.tags.type)return{};var r=osmEntity.key(e);if(c[r]||(c[r]={}),!c[r].matches){for(var i={},o=!1,a=0;a<g.length;a++){if("others"===g[a]){if(o)continue;if("way"===e.type){var s=d.getParents(e,t,n);if(1===s.length&&s[0].isMultipolygon()||0<s.length&&s.every(function(e){return"boundary"===e.tags.type})){var l=osmEntity.key(s[0]);if(c[l]&&c[l].matches){i=Object.assign({},c[l].matches);continue}}}}h[g[a]].filter(e.tags,n)&&(i[g[a]]=o=!0)}c[r].matches=i}return c[r].matches},d.getParents=function(e,t,n){if("point"===n)return[];var r,i=osmEntity.key(e);return c[i]||(c[i]={}),c[i].parents||(r=[],r="vertex"===n?t.parentWays(e):t.parentRelations(e),c[i].parents=r),c[i].parents},d.isHiddenPreset=function(e,t){if(!m.length)return!1;if(!e.tags)return!1;var n=e.setTags({},t);for(var r in h)if(h[r].filter(n,t))return-1!==m.indexOf(r)&&r;return!1},d.isHiddenFeature=function(e,t,n){if(!m.length)return!1;if(!e.version)return!1;if(u[e.id])return!1;var r=Object.keys(d.getMatches(e,t,n));return r.length&&r.every(function(e){return d.hidden(e)})},d.isHiddenChild=function(e,t,n){if(!m.length)return!1;if(!e.version||"point"===n)return!1;if(u[e.id])return!1;var r=d.getParents(e,t,n);if(!r.length)return!1;for(var i=0;i<r.length;i++)if(!d.isHidden(r[i],t,r[i].geometry(t)))return!1;return!0},d.hasHiddenConnections=function(e,n){if(!m.length)return!1;var t,r="midpoint"===e.type?(t=[n.entity(e.edge[0]),n.entity(e.edge[1])],[]):(t=e.nodes?n.childNodes(e):[],d.getParents(e,n,e.geometry(n)));return(r=t.reduce(function(e,t){return n.isShared(t)?utilArrayUnion(e,n.parentWays(t)):e},r)).some(function(e){return d.isHidden(e,n,e.geometry(n))})},d.isHidden=function(e,t,n){return!!m.length&&(!!e.version&&("vertex"===n?d.isHiddenChild:d.isHiddenFeature)(e,t,n))},d.filter=function(e,t){if(!m.length)return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];d.isHidden(i,t,i.geometry(t))||n.push(i)}return n},d.forceVisible=function(e){if(!arguments.length)return Object.keys(u);u={};for(var t=0;t<e.length;t++){u[e[t]]=!0;var n=a.hasEntity(e[t]);if(n&&"relation"===n.type)for(var r in n.members)u[n.members[r].id]=!0}return d},d.init=function(){var e=corePreferences("disabled-features");e&&e.replace(/;/g,",").split(",").forEach(d.disable);var t=utilStringQs(window.location.hash);t.disable_features&&t.disable_features.replace(/;/g,",").split(",").forEach(d.disable)},a.history().on("merge.features",function(o){var e;o&&(e=window.requestIdleCallback(function(){for(var e=a.graph(),t=utilArrayGroupBy(o,"type"),n=[].concat(t.relation||[],t.way||[],t.node||[]),r=0;r<n.length;r++){var i=n[r].geometry(e);d.getMatches(n[r],e,i)}}),t.add(e))}),d}function svgPassiveVertex(e,t,n){if(!n)return 1;if(n===e.id)return 0;for(var r,i,o,a,s,l,c,u,p=t.parentWays(e),d=0;d<p.length;d++)for(i=p[d].nodes,o=p[d].isClosed(),r=0;r<i.length;r++)if(i[r]===e.id){if(a=r-2,s=r-1,l=r+1,c=r+2,o&&(u=i.length-1,a<0&&(a=u+a),s<0&&(s=u+s),u<l&&(l-=u),u<c&&(c-=u)),i[a]===n)return 0;if(i[s]===n)return 2;if(i[l]===n)return 2;if(i[c]===n)return 0;if(o&&-1!==i.indexOf(n))return 0}return 1}function svgMarkerSegments(n,r,m,i,y){return function(u){var p,d,f=0,h=m,g=[],e=d3_geoIdentity().clipExtent(n.clipExtent()).stream,t=r.childNodes(u).map(function(e){return e.loc});return i(u)&&t.reverse(),d3_geoStream({type:"LineString",coordinates:t},n.stream(e({lineStart:function(){},lineEnd:function(){p=null},point:function(e,t){if(d=[e,t],p){var n=geoVecLength(p,d)-h;if(0<=n){var r=geoVecAngle(p,d),i=m*Math.cos(r),o=m*Math.sin(r),a=[p[0]+h*Math.cos(r),p[1]+h*Math.sin(r)],s=[p,a];for(n-=m;0<=n;n-=m)a=geoVecAdd(a,[i,o]),s.push(a);s.push(d);for(var l="",c=0;c<s.length;c++)l+=(0===c?"M":"L")+s[c][0]+","+s[c][1];if(g.push({id:u.id,index:f++,d:l}),y(u)){for(l="",c=s.length-1;0<=c;c--)l+=(c===s.length-1?"M":"L")+s[c][0]+","+s[c][1];g.push({id:u.id,index:f++,d:l})}}h=-n}p=d}}))),g}}function svgPath(e,t,n){function r(e){return e.id in i?i[e.id]:i[e.id]=u(e.asGeoJSON(t))}var i={},o=n?65:5,a=e.clipExtent(),s=[[a[0][0]-o,a[0][1]-o],[a[1][0]+o,a[1][1]+o]],l=d3_geoIdentity().clipExtent(s).stream,c=e.stream,u=d3_geoPath().projection({stream:function(e){return c(l(e))}});return r.geojson=function(e){return void 0!==e.__featurehash__?e.__featurehash__ in i?i[e.__featurehash__]:i[e.__featurehash__]=u(e):u(e)},r}function svgPointTransform(n){function t(e){var t=n(e.loc);return"translate("+t[0]+","+t[1]+")"}return t.geojson=function(e){return t(e.properties.entity)},t}function svgRelationMemberTags(t){return function(e){var n=e.tags,r=!e.hasInterestingTags();return t.parentRelations(e).forEach(function(e){var t=e.tags.type;("multipolygon"===t&&r||"boundary"===t)&&(n=Object.assign({},e.tags,n))}),n}}function svgSegmentWay(u,p,d){return void 0===d?p.transient(u,"waySegments",e):e();function e(){for(var e,t,n,r,i,o=-1!==u.nodes.indexOf(d),a={passive:[],active:[]},s={},l=0;l<u.nodes.length;l++)e={node:t=p.entity(u.nodes[l]),type:svgPassiveVertex(t,p,d)},void 0!==s.type&&(s.node.id===d||e.node.id===d||(o&&(2===s.type||2===e.type)||0===s.type&&0===e.type?c(s,e,l):(n=s,r=e,i=l,a.passive.push({type:"Feature",id:u.id+"-"+i,properties:{target:!0,entity:u,nodes:[n.node,r.node],index:i},geometry:{type:"LineString",coordinates:[n.node.loc,r.node.loc]}})))),s=e;return a;function c(e,t,n){a.active.push({type:"Feature",id:u.id+"-"+n+"-nope",properties:{nope:!0,target:!0,entity:u,nodes:[e.node,t.node],index:n},geometry:{type:"LineString",coordinates:[e.node.loc,t.node.loc]}})}}}function svgTagClasses(){var p=["building","highway","railway","waterway","aeroway","aerialway","piste:type","boundary","power","amenity","natural","landuse","leisure","military","place","man_made","route","attraction","building:part","indoor"],d=["proposed","planned","construction","disused","abandoned","dismantled","razed","demolished","obliterated","intermittent"],f=["oneway","bridge","tunnel","embankment","cutting","barrier","surface","tracktype","footway","crossing","service","sport","public_transport","location","parking","golf","type","leisure","man_made","indoor"],i=function(e){return e.tags},o=function(e){e.each(function(e){var t=this.className;void 0!==t.baseVal&&(t=t.baseVal);var n=i(e),r=o.getClassesString(n,t);r!==t&&select(this).attr("class",r)})};return o.getClassesString=function(e,t){var n,r,i,o,a,s;/\bstroke\b/.test(t)&&e.barrier&&"no"!==e.barrier&&(s="line");for(var l=t.trim().split(/\s+/).filter(function(e){return e.length&&!/^tag-/.test(e)}).map(function(e){return("line"===e||"area"===e)&&s||e}),c=0;c<p.length;c++)if((a=e[o=p[c]])&&"no"!==a){"piste:type"===o?o="piste":"building:part"===o&&(o="building_part"),n=o,-1!==d.indexOf(a)?(r=a,l.push("tag-"+o)):(l.push("tag-"+o),l.push("tag-"+o+"-"+a));break}if(!n)for(c=0;c<d.length;c++)for(i=0;i<p.length;i++)if((a=e[o=d[c]+":"+p[i]])&&"no"!==a){r=d[c];break}if(!r)for(c=0;c<d.length&&(!(a=e[o=d[c]])||"no"===a||("yes"===a||n&&n===a?r=o:n||-1===p.indexOf(a)||(r=o,n=a,l.push("tag-"+a)),!r));c++);for(r&&(l.push("tag-status"),l.push("tag-status-"+r)),c=0;c<f.length;c++)(a=e[o=f[c]])&&"no"!==a&&o!==n&&(l.push("tag-"+o),l.push("tag-"+o+"-"+a));if("highway"===n&&!osmPathHighwayTagValues[e.highway]||"aeroway"===n){var u="track"===e.highway?"unpaved":"paved";for(o in e)a=e[o],o in osmPavedTags&&(u=osmPavedTags[o][a]?"paved":"unpaved"),o in osmSemipavedTags&&osmSemipavedTags[o][a]&&(u="semipaved");l.push("tag-"+u)}return(e.wikidata||e["brand:wikidata"])&&l.push("tag-wikidata"),l.join(" ").trim()},o.tags=function(e){return arguments.length?(i=e,o):i},o}var patterns={amenity:{grave_yard:"cemetery",fountain:"water_standing"},landuse:{cemetery:[{religion:"christian",pattern:"cemetery_christian"},{religion:"buddhist",pattern:"cemetery_buddhist"},{religion:"muslim",pattern:"cemetery_muslim"},{religion:"jewish",pattern:"cemetery_jewish"},{pattern:"cemetery"}],construction:"construction",farmland:"farmland",farmyard:"farmyard",forest:[{leaf_type:"broadleaved",pattern:"forest_broadleaved"},{leaf_type:"needleleaved",pattern:"forest_needleleaved"},{leaf_type:"leafless",pattern:"forest_leafless"},{pattern:"forest"}],grave_yard:"cemetery",grass:[{golf:"green",pattern:"golf_green"},{pattern:"grass"}],landfill:"landfill",meadow:"meadow",military:"construction",orchard:"orchard",quarry:"quarry",vineyard:"vineyard"},natural:{beach:"beach",grassland:"grass",sand:"beach",scrub:"scrub",water:[{water:"pond",pattern:"pond"},{water:"reservoir",pattern:"water_standing"},{pattern:"waves"}],wetland:[{wetland:"marsh",pattern:"wetland_marsh"},{wetland:"swamp",pattern:"wetland_swamp"},{wetland:"bog",pattern:"wetland_bog"},{wetland:"reedbed",pattern:"wetland_reedbed"},{pattern:"wetland"}],wood:[{leaf_type:"broadleaved",pattern:"forest_broadleaved"},{leaf_type:"needleleaved",pattern:"forest_needleleaved"},{leaf_type:"leafless",pattern:"forest_leafless"},{pattern:"forest"}]},traffic_calming:{island:[{surface:"grass",pattern:"grass"}],chicane:[{surface:"grass",pattern:"grass"}],choker:[{surface:"grass",pattern:"grass"}]}};function svgTagPattern(e){if(e.building&&"no"!==e.building)return null;for(var t in patterns){var n=e[t];if(n){if("string"==typeof patterns[t])return"pattern-"+patterns[t];var r=patterns[t];for(var i in r)if(n===i){var o=r[i];if("string"==typeof o)return"pattern-"+o;for(var a in o){var s=o[a],l=!0;for(var c in s)if("pattern"!==c){var u=e[c];if(!u||u!==s[c]){l=!1;break}}if(l)return"pattern-"+s.pattern}}}}return null}function svgAreas(w,x){function S(e,n,t,r){var i=x.getDebug("target")?"pink ":"nocolor ",o=x.getDebug("target")?"red ":"nocolor ",a=svgPath(w).geojson,s=x.activeID(),l=x.history().base(),c={targets:[],nopes:[]};t.forEach(function(e){var t=svgSegmentWay(e,n,s);c.targets.push.apply(c.targets,t.passive),c.nopes.push.apply(c.nopes,t.active)});var u=c.targets.filter(a),p=e.selectAll(".area.target-allowed").filter(function(e){return r(e.properties.entity)}).data(u,function(e){return e.id});p.exit().remove();function d(e){var t=e.properties.entity.id;return!(!l.entities[t]||!fastDeepEqual(n.entities[t].nodes,l.entities[t].nodes))&&e.properties.nodes.some(function(e){return!l.entities[e.id]||!fastDeepEqual(n.entities[e.id].loc,l.entities[e.id].loc)})}p.enter().append("path").merge(p).attr("d",a).attr("class",function(e){return"way area target target-allowed "+i+e.id}).classed("segment-edited",d);var f=c.nopes.filter(a),h=e.selectAll(".area.target-nope").filter(function(e){return r(e.properties.entity)}).data(f,function(e){return e.id});h.exit().remove(),h.enter().append("path").merge(h).attr("d",a).attr("class",function(e){return"way area target target-nope "+o+e.id}).classed("segment-edited",d)}return function(e,t,n,r){for(var i,o=svgPath(w,t,!0),a={},s=x.history().base(),l=0;l<n.length;l++){var c=n[l];"area"===c.geometry(t)&&((i=osmIsOldMultipolygonOuterMember(c,t))?a[i.id]={entity:i.mergeTags(c.tags),area:Math.abs(c.area(t))}:a[c.id]||(a[c.id]={entity:c,area:Math.abs(c.area(t))}))}var u=Object.values(a).filter(function(e){return o(e.entity)});u.sort(function(e,t){return t.area-e.area});var p=(u=u.map(function(e){return e.entity})).filter(function(e){return"way"===e.type}),d={clip:u,shadow:p,stroke:p,fill:u},f=x.surface().selectAll("defs").selectAll(".clipPath-osm").filter(r).data(d.clip,osmEntity.key);f.exit().remove();var h=f.enter().append("clipPath").attr("class","clipPath-osm").attr("id",function(e){return"ideditor-"+e.id+"-clippath"});h.append("path"),f.merge(h).selectAll("path").attr("d",o);var g=e.selectAll(".layer-osm.areas"),m=e.selectAll(".layer-touch.areas"),y=g.selectAll("g.areagroup").data(["fill","shadow","stroke"]),v=(y=y.enter().append("g").attr("class",function(e){return"areagroup area-"+e}).merge(y)).selectAll("path").filter(r).data(function(e){return d[e]},osmEntity.key);v.exit().remove();var _=e.selectAll(".area-fill path.area").nodes(),b=d3_bisector(function(e){return-e.__data__.area(t)}).left;v=v.enter().insert("path",function(e){if("fill"===this._parent.__data__)return _[b(_,-e.area(t))]}).merge(v).each(function(e){var t,n,r=this.parentNode.__data__;this.setAttribute("class",e.type+" area "+r+" "+e.id),"fill"===r&&(this.setAttribute("clip-path","url(#ideditor-"+e.id+"-clippath)"),this.style.fill=this.style.stroke=(t=e.tags,(n=svgTagPattern(t))?'url("#ideditor-'+n+'")':""))}).classed("added",function(e){return!s.entities[e.id]}).classed("geometry-edited",function(e){return t.entities[e.id]&&s.entities[e.id]&&!fastDeepEqual(t.entities[e.id].nodes,s.entities[e.id].nodes)}).classed("retagged",function(e){return t.entities[e.id]&&s.entities[e.id]&&!fastDeepEqual(t.entities[e.id].tags,s.entities[e.id].tags)}).call(svgTagClasses()).attr("d",o),m.call(S,t,d.stroke,r)}}var nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$"),S_TAG=0,S_ATTR=1,S_ATTR_SPACE=2,S_EQ=3,S_ATTR_NOQUOT_VALUE=4,S_ATTR_END=5,S_TAG_SPACE=6,S_TAG_CLOSE=7;function XMLReader(){}function parse(n,e,r,i,o){function a(e){var t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?function(e){if(65535<e){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(o.error("entity not found:"+e),e)}function t(e){var t;h<e&&(t=n.substring(h,e).replace(/&#?\w+;/g,a),p&&s(h),i.characters(t,0,e-h),h=e)}function s(e,t){for(;c<=e&&(t=u.exec(n));)l=t.index,c=l+t[0].length,p.lineNumber++;p.columnNumber=e-l+1}for(var l=0,c=0,u=/.*(?:\r\n?|\n)|.*$/g,p=i.locator,d=[{currentNSMap:e}],f={},h=0;;){try{var g,m,y=n.indexOf("<",h);if(y<0)return void(n.substr(h).match(/^\s*$/)||(m=(g=i.doc).createTextNode(n.substr(h)),g.appendChild(m),i.currentElement=m));switch(h<y&&t(y),n.charAt(y+1)){case"/":var v=n.indexOf(">",y+3),_=n.substring(y+2,v),b=d.pop();v<0?(_=n.substring(y+2).replace(/[\s<].*/,""),o.error("end tag name: "+_+" is not complete:"+b.tagName),v=y+1+_.length):_.match(/\s</)&&(_=_.replace(/[\s<].*/,""),o.error("end tag name: "+_+" maybe not complete"),v=y+1+_.length);var w=b.localNSMap,x=b.tagName==_;if(x||b.tagName&&b.tagName.toLowerCase()==_.toLowerCase()){if(i.endElement(b.uri,b.localName,_),w)for(var S in w)i.endPrefixMapping(S);x||o.fatalError("end tag name: "+_+" is not match the current start tagName:"+b.tagName)}else d.push(b);v++;break;case"?":p&&s(y),v=parseInstruction(n,y,i);break;case"!":p&&s(y),v=parseDCC(n,y,i,o);break;default:p&&s(y);var E=new ElementAttributes,C=d[d.length-1].currentNSMap,v=parseElementStartPart(n,y,E,C,a,o),A=E.length;if(!E.closed&&fixSelfClosed(n,v,E.tagName,f)&&(E.closed=!0,r.nbsp||o.warning("unclosed xml attribute")),p&&A){for(var I=copyLocator(p,{}),k=0;k<A;k++){var N=E[k];s(N.offset),N.locator=copyLocator(p,{})}i.locator=I,appendElement(E,i,C)&&d.push(E),i.locator=p}else appendElement(E,i,C)&&d.push(E);"http://www.w3.org/1999/xhtml"!==E.uri||E.closed?v++:v=parseHtmlSpecialContent(n,v,E.tagName,a,i)}}catch(e){o.error("element parse error: "+e),v=-1}h<v?h=v:t(Math.max(y,h)+1)}}function copyLocator(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function parseElementStartPart(e,t,n,r,i,o){for(var a,s=++t,l=S_TAG;;){var c=e.charAt(s);switch(c){case"=":if(l===S_ATTR)a=e.slice(t,s),l=S_EQ;else{if(l!==S_ATTR_SPACE)throw new Error("attribute equal must after attrName");l=S_EQ}break;case"'":case'"':if(l===S_EQ||l===S_ATTR){if(l===S_ATTR&&(o.warning('attribute value must after "="'),a=e.slice(t,s)),t=s+1,!(0<(s=e.indexOf(c,t))))throw new Error("attribute value no end '"+c+"' match");u=e.slice(t,s).replace(/&#?\w+;/g,i),n.add(a,u,t-1),l=S_ATTR_END}else{if(l!=S_ATTR_NOQUOT_VALUE)throw new Error('attribute value must after "="');u=e.slice(t,s).replace(/&#?\w+;/g,i),n.add(a,u,t),o.warning('attribute "'+a+'" missed start quot('+c+")!!"),t=s+1,l=S_ATTR_END}break;case"/":switch(l){case S_TAG:n.setTagName(e.slice(t,s));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:l=S_TAG_CLOSE,n.closed=!0;case S_ATTR_NOQUOT_VALUE:case S_ATTR:case S_ATTR_SPACE:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),l==S_TAG&&n.setTagName(e.slice(t,s)),s;case">":switch(l){case S_TAG:n.setTagName(e.slice(t,s));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:"/"===(u=e.slice(t,s)).slice(-1)&&(n.closed=!0,u=u.slice(0,-1));case S_ATTR_SPACE:l===S_ATTR_SPACE&&(u=a),l==S_ATTR_NOQUOT_VALUE?(o.warning('attribute "'+u+'" missed quot(")!!'),n.add(a,u.replace(/&#?\w+;/g,i),t)):("http://www.w3.org/1999/xhtml"===r[""]&&u.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),n.add(u,u,t));break;case S_EQ:throw new Error("attribute value missed!!")}return s;case"":c=" ";default:if(c<=" ")switch(l){case S_TAG:n.setTagName(e.slice(t,s)),l=S_TAG_SPACE;break;case S_ATTR:a=e.slice(t,s),l=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var u=e.slice(t,s).replace(/&#?\w+;/g,i);o.warning('attribute "'+u+'" missed quot(")!!'),n.add(a,u,t);case S_ATTR_END:l=S_TAG_SPACE}else switch(l){case S_ATTR_SPACE:n.tagName;"http://www.w3.org/1999/xhtml"===r[""]&&a.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),n.add(a,a,t),t=s,l=S_ATTR;break;case S_ATTR_END:o.warning('attribute space is required"'+a+'"!!');case S_TAG_SPACE:l=S_ATTR,t=s;break;case S_EQ:l=S_ATTR_NOQUOT_VALUE,t=s;break;case S_TAG_CLOSE:throw new Error("elements closed character '/' and '>' must be connected to")}}s++}}function appendElement(e,t,n){for(var r=e.tagName,i=null,o=e.length;o--;){var a=e[o],s=a.qName,l=a.value,c=0<(p=s.indexOf(":"))?(u=a.prefix=s.slice(0,p),d=s.slice(p+1),"xmlns"===u&&d):(u=null,"xmlns"===(d=s)&&"");a.localName=d,!1!==c&&(null==i&&(i={},_copy(n,n={})),n[c]=i[c]=l,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(c,l))}for(var u,o=e.length;o--;){(u=(a=e[o]).prefix)&&("xml"===u&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(a.uri=n[u||""]))}var p,d=0<(p=r.indexOf(":"))?(u=e.prefix=r.slice(0,p),e.localName=r.slice(p+1)):(u=null,e.localName=r),f=e.uri=n[u||""];if(t.startElement(f,d,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=i,1;if(t.endElement(f,d,r),i)for(u in i)t.endPrefixMapping(u)}function parseHtmlSpecialContent(e,t,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var o=e.indexOf("</"+n+">",t),a=e.substring(t+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)||(a=a.replace(/&#?\w+;/g,r)),i.characters(a,0,a.length),o}return t+1}function fixSelfClosed(e,t,n,r){var i=r[n];return null==i&&((i=e.lastIndexOf("</"+n+">"))<t&&(i=e.lastIndexOf("</"+n)),r[n]=i),i<t}function _copy(e,t){for(var n in e)t[n]=e[n]}function parseDCC(e,t,n,r){switch(e.charAt(t+2)){case"-":return"-"!==e.charAt(t+3)?-1:t<(i=e.indexOf("--\x3e",t+4))?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1);default:if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var o=split(e,t),a=o.length;if(1<a&&/!doctype/i.test(o[0][0])){var s=o[1][0],l=3<a&&/^public$/i.test(o[2][0])&&o[3][0],c=4<a&&o[4][0],u=o[a-1];return n.startDTD(s,l&&l.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),u.index+u[0].length}}return-1}function parseInstruction(e,t,n){var r=e.indexOf("?>",t);if(r){var i=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){i[0].length;return n.processingInstruction(i[1],i[2]),r+2}return-1}return-1}function ElementAttributes(e){}function _set_proto_(e,t){return e.__proto__=t,e}function split(e,t){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);n=i.exec(e);)if(r.push(n),n[1])return r}XMLReader.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),_copy(t,t={}),parse(e,t,n,r,this.errorHandler),r.endDocument()}},ElementAttributes.prototype={setTagName:function(e){if(!tagNamePattern.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!tagNamePattern.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},_set_proto_({},_set_proto_.prototype)instanceof _set_proto_||(_set_proto_=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n});var XMLReader_1=XMLReader,sax={XMLReader:XMLReader_1};function copy$2(e,t){for(var n in e)t[n]=e[n]}function _extends(e,t){var n,r=e.prototype;function i(){}Object.create&&(n=Object.create(t.prototype),r.__proto__=n),r instanceof t||(i.prototype=t.prototype,copy$2(r,i=new i),e.prototype=r=i),r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}var htmlns="http://www.w3.org/1999/xhtml",NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={},INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1),DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2),HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3),WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4),INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5),NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6),NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7),NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8),NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9),INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10),INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11),SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12),INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13),NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14),INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);function DOMException$2(e,t){var n;return t instanceof Error?n=t:(n=this,Error.call(this,ExceptionMessage[e]),this.message=ExceptionMessage[e],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException$2)),n.code=e,t&&(this.message=this.message+": "+t),n}function NodeList(){}function LiveNodeList(e,t){this._node=e,this._refresh=t,_updateLiveList(this)}function _updateLiveList(e){var t,n=e._node._inc||e._node.ownerDocument._inc;e._inc!=n&&(t=e._refresh(e._node),__set__(e,"length",t.length),copy$2(t,e),e._inc=n)}function NamedNodeMap(){}function _findNodeIndex(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function _addNamedNode(e,t,n,r){var i;r?t[_findNodeIndex(t,r)]=n:t[t.length++]=n,!e||(i=(n.ownerElement=e).ownerDocument)&&(r&&_onRemoveAttribute(i,e,r),_onAddAttribute(i,e,n))}function _removeNamedNode(e,t,n){var r=_findNodeIndex(t,n);if(!(0<=r))throw DOMException$2(NOT_FOUND_ERR,new Error(e.tagName+"@"+n));for(var i,o=t.length-1;r<o;)t[r]=t[++r];t.length=o,!e||(i=e.ownerDocument)&&(_onRemoveAttribute(i,e,n),n.ownerElement=null)}function DOMImplementation(e){if(this._features={},e)for(var t in e)this._features=e[t]}function Node(){}function _xmlEncoder(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function _visitNode(e,t){if(t(e))return 1;if(e=e.firstChild)do{if(_visitNode(e,t))return 1}while(e=e.nextSibling)}function Document(){}function _onAddAttribute(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function _onRemoveAttribute(e,t,n,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function _onUpdateChild(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var i=t.firstChild,o=0;i;)i=(r[o++]=i).nextSibling;r.length=o}}}function _removeChild(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,_onUpdateChild(e.ownerDocument,e),t}function _insertBefore(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===DOCUMENT_FRAGMENT_NODE){var i=t.firstChild;if(null==i)return t;var o=t.lastChild}else i=o=t;var a=n?n.previousSibling:e.lastChild;for(i.previousSibling=a,o.nextSibling=n,a?a.nextSibling=i:e.firstChild=i,null==n?e.lastChild=o:n.previousSibling=o;i.parentNode=e,i!==o&&(i=i.nextSibling););return _onUpdateChild(e.ownerDocument||e,e),t.nodeType==DOCUMENT_FRAGMENT_NODE&&(t.firstChild=t.lastChild=null),t}function _appendSingleChild(e,t){var n=t.parentNode;n&&(r=e.lastChild,n.removeChild(t),r=e.lastChild);var r=e.lastChild;return t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,_onUpdateChild(e.ownerDocument,e,t),t}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer$1(){}function nodeSerializeToString(e,t){var n,r=[],i=9==this.nodeType?this.documentElement:this,o=i.prefix,a=i.namespaceURI;return a&&null==o&&null==(o=i.lookupPrefix(a))&&(n=[{namespace:a,prefix:null}]),serializeToString(this,r,e,t,n),r.join("")}function needNamespaceDefine(e,t,n){var r=e.prefix||"",i=e.namespaceURI;if((r||i)&&("xml"!==r||"http://www.w3.org/XML/1998/namespace"!==i)&&"http://www.w3.org/2000/xmlns/"!=i){for(var o=n.length;o--;){var a=n[o];if(a.prefix==r)return a.namespace!=i}return 1}}function serializeToString(e,t,n,r,i){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case ELEMENT_NODE:i=i||[];var o=e.attributes,a=o.length,s=e.firstChild,l=e.tagName;n=htmlns===e.namespaceURI||n,t.push("<",l);for(var c=0;c<a;c++){"xmlns"==(u=o.item(c)).prefix?i.push({prefix:u.localName,namespace:u.value}):"xmlns"==u.nodeName&&i.push({prefix:"",namespace:u.value})}for(var u,p,d,f,c=0;c<a;c++){needNamespaceDefine(u=o.item(c),n,i)&&(p=u.prefix||"",d=u.namespaceURI,f=p?" xmlns:"+p:" xmlns",t.push(f,'="',d,'"'),i.push({prefix:p,namespace:d})),serializeToString(u,t,n,r,i)}if(needNamespaceDefine(e,n,i)&&(p=e.prefix||"",d=e.namespaceURI,f=p?" xmlns:"+p:" xmlns",t.push(f,'="',d,'"'),i.push({prefix:p,namespace:d})),s||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(t.push(">"),n&&/^script$/i.test(l))for(;s;)s.data?t.push(s.data):serializeToString(s,t,n,r,i),s=s.nextSibling;else for(;s;)serializeToString(s,t,n,r,i),s=s.nextSibling;t.push("</",l,">")}else t.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(s=e.firstChild;s;)serializeToString(s,t,n,r,i),s=s.nextSibling;return;case ATTRIBUTE_NODE:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return t.push(e.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return t.push("<![CDATA[",e.data,"]]>");case COMMENT_NODE:return t.push("\x3c!--",e.data,"--\x3e");case DOCUMENT_TYPE_NODE:var h,g=e.publicId,m=e.systemId;return t.push("<!DOCTYPE ",e.name),void(g?(t.push(' PUBLIC "',g),m&&"."!=m&&t.push('" "',m),t.push('">')):m&&"."!=m?t.push(' SYSTEM "',m,'">'):((h=e.internalSubset)&&t.push(" [",h,"]"),t.push(">")));case PROCESSING_INSTRUCTION_NODE:return t.push("<?",e.target," ",e.data,"?>");case ENTITY_REFERENCE_NODE:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function importNode(e,t,n){var r;switch(t.nodeType){case ELEMENT_NODE:(r=t.cloneNode(!1)).ownerDocument=e;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:n=!0}if((r=r||t.cloneNode(!1)).ownerDocument=e,r.parentNode=null,n)for(var i=t.firstChild;i;)r.appendChild(importNode(e,i,n)),i=i.nextSibling;return r}function cloneNode(e,t,n){var r=new t.constructor;for(var i in t){var o=t[i];"object"!=typeof o&&o!=r[i]&&(r[i]=o)}switch(t.childNodes&&(r.childNodes=new NodeList),r.ownerDocument=e,r.nodeType){case ELEMENT_NODE:var a=t.attributes,s=r.attributes=new NamedNodeMap,l=a.length;s._ownerElement=r;for(var c=0;c<l;c++)r.setAttributeNode(cloneNode(e,a.item(c),!0));break;case ATTRIBUTE_NODE:n=!0}if(n)for(var u=t.firstChild;u;)r.appendChild(cloneNode(e,u,n)),u=u.nextSibling;return r}function __set__(e,t,n){e[t]=n}DOMException$2.prototype=Error.prototype,copy$2(ExceptionCode,DOMException$2),NodeList.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)serializeToString(this[r],n,e,t);return n.join("")}},LiveNodeList.prototype.item=function(e){return _updateLiveList(this),this[e]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new DOMException$2(INUSE_ATTRIBUTE_ERR);var n=this.getNamedItem(e.nodeName);return _addNamedNode(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new DOMException$2(INUSE_ATTRIBUTE_ERR);return t=this.getNamedItemNS(e.namespaceURI,e.localName),_addNamedNode(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return _removeNamedNode(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return _removeNamedNode(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},DOMImplementation.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r,i=new Document;return i.implementation=this,i.childNodes=new NodeList,(i.doctype=n)&&i.appendChild(n),t&&(r=i.createElementNS(e,t),i.appendChild(r)),i},createDocumentType:function(e,t,n){var r=new DocumentType;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _insertBefore(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return _removeChild(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return cloneNode(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==TEXT_NODE&&e.nodeType==TEXT_NODE?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=t.nodeType==ATTRIBUTE_NODE?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==ATTRIBUTE_NODE?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},copy$2(NodeType,Node),copy$2(NodeType,Node.prototype),Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType!=DOCUMENT_FRAGMENT_NODE)return null==this.documentElement&&e.nodeType==ELEMENT_NODE&&(this.documentElement=e),_insertBefore(this,e,t),e.ownerDocument=this,e;for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),_removeChild(this,e)},importNode:function(e,t){return importNode(this,e,t)},getElementById:function(t){var n=null;return _visitNode(this.documentElement,function(e){if(e.nodeType==ELEMENT_NODE&&e.getAttribute("id")==t)return n=e,!0}),n},createElement:function(e){var t=new Element;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new NodeList,(t.attributes=new NamedNodeMap)._ownerElement=t},createDocumentFragment:function(){var e=new DocumentFragment;return e.ownerDocument=this,e.childNodes=new NodeList,e},createTextNode:function(e){var t=new Text;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Comment;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new CDATASection;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ProcessingInstruction;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new Attr;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new EntityReference;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new Element,r=t.split(":"),i=n.attributes=new NamedNodeMap;return n.childNodes=new NodeList,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,i._ownerElement=n},createAttributeNS:function(e,t){var n=new Attr,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},_extends(Document,Node),Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(e,null):_appendSingleChild(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(r){return new LiveNodeList(this,function(t){var n=[];return _visitNode(t,function(e){e===t||e.nodeType!=ELEMENT_NODE||"*"!==r&&e.tagName!=r||n.push(e)}),n})},getElementsByTagNameNS:function(r,i){return new LiveNodeList(this,function(t){var n=[];return _visitNode(t,function(e){e===t||e.nodeType!==ELEMENT_NODE||"*"!==r&&e.namespaceURI!==r||"*"!==i&&e.localName!=i||n.push(e)}),n})}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=ATTRIBUTE_NODE,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(e){var t=(n=this.data).substring(e),n=n.substring(0,e);this.data=this.nodeValue=n,this.length=n.length;var r=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE,_extends(DocumentType,Node),Notation.prototype.nodeType=NOTATION_NODE,_extends(Notation,Node),Entity.prototype.nodeType=ENTITY_NODE,_extends(Entity,Node),EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE,_extends(ProcessingInstruction,Node),XMLSerializer$1.prototype.serializeToString=function(e,t,n){return nodeSerializeToString.call(e,t,n)},Node.prototype.toString=nodeSerializeToString;try{function getTextContent(e){switch(e.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(getTextContent(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty&&(Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(e){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),__set__=function(e,t,n){e["$$"+t]=n})}catch(e){}var DOMImplementation_1=DOMImplementation,XMLSerializer_1=XMLSerializer$1,dom={DOMImplementation:DOMImplementation_1,XMLSerializer:XMLSerializer_1},domParser=createCommonjsModule(function(e,t){function n(e){this.options=e||{locator:{}}}function c(){this.cdata=!1}function u(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function p(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function i(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function d(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}n.prototype.parseFromString=function(e,t){var n=this.options,r=new f,i=n.domBuilder||new c,o=n.errorHandler,a=n.locator,s=n.xmlns||{},l={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return a&&i.setDocumentLocator(a),r.errorHandler=function(r,e,i){if(!r){if(e instanceof c)return e;r=e}var o={},a=r instanceof Function;function t(t){var n=r[t];!n&&a&&(n=2==r.length?function(e){r(t,e)}:r),o[t]=n?function(e){n("[xmldom "+t+"]\t"+e+p(i))}:function(){}}return i=i||{},t("warning"),t("error"),t("fatalError"),o}(o,i,a),r.domBuilder=n.domBuilder||i,/\/x?html?$/.test(t)&&(l.nbsp=" ",l.copy="©",s[""]="http://www.w3.org/1999/xhtml"),s.xml=s.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,s,l):r.errorHandler.error("invalid doc source"),i.doc},c.prototype={startDocument:function(){this.doc=(new r).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var i=this.doc,o=i.createElementNS(e,n||t),a=r.length;d(this,o),this.currentElement=o,this.locator&&u(this.locator,o);for(var s=0;s<a;s++){var e=r.getURI(s),l=r.getValue(s),n=r.getQName(s),c=i.createAttributeNS(e,n);this.locator&&u(r.getLocator(s),c),c.value=c.nodeValue=l,o.setAttributeNode(c)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&u(this.locator,n),d(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){var r;(e=i.apply(this,arguments))&&(r=this.cdata?this.doc.createCDATASection(e):this.doc.createTextNode(e),this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&u(this.locator,r))},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=i.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&u(this.locator,r),d(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r,i=this.doc.implementation;i&&i.createDocumentType&&(r=i.createDocumentType(e,t,n),this.locator&&u(this.locator,r),d(this,r))},warning:function(e){console.warn("[xmldom warning]\t"+e,p(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,p(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,p(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){c.prototype[e]=function(){return null}});var f=sax.XMLReader,r=t.DOMImplementation=dom.DOMImplementation;t.XMLSerializer=dom.XMLSerializer,t.DOMParser=n}),togeojson=createCommonjsModule(function(e,t){var n,r,i,o,a=(r=/\s*/g,i=/^\s*|\s*$/g,o=/\s+/,"undefined"!=typeof XMLSerializer?n=new XMLSerializer:"object"!=typeof process||process.browser||(n=new domParser.XMLSerializer),{kml:function(e){for(var t=y(),N={},P={},D={},T=["Polygon","LineString","Point","Track","gx:Track"],n=L(e,"Placemark"),r=L(e,"Style"),i=L(e,"StyleMap"),o=0;o<r.length;o++){var a=d(v(r[o])).toString(16);N["#"+R(r[o],"id")]=a,P[a]=r[o]}for(var s=0;s<i.length;s++){N["#"+R(i[s],"id")]=d(v(i[s])).toString(16);for(var l=L(i[s],"Pair"),c={},u=0;u<l.length;u++)c[F($(l[u],"key"))]=F($(l[u],"styleUrl"));D["#"+R(i[s],"id")]=c}for(var p=0;p<n.length;p++)t.features=t.features.concat(function(e){var t,n,r,i,o,a,s,l,c,u,p,d,f,h=function e(t){var n,r,i,o,a,s,l=[],c=[];if($(t,"MultiGeometry"))return e($(t,"MultiGeometry"));if($(t,"MultiTrack"))return e($(t,"MultiTrack"));if($(t,"gx:MultiTrack"))return e($(t,"gx:MultiTrack"));for(i=0;i<T.length;i++)if(r=L(t,T[i]))for(o=0;o<r.length;o++)if(n=r[o],"Point"===T[i])l.push({type:"Point",coordinates:B(F($(n,"coordinates")))});else if("LineString"===T[i])l.push({type:"LineString",coordinates:j(F($(n,"coordinates")))});else if("Polygon"===T[i]){var u=L(n,"LinearRing"),p=[];for(a=0;a<u.length;a++)p.push(j(F($(u[a],"coordinates"))));l.push({type:"Polygon",coordinates:p})}else{"Track"!==T[i]&&"gx:Track"!==T[i]||(s=M(n),l.push({type:"LineString",coordinates:s.coords}),s.times.length&&c.push(s.times))}return{geoms:l,coordTimes:c}}(e),g={},m=F($(e,"name")),y=F($(e,"address")),v=F($(e,"styleUrl")),_=F($(e,"description")),b=$(e,"TimeSpan"),w=$(e,"TimeStamp"),x=$(e,"ExtendedData"),S=$(e,"LineStyle"),E=$(e,"PolyStyle"),C=$(e,"visibility");if(!h.geoms.length)return[];if(m&&(g.name=m),y&&(g.address=y),v&&("#"!==v[0]&&(v="#"+v),g.styleUrl=v,N[v]&&(g.styleHash=N[v]),D[v]&&(g.styleMapHash=D[v],g.styleHash=N[D[v].normal]),(n=P[g.styleHash])&&(S=S||$(n,"LineStyle"),E=E||$(n,"PolyStyle"))),_&&(g.description=_),b&&(r=F($(b,"begin")),i=F($(b,"end")),g.timespan={begin:r,end:i}),w&&(g.timestamp=F($(w,"when"))),S&&(o=O(F($(S,"color"))),a=o[0],s=o[1],l=parseFloat(F($(S,"width"))),a&&(g.stroke=a),isNaN(s)||(g["stroke-opacity"]=s),isNaN(l)||(g["stroke-width"]=l)),E&&(c=O(F($(E,"color"))),u=c[0],p=c[1],d=F($(E,"fill")),f=F($(E,"outline")),u&&(g.fill=u),isNaN(p)||(g["fill-opacity"]=p),d&&(g["fill-opacity"]="1"===d?g["fill-opacity"]||1:0),f&&(g["stroke-opacity"]="1"===f?g["stroke-opacity"]||1:0)),x){var A=L(x,"Data"),I=L(x,"SimpleData");for(t=0;t<A.length;t++)g[A[t].getAttribute("name")]=F($(A[t],"value"));for(t=0;t<I.length;t++)g[I[t].getAttribute("name")]=F(I[t])}C&&(g.visibility=F(C)),h.coordTimes.length&&(g.coordTimes=1===h.coordTimes.length?h.coordTimes[0]:h.coordTimes);var k={type:"Feature",geometry:1===h.geoms.length?h.geoms[0]:{type:"GeometryCollection",geometries:h.geoms},properties:g};return R(e,"id")&&(k.id=R(e,"id")),[k]}(n[p]));function O(e){var t,n;return"#"===(e=e||"").substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(n=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)),[t,isNaN(n)?void 0:n]}function M(e){var t=L(e,"coord"),n=[],r=[];0===t.length&&(t=L(e,"gx:coord"));for(var i=0;i<t.length;i++)n.push(f(F(t[i]).split(" ")));for(var o=L(e,"when"),a=0;a<o.length;a++)r.push(F(o[a]));return{coords:n,times:r}}return t},gpx:function(e){for(var t,n,r,i=L(e,"trk"),o=L(e,"rte"),a=L(e,"wpt"),s=y(),l=0;l<i.length;l++)(t=function(e){for(var t,n=L(e,"trkseg"),r=[],i=[],o=[],a=0;a<n.length;a++)(t=c(n[a],"trkpt"))&&(t.line&&r.push(t.line),t.times&&t.times.length&&i.push(t.times),t.heartRates&&t.heartRates.length&&o.push(t.heartRates));if(0!==r.length){var s=p(e);return g(s,u($(e,"extensions"))),i.length&&(s.coordTimes=1===r.length?i[0]:i),o.length&&(s.heartRates=1===r.length?o[0]:o),{type:"Feature",properties:s,geometry:{type:1===r.length?"LineString":"MultiLineString",coordinates:1===r.length?r[0]:r}}}}(i[l]))&&s.features.push(t);for(l=0;l<o.length;l++)(t=function(e){var t=c(e,"rtept");if(t.line){var n=p(e);return g(n,u($(e,"extensions"))),{type:"Feature",properties:n,geometry:{type:"LineString",coordinates:t.line}}}}(o[l]))&&s.features.push(t);for(l=0;l<a.length;l++)s.features.push((n=a[l],r=void 0,g(r=p(n),h(n,["sym"])),{type:"Feature",properties:r,geometry:{type:"Point",coordinates:m(n).coordinates}}));function c(e,t){var n=L(e,t),r=[],i=[],o=[],a=n.length;if(a<2)return{};for(var s=0;s<a;s++){var l=m(n[s]);r.push(l.coordinates),l.time&&i.push(l.time),l.heartRate&&o.push(l.heartRate)}return{line:r,times:i,heartRates:o}}function u(e){var t,n,r,i,o={};return!e||(t=$(e,"line"))&&(n=F($(t,"color")),r=parseFloat(F($(t,"opacity"))),i=parseFloat(F($(t,"width"))),n&&(o.stroke=n),isNaN(r)||(o["stroke-opacity"]=r),isNaN(i)||(o["stroke-width"]=96*i/25.4)),o}function p(e){var t=h(e,["name","cmt","desc","type","time","keywords"]),n=L(e,"link");n.length&&(t.links=[]);for(var r,i=0;i<n.length;i++)g(r={href:R(n[i],"href")},h(n[i],["text","type"])),t.links.push(r);return t}return s}});function d(e){if(!e||!e.length)return 0;for(var t=0,n=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t)|0;return n}function L(e,t){return e.getElementsByTagName(t)}function R(e,t){return e.getAttribute(t)}function s(e,t){return parseFloat(R(e,t))}function $(e,t){var n=L(e,t);return n.length?n[0]:null}function f(e){for(var t=0,n=[];t<e.length;t++)n[t]=parseFloat(e[t]);return n}function F(e){var t;return e&&(t=e).normalize&&t.normalize(),e&&e.textContent||""}function h(e,t){for(var n,r={},i=0;i<t.length;i++)(n=$(e,t[i]))&&(r[t[i]]=F(n));return r}function g(e,t){for(var n in t)e[n]=t[n]}function B(e){return f(e.replace(r,"").split(","))}function j(e){for(var t=e.replace(i,"").split(o),n=[],r=0;r<t.length;r++)n.push(B(t[r]));return n}function m(e){var t,n=[s(e,"lon"),s(e,"lat")],r=$(e,"ele"),i=$(e,"gpxtpx:hr")||$(e,"hr"),o=$(e,"time");return r&&(t=parseFloat(F(r)),isNaN(t)||n.push(t)),{coordinates:n,time:o?F(o):null,heartRate:i?parseFloat(F(i)):null}}function y(){return{type:"FeatureCollection",features:[]}}function v(e){return void 0!==e.xml?e.xml:n.serializeToString(e)}e.exports=a}),_initialized=!1,_enabled=!1,_geojson;function svgData(g,m,s){var y,l,v,c,_=throttle(function(){s.call("change")},1e3),b=!0,e=utilDetect(),w=select(null);function t(){w.style("display","block"),w.style("opacity",0).transition().duration(250).style("opacity",1).on("end",function(){s.call("change")})}function n(){w.selectAll(".viewfield-group").remove(),w.style("display","none")}function r(e){if(!e)return null;if("FeatureCollection"===e.type)for(var t=0;t<e.features.length;t++)i(e.features[t]);else i(e);return e}function i(e){return e&&(e.__featurehash__=utilHashcode(fastJsonStableStringify(e)),e)}function x(e){return e?"FeatureCollection"===e.type?e.features:[e]:[]}function S(e){return e.__featurehash__}function E(e){return"Polygon"===e.geometry.type||"MultiPolygon"===e.geometry.type}function C(e){return"ideditor-data-"+e.__featurehash__+"-clippath"}function A(e){return["data"+e.__featurehash__,e.geometry.type,E(e)?"area":"",e.__layerID__||""].filter(Boolean).join(" ")}function I(e){var t=(services.vectorTile&&!y?(y=services.vectorTile).event.on("loadedData",_):!services.vectorTile&&y&&(y=null),y),n=svgPath(g).geojson,r=svgPath(g,null,!0).geojson,i=I.hasData();(w=e.selectAll(".layer-mapdata").data(_enabled&&i?[0]:[])).exit().remove(),w=w.enter().append("g").attr("class","layer-mapdata").merge(w);var o,a,s,l,c,u,p,d,f=m.surface();function h(e,t,n){var r=d3_geoPath(g),i=n.filter(function(e){return b&&e.properties&&(e.properties.desc||e.properties.name)}),o=e.selectAll("text."+t).data(i,S);o.exit().remove(),o=o.enter().append("text").attr("class",function(e){return t+" "+A(e)}).merge(o).text(function(e){return e.properties.desc||e.properties.name}).attr("x",function(e){return r.centroid(e)[0]+11}).attr("y",function(e){return r.centroid(e)[1]})}f&&!f.empty()&&(s=(a=(a=v&&t?(o=v,t.loadTiles(o,v,g),t.data(o,g)):x(_geojson)).filter(n)).filter(E),(l=f.selectAll("defs").selectAll(".clipPath-data").data(s,S)).exit().remove(),(c=l.enter().append("clipPath").attr("class","clipPath-data").attr("id",C)).append("path"),l.merge(c).selectAll("path").attr("d",r),u=(u=w.selectAll("g.datagroup").data(["fill","shadow","stroke"])).enter().append("g").attr("class",function(e){return"datagroup datagroup-"+e}).merge(u),p={fill:s,shadow:a,stroke:a},(d=u.selectAll("path").data(function(e){return p[e]},S)).exit().remove(),d=d.enter().append("path").attr("class",function(e){return"pathdata "+this.parentNode.__data__+" "+A(e)}).attr("clip-path",function(e){return"fill"===this.parentNode.__data__?"url(#"+C(e)+")":null}).merge(d).attr("d",function(e){return("fill"===this.parentNode.__data__?r:n)(e)}),w.call(h,"label-halo",a).call(h,"label",a))}function o(e){if(e){var t=e.toLowerCase().match(/\.(gpx|kml|(geo)?json)$/i);return t&&t.length&&t[0]}}function a(e){return(new DOMParser).parseFromString(e,"text/xml")}function u(){event.stopPropagation(),event.preventDefault(),event.dataTransfer.dropEffect="copy"}return I.setFile=function(e,t){var n;switch(c=_geojson=l=v=null,e){case".gpx":n=togeojson.gpx(a(t));break;case".kml":n=togeojson.kml(a(t));break;case".geojson":case".json":n=JSON.parse(t)}return n=n||{},Object.keys(n).length&&(_geojson=r(n),c=e+" data file",this.fitZoom()),s.call("change"),this},I.showLabels=function(e){return arguments.length?(b=e,this):b},I.enabled=function(e){return arguments.length?((_enabled=e)?t():(_.cancel(),w.transition().duration(250).style("opacity",0).on("end",n)),s.call("change"),this):_enabled},I.hasData=function(){var e=_geojson||{};return!(!v&&!Object.keys(e).length)},I.template=function(e,t){if(!arguments.length)return v;var n=m.connection();if(n){for(var r=n.imageryBlacklists(),i=!1,o=0,a=0;a<r.length;a++)try{if(i=new RegExp(r[a]).test(e),o++,i)break}catch(e){}o||(i=new RegExp(".*.google(apis)?..*/(vt|kh)[?/].*([xyz]=.*){3}.*").test(e))}return v=e,_geojson=l=null,c=t||"vectortile:"+e.split(/[?#]/)[0],s.call("change"),this},I.geojson=function(e,t){return arguments.length?(c=_geojson=l=v=null,e=e||{},Object.keys(e).length&&(_geojson=r(e),c=t||"unknown.geojson"),s.call("change"),this):_geojson},I.fileList=function(e){if(!arguments.length)return l;if(c=_geojson=v=null,!(l=e)||!e.length)return this;var t=e[0],n=o(t.name),r=new FileReader;return r.onload=function(e){I.setFile(n,e.target.result)},r.readAsText(t),this},I.url=function(e,t){c=_geojson=l=v=null;var n=o(e.split(/[?#]/)[0])||t;return n?(v=null,d3_text(e).then(function(e){I.setFile(n,e)}).catch(function(){})):I.template(e),this},I.getSrc=function(){return c||""},I.fitZoom=function(){var e=x(_geojson);if(e.length){var t,n=m.map(),r=n.trimmedExtent().polygon(),i=e.reduce(function(e,t){var n=t.geometry;if(!n)return e;var r=n.coordinates;switch(n.type){case"Point":r=[r];case"MultiPoint":case"LineString":break;case"MultiPolygon":r=utilArrayFlatten(r);case"Polygon":case"MultiLineString":r=utilArrayFlatten(r)}return utilArrayUnion(e,r)},[]);return geoPolygonIntersectsPolygon(r,i,!0)||(t=geoExtent(d3_geoBounds({type:"LineString",coordinates:i})),n.centerZoom(t.center(),n.trimmedExtentZoom(t))),this}},_initialized||(_geojson={},_enabled=!0,m.container().attr("dropzone","copy").on("drop.svgData",function(){event.stopPropagation(),event.preventDefault(),e.filedrop&&I.fileList(event.dataTransfer.files)}).on("dragenter.svgData",u).on("dragexit.svgData",u).on("dragover.svgData",u),_initialized=!0),I}function svgDebug(h,g){function e(e){var t=g.getDebug("tile"),n=g.getDebug("collision"),r=g.getDebug("imagery"),i=g.getDebug("target"),o=g.getDebug("downloaded"),a=[];t&&a.push({class:"red",label:"tile"}),n&&a.push({class:"yellow",label:"collision"}),r&&a.push({class:"orange",label:"imagery"}),i&&a.push({class:"pink",label:"touchTargets"}),o&&a.push({class:"purple",label:"downloaded"});var s=g.container().select(".main-content").selectAll(".debug-legend").data(a.length?[0]:[]);s.exit().remove();var l=(s=s.enter().append("div").attr("class","fillD debug-legend").merge(s)).selectAll(".debug-legend-item").data(a,function(e){return e.label});l.exit().remove(),l.enter().append("span").attr("class",function(e){return"debug-legend-item "+e.class}).text(function(e){return e.label});var c=e.selectAll(".layer-debug").data(r||o?[0]:[]);c.exit().remove(),c=c.enter().append("g").attr("class","layer-debug").merge(c);var u=g.map().extent();_mainFileFetcher.get("imagery").then(function(e){var t=(r&&e.query.bbox(u.rectangle(),!0)||[]).map(function(e){return e.features[e.id]}),n=c.selectAll("path.debug-imagery").data(t);n.exit().remove(),n.enter().append("path").attr("class","debug-imagery debug orange")}).catch(function(){});var p=g.connection(),d=[];p&&o&&(d=p.caches("get").tile.rtree.all().map(function(e){return{type:"Feature",properties:{id:e.id},geometry:{type:"Polygon",coordinates:[[[e.minX,e.minY],[e.minX,e.maxY],[e.maxX,e.maxY],[e.maxX,e.minY],[e.minX,e.minY]]]}}}));var f=c.selectAll("path.debug-downloaded").data(o?d:[]);f.exit().remove(),f.enter().append("path").attr("class","debug-downloaded debug purple"),c.selectAll("path").attr("d",svgPath(h).geojson)}return e.enabled=function(){return arguments.length?this:g.getDebug("tile")||g.getDebug("collision")||g.getDebug("imagery")||g.getDebug("target")||g.getDebug("downloaded")},e}var _layerEnabled=!1,_qaService;function svgKeepRight(d,f,t){var n=throttle(function(){return t.call("change")},1e3),h=select(null),g=select(null),m=!1;function y(e,t){e.attr("class",t).attr("transform","translate(-4, -24)").attr("d","M11.6,6.2H7.1l1.4-5.1C8.6,0.6,8.1,0,7.5,0H2.2C1.7,0,1.3,0.3,1.3,0.8L0,10.2c-0.1,0.6,0.4,1.1,0.9,1.1h4.6l-1.8,7.6C3.6,19.4,4.1,20,4.7,20c0.3,0,0.6-0.2,0.8-0.5l6.9-11.9C12.7,7,12.3,6.2,11.6,6.2z")}function v(){return services.keepRight&&!_qaService?(_qaService=services.keepRight).on("loaded",n):!services.keepRight&&_qaService&&(_qaService=null),_qaService}function _(){m||(m=!0,g.style("display","block"))}function b(){m&&(m=!1,g.style("display","none"),g.selectAll(".qaItem.keepRight").remove(),h.selectAll(".qaItem.keepRight").remove())}function e(e){var t,n,r,i,o,a,s,l,c=v(),u=f.surface();function p(e,t){return e.id===n?1:t.id===n?-1:"error"===e.severity&&"error"!==t.severity?1:"error"===t.severity&&"error"!==e.severity?-1:t.loc[1]-e.loc[1]}u&&!u.empty()&&(h=u.selectAll(".data-layer.touch .layer-touch.markers")),(g=e.selectAll(".layer-keepRight").data(c?[0]:[])).exit().remove(),g=g.enter().append("g").attr("class","layer-keepRight").style("display",_layerEnabled?"block":"none").merge(g),_layerEnabled&&(c&&12<=~~f.map().zoom()?(_(),c.loadIssues(d),m&&_layerEnabled&&(t=v(),n=f.selectedErrorID(),r=t?t.getItems(d):[],i=svgPointTransform(d),(o=g.selectAll(".qaItem.keepRight").data(r,function(e){return e.id})).exit().remove(),(a=o.enter().append("g").attr("class",function(e){return"qaItem "+e.service+" itemId-"+e.id+" itemType-"+e.parentIssueType})).append("ellipse").attr("cx",.5).attr("cy",1).attr("rx",6.5).attr("ry",3).attr("class","stroke"),a.append("path").call(y,"shadow"),a.append("use").attr("class","qaItem-fill").attr("width","20px").attr("height","20px").attr("x","-8px").attr("y","-22px").attr("xlink:href","#iD-icon-bolt"),o.merge(a).sort(p).classed("selected",function(e){return e.id===n}).attr("transform",i),h.empty()||(s=f.getDebug("target")?"pink ":"nocolor ",(l=h.selectAll(".qaItem.keepRight").data(r,function(e){return e.id})).exit().remove(),l.enter().append("rect").attr("width","20px").attr("height","20px").attr("x","-8px").attr("y","-22px").merge(l).sort(p).attr("class",function(e){return"qaItem "+e.service+" target "+s+" itemId-"+e.id}).attr("transform",i)))):b())}return e.enabled=function(e){return arguments.length?((_layerEnabled=e)?(_(),g.style("opacity",0).transition().duration(250).style("opacity",1).on("end interrupt",function(){return t.call("change")})):(n.cancel(),g.interrupt(),h.selectAll(".qaItem.keepRight").remove(),g.transition().duration(250).style("opacity",0).on("end interrupt",function(){b(),t.call("change")}),f.selectedErrorID()&&f.enter(modeBrowse(f))),t.call("change"),this):_layerEnabled},e.supported=function(){return!!v()},e}function svgGeolocate(c){var u,p=select(null);function d(e){return svgPointTransform(c)(e)}function r(){var e={loc:[u.coords.longitude,u.coords.latitude]},t=p.selectAll(".geolocations").selectAll(".geolocation").data([e]);t.exit().remove();var n,r,i,o,a,s,l=t.enter().append("g").attr("class","geolocation");l.append("circle").attr("class","geolocate-radius").attr("dx","0").attr("dy","0").attr("fill","rgb(15,128,225)").attr("fill-opacity","0.3").attr("r","0"),l.append("circle").attr("dx","0").attr("dy","0").attr("fill","rgb(15,128,225)").attr("stroke","white").attr("stroke-width","1.5").attr("r","6"),t.merge(l).attr("transform",d),p.select(".geolocate-radius").attr("r",(n=u.coords.accuracy,r=e.loc,i=geoMetersToLat(n),o=[r[0],r[1]+i],a=c(o),s=c([r[0],r[1]]),Math.round(s[1]-a[1]).toString()))}function e(e){var t=svgGeolocate.enabled;(p=e.selectAll(".layer-geolocate").data([0])).exit().remove();var n=p.enter().append("g").attr("class","layer-geolocate").style("display",t?"block":"none");n.append("g").attr("class","geolocations"),p=n.merge(p),t?r():p.style("display","none")}return e.enabled=function(e,t){return arguments.length?(u=e,svgGeolocate.enabled=t,svgGeolocate.enabled?(p.style("display","block"),p.style("opacity",0).transition().duration(250).style("opacity",1)):p.transition().duration(250).style("opacity",0),this):svgGeolocate.enabled},svgGeolocate.initialized||(svgGeolocate.enabled=!1,svgGeolocate.initialized=!0),e}function svgLabels(z,V){var q=d3_geoPath(z),e=utilDetect(),a=e.ie||"edge"===e.browser.toLowerCase()||"firefox"===e.browser.toLowerCase()&&70<=e.version,U=new RBush,W=new RBush,o={},H={},Q=[["line","aeroway","*",12],["line","highway","motorway",12],["line","highway","trunk",12],["line","highway","primary",12],["line","highway","secondary",12],["line","highway","tertiary",12],["line","highway","*",12],["line","railway","*",12],["line","waterway","*",12],["area","aeroway","*",12],["area","amenity","*",12],["area","building","*",12],["area","historic","*",12],["area","leisure","*",12],["area","man_made","*",12],["area","natural","*",12],["area","shop","*",12],["area","tourism","*",12],["area","camp_site","*",12],["point","aeroway","*",10],["point","amenity","*",10],["point","building","*",10],["point","historic","*",10],["point","leisure","*",10],["point","man_made","*",10],["point","natural","*",10],["point","shop","*",10],["point","tourism","*",10],["point","camp_site","*",10],["line","name","*",12],["area","name","*",12],["point","name","*",10]];function X(n,r){return function(e,t){return n[t][r]}}function Y(e,t,n){var r=o[t];if((r=r||(o[t]={}))[e])return r[e];if(n)return r[e]=n.getComputedTextLength(),r[e];var i=encodeURIComponent(e).match(/%[CDEFcdef]/g);return null===i?t/3*2*e.length:t/3*(2*e.length+i.length)}function K(e,t,n,r,i){var o=e.selectAll("text."+r).filter(n).data(t,osmEntity.key);o.exit().remove(),o.enter().append("text").attr("class",function(e,t){return r+" "+i[t].classes+" "+e.id}).attr("dy",a?"0.35em":null).append("textPath").attr("class","textpath"),e.selectAll("text."+r).selectAll(".textpath").filter(n).data(t,osmEntity.key).attr("startOffset","50%").attr("xlink:href",function(e){return"#ideditor-labelpath-"+e.id}).text(utilDisplayNameForPath)}function Z(e,t,n,r,i){var o=e.selectAll("text."+r).filter(n).data(t,osmEntity.key);o.exit().remove(),o.enter().append("text").attr("class",function(e,t){return r+" "+i[t].classes+" "+e.id}).merge(o).attr("x",X(i,"x")).attr("y",X(i,"y")).style("text-anchor",X(i,"textAnchor")).text(utilDisplayName).each(function(e,t){Y(utilDisplayName(e),i[t].height,this)})}function J(e,t,n,r,i){function o(e,t){return i[t].hasOwnProperty("x")&&i[t].hasOwnProperty("y")}Z(e,t=t.filter(o),n,r,i=i.filter(o))}function ee(e,t,n,r,i){var o=e.selectAll("use."+r).filter(n).data(t,osmEntity.key);o.exit().remove(),o.enter().append("use").attr("class","icon "+r).attr("width","17px").attr("height","17px").merge(o).attr("transform",X(i,"transform")).attr("xlink:href",function(e){var t=_mainPresetIndex.match(e,V.graph()),n=t&&t.icon;return n?"#"+n+(/^maki-/.test(n)?"-15":""):""})}function te(e,t,n){var r="debug "+n+" "+("debug-skipped"===n?"orange":"yellow"),i=[];V.getDebug("collision")&&(i=t.all().map(function(e){return{type:"Polygon",coordinates:[[[e.minX,e.minY],[e.maxX,e.minY],[e.maxX,e.maxY],[e.minX,e.maxY],[e.minX,e.minY]]]}}));var o=e.selectAll("."+n).data(i);o.exit().remove(),o.enter().append("path").attr("class",r).merge(o).attr("d",d3_geoPath())}function t(e,S,t,n,a,r){var i,o,s,l,c,u=V.surface().classed("fill-wireframe"),p=geoScaleToZoom(z.scale()),d=[],f={};for(A=0;A<Q.length;A++)d.push([]);if(r)U.clear(),W.clear(),H={};else for(A=0;A<t.length;A++){l=t[A];for(var h=[].concat(H[l.id]||[]).concat(H[l.id+"I"]||[]),g=0;g<h.length;g++)U.remove(h[g]),W.remove(h[g])}for(A=0;A<t.length;A++){("point"===(c=(l=t[A]).geometry(S))||"vertex"===c&&function(e){var t=V.selectedIDs();return e.hasInterestingTags()||e.isEndpoint(S)||e.isConnected(S)||-1!==t.indexOf(e.id)||S.parentWays(e).some(function(e){return-1!==t.indexOf(e.id)})}(l))&&(i=l.directions(S,z).length,o=u||"point"!==c||18<=p&&i?(f[l.id]="vertex",0):(f[l.id]="point",20),function(e,t){e.id=t;var n=H[t];n&&U.remove(n);H[t]=e,U.insert(e)}({minX:(s=z(l.loc))[0]-10,minY:s[1]-10-o,maxX:s[0]+10,maxY:s[1]+10},l.id+"P")),"vertex"===c&&(c="point");var m="area"===c&&_mainPresetIndex.match(l,S);if(m&&!function(t){return["building","landuse","natural"].some(function(e){return 0<=t.id.indexOf(e)})}(m)&&m.icon||utilDisplayName(l))for(E=0;E<Q.length;E++){var y=Q[E][0],v=Q[E][1],_=Q[E][2],b=l.tags[v];if(c===y&&b&&("*"===_||_===b)){d[E].push(l);break}}}for(var w={point:[],line:[],area:[]},x={point:[],line:[],area:[]},E=0;E<d.length;E++)for(var C=Q[E][3],A=0;A<d[E].length;A++){var I=("line"===(c=(l=d[E][A]).geometry(S))?utilDisplayNameForPath:utilDisplayName)(l),k=I&&Y(I,C),N=null;if("point"===c||"vertex"===c){if(u)continue;var P=f[l.id];if("vertex"===P&&p<17)continue;N=function(e,t,n,r){var i,o="point"===r?-12:0,a={ltr:[15,o,"start"],rtl:[-15,o,"end"]},s=_mainLocalizer.textDirection(),l=z(e.loc),c=a[s],u={height:n,width:t,x:l[0]+c[0],y:l[1]+c[1],textAnchor:c[2]};i="rtl"===s?{minX:u.x-t-2,minY:u.y-n/2-2,maxX:u.x+2,maxY:u.y+n/2+2}:{minX:u.x-2,minY:u.y-n/2-2,maxX:u.x+t+2,maxY:u.y+n/2+2};if(D([i],e.id,!0))return u}(l,k,C,P)}else"line"===c?N=function(e,t,n){var r=geoExtent(V.projection.clipExtent()).polygon(),i=S.childNodes(e).map(function(e){return z(e.loc)}),o=geoPathLength(i);if(o<t+20)return;for(var a=[50,45,55,40,60,35,65,30,70,25,75,20,80,15,95,10,90,5,95],s=0;s<a.length;s++){var l=a[s],c=l/100*o-t/2;if(!(c<0||o<c+t)){var u=function(e,t,n){for(var r,i,o,a,s,l=0,c=0;c<e.length-1;c++){var u=e[c],p=e[c+1],d=geoVecLength(u,p);!r&&t<=l+d&&(s=(t-l)/d,r=[u[0]+s*(p[0]-u[0]),u[1]+s*(p[1]-u[1])],o=c+1),!i&&n<=l+d&&(s=(n-l)/d,i=[u[0]+s*(p[0]-u[0]),u[1]+s*(p[1]-u[1])],a=c+1),l+=d}var f=e.slice(o,a);return f.unshift(r),f.push(i),f}(i,c,c+t);if(u&&geoPolygonIntersectsPolygon(r,u,!0)){(function(e){var t=Math.atan2(e[1][1]-e[0][1],e[1][0]-e[0][0]);return!(e[0][0]<e[e.length-1][0]&&t<Math.PI/2&&t>-Math.PI/2)})(u)&&(u=u.reverse());for(var p=[],d=(n+2)/2,f=0;f<u.length-1;f++)for(var h=u[f],g=u[f+1],m=Math.max(1,Math.floor(geoVecLength(h,g)/d/2)),y=0;y<m;y++){var v=geoVecInterp(h,g,y/m),_=v[0]-d-3,b=v[1]-d-3,w=v[0]+d+3,x=v[1]+d+3;p.push({minX:Math.min(_,w),minY:Math.min(b,x),maxX:Math.max(_,w),maxY:Math.max(b,x)})}if(D(p,e.id,!1))return{"font-size":n+2,lineString:"M"+u.join("L"),startOffset:l+"%"}}}}}(l,k,C):"area"===c&&(N=function(r,i,o){var a=q.centroid(r.asGeoJSON(S,!0)),e=r.extent(S),s=z(e[1])[0]-z(e[0])[0];if(isNaN(a[0])||s<20)return;var t=_mainPresetIndex.match(r,V.graph()),n=t&&t.icon,l={};if(n){if(function(){var e=a[0]-8.5,t=a[1]-8.5;if(D([{minX:e,minY:t,maxX:17+e,maxY:17+t}],r.id+"I",!0))return l.transform="translate("+e+","+t+")",!0;return!1}())return c(19),l}else if(c(0))return l;function c(e){if(i&&i+20<=s){var t=a[0],n=a[1]+e;if(D([{minX:t-i/2-2,minY:n-o/2-2,maxX:t+i/2+2,maxY:n+o/2+2}],r.id,!0))return l.x=t,l.y=n,l.textAnchor="middle",l.height=o,1}}}(l,k,C));N&&("vertex"===c&&(c="point"),N.classes=c+" tag-"+Q[E][1],w[c].push(N),x[c].push(l))}function D(e,t,n){for(var r=!1,i=0;i<e.length;i++){var o=e[i];if(o.id=t,o.minX<0||o.minY<0||o.maxX>a[0]||o.maxY>a[1]){r=!0;break}if(U.collides(o)){r=!0;break}}return H[t]=e,r?n&&W.load(e):U.load(e),!r}var T=e.selectAll(".layer-osm.labels");T.selectAll(".labels-group").data(["halo","label","debug"]).enter().append("g").attr("class",function(e){return"labels-group "+e});var O,M,L,R,$,F,B=T.selectAll(".labels-group.halo"),j=T.selectAll(".labels-group.label"),G=T.selectAll(".labels-group.debug");Z(j,x.point,n,"pointlabel",w.point),Z(B,x.point,n,"pointlabel-halo",w.point),O=T,M=x.line,L=n,R="",$=w.line,(F=O.selectAll("path").filter(L).data(M,osmEntity.key)).exit().remove(),F.enter().append("path").style("stroke-width",X($,"font-size")).attr("id",function(e){return"ideditor-labelpath-"+e.id}).attr("class",R).merge(F).attr("d",X($,"lineString")),K(j,x.line,n,"linelabel",w.line),K(B,x.line,n,"linelabel-halo",w.line),J(j,x.area,n,"arealabel",w.area),J(B,x.area,n,"arealabel-halo",w.area),ee(j,x.area,n,"areaicon",w.area),ee(B,x.area,n,"areaicon-halo",w.area),te(G,W,"debug-skipped"),te(G,U,"debug-drawn"),T.call(ne)}function ne(e){var t=e.selectAll(".layer-osm.labels").selectAll(".labels-group.halo, .labels-group.label");t.selectAll(".nolabel").classed("nolabel",!1);var n,r,i=V.map().mouse(),o=V.graph(),a=V.selectedIDs(),s=[];i&&(n={minX:i[0]-20,minY:i[1]-20,maxX:i[0]+20,maxY:i[1]+20},r=U.search(n).map(function(e){return e.id}),s.push.apply(s,r));for(var l=0;l<a.length;l++){var c=o.hasEntity(a[l]);c&&"node"===c.type&&s.push(a[l])}t.selectAll(utilEntitySelector(s)).classed("nolabel",!0);var u=e.selectAll(".labels-group.debug"),p=[];V.getDebug("collision")&&(p=n?[{type:"Polygon",coordinates:[[[n.minX,n.minY],[n.maxX,n.minY],[n.maxX,n.maxY],[n.minX,n.maxY],[n.minX,n.minY]]]}]:[]);var d=u.selectAll(".debug-mouse").data(p);d.exit().remove(),d.enter().append("path").attr("class","debug debug-mouse yellow").merge(d).attr("d",d3_geoPath())}var n=throttle(ne,100);return t.observe=function(e){function t(){n(e)}e.on("mousemove.hidelabels",t),V.on("enter.hidelabels",t)},t.off=function(e){n.cancel(),e.on("mousemove.hidelabels",null),V.on("enter.hidelabels",null)},t}var _layerEnabled$1=!1,_qaService$1;function svgImproveOSM(d,f,t){var n=throttle(function(){return t.call("change")},1e3),h=select(null),g=select(null),m=!1;function y(e,t){e.attr("class",t).attr("transform","translate(-10, -28)").attr("points","16,3 4,3 1,6 1,17 4,20 7,20 10,27 13,20 16,20 19,17.033 19,6")}function v(){return services.improveOSM&&!_qaService$1?(_qaService$1=services.improveOSM).on("loaded",n):!services.improveOSM&&_qaService$1&&(_qaService$1=null),_qaService$1}function _(){m||(m=!0,g.style("display","block"))}function b(){m&&(m=!1,g.style("display","none"),g.selectAll(".qaItem.improveOSM").remove(),h.selectAll(".qaItem.improveOSM").remove())}function e(e){var t,n,r,i,o,a,s,l,c=v(),u=f.surface();function p(e,t){return e.id===n?1:t.id===n?-1:t.loc[1]-e.loc[1]}u&&!u.empty()&&(h=u.selectAll(".data-layer.touch .layer-touch.markers")),(g=e.selectAll(".layer-improveOSM").data(c?[0]:[])).exit().remove(),g=g.enter().append("g").attr("class","layer-improveOSM").style("display",_layerEnabled$1?"block":"none").merge(g),_layerEnabled$1&&(c&&12<=~~f.map().zoom()?(_(),c.loadIssues(d),m&&_layerEnabled$1&&(t=v(),n=f.selectedErrorID(),r=t?t.getItems(d):[],i=svgPointTransform(d),(o=g.selectAll(".qaItem.improveOSM").data(r,function(e){return e.id})).exit().remove(),(a=o.enter().append("g").attr("class",function(e){return"qaItem "+e.service+" itemId-"+e.id+" itemType-"+e.itemType})).append("polygon").call(y,"shadow"),a.append("ellipse").attr("cx",0).attr("cy",0).attr("rx",4.5).attr("ry",2).attr("class","stroke"),a.append("polygon").attr("fill","currentColor").call(y,"qaItem-fill"),a.append("use").attr("transform","translate(-6.5, -23)").attr("class","icon-annotation").attr("width","13px").attr("height","13px").attr("xlink:href",function(e){var t=e.icon;return t?"#"+t+(/^maki-/.test(t)?"-11":""):""}),o.merge(a).sort(p).classed("selected",function(e){return e.id===n}).attr("transform",i),h.empty()||(s=f.getDebug("target")?"pink ":"nocolor ",(l=h.selectAll(".qaItem.improveOSM").data(r,function(e){return e.id})).exit().remove(),l.enter().append("rect").attr("width","20px").attr("height","30px").attr("x","-10px").attr("y","-28px").merge(l).sort(p).attr("class",function(e){return"qaItem "+e.service+" target "+s+" itemId-"+e.id}).attr("transform",i)))):b())}return e.enabled=function(e){return arguments.length?((_layerEnabled$1=e)?(_(),g.style("opacity",0).transition().duration(250).style("opacity",1).on("end interrupt",function(){return t.call("change")})):(n.cancel(),g.interrupt(),h.selectAll(".qaItem.improveOSM").remove(),g.transition().duration(250).style("opacity",0).on("end interrupt",function(){b(),t.call("change")}),f.selectedErrorID()&&f.enter(modeBrowse(f))),t.call("change"),this):_layerEnabled$1},e.supported=function(){return!!v()},e}var _layerEnabled$2=!1,_qaService$2;function svgOsmose(d,f,t){var n=throttle(function(){return t.call("change")},1e3),h=select(null),g=select(null),m=!1;function y(e,t){e.attr("class",t).attr("transform","translate(-10, -28)").attr("points","16,3 4,3 1,6 1,17 4,20 7,20 10,27 13,20 16,20 19,17.033 19,6")}function v(){return services.osmose&&!_qaService$2?(_qaService$2=services.osmose).on("loaded",n):!services.osmose&&_qaService$2&&(_qaService$2=null),_qaService$2}function _(){m||(m=!0,g.style("display","block"))}function b(){m&&(m=!1,g.style("display","none"),g.selectAll(".qaItem.osmose").remove(),h.selectAll(".qaItem.osmose").remove())}function r(){_(),g.style("opacity",0).transition().duration(250).style("opacity",1).on("end interrupt",function(){return t.call("change")})}function e(e){var t,n,r,i,o,a,s,l,c=v(),u=f.surface();function p(e,t){return e.id===n?1:t.id===n?-1:t.loc[1]-e.loc[1]}u&&!u.empty()&&(h=u.selectAll(".data-layer.touch .layer-touch.markers")),(g=e.selectAll(".layer-osmose").data(c?[0]:[])).exit().remove(),g=g.enter().append("g").attr("class","layer-osmose").style("display",_layerEnabled$2?"block":"none").merge(g),_layerEnabled$2&&(c&&12<=~~f.map().zoom()?(_(),c.loadIssues(d),m&&_layerEnabled$2&&(t=v(),n=f.selectedErrorID(),r=t?t.getItems(d):[],i=svgPointTransform(d),(o=g.selectAll(".qaItem.osmose").data(r,function(e){return e.id})).exit().remove(),(a=o.enter().append("g").attr("class",function(e){return"qaItem "+e.service+" itemId-"+e.id+" itemType-"+e.itemType})).append("polygon").call(y,"shadow"),a.append("ellipse").attr("cx",0).attr("cy",0).attr("rx",4.5).attr("ry",2).attr("class","stroke"),a.append("polygon").attr("fill",function(e){return t.getColor(e.item)}).call(y,"qaItem-fill"),a.append("use").attr("transform","translate(-6.5, -23)").attr("class","icon-annotation").attr("width","13px").attr("height","13px").attr("xlink:href",function(e){var t=e.icon;return t?"#"+t+(/^maki-/.test(t)?"-11":""):""}),o.merge(a).sort(p).classed("selected",function(e){return e.id===n}).attr("transform",i),h.empty()||(s=f.getDebug("target")?"pink":"nocolor",(l=h.selectAll(".qaItem.osmose").data(r,function(e){return e.id})).exit().remove(),l.enter().append("rect").attr("width","20px").attr("height","30px").attr("x","-10px").attr("y","-28px").merge(l).sort(p).attr("class",function(e){return"qaItem "+e.service+" target "+s+" itemId-"+e.id}).attr("transform",i)))):b())}return e.enabled=function(e){return arguments.length?((_layerEnabled$2=e)?v().loadStrings().then(r).catch(function(e){console.log(e)}):(n.cancel(),g.interrupt(),h.selectAll(".qaItem.osmose").remove(),g.transition().duration(250).style("opacity",0).on("end interrupt",function(){b(),t.call("change")}),f.selectedErrorID()&&f.enter(modeBrowse(f))),t.call("change"),this):_layerEnabled$2},e.supported=function(){return!!v()},e}function svgStreetside(f,h,t){var e,n=throttle(function(){t.call("change")},1e3),g=16,m=18,y=select(null),r=0,i=null;function v(){return services.streetside&&!e?(e=services.streetside).event.on("viewerChanged.svgStreetside",s).on("loadedBubbles.svgStreetside",n):!services.streetside&&e&&(e=null),e}function o(){y.style("display","block")}function a(){y.selectAll(".viewfield-group").remove(),y.style("display","none")}function _(e){var t=v();t&&(e.sequenceKey!==i&&(r=0),i=e.sequenceKey,t.selectImage(h,e).then(function(e){"ok"===e.status&&t.showViewer(h,r)}),h.map().centerEase(e.loc))}function b(e){var t=v();t&&t.setStyles(h,e)}function w(){var e=v();e&&e.setStyles(h,null)}function x(e){var t=svgPointTransform(f)(e),n=e.ca+r;return n&&(t+=" rotate("+Math.floor(n)+",0,0)"),t}function s(){var e,t=v();!t||(e=t.viewer())&&(r=e.getYaw(),h.map().isTransformed()||y.selectAll(".viewfield-group.currentView").attr("transform",x))}function l(){var e=h.container().select(".photoviewer"),n=e.empty()?void 0:e.datum(),t=~~h.map().zoom(),r=g<=t,i=m<=t,o=v(),a=[],s=[];h.photos().showsPanoramic()&&(a=o?o.sequences(f):[],s=o&&r?o.bubbles(f):[]);var l=y.selectAll(".sequences").selectAll(".sequence").data(a,function(e){return e.properties.key});l.exit().remove(),l=l.enter().append("path").attr("class","sequence").merge(l).attr("d",svgPath(f).geojson);var c=y.selectAll(".markers").selectAll(".viewfield-group").data(s,function(e){return e.key+(e.sequenceKey?"v1":"v0")});c.exit().remove();var u=c.enter().append("g").attr("class","viewfield-group").on("mouseenter",b).on("mouseleave",w).on("click",_);u.append("g").attr("class","viewfield-scale");var p=c.merge(u).sort(function(e,t){return e===n?1:t===n?-1:t.loc[1]-e.loc[1]}).attr("transform",x).select(".viewfield-scale");p.selectAll("circle").data([0]).enter().append("circle").attr("dx","0").attr("dy","0").attr("r","6");var d=p.selectAll(".viewfield").data(i?[0]:[]);d.exit().remove(),d.enter().insert("path","circle").attr("class","viewfield").attr("transform","scale(1.5,1.5),translate(-8, -13)").attr("d",function(){return this.parentNode.__data__.pano?"M 8,13 m -10,0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0":"M 6,9 C 8,8.4 8,8.4 10,9 L 16,-2 C 12,-5 4,-5 0,-2 z"})}function c(e){var t=svgStreetside.enabled,n=v();(y=e.selectAll(".layer-streetside-images").data(n?[0]:[])).exit().remove();var r=y.enter().append("g").attr("class","layer-streetside-images").style("display",t?"block":"none");r.append("g").attr("class","sequences"),r.append("g").attr("class","markers"),y=r.merge(y),t&&(n&&14<=~~h.map().zoom()?(o(),l(),n.loadBubbles(f)):a())}return h.photos().on("change.streetside",l),c.enabled=function(e){return arguments.length?(svgStreetside.enabled=e,svgStreetside.enabled?v()&&(o(),y.style("opacity",0).transition().duration(250).style("opacity",1).on("end",function(){t.call("change")})):(n.cancel(),y.transition().duration(250).style("opacity",0).on("end",a)),t.call("change"),this):svgStreetside.enabled},c.supported=function(){return!!v()},svgStreetside.initialized||(svgStreetside.enabled=!1,svgStreetside.initialized=!0),c}function svgMapillaryImages(_,b,t){var e,n,r=throttle(function(){t.call("change")},1e3),w=16,x=18,S=select(null);function E(){return services.mapillary&&!e?((e=services.mapillary).event.on("loadedImages",r),e.event.on("bearingChanged",function(e){n=e,b.map().isTransformed()||S.selectAll(".viewfield-group.currentView").filter(function(e){return e.pano}).attr("transform",k)})):!services.mapillary&&e&&(e=null),e}function i(){S.style("display","block")}function o(){S.selectAll(".viewfield-group").remove(),S.style("display","none")}function C(e){var t=E();t&&(t.selectImage(b,e.key).updateViewer(b,e.key).showViewer(b),b.map().centerEase(e.loc))}function A(e){var t=E();t&&t.setStyles(b,e)}function I(){var e=E();e&&e.setStyles(b,null)}function k(e){var t=svgPointTransform(_)(e);return e.pano&&null!==n&&isFinite(n)?t+=" rotate("+Math.floor(n)+",0,0)":e.ca&&(t+=" rotate("+Math.floor(e.ca)+",0,0)"),t}function a(){var e,t,n,r,o,a,s,i=~~b.map().zoom(),l=w<=i,c=x<=i,u=E(),p=u&&u.getSelectedImageKey(),d=u?u.sequences(_):[],f=u&&l?u.images(_):[];e=f,t=b.photos().showsPanoramic(),n=b.photos().showsFlat(),t&&n||(e=e.filter(function(e){return e.pano?t:n})),f=e,r=d,o=u,a=b.photos().showsPanoramic(),s=b.photos().showsFlat(),a&&s||(r=r.filter(function(e){if(e.properties.hasOwnProperty("pano"))return e.properties.pano?a:s;var t=e.properties.coordinateProperties;if(t&&t.image_keys&&0<t.image_keys.length)for(var n in t.image_keys){var r=t.image_keys[n],i=o.cachedImage(r);if(i&&i.hasOwnProperty("pano"))return i.pano?a:s}})),d=r;var h=S.selectAll(".sequences").selectAll(".sequence").data(d,function(e){return e.properties.key});h.exit().remove(),h=h.enter().append("path").attr("class","sequence").merge(h).attr("d",svgPath(_).geojson);var g=S.selectAll(".markers").selectAll(".viewfield-group").data(f,function(e){return e.key});g.exit().remove();var m=g.enter().append("g").attr("class","viewfield-group").on("mouseenter",A).on("mouseleave",I).on("click",C);m.append("g").attr("class","viewfield-scale");var y=g.merge(m).sort(function(e,t){return e.key===p?1:t.key===p?-1:t.loc[1]-e.loc[1]}).attr("transform",k).select(".viewfield-scale");y.selectAll("circle").data([0]).enter().append("circle").attr("dx","0").attr("dy","0").attr("r","6");var v=y.selectAll(".viewfield").data(c?[0]:[]);v.exit().remove(),v.enter().insert("path","circle").attr("class","viewfield").classed("pano",function(){return this.parentNode.__data__.pano}).attr("transform","scale(1.5,1.5),translate(-8, -13)").attr("d",function(){return this.parentNode.__data__.pano?"M 8,13 m -10,0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0":"M 6,9 C 8,8.4 8,8.4 10,9 L 16,-2 C 12,-5 4,-5 0,-2 z"})}function s(e){var t=svgMapillaryImages.enabled,n=E();(S=e.selectAll(".layer-mapillary").data(n?[0]:[])).exit().remove();var r=S.enter().append("g").attr("class","layer-mapillary").style("display",t?"block":"none");r.append("g").attr("class","sequences"),r.append("g").attr("class","markers"),S=r.merge(S),t&&(n&&12<=~~b.map().zoom()?(i(),a(),n.loadImages(_)):o())}return b.photos().on("change.mapillary_images",a),s.enabled=function(e){return arguments.length?(svgMapillaryImages.enabled=e,svgMapillaryImages.enabled?E()&&(i(),S.style("opacity",0).transition().duration(250).style("opacity",1).on("end",function(){t.call("change")})):(r.cancel(),S.transition().duration(250).style("opacity",0).on("end",o)),t.call("change"),this):svgMapillaryImages.enabled},s.supported=function(){return!!E()},svgMapillaryImages.initialized||(svgMapillaryImages.enabled=!1,svgMapillaryImages.initialized=!0),s}function svgMapillarySigns(a,i,t){var e,n=throttle(function(){t.call("change")},1e3),s=select(null);function l(){return services.mapillary&&!e?(e=services.mapillary).event.on("loadedSigns",n):!services.mapillary&&e&&(e=null),e}function r(){s.style("display","block")}function o(){s.selectAll(".icon-sign").remove(),s.style("display","none")}function c(e){var t,n,r=l();r&&(i.map().centerEase(e.loc),t=r.getSelectedImageKey(),e.detections.forEach(function(e){n&&t!==e.image_key||(n=e.image_key)}),r.selectImage(i,n).updateViewer(i,n).showViewer(i))}function u(e){var t=svgMapillarySigns.enabled,n=l();(s=e.selectAll(".layer-mapillary-signs").data(n?[0]:[])).exit().remove(),s=s.enter().append("g").attr("class","layer-mapillary-signs layer-mapillary-detections").style("display",t?"block":"none").merge(s),t&&(n&&12<=~~i.map().zoom()?(r(),function(){var e=l(),t=e?e.signs(a):[],r=e.getSelectedImageKey(),n=svgPointTransform(a),i=s.selectAll(".icon-sign").data(t,function(e){return e.key});i.exit().remove();var o=i.enter().append("g").attr("class","icon-sign icon-detected").on("click",c);o.append("use").attr("width","24px").attr("height","24px").attr("x","-12px").attr("y","-12px").attr("xlink:href",function(e){return"#"+e.value}),o.append("rect").attr("width","24px").attr("height","24px").attr("x","-12px").attr("y","-12px"),i.merge(o).attr("transform",n).classed("currentView",function(e){return e.detections.some(function(e){return e.image_key===r})}).sort(function(e,t){var n=e.detections.some(function(e){return e.image_key===r});return n===t.detections.some(function(e){return e.image_key===r})?t.loc[1]-e.loc[1]:n?1:-1})}(),n.loadSigns(a)):o())}return u.enabled=function(e){return arguments.length?(svgMapillarySigns.enabled=e,svgMapillarySigns.enabled?l()&&r():(n.cancel(),o()),t.call("change"),this):svgMapillarySigns.enabled},u.supported=function(){return!!l()},svgMapillarySigns.initialized||(svgMapillarySigns.enabled=!1,svgMapillarySigns.initialized=!0),u}function svgMapillaryMapFeatures(a,i,t){var e,n=throttle(function(){t.call("change")},1e3),s=select(null);function l(){return services.mapillary&&!e?(e=services.mapillary).event.on("loadedMapFeatures",n):!services.mapillary&&e&&(e=null),e}function r(){s.style("display","block")}function o(){s.selectAll(".icon-map-feature").remove(),s.style("display","none")}function c(e){var t,n,r=l();r&&(i.map().centerEase(e.loc),t=r.getSelectedImageKey(),e.detections.forEach(function(e){n&&t!==e.image_key||(n=e.image_key)}),r.selectImage(i,n).updateViewer(i,n).showViewer(i))}function u(e){var t=svgMapillaryMapFeatures.enabled,n=l();(s=e.selectAll(".layer-mapillary-map-features").data(n?[0]:[])).exit().remove(),s=s.enter().append("g").attr("class","layer-mapillary-map-features layer-mapillary-detections").style("display",t?"block":"none").merge(s),t&&(n&&12<=~~i.map().zoom()?(r(),function(){var e=l(),t=e?e.mapFeatures(a):[],r=e&&e.getSelectedImageKey(),n=svgPointTransform(a),i=s.selectAll(".icon-map-feature").data(t,function(e){return e.key});i.exit().remove();var o=i.enter().append("g").attr("class","icon-map-feature icon-detected").on("click",c);o.append("title").text(function(e){var t=e.value.replace(/--/g,".").replace(/-/g,"_");return _t("mapillary_map_features."+t)}),o.append("use").attr("width","24px").attr("height","24px").attr("x","-12px").attr("y","-12px").attr("xlink:href",function(e){return"object--billboard"===e.value?"#object--sign--advertisement":"#"+e.value}),o.append("rect").attr("width","24px").attr("height","24px").attr("x","-12px").attr("y","-12px"),i.merge(o).attr("transform",n).classed("currentView",function(e){return e.detections.some(function(e){return e.image_key===r})}).sort(function(e,t){var n=e.detections.some(function(e){return e.image_key===r});return n===t.detections.some(function(e){return e.image_key===r})?t.loc[1]-e.loc[1]:n?1:-1})}(),n.loadMapFeatures(a)):o())}return u.enabled=function(e){return arguments.length?(svgMapillaryMapFeatures.enabled=e,svgMapillaryMapFeatures.enabled?l()&&r():(n.cancel(),o()),t.call("change"),this):svgMapillaryMapFeatures.enabled},u.supported=function(){return!!l()},svgMapillaryMapFeatures.initialized||(svgMapillaryMapFeatures.enabled=!1,svgMapillaryMapFeatures.initialized=!0),u}function svgOpenstreetcamImages(f,h,t){var e,n=throttle(function(){t.call("change")},1e3),g=16,m=18,y=select(null);function v(){return services.openstreetcam&&!e?(e=services.openstreetcam).event.on("loadedImages",n):!services.openstreetcam&&e&&(e=null),e}function i(){y.style("display","block")}function o(){y.selectAll(".viewfield-group").remove(),y.style("display","none")}function _(e){var t=v();t&&(t.selectImage(h,e).updateViewer(h,e).showViewer(h),h.map().centerEase(e.loc))}function b(e){var t=v();t&&t.setStyles(h,e)}function w(){var e=v();e&&e.setStyles(h,null)}function x(e){var t=svgPointTransform(f)(e);return e.ca&&(t+=" rotate("+Math.floor(e.ca)+",0,0)"),t}function a(){var e=h.container().select(".photoviewer"),n=e.empty()?void 0:e.datum(),t=~~h.map().zoom(),r=g<=t,i=m<=t,o=v(),a=[],s=[];h.photos().showsFlat()&&(a=o?o.sequences(f):[],s=o&&r?o.images(f):[]);var l=y.selectAll(".sequences").selectAll(".sequence").data(a,function(e){return e.properties.key});l.exit().remove(),l=l.enter().append("path").attr("class","sequence").merge(l).attr("d",svgPath(f).geojson);var c=y.selectAll(".markers").selectAll(".viewfield-group").data(s,function(e){return e.key});c.exit().remove();var u=c.enter().append("g").attr("class","viewfield-group").on("mouseenter",b).on("mouseleave",w).on("click",_);u.append("g").attr("class","viewfield-scale");var p=c.merge(u).sort(function(e,t){return e===n?1:t===n?-1:t.loc[1]-e.loc[1]}).attr("transform",x).select(".viewfield-scale");p.selectAll("circle").data([0]).enter().append("circle").attr("dx","0").attr("dy","0").attr("r","6");var d=p.selectAll(".viewfield").data(i?[0]:[]);d.exit().remove(),d.enter().insert("path","circle").attr("class","viewfield").attr("transform","scale(1.5,1.5),translate(-8, -13)").attr("d","M 6,9 C 8,8.4 8,8.4 10,9 L 16,-2 C 12,-5 4,-5 0,-2 z")}function r(e){var t=svgOpenstreetcamImages.enabled,n=v();(y=e.selectAll(".layer-openstreetcam").data(n?[0]:[])).exit().remove();var r=y.enter().append("g").attr("class","layer-openstreetcam").style("display",t?"block":"none");r.append("g").attr("class","sequences"),r.append("g").attr("class","markers"),y=r.merge(y),t&&(n&&12<=~~h.map().zoom()?(i(),a(),n.loadImages(f)):o())}return h.photos().on("change.openstreetcam_images",a),r.enabled=function(e){return arguments.length?(svgOpenstreetcamImages.enabled=e,svgOpenstreetcamImages.enabled?v()&&(i(),y.style("opacity",0).transition().duration(250).style("opacity",1).on("end",function(){t.call("change")})):(n.cancel(),y.transition().duration(250).style("opacity",0).on("end",o)),t.call("change"),this):svgOpenstreetcamImages.enabled},r.supported=function(){return!!v()},svgOpenstreetcamImages.initialized||(svgOpenstreetcamImages.enabled=!1,svgOpenstreetcamImages.initialized=!0),r}function svgOsm(e,r,i){var o=!0;function t(e){e.selectAll(".layer-osm").data(["covered","areas","lines","points","labels"]).enter().append("g").attr("class",function(e){return"layer-osm "+e}),e.selectAll(".layer-osm.points").selectAll(".points-group").data(["points","midpoints","vertices","turns"]).enter().append("g").attr("class",function(e){return"points-group "+e})}return t.enabled=function(e){return arguments.length?((o=e)?((n=r.surface().selectAll(".data-layer.osm")).interrupt(),n.classed("disabled",!1).style("opacity",0).transition().duration(250).style("opacity",1).on("end interrupt",function(){i.call("change")})):((t=r.surface().selectAll(".data-layer.osm")).interrupt(),t.transition().duration(250).style("opacity",0).on("end interrupt",function(){t.classed("disabled",!0),i.call("change")})),i.call("change"),this):o;var t,n},t}var _notesEnabled=!1,_osmService;function svgNotes(d,f,t){t=t||dispatch("change");var n=throttle(function(){t.call("change")},1e3),h=select(null),g=select(null),m=!1;function y(e,t){e.attr("class",t).attr("transform","translate(-8, -22)").attr("d","m17.5,0l-15,0c-1.37,0 -2.5,1.12 -2.5,2.5l0,11.25c0,1.37 1.12,2.5 2.5,2.5l3.75,0l0,3.28c0,0.38 0.43,0.6 0.75,0.37l4.87,-3.65l5.62,0c1.37,0 2.5,-1.12 2.5,-2.5l0,-11.25c0,-1.37 -1.12,-2.5 -2.5,-2.5z")}function v(){return services.osm&&!_osmService?(_osmService=services.osm).on("loadedNotes",n):!services.osm&&_osmService&&(_osmService=null),_osmService}function _(){m||(m=!0,g.style("display","block"))}function b(){m&&(m=!1,g.style("display","none"),g.selectAll(".note").remove(),h.selectAll(".note").remove())}function e(e){var t,n,r,i,o,a,s,l,c=v(),u=f.surface();function p(e,t){return e.id===n?1:t.id===n?-1:t.loc[1]-e.loc[1]}u&&!u.empty()&&(h=u.selectAll(".data-layer.touch .layer-touch.markers")),(g=e.selectAll(".layer-notes").data(c?[0]:[])).exit().remove(),g=g.enter().append("g").attr("class","layer-notes").style("display",_notesEnabled?"block":"none").merge(g),_notesEnabled&&(c&&12<=~~f.map().zoom()?(_(),c.loadNotes(d),m&&_notesEnabled&&(t=v(),n=f.selectedNoteID(),r=t?t.notes(d):[],i=svgPointTransform(d),(o=g.selectAll(".note").data(r,function(e){return e.status+e.id})).exit().remove(),(a=o.enter().append("g").attr("class",function(e){return"note note-"+e.id+" "+e.status}).classed("new",function(e){return e.id<0})).append("ellipse").attr("cx",.5).attr("cy",1).attr("rx",6.5).attr("ry",3).attr("class","stroke"),a.append("path").call(y,"shadow"),a.append("use").attr("class","note-fill").attr("width","20px").attr("height","20px").attr("x","-8px").attr("y","-22px").attr("xlink:href","#iD-icon-note"),a.selectAll(".icon-annotation").data(function(e){return[e]}).enter().append("use").attr("class","icon-annotation").attr("width","10px").attr("height","10px").attr("x","-3px").attr("y","-19px").attr("xlink:href",function(e){return"#iD-icon-"+(e.id<0?"plus":"open"===e.status?"close":"apply")}),o.merge(a).sort(p).classed("selected",function(e){var t=f.mode();return!(t&&"drag-note"===t.id)&&e.id===n}).attr("transform",i),h.empty()||(s=f.getDebug("target")?"pink ":"nocolor ",(l=h.selectAll(".note").data(r,function(e){return e.id})).exit().remove(),l.enter().append("rect").attr("width","20px").attr("height","20px").attr("x","-8px").attr("y","-22px").merge(l).sort(p).attr("class",function(e){var t=e.id<0?"new":"";return"note target note-"+e.id+" "+s+t}).attr("transform",i)))):b())}return e.enabled=function(e){return arguments.length?((_notesEnabled=e)?(_(),g.style("opacity",0).transition().duration(250).style("opacity",1).on("end interrupt",function(){t.call("change")})):(n.cancel(),g.interrupt(),h.selectAll(".note").remove(),g.transition().duration(250).style("opacity",0).on("end interrupt",function(){b(),t.call("change")}),f.selectedNoteID()&&f.enter(modeBrowse(f))),t.call("change"),this):_notesEnabled},e}function svgTouch(){return function(e){e.selectAll(".layer-touch").data(["areas","lines","points","turns","markers"]).enter().append("g").attr("class",function(e){return"layer-touch "+e})}}function refresh(e,t){var n=t.getBoundingClientRect(),r=[n.width,n.height];return e.property("__dimensions__",r),r}function utilGetDimensions(e,t){if(!e||e.empty())return[0,0];var n=e.node(),r=e.property("__dimensions__");return!r||t?refresh(e,n):r}function utilSetDimensions(e,t){if(!e||e.empty())return e;var n=e.node();return null===t?(refresh(e,n),e):e.property("__dimensions__",[t[0],t[1]]).attr("width",t[0]).attr("height",t[1])}function svgLayers(e,t){var n=dispatch("change"),r=select(null),i=[{id:"osm",layer:svgOsm(e,t,n)},{id:"notes",layer:svgNotes(e,t,n)},{id:"data",layer:svgData(e,t,n)},{id:"keepRight",layer:svgKeepRight(e,t,n)},{id:"improveOSM",layer:svgImproveOSM(e,t,n)},{id:"osmose",layer:svgOsmose(e,t,n)},{id:"streetside",layer:svgStreetside(e,t,n)},{id:"mapillary",layer:svgMapillaryImages(e,t,n)},{id:"mapillary-map-features",layer:svgMapillaryMapFeatures(e,t,n)},{id:"mapillary-signs",layer:svgMapillarySigns(e,t,n)},{id:"openstreetcam",layer:svgOpenstreetcamImages(e,t,n)},{id:"debug",layer:svgDebug(e,t)},{id:"geolocate",layer:svgGeolocate(e)},{id:"touch",layer:svgTouch()}];function o(e){(r=(r=e.selectAll(".surface").data([0])).enter().append("svg").attr("class","surface").merge(r)).selectAll(".surface-defs").data([0]).enter().append("defs").attr("class","surface-defs");var t=r.selectAll(".data-layer").data(i);t.exit().remove(),t.enter().append("g").attr("class",function(e){return"data-layer "+e.id}).merge(t).each(function(e){select(this).call(e.layer)})}return o.all=function(){return i},o.layer=function(t){var e=i.find(function(e){return e.id===t});return e&&e.layer},o.only=function(e){var t=[].concat(e),n=i.map(function(e){return e.id});return o.remove(utilArrayDifference(n,t))},o.remove=function(e){return[].concat(e).forEach(function(t){i=i.filter(function(e){return e.id!==t})}),n.call("change"),this},o.add=function(e){return[].concat(e).forEach(function(e){"id"in e&&"layer"in e&&i.push(e)}),n.call("change"),this},o.dimensions=function(e){return arguments.length?(utilSetDimensions(r,e),this):utilGetDimensions(r)},utilRebind(o,n,"on")}function svgLines(b,w){var x=utilDetect(),S={motorway:0,motorway_link:1,trunk:2,trunk_link:3,primary:4,primary_link:5,secondary:6,tertiary:7,unclassified:8,residential:9,service:10,footway:11};function E(e,n,t,r){var i=w.getDebug("target")?"pink ":"nocolor ",o=w.getDebug("target")?"red ":"nocolor ",a=svgPath(b).geojson,s=w.activeID(),l=w.history().base(),c={targets:[],nopes:[]};t.forEach(function(e){var t=svgSegmentWay(e,n,s);c.targets.push.apply(c.targets,t.passive),c.nopes.push.apply(c.nopes,t.active)});var u=c.targets.filter(a),p=e.selectAll(".line.target-allowed").filter(function(e){return r(e.properties.entity)}).data(u,function(e){return e.id});p.exit().remove();function d(e){var t=e.properties.entity.id;return!(!l.entities[t]||!fastDeepEqual(n.entities[t].nodes,l.entities[t].nodes))&&e.properties.nodes.some(function(e){return!l.entities[e.id]||!fastDeepEqual(n.entities[e.id].loc,l.entities[e.id].loc)})}p.enter().append("path").merge(p).attr("d",a).attr("class",function(e){return"way line target target-allowed "+i+e.id}).classed("segment-edited",d);var f=c.nopes.filter(a),h=e.selectAll(".line.target-nope").filter(function(e){return r(e.properties.entity)}).data(f,function(e){return e.id});h.exit().remove(),h.enter().append("path").merge(h).attr("d",a).attr("class",function(e){return"way line target target-nope "+o+e.id}).classed("segment-edited",d)}return function(e,s,t,l){var c=w.history().base();function u(e,t){var n=w.selectedIDs(),r=-1!==n.indexOf(e.id)?20:0,i=-1!==n.indexOf(t.id)?20:0;return e.tags.highway&&(r-=S[e.tags.highway]),t.tags.highway&&(i-=S[t.tags.highway]),r-i}function r(e,o,t){var n,r=w.mode(),a=!(r&&/^draw/.test(r.id))&&t?"selected ":"",i=e.selectAll("path").filter(l).data((n=t,function(){var e=this.parentNode.__data__;return(m[e]||[]).filter(function(e){return n?-1!==w.selectedIDs().indexOf(e.id):-1===w.selectedIDs().indexOf(e.id)})}),osmEntity.key);return i.exit().remove(),i.enter().append("path").attr("class",function(e){var t,n,r="way line";e.hasInterestingTags()||0<(n=(t=s.parentRelations(e)).filter(function(e){return e.isMultipolygon()})).length&&t.length===n.length&&(r="relation area");var i=f[e.id]?"old-multipolygon ":"";return r+" "+o+" "+a+i+e.id}).classed("added",function(e){return!c.entities[e.id]}).classed("geometry-edited",function(e){return s.entities[e.id]&&c.entities[e.id]&&!fastDeepEqual(s.entities[e.id].nodes,c.entities[e.id].nodes)}).classed("retagged",function(e){return s.entities[e.id]&&c.entities[e.id]&&!fastDeepEqual(s.entities[e.id].tags,c.entities[e.id].tags)}).call(svgTagClasses()).merge(i).sort(u).attr("d",p).call(svgTagClasses().tags(svgRelationMemberTags(s))),e}function i(e,t,n,r,i){var o=e.selectAll("g."+n).data([t]),a=(o=o.enter().append("g").attr("class",n).merge(o)).selectAll("path").filter(l).data(function(){return r[this.parentNode.__data__]||[]},function(e){return[e.id,e.index]});a.exit().remove(),a=a.enter().append("path").attr("class",t).merge(a).attr("marker-mid",i).attr("d",function(e){return e.d}),x.ie&&a.each(function(){this.parentNode.insertBefore(this,this)})}for(var p=svgPath(b,s),n=[],a={},d={},f={},o=0;o<t.length;o++){var h=t[o],g=osmOldMultipolygonOuterMember(h,s);g?(n.push(h.mergeTags(g.tags)),f[g.id]=!0):"line"===h.geometry(s)&&n.push(h)}var m=utilArrayGroupBy(n=n.filter(p),function(e){return e.layer()});Object.keys(m).forEach(function(e){var t=m[e],n=t.filter(function(e){return e.isOneWay()}),r=svgMarkerSegments(b,s,35,function(e){return"-1"===e.tags.oneway},function(e){return"reversible"===e.tags.oneway||"alternating"===e.tags.oneway});a[e]=utilArrayFlatten(n.map(r));var i=t.filter(function(e){return e.isSided()}),o=svgMarkerSegments(b,s,30,function(){return!1},function(){return!1});d[e]=utilArrayFlatten(i.map(o))});var y=e.selectAll(".layer-osm.covered"),v=e.selectAll(".layer-osm.lines"),_=e.selectAll(".layer-touch.lines");[y,v].forEach(function(e){var t=e===y?range$1(-10,0):range$1(0,11),n=e.selectAll("g.layergroup").data(t);(n=n.enter().append("g").attr("class",function(e){return"layergroup layer"+String(e)}).merge(n)).selectAll("g.linegroup").data(["shadow","casing","stroke","shadow-highlighted","casing-highlighted","stroke-highlighted"]).enter().append("g").attr("class",function(e){return"linegroup line-"+e}),n.selectAll("g.line-shadow").call(r,"shadow",!1),n.selectAll("g.line-casing").call(r,"casing",!1),n.selectAll("g.line-stroke").call(r,"stroke",!1),n.selectAll("g.line-shadow-highlighted").call(r,"shadow",!0),n.selectAll("g.line-casing-highlighted").call(r,"casing",!0),n.selectAll("g.line-stroke-highlighted").call(r,"stroke",!0),i(n,"oneway","onewaygroup",a,"url(#ideditor-oneway-marker)"),i(n,"sided","sidedgroup",d,function(e){return"url(#ideditor-sided-marker-"+s.entity(e.id).sidednessIdentifier()+")"})}),_.call(E,s,n,l)}}function svgMidpoints(S,E){var l=8;function C(e,t,n,r){var i=E.getDebug("target")?"pink ":"nocolor ",o=svgPointTransform(S).geojson,a=n.map(function(e){return{type:"Feature",id:e.id,properties:{target:!0,entity:e},geometry:{type:"Point",coordinates:e.loc}}}),s=e.selectAll(".midpoint.target").filter(function(e){return r(e.properties.entity)}).data(a,function(e){return e.id});s.exit().remove(),s.enter().append("circle").attr("r",l).merge(s).attr("class",function(e){return"node midpoint target "+i+e.id}).attr("transform",o)}return function(e,r,t,n,i){var o=e.selectAll(".layer-osm.points .points-group.midpoints"),a=e.selectAll(".layer-touch.points"),s=E.mode();if(s&&"select"!==s.id||!E.map().withinEditableZoom())return o.selectAll(".midpoint").remove(),void a.selectAll(".midpoint.target").remove();for(var l=i.polygon(),c={},u=0;u<t.length;u++){var p=t[u];if("way"===p.type&&(n(p)&&!(E.selectedIDs().indexOf(p.id)<0)))for(var d=r.childNodes(p),f=0;f<d.length-1;f++){var h=d[f],g=d[f+1],m=[h.id,g.id].sort().join("-");if(c[m])c[m].parents.push(p);else if(40<geoVecLength(S(h.loc),S(g.loc))){var y=geoVecInterp(h.loc,g.loc,.5),v=null;if(i.intersects(y))v=y;else for(var _=0;_<4;_++)if((y=geoLineIntersection([h.loc,g.loc],[l[_],l[_+1]]))&&20<geoVecLength(S(h.loc),S(y))&&20<geoVecLength(S(g.loc),S(y))){v=y;break}v&&(c[m]={type:"midpoint",id:m,loc:v,edge:[h.id,g.id],parents:[p]})}}}function b(e){if(c[e.id])return!0;for(var t=0;t<e.parents.length;t++)if(n(e.parents[t]))return!0;return!1}var w=o.selectAll(".midpoint").filter(b).data(Object.values(c),function(e){return e.id});w.exit().remove();var x=w.enter().insert("g",":first-child").attr("class","midpoint");x.append("polygon").attr("points","-6,8 10,0 -6,-8").attr("class","shadow"),x.append("polygon").attr("points","-3,4 5,0 -3,-4").attr("class","fill"),(w=w.merge(x).attr("transform",function(e){var t=svgPointTransform(S),n=geoAngle(r.entity(e.edge[0]),r.entity(e.edge[1]),S)*(180/Math.PI);return t(e)+" rotate("+n+")"}).call(svgTagClasses().tags(function(e){return e.parents[0].tags}))).select("polygon.shadow"),w.select("polygon.fill"),a.call(C,r,Object.values(c),b)}}function svgPoints(d,f){function h(e,t){e.attr("class",t).attr("transform","translate(-8, -23)").attr("d","M 17,8 C 17,13 11,21 8.5,23.5 C 6,21 0,13 0,8 C 0,4 4,-0.5 8.5,-0.5 C 13,-0.5 17,4 17,8 z")}function g(e,t){return t.loc[1]-e.loc[1]}function m(e){var t=f.mode();return t&&/^(add|draw|drag|move|rotate)/.test(t.id)?e.id:osmEntity.key(e)}function y(e,t,n,r){var i=f.getDebug("target")?"pink ":"nocolor ",o=svgPointTransform(d).geojson,a=f.activeID(),s=[];n.forEach(function(e){a!==e.id&&s.push({type:"Feature",id:e.id,properties:{target:!0,entity:e},geometry:e.asGeoJSON()})});var l=e.selectAll(".point.target").filter(function(e){return r(e.properties.entity)}).data(s,function(e){return e.id});l.exit().remove(),l.enter().append("rect").attr("x",-10).attr("y",-26).attr("width",20).attr("height",30).merge(l).attr("class",function(e){return"node point target "+i+e.id}).attr("transform",o)}return function(e,r,t,n){var i=f.surface().classed("fill-wireframe"),o=geoScaleToZoom(d.scale()),a=f.history().base(),s=i?[]:t.filter(function(e){return"point"===e.geometry(r)&&!(18<=o&&e.directions(r,d).length)});s.sort(g);var l=e.selectAll(".layer-osm.points .points-group.points"),c=e.selectAll(".layer-touch.points"),u=l.selectAll("g.point").filter(n).data(s,m);u.exit().remove();var p=u.enter().append("g").attr("class",function(e){return"node point "+e.id}).order();p.append("path").call(h,"shadow"),p.append("ellipse").attr("cx",.5).attr("cy",1).attr("rx",6.5).attr("ry",3).attr("class","stroke"),p.append("path").call(h,"stroke"),p.append("use").attr("transform","translate(-5, -19)").attr("class","icon").attr("width","11px").attr("height","11px"),(u=u.merge(p).attr("transform",svgPointTransform(d)).classed("added",function(e){return!a.entities[e.id]}).classed("moved",function(e){return a.entities[e.id]&&!fastDeepEqual(r.entities[e.id].loc,a.entities[e.id].loc)}).classed("retagged",function(e){return a.entities[e.id]&&!fastDeepEqual(r.entities[e.id].tags,a.entities[e.id].tags)}).call(svgTagClasses())).select(".shadow"),u.select(".stroke"),u.select(".icon").attr("xlink:href",function(e){var t=_mainPresetIndex.match(e,r),n=t&&t.icon;return n?"#"+n+(/^maki-/.test(n)?"-11":""):""}),c.call(y,r,s,n)}}function svgTurns(p,d){function f(e){var t=e.u?"-u":"";return e.no?"#iD-turn-no"+t:e.only?"#iD-turn-only"+t:"#iD-turn-yes"+t}return function(e,l,t){function n(e){var t=l.entity(e.to.way),n=geoPathLength(l.childNodes(t).map(function(e){return e.loc}).map(p))/2,r=l.entity(e.to.node),i=l.entity(e.to.vertex),o=geoAngle(i,r,p),a=p(i.loc),s=e.u?0:t.__via?Math.min(n,50):50;return"translate("+(s*Math.cos(o)+a[0])+","+(s*Math.sin(o)+a[1])+") rotate("+180*o/Math.PI+")"}var r=e.selectAll(".layer-osm.points .points-group.turns"),i=e.selectAll(".layer-touch.turns"),o=r.selectAll("g.turn").data(t,function(e){return e.key});o.exit().remove();var a=o.enter().append("g").attr("class",function(e){return"turn "+e.key}),s=a.filter(function(e){return!e.u});s.append("rect").attr("transform","translate(-22, -12)").attr("width","44").attr("height","24"),s.append("use").attr("transform","translate(-22, -12)").attr("width","44").attr("height","24");var c=a.filter(function(e){return e.u});c.append("circle").attr("r","16"),c.append("use").attr("transform","translate(-16, -16)").attr("width","32").attr("height","32"),(o=o.merge(a).attr("opacity",function(e){return!1===e.direct?"0.7":null}).attr("transform",n)).select("use").attr("xlink:href",f),o.select("rect"),o.select("circle");var u=d.getDebug("target")?"pink ":"nocolor ";return(o=i.selectAll("g.turn").data(t,function(e){return e.key})).exit().remove(),(s=(a=o.enter().append("g").attr("class",function(e){return"turn "+e.key})).filter(function(e){return!e.u})).append("rect").attr("class","target "+u).attr("transform","translate(-22, -12)").attr("width","44").attr("height","24"),(c=a.filter(function(e){return e.u})).append("circle").attr("class","target "+u).attr("r","16"),(o=o.merge(a).attr("transform",n)).select("rect"),o.select("circle"),this}}function svgVertices(A,I){var s,l,o,_={shadow:[6,7.5,7.5,12],stroke:[2.5,3.5,3.5,8],fill:[1,1.5,1.5,1.5]},k={},N={},P={},D={};function b(e,t){return t.loc[1]-e.loc[1]}function w(e){var t=I.mode();return t&&/^(add|draw|drag|move|rotate)/.test(t.id)?e.id:osmEntity.key(e)}function T(e,o,t,n,r){n=n||{selected:{},important:{},hovered:{}};var i={},a={},s=I.surface().classed("fill-wireframe"),l=geoScaleToZoom(A.scale()),c=l<17?0:l<18?1:2,u=I.activeID(),p=I.history().base();function d(e){var t=o.entity(e.id);return t.id in i||(i[t.id]=t.hasInterestingTags()&&_mainPresetIndex.match(t,o).icon),i[t.id]}function f(e){if(e.id in a)return a[e.id];var t=e.directions(o,A);return a[e.id]=!!t.length&&t,t}t.sort(b);var h=e.selectAll("g.vertex").filter(r).data(t,w);h.exit().remove();var g=h.enter().append("g").attr("class",function(e){return"node vertex "+e.id}).order();g.append("circle").attr("class","shadow"),g.append("circle").attr("class","stroke"),g.filter(function(e){return e.hasInterestingTags()}).append("circle").attr("class","fill");var m=(h=h.merge(g).attr("transform",svgPointTransform(A)).classed("sibling",function(e){return e.id in n.selected}).classed("shared",function(e){return o.isShared(e)}).classed("endpoint",function(e){return e.isEndpoint(o)}).classed("added",function(e){return!p.entities[e.id]}).classed("moved",function(e){return p.entities[e.id]&&!fastDeepEqual(o.entities[e.id].loc,p.entities[e.id].loc)}).classed("retagged",function(e){return p.entities[e.id]&&!fastDeepEqual(o.entities[e.id].tags,p.entities[e.id].tags)}).call(function(e){["shadow","stroke","fill"].forEach(function(r){var i=_[r];e.selectAll("."+r).each(function(e){var t=c&&d(e),n=i[t?3:c];e.id!==u&&e.isEndpoint(o)&&!e.isConnected(o)&&(n+=1.5),"shadow"===r&&(D[e.id]=n),select(this).attr("r",n).attr("visibility",t&&"fill"===r?"hidden":null)})})})).selectAll(".icon").data(function(e){return 17<=l&&d(e)?[e]:[]},w);m.exit().remove(),m.enter().append("use").attr("class","icon").attr("width","11px").attr("height","11px").attr("transform","translate(-5.5, -5.5)").attr("xlink:href",function(e){var t=d(e);return"#"+t+(/^maki-/.test(t)?"-11":"")});var y=h.selectAll(".viewfieldgroup").data(function(e){return 18<=l&&f(e)?[e]:[]},w);y.exit().remove();var v=(y=y.enter().insert("g",".shadow").attr("class","viewfieldgroup").merge(y)).selectAll(".viewfield").data(f,function(e){return osmEntity.key(e)});v.exit().remove(),v.enter().append("path").attr("class","viewfield").attr("d","M0,0H0").merge(v).attr("marker-start","url(#ideditor-viewfield-marker"+(s?"-wireframe":"")+")").attr("transform",function(e){return"rotate("+e+")"})}function O(e,t,n,r){var i=I.getDebug("target")?"pink ":"nocolor ",o=I.getDebug("target")?"red ":"nocolor ",a=svgPointTransform(A).geojson,s=I.activeID(),l={targets:[],nopes:[]};n.forEach(function(e){s!==e.id&&(0!==svgPassiveVertex(e,t,s)?l.targets.push({type:"Feature",id:e.id,properties:{target:!0,entity:e},geometry:e.asGeoJSON()}):l.nopes.push({type:"Feature",id:e.id+"-nope",properties:{nope:!0,target:!0,entity:e},geometry:e.asGeoJSON()}))});var c=e.selectAll(".vertex.target-allowed").filter(function(e){return r(e.properties.entity)}).data(l.targets,function(e){return e.id});c.exit().remove(),c.enter().append("circle").attr("r",function(e){return D[e.id]||_.shadow[3]}).merge(c).attr("class",function(e){return"node vertex target target-allowed "+i+e.id}).attr("transform",a);var u=e.selectAll(".vertex.target-nope").filter(function(e){return r(e.properties.entity)}).data(l.nopes,function(e){return e.id});u.exit().remove(),u.enter().append("circle").attr("r",function(e){return D[e.properties.entity.id]||_.shadow[3]}).merge(u).attr("class",function(e){return"node vertex target target-nope "+o+e.id}).attr("transform",a)}function M(e,t,n,r){var i=e.geometry(t);return"vertex"===i||"point"===i&&(n||18<=r&&e.directions(t,A).length)}function c(e,o,a,s){var l={},c={};function u(e){if(!c[e.id]){c[e.id]=!0;var t,n=e.geometry(o);if(!I.features().isHiddenFeature(e,o,n))if("way"===e.type)for(t=0;t<e.nodes.length;t++){var r=o.hasEntity(e.nodes[t]);r&&u(r)}else if("relation"===e.type)for(t=0;t<e.members.length;t++){var i=o.hasEntity(e.members[t].id);i&&u(i)}else M(e,o,a,s)&&(l[e.id]=e)}}return e.forEach(function(e){var t=o.hasEntity(e);t&&("node"===t.type?M(t,o,a,s)&&(l[t.id]=t,o.parentWays(t).forEach(function(e){u(e)})):u(t))}),l}function u(e,t,n,r,i,o){var a=I.surface().classed("fill-wireframe"),s=I.surface().classed("highlight-edited"),l=geoScaleToZoom(A.scale()),c=I.mode(),u=c&&/^(add|draw|drag|move|rotate)/.test(c.id),p=I.history().base(),d=e.selectAll(".layer-osm.points .points-group.vertices"),f=e.selectAll(".layer-touch.points");o&&(k={},D={});for(var h,g,m,y,v=0;v<n.length;v++){var _=n[v],b=_.geometry(t),w=!1;("point"===b&&M(_,t,a,l)||"vertex"===b&&(_.hasInterestingTags()||_.isEndpoint(t)||_.isConnected(t)||s&&(h=_,g=t,y=m=void 0,m=p.entities[h.id],!((y=g.entities[h.id])&&m&&fastDeepEqual(y.tags,m.tags)&&fastDeepEqual(y.loc,m.loc)))))&&(k[_.id]=_,w=!0),w||o||delete k[_.id]}function x(e){return e.id in k||e.id in P||e.id in N||r(e)}var S={persistent:k,selected:P,hovered:N},E=Object.assign({},u?N:{},P,k);d.call(T,t,C(E),S,x);function C(e){return Object.keys(e).map(t.hasEntity,t).filter(function(e){return e&&e.intersects(i,t)})}f.call(O,t,C(E),function(e){return!!u||x(e)})}return u.drawSelected=function(e,n,t){var r=I.surface().classed("fill-wireframe"),i=geoScaleToZoom(A.scale());o=P||{},I.map().isInWideSelection()?(P={},I.selectedIDs().forEach(function(e){var t=n.hasEntity(e);t&&"node"===t.type&&M(t,n,r,i)&&(P[t.id]=t)})):P=c(I.selectedIDs(),n,r,i);u(e,n,Object.values(o),function(e){return e.id in o},t,!1)},u.drawHover=function(e,t,n,r){var i,o,a;n!==s&&(i=I.surface().classed("fill-wireframe"),o=geoScaleToZoom(A.scale()),l=N||{},a=(s=n)&&n.properties&&n.properties.entity,N=a?c([a.id],t,i,o):{},u(e,t,Object.values(l),function(e){return e.id in l},r,!1))},u}function utilBindOnce(e,t,n,r){var i=t+".once";return e.on(i,function(){e.on(i,null),n.apply(this,arguments)},r),this}function defaultFilter$2(){return!event.ctrlKey&&!event.button}function defaultExtent$1(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function defaultWheelDelta$1(){return-event.deltaY*(1===event.deltaMode?.05:event.deltaMode?1:.002)}function defaultConstrain$1(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r<i?(r+i)/2:Math.min(0,r)||Math.max(0,i),o<a?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function utilZoomPan(){var f,i=defaultFilter$2,u=defaultExtent$1,h=defaultConstrain$1,o=defaultWheelDelta$1,a=[0,1/0],g=[[-1/0,-1/0],[1/0,1/0]],p=interpolateZoom,t=dispatch("start","zoom","end"),s=150,m=identity$2;function l(e){e.on("pointerdown.zoom",c).on("wheel.zoom",n).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)"),select(window).on("pointermove.zoompan",x).on("pointerup.zoompan pointercancel.zoompan",S)}function y(e,t){return(t=Math.max(a[0],Math.min(a[1],t)))===e.k?e:new Transform(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new Transform(e.k,r,i)}function d(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function _(e,t,n){return!n&&f||new r(e,t)}function r(e,t){this.that=e,this.args=t,this.active=0,this.extent=u.apply(e,t)}function n(){var e,t,n,r;i.apply(this,arguments)&&(e=_(this,arguments),t=m,n=Math.max(a[0],Math.min(a[1],t.k*Math.pow(2,o.apply(this,arguments)))),r=utilFastMouse(this)(event),e.wheel?(e.mouse[0][0]===r[0]&&e.mouse[0][1]===r[1]||(e.mouse[1]=t.invert(e.mouse[0]=r)),clearTimeout(e.wheel)):(e.mouse=[r,t.invert(r)],interrupt(this),e.start()),event.preventDefault(),event.stopImmediatePropagation(),e.wheel=setTimeout(function(){e.wheel=null,e.end()},s),e.zoom("mouse",h(v(y(t,n),e.mouse[0],e.mouse[1]),e.extent,g)))}l.transform=function(e,t,n){var l,c,r=e.selection?e.selection():e;e!==r?(l=t,c=n,e.on("start.zoom",function(){_(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).end()}).tween("zoom",function(){var e=arguments,r=_(this,e),t=u.apply(this,e),i=null==c?d(t):"function"==typeof c?c.apply(this,e):c,o=Math.max(t[1][0]-t[0][0],t[1][1]-t[0][1]),n=m,a="function"==typeof l?l.apply(this,e):l,s=p(n.invert(i).concat(o/n.k),a.invert(i).concat(o/a.k));return function(e){var t,n;e=1===e?a:(t=s(e),new Transform(n=o/t[2],i[0]-t[0]*n,i[1]-t[1]*n)),r.zoom(null,e)}})):r.interrupt().each(function(){_(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},l.scaleBy=function(e,t,n){l.scaleTo(e,function(){return m.k*("function"==typeof t?t.apply(this,arguments):t)},n)},l.scaleTo=function(e,o,a){l.transform(e,function(){var e=u.apply(this,arguments),t=m,n=null==a?d(e):"function"==typeof a?a.apply(this,arguments):a,r=t.invert(n),i="function"==typeof o?o.apply(this,arguments):o;return h(v(y(t,i),n,r),e,g)},a)},l.translateBy=function(e,t,n){l.transform(e,function(){return h(m.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),u.apply(this,arguments),g)})},l.translateTo=function(e,r,i,o){l.transform(e,function(){var e=u.apply(this,arguments),t=m,n=null==o?d(e):"function"==typeof o?o.apply(this,arguments):o;return h(identity$2.translate(n[0],n[1]).scale(t.k).translate("function"==typeof r?-r.apply(this,arguments):-r,"function"==typeof i?-i.apply(this,arguments):-i),e,g)},o)},r.prototype={start:function(){return 1==++this.active&&(f=this).emit("start"),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.pointer0&&"touch"!==e&&(this.pointer0[1]=t.invert(this.pointer0[0])),this.pointer1&&"touch"!==e&&(this.pointer1[1]=t.invert(this.pointer1[0])),m=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(f=null,this.emit("end")),this},emit:function(e){customEvent(new ZoomEvent(l,e,m),t.apply,t,[e,this.that,this.args])}};var b,w=new Set;function c(){var e,t,n,r;w.add(event.pointerId),i.apply(this,arguments)&&(e=_(this,arguments,1===w.size),event.stopImmediatePropagation(),r=[n=(b=utilFastMouse(this))(event),m.invert(n),event.pointerId],e.pointer0?e.pointer1||e.pointer0[2]===r[2]||(e.pointer1=r):(e.pointer0=r,t=!0),t&&(interrupt(this),e.start()))}function x(){if(w.has(event.pointerId)&&f&&b){var e=_(this,arguments),t=e.pointer0&&e.pointer0[2]===event.pointerId,n=!t&&e.pointer1&&e.pointer1[2]===event.pointerId;if((t||n)&&"buttons"in event&&!event.buttons)return e.pointer0&&w.delete(e.pointer0[2]),e.pointer1&&w.delete(e.pointer1[2]),void e.end();event.preventDefault(),event.stopImmediatePropagation();var r=b(event);if(t?e.pointer0[0]=r:n&&(e.pointer1[0]=r),u=m,e.pointer1)var i=e.pointer0[0],o=e.pointer0[1],a=e.pointer1[0],s=e.pointer1[1],l=(l=a[0]-i[0])*l+(l=a[1]-i[1])*l,c=(c=s[0]-o[0])*c+(c=s[1]-o[1])*c,u=y(u,Math.sqrt(l/c)),p=[(i[0]+a[0])/2,(i[1]+a[1])/2],d=[(o[0]+s[0])/2,(o[1]+s[1])/2];else{if(!e.pointer0)return;p=e.pointer0[0],d=e.pointer0[1]}e.zoom("touch",h(v(u,p,d),e.extent,g))}}function S(){var e;w.has(event.pointerId)&&(w.delete(event.pointerId),f&&(e=_(this,arguments),event.stopImmediatePropagation(),e.pointer0&&e.pointer0[2]===event.pointerId?delete e.pointer0:e.pointer1&&e.pointer1[2]===event.pointerId&&delete e.pointer1,e.pointer1&&!e.pointer0&&(e.pointer0=e.pointer1,delete e.pointer1),e.pointer0?e.pointer0[1]=m.invert(e.pointer0[0]):e.end()))}return l.wheelDelta=function(e){return arguments.length?(o=utilFunctor(+e),l):o},l.filter=function(e){return arguments.length?(i=utilFunctor(!!e),l):i},l.extent=function(e){return arguments.length?(u=utilFunctor([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),l):u},l.scaleExtent=function(e){return arguments.length?(a[0]=+e[0],a[1]=+e[1],l):[a[0],a[1]]},l.translateExtent=function(e){return arguments.length?(g[0][0]=+e[0][0],g[1][0]=+e[1][0],g[0][1]=+e[0][1],g[1][1]=+e[1][1],l):[[g[0][0],g[0][1]],[g[1][0],g[1][1]]]},l.constrain=function(e){return arguments.length?(h=e,l):h},l.interpolate=function(e){return arguments.length?(p=e,l):p},l._transform=function(e){return arguments.length?(m=e,l):m},l.on=function(){var e=t.on.apply(t,arguments);return e===t?l:e},l}function utilDoubleUp(){var t,n=dispatch("doubleUp"),r=500,i=20;function o(e){return(new Date).getTime()-t.startTime<=r&&geoVecLength(t.startLoc,e)<=i}function a(){var e;event.ctrlKey||2===event.button||(e=[event.clientX,event.clientY],t&&!o(e)&&(t=void 0),t?t.pointerId=event.pointerId:t={startLoc:e,startTime:(new Date).getTime(),upCount:0,pointerId:event.pointerId})}function s(){var e;event.ctrlKey||2===event.button||t&&t.pointerId===event.pointerId&&(t.upCount+=1,2===t.upCount&&(o([event.clientX,event.clientY])&&(e=utilFastMouse(this)(event),n.call("doubleUp",this,e)),t=void 0))}function e(e){"PointerEvent"in window?e.on("pointerdown.doubleUp",a).on("pointerup.doubleUp",s):e.on("dblclick.doubleUp",function(){n.call("doubleUp",this,utilFastMouse(this)(event))})}return e.off=function(e){e.on("pointerdown.doubleUp",null).on("pointerup.doubleUp",null).on("dblclick.doubleUp",null)},utilRebind(e,n,"on")}var TILESIZE=256,minZoom=2,maxZoom=24,kMin=geoZoomToScale(minZoom,TILESIZE),kMax=geoZoomToScale(maxZoom,TILESIZE);function clamp(e,t,n){return Math.max(t,Math.min(e,n))}function rendererMap(S){var a,d,f,h,g,m,y,E,C,A,I,k,N=dispatch("move","drawn","crossEditableZoom","hitMinZoom","changeHighlighting","changeAreaFill"),P=S.projection,D=S.curtainProjection,T=select(null),O=select(null),s=select(null),M=select(null),v=[1,1],i=!0,l=!0,L=P.transform(),R=!1,$=0,F=!1,o="PointerEvent"in window?"pointer":"mouse",B=("PointerEvent"in window?utilZoomPan:d3_zoom)().scaleExtent([kMin,kMax]).interpolate(interpolate).filter(function(){if("mousedown"===event.type){for(var e,t=!1,n=window.__on,r=0;r<n.length;r++){var i=n[r];if("zoom"===i.name&&"mouseup"===i.type){t=!0;break}}t&&((e=window.CustomEvent)?e=new e("mouseup"):(e=window.document.createEvent("Event")).initEvent("mouseup",!1,!1),e.view=window,window.dispatchEvent(e))}return 2!==event.button}).on("zoom.map",function(e){var t,n,r,i=e||event,o=i.sourceEvent,a=i.transform,s=a.x,l=a.y,c=a.k;if(o&&"wheel"===o.type){if(F)return;var u,p,d=utilDetect(),f=o.deltaX,h=o.deltaY,g=s,m=l,y=c;1===o.deltaMode?(u=Math.abs(o.deltaY),p=0<o.deltaY?1:-1,h=p*clamp(4.000244140625*Math.exp(.75*(u-1)),4.000244140625,350.000244140625),"mac"!==d.os&&(h*=5),t=R?C:L,n=A(o),r=t.invert(n),y=clamp(y=t.k*Math.pow(2,-h/500),kMin,kMax),g=n[0]-r[0]*y,m=n[1]-r[1]*y):o._scale?(t=E,n=A(o),r=t.invert(n),y=clamp(y=t.k*o._scale,kMin,kMax),g=n[0]-r[0]*y,m=n[1]-r[1]*y):o.ctrlKey&&!x(h)?(h*=6,t=R?C:L,n=A(o),r=t.invert(n),y=clamp(y=t.k*Math.pow(2,-h/500),kMin,kMax),g=n[0]-r[0]*y,m=n[1]-r[1]*y):(o.altKey||o.shiftKey)&&x(h)?(t=R?C:L,n=A(o),r=t.invert(n),y=clamp(y=t.k*Math.pow(2,-h/500),kMin,kMax),g=n[0]-r[0]*y,m=n[1]-r[1]*y):"mac"===d.os&&!o.ctrlKey&&x(f)&&x(h)&&(r=P.translate(),g=r[0]-f,m=r[1]-h,y=clamp(y=P.scale(),kMin,kMax)),g===s&&m===l&&y===c||(s=g,l=m,c=y,a=identity$2.translate(g,m).scale(y),B._transform?B._transform(a):T.node().__zoom=a)}if(L.x===s&&L.y===l&&L.k===c)return;var v=G.withinEditableZoom();k!==v&&(void 0!==k&&N.call("crossEditableZoom",this,v),k=v);if(geoScaleToZoom(c,TILESIZE)<$)return M.interrupt(),N.call("hitMinZoom",this,G),z(G.center(),S.minEditableZoom(),0,!0),j(),void N.call("move",this,G);P.transform(a);var _=c/L.k,b=(s/_-L.x)*_,w=(l/_-L.y)*_;S.inIntro()&&D.transform({x:s-b,y:l-w,k:c});o&&(I=i);function x(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}R=!0,C=a,utilSetTransform(O,b,w,_),j(),N.call("move",this,G)}).on("start.map",function(){F=event.sourceEvent&&"pointerdown"===event.sourceEvent.type}).on("end.map",function(){F=!1}),c=utilDoubleUp(),j=throttle(n,750);function G(e){T=e,S.on("change.map",b);var t=S.connection();function n(e){var t=S.mode().id;"browse"!==t&&"select"!==t||e&&G.transformEase(e)}t&&t.on("change.map",b),S.history().on("merge.map",function(){j()}).on("change.map",b).on("undone.map",function(e,t){n(t.transform)}).on("redone.map",function(e){n(e.transform)}),S.background().on("change.map",b),S.features().on("redraw.map",b),a.on("change.map",function(){S.background().updateImagery(),b()}),e.on("wheel.map mousewheel.map",function(){event.preventDefault()}).call(B).call(B.transform,P.transform()).on("dblclick.zoom",null),G.supersurface=O=e.append("div").attr("class","supersurface").call(utilSetTransform,0,0),s=O.append("div").attr("class","layer layer-data"),G.surface=M=s.call(a).selectAll(".surface"),M.call(y.observe).call(c).on(o+"down.zoom",function(){2===(I=event).button&&event.stopPropagation()},!0).on(o+"up.zoom",function(){I=event,_()&&b()}).on(o+"move.map",function(){I=event}).on(o+"over.vertices",function(){var e;G.editableDataEnabled()&&!R&&(e=event.target.__data__,M.call(f.drawHover,S.graph(),e,G.extent()),N.call("drawn",this,{full:!1}))}).on(o+"out.vertices",function(){var e;G.editableDataEnabled()&&!R&&(e=event.relatedTarget&&event.relatedTarget.__data__,M.call(f.drawHover,S.graph(),e,G.extent()),N.call("drawn",this,{full:!1}))});var r=utilDetect();"GestureEvent"in window&&!r.isMobileWebKit&&M.on("gesturestart.surface",function(){event.preventDefault(),E=P.transform()}).on("gesturechange.surface",u),x(),c.on("doubleUp.map",function(e){var t,n,r;i&&("object"==typeof event.target.__data__&&!select(event.target).classed("fill")||(t=event.shiftKey,n=(r=P.transform()).invert(e),(r=r.scale(t?.5:2)).x=e[0]-n[0]*r.k,r.y=e[1]-n[1]*r.k,G.transformEase(r)))}),S.on("enter.map",function(){var n,r,e,t;G.editableDataEnabled(!0)&&(n=S.graph(),r={},S.selectedIDs().forEach(function(e){var t=n.hasEntity(e);t&&"node"===(r[t.id]=t).type&&n.parentWays(t).forEach(function(e){r[e.id]=e})}),t=Object.values(r),e=function(e){return e.id in r},t=S.features().filter(t,n),M.call(f.drawSelected,n,G.extent()).call(h,n,t,e).call(g,n,t,e).call(m,n,t,e,G.trimmedExtent()),N.call("drawn",this,{full:!1}),j())}),G.dimensions(utilGetDimensions(e))}function p(){return[v[0]/2,v[1]/2]}function u(){var e=event;e.preventDefault();var t={deltaMode:0,deltaY:1,clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY,x:e.x,y:e.y},n=new WheelEvent("wheel",t);n._scale=e.scale,n._rotation=e.rotation,T.node().dispatchEvent(n)}function _(){return R&&(utilSetTransform(O,0,0),R=!1,S.inIntro()&&D.transform(P.transform()),1)}function n(e,t){if(!M.empty()&&l){_()&&(e=t=void 0);var n=G.zoom(),r=String(~~n);M.attr("data-zoom")!==r&&M.attr("data-zoom",r);var i=G.center()[1],o=linear$2().domain([-60,0,60]).range([17,18.5,17]).clamp(!0);return M.classed("low-zoom",n<=o(i)),e||(O.call(S.background()),s.call(a)),G.editableDataEnabled()||G.isInWideSelection()?(S.loadTiles(P),function(e,t){var n,r,i,o,a=S.mode(),s=S.graph(),l=S.features(),c=S.history().intersects(G.extent()),u=!1,p=!0;G.isInWideSelection()?(r=[],utilEntityAndDeepMemberIDs(a.selectedIDs(),S.graph()).forEach(function(e){var t=S.hasEntity(e);t&&r.push(t)}),o=utilFunctor(u=!0),p=!1):e?(n=e.complete(G.extent()),r=Object.values(n).filter(Boolean),i=new Set(Object.keys(n)),o=function(e){return i.has(e.id)},l.clear(r)):(l.gatherStats(c,s,v)&&(t=void 0),o=t?(r=S.history().intersects(G.extent().intersection(t)),i=new Set(r.map(function(e){return e.id})),function(e){return i.has(e.id)}):(r=c,utilFunctor(u=!0))),p?r=l.filter(r,s):S.features().resetStats(),a&&"select"===a.id&&M.call(f.drawSelected,s,G.extent()),M.call(f,s,r,o,G.extent(),u).call(h,s,r,o).call(g,s,r,o).call(m,s,r,o,G.trimmedExtent()).call(y,s,r,o,v,u).call(d,s,r,o),N.call("drawn",this,{full:!0})}(e,t)):function(){S.features().resetStats(),M.selectAll(".layer-osm *").remove(),M.selectAll(".layer-touch:not(.markers) *").remove();var e=S.mode();e&&!{browse:!0,save:!0,"select-note":!0,"select-data":!0,"select-error":!0}[e.id]&&S.enter(modeBrowse(S)),N.call("drawn",this,{full:!0})}(),L=P.transform(),G}}G.init=function(){a=svgLayers(P,S),d=svgPoints(P,S),f=svgVertices(P,S),h=svgLines(P,S),g=svgAreas(P,S),m=svgMidpoints(P,S),y=svgLabels(P,S)};var b=function(e,t){e||t||j.cancel(),n(e,t)};function w(e,t,n){var r=P.transform();return!(!n&&e.k===r.k&&e.x===r.x&&e.y===r.y)&&(t?T.transition().duration(t).on("start",function(){G.startEase()}).call(B.transform,identity$2.translate(e.x,e.y).scale(e.k)):(P.transform(e),L=e,T.call(B.transform,L)),!0)}function z(e,t,n,r){var i=G.center(),o=G.zoom();if(e[0]!==i[0]||e[1]!==i[1]||t!==o||r){var a=geoRawMercator().transform(P.transform()),s=clamp(geoZoomToScale(t,TILESIZE),kMin,kMax);a.scale(s);var l=a.translate(),c=a(e),u=p();return l[0]+=u[0]-c[0],l[1]+=u[1]-c[1],w(identity$2.translate(l[0],l[1]).scale(s),n,r)}}function e(e){z(G.center(),~~G.zoom()+e,250,!0)}function t(e){z(G.center(),~~G.zoom()-e,250,!0)}function r(e,t){var n=P([e[0][0],e[1][1]]),r=P([e[1][0],e[0][1]]),i=(r[0]-n[0])/t[0],o=(r[1]-n[1])/t[1],a=Math.log(Math.abs(i))/Math.LN2,s=Math.log(Math.abs(o))/Math.LN2;return G.zoom()-Math.max(a,s)}function x(){var t=G.activeAreaFill();G.areaFillOptions.forEach(function(e){M.classed("fill-"+e,Boolean(e===t))})}return G.lastPointerEvent=function(){return I},G.mouse=function(){var e,t=I||event;if(t){for(;e=t.sourceEvent;)t=e;return A(t)}return null},G.mouseCoordinates=function(){var e=G.mouse()||p();return P.invert(e)},G.dblclickZoomEnable=function(e){return arguments.length?(i=e,G):i},G.redrawEnable=function(e){return arguments.length?(l=e,G):l},G.isTransformed=function(){return R},G.pan=function(e,t){var n=P.translate(),r=P.scale();return n[0]+=e[0],n[1]+=e[1],t?T.transition().duration(t).on("start",function(){G.startEase()}).call(B.transform,identity$2.translate(n[0],n[1]).scale(r)):(P.translate(n),L=P.transform(),T.call(B.transform,L),N.call("move",this,G),b()),G},G.dimensions=function(e){return arguments.length?(v=e,a.dimensions(v),S.background().dimensions(v),P.clipExtent([[0,0],v]),A=utilFastMouse(O.node()),j(),G):v},G.zoomIn=function(){e(1)},G.zoomInFurther=function(){e(4)},G.canZoomIn=function(){return G.zoom()<maxZoom},G.zoomOut=function(){t(1)},G.zoomOutFurther=function(){t(4)},G.canZoomOut=function(){return G.zoom()>minZoom},G.center=function(e){return arguments.length?(z(e,G.zoom())&&N.call("move",this,G),j(),G):P.invert(p())},G.unobscuredCenterZoomEase=function(e,t){var n=G.unobscuredOffsetPx(),r=geoRawMercator().transform(P.transform());r.scale(geoZoomToScale(t,TILESIZE));var i=r(e),o=[i[0]+n[0],i[1]+n[1]],a=r.invert(o);G.centerZoomEase(a,t)},G.unobscuredOffsetPx=function(){var e=S.container().select(".map-panes .map-pane.shown");return e.empty()?[0,0]:[e.node().offsetWidth/2,0]},G.zoom=function(e){return arguments.length?(e<$&&(M.interrupt(),N.call("hitMinZoom",this,G),e=S.minEditableZoom()),z(G.center(),e)&&N.call("move",this,G),j(),G):Math.max(geoScaleToZoom(P.scale(),TILESIZE),0)},G.centerZoom=function(e,t){return z(e,t)&&N.call("move",this,G),j(),G},G.zoomTo=function(e){var t=e.extent(S.graph());if(!isFinite(t.area()))return G;var n=clamp(G.trimmedExtentZoom(t),0,20);return G.centerZoom(t.center(),n)},G.centerEase=function(e,t){return t=t||250,z(e,G.zoom(),t),G},G.zoomEase=function(e,t){return t=t||250,z(G.center(),e,t,!1),G},G.centerZoomEase=function(e,t,n){return z(e,t,n=n||250,!1),G},G.transformEase=function(e,t){return w(e,t=t||250,!1),G},G.zoomToEase=function(e,t){var n;if(Array.isArray(e)?e.forEach(function(e){var t=e.extent(S.graph());n=n?n.extend(t):t}):n=e.extent(S.graph()),!isFinite(n.area()))return G;var r=clamp(G.trimmedExtentZoom(n),0,20);return G.centerZoomEase(n.center(),r,t)},G.startEase=function(){return utilBindOnce(M,o+"down.ease",function(){G.cancelEase()}),G},G.cancelEase=function(){return T.interrupt(),G},G.extent=function(e){if(!arguments.length)return new geoExtent(P.invert([0,v[1]]),P.invert([v[0],0]));var t=geoExtent(e);G.centerZoom(t.center(),G.extentZoom(t))},G.trimmedExtent=function(e){if(!arguments.length){return new geoExtent(P.invert([10,v[1]-30-10]),P.invert([v[0]-10,81]))}var t=geoExtent(e);G.centerZoom(t.center(),G.trimmedExtentZoom(t))},G.extentZoom=function(e){return r(geoExtent(e),v)},G.trimmedExtentZoom=function(e){var t=[v[0]-40,v[1]-120];return r(geoExtent(e),t)},G.withinEditableZoom=function(){return G.zoom()>=S.minEditableZoom()},G.isInWideSelection=function(){return!G.withinEditableZoom()&&S.selectedIDs().length},G.editableDataEnabled=function(e){var t=S.layers().layer("osm");return!(!t||!t.enabled())&&(e||G.withinEditableZoom())},G.notesEditable=function(){var e=S.layers().layer("notes");return!(!e||!e.enabled())&&G.withinEditableZoom()},G.minzoom=function(e){return arguments.length?($=e,G):$},G.toggleHighlightEdited=function(){M.classed("highlight-edited",!M.classed("highlight-edited")),G.pan([0,0]),N.call("changeHighlighting",this)},G.areaFillOptions=["wireframe","partial","full"],G.activeAreaFill=function(e){return arguments.length?(corePreferences("area-fill",e),"wireframe"!==e&&corePreferences("area-fill-toggle",e),x(),G.pan([0,0]),N.call("changeAreaFill",this),G):corePreferences("area-fill")||"partial"},G.toggleWireframe=function(){var e="wireframe"===(e=G.activeAreaFill())?corePreferences("area-fill-toggle")||"partial":"wireframe";G.activeAreaFill(e)},G.layers=function(){return a},G.doubleUpHandler=function(){return c},utilRebind(G,N,"on")}function rendererPhotos(n){var r=dispatch("change"),i=["streetside","mapillary","mapillary-map-features","mapillary-signs","openstreetcam"],e=["flat","panoramic"],o=e.slice();function a(){}function t(){var e,t;window.mocha||(e=utilStringQs(window.location.hash),(t=n.layers().all().filter(function(e){return-1!==i.indexOf(e.id)&&e.layer&&e.layer.supported()&&e.layer.enabled()}).map(function(e){return e.id})).length?e.photo_overlay=t.join(","):delete e.photo_overlay,window.location.replace("#"+utilQsString(e,!0)))}function s(e){var t=n.layers().layer(e);return t&&t.supported()&&t.enabled()}return a.overlayLayerIDs=function(){return i},a.allPhotoTypes=function(){return e},a.shouldFilterByPhotoType=function(){return s("mapillary")||s("streetside")&&s("openstreetcam")},a.showsPhotoType=function(e){return!a.shouldFilterByPhotoType()||-1!==o.indexOf(e)},a.showsFlat=function(){return a.showsPhotoType("flat")},a.showsPanoramic=function(){return a.showsPhotoType("panoramic")},a.togglePhotoType=function(e){var t=o.indexOf(e);return-1!==t?o.splice(t,1):o.push(e),r.call("change",this),a},a.init=function(){var e=utilStringQs(window.location.hash);e.photo_overlay&&e.photo_overlay.replace(/;/g,",").split(",").forEach(function(e){var t=n.layers().layer(e);t&&t.enabled(!0)}),n.layers().on("change.rendererPhotos",t)},utilRebind(a,r,"on")}function uiAccount(e){var o=e.connection();function t(i){o&&(o.authenticated()?o.userDetails(function(e,t){var n=i.select(".userLink"),r=i.select(".logoutLink");n.html(""),r.html(""),!e&&t&&(i.selectAll(".userLink, .logoutLink").classed("hide",!1),n.append("a").attr("href",o.userURL(t.display_name)).attr("target","_blank"),t.image_url?n.append("img").attr("class","icon pre-text user-icon").attr("src",t.image_url):n.call(svgIcon("#iD-icon-avatar","pre-text light")),n.append("span").attr("class","label").text(t.display_name),r.append("a").attr("class","logout").attr("href","#").text(_t("logout")).on("click.logout",function(){event.preventDefault(),o.logout()}))}):i.selectAll(".userLink, .logoutLink").classed("hide",!0))}return function(e){e.append("li").attr("class","logoutLink").classed("hide",!0),e.append("li").attr("class","userLink").classed("hide",!0),o&&(o.on("change.account",function(){t(e)}),t(e))}}function uiAttribution(a){var r=select(null);function i(e,t,n){var r=e.selectAll("."+n).data([0]),i=(r=r.enter().append("div").attr("class",n).merge(r)).selectAll(".attribution").data(t,function(e){return e.id});i.exit().remove();var o=(i=i.enter().append("span").attr("class","attribution").each(function(e,t,n){var r,i,o=select(n[t]);e.terms_html?o.html(e.terms_html):(e.terms_url&&(o=o.append("a").attr("href",e.terms_url).attr("target","_blank")),r=e.id.replace(/\./g,"<TX_DOT>"),i=_t("imagery."+r+".attribution.text",{default:e.terms_text||e.id||e.name()}),e.icon&&!e.overlay&&o.append("img").attr("class","source-image").attr("src",e.icon),o.append("span").attr("class","attribution-text").text(i))}).merge(i)).selectAll(".copyright-notice").data(function(e){var t=e.copyrightNotices(a.map().zoom(),a.map().extent());return t?[t]:[]});o.exit().remove(),(o=o.enter().append("span").attr("class","copyright-notice").merge(o)).text(String)}function t(){var e=a.background().baseLayerSource();r.call(i,e?[e]:[],"base-layer-attribution");var t=a.map().zoom(),n=a.background().overlayLayerSources()||[];r.call(i,n.filter(function(e){return e.validZoom(t)}),"overlay-layer-attribution")}return function(e){r=e,a.background().on("change.attribution",t),a.map().on("move.attribution",throttle(t,400,{leading:!1})),t()}}function uiContributors(o){var a=o.connection(),t=debounce(function(){n()},1e3),s=4,l=!1,c=select(null);function n(){var t,e,n,r,i;a&&(t={},o.history().intersects(o.map().extent()).forEach(function(e){e&&e.user&&(t[e.user]=!0)}),n=(e=Object.keys(t)).slice(0,e.length>s?s-1:s),c.html("").call(svgIcon("#iD-icon-nearby","pre-text light")),(r=select(document.createElement("span"))).selectAll().data(n).enter().append("a").attr("class","user-link").attr("href",function(e){return a.userURL(e)}).attr("target","_blank").text(String),e.length>s?((i=select(document.createElement("span"))).append("a").attr("target","_blank").attr("href",function(){return a.changesetsURL(o.map().center(),o.map().zoom())}).text(e.length-s+1),c.append("span").html(_t("contributors.truncated_list",{users:r.html(),count:i.html()}))):c.append("span").html(_t("contributors.list",{users:r.html()})),e.length?l&&c.transition().style("opacity",1):(l=!0,c.transition().style("opacity",0)))}return function(e){a&&(c=e,n(),a.on("loaded.contributors",t),o.map().on("move.contributors",t))}}var _popoverID=0;function uiPopover(a){var t,m=_popoverID++,n=select(null),r=function(e){(n=e).each(i)},s=utilFunctor(!1),y=utilFunctor("top"),v=utilFunctor("center"),_=utilFunctor(select(null)),l=utilFunctor(""),c=utilFunctor(!0),u="PointerEvent"in window?"pointer":"mouse";function i(){var e=select(this),t=s.apply(this,arguments),n=e.selectAll(".popover-"+m).data([0]),r=n.enter().append("div").attr("class","popover popover-"+m+" "+(a||"")).classed("arrowed",c.apply(this,arguments));r.append("div").attr("class","popover-arrow"),r.append("div").attr("class","popover-inner"),n=r.merge(n),t&&n.classed("fade",!0);var i,o=l.apply(this,arguments);"hover"===o?(e.on(u+"enter.popover",function(){if(event.pointerType){if("mouse"!==event.pointerType)return void(i=event.timeStamp);if(i&&event.timeStamp-i<1500)return}0===event.buttons&&p.apply(this,arguments)}),e.on(u+"leave.popover",function(){f.apply(this,arguments)})):"clickFocus"===o&&(e.on(u+"down.popover",function(){event.preventDefault(),event.stopPropagation()}).on(u+"up.popover",function(){event.preventDefault(),event.stopPropagation()}).on("click.popover",h),n.attr("tabindex",0).on("blur.popover",function(){e.each(function(){f.apply(this,arguments)})}))}function p(){var e=select(this),t=e.selectAll(".popover-"+m);t.empty()&&(e.call(r.destroy),e.each(i),t=e.selectAll(".popover-"+m)),t.classed("in",!0),"clickFocus"===l.apply(this,arguments)&&(e.classed("active",!0),t.node().focus()),e.each(o)}function o(){var e=select(this);t&&e.selectAll(".popover-"+m+" > .popover-inner").call(t.apply(this,arguments)),d.apply(this,arguments),d.apply(this,arguments),d.apply(this,arguments)}function d(){var e=select(this),t=e.selectAll(".popover-"+m),n=_&&_.apply(this,arguments),r=n&&!n.empty()&&n.node(),i=r?r.scrollLeft:0,o=r?r.scrollTop:0,a=y.apply(this,arguments);t.classed("left",!1).classed("right",!1).classed("top",!1).classed("bottom",!1).classed(a,!0);var s=v.apply(this,arguments),l=.5;"leading"===s?l=0:"trailing"===s&&(l=1);var c,u,p,d,f=g(e.node()),h=g(t.node());switch(a){case"top":c={x:f.x+(f.w-h.w)*l,y:f.y-h.h};break;case"bottom":c={x:f.x+(f.w-h.w)*l,y:f.y+f.h};break;case"left":c={x:f.x-h.w,y:f.y+(f.h-h.h)*l};break;case"right":c={x:f.x+f.w,y:f.y+(f.h-h.h)*l}}function g(e){var t=select(e).style("position");return"absolute"===t||"static"===t?{x:e.offsetLeft-i,y:e.offsetTop-o,w:e.offsetWidth,h:e.offsetHeight}:{x:0,y:0,w:e.offsetWidth,h:e.offsetHeight}}c?(!r||"top"!==a&&"bottom"!==a||(u=c.x,c.x+h.w>r.offsetWidth-10?c.x=r.offsetWidth-10-h.w:c.x<10&&(c.x=10),p=e.selectAll(".popover-"+m+" > .popover-arrow"),d=Math.min(Math.max(h.w/2-(c.x-u),10),h.w-10),p.style("left",~~d+"px")),t.style("left",~~c.x+"px").style("top",~~c.y+"px")):t.style("left",null).style("top",null)}function f(){var e=select(this);"clickFocus"===l.apply(this,arguments)&&e.classed("active",!1),e.selectAll(".popover-"+m).classed("in",!1)}function h(){select(this).select(".popover-"+m).classed("in")?f.apply(this,arguments):p.apply(this,arguments)}return r.displayType=function(e){return arguments.length?(l=utilFunctor(e),r):l},r.hasArrow=function(e){return arguments.length?(c=utilFunctor(e),r):c},r.placement=function(e){return arguments.length?(y=utilFunctor(e),r):y},r.alignment=function(e){return arguments.length?(v=utilFunctor(e),r):v},r.scrollContainer=function(e){return arguments.length?(_=utilFunctor(e),r):_},r.content=function(e){return arguments.length?(t=e,r):t},r.isShown=function(){var e=n.select(".popover-"+m);return!e.empty()&&e.classed("in")},r.show=function(){n.each(p)},r.updateContent=function(){n.each(o)},r.hide=function(){n.each(f)},r.toggle=function(){n.each(h)},r.destroy=function(e,t){t=t||".popover-"+m,e.on(u+"enter.popover",null).on(u+"leave.popover",null).on(u+"up.popover",null).on(u+"down.popover",null).on("click.popover",null).attr("title",function(){return this.getAttribute("data-original-title")||this.getAttribute("title")}).attr("data-original-title",null).selectAll(t).remove()},r.destroyAny=function(e){e.call(r.destroy,".popover")},r}function uiTooltip(e){var t=uiPopover((e||"")+" tooltip").displayType("hover"),n=function(){var e=this.getAttribute("data-original-title");return e||(e=this.getAttribute("title"),this.removeAttribute("title"),this.setAttribute("data-original-title",e),e)},r=utilFunctor(null),i=utilFunctor(null);return t.title=function(e){return arguments.length?(n=utilFunctor(e),t):n},t.heading=function(e){return arguments.length?(r=utilFunctor(e),t):r},t.keys=function(e){return arguments.length?(i=utilFunctor(e),t):i},t.content(function(){var o=r.apply(this,arguments),a=n.apply(this,arguments),s=i.apply(this,arguments);return function(e){var t=e.selectAll(".tooltip-heading").data(o?[o]:[]);t.exit().remove(),t.enter().append("div").attr("class","tooltip-heading").merge(t).html(o);var n=e.selectAll(".tooltip-text").data(a?[a]:[]);n.exit().remove(),n.enter().append("div").attr("class","tooltip-text").merge(n).html(a);var r=e.selectAll(".keyhint-wrap").data(s&&s.length?[0]:[]);r.exit().remove();var i=r.enter().append("div").attr("class","keyhint-wrap");i.append("span").html(_t("tooltip_keyhint")),(r=i.merge(r)).selectAll("kbd.shortcut").data(s&&s.length?s:[]).enter().append("kbd").attr("class","shortcut").html(function(e){return e})}}),t}function uiEditMenu(c){var u,p,d,f=dispatch("toggled"),h=select(null),g=[],t=[0,0],m=[0,0],y="",v=[],_=function(e){var t,n,r,i,o,a,s=y.includes("touch")||y.includes("pen"),l=g.filter(function(e){return!s||!e.mouseOnly});l.length&&(v=[],n=(t=u=s)?32:34,d=t?52+Math.min(120,6*Math.max.apply(Math,l.map(function(e){return e.title.length}))):44,p=8+l.length*n,(i=(r=(h=e.append("div").attr("class","edit-menu").classed("touch-menu",s).style("padding","4px 0")).selectAll(".edit-menu-item").data(l)).enter().append("button").attr("class",function(e){return"edit-menu-item edit-menu-item-"+e.id}).style("height",n+"px").on("click",function(e){event.stopPropagation(),e.disabled()?"touch"!==a&&"pen"!==a||c.ui().flash.duration(4e3).iconName("#iD-operation-"+e.id).iconClass("operation disabled").text(e.tooltip)():("touch"!==a&&"pen"!==a||c.ui().flash.duration(2e3).iconName("#iD-operation-"+e.id).iconClass("operation").text(e.annotation()||e.title)(),e(),_.close());a=null}).on("pointerup",function(){a=event.pointerType}).on("pointerdown mousedown",function(){event.stopPropagation()})).each(function(e){var t=uiTooltip().heading(e.title).title(e.tooltip()).keys([e.keys[0]]);v.push(t),select(this).call(t).append("div").attr("class","icon-wrap").call(svgIcon("#iD-operation-"+e.id,"operation"))}),t&&i.append("span").attr("class","label").text(function(e){return e.title}),r=i.merge(r).classed("disabled",function(e){return e.disabled()}),b(),o=c.projection.scale(),c.map().on("move.edit-menu",function(){o!==c.projection.scale()&&_.close()}).on("drawn.edit-menu",function(e){e.full&&b()}),f.call("toggled",this,!0))};function b(){var e,t,n,r,i,o,a,s,l;h&&!h.empty()&&(e=c.projection(m),t=c.surfaceRect(),e[0]<0||e[0]>t.width||e[1]<0||e[1]>t.height?_.close():(r=t,n="ltr"===_mainLocalizer.textDirection()?e[0]+10+d>r.width-35:!(e[0]-10-d<35),(i=[0,0])[0]=n?-1*(10+d):10,u?e[1]-p<85?i[1]=85-e[1]:i[1]=-p:e[1]+p>t.height-45?i[1]=-e[1]-p+t.height-45:i[1]=0,o=geoVecAdd(e,i),h.style("left",o[0]+"px").style("top",o[1]+"px"),s=t,l=n,a="ltr"===_mainLocalizer.textDirection()?l||e[0]+10+d+210>s.width-35?"left":"right":!l||e[0]-10-d-210<35?"right":"left",v.forEach(function(e){e.placement(a)})))}return _.close=function(){c.map().on("move.edit-menu",null).on("drawn.edit-menu",null),h.remove(),v=[],f.call("toggled",this,!1)},_.anchorLoc=function(e){return arguments.length?(t=e,m=c.projection.invert(t),_):t},_.triggerType=function(e){return arguments.length?(y=e,_):y},_.operations=function(e){return arguments.length?(g=e,_):g},utilRebind(_,f,"on")}function uiFeatureInfo(a){function t(e){var t,n=a.features(),r=n.stats(),i=0,o=n.hidden().map(function(e){if(r[e])return i+=r[e],String(r[e])+" "+_t("feature."+e+".description")}).filter(Boolean);e.html(""),o.length&&(t=uiTooltip().placement("top").title(function(){return o.join("<br/>")}),e.append("a").attr("class","chip").attr("href","#").attr("tabindex",-1).html(_t("feature_info.hidden_warning",{count:i})).call(t).on("click",function(){t.hide(),event.preventDefault(),a.ui().togglePanes(a.container().select(".map-panes .map-data-pane"))})),e.classed("hide",!o.length)}return function(e){t(e),a.features().on("change.feature_info",function(){t(e)})}}function uiFlash(r){var i,o,a=2e3,s="#iD-icon-no",l="disabled",c="";function t(){i&&i.stop(),r.container().select(".main-footer-wrap").classed("footer-hide",!0).classed("footer-show",!1),r.container().select(".flash-wrap").classed("footer-hide",!1).classed("footer-show",!0);var e=r.container().select(".flash-wrap").selectAll(".flash-content").data([0]),t=e.enter().append("div").attr("class","flash-content"),n=t.append("svg").attr("class","flash-icon icon").append("g").attr("transform","translate(10,10)");return n.append("circle").attr("r",9),n.append("use").attr("transform","translate(-7,-7)").attr("width","14").attr("height","14"),t.append("div").attr("class","flash-text"),(e=e.merge(t)).selectAll(".flash-icon").attr("class","icon flash-icon "+(l||"")),e.selectAll(".flash-icon use").attr("xlink:href",s),e.selectAll(".flash-text").attr("class","flash-text "+(o||"")).text(c),i=d3_timeout(function(){i=null,r.container().select(".main-footer-wrap").classed("footer-hide",!1).classed("footer-show",!0),r.container().select(".flash-wrap").classed("footer-hide",!0).classed("footer-show",!1)},a),e}return t.duration=function(e){return arguments.length?(a=e,t):a},t.text=function(e){return arguments.length?(c=e,t):c},t.textClass=function(e){return arguments.length?(o=e,t):o},t.iconName=function(e){return arguments.length?(s=e,t):s},t.iconClass=function(e){return arguments.length?(l=e,t):l},t}function uiFullScreen(t){var e=t.container().node();function n(){return e.requestFullscreen?e.requestFullscreen:e.msRequestFullscreen?e.msRequestFullscreen:e.mozRequestFullScreen?e.mozRequestFullScreen:e.webkitRequestFullscreen?e.webkitRequestFullscreen:void 0}function r(){event.preventDefault(),document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(document.exitFullscreen?document.exitFullscreen:document.msExitFullscreen?document.msExitFullscreen:document.mozCancelFullScreen?document.mozCancelFullScreen:document.webkitExitFullscreen?document.webkitExitFullscreen:void 0).apply(document):n().apply(e)}return function(){var e;n()&&(e="mac"===utilDetect().os?[uiCmd("⌃⌘F"),"f11"]:["f11"],t.keybinding().on(e,r))}}function uiGeolocate(t){var n,r,e,i={enableHighAccuracy:!1,timeout:6e3},o=uiLoading(t).message(_t("geolocate.locating")).blocking(!0),a=t.layers().layer("geolocate"),s=select(null);function l(){t.inIntro()||(a.enabled()||o.isShown()?(o.close(),a.enabled(null,!1),f()):(e=setTimeout(p,1e4),t.container().call(o),navigator.geolocation.getCurrentPosition(u,p,i)))}function c(){t.enter(modeBrowse(t));var e=t.map();a.enabled(n,!0),f(),e.centerZoomEase(r.center(),Math.min(20,e.extentZoom(r)))}function u(e){var t=(n=e).coords;r=geoExtent([t.longitude,t.latitude]).padByMeters(t.accuracy),c(),d()}function p(){(n?c:t.ui().flash.text(_t("geolocate.location_unavailable")).iconName("#iD-icon-geolocate"))(),d()}function d(){o.close(),e&&clearTimeout(e),e=void 0}function f(){s.classed("active",a.enabled())}return function(e){navigator.geolocation&&navigator.geolocation.getCurrentPosition&&(s=e.append("button").on("click",l).call(svgIcon("#iD-icon-geolocate","light")).call(uiTooltip().placement("rtl"===_mainLocalizer.textDirection()?"right":"left").title(_t("geolocate.title")).keys([_t("geolocate.key")])),t.keybinding().on(_t("geolocate.key"),l))}}function uiPanelBackground(l){var c=l.background(),u=null,p={},d=["zoom","vintage","source","description","resolution","accuracy"],t=debounce(f,250);function f(e){var t,n,r,i,o,a,s=c.baseLayerSource();s&&(t=null!==s.id.match(/^DigitalGlobe/i),u!==s.name()&&(u=s.name(),p={}),e.html(""),(n=e.append("ul").attr("class","background-info")).append("li").text(u),d.forEach(function(e){t&&"vintage"===e||n.append("li").attr("class","background-info-list-"+e).classed("hide",!p[e]).text(_t("info_panels.background."+e)+":").append("span").attr("class","background-info-span-"+e).text(p[e])}),h(e),r=l.getDebug("tile")?"hide_tiles":"show_tiles",e.append("a").text(_t("info_panels.background."+r)).attr("href","#").attr("class","button button-toggle-tiles").on("click",function(){event.preventDefault(),l.setDebug("tile",!l.getDebug("tile")),e.call(f)}),t&&(i=s.id+"-vintage",o=l.background().findSource(i),a=l.background().showsLayer(o)?"hide_vintage":"show_vintage",e.append("a").text(_t("info_panels.background."+a)).attr("href","#").attr("class","button button-toggle-vintage").on("click",function(){event.preventDefault(),l.background().toggleOverlayLayer(o),e.call(f)})),["DigitalGlobe-Premium","DigitalGlobe-Standard"].forEach(function(e){var t,n;s.id!==e&&(t=e+"-vintage",n=l.background().findSource(t),l.background().showsLayer(n)&&l.background().toggleOverlayLayer(n))}))}var h=debounce(function(r){var e=l.container().select(".layer-background img.tile-center");if(e.empty())return;var i=u,t=e.datum(),n=t&&3<=t.length&&t[2]||Math.floor(l.map().zoom()),o=l.map().center();if(p.zoom=String(n),r.selectAll(".background-info-list-zoom").classed("hide",!1).selectAll(".background-info-span-zoom").text(p.zoom),!t||3<=!t.length)return;c.baseLayerSource().getMetadata(o,t,function(e,n){var t;e||u!==i||(t=n.vintage,p.vintage=t&&t.range||_t("info_panels.background.unknown"),r.selectAll(".background-info-list-vintage").classed("hide",!1).selectAll(".background-info-span-vintage").text(p.vintage),d.forEach(function(e){var t;"zoom"!==e&&"vintage"!==e&&(t=n[e],p[e]=t,r.selectAll(".background-info-list-"+e).classed("hide",!t).selectAll(".background-info-span-"+e).text(t))}))})},250);function e(e){e.call(f),l.map().on("drawn.info-background",function(){e.call(t)}).on("move.info-background",function(){e.call(h)})}return e.off=function(){l.map().on("drawn.info-background",null).on("move.info-background",null)},e.id="background",e.title=_t("info_panels.background.title"),e.key=_t("info_panels.background.key"),e}function uiPanelHistory(a){var s;function i(e){if(!e)return _t("info_panels.history.unknown");var t=new Date(e);return isNaN(t.getTime())?_t("info_panels.history.unknown"):t.toLocaleString(_mainLocalizer.localeCode(),{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}function o(e,t){var n;t?(e.append("span").attr("class","user-name").text(t),n=e.append("div").attr("class","links"),s&&n.append("a").attr("class","user-osm-link").attr("href",s.userURL(t)).attr("target","_blank").attr("tabindex",-1).text("OSM"),n.append("a").attr("class","user-hdyc-link").attr("href","https://hdyc.neis-one.org/?"+t).attr("target","_blank").attr("tabindex",-1).text("HDYC")):e.append("span").text(_t("info_panels.history.unknown"))}function l(e,t){var n;t?(e.append("span").attr("class","changeset-id").text(t),n=e.append("div").attr("class","links"),s&&n.append("a").attr("class","changeset-osm-link").attr("href",s.changesetURL(t)).attr("target","_blank").attr("tabindex",-1).text("OSM"),n.append("a").attr("class","changeset-osmcha-link").attr("href","https://osmcha.org/changesets/"+t).attr("target","_blank").attr("tabindex",-1).text("OSMCha"),n.append("a").attr("class","changeset-achavi-link").attr("href","https://overpass-api.de/achavi/?changeset="+t).attr("target","_blank").attr("tabindex",-1).text("Achavi")):e.append("span").text(_t("info_panels.history.unknown"))}function t(e){var t,n,r,i=a.selectedNoteID();s=a.connection(),i&&s?(t=[_t("note.note")+" "+i],n=s.getNote(i)):(t=a.selectedIDs().filter(function(e){return a.hasEntity(e)})).length&&(r=a.entity(t[0]));var o=1===t.length?t[0]:null;e.html(""),e.append("h4").attr("class","history-heading").text(o||_t("info_panels.history.selected",{n:t.length})),o&&(r?e.call(u,r):n&&e.call(c,n))}function c(e,t){var n;t&&!t.isNew()?((n=e.append("ul")).append("li").text(_t("info_panels.history.note_comments")+":").append("span").text(t.comments.length),t.comments.length&&(n.append("li").text(_t("info_panels.history.note_created_date")+":").append("span").text(i(t.comments[0].date)),n.append("li").text(_t("info_panels.history.note_created_user")+":").call(o,t.comments[0].user)),s&&e.append("a").attr("class","view-history-on-osm").attr("target","_blank").attr("tabindex",-1).attr("href",s.noteURL(t)).call(svgIcon("#iD-icon-out-link","inline")).append("span").text(_t("info_panels.history.note_link_text"))):e.append("div").text(_t("info_panels.history.note_no_history"))}function u(e,t){var n,r;t&&!t.isNew()?(n=e.append("div").attr("class","links"),s&&n.append("a").attr("class","view-history-on-osm").attr("href",s.historyURL(t)).attr("target","_blank").attr("tabindex",-1).attr("title",_t("info_panels.history.link_text")).text("OSM"),n.append("a").attr("class","pewu-history-viewer-link").attr("href","https://pewu.github.io/osm-history/#/"+t.type+"/"+t.osmId()).attr("target","_blank").attr("tabindex",-1).text("PeWu"),(r=e.append("ul")).append("li").text(_t("info_panels.history.version")+":").append("span").text(t.version),r.append("li").text(_t("info_panels.history.last_edit")+":").append("span").text(i(t.timestamp)),r.append("li").text(_t("info_panels.history.edited_by")+":").call(o,t.user),r.append("li").text(_t("info_panels.history.changeset")+":").call(l,t.changeset)):e.append("div").text(_t("info_panels.history.no_history"))}function e(e){e.call(t),a.map().on("drawn.info-history",function(){e.call(t)}),a.on("enter.info-history",function(){e.call(t)})}return e.off=function(){a.map().on("drawn.info-history",null),a.on("enter.info-history",null)},e.id="history",e.title=_t("info_panels.history.title"),e.key=_t("info_panels.history.key"),e}var OSM_PRECISION=7;function displayLength(e,t){var n=e*(t?3.28084:1),r=t?5280<=n?(n/=5280,"miles"):"feet":1e3<=n?(n/=1e3,"kilometers"):"meters";return _t("units."+r,{quantity:n.toLocaleString(_mainLocalizer.localeCode(),{maximumSignificantDigits:4})})}function displayArea(e,t){var n,r,i,o=_mainLocalizer.localeCode(),a=e*(t?10.7639111056:1),s="",l="";return t?(s=6969600<=a?(n=a/27878400,"square_miles"):(n=a,"square_feet"),4356<a&&a<4356e4&&(r=a/43560,l="acres")):(s=25e4<=a?(n=a/1e6,"square_kilometers"):(n=a,"square_meters"),1e3<a&&a<1e7&&(r=a/1e4,l="hectares")),i=_t("units."+s,{quantity:n.toLocaleString(o,{maximumSignificantDigits:4})}),r?_t("units.area_pair",{area1:i,area2:_t("units."+l,{quantity:r.toLocaleString(o,{maximumSignificantDigits:2})})}):i}function wrap(e,t,n){var r=n-t;return((e-t)%r+r)%r+t}function clamp$1(e,t,n){return Math.max(t,Math.min(e,n))}function displayCoordinate(e,t,n){var r=_mainLocalizer.localeCode(),i=60*(Math.abs(e)-Math.floor(Math.abs(e))),o=60*(i-Math.floor(i)),a=_t("units.arcdegrees",{quantity:Math.floor(Math.abs(e)).toLocaleString(r)}),s=0<Math.floor(o)?a+_t("units.arcminutes",{quantity:Math.floor(i).toLocaleString(r)})+_t("units.arcseconds",{quantity:Math.round(o).toLocaleString(r)}):0<Math.floor(i)?a+_t("units.arcminutes",{quantity:Math.round(i).toLocaleString(r)}):_t("units.arcdegrees",{quantity:Math.round(Math.abs(e)).toLocaleString(r)});return 0===e?s:_t("units.coordinate",{coordinate:s,direction:_t("units."+(0<e?t:n))})}function dmsCoordinatePair(e){return _t("units.coordinate_pair",{latitude:displayCoordinate(clamp$1(e[1],-90,90),"north","south"),longitude:displayCoordinate(wrap(e[0],-180,180),"east","west")})}function decimalCoordinatePair(e){return _t("units.coordinate_pair",{latitude:clamp$1(e[1],-90,90).toFixed(OSM_PRECISION),longitude:wrap(e[0],-180,180).toFixed(OSM_PRECISION)})}function uiPanelLocation(r){var i="";function t(e){e.html("");var t=e.append("ul"),n=r.map().mouseCoordinates();n.some(isNaN)&&(n=r.map().center()),t.append("li").text(dmsCoordinatePair(n)).append("li").text(decimalCoordinatePair(n)),e.append("div").attr("class","location-info").text(i||" "),o(e,n)}var o=debounce(function(n,e){services.geocoder?services.geocoder.reverse(e,function(e,t){i=t?t.display_name:_t("info_panels.location.unknown_location"),n.selectAll(".location-info").text(i)}):(i=_t("info_panels.location.unknown_location"),n.selectAll(".location-info").text(i))},250);function e(e){e.call(t),r.surface().on(("PointerEvent"in window?"pointer":"mouse")+"move.info-location",function(){e.call(t)})}return e.off=function(){r.surface().on(".info-location",null)},e.id="location",e.title=_t("info_panels.location.title"),e.key=_t("info_panels.location.key"),e}function uiPanelMeasurement(E){var C=_mainLocalizer.localeCode(),A=!_mainLocalizer.usesMetric();function I(e){var t,n,r,i,o=E.graph(),a=E.selectedNoteID(),s=services.osm,l=0,c=0;if(a&&s)var u=s.getNote(a),p=_t("note.note")+" "+a,d=u.loc,f="note";else{var h=E.selectedIDs().filter(function(e){return E.hasEntity(e)}),g=h.map(function(e){return E.entity(e)});if(p=1===g.length?g[0].id:_t("info_panels.measurement.selected",{n:g.length.toLocaleString(C)}),g.length){var m=geoExtent();for(var y in g){var v,_=g[y];m._extend(_.extent(o)),"line"!==(f=_.geometry(o))&&"area"!==f||(r="relation"===_.type||_.isClosed()&&!_.isDegenerate(),l+=6371007.1809*d3_geoLength(function(e){if("LineString"===e.type)return e;var t={type:"LineString",coordinates:[]};return"Polygon"===e.type?t.coordinates=e.coordinates[0]:"MultiPolygon"===e.type&&(t.coordinates=e.coordinates[0][0]),t}(v=_.asGeoJSON(o))),n=d3_geoCentroid(v),r&&(c+=_.area(o)/(4*Math.PI)*510065621724e3))}1<g.length&&(n=r=f=null),1===g.length&&"node"===g[0].type?d=g[0].loc:i=utilGetAllNodes(h,E.graph()).length,d||n||(t=m.center())}}e.html(""),p&&e.append("h4").attr("class","measurement-heading").text(p);var b,w,x,S=e.append("ul");f&&S.append("li").text(_t("info_panels.measurement.geometry")+":").append("span").text(_t(r?"info_panels.measurement.closed_"+f:"geometry."+f)),i&&S.append("li").text(_t("info_panels.measurement.node_count")+":").append("span").text(i.toLocaleString(C)),c&&S.append("li").text(_t("info_panels.measurement.area")+":").append("span").text(displayArea(c,A)),l&&(w=_t("info_panels.measurement."+(r?"perimeter":"length")),S.append("li").text(w+":").append("span").text(displayLength(l,A))),d&&((b=S.append("li").text(_t("info_panels.measurement.location")+":")).append("span").text(dmsCoordinatePair(d)),b.append("span").text(decimalCoordinatePair(d))),n&&((b=S.append("li").text(_t("info_panels.measurement.centroid")+":")).append("span").text(dmsCoordinatePair(n)),b.append("span").text(decimalCoordinatePair(n))),t&&((b=S.append("li").text(_t("info_panels.measurement.center")+":")).append("span").text(dmsCoordinatePair(t)),b.append("span").text(decimalCoordinatePair(t))),(l||c)&&(x=A?"imperial":"metric",e.append("a").text(_t("info_panels.measurement."+x)).attr("href","#").attr("class","button button-toggle-units").on("click",function(){event.preventDefault(),A=!A,e.call(I)}))}function e(e){e.call(I),E.map().on("drawn.info-measurement",function(){e.call(I)}),E.on("enter.info-measurement",function(){e.call(I)})}return e.off=function(){E.map().on("drawn.info-measurement",null),E.on("enter.info-measurement",null)},e.id="measurement",e.title=_t("info_panels.measurement.title"),e.key=_t("info_panels.measurement.key"),e}var uiInfoPanels={background:uiPanelBackground,history:uiPanelHistory,location:uiPanelLocation,measurement:uiPanelMeasurement},helpStringReplacements;function uiInfo(r){var o=Object.keys(uiInfoPanels),a=["measurement"],s={},l={};function c(e){function n(){var e=o.filter(function(e){return l[e]}).sort(),t=i.selectAll(".panel-container").data(e,function(e){return e});t.exit().style("opacity",1).transition().duration(200).style("opacity",0).on("end",function(e){select(this).call(s[e].off).remove()});var n=t.enter().append("div").attr("class",function(e){return"fillD2 panel-container panel-container-"+e});n.style("opacity",0).transition().duration(200).style("opacity",1);var r=n.append("div").attr("class","panel-title fillD2");r.append("h3").text(function(e){return s[e].title}),r.append("button").attr("class","close").on("click",function(e){c.toggle(e)}).call(svgIcon("#iD-icon-close")),n.append("div").attr("class",function(e){return"panel-content panel-content-"+e}),i.selectAll(".panel-content").each(function(e){select(this).call(s[e])})}c.toggle=function(e){event&&(event.stopImmediatePropagation(),event.preventDefault());var t=o.filter(function(e){return l[e]});e?(l[e]=!l[e],1===t.length&&t[0]===e&&(a=[e]),r.container().select("."+e+"-panel-toggle-item").classed("active",l[e]).select("input").property("checked",l[e])):t.length?(a=t).forEach(function(e){l[e]=!1}):a.forEach(function(e){l[e]=!0}),n()};var i=(i=e.selectAll(".info-panels").data([0])).enter().append("div").attr("class","info-panels").merge(i);n(),r.keybinding().on(uiCmd("⌘"+_t("info_panels.key")),c.toggle),o.forEach(function(e){var t=_t("info_panels."+e+".key",{default:null});t&&r.keybinding().on(uiCmd("⌘⇧"+t),function(){c.toggle(e)})})}return o.forEach(function(e){s[e]||(s[e]=uiInfoPanels[e](r),l[e]=!1)}),c}function pointBox(e,t){var n=t.surfaceRect(),r=t.curtainProjection(e);return{left:r[0]+n.left-40,top:r[1]+n.top-60,width:80,height:90}}function pad(e,t,n){var r,i,o;return{left:(o=e instanceof Array?(r=n.surfaceRect(),{left:(i=n.curtainProjection(e))[0]+r.left,top:i[1]+r.top}):e).left-t,top:o.top-t,width:(o.width||0)+2*t,height:(o.width||0)+2*t}}function icon(e,t,n){return'<svg class="icon '+(t||"")+'"><use xlink:href="'+e+'"'+(n?' class="'+n+'"':"")+"></use></svg>"}function helpString(e,t){var n;return helpStringReplacements=helpStringReplacements||{point_icon:icon("#iD-icon-point","pre-text"),line_icon:icon("#iD-icon-line","pre-text"),area_icon:icon("#iD-icon-area","pre-text"),note_icon:icon("#iD-icon-note","pre-text add-note"),plus:icon("#iD-icon-plus","pre-text"),minus:icon("#iD-icon-minus","pre-text"),move_icon:icon("#iD-operation-move","pre-text operation"),merge_icon:icon("#iD-operation-merge","pre-text operation"),delete_icon:icon("#iD-operation-delete","pre-text operation"),circularize_icon:icon("#iD-operation-circularize","pre-text operation"),split_icon:icon("#iD-operation-split","pre-text operation"),orthogonalize_icon:icon("#iD-operation-orthogonalize","pre-text operation"),disconnect_icon:icon("#iD-operation-disconnect","pre-text operation"),layers_icon:icon("#iD-icon-layers","pre-text"),data_icon:icon("#iD-icon-data","pre-text"),inspect:icon("#iD-icon-inspect","pre-text"),help_icon:icon("#iD-icon-help","pre-text"),undo_icon:icon("rtl"===_mainLocalizer.textDirection()?"#iD-icon-redo":"#iD-icon-undo","pre-text"),redo_icon:icon("rtl"===_mainLocalizer.textDirection()?"#iD-icon-undo":"#iD-icon-redo","pre-text"),save_icon:icon("#iD-icon-save","pre-text"),leftclick:icon("#iD-walkthrough-mouse-left","pre-text operation"),rightclick:icon("#iD-walkthrough-mouse-right","pre-text operation"),mousewheel_icon:icon("#iD-walkthrough-mousewheel","pre-text operation"),tap_icon:icon("#iD-walkthrough-tap","pre-text operation"),doubletap_icon:icon("#iD-walkthrough-doubletap","pre-text operation"),longpress_icon:icon("#iD-walkthrough-longpress","pre-text operation"),touchdrag_icon:icon("#iD-walkthrough-touchdrag","pre-text operation"),pinch_icon:icon("#iD-walkthrough-pinch-apart","pre-text operation"),shift:uiCmd.display("⇧"),alt:uiCmd.display("⌥"),return:uiCmd.display("↵"),esc:_t("shortcuts.key.esc"),space:_t("shortcuts.key.space"),add_note_key:_t("modes.add_note.key"),help_key:_t("help.key"),shortcuts_key:_t("shortcuts.toggle.key"),save:_t("save.title"),undo:_t("undo.title"),redo:_t("redo.title"),upload:_t("commit.save"),point:_t("modes.add_point.title"),line:_t("modes.add_line.title"),area:_t("modes.add_area.title"),note:_t("modes.add_note.title"),delete:_t("operations.delete.title"),move:_t("operations.move.title"),orthogonalize:_t("operations.orthogonalize.title"),circularize:_t("operations.circularize.title"),merge:_t("operations.merge.title"),disconnect:_t("operations.disconnect.title"),split:_t("operations.split.title"),map_data:_t("map_data.title"),osm_notes:_t("map_data.layers.notes.title"),fields:_t("inspector.fields"),tags:_t("inspector.tags"),relations:_t("inspector.relations"),new_relation:_t("inspector.new_relation"),turn_restrictions:_t("presets.fields.restrictions.label"),background_settings:_t("background.description"),imagery_offset:_t("background.fix_misalignment"),start_the_walkthrough:_t("splash.walkthrough"),help:_t("help.title"),ok:_t("intro.ok")},n=t?Object.assign(t,helpStringReplacements):helpStringReplacements,_t(e,n).replace(/\`(.*?)\`/g,"<kbd>$1</kbd>")}function slugify(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}var missingStrings={};function checkKey(e,t){if(void 0===_t(e,{default:void 0})){if(missingStrings.hasOwnProperty(e))return;missingStrings[e]=t,"undefined"!=typeof console&&console.log(e+": "+t)}}function localize(o){var e,t=o.tags&&o.tags.name;t&&(e="intro.graph.name."+slugify(t),o.tags.name=_t(e,{default:t}),checkKey(e,t));var n=o.tags&&o.tags["addr:street"];return n&&(e="intro.graph.name."+slugify(n),o.tags["addr:street"]=_t(e,{default:n}),checkKey(e,n),["block_number","city","county","district","hamlet","neighbourhood","postcode","province","quarter","state","subdistrict","suburb"].forEach(function(e){var t="intro.graph."+e,n="addr:"+e,r=o.tags&&o.tags[n],i=_t(t,{default:r});i&&(null!==i.match(/^<.*>$/)?delete o.tags[n]:o.tags[n]=i)})),o}function isMostlySquare(e){for(var t=Math.cos(75*Math.PI/180),n=Math.cos(15*Math.PI/180),r=0;r<e.length;r++){var i=e[(r-1+e.length)%e.length],o=e[r],a=geoVecNormalizedDot(i,e[(r+1)%e.length],o),s=Math.abs(a);if(t<s&&s<n)return}return 1}function selectMenuItem(e,t){return e.container().select(".edit-menu .edit-menu-item-"+t)}function transitionTime(e,t){var n=geoSphericalDistance(e,t);return 0===n?0:n<80?500:1e3}function uiCurtain(g){var n=select(null),m=select(null),r=select(null);function y(e){function t(){n.attr("width",g.clientWidth).attr("height",g.clientHeight),y.cut(r.datum())}n=e.append("svg").attr("class","curtain").style("top",0).style("left",0),r=n.append("path").attr("x",0).attr("y",0).attr("class","curtain-darkness"),select(window).on("resize.curtain",t),(m=e.append("div").attr("class","tooltip")).append("div").attr("class","popover-arrow"),m.append("div").attr("class","popover-inner"),t()}function v(e){return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}return y.reveal=function(e,t,n){var r,i,o,a,s,l,c,u,p,d,f,h;return n=n||{},"string"==typeof e&&(e=select(e).node()),e&&e.getBoundingClientRect&&(e=v(e.getBoundingClientRect()),r=g.getBoundingClientRect(),e.top-=r.top,e.left-=r.left),e&&n.padding&&(e.top-=n.padding,e.left-=n.padding,e.bottom+=n.padding,e.right+=n.padding,e.height+=2*n.padding,e.width+=2*n.padding),n.tooltipBox?("string"==typeof(i=n.tooltipBox)&&(i=select(i).node()),i&&i.getBoundingClientRect&&(i=v(i.getBoundingClientRect()))):i=e,i&&t?(a=(o=t.split("**"))[0]?"<span>"+o[0]+"</span>":"",o[1]&&(a+='<span class="instruction">'+o[1]+"</span>"),a=(a=a.replace(/\*(.*?)\*/g,"<em>$1</em>")).replace(/\{br\}/g,"<br/><br/>"),n.buttonText&&n.buttonCallback&&(a+='<div class="button-section"><button href="#" class="button action">'+n.buttonText+"</button></div>"),s="curtain-tooltip popover tooltip arrowed in "+(n.tooltipClass||""),m.classed(s,!0).selectAll(".popover-inner").html(a),n.buttonText&&n.buttonCallback&&m.selectAll(".button-section .button.action").on("click",function(){event.preventDefault(),n.buttonCallback()}),l=v(m.node().getBoundingClientRect()),c=g.clientWidth,u=g.clientHeight,"intro-mouse"===n.tooltipClass&&(l.height+=80),i.top+i.height>u&&(i.height-=i.top+i.height-u),i.left+i.width>c&&(i.width-=i.left+i.width-c),f=i.top+i.height<100?(p="bottom",[i.left+i.width/2-l.width/2,i.top+i.height]):i.top>u-140?(p="top",[i.left+i.width/2-l.width/2,i.top-l.height]):(d=i.top+i.height/2-l.height/2,"rtl"===_mainLocalizer.textDirection()?i.left-200-5<70?(p="right",[i.left+i.width+5,d]):(p="left",[i.left-200-5,d]):i.left+i.width+5+200>c-70?(p="left",[i.left-200-5,d]):(p="right",[i.left+i.width+5,d])),0===n.duration&&m.classed(p)||m.call(uiToggle(!0)),m.style("top",f[1]+"px").style("left",f[0]+"px").attr("class",s+" "+p),h=0,"left"!==p&&"right"!==p||(f[1]<60?h=60-f[1]:f[1]+l.height>u-100&&(h=u-f[1]-l.height-100)),m.selectAll(".popover-inner").style("top",h+"px")):m.classed("in",!1).call(uiToggle(!1)),y.cut(e,n.duration),m},y.cut=function(e,t){r.datum(e).interrupt(),(0===t?r:r.transition().duration(t||600).ease(linear$1)).attr("d",function(e){var t=g.clientWidth,n=g.clientHeight,r="M 0,0 L 0,"+n+" L "+t+","+n+"L"+t+",0 Z";return e?r+"M"+e.left+","+e.top+"L"+e.left+","+(e.top+e.height)+"L"+(e.left+e.width)+","+(e.top+e.height)+"L"+(e.left+e.width)+","+e.top+"Z":r})},y.remove=function(){n.remove(),m.remove(),select(window).on("resize.curtain",null)},y}function uiIntroWelcome(e,t){var n=dispatch("done"),r={title:"intro.welcome.title"};function i(){t(".intro-nav-wrap .chapter-welcome",helpString("intro.welcome.practice"),{buttonText:_t("intro.ok"),buttonCallback:o})}function o(){t(".intro-nav-wrap .chapter-welcome",helpString("intro.welcome.words"),{buttonText:_t("intro.ok"),buttonCallback:a})}function a(){n.call("done"),t(".intro-nav-wrap .chapter-navigation",helpString("intro.welcome.chapters",{next:_t("intro.navigation.title")}))}return r.enter=function(){e.map().centerZoom([-85.63591,41.94285],19),t(".intro-nav-wrap .chapter-welcome",helpString("intro.welcome.welcome"),{buttonText:_t("intro.ok"),buttonCallback:i})},r.exit=function(){e.container().select(".curtain-tooltip.intro-mouse").selectAll(".counter").remove()},r.restart=function(){r.exit(),r.enter()},utilRebind(r,n,"on")}function uiIntroNavigation(i,o){var e=dispatch("done"),n=[],a="n2061",t=[-85.63591,41.94285],s="w397",l="n1834",r=[-85.63582,41.94255],c=_mainPresetIndex.field("oneway"),u=_mainPresetIndex.field("maxspeed"),p={title:"intro.navigation.title"};function d(e,t){n.push(window.setTimeout(e,t))}function f(){event.stopPropagation(),event.preventDefault()}function h(){var e=i.selectedIDs();return 1===e.length&&e[0]===a}function g(){i.enter(modeBrowse(i)),i.history().reset("initial");var e=transitionTime(t,i.map().center());e&&o(null,null,{duration:0}),i.map().centerZoomEase(t,19,e),d(function(){var t=i.map().center(),e="mouse"===i.lastPointerType()?"drag":"drag_touch",n=helpString("intro.navigation.map_info")+"{br}"+helpString("intro.navigation."+e);o(".surface",n),i.map().on("drawn.intro",function(){o(".surface",n,{duration:0})}),i.map().on("move.intro",function(){var e=i.map().center();t[0]===e[0]&&t[1]===e[1]||(i.map().on("move.intro",null),d(function(){var e;e=m,i.map().on("move.intro drawn.intro",null),e()},3e3))})},e+100)}function m(){var e=i.map().zoom(),t=helpString("intro.navigation."+("mouse"===i.lastPointerType()?"zoom":"zoom_touch"));o(".surface",t),i.map().on("drawn.intro",function(){o(".surface",t,{duration:0})}),i.map().on("move.intro",function(){i.map().zoom()!==e&&(i.map().on("move.intro",null),d(function(){var e;e=y,i.map().on("move.intro drawn.intro",null),e()},3e3))})}function y(){function e(){var e;e=v,i.map().on("drawn.intro",null),e()}o(".surface",helpString("intro.navigation.features"),{buttonText:_t("intro.ok"),buttonCallback:e}),i.map().on("drawn.intro",function(){o(".surface",helpString("intro.navigation.features"),{duration:0,buttonText:_t("intro.ok"),buttonCallback:e})})}function v(){function e(){var e;e=_,i.map().on("drawn.intro",null),e()}o(".surface",helpString("intro.navigation.points_lines_areas"),{buttonText:_t("intro.ok"),buttonCallback:e}),i.map().on("drawn.intro",function(){o(".surface",helpString("intro.navigation.points_lines_areas"),{duration:0,buttonText:_t("intro.ok"),buttonCallback:e})})}function _(){function e(){var e;e=b,i.map().on("drawn.intro",null),e()}o(".surface",helpString("intro.navigation.nodes_ways"),{buttonText:_t("intro.ok"),buttonCallback:e}),i.map().on("drawn.intro",function(){o(".surface",helpString("intro.navigation.nodes_ways"),{duration:0,buttonText:_t("intro.ok"),buttonCallback:e})})}function b(){i.enter(modeBrowse(i)),i.history().reset("initial");var e=i.hasEntity(a);function r(e){i.on("enter.intro",null),i.map().on("move.intro drawn.intro",null),i.history().on("change.intro",null),e()}e&&(o(null,null,{duration:0}),i.map().centerZoomEase(e.loc,19,500),d(function(){var e,n,t=i.hasEntity(a);t&&(e=pointBox(t.loc,i),n="mouse"===i.lastPointerType()?"click_townhall":"tap_townhall",o(e,helpString("intro.navigation."+n)),i.map().on("move.intro drawn.intro",function(){var e,t=i.hasEntity(a);t&&(e=pointBox(t.loc,i),o(e,helpString("intro.navigation."+n),{duration:0}))}),i.on("enter.intro",function(){h()&&r(w)}))},550),i.history().on("change.intro",function(){i.hasEntity(a)||r(b)}))}function w(){if(!h())return b();var e=i.hasEntity(a);if(!e)return b();function n(){r(x)}var t=pointBox(e.loc,i);function r(e){i.map().on("move.intro drawn.intro",null),i.history().on("change.intro",null),e()}o(t,helpString("intro.navigation.selected_townhall"),{buttonText:_t("intro.ok"),buttonCallback:n}),i.map().on("move.intro drawn.intro",function(){var e,t=i.hasEntity(a);t&&(e=pointBox(t.loc,i),o(e,helpString("intro.navigation.selected_townhall"),{duration:0,buttonText:_t("intro.ok"),buttonCallback:n}))}),i.history().on("change.intro",function(){i.hasEntity(a)||r(b)})}function x(){if(!h())return b();i.container().select(".inspector-wrap").on("wheel.intro",f);function e(e){i.on("exit.intro",null),i.history().on("change.intro",null),i.container().select(".inspector-wrap").on("wheel.intro",null),e()}o(".entity-editor-pane",helpString("intro.navigation.editor_townhall"),{buttonText:_t("intro.ok"),buttonCallback:function(){e(S)}}),i.on("exit.intro",function(){e(b)}),i.history().on("change.intro",function(){i.hasEntity(a)||e(b)})}function S(){if(!h())return b();i.container().select(".inspector-wrap .panewrap").style("right","0%"),i.container().select(".inspector-wrap").on("wheel.intro",f);var e=i.entity(i.selectedIDs()[0]),t=_mainPresetIndex.match(e,i.graph());function n(e){i.on("exit.intro",null),i.history().on("change.intro",null),i.container().select(".inspector-wrap").on("wheel.intro",null),e()}o(".entity-editor-pane .section-feature-type",helpString("intro.navigation.preset_townhall",{preset:t.name()}),{buttonText:_t("intro.ok"),buttonCallback:function(){n(E)}}),i.on("exit.intro",function(){n(b)}),i.history().on("change.intro",function(){i.hasEntity(a)||n(b)})}function E(){if(!h())return b();i.container().select(".inspector-wrap .panewrap").style("right","0%"),i.container().select(".inspector-wrap").on("wheel.intro",f);function e(e){i.on("exit.intro",null),i.history().on("change.intro",null),i.container().select(".inspector-wrap").on("wheel.intro",null),e()}o(".entity-editor-pane .section-preset-fields",helpString("intro.navigation.fields_townhall"),{buttonText:_t("intro.ok"),buttonCallback:function(){e(C)}}),i.on("exit.intro",function(){e(b)}),i.history().on("change.intro",function(){i.hasEntity(a)||e(b)})}function C(){if(!h())return b();var e=select(".entity-editor-pane button.close svg use").attr("href")||"#iD-icon-close";o(".entity-editor-pane",helpString("intro.navigation.close_townhall",{button:icon(e,"pre-text")})),i.on("exit.intro",function(){var e;e=A,i.on("exit.intro",null),i.history().on("change.intro",null),e()}),i.history().on("change.intro",function(){var e=select(".entity-editor-pane button.close svg use").attr("href")||"#iD-icon-close";o(".entity-editor-pane",helpString("intro.navigation.close_townhall",{button:icon(e,"pre-text")}),{duration:0})})}function A(){i.enter(modeBrowse(i)),i.history().reset("initial");var e=transitionTime(r,i.map().center());e&&o(null,null,{duration:0}),i.map().centerZoomEase(r,19,e),d(function(){o(".search-header input",helpString("intro.navigation.search_street",{name:_t("intro.graph.name.spring-street")})),i.container().select(".search-header input").on("keyup.intro",I)},e+100)}function I(){var e=i.container().select(".feature-list-item:nth-child(0n+2)"),t=e.select(".entity-name"),n=_t("intro.graph.name.spring-street");t.empty()||t.text()!==n||(o(e.node(),helpString("intro.navigation.choose_street",{name:n}),{duration:300}),i.on("exit.intro",function(){var e;e=k,i.on("exit.intro",null),i.container().select(".search-header input").on("keydown.intro",null).on("keyup.intro",null),e()}),i.container().select(".search-header input").on("keydown.intro",f,!0).on("keyup.intro",null))}function k(){if(!i.hasEntity(l)||!i.hasEntity(s))return A();function n(){r(N)}var e=pointBox(i.entity(l).loc,i);function r(e){i.map().on("move.intro drawn.intro",null),i.on("enter.intro",null),i.history().on("change.intro",null),e()}e.height=500,o(e,helpString("intro.navigation.selected_street",{name:_t("intro.graph.name.spring-street")}),{duration:600,buttonText:_t("intro.ok"),buttonCallback:n}),d(function(){i.map().on("move.intro drawn.intro",function(){var e,t=i.hasEntity(l);t&&((e=pointBox(t.loc,i)).height=500,o(e,helpString("intro.navigation.selected_street",{name:_t("intro.graph.name.spring-street")}),{duration:0,buttonText:_t("intro.ok"),buttonCallback:n}))})},600),i.on("enter.intro",function(e){if(!i.hasEntity(s))return r(A);var t=i.selectedIDs();"select"===e.id&&t.length&&t[0]===s||i.enter(modeSelect(i,[s]))}),i.history().on("change.intro",function(){i.hasEntity(l)&&i.hasEntity(s)||d(function(){r(A)},300)})}function N(){var e=select(".entity-editor-pane button.close svg use").attr("href")||"#iD-icon-close";o(".entity-editor-pane",helpString("intro.navigation.street_different_fields")+"{br}"+helpString("intro.navigation.editor_street",{button:icon(e,"pre-text"),field1:c.label(),field2:u.label()})),i.on("exit.intro",function(){var e;e=P,i.on("exit.intro",null),i.history().on("change.intro",null),e()}),i.history().on("change.intro",function(){var e=select(".entity-editor-pane button.close svg use").attr("href")||"#iD-icon-close";o(".entity-editor-pane",helpString("intro.navigation.street_different_fields")+"{br}"+helpString("intro.navigation.editor_street",{button:icon(e,"pre-text"),field1:c.label(),field2:u.label()}),{duration:0})})}function P(){e.call("done"),o(".ideditor",helpString("intro.navigation.play",{next:_t("intro.points.title")}),{tooltipBox:".intro-nav-wrap .chapter-point",buttonText:_t("intro.ok"),buttonCallback:function(){o(".ideditor")}})}return p.enter=function(){g()},p.exit=function(){n.forEach(window.clearTimeout),i.on("enter.intro exit.intro",null),i.map().on("move.intro drawn.intro",null),i.history().on("change.intro",null),i.container().select(".inspector-wrap").on("wheel.intro",null),i.container().select(".search-header input").on("keydown.intro keyup.intro",null)},p.restart=function(){p.exit(),p.enter()},utilRebind(p,e,"on")}function uiIntroPoint(i,o){var e=dispatch("done"),n=[],t=[-85.63279,41.94394],r=[-85.632422,41.944045],a=_mainPresetIndex.item("amenity/cafe"),s=null,l={title:"intro.points.title"};function c(e,t){n.push(window.setTimeout(e,t))}function u(){event.stopPropagation(),event.preventDefault()}function p(){i.enter(modeBrowse(i)),i.history().reset("initial");var e=transitionTime(t,i.map().center());e&&o(null,null,{duration:0}),i.map().centerZoomEase(t,19,e),c(function(){var e=o("button.add-point",helpString("intro.points.points_info")+"{br}"+helpString("intro.points.add_point"));s=null,e.selectAll(".popover-inner").insert("svg","span").attr("class","tooltip-illustration").append("use").attr("xlink:href","#iD-graphic-points"),i.on("enter.intro",function(e){var t;"add-point"===e.id&&(t=d,i.on("enter.intro",null),t())})},e+100)}function d(){if("add-point"!==i.mode().id)return l.restart();var e=pad(r,150,i),t="mouse"===i.lastPointerType()?"place_point":"place_point_touch";o(e,helpString("intro.points."+t)),i.map().on("move.intro drawn.intro",function(){e=pad(r,150,i),o(e,helpString("intro.points."+t),{duration:0})}),i.on("enter.intro",function(e){return"select"!==e.id?l.restart():(s=i.mode().selectedIDs()[0],t=f,i.map().on("move.intro drawn.intro",null),i.on("enter.intro",null),void t());var t})}function f(){if("select"!==i.mode().id||!s||!i.hasEntity(s))return p();function n(){var e=i.container().select(".preset-list-item:first-child");e.classed("preset-amenity-cafe")&&(i.container().select(".preset-search-input").on("keydown.intro",u,!0).on("keyup.intro",null),o(e.select(".preset-list-button").node(),helpString("intro.points.choose_cafe",{preset:a.name()}),{duration:300}),i.history().on("change.intro",function(){r(h)}))}function r(e){i.on("enter.intro",null),i.history().on("change.intro",null),i.container().select(".inspector-wrap").on("wheel.intro",null),i.container().select(".preset-search-input").on("keydown.intro keyup.intro",null),e()}i.container().select(".inspector-wrap").on("wheel.intro",u),i.container().select(".preset-search-input").on("keydown.intro",null).on("keyup.intro",n),o(".preset-search-input",helpString("intro.points.search_cafe",{preset:a.name()})),i.on("enter.intro",function(e){if(!s||!i.hasEntity(s))return r(p);var t=i.selectedIDs();"select"===e.id&&t.length&&t[0]===s||(i.enter(modeSelect(i,[s])),i.container().select(".inspector-wrap").on("wheel.intro",u),i.container().select(".preset-search-input").on("keydown.intro",null).on("keyup.intro",n),o(".preset-search-input",helpString("intro.points.search_cafe",{preset:a.name()})),i.history().on("change.intro",null))})}function h(){if("select"!==i.mode().id||!s||!i.hasEntity(s))return p();function e(e){i.on("exit.intro",null),e()}c(function(){o(".entity-editor-pane",helpString("intro.points.feature_editor"),{tooltipClass:"intro-points-describe",buttonText:_t("intro.ok"),buttonCallback:function(){e(g)}})},400),i.on("exit.intro",function(){e(y)})}function g(){if("select"!==i.mode().id||!s||!i.hasEntity(s))return p();i.container().select(".inspector-wrap .panewrap").style("right","0%");var e=helpString("intro.points.fields_info")+"{br}"+helpString("intro.points.add_name");function t(e){i.on("exit.intro",null),i.history().on("change.intro",null),e()}c(function(){i.entity(s).tags.name?o(".entity-editor-pane",e,{tooltipClass:"intro-points-describe",buttonText:_t("intro.ok"),buttonCallback:function(){t(m)}}).select(".instruction").style("display","none"):o(".entity-editor-pane",e,{tooltipClass:"intro-points-describe"})},400),i.history().on("change.intro",function(){t(m)}),i.on("exit.intro",function(){t(y)})}function m(){i.container().select(".inspector-wrap .panewrap").style("right","0%");var e=select(".entity-editor-pane button.close svg use").attr("href")||"#iD-icon-close";i.on("exit.intro",function(){var e;e=y,i.on("exit.intro",null),e()}),o(".entity-editor-pane",helpString("intro.points.add_close",{button:icon(e,"pre-text")}))}function y(){if(!s)return l.restart();var t=i.hasEntity(s);if(!t)return l.restart();var e=_mainPresetIndex.match(t,i.graph());i.replace(actionChangePreset(s,e,a)),i.enter(modeBrowse(i));var n=transitionTime(t.loc,i.map().center());n&&o(null,null,{duration:0}),i.map().centerEase(t.loc,n),c(function(){var e=pointBox(t.loc,i);o(e,helpString("intro.points.reselect"),{duration:600}),c(function(){i.map().on("move.intro drawn.intro",function(){var e=i.hasEntity(s);if(!e)return l.restart();var t=pointBox(e.loc,i);o(t,helpString("intro.points.reselect"),{duration:0})})},600),i.on("enter.intro",function(e){var t;"select"===e.id&&(t=v,i.map().on("move.intro drawn.intro",null),i.on("enter.intro",null),t())})},n+100)}function v(){if("select"!==i.mode().id||!s||!i.hasEntity(s))return e(y);function e(e){i.on("exit.intro",null),i.history().on("change.intro",null),e()}i.container().select(".inspector-wrap .panewrap").style("right","0%"),i.on("exit.intro",function(){e(y)}),i.history().on("change.intro",function(){e(_)}),c(function(){o(".entity-editor-pane",helpString("intro.points.update"),{tooltipClass:"intro-points-describe"})},400)}function _(){if("select"!==i.mode().id||!s||!i.hasEntity(s))return e(y);function e(e){i.on("exit.intro",null),e()}i.container().select(".inspector-wrap .panewrap").style("right","0%"),i.on("exit.intro",function(){e(b)}),c(function(){o(".entity-editor-pane",helpString("intro.points.update_close",{button:icon("#iD-icon-close","pre-text")}))},500)}function b(){if(!s)return l.restart();var e=i.hasEntity(s);if(!e)return l.restart();i.enter(modeBrowse(i));var t=pointBox(e.loc,i),n="mouse"===i.lastPointerType()?"rightclick":"edit_menu_touch";o(t,helpString("intro.points."+n),{duration:600}),c(function(){i.map().on("move.intro",function(){var e=i.hasEntity(s);if(!e)return l.restart();var t=pointBox(e.loc,i);o(t,helpString("intro.points."+n),{duration:0})})},600),i.on("enter.intro",function(e){var t;"select"!==e.id||1===(t=i.selectedIDs()).length&&t[0]===s&&c(function(){var e;selectMenuItem(i,"delete").node()&&(e=w,i.on("enter.intro",null),i.map().on("move.intro",null),e())},50)})}function w(){if(!s)return l.restart();if(!i.hasEntity(s))return l.restart();if(!selectMenuItem(i,"delete").node())return t(b);function t(e){i.map().on("move.intro",null),i.history().on("change.intro",null),i.on("exit.intro",null),e()}o(".edit-menu",helpString("intro.points.delete"),{padding:50}),c(function(){i.map().on("move.intro",function(){o(".edit-menu",helpString("intro.points.delete"),{duration:0,padding:50})})},300),i.on("exit.intro",function(){return s?i.hasEntity(s)?t(b):void 0:l.restart()}),i.history().on("change.intro",function(e){e.deleted().length&&t(x)})}function x(){i.history().on("change.intro",function(){var e;e=S,i.history().on("change.intro",null),e()}),o(".top-toolbar button.undo-button",helpString("intro.points.undo"))}function S(){e.call("done"),o(".ideditor",helpString("intro.points.play",{next:_t("intro.areas.title")}),{tooltipBox:".intro-nav-wrap .chapter-area",buttonText:_t("intro.ok"),buttonCallback:function(){o(".ideditor")}})}return l.enter=function(){p()},l.exit=function(){n.forEach(window.clearTimeout),i.on("enter.intro exit.intro",null),i.map().on("move.intro drawn.intro",null),i.history().on("change.intro",null),i.container().select(".inspector-wrap").on("wheel.intro",u),i.container().select(".preset-search-input").on("keydown.intro keyup.intro",null)},l.restart=function(){l.exit(),l.enter()},utilRebind(l,e,"on")}function uiIntroArea(o,a){var s,e=dispatch("done"),r=[-85.63552,41.94159],i=_mainPresetIndex.item("leisure/playground"),l=_mainPresetIndex.field("name"),c=_mainPresetIndex.field("description"),n=[],u={title:"intro.areas.title"};function p(e,t){n.push(window.setTimeout(e,t))}function d(){event.stopPropagation(),event.preventDefault()}function f(e,t,n){var r=pad(e,180*Math.pow(2,o.map().zoom()-19.5),o);a(r,t,n)}function h(){o.enter(modeBrowse(o)),o.history().reset("initial"),s=null;var e=transitionTime(r,o.map().center());e&&a(null,null,{duration:0}),o.map().centerZoomEase(r,19,e),p(function(){a("button.add-area",helpString("intro.areas.add_playground")).selectAll(".popover-inner").insert("svg","span").attr("class","tooltip-illustration").append("use").attr("xlink:href","#iD-graphic-areas"),o.on("enter.intro",function(e){var t;"add-area"===e.id&&(t=g,o.on("enter.intro",null),t())})},e+100)}function g(){if("add-area"!==o.mode().id)return u.restart();s=null,o.map().zoomEase(19.5,500),p(function(){var e="mouse"===o.lastPointerType()?"starting_node_click":"starting_node_tap",t=helpString("intro.areas.start_playground")+helpString("intro.areas."+e);f(r,t,{duration:250}),p(function(){o.map().on("move.intro drawn.intro",function(){f(r,t,{duration:0})}),o.on("enter.intro",function(e){return"draw-area"!==e.id?u.restart():(t=m,o.map().on("move.intro drawn.intro",null),o.on("enter.intro",null),void t());var t})},250)},550)}function m(){if("draw-area"!==o.mode().id)return u.restart();function n(e){o.map().on("move.intro drawn.intro",null),o.on("enter.intro",null),e()}s=null,f(r,helpString("intro.areas.continue_playground"),{duration:250}),p(function(){o.map().on("move.intro drawn.intro",function(){f(r,helpString("intro.areas.continue_playground"),{duration:0})})},250),o.on("enter.intro",function(e){if("draw-area"!==e.id)return"select"===e.id?(s=o.selectedIDs()[0],n(v)):u.restart();var t=o.hasEntity(o.selectedIDs()[0]);return t&&6<=t.nodes.length?n(y):void 0})}function y(){if("draw-area"!==o.mode().id)return u.restart();s=null;var e=helpString("intro.areas.finish_area_"+("mouse"===o.lastPointerType()?"click":"tap"))+helpString("intro.areas.finish_playground");f(r,e,{duration:250}),p(function(){o.map().on("move.intro drawn.intro",function(){f(r,e,{duration:0})})},250),o.on("enter.intro",function(e){return"draw-area"===e.id?void 0:"select"===e.id?(s=o.selectedIDs()[0],t=v,o.map().on("move.intro drawn.intro",null),o.on("enter.intro",null),void t()):u.restart();var t})}function v(){if(!s||!o.hasEntity(s))return h();var e=o.selectedIDs();function n(){var e=o.container().select(".preset-list-item:first-child");e.classed("preset-leisure-playground")&&(a(e.select(".preset-list-button").node(),helpString("intro.areas.choose_playground",{preset:i.name()}),{duration:300}),o.container().select(".preset-search-input").on("keydown.intro",d,!0).on("keyup.intro",null),o.history().on("change.intro",function(){r(_)}))}function r(e){o.container().select(".inspector-wrap").on("wheel.intro",null),o.on("enter.intro",null),o.history().on("change.intro",null),o.container().select(".preset-search-input").on("keydown.intro keyup.intro",null),e()}"select"===o.mode().id&&e.length&&e[0]===s||o.enter(modeSelect(o,[s])),o.container().select(".inspector-wrap").on("wheel.intro",d),p(function(){o.container().select(".inspector-wrap .panewrap").style("right","-100%"),o.container().select(".preset-search-input").on("keydown.intro",null).on("keyup.intro",n),a(".preset-search-input",helpString("intro.areas.search_playground",{preset:i.name()}))},400),o.on("enter.intro",function(e){if(!s||!o.hasEntity(s))return r(h);var t=o.selectedIDs();"select"===e.id&&t.length&&t[0]===s||(o.enter(modeSelect(o,[s])),o.container().select(".inspector-wrap .panewrap").style("right","-100%"),o.container().select(".inspector-wrap").on("wheel.intro",d),o.container().select(".preset-search-input").on("keydown.intro",null).on("keyup.intro",n),a(".preset-search-input",helpString("intro.areas.search_playground",{preset:i.name()})),o.history().on("change.intro",null))})}function _(){if(!s||!o.hasEntity(s))return h();var e=o.selectedIDs();if("select"!==o.mode().id||!e.length||e[0]!==s)return v();if(!o.container().select(".form-field-description").empty())return n(w);function n(e){o.container().select(".inspector-wrap").on("wheel.intro",null),o.container().select(".more-fields .combobox-input").on("click.intro",null),o.on("exit.intro",null),e()}o.container().select(".inspector-wrap").on("wheel.intro",d),p(function(){if(o.container().select(".inspector-wrap .panewrap").style("right","0%"),o.entity(s).tags.description)return n(S);var e,r,i,t=o.container().select(".more-fields").node().getBoundingClientRect();300<t.top&&(e=o.container().select(".entity-editor-pane .inspector-body"),r=e.node().scrollTop,i=r+(t.top-300),e.transition().duration(250).tween("scroll.inspector",function(){var t=this,n=d3_interpolateNumber(r,i);return function(e){t.scrollTop=n(e)}})),p(function(){a(".more-fields .combobox-input",helpString("intro.areas.add_field",{name:l.label(),description:c.label()}),{duration:300}),o.container().select(".more-fields .combobox-input").on("click.intro",function(){var e=window.setInterval(function(){o.container().select("div.combobox").empty()||(window.clearInterval(e),n(b))},300)})},300)},400),o.on("exit.intro",function(){return n(v)})}function b(){if(!s||!o.hasEntity(s))return h();var t,e=o.selectedIDs();if("select"!==o.mode().id||!e.length||e[0]!==s)return v();if(!o.container().select(".form-field-description").empty())return n(w);if(o.container().select("div.combobox").empty())return n(_);function n(e){t&&window.clearInterval(t),o.on("exit.intro",null),e()}t=window.setInterval(function(){o.container().select("div.combobox").empty()&&(window.clearInterval(t),p(function(){o.container().select(".form-field-description").empty()?n(x):n(w)},300))},300),a("div.combobox",helpString("intro.areas.choose_field",{field:c.label()}),{duration:300}),o.on("exit.intro",function(){return n(v)})}function w(){if(!s||!o.hasEntity(s))return h();var e=o.selectedIDs();if("select"!==o.mode().id||!e.length||e[0]!==s)return v();if(o.container().select(".inspector-wrap .panewrap").style("right","0%"),o.container().select(".form-field-description").empty())return t(x);function t(e){o.on("exit.intro",null),e()}o.on("exit.intro",function(){t(S)}),a(".entity-editor-pane",helpString("intro.areas.describe_playground",{button:icon("#iD-icon-close","pre-text")}),{duration:300})}function x(){if(!s||!o.hasEntity(s))return h();var e=o.selectedIDs();if("select"!==o.mode().id||!e.length||e[0]!==s)return v();function t(e){o.on("exit.intro",null),e()}o.container().select(".inspector-wrap .panewrap").style("right","0%"),a(".entity-editor-pane",helpString("intro.areas.retry_add_field",{field:c.label()}),{buttonText:_t("intro.ok"),buttonCallback:function(){t(_)}}),o.on("exit.intro",function(){return t(v)})}function S(){e.call("done"),a(".ideditor",helpString("intro.areas.play",{next:_t("intro.lines.title")}),{tooltipBox:".intro-nav-wrap .chapter-line",buttonText:_t("intro.ok"),buttonCallback:function(){a(".ideditor")}})}return u.enter=function(){h()},u.exit=function(){n.forEach(window.clearTimeout),o.on("enter.intro exit.intro",null),o.map().on("move.intro drawn.intro",null),o.history().on("change.intro",null),o.container().select(".inspector-wrap").on("wheel.intro",null),o.container().select(".preset-search-input").on("keydown.intro keyup.intro",null),o.container().select(".more-fields .combobox-input").on("click.intro",null)},u.restart=function(){u.exit(),u.enter()},utilRebind(u,e,"on")}function uiIntroLine(a,s){var e=dispatch("done"),n=[],i=null,r="w646",o=[-85.6297754121684,41.95805253325314],l=[-85.62975395449628,41.95787501510204],t=[-85.62974496187628,41.95742515554585],c=_mainPresetIndex.item("category-road_minor"),u=_mainPresetIndex.item("highway/residential"),p="w525",d="n2862",f=[-85.62390110349587,41.95397111462291],h=[-85.623867390213,41.95466987786487],g=[-85.62386254803509,41.95430395953872],m="w522",y="w1",v="n3550",_=null,b=a.entity(v).loc,w=a.entity("n5").loc,x=[-85.6219395542764,41.95228033922477],S=[-85.62219310052491,41.952505413152956],E={title:"intro.lines.title"};function C(e,t){n.push(window.setTimeout(e,t))}function A(){event.stopPropagation(),event.preventDefault()}function I(){a.enter(modeBrowse(a)),a.history().reset("initial");var e=transitionTime(o,a.map().center());e&&s(null,null,{duration:0}),a.map().centerZoomEase(o,18.5,e),C(function(){s("button.add-line",helpString("intro.lines.add_line")).selectAll(".popover-inner").insert("svg","span").attr("class","tooltip-illustration").append("use").attr("xlink:href","#iD-graphic-lines"),a.on("enter.intro",function(e){var t;"add-line"===e.id&&(t=k,a.on("enter.intro",null),t())})},e+100)}function k(){if("add-line"!==a.mode().id)return E.restart();i=null;var e=70*Math.pow(2,a.map().zoom()-18),t=pad(o,e,a);t.height=t.height+100;var n="mouse"===a.lastPointerType()?"start_line":"start_line_tap",r=helpString("intro.lines.missing_road")+"{br}"+helpString("intro.lines.line_draw_info")+helpString("intro.lines."+n);s(t,r),a.map().on("move.intro drawn.intro",function(){e=70*Math.pow(2,a.map().zoom()-18),(t=pad(o,e,a)).height=t.height+100,s(t,r,{duration:0})}),a.on("enter.intro",function(e){return"draw-line"!==e.id?E.restart():(t=N,a.map().on("move.intro drawn.intro",null),a.on("enter.intro",null),void t());var t})}function N(){if("draw-line"!==a.mode().id)return E.restart();function t(e){a.map().on("move.intro drawn.intro",null),a.history().on("change.intro",null),a.on("enter.intro",null),e()}i=a.mode().selectedIDs()[0],a.map().centerEase(l,500),C(function(){var e=200*Math.pow(2,a.map().zoom()-18.5),t=pad(l,e,a);t.height=2*t.height,s(t,helpString("intro.lines.intersect",{name:_t("intro.graph.name.flower-street")})),a.map().on("move.intro drawn.intro",function(){e=200*Math.pow(2,a.map().zoom()-18.5),(t=pad(l,e,a)).height=2*t.height,s(t,helpString("intro.lines.intersect",{name:_t("intro.graph.name.flower-street")}),{duration:0})})},550),a.history().on("change.intro",function(){var e;(e=i&&a.hasEntity(i))&&a.graph().childNodes(e).some(function(e){return a.graph().parentWays(e).some(function(e){return e.id===r})})&&t(D)}),a.on("enter.intro",function(e){return"draw-line"===e.id?void 0:"select"===e.id?void t(P):E.restart()})}function P(){select(window).on("pointerdown.intro mousedown.intro",A,!0);var e=pad(t,80,a);s(e,helpString("intro.lines.retry_intersect",{name:_t("intro.graph.name.flower-street")})),C(E.restart,3e3)}function D(){if("draw-line"!==a.mode().id)return E.restart();if(!(i&&a.hasEntity(i)))return E.restart();a.map().centerEase(t,500);var e=helpString("intro.lines.continue_line")+"{br}"+helpString("intro.lines.finish_line_"+("mouse"===a.lastPointerType()?"click":"tap"))+helpString("intro.lines.finish_road");s(".surface",e),a.on("enter.intro",function(e){return"draw-line"===e.id?void 0:"select"===e.id?(t=T,a.on("enter.intro",null),void t()):E.restart();var t})}function T(){if("select"!==a.mode().id)return E.restart();a.on("exit.intro",function(){return E.restart()});var e=a.container().select(".preset-category-road_minor .preset-list-button");if(e.empty())return E.restart();a.container().select(".inspector-wrap").on("wheel.intro",A),C(function(){a.container().select(".inspector-wrap .panewrap").style("right","-100%"),s(e.node(),helpString("intro.lines.choose_category_road",{category:c.name()})),e.on("click.intro",function(){var e;e=O,a.container().select(".inspector-wrap").on("wheel.intro",null),a.container().select(".preset-list-button").on("click.intro",null),a.on("exit.intro",null),e()})},400)}function O(){if("select"!==a.mode().id)return E.restart();a.on("exit.intro",function(){return E.restart()});var e=a.container().select(".preset-category-road_minor .subgrid");if(e.empty())return E.restart();function t(e){a.container().select(".preset-list-button").on("click.intro",null),a.on("exit.intro",null),e()}e.selectAll(":not(.preset-highway-residential) .preset-list-button").on("click.intro",function(){t(M)}),e.selectAll(".preset-highway-residential .preset-list-button").on("click.intro",function(){t(L)}),C(function(){s(e.node(),helpString("intro.lines.choose_preset_residential",{preset:u.name()}),{tooltipBox:".preset-highway-residential .preset-list-button",duration:300})},300)}function M(){if("select"!==a.mode().id)return E.restart();a.on("exit.intro",function(){return E.restart()}),a.container().select(".inspector-wrap").on("wheel.intro",A),C(function(){var e=a.container().select(".entity-editor-pane .preset-list-button");s(e.node(),helpString("intro.lines.retry_preset_residential",{preset:u.name()})),e.on("click.intro",function(){var e;e=T,a.container().select(".inspector-wrap").on("wheel.intro",null),a.container().select(".preset-list-button").on("click.intro",null),a.on("exit.intro",null),e()})},500)}function L(){a.on("exit.intro",function(){var e;e=R,a.on("exit.intro",null),e()}),C(function(){s(".entity-editor-pane",helpString("intro.lines.name_road",{button:icon("#iD-icon-close","pre-text")}),{tooltipClass:"intro-lines-name_road"})},500)}function R(){a.history().checkpoint("doneAddLine"),C(function(){s(".surface",helpString("intro.lines.did_name_road"),{buttonText:_t("intro.ok"),buttonCallback:function(){$()}})},500)}function $(){if(a.history().reset("doneAddLine"),!a.hasEntity(p)||!a.hasEntity(d))return E.restart();var e=transitionTime(g,a.map().center());e&&s(null,null,{duration:0}),a.map().centerZoomEase(g,19,e),C(function(){function n(){var e;e=F,a.map().on("move.intro drawn.intro",null),e()}var e=250*Math.pow(2,a.map().zoom()-19),t=pad(g,e,a);s(t,helpString("intro.lines.update_line"),{buttonText:_t("intro.ok"),buttonCallback:n}),a.map().on("move.intro drawn.intro",function(){var e=250*Math.pow(2,a.map().zoom()-19),t=pad(g,e,a);s(t,helpString("intro.lines.update_line"),{duration:0,buttonText:_t("intro.ok"),buttonCallback:n})})},e+100)}function F(){if(a.history().reset("doneAddLine"),!a.hasEntity(p)||!a.hasEntity(d))return E.restart();var e=40*Math.pow(2,a.map().zoom()-19),t=pad(f,e,a),n=helpString("intro.lines.add_node"+("mouse"===a.lastPointerType()?"":"_touch"));function r(e){a.map().on("move.intro drawn.intro",null),a.history().on("change.intro",null),a.on("enter.intro",null),e()}s(t,n),a.map().on("move.intro drawn.intro",function(){var e=40*Math.pow(2,a.map().zoom()-19),t=pad(f,e,a);s(t,n,{duration:0})}),a.history().on("change.intro",function(e){return a.hasEntity(p)&&a.hasEntity(d)?void(1===e.created().length&&C(function(){r(B)},500)):r($)}),a.on("enter.intro",function(e){"select"!==e.id&&r($)})}function B(){if(!a.hasEntity(p)||!a.hasEntity(d))return r($);var e=100*Math.pow(2,a.map().zoom()-19),t=pad(h,e,a),n=helpString("intro.lines.start_drag_endpoint"+("mouse"===a.lastPointerType()?"":"_touch"))+helpString("intro.lines.drag_to_intersection");function r(e){a.map().on("move.intro drawn.intro",null),e()}s(t,n),a.map().on("move.intro drawn.intro",function(){if(!a.hasEntity(p)||!a.hasEntity(d))return r($);var e=100*Math.pow(2,a.map().zoom()-19),t=pad(h,e,a);s(t,n,{duration:0}),geoSphericalDistance(a.entity(d).loc,h)<=4&&r(j)})}function j(){if(!a.hasEntity(p)||!a.hasEntity(d))return r($);var e=100*Math.pow(2,a.map().zoom()-19),t=pad(h,e,a),n=helpString("intro.lines.spot_looks_good")+helpString("intro.lines.finish_drag_endpoint"+("mouse"===a.lastPointerType()?"":"_touch"));function r(e){a.map().on("move.intro drawn.intro",null),a.on("enter.intro",null),e()}s(t,n),a.map().on("move.intro drawn.intro",function(){if(!a.hasEntity(p)||!a.hasEntity(d))return r($);var e=100*Math.pow(2,a.map().zoom()-19),t=pad(h,e,a);s(t,n,{duration:0}),4<geoSphericalDistance(a.entity(d).loc,h)&&r(B)}),a.on("enter.intro",function(){r(G)})}function G(){if(!a.hasEntity(p)||!a.hasEntity(d))return n($);-1===a.selectedIDs().indexOf(p)&&a.enter(modeSelect(a,[p]));var e=80*Math.pow(2,a.map().zoom()-19),t=pad(g,e,a);function n(e){a.map().on("move.intro drawn.intro",null),a.history().on("change.intro",null),a.on("enter.intro",null),e()}s(t,helpString("intro.lines.start_drag_midpoint")),a.map().on("move.intro drawn.intro",function(){if(!a.hasEntity(p)||!a.hasEntity(d))return n($);var e=80*Math.pow(2,a.map().zoom()-19),t=pad(g,e,a);s(t,helpString("intro.lines.start_drag_midpoint"),{duration:0})}),a.history().on("change.intro",function(e){1===e.created().length&&n(z)}),a.on("enter.intro",function(e){"select"!==e.id&&a.enter(modeSelect(a,[p]))})}function z(){if(!a.hasEntity(p)||!a.hasEntity(d))return r($);var e=100*Math.pow(2,a.map().zoom()-19),t=pad(h,e,a);t.height+=400;function n(){a.history().checkpoint("doneUpdateLine"),r(V)}function r(e){a.map().on("move.intro drawn.intro",null),e()}s(t,helpString("intro.lines.continue_drag_midpoint"),{buttonText:_t("intro.ok"),buttonCallback:n}),a.map().on("move.intro drawn.intro",function(){if(!a.hasEntity(p)||!a.hasEntity(d))return r($);var e=100*Math.pow(2,a.map().zoom()-19),t=pad(h,e,a);t.height+=400,s(t,helpString("intro.lines.continue_drag_midpoint"),{duration:0,buttonText:_t("intro.ok"),buttonCallback:n})})}function V(){if(a.history().reset("doneUpdateLine"),a.enter(modeBrowse(a)),!a.hasEntity(m)||!a.hasEntity(y)||!a.hasEntity(v))return E.restart();var e=transitionTime(x,a.map().center());function r(e){a.map().on("move.intro drawn.intro",null),a.history().on("change.intro",null),e()}e&&s(null,null,{duration:0}),a.map().centerZoomEase(x,18,e),C(function(){var e=200*Math.pow(2,a.map().zoom()-18),t=pad(x,e,a);t.top-=200,t.height+=400;function n(){r(q)}s(t,helpString("intro.lines.delete_lines",{street:_t("intro.graph.name.12th-avenue")}),{buttonText:_t("intro.ok"),buttonCallback:n}),a.map().on("move.intro drawn.intro",function(){var e=200*Math.pow(2,a.map().zoom()-18),t=pad(x,e,a);t.top-=200,t.height+=400,s(t,helpString("intro.lines.delete_lines",{street:_t("intro.graph.name.12th-avenue")}),{duration:0,buttonText:_t("intro.ok"),buttonCallback:n})}),a.history().on("change.intro",function(){C(function(){r(V)},500)})},e+100)}function q(){a.history().reset("doneUpdateLine"),a.enter(modeBrowse(a)),a.map().centerZoomEase(b,18,500);var n=helpString("intro.lines.split_street",{street1:_t("intro.graph.name.11th-avenue"),street2:_t("intro.graph.name.washington-street")})+helpString("intro.lines."+("mouse"===a.lastPointerType()?"rightclick_intersection":"edit_menu_intersection_touch"));function r(e){a.map().on("move.intro drawn.intro",null),a.on("enter.intro",null),a.history().on("change.intro",null),e()}C(function(){var e=60*Math.pow(2,a.map().zoom()-18),t=pad(b,e,a);s(t,n),a.map().on("move.intro drawn.intro",function(){var e=60*Math.pow(2,a.map().zoom()-18),t=pad(b,e,a);s(t,n,{duration:0})}),a.on("enter.intro",function(e){var t;"select"!==e.id||1===(t=a.selectedIDs()).length&&t[0]===v&&C(function(){selectMenuItem(a,"split").node()&&r(U)},50)}),a.history().on("change.intro",function(){C(function(){r(V)},300)})},600)}function U(){if(!a.hasEntity(m)||!a.hasEntity(y)||!a.hasEntity(v))return n(V);if(!selectMenuItem(a,"split").node())return n(q);var t=!1;function n(e){a.map().on("move.intro drawn.intro",null),a.history().on("change.intro",null),e()}_=null,s(".edit-menu",helpString("intro.lines.split_intersection",{street:_t("intro.graph.name.washington-street")}),{padding:50}),a.map().on("move.intro drawn.intro",function(){var e=selectMenuItem(a,"split").node();if(!t&&!e)return n(q);s(".edit-menu",helpString("intro.lines.split_intersection",{street:_t("intro.graph.name.washington-street")}),{duration:0,padding:50})}),a.history().on("change.intro",function(e){t=!0,C(function(){a.history().undoAnnotation()===_t("operations.split.annotation.line")?(_=e.created()[0].id,n(H)):(_=null,n(W))},300)})}function W(){a.enter(modeBrowse(a)),a.map().centerZoomEase(b,18,500);function n(){var e;e=q,a.map().on("move.intro drawn.intro",null),e()}var e=60*Math.pow(2,a.map().zoom()-18),t=pad(b,e,a);s(t,helpString("intro.lines.retry_split"),{buttonText:_t("intro.ok"),buttonCallback:n}),a.map().on("move.intro drawn.intro",function(){var e=60*Math.pow(2,a.map().zoom()-18),t=pad(b,e,a);s(t,helpString("intro.lines.retry_split"),{duration:0,buttonText:_t("intro.ok"),buttonCallback:n})})}function H(){if(!(_&&a.hasEntity(_)&&a.hasEntity(m)&&a.hasEntity(y)&&a.hasEntity(v)))return i(q);var n="intro.lines.did_split_"+(1<a.selectedIDs().length?"multi":"single"),r=_t("intro.graph.name.washington-street"),e=200*Math.pow(2,a.map().zoom()-18),t=pad(S,e,a);function i(e){a.map().on("move.intro drawn.intro",null),a.on("enter.intro",null),a.history().on("change.intro",null),e()}t.width=t.width/2,s(t,helpString(n,{street1:r,street2:r}),{duration:500}),C(function(){a.map().centerZoomEase(S,18,500),a.map().on("move.intro drawn.intro",function(){var e=200*Math.pow(2,a.map().zoom()-18),t=pad(S,e,a);t.width=t.width/2,s(t,helpString(n,{street1:r,street2:r}),{duration:0})})},600),a.on("enter.intro",function(){var e=a.selectedIDs();1===e.length&&e[0]===_&&i(Q)}),a.history().on("change.intro",function(){if(!(_&&a.hasEntity(_)&&a.hasEntity(m)&&a.hasEntity(y)&&a.hasEntity(v)))return i(q)})}function Q(){if(!(_&&a.hasEntity(_)&&a.hasEntity(m)&&a.hasEntity(y)&&a.hasEntity(v)))return o(q);var e=a.selectedIDs(),i=-1!==e.indexOf(_),t=-1!==e.indexOf(y);if(i&&t)return o(X);if(!i&&!t)return o(H);function o(e){a.map().on("move.intro drawn.intro",null),a.on("enter.intro",null),a.history().on("change.intro",null),e()}a.map().centerZoomEase(S,18,500),C(function(){var e,t,n,r;i?(e=_t("intro.graph.name.washington-street"),t=_t("intro.graph.name.12th-avenue"),n=60*Math.pow(2,a.map().zoom()-18),(r=pad(w,n,a)).width*=3):(e=_t("intro.graph.name.12th-avenue"),t=_t("intro.graph.name.washington-street"),n=200*Math.pow(2,a.map().zoom()-18),(r=pad(S,n,a)).width/=2),s(r,helpString("intro.lines.multi_select",{selected:e,other1:t})+" "+helpString("intro.lines.add_to_selection_"+("mouse"===a.lastPointerType()?"click":"touch"),{selected:e,other2:t})),a.map().on("move.intro drawn.intro",function(){i?(e=_t("intro.graph.name.washington-street"),t=_t("intro.graph.name.12th-avenue"),n=60*Math.pow(2,a.map().zoom()-18),(r=pad(w,n,a)).width*=3):(e=_t("intro.graph.name.12th-avenue"),t=_t("intro.graph.name.washington-street"),n=200*Math.pow(2,a.map().zoom()-18),(r=pad(S,n,a)).width/=2),s(r,helpString("intro.lines.multi_select",{selected:e,other1:t})+" "+helpString("intro.lines.add_to_selection_"+("mouse"===a.lastPointerType()?"click":"touch"),{selected:e,other2:t}),{duration:0})}),a.on("enter.intro",function(){o(Q)}),a.history().on("change.intro",function(){if(!(_&&a.hasEntity(_)&&a.hasEntity(m)&&a.hasEntity(y)&&a.hasEntity(v)))return o(q)})},600)}function X(){if(!(_&&a.hasEntity(_)&&a.hasEntity(m)&&a.hasEntity(y)&&a.hasEntity(v)))return r(q);var e=200*Math.pow(2,a.map().zoom()-18),t=pad(S,e,a),n=helpString("intro.lines.multi_select_success")+helpString("intro.lines.multi_"+("mouse"===a.lastPointerType()?"rightclick":"edit_menu_touch"));function r(e){a.map().on("move.intro drawn.intro",null),a.ui().editMenu().on("toggled.intro",null),a.history().on("change.intro",null),e()}s(t,n),a.map().on("move.intro drawn.intro",function(){var e=200*Math.pow(2,a.map().zoom()-18),t=pad(S,e,a);s(t,n,{duration:0})}),a.ui().editMenu().on("toggled.intro",function(e){e&&C(function(){var e=a.selectedIDs();if(2!==e.length||-1===e.indexOf(y)||-1===e.indexOf(_))return 1===e.length&&-1!==e.indexOf(_)?r(Q):r(H);selectMenuItem(a,"delete").node()&&r(Y)},300)}),a.history().on("change.intro",function(){if(!(_&&a.hasEntity(_)&&a.hasEntity(m)&&a.hasEntity(y)&&a.hasEntity(v)))return r(q)})}function Y(){if(!(_&&a.hasEntity(_)&&a.hasEntity(m)&&a.hasEntity(y)&&a.hasEntity(v)))return e(q);if(!selectMenuItem(a,"delete").node())return e(X);function e(e){a.map().on("move.intro drawn.intro",null),a.on("exit.intro",null),a.history().on("change.intro",null),e()}s(".edit-menu",helpString("intro.lines.multi_delete"),{padding:50}),a.map().on("move.intro drawn.intro",function(){s(".edit-menu",helpString("intro.lines.multi_delete"),{duration:0,padding:50})}),a.on("exit.intro",function(){if(a.hasEntity(_)||a.hasEntity(y))return e(Q)}),a.history().on("change.intro",function(){a.hasEntity(_)||a.hasEntity(y)?e(K):e(Z)})}function K(){a.enter(modeBrowse(a));var e=200*Math.pow(2,a.map().zoom()-18),t=pad(S,e,a);s(t,helpString("intro.lines.retry_delete"),{buttonText:_t("intro.ok"),buttonCallback:function(){Q()}})}function Z(){e.call("done"),s(".ideditor",helpString("intro.lines.play",{next:_t("intro.buildings.title")}),{tooltipBox:".intro-nav-wrap .chapter-building",buttonText:_t("intro.ok"),buttonCallback:function(){s(".ideditor")}})}return E.enter=function(){I()},E.exit=function(){n.forEach(window.clearTimeout),select(window).on("pointerdown.intro mousedown.intro",null,!0),a.on("enter.intro exit.intro",null),a.map().on("move.intro drawn.intro",null),a.history().on("change.intro",null),a.container().select(".inspector-wrap").on("wheel.intro",null),a.container().select(".preset-list-button").on("click.intro",null)},E.restart=function(){E.exit(),E.enter()},utilRebind(E,e,"on")}function uiIntroBuilding(i,o){var e=dispatch("done"),a=[-85.62815,41.95638],r=[-85.62732,41.95347],t=_mainPresetIndex.item("category-building"),s=_mainPresetIndex.item("building/house"),l=_mainPresetIndex.item("man_made/storage_tank"),n=[],c=null,u=null,p={title:"intro.buildings.title"};function d(e,t){n.push(window.setTimeout(e,t))}function f(){event.stopPropagation(),event.preventDefault()}function h(e,t,n){var r=pad(e,160*Math.pow(2,i.map().zoom()-20),i);o(r,t,n)}function g(e,t,n){var r=pad(e,190*Math.pow(2,i.map().zoom()-19.5),i);o(r,t,n)}function m(){i.enter(modeBrowse(i)),i.history().reset("initial"),c=null;var e=transitionTime(a,i.map().center());e&&o(null,null,{duration:0}),i.map().centerZoomEase(a,19,e),d(function(){o("button.add-area",helpString("intro.buildings.add_building")).selectAll(".popover-inner").insert("svg","span").attr("class","tooltip-illustration").append("use").attr("xlink:href","#iD-graphic-buildings"),i.on("enter.intro",function(e){var t;"add-area"===e.id&&(t=y,i.on("enter.intro",null),t())})},e+100)}function y(){if("add-area"!==i.mode().id)return t(m);function t(e){i.map().on("move.intro drawn.intro",null),i.on("enter.intro",null),e()}c=null,i.map().zoomEase(20,500),d(function(){var e=helpString("intro.buildings.start_building")+helpString("intro.buildings.building_corner_"+("mouse"===i.lastPointerType()?"click":"tap"));h(a,e),i.map().on("move.intro drawn.intro",function(){h(a,e,{duration:0})}),i.on("enter.intro",function(e){return"draw-area"!==e.id?p.restart():void t(v)})},550)}function v(){if("draw-area"!==i.mode().id)return r(m);c=null;var e=helpString("intro.buildings.continue_building")+"{br}"+helpString("intro.areas.finish_area_"+("mouse"===i.lastPointerType()?"click":"tap"))+helpString("intro.buildings.finish_building");function r(e){i.map().on("move.intro drawn.intro",null),i.on("enter.intro",null),e()}h(a,e),i.map().on("move.intro drawn.intro",function(){h(a,e,{duration:0})}),i.on("enter.intro",function(e){if("draw-area"!==e.id){if("select"!==e.id)return p.restart();var t=i.graph(),n=i.entity(i.selectedIDs()[0]);return isMostlySquare(utilArrayUniq(t.childNodes(n)).map(function(e){return i.projection(e.loc)}))?(c=n.id,r(b)):r(_)}})}function _(){function e(){var e;e=m,i.map().on("move.intro drawn.intro",null),e()}h(a,helpString("intro.buildings.retry_building"),{buttonText:_t("intro.ok"),buttonCallback:e}),i.map().on("move.intro drawn.intro",function(){h(a,helpString("intro.buildings.retry_building"),{duration:0,buttonText:_t("intro.ok"),buttonCallback:e})})}function b(){if(!c||!i.hasEntity(c))return m();var e=i.selectedIDs();function n(e){i.container().select(".inspector-wrap").on("wheel.intro",null),i.container().select(".preset-list-button").on("click.intro",null),i.on("enter.intro",null),e()}"select"===i.mode().id&&e.length&&e[0]===c||i.enter(modeSelect(i,[c])),i.container().select(".inspector-wrap").on("wheel.intro",f),d(function(){i.container().select(".inspector-wrap .panewrap").style("right","-100%");var e=i.container().select(".preset-category-building .preset-list-button");o(e.node(),helpString("intro.buildings.choose_category_building",{category:t.name()})),e.on("click.intro",function(){e.on("click.intro",null),n(w)})},400),i.on("enter.intro",function(e){if(!c||!i.hasEntity(c))return n(m);var t=i.selectedIDs();return"select"===e.id&&t.length&&t[0]===c?void 0:n(b)})}function w(){if(!c||!i.hasEntity(c))return m();var e=i.selectedIDs();function n(e){i.container().select(".inspector-wrap").on("wheel.intro",null),i.container().select(".preset-list-button").on("click.intro",null),i.on("enter.intro",null),e()}"select"===i.mode().id&&e.length&&e[0]===c||i.enter(modeSelect(i,[c])),i.container().select(".inspector-wrap").on("wheel.intro",f),d(function(){i.container().select(".inspector-wrap .panewrap").style("right","-100%");var e=i.container().select(".preset-building-house .preset-list-button");o(e.node(),helpString("intro.buildings.choose_preset_house",{preset:s.name()}),{duration:300}),e.on("click.intro",function(){e.on("click.intro",null),n(x)})},400),i.on("enter.intro",function(e){if(!c||!i.hasEntity(c))return n(m);var t=i.selectedIDs();return"select"===e.id&&t.length&&t[0]===c?void 0:n(b)})}function x(){if(!c||!i.hasEntity(c))return m();var e=i.selectedIDs();"select"===i.mode().id&&e.length&&e[0]===c||i.enter(modeSelect(i,[c])),i.history().checkpoint("hasHouse"),i.on("exit.intro",function(){var e;e=S,i.on("exit.intro",null),e()}),d(function(){o(".entity-editor-pane",helpString("intro.buildings.close",{button:icon("#iD-icon-close","pre-text")}))},500)}function S(){if(!c)return p.restart();i.enter(modeBrowse(i)),i.history().reset("hasHouse");var e=i.map().zoom();function n(e){i.on("enter.intro",null),i.map().on("move.intro drawn.intro",null),i.history().on("change.intro",null),e()}e<20&&(e=20),i.map().centerZoomEase(a,e,500),i.on("enter.intro",function(e){var t;"select"!==e.id||1===(t=i.selectedIDs()).length&&t[0]===c&&d(function(){selectMenuItem(i,"orthogonalize").node()&&n(E)},50)}),i.map().on("move.intro drawn.intro",function(){var e=helpString("intro.buildings."+("mouse"===i.lastPointerType()?"rightclick_building":"edit_menu_building_touch"));h(a,e,{duration:0})}),i.history().on("change.intro",function(){n(S)})}function E(){if(!c)return p.restart();if(!i.hasEntity(c))return n(S);if(!selectMenuItem(i,"orthogonalize").node())return n(S);var t=!1;function n(e){i.on("enter.intro",null),i.map().on("move.intro",null),i.history().on("change.intro",null),e()}o(".edit-menu",helpString("intro.buildings.square_building"),{padding:50}),i.on("enter.intro",function(e){"browse"===e.id?n(S):"move"!==e.id&&"rotate"!==e.id||n(C)}),i.map().on("move.intro",function(){var e=selectMenuItem(i,"orthogonalize").node();if(!t&&!e)return n(S);o(".edit-menu",helpString("intro.buildings.square_building"),{duration:0,padding:50})}),i.history().on("change.intro",function(){t=!0,i.history().on("change.intro",null),d(function(){i.history().undoAnnotation()===_t("operations.orthogonalize.annotation.feature.single")?n(A):n(C)},500)})}function C(){i.enter(modeBrowse(i)),h(a,helpString("intro.buildings.retry_square"),{buttonText:_t("intro.ok"),buttonCallback:function(){S()}})}function A(){i.history().checkpoint("doneSquare"),h(a,helpString("intro.buildings.done_square"),{buttonText:_t("intro.ok"),buttonCallback:function(){I()}})}function I(){i.enter(modeBrowse(i)),i.history().reset("doneSquare"),u=null;var e=transitionTime(r,i.map().center());e&&o(null,null,{duration:0}),i.map().centerZoomEase(r,19.5,e),d(function(){o("button.add-area",helpString("intro.buildings.add_tank")),i.on("enter.intro",function(e){var t;"add-area"===e.id&&(t=k,i.on("enter.intro",null),t())})},e+100)}function k(){if("add-area"!==i.mode().id)return t(I);function t(e){i.map().on("move.intro drawn.intro",null),i.on("enter.intro",null),e()}u=null,d(function(){var e=helpString("intro.buildings.start_tank")+helpString("intro.buildings.tank_edge_"+("mouse"===i.lastPointerType()?"click":"tap"));g(r,e),i.map().on("move.intro drawn.intro",function(){g(r,e,{duration:0})}),i.on("enter.intro",function(e){return"draw-area"!==e.id?p.restart():void t(N)})},550)}function N(){if("draw-area"!==i.mode().id)return t(I);u=null;var e=helpString("intro.buildings.continue_tank")+"{br}"+helpString("intro.areas.finish_area_"+("mouse"===i.lastPointerType()?"click":"tap"))+helpString("intro.buildings.finish_tank");function t(e){i.map().on("move.intro drawn.intro",null),i.on("enter.intro",null),e()}g(r,e),i.map().on("move.intro drawn.intro",function(){g(r,e,{duration:0})}),i.on("enter.intro",function(e){return"draw-area"===e.id?void 0:"select"===e.id?(u=i.selectedIDs()[0],t(P)):t(I)})}function P(){if(!u||!i.hasEntity(u))return I();var e=i.selectedIDs();function n(){var e=i.container().select(".preset-list-item:first-child");e.classed("preset-man_made-storage_tank")&&(o(e.select(".preset-list-button").node(),helpString("intro.buildings.choose_tank",{preset:l.name()}),{duration:300}),i.container().select(".preset-search-input").on("keydown.intro",f,!0).on("keyup.intro",null),i.history().on("change.intro",function(){r(D)}))}function r(e){i.container().select(".inspector-wrap").on("wheel.intro",null),i.on("enter.intro",null),i.history().on("change.intro",null),i.container().select(".preset-search-input").on("keydown.intro keyup.intro",null),e()}"select"===i.mode().id&&e.length&&e[0]===u||i.enter(modeSelect(i,[u])),i.container().select(".inspector-wrap").on("wheel.intro",f),d(function(){i.container().select(".inspector-wrap .panewrap").style("right","-100%"),i.container().select(".preset-search-input").on("keydown.intro",null).on("keyup.intro",n),o(".preset-search-input",helpString("intro.buildings.search_tank",{preset:l.name()}))},400),i.on("enter.intro",function(e){if(!u||!i.hasEntity(u))return r(I);var t=i.selectedIDs();"select"===e.id&&t.length&&t[0]===u||(i.enter(modeSelect(i,[u])),i.container().select(".inspector-wrap .panewrap").style("right","-100%"),i.container().select(".inspector-wrap").on("wheel.intro",f),i.container().select(".preset-search-input").on("keydown.intro",null).on("keyup.intro",n),o(".preset-search-input",helpString("intro.buildings.search_tank",{preset:l.name()})),i.history().on("change.intro",null))})}function D(){if(!u||!i.hasEntity(u))return I();var e=i.selectedIDs();"select"===i.mode().id&&e.length&&e[0]===u||i.enter(modeSelect(i,[u])),i.history().checkpoint("hasTank"),i.on("exit.intro",function(){var e;e=T,i.on("exit.intro",null),e()}),d(function(){o(".entity-editor-pane",helpString("intro.buildings.close",{button:icon("#iD-icon-close","pre-text")}))},500)}function T(){if(!u)return n(I);function n(e){i.on("enter.intro",null),i.map().on("move.intro drawn.intro",null),i.history().on("change.intro",null),e()}i.enter(modeBrowse(i)),i.history().reset("hasTank"),i.map().centerEase(r,500),d(function(){i.on("enter.intro",function(e){var t;"select"!==e.id||1===(t=i.selectedIDs()).length&&t[0]===u&&d(function(){selectMenuItem(i,"circularize").node()&&n(O)},50)});var e=helpString("intro.buildings."+("mouse"===i.lastPointerType()?"rightclick_tank":"edit_menu_tank_touch"));g(r,e),i.map().on("move.intro drawn.intro",function(){g(r,e,{duration:0})}),i.history().on("change.intro",function(){n(T)})},600)}function O(){if(!u)return p.restart();if(!i.hasEntity(u))return n(T);if(!selectMenuItem(i,"circularize").node())return n(T);var t=!1;function n(e){i.on("enter.intro",null),i.map().on("move.intro",null),i.history().on("change.intro",null),e()}o(".edit-menu",helpString("intro.buildings.circle_tank"),{padding:50}),i.on("enter.intro",function(e){"browse"===e.id?n(T):"move"!==e.id&&"rotate"!==e.id||n(M)}),i.map().on("move.intro",function(){var e=selectMenuItem(i,"circularize").node();if(!t&&!e)return n(T);o(".edit-menu",helpString("intro.buildings.circle_tank"),{duration:0,padding:50})}),i.history().on("change.intro",function(){t=!0,i.history().on("change.intro",null),d(function(){i.history().undoAnnotation()===_t("operations.circularize.annotation.single")?n(L):n(M)},500)})}function M(){i.enter(modeBrowse(i)),g(r,helpString("intro.buildings.retry_circle"),{buttonText:_t("intro.ok"),buttonCallback:function(){T()}})}function L(){e.call("done"),o(".ideditor",helpString("intro.buildings.play",{next:_t("intro.startediting.title")}),{tooltipBox:".intro-nav-wrap .chapter-startEditing",buttonText:_t("intro.ok"),buttonCallback:function(){o(".ideditor")}})}return p.enter=function(){m()},p.exit=function(){n.forEach(window.clearTimeout),i.on("enter.intro exit.intro",null),i.map().on("move.intro drawn.intro",null),i.history().on("change.intro",null),i.container().select(".inspector-wrap").on("wheel.intro",null),i.container().select(".preset-search-input").on("keydown.intro keyup.intro",null),i.container().select(".more-fields .combobox-input").on("click.intro",null)},p.restart=function(){p.exit(),p.enter()},utilRebind(p,e,"on")}function uiIntroStartEditing(t,e){var n=dispatch("done","startEditing"),r=select(null),i={title:"intro.startediting.title"};function o(){e(".map-control.help-control",helpString("intro.startediting.help"),{buttonText:_t("intro.ok"),buttonCallback:function(){e(".map-control.help-control",helpString("intro.startediting.shortcuts"),{buttonText:_t("intro.ok"),buttonCallback:function(){t.container().selectAll(".shaded").remove(),e(".top-toolbar button.save",helpString("intro.startediting.save"),{buttonText:_t("intro.ok"),buttonCallback:function(){!function(){t.container().selectAll(".shaded").remove(),(r=uiModal(t.container())).select(".modal").attr("class","modal-splash modal"),r.selectAll(".close").remove();var e=r.select(".content").attr("class","fillL").append("button").attr("class","modal-section huge-modal-button").on("click",function(){r.remove()});e.append("svg").attr("class","illustration").append("use").attr("xlink:href","#iD-logo-walkthrough"),e.append("h2").text(_t("intro.startediting.start")),n.call("startEditing")}()}})}})}})}return i.enter=function(){o()},i.exit=function(){r.remove(),t.container().selectAll(".shaded").remove()},utilRebind(i,n,"on")}var chapterUi={welcome:uiIntroWelcome,navigation:uiIntroNavigation,point:uiIntroPoint,area:uiIntroArea,line:uiIntroLine,building:uiIntroBuilding,startEditing:uiIntroStartEditing},chapterFlow=["welcome","navigation","point","area","line","building","startEditing"];function uiIntro(v){var _,b="EsriWorldImageryClarity",w={};function r(e){v.enter(modeBrowse(v));var t=v.connection(),n=v.history().toJSON(),r=window.location.hash,i=v.map().center(),o=v.map().zoom(),a=v.background().baseLayerSource(),s=v.background().overlayLayerSources(),l=v.container().selectAll(".main-map .layer-background").style("opacity"),c=t&&t.caches(),u=v.history().graph().base().entities;v.ui().sidebar.expand(),v.container().selectAll("button.sidebar-toggle").classed("disabled",!0),v.inIntro(!0),t&&t.toggle(!1).reset(),v.history().reset(),v.history().merge(Object.values(coreGraph().load(w).entities)),v.history().checkpoint("initial");var p=v.background().findSource(b);p?v.background().baseLayerSource(p):v.background().bing(),s.forEach(function(e){return v.background().toggleOverlayLayer(e)}),v.layers().all().forEach(function(e){"function"==typeof e.layer.enabled&&e.layer.enabled("osm"===e.id)}),v.container().selectAll(".main-map .layer-background").style("opacity",1);var d=uiCurtain(v.container().node());e.call(d),corePreferences("walkthrough_started","yes");var f=(corePreferences("walkthrough_progress")||"").split(";").filter(Boolean),h=chapterFlow.map(function(t,n){var r=chapterUi[t](v,d.reveal).on("done",function(){var e;m.filter(function(e){return e.title===r.title}).classed("finished",!0),n<chapterFlow.length-1&&(e=chapterFlow[n+1],v.container().select("button.chapter-"+e).classed("next",!0)),f.push(t),corePreferences("walkthrough_progress",utilArrayUniq(f).join(";"))});return r});h[h.length-1].on("startEditing",function(){f.push("startEditing"),corePreferences("walkthrough_progress",utilArrayUniq(f).join(";")),utilArrayDifference(chapterFlow,f).length||corePreferences("walkthrough_completed","yes"),d.remove(),g.remove(),v.container().selectAll(".main-map .layer-background").style("opacity",l),v.container().selectAll("button.sidebar-toggle").classed("disabled",!1),t&&t.toggle(!0).reset().caches(c),v.history().reset().merge(Object.values(u)),v.background().baseLayerSource(a),s.forEach(function(e){return v.background().toggleOverlayLayer(e)}),n&&v.history().fromJSON(n,!1),v.map().centerZoom(i,o),window.location.replace(r),v.inIntro(!1)});var g=e.append("div").attr("class","intro-nav-wrap fillD");g.append("svg").attr("class","intro-nav-wrap-logo").append("use").attr("xlink:href","#iD-logo-walkthrough");var m=g.append("div").attr("class","joined").selectAll("button.chapter").data(h).enter().append("button").attr("class",function(e,t){return"chapter chapter-"+chapterFlow[t]}).on("click",y);function y(e){_&&_.exit(),v.enter(modeBrowse(v)),(_=e).enter(),m.classed("next",!1).classed("active",function(e){return e.title===_.title})}m.append("span").text(function(e){return _t(e.title)}),m.append("span").attr("class","status").call(svgIcon("rtl"===_mainLocalizer.textDirection()?"#iD-icon-backward":"#iD-icon-forward","inline")),y(h[0])}return function(n){_mainFileFetcher.get("intro_graph").then(function(e){for(var t in e)w[t]||(w[t]=osmEntity(localize(e[t])));n.call(r)}).catch(function(){})}}function uiIssuesInfo(a){var s={id:"warnings",count:0,iconID:"iD-icon-alert",descriptionID:"issues.warnings_and_errors"},l={id:"resolved",count:0,iconID:"iD-icon-apply",descriptionID:"issues.user_resolved_issues"};function t(e){var t,n=[],r=a.validator().getIssues({what:corePreferences("validate-what")||"edited",where:corePreferences("validate-where")||"all"});r.length&&(s.count=r.length,n.push(s)),"all"!==corePreferences("validate-what")||(t=a.validator().getResolvedIssues()).length&&(l.count=t.length,n.push(l));var i=e.selectAll(".chip").data(n,function(e){return e.id});i.exit().remove();var o=i.enter().append("a").attr("class",function(e){return"chip "+e.id+"-count"}).attr("href","#").attr("tabindex",-1).each(function(e){var t=select(this),n=uiTooltip().placement("top").title(_t(e.descriptionID));t.call(n).on("click",function(){event.preventDefault(),n.hide(select(this)),a.ui().togglePanes(a.container().select(".map-panes .issues-pane"))}),t.call(svgIcon("#"+e.iconID))});o.append("span").attr("class","count"),o.merge(i).selectAll("span.count").text(function(e){return e.count.toString()})}return function(e){t(e),a.validator().on("validated.infobox",function(){t(e)})}}function uiMapInMap(D){return function(e){var p,d,f,h,g,m=rendererTileLayer(D),y={},v=geoRawMercator(),_=svgData(v,D).showLabels(!1),b=svgDebug(v,D),l=d3_zoom().scaleExtent([geoZoomToScale(.5),geoZoomToScale(24)]).on("start",function(){if(A)return;f=h=v.transform(),I=null}).on("zoom",function(){if(A)return;var e=event.transform.x,t=event.transform.y,n=event.transform.k,r=n!==f.k,i=e!==f.x||t!==f.y;if(!r&&!i)return;I=I||(r?"zoom":"pan");var o,a,s,l=v.transform();a="zoom"===I?(s=n/l.k,o=(d[0]/s-d[0])*s,(d[1]/s-d[1])*s):(n=l.k,s=1,o=e-l.x,t-l.y);utilSetTransform(x,o,a,s),utilSetTransform(S,0,0,s),E=!0,h=identity$2.translate(e,t).scale(n);var c=geoScaleToZoom(D.projection.scale()),u=geoScaleToZoom(n);k=c-u,clearTimeout(g),g=setTimeout(function(){P()},750)}).on("end",function(){if(A)return;if("pan"!==I)return;N(),I=null,D.map().center(v.invert(d))}),w=select(null),x=select(null),S=select(null),E=!1,C=!0,A=!1,I=null,k=6;function N(){var e=D.map().center(),t=D.projection.transform(),n=geoScaleToZoom(t.k),r=geoZoomToScale(Math.max(n-k,.5));v.translate([t.x,t.y]).scale(r);var i=v(e),o="pan"===I?geoVecSubtract([h.x,h.y],[f.x,f.y]):[0,0],a=d[0]-i[0]+t.x+o[0],s=d[1]-i[1]+t.y+o[1];v.translate([a,s]).clipExtent([[0,0],p]),h=v.transform(),E&&(utilSetTransform(x,0,0),utilSetTransform(S,0,0),E=!1),l.scaleExtent([geoZoomToScale(.5),geoZoomToScale(n-3)]),A=!0,w.call(l.transform,h),A=!1}function P(){if(clearTimeout(g),!C){N();var e=geoScaleToZoom(v.scale());x=(x=w.selectAll(".map-in-map-tiles").data([0])).enter().append("div").attr("class","map-in-map-tiles").merge(x),m.source(D.background().baseLayerSource()).projection(v).dimensions(p);var t=x.selectAll(".map-in-map-background").data([0]);t.enter().append("div").attr("class","map-in-map-background").merge(t).call(m);for(var n=D.background().overlayLayerSources(),r=[],i=0;i<n.length;i++)n[i].validZoom(e)&&(y[i]||(y[i]=rendererTileLayer(D)),r.push(y[i].source(n[i]).projection(v).dimensions(p)));var o=x.selectAll(".map-in-map-overlay").data([0]),a=(o=o.enter().append("div").attr("class","map-in-map-overlay").merge(o)).selectAll("div").data(r,function(e){return e.source().name()});a.exit().remove(),a=a.enter().append("div").merge(a).each(function(e){select(this).call(e)});var s,l,c,u=x.selectAll(".map-in-map-data").data([0]);u.exit().remove(),u=u.enter().append("svg").attr("class","map-in-map-data").merge(u).call(_).call(b),"pan"!==I&&(s=d3_geoPath(v),l={type:"Polygon",coordinates:[D.map().extent().polygon()]},(c=(S=(S=w.selectAll(".map-in-map-viewport").data([0])).enter().append("svg").attr("class","map-in-map-viewport").merge(S)).selectAll(".map-in-map-bbox").data([l])).enter().append("path").attr("class","map-in-map-bbox").merge(c).attr("d",s).classed("thick",function(e){return s.area(e)<30}))}}function t(){event&&event.preventDefault(),C=!C,D.container().select(".minimap-toggle-item").classed("active",!C).select("input").property("checked",!C),C?w.style("display","block").style("opacity","1").transition().duration(200).style("opacity","0").on("end",function(){e.selectAll(".map-in-map").style("display","none")}):w.style("display","block").style("opacity","0").transition().duration(200).style("opacity","1").on("end",function(){P()})}uiMapInMap.toggle=t,w=(w=e.selectAll(".map-in-map").data([0])).enter().append("div").attr("class","map-in-map").style("display",C?"none":"block").call(l).on("dblclick.zoom",null).merge(w),d=geoVecScale(p=[200,150],.5),D.map().on("drawn.map-in-map",function(e){!0===e.full&&P()}),P(),D.keybinding().on(_t("background.minimap.key"),t)}}function uiNotice(r){return function(e){var t=e.append("div").attr("class","notice");function n(){var e=r.map().zoom()>=r.minEditableZoom();t.style("display",e?"none":"block")}t.append("button").attr("class","zoom-to notice fillD").on("click",function(){r.map().zoomEase(r.minEditableZoom())}).on("wheel",function(){var e=new WheelEvent(event.type,event);r.surface().node().dispatchEvent(e)}).call(svgIcon("#iD-icon-plus","pre-text")).append("span").attr("class","label").text(_t("zoom_in_edit")),r.map().on("move.notice",debounce(n,500)),n()}}function uiPhotoviewer(v){var i=dispatch("resize"),r="PointerEvent"in window?"pointer":"mouse";function e(e){function t(){event.preventDefault()}function n(o,a,s,e){var l,c,u,p,d,f=!!e.resizeOnX,h=!!e.resizeOnY,g=e.minHeight||240,m=e.minWidth||320;function t(){var e,t,n,r,i;l===(event.pointerId||"mouse")&&(event.preventDefault(),event.stopPropagation(),e=v.map().dimensions(),f&&(t=e[0],n=y(p+event.clientX-c,m,t),o.style("width",n+"px")),h&&(r=e[1]-90,i=y(d+u-event.clientY,g,r),o.style("height",i+"px")),s.call(a,o,utilGetDimensions(o,!0)))}function y(e,t,n){return Math.max(t,Math.min(e,n))}function n(){l===(event.pointerId||"mouse")&&(event.preventDefault(),event.stopPropagation(),select(window).on("."+a,null))}return function(){event.preventDefault(),event.stopPropagation(),l=event.pointerId||"mouse",c=event.clientX,u=event.clientY;var e=o.node().getBoundingClientRect();p=e.width,d=e.height,select(window).on(r+"move."+a,t,!1).on(r+"up."+a,n,!1),"pointer"==r&&select(window).on("pointercancel."+a,n,!1)}}e.append("button").attr("class","thumb-hide").on("click",function(){services.streetside&&services.streetside.hideViewer(v),services.mapillary&&services.mapillary.hideViewer(v),services.openstreetcam&&services.openstreetcam.hideViewer(v)}).append("div").call(svgIcon("#iD-icon-close")),e.append("button").attr("class","resize-handle-xy").on("touchstart touchdown touchend",t).on(r+"down",n(e,"resize",i,{resizeOnX:!0,resizeOnY:!0})),e.append("button").attr("class","resize-handle-x").on("touchstart touchdown touchend",t).on(r+"down",n(e,"resize",i,{resizeOnX:!0})),e.append("button").attr("class","resize-handle-y").on("touchstart touchdown touchend",t).on(r+"down",n(e,"resize",i,{resizeOnY:!0})),services.streetside.loadViewer(v),services.mapillary.loadViewer(v),services.openstreetcam.loadViewer(v)}return e.onMapResize=function(){var e,t=v.container().select(".photoviewer"),n=utilGetDimensions(v.container().select(".main-content"),!0),r=utilGetDimensions(t,!0);(r[0]>n[0]||r[1]>n[1]-90)&&(e=[Math.min(r[0],n[0]),Math.min(r[1],n[1]-90)],t.style("width",e[0]+"px").style("height",e[1]+"px"),i.call("resize",t,e))},utilRebind(e,i,"on")}function uiRestore(a){return function(e){var t,n,r,i,o;a.history().hasRestorableChanges()&&((t=uiModal(e,!0)).select(".modal").attr("class","modal fillL"),(n=t.select(".content")).append("div").attr("class","modal-section").append("h3").text(_t("restore.heading")),n.append("div").attr("class","modal-section").append("p").text(_t("restore.description")),(i=(r=n.append("div").attr("class","modal-actions")).append("button").attr("class","restore").on("click",function(){a.history().restore(),t.remove()})).append("svg").attr("class","logo logo-restore").append("use").attr("xlink:href","#iD-logo-restore"),i.append("div").text(_t("restore.restore")),(o=r.append("button").attr("class","reset").on("click",function(){a.history().clearSaved(),t.remove()})).append("svg").attr("class","logo logo-reset").append("use").attr("xlink:href","#iD-logo-reset"),o.append("div").text(_t("restore.reset")),i.node().focus())}}function uiScale(r){var u=r.projection,p=!_mainLocalizer.usesMetric(),i=180,o=8;function n(e){var t=r.map().dimensions(),n=function(e,t){for(var n,r,i=(t[1]+e[1])/2,o=p?3.28084:1,a=geoLonToMeters(t[0]-e[0],i)*o,s={dist:0,px:0,text:""},l=p?[528e4,528e3,52800,5280,500,50,5,1]:[5e6,5e5,5e4,5e3,500,50,5,1],c=0;c<l.length;c++){if((n=l[c])<=a){s.dist=Math.floor(a/n)*n;break}s.dist=+a.toFixed(2)}return r=geoMetersToLon(s.dist/o,i),s.px=Math.round(u([e[0]+r,e[1]])[0]),s.text=displayLength(s.dist/o,p),s}(u.invert([0,t[1]]),u.invert([i,t[1]]));e.select(".scale-path").attr("d","M0.5,0.5v"+o+"h"+n.px+"v-"+o),e.select(".scale-textgroup").attr("transform","translate("+(n.px+8)+","+o+")"),e.select(".scale-text").text(n.text)}return function(e){var t=e.append("svg").attr("class","scale").on("click",function(){p=!p,e.call(n)}).append("g").attr("transform","translate(10,11)");t.append("path").attr("class","scale-path"),t.append("g").attr("class","scale-textgroup").append("text").attr("class","scale-text"),e.call(n),r.map().on("move.scale",function(){n(e)})}}function uiShortcuts(e){var n,h=utilDetect(),g=0,r=select(null);function i(e){e.select(".modal").classed("modal-shortcuts",!0);var t=e.select(".content");t.append("div").attr("class","modal-section").append("h3").text(_t("shortcuts.title")),_mainFileFetcher.get("shortcuts").then(function(e){t.call(m,e)}).catch(function(){})}function m(n,r){var e=(o=n.selectAll(".wrapper").data([0])).enter().append("div").attr("class","wrapper modal-section"),t=e.append("div").attr("class","tabs-bar"),i=e.append("div").attr("class","shortcuts-list"),o=o.merge(e),a=t.selectAll(".tab").data(r),s=a.enter().append("div").attr("class","tab").on("click",function(e,t){g=t,m(n,r)});s.append("span").text(function(e){return _t(e.text)}),a=a.merge(s),o.selectAll(".tab").classed("active",function(e,t){return t===g});var l=i.selectAll(".shortcut-tab").data(r),c=l.enter().append("div").attr("class",function(e){return"shortcut-tab shortcut-tab-"+e.tab}),u=c.selectAll(".shortcut-column").data(function(e){return e.columns}).enter().append("table").attr("class","shortcut-column").selectAll(".shortcut-row").data(function(e){return e.rows}).enter().append("tr").attr("class","shortcut-row"),p=u.filter(function(e){return!e.shortcuts});p.append("td"),p.append("td").attr("class","shortcut-section").append("h3").text(function(e){return _t(e.text)});var d=u.filter(function(e){return e.shortcuts}),f=d.append("td").attr("class","shortcut-keys");f.filter(function(e){return e.modifiers}).selectAll("kbd.modifier").data(function(e){return"win"===h.os&&"shortcuts.editing.commands.redo"===e.text?["⌘"]:"mac"!==h.os&&"shortcuts.browsing.display_options.fullscreen"===e.text?[]:e.modifiers}).enter().each(function(){var e=select(this);e.append("kbd").attr("class","modifier").text(function(e){return uiCmd.display(e)}),e.append("span").text("+")}),f.selectAll("kbd.shortcut").data(function(t){var e=t.shortcuts;return"win"===h.os&&"shortcuts.editing.commands.redo"===t.text?e=["Y"]:"mac"!==h.os&&"shortcuts.browsing.display_options.fullscreen"===t.text&&(e=["F11"]),utilArrayUniq(e=e.map(function(e){return uiCmd.display(-1!==e.indexOf(".")?_t(e):e)})).map(function(e){return{shortcut:e,separator:t.separator,suffix:t.suffix}})}).enter().each(function(e,t,n){var r=select(this),i=e.shortcut.toLowerCase().match(/(.*).click/);i&&i[1]?r.call(svgIcon("#iD-walkthrough-mouse-"+i[1],"operation")):"long-press"===e.shortcut.toLowerCase()?r.call(svgIcon("#iD-walkthrough-longpress","longpress operation")):"tap"===e.shortcut.toLowerCase()?r.call(svgIcon("#iD-walkthrough-tap","tap operation")):r.append("kbd").attr("class","shortcut").text(function(e){return e.shortcut}),t<n.length-1?r.append("span").text(e.separator||" "+_t("shortcuts.or")+" "):t===n.length-1&&e.suffix&&r.append("span").text(e.suffix)}),f.filter(function(e){return e.gesture}).each(function(){var e=select(this);e.append("span").text("+"),e.append("span").attr("class","gesture").text(function(e){return _t(e.gesture)})}),d.append("td").attr("class","shortcut-desc").text(function(e){return e.text?_t(e.text):" "}),l=l.merge(c),o.selectAll(".shortcut-tab").style("display",function(e,t){return t===g?"flex":"none"})}return e.keybinding().on([_t("shortcuts.toggle.key"),"?"],function(){e.container().selectAll(".modal-shortcuts").size()?n&&(n.close(),n=null):(n=uiModal(r)).call(i)}),function(e,t){r=e,t&&(n=uiModal(e)).call(i)}}var pair_1=pair;function search(e,t){if(t=t||"NSEW","string"!=typeof e)return null;var n=(e=e.toUpperCase()).match(/^[\s\,]*([NSEW])?\s*([\-|\—|\―]?[0-9.]+)[°º˚]?\s*(?:([0-9.]+)['’′‘]\s*)?(?:([0-9.]+)(?:''|"|”|″)\s*)?([NSEW])?/);if(!n)return null;var r,i=n[0];if(n[1]&&n[5]?(r=n[1],i=i.slice(0,-1)):r=n[1]||n[5],r&&-1===t.indexOf(r))return null;var o=n[2]?parseFloat(n[2]):0,a=n[3]?parseFloat(n[3])/60:0,s=n[4]?parseFloat(n[4])/3600:0,l=o<0?-1:1;return"S"!==r&&"W"!==r||(l*=-1),{val:(Math.abs(o)+a+s)*l,dim:r,matched:i,remain:e.slice(i.length)}}function pair(e,t){var n=search(e=e.trim(),t);if(!n)return null;var r=search(e=n.remain.trim(),t);return!r||r.remain?null:n.dim?swapdim(n.val,r.val,n.dim):[n.val,r.val]}function swapdim(e,t,n){return"N"===n||"S"===n?[e,t]:"W"===n||"E"===n?[t,e]:void 0}function uiFeatureList(_){var b;return function(e){e.append("div").attr("class","header fillL cf").append("h3").text(_t("inspector.feature_list"));var t=e.append("div").attr("class","search-header"),v=t.append("input").attr("placeholder",_t("inspector.search")).attr("type","search").call(utilNoAuto).on("keypress",function(){var e=v.property("value"),t=o.selectAll(".feature-list-item");13===event.keyCode&&e.length&&t.size()&&l(t.datum())}).on("keydown",function(){27===event.keyCode&&v.node().blur()}).on("input",function(){b=void 0,n()});t.call(svgIcon("#iD-icon-search","pre-text"));var o=e.append("div").attr("class","inspector-body").append("div").attr("class","feature-list cf");function n(){var e=v.property("value"),t=function(){var l=[],e=_.graph(),t=_.map().extent().center(),n=v.property("value").toLowerCase();if(!n)return l;var r,i,o=n.match(/(?:^|\W)(node|way|relation|[nwr])\W?0*([1-9]\d*)(?:\W|$)/i);o&&(r=o[1].charAt(0),i=o[2],l.push({id:r+i,geometry:"n"===r?"point":"w"===r?"line":"relation",type:_t("n"===r?"inspector.node":"w"===r?"inspector.way":"inspector.relation"),name:i}));var a,s=pair_1(n.toUpperCase())||n.match(/^(-?\d+\.?\d*)\s+(-?\d+\.?\d*)$/);s&&(a=[parseFloat(s[0]),parseFloat(s[1])],l.push({id:-1,geometry:"point",type:_t("inspector.location"),name:dmsCoordinatePair([a[1],a[0]]),location:a}));var c=e.entities,u=[];for(var p in c){var d=c[p];if(d){var f=utilDisplayName(d)||"";if(!(f.toLowerCase().indexOf(n)<0)){var h=_mainPresetIndex.match(d,e),g=h&&h.name()||utilDisplayType(d.id),m=d.extent(e),y=m?geoSphericalDistance(t,m.center()):0;if(u.push({id:d.id,entity:d,geometry:d.geometry(e),type:g,name:f,distance:y}),100<u.length)break}}}return u=u.sort(function(e,t){return e.distance-t.distance}),l=l.concat(u),(b||[]).forEach(function(e){var t,n,r,i,o,a,s;e.osm_type&&e.osm_id&&(t=osmEntity.id.fromOSM(e.osm_type,e.osm_id),(n={})[e.class]=e.type,r={id:t,type:e.osm_type,tags:n},"way"===e.osm_type&&(r.nodes=["a","a"]),o=coreGraph([i=osmEntity(r)]),s=(a=_mainPresetIndex.match(i,o))&&a.name()||utilDisplayType(t),l.push({id:i.id,geometry:i.geometry(o),type:s,name:e.display_name,extent:new geoExtent([parseFloat(e.boundingbox[3]),parseFloat(e.boundingbox[0])],[parseFloat(e.boundingbox[2]),parseFloat(e.boundingbox[1])])}))}),n.match(/^[0-9]+$/)&&(l.push({id:"n"+n,geometry:"point",type:_t("inspector.node"),name:n}),l.push({id:"w"+n,geometry:"line",type:_t("inspector.way"),name:n}),l.push({id:"r"+n,geometry:"relation",type:_t("inspector.relation"),name:n})),l}();o.classed("filtered",e.length),o.selectAll(".no-results-item").data([0]).enter().append("button").property("disabled",!0).attr("class","no-results-item").call(svgIcon("#iD-icon-alert","pre-text")).append("span").attr("class","entity-name"),o.selectAll(".no-results-item .entity-name").text(_t("geocoder.no_results_worldwide")),services.geocoder&&o.selectAll(".geocode-item").data([0]).enter().append("button").attr("class","geocode-item").on("click",c).append("div").attr("class","label").append("span").attr("class","entity-name").text(_t("geocoder.search")),o.selectAll(".no-results-item").style("display",e.length&&!t.length?"block":"none"),o.selectAll(".geocode-item").style("display",e&&void 0===b?"block":"none"),o.selectAll(".feature-list-item").data([-1]).remove();var n=o.selectAll(".feature-list-item").data(t,function(e){return e.id}),r=n.enter().insert("button",".geocode-item").attr("class","feature-list-item").on("mouseover",a).on("mouseout",s).on("click",l),i=r.append("div").attr("class","label");i.each(function(e){select(this).call(svgIcon("#iD-icon-"+e.geometry,"pre-text"))}),i.append("span").attr("class","entity-type").text(function(e){return e.type}),i.append("span").attr("class","entity-name").text(function(e){return e.name}),r.style("opacity",0).transition().style("opacity",1),n.order(),n.exit().remove()}function a(e){-1!==e.id&&utilHighlightEntities([e.id],!0,_)}function s(e){-1!==e.id&&utilHighlightEntities([e.id],!1,_)}function l(e){event.preventDefault(),e.location?_.map().centerZoomEase([e.location[1],e.location[0]],19):e.entity?(utilHighlightEntities([e.id],!1,_),_.enter(modeSelect(_,[e.entity.id])),_.map().zoomToEase(e.entity)):_.zoomToEntity(e.id)}function c(){services.geocoder.search(v.property("value"),function(e,t){b=t||[],n()})}_.on("exit.feature-list",function(){v.property("value",""),n()}),_.map().on("drawn.feature-list",function(e){e.full&&n()}),_.keybinding().on(uiCmd("⌘F"),function(){if("browse"!==(_.mode()&&_.mode().id))return;event.preventDefault(),v.node().focus()})}}function uiSectionEntityIssues(l){var c,u=[],p=[],t=uiSection("entity-issues",l).shouldDisplay(function(){return 0<p.length}).title(function(){return _t("issues.list_title",{count:p.length})}).disclosureContent(function(e){e.classed("grouped-items-area",!0),c=0<p.length?p[0].id:null;var t=e.selectAll(".issue-container").data(p,function(e){return e.id});t.exit().remove();var n=t.enter().append("div").attr("class","issue-container"),r=n.append("div").attr("class",function(e){return"issue severity-"+e.severity}).on("mouseover.highlight",function(e){utilHighlightEntities(e.entityIds.filter(function(e){return-1===u.indexOf(e)}),!0,l)}).on("mouseout.highlight",function(e){utilHighlightEntities(e.entityIds.filter(function(e){return-1===u.indexOf(e)}),!1,l)}),i=r.append("div").attr("class","issue-label").on("click",function(e){d(e.id);var t,n=e.extent(l.graph());n&&(t=Math.max(l.map().zoom(),19),l.map().unobscuredCenterZoomEase(n.center(),t))}),o=i.append("span").attr("class","issue-text");o.append("span").attr("class","issue-icon").each(function(e){var t="#iD-icon-"+("warning"===e.severity?"alert":"error");select(this).call(svgIcon(t))}),o.append("span").attr("class","issue-message"),i.append("button").attr("class","issue-info-button").attr("title",_t("icons.information")).attr("tabindex",-1).call(svgIcon("#iD-icon-inspect")).on("click",function(){event.stopPropagation(),event.preventDefault(),this.blur();var e=select(this.parentNode.parentNode.parentNode).selectAll(".issue-info");e.classed("expanded")?e.transition().duration(200).style("max-height","0px").style("opacity","0").on("end",function(){e.classed("expanded",!1)}):e.classed("expanded",!0).transition().duration(200).style("max-height","200px").style("opacity","1").on("end",function(){e.style("max-height",null)})}),r.append("ul").attr("class","issue-fix-list"),n.append("div").attr("class","issue-info").style("max-height","0").style("opacity","0").each(function(e){"function"==typeof e.reference?select(this).call(e.reference):select(this).text(_t("inspector.no_documentation_key"))}),(t=t.merge(n).classed("active",function(e){return e.id===c})).selectAll(".issue-message").text(function(e){return e.message(l)});var a=t.selectAll(".issue-fix-list").selectAll(".issue-fix-item").data(function(e){return e.fixes?e.fixes(l):[]},function(e){return e.id});a.exit().remove();var s=a.enter().append("li").attr("class","issue-fix-item").on("click",function(n){select(this).classed("actionable")&&n.onClick&&(n.issue.dateLastRanFix&&new Date-n.issue.dateLastRanFix<1e3||(n.issue.dateLastRanFix=new Date,utilHighlightEntities(n.issue.entityIds.concat(n.entityIds),!1,l),new Promise(function(e,t){n.onClick(l,e,t),n.onClick.length<=1&&e()}).then(function(){l.validator().validate()})))}).on("mouseover.highlight",function(e){utilHighlightEntities(e.entityIds,!0,l)}).on("mouseout.highlight",function(e){utilHighlightEntities(e.entityIds,!1,l)});s.append("span").attr("class","fix-icon").each(function(e){var t=e.icon||"iD-icon-wrench";t.startsWith("maki")&&(t+="-15"),select(this).call(svgIcon("#"+t))}),s.append("span").attr("class","fix-message").text(function(e){return e.title}),s.merge(a).classed("actionable",function(e){return e.onClick}).attr("title",function(e){return e.disabledReason?e.disabledReason:null})});function n(){p=l.validator().getSharedEntityIssues(u,{includeDisabledRules:!0})}function d(e){c=e,t.selection().selectAll(".issue-container").classed("active",function(e){return e.id===c})}return l.validator().on("validated.entity_issues",function(){n(),t.reRender()}).on("focusedIssue.entity_issues",function(e){d(e.id)}),t.entityIDs=function(e){return arguments.length?(u&&e&&utilArrayIdentical(u,e)||(u=e,c=null,n()),t):u},t}function uiPresetIcon(){var fe,he,ge="medium";function me(){return"small"===ge}function t(e){e.each(n)}var ye={bicycle:["highway/cycleway","highway/cycleway","highway/cycleway"],bus:["highway/unclassified","highway/secondary","highway/primary"],trolleybus:["highway/unclassified","highway/secondary","highway/primary"],detour:["highway/tertiary","highway/residential","highway/unclassified"],ferry:["route/ferry","route/ferry","route/ferry"],foot:["highway/footway","highway/footway","highway/footway"],hiking:["highway/path","highway/path","highway/path"],horse:["highway/bridleway","highway/bridleway","highway/bridleway"],light_rail:["railway/light_rail","railway/light_rail","railway/light_rail"],monorail:["railway/monorail","railway/monorail","railway/monorail"],pipeline:["man_made/pipeline","man_made/pipeline","man_made/pipeline"],piste:["piste/downhill","piste/hike","piste/nordic"],power:["power/line","power/line","power/line"],road:["highway/secondary","highway/primary","highway/trunk"],subway:["railway/subway","railway/subway","railway/subway"],train:["railway/rail","railway/rail","railway/rail"],tram:["railway/tram","railway/tram","railway/tram"],waterway:["waterway/stream","waterway/stream","waterway/stream"]};function n(){var e=fe.apply(this,arguments),t=he?he.apply(this,arguments):null;"relation"===t&&e.tags&&("route"===e.tags.type&&e.tags.route&&ye[e.tags.route]||"waterway"===e.tags.type)&&(t="route");var n,r,i=corePreferences("preferences.privacy.thirdpartyicons")||"true",o=me()&&e.isFallback&&e.isFallback(),a="true"===i&&e.imageURL,s=(n=e,r=t,me()&&n.isFallback&&n.isFallback()?"iD-icon-"+n.id:n.icon?n.icon:"line"===r?"iD-other-line":"vertex"===r?n.isFallback()?"":"temaki-vertex":me()&&"point"===r?"":"maki-marker-stroked"),l=s&&/^maki-/.test(s),c=s&&/^temaki-/.test(s),u=s&&/^fa[srb]-/.test(s),p=s&&/^tnp-/.test(s),d=s&&!(l||c||u||p),f=!e.setTags,h=s&&"point"===t&&me()&&!o,g=!(null===s||"vertex"!==t||me()&&o),m=s&&"line"===t&&!o&&!f,y=s&&"area"===t&&!o,v=s&&"route"===t,_=g||y||m||v,b=f?{}:e.setTags({},t);for(var w in b)"*"===b[w]&&(b[w]="yes");var x=svgTagClasses().getClassesString(b,""),S=select(this).selectAll(".preset-icon-container").data([0]);(S=S.enter().append("div").attr("class","preset-icon-container "+ge).merge(S)).classed("showing-img",!!a).classed("fallback",o);var E=S.selectAll(".preset-icon-point-border").data(h?[0]:[]);E.exit().remove();var C=E.enter();C.append("svg").attr("class","preset-icon-fill preset-icon-point-border").attr("width",40).attr("height",40).attr("viewBox","0 0 40 40").append("path").attr("transform","translate(11.5, 8)").attr("d","M 17,8 C 17,13 11,21 8.5,23.5 C 6,21 0,13 0,8 C 0,4 4,-0.5 8.5,-0.5 C 13,-0.5 17,4 17,8 z"),E=C.merge(E);var A=S.selectAll(".preset-icon-fill-vertex").data(g?[0]:[]);A.exit().remove();var I=A.enter();I.append("svg").attr("class","preset-icon-fill preset-icon-fill-vertex").attr("width",60).attr("height",60).attr("viewBox","0 0 60 60").append("circle").attr("cx",30).attr("cy",30).attr("r",20),A=I.merge(A);var k=S.selectAll(".preset-icon-fill-area").data(y?[0]:[]);k.exit().remove();var N,P,D,T,O,M,L,R=k.enter();P=me()?40:60,L=(M=((D=P)-(O=2*(T=P)/3))/2)+O,N=(N=R).append("svg").attr("class","preset-icon-fill preset-icon-fill-area").attr("width",D).attr("height",T).attr("viewBox","0 0 "+D+" "+T),["fill","stroke"].forEach(function(e){N.append("path").attr("d","M"+M+" "+M+" L"+M+" "+L+" L"+L+" "+L+" L"+L+" "+M+" Z").attr("class","line area "+e)}),[[M,M],[M,L],[L,L],[L,M]].forEach(function(e){N.append("circle").attr("class","vertex").attr("cx",e[0]).attr("cy",e[1]).attr("r",2.5)}),me()||[[M,D/2],[L,D/2],[T/2,M],[T/2,L]].forEach(function(e){N.append("circle").attr("class","midpoint").attr("cx",e[0]).attr("cy",e[1]).attr("r",1.25)}),(k=R.merge(k)).selectAll("path.stroke").attr("class","area stroke "+x),k.selectAll("path.fill").attr("class","area fill "+x);var $=S.selectAll(".preset-icon-line").data(m?[0]:[]);$.exit().remove();var F,B,j,G,z,V,q,U,W=$.enter();F=W,B=me()?40:60,G=j=B,z=Math.round(.72*B),V=Math.round(.6*B),U=(q=(j-V)/2)+V,F=F.append("svg").attr("class","preset-icon-line").attr("width",j).attr("height",G).attr("viewBox","0 0 "+j+" "+G),["casing","stroke"].forEach(function(e){F.append("path").attr("d","M"+q+" "+z+" L"+U+" "+z).attr("class","line "+e)}),[[q-1,z],[U+1,z]].forEach(function(e){F.append("circle").attr("class","vertex").attr("cx",e[0]).attr("cy",e[1]).attr("r",2.5)}),($=W.merge($)).selectAll("path.stroke").attr("class","line stroke "+x),$.selectAll("path.casing").attr("class","line casing "+x);var H=S.selectAll(".preset-icon-route").data(v?[0]:[]);H.exit().remove();var Q,X,Y,K,Z,J,ee,te,ne,re,ie,oe=H.enter();if(Q=oe,X=me()?40:60,K=Y=X,Z=Math.round(.8*X),J=Math.round(.68*X),ee=Math.round(.6*X),ie=(re=(ne=(te=(Y-ee)/2)+ee/3)+ee/3)+ee/3,Q=Q.append("svg").attr("class","preset-icon-route").attr("width",Y).attr("height",K).attr("viewBox","0 0 "+Y+" "+K),["casing","stroke"].forEach(function(e){Q.append("path").attr("d","M"+te+" "+Z+" L"+ne+" "+J).attr("class","segment0 line "+e),Q.append("path").attr("d","M"+ne+" "+J+" L"+re+" "+Z).attr("class","segment1 line "+e),Q.append("path").attr("d","M"+re+" "+Z+" L"+ie+" "+J).attr("class","segment2 line "+e)}),[[te,Z],[ne,J],[re,Z],[ie,J]].forEach(function(e){Q.append("circle").attr("class","vertex").attr("cx",e[0]).attr("cy",e[1]).attr("r",2)}),H=oe.merge(H),v){var ae="waterway"===e.tags.type?"waterway":e.tags.route,se=ye[ae];for(var le in se){var ce=_mainPresetIndex.item(se[le]),ue=svgTagClasses().getClassesString(ce.tags,"");H.selectAll("path.stroke.segment"+le).attr("class","segment"+le+" line stroke "+ue),H.selectAll("path.casing.segment"+le).attr("class","segment"+le+" line casing "+ue)}}var pe=S.selectAll(".preset-icon").data(s?[0]:[]);pe.exit().remove(),(pe=pe.enter().append("div").attr("class","preset-icon").call(svgIcon("")).merge(pe)).attr("class","preset-icon "+(t?t+"-geom":"")).classed("framed",_).classed("preset-icon-iD",d),pe.selectAll("svg").attr("class","icon "+s+" "+(d||"line"===t?x:"")),pe.selectAll("use").attr("href","#"+s+(l?me()&&"point"===t?"-11":"-15":""));var de=S.selectAll("img.image-icon").data(a?[0]:[]);de.exit().remove(),(de=de.enter().append("img").attr("class","image-icon").on("load",function(){return S.classed("showing-img",!0)}).on("error",function(){return S.classed("showing-img",!1)}).merge(de)).attr("src",a)}return t.preset=function(e){return arguments.length?(fe=utilFunctor(e),t):fe},t.geometry=function(e){return arguments.length?(he=utilFunctor(e),t):he},t.sizeClass=function(e){return arguments.length?(ge=e,t):ge},t}function uiSectionFeatureType(r){var s,l=dispatch("choose"),i=[],c=[],n=uiSection("feature-type",r).title(_t("inspector.feature_type")).disclosureContent(function(e){e.classed("preset-list-item",!0),e.classed("mixed-types",1<c.length);var t=e.selectAll(".preset-list-button-wrap").data([0]).enter().append("div").attr("class","preset-list-button-wrap"),n=t.append("button").attr("class","preset-list-button preset-reset").call(uiTooltip().title(_t("inspector.back_tooltip")).placement("bottom"));n.append("div").attr("class","preset-icon-container"),n.append("div").attr("class","label").append("div").attr("class","label-inner"),t.append("div").attr("class","accessory-buttons");var r=e.selectAll(".tag-reference-body-wrap").data([0]);r=r.enter().append("div").attr("class","tag-reference-body-wrap").merge(r),s&&(e.selectAll(".preset-list-button-wrap .accessory-buttons").style("display",1===c.length?null:"none").call(s.button),r.style("display",1===c.length?null:"none").call(s.body));e.selectAll(".preset-reset").on("click",function(){l.call("choose",this,c)}).on("pointerdown pointerup mousedown mouseup",function(){event.preventDefault(),event.stopPropagation()});var i=u();e.select(".preset-list-item button").call(uiPresetIcon().geometry(1===c.length?1===i.length&&i[0]:null).preset(1===c.length?c[0]:_mainPresetIndex.item("point")));var o=1===c.length?c[0].name().split(" – "):[_t("inspector.multiple_types")],a=e.select(".label-inner").selectAll(".namepart").data(o,function(e){return e});a.exit().remove(),a.enter().append("div").attr("class","namepart").text(function(e){return e})});function u(){var n={};for(var e in i){var t=r.graph().geometry(i[e]);n[t]||(n[t]=0),n[t]+=1}return Object.keys(n).sort(function(e,t){return n[t]-n[e]})}return n.entityIDs=function(e){return arguments.length?(i=e,n):i},n.presets=function(e){return arguments.length?(utilArrayIdentical(e,c)||(c=e,t=u(),1===c.length&&t.length&&(s=uiTagReference(c[0].reference(t[0])).showing(!1))),n):c;var t},utilRebind(n,l,"on")}function uiFieldHelp(o,a){var e={},s=select(null),l=select(null),c=select(null),i={restrictions:[["about",["about","from_via_to","maxdist","maxvia"]],["inspecting",["about","from_shadow","allow_shadow","restrict_shadow","only_shadow","restricted","only"]],["modifying",["about","indicators","allow_turn","restrict_turn","only_turn"]],["tips",["simple","simple_example","indirect","indirect_example","indirect_noedit"]]]},u={},p={distField:_t("restriction.controls.distance"),viaField:_t("restriction.controls.via"),fromShadow:icon("#iD-turn-shadow","pre-text shadow from"),allowShadow:icon("#iD-turn-shadow","pre-text shadow allow"),restrictShadow:icon("#iD-turn-shadow","pre-text shadow restrict"),onlyShadow:icon("#iD-turn-shadow","pre-text shadow only"),allowTurn:icon("#iD-turn-yes","pre-text turn"),restrictTurn:icon("#iD-turn-no","pre-text turn"),onlyTurn:icon("#iD-turn-only","pre-text turn")},d=i[a].map(function(e){var i="help.field."+a+"."+e[0],t=e[1].reduce(function(e,t){var n=i+"."+t,r=u[n];return e+(r?Array(r+1).join("#")+" ":"")+_t(n,p)+"\n\n"},"");return{key:i,title:_t(i+".title"),html:marked_1(t.trim())}});function n(){var e,t,n,r;e=l.node(),t=s.node(),n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),c.style("top",n.top+t.scrollTop-r.top+"px"),c.classed("hide",!1).style("opacity","0").transition().duration(200).style("opacity","1")}function f(){c.classed("hide",!0).transition().duration(200).style("opacity","0").on("end",function(){c.classed("hide",!0)})}function h(n){var e=d[n],r=i[a][n][1];c.selectAll(".field-help-nav-item").classed("active",function(e,t){return t===n});var t=c.selectAll(".field-help-content").html(e.html);t.selectAll("p").attr("class",function(e,t){return r[t]}),"help.field.restrictions.inspecting"===e.key?t.insert("img","p.from_shadow").attr("class","field-help-image cf").attr("src",o.imagePath("tr_inspect.gif")):"help.field.restrictions.modifying"===e.key&&t.insert("img","p.allow_turn").attr("class","field-help-image cf").attr("src",o.imagePath("tr_modify.gif"))}return e.button=function(e){var t;c.empty()||(t=e.selectAll(".field-help-button").data([0])).enter().append("button").attr("class","field-help-button").attr("tabindex",-1).call(svgIcon("#iD-icon-help")).merge(t).on("click",function(){event.stopPropagation(),event.preventDefault(),(c.classed("hide")?n:f)()})},e.body=function(e){var t,n,r,i;(l=e.selectAll(".form-field-input-wrap")).empty()||(s=o.container().select(".sidebar .entity-editor-pane .inspector-body")).empty()||((n=(t=(c=s.selectAll(".field-help-body").data([0])).enter().append("div").attr("class","field-help-body hide")).append("div").attr("class","field-help-title cf")).append("h2").attr("class","rtl"===_mainLocalizer.textDirection()?"fr":"fl").text(_t("help.field."+a+".title")),n.append("button").attr("class","fr close").on("click",function(){event.stopPropagation(),event.preventDefault(),f()}).call(svgIcon("#iD-icon-close")),r=t.append("div").attr("class","field-help-nav cf"),i=d.map(function(e){return e.title}),r.selectAll(".field-help-nav-item").data(i).enter().append("div").attr("class","field-help-nav-item").text(function(e){return e}).on("click",function(e,t){event.stopPropagation(),event.preventDefault(),h(t)}),t.append("div").attr("class","field-help-content"),c=c.merge(t),h(0))},e}function uiFieldCheck(r,i){var o,n,a,s=dispatch("change"),e=r.strings&&r.strings.options,l=[],c=[],u=select(null),p=select(null),d=select(null),f=select(null),h=[];if(e)for(var t in e)l.push("undefined"===t?void 0:t),c.push(r.t("options."+t,{default:e[t]}));else l=[void 0,"yes"],c=[_t("inspector.unknown"),_t("inspector.check.yes")],"defaultCheck"!==r.type&&(l.push("no"),c.push(_t("inspector.check.no")));function g(){if(n="oneway_yes"===r.id,"oneway"===r.id){var e=i.entity(h[0]);for(var t in e.tags)if(t in osmOneWayTags&&e.tags[t]in osmOneWayTags[t]){n=!0,c[0]=_t("presets.fields.oneway_yes.options.undefined");break}}}function m(){return!i.container().select("div.inspector-hover").empty()||!("yes"===a||n&&!a)}function y(e){var t=h.length&&i.hasEntity(h[0]);if(m()||!t)return e;var n=t.first()<(t.isClosed()?t.nodes[t.nodes.length-2]:t.last())?"#iD-icon-forward":"#iD-icon-backward";return e.selectAll(".reverser-span").text(_t("inspector.check.reverser")).call(svgIcon(n,"inline")),e}function v(e){g();var t=(d=e.selectAll(".form-field-input-wrap").data([0])).enter().append("label").attr("class","form-field-input-wrap form-field-input-check");t.append("input").property("indeterminate","defaultCheck"!==r.type).attr("type","checkbox").attr("id",r.domId),t.append("span").text(c[0]).attr("class","value"),"onewayCheck"===r.type&&t.append("a").attr("class","reverser button"+(m()?" hide":"")).attr("href","#").append("span").attr("class","reverser-span"),d=d.merge(t),u=d.selectAll("input"),p=d.selectAll("span.value"),u.on("click",function(){event.stopPropagation();var e={};Array.isArray(o[r.key])?-1!==l.indexOf("yes")?e[r.key]="yes":e[r.key]=l[0]:e[r.key]=l[(l.indexOf(a)+1)%l.length],"reversible"!==e[r.key]&&"alternating"!==e[r.key]||(e[r.key]=l[0]),s.call("change",this,e)}),"onewayCheck"===r.type&&(f=d.selectAll(".reverser")).call(y).on("click",function(){event.preventDefault(),event.stopPropagation(),i.perform(function(e){for(var t in h)e=actionReverse(h[t])(e);return e},_t("operations.reverse.annotation")),i.validator().validate(),select(this).call(y)})}return v.entityIDs=function(e){return arguments.length?(h=e,v):h},v.tags=function(e){o=e,g();var t,n=Array.isArray(e[r.key]);a=!n&&e[r.key]&&e[r.key].toLowerCase(),"onewayCheck"!==r.type||"1"!==a&&"-1"!==a||(a="yes"),u.property("indeterminate",n||"defaultCheck"!==r.type&&!a).property("checked","no"!==(t=a)&&""!==t&&null!=t),p.text(n?_t("inspector.multiple_values"):function(e){""===e&&(e=void 0);var t=l.indexOf(e);return-1!==t?c[t]:'"'+e+'"'}(a)).classed("mixed",n),d.classed("set",!!a),"onewayCheck"===r.type&&f.classed("hide",m()).call(y)},v.focus=function(){u.node().focus()},utilRebind(v,s,"on")}function uiFieldCombo(y,v){var _,a,b,w=dispatch("change"),s=services.taginfo,x="multiCombo"===y.type,l="networkCombo"===y.type,S="semiCombo"===y.type,E=y.strings&&y.strings.options,n=y.options,c=y.snake_case||void 0===y.snake_case,e=y.caseSensitive,C=uiCombobox(v,"combo-"+y.safeid).caseSensitive(e).minItems(x||S?1:2),A=select(null),o=select(null),I=select(null),k=[],N=[],u=[],p=[];function d(e){return e.replace(/_+/g," ")}function r(e){return e.split(";").map(function(e){return e.trim()}).join(";")}function f(t){if(t=r(t||""),E){var e=k.find(function(e){return e.key&&r(e.value)===t});if(e)return e.key}return"typeCombo"!==y.type||t?(c?t.replace(/\s+/g,"_"):t)||void 0:"yes"}function P(t){if(t=t||"",E){var e=k.find(function(e){return e.key===t&&e.value});if(e)return e.value}return"typeCombo"===y.type&&"yes"===t.toLowerCase()?"":c?d(t):t}function D(e,n){return e.filter(function(t){return!n.some(function(e){return!e.isMixed&&t.value===e.value})})}function h(e,t){E?(e.attr("readonly","readonly"),e.call(C,t),i(m)):n?(e.call(C,t),i(m)):s&&(e.call(C.fetcher(g),t),g("",m))}function i(e){(E||n)&&(E?k=Object.keys(E).map(function(e){var t=y.t("options."+e,{default:E[e]});return{key:e,value:t,title:t}}):n&&(k=n.map(function(e){var t=c?d(e):e;return{key:e,value:t,title:t}})),C.data(D(k,N)),e&&e(k))}function g(e,r){var t=x?"multikeys":"values",n=(x?y.key:"")+e,i=l&&a&&0===a.indexOf(e.toLowerCase());i&&(n=a+":");var o={debounce:""!==e,key:y.key,query:n};u.length&&(o.geometry=v.graph().geometry(u[0])),s[t](o,function(e,t){var n;e||(t=t.filter(function(e){return("typeCombo"!==y.type||"yes"!==e.value)&&(!e.count||10<e.count)}),(n=osmEntity.deprecatedTagValuesByKey(p)[y.key])&&(t=t.filter(function(e){return-1===n.indexOf(e.value)})),i&&(t=t.filter(function(e){return 0===e.value.toLowerCase().indexOf(a+":")})),A.classed("empty-combobox",0===t.length),k=D(k=t.map(function(e){var t=e.value;x&&(t=t.replace(y.key,""));var n=c?d(t):t;return{key:t,value:n,title:x?n:e.title}}),N),r&&r(k))})}function m(e){var t,n,r;b=x||S?y.placeholder()||_t("inspector.add"):(n=1<(t=e.map(function(e){return e.value}).filter(function(e){return e.length<20})).length?t:e.map(function(e){return e.key}),y.placeholder()||n.slice(0,3).join(", ")),/(…|\.\.\.)$/.test(b)||(b+="…"),r=!x&&!S&&_&&Array.isArray(_[y.key])?_t("inspector.multiple_values"):b,A.selectAll("input").attr("placeholder",r)}function T(){var e,r={};if(x||S){e=f(utilGetSetValue(I).replace(/,/g,";"))||"",A.classed("active",!1),utilGetSetValue(I,"");var t,n=e.split(";").filter(Boolean);if(!n.length)return;x?utilArrayUniq(n).forEach(function(e){var t=y.key+e;if(_){var n=_[t];if("string"==typeof n&&"no"!==n.toLowerCase())return}t=v.cleanTagKey(t),y.keys.push(t),r[t]="yes"}):S&&(t=(t=N.map(function(e){return e.key})).concat(n),r[y.key]=v.cleanTagValue(utilArrayUniq(t).filter(Boolean).join(";"))),window.setTimeout(function(){I.node().focus()},10)}else{var i=utilGetSetValue(I);if(!i&&Array.isArray(_[y.key]))return;e=v.cleanTagValue(f(i)),r[y.key]=e||void 0}w.call("change",this,r)}function O(t){event.stopPropagation();var e,n={};x?n[t.key]=void 0:S&&(e=utilArrayUniq(e=N.map(function(e){return e.key===t.key?null:e.key}).filter(Boolean)),n[y.key]=e.length?e.join(";"):void 0),w.call("change",this,n)}function t(e){A=e.selectAll(".form-field-input-wrap").data([0]);var t,n,r,i=x||S?"multicombo":"combo";A=A.enter().append("div").attr("class","form-field-input-wrap form-field-input-"+i).merge(A),I=(I=x||S?(A=A.selectAll(".chiplist").data([0]),t="chiplist","destination"===y.key&&(t+=" full-line-chips"),A=A.enter().append("ul").attr("class",t).on("click",function(){window.setTimeout(function(){I.node().focus()},10)}).merge(A),(o=(o=A.selectAll(".input-wrap").data([0])).enter().append("li").attr("class","input-wrap").merge(o)).selectAll("input").data([0])):A.selectAll("input").data([0])).enter().append("input").attr("type","text").attr("id",y.domId).call(utilNoAuto).call(h,e).merge(I),l&&(r=(n=u&&u.length&&utilTotalExtent(u,v.graph()))&&iso1A2Code(n.center()),a=r&&r.toLowerCase()),I.on("change",T).on("blur",T),I.on("keydown.field",function(){switch(event.keyCode){case 13:I.node().blur(),event.stopPropagation()}}),(x||S)&&(C.on("accept",function(){I.node().blur(),I.node().focus()}),I.on("focus",function(){A.classed("active",!0)}))}return _mainFileFetcher.get("deprecated").then(function(e){p=e}).catch(function(){}),x&&/[^:]$/.test(y.key)&&(y.key+=":"),t.tags=function(e){if(_=e,x||S){var t,n,r,i,o,a;if(N=[],x){for(var s in e){0===s.indexOf(y.key)&&(!(t=e[s])||"string"==typeof t&&"no"===t.toLowerCase()||(n=s.substring(y.key.length),N.push({key:s,value:P(n),isMixed:Array.isArray(t)})))}y.keys=N.map(function(e){return e.key}),a=v.maxCharsForTagKey()-utilUnicodeCharsCount(y.key)}else{S&&(r=[],Array.isArray(e[y.key])?(e[y.key].forEach(function(e){var t=utilArrayUniq((e||"").split(";")).filter(Boolean);r=r.concat(t),i=i?i.filter(function(e){return t.includes(e)}):t}),r=utilArrayUniq(r).filter(Boolean)):(r=utilArrayUniq((e[y.key]||"").split(";")).filter(Boolean),i=r),N=r.map(function(e){return{key:e,value:P(e),isMixed:!i.includes(e)}}),o=utilUnicodeCharsCount(i.join(";")),a=v.maxCharsForTagValue()-o,0<o&&--a)}a=Math.max(0,a);var l=S&&!Array.isArray(e[y.key]),c=D(k,N);C.data(c);var u=E&&!c.length||a<=0;A.selectAll(".chiplist .input-wrap").style("display",u?"none":null);var p=A.selectAll(".chip").data(N);p.exit().remove();var d=p.enter().insert("li",".input-wrap").attr("class","chip");d.append("span"),d.append("a"),p=p.merge(d).order().classed("draggable",l).classed("mixed",function(e){return e.isMixed}).attr("title",function(e){return e.isMixed?_t("inspector.unshared_value_tooltip"):null}),l&&p.call(d3_drag().on("start",function(){g={x:event.x,y:event.y},m=null}).on("drag",function(e,r){var i,o,a=event.x-g.x,s=event.y-g.y;!select(this).classed("dragging")&&Math.sqrt(Math.pow(a,2)+Math.pow(s,2))<=5||(select(this).classed("dragging",!0),i=m=null,o=select(this).node().offsetWidth,"destination"===y.key?A.selectAll(".chip").style("transform",function(e,t){var n=select(this).node();return r===t?"translate("+a+"px, "+s+"px)":r<t&&event.y>n.offsetTop?((null===m||m<t)&&(m=t),"translateY(-100%)"):t<r&&event.y<n.offsetTop+n.offsetHeight?((null===m||t<m)&&(m=t),"translateY(100%)"):null}):A.selectAll(".chip").each(function(e,t){var n=select(this).node();r!==t&&event.x<n.offsetLeft+n.offsetWidth+5&&event.x>n.offsetLeft&&event.y<n.offsetTop+n.offsetHeight&&event.y>n.offsetTop&&(m=t,i=n.offsetTop)}).style("transform",function(e,t){var n=select(this).node();if(r===t)return"translate("+a+"px, "+s+"px)";if(n.offsetTop===i){if(t<r&&m<=t)return"translateX("+o+"px)";if(r<t&&t<=m)return"translateX(-"+o+"px)"}return null}))}).on("end",function(e,t){var n,r;select(this).classed("dragging")&&(select(this).classed("dragging",!1),A.selectAll(".chip").style("transform",null),"number"==typeof m&&(n=N[t],N.splice(t,1),N.splice(m,0,n),r={},N.length?r[y.key]=N.map(function(e){return e.key}).join(";"):r[y.key]=void 0,w.call("change",this,r)),m=g=void 0)})),p.select("span").text(function(e){return e.value}),p.select("a").on("click",O).attr("class","remove").text("×")}else{var f=Array.isArray(e[y.key]),h=f&&e[y.key].map(P).filter(Boolean);utilGetSetValue(I,f?"":P(e[y.key])).attr("title",f?h.join("\n"):void 0).attr("placeholder",f?_t("inspector.multiple_values"):b||"").classed("mixed",f)}var g,m},t.focus=function(){I.node().focus()},t.entityIDs=function(e){return arguments.length?(u=e,t):u},utilRebind(t,w,"on")}function uiFieldText(s,l){var r,i=dispatch("change"),c=select(null),u=select(null),p=[],o={};function t(e){var t=p.length&&l.hasEntity(p[0]),n=t&&_mainPresetIndex.match(t,l.graph()),r=n&&n.suggestion&&"brand"===s.id;s.locked(r);var i,o,a=(a=e.selectAll(".form-field-input-wrap").data([0])).enter().append("div").attr("class","form-field-input-wrap form-field-input-"+s.type).merge(a);(c=(c=a.selectAll("input").data([0])).enter().append("input").attr("type","identifier"===s.type?"text":s.type).attr("id",s.domId).classed(s.type,!0).call(utilNoAuto).merge(c)).classed("disabled",!!r).attr("readonly",r||null).on("input",g(!0)).on("blur",g()).on("change",g()),"tel"===s.type?d():"number"===s.type?(i="rtl"===_mainLocalizer.textDirection(),c.attr("type","text"),(o=a.selectAll(".increment, .decrement").data(i?[1,-1]:[-1,1])).enter().append("button").attr("tabindex",-1).attr("class",function(e){return"form-field-button "+(1===e?"increment":"decrement")}).merge(o).on("click",function(n){event.preventDefault();var e=(e=(c.node().value||"0").split(";")).map(function(e){var t=parseFloat(e.trim(),10);return isFinite(t)?h(t+n):e.trim()});c.node().value=e.join(";"),g()()})):"identifier"===s.type&&s.urlFormat&&s.pattern&&(c.attr("type","text"),(u=a.selectAll(".foreign-id-permalink").data([0])).enter().append("button").attr("tabindex",-1).call(svgIcon("#iD-icon-out-link")).attr("class","form-field-button foreign-id-permalink").attr("title",function(){var e=/^https?:\/\/(.{1,}?)\//.exec(s.urlFormat);if(2<=e.length&&e[1]){var t=e[1];return _t("icons.view_on",{domain:t})}return""}).on("click",function(){event.preventDefault();var e,t=f();t&&(e=s.urlFormat.replace(/{value}/,encodeURIComponent(t)),window.open(e,"_blank"))}).merge(u))}function d(){var e,t,n;c.empty()||!Object.keys(o).length||(n=(t=(e=p&&p.length&&utilTotalExtent(p,l.graph()))&&iso1A2Code(e.center()))&&o[t.toLowerCase()])&&c.attr("placeholder",n)}function f(){if("identifier"===s.type&&s.pattern){var e=utilGetSetValue(c).trim().split(";")[0];return e&&e.match(new RegExp(s.pattern))}return null}function h(e){return void 0!==s.minValue&&(e=Math.max(e,s.minValue)),void 0!==s.maxValue&&(e=Math.min(e,s.maxValue)),e}function g(n){return function(){var e={},t=utilGetSetValue(c);n||(t=l.cleanTagValue(t)),!t&&Array.isArray(r[s.key])||(n||("number"===s.type&&t&&(t=t.split(";").map(function(e){var t=parseFloat(e.trim(),10);return isFinite(t)?h(t):e.trim()}).join(";")),utilGetSetValue(c,t)),e[s.key]=t||void 0,i.call("change",this,e,n))}}return"tel"===s.type&&_mainFileFetcher.get("phone_formats").then(function(e){o=e,d()}).catch(function(){}),t.entityIDs=function(e){return arguments.length?(p=e,t):p},t.tags=function(e){r=e;var t,n=Array.isArray(e[s.key]);utilGetSetValue(c,!n&&e[s.key]?e[s.key]:"").attr("title",n?e[s.key].filter(Boolean).join("\n"):void 0).attr("placeholder",n?_t("inspector.multiple_values"):s.placeholder()||_t("inspector.unknown")).classed("mixed",n),u&&!u.empty()&&(t=!f(),u.classed("disabled",t))},t.focus=function(){var e=c.node();e&&e.focus()},utilRebind(t,i,"on")}function uiFieldAccess(i,o){var r,a=dispatch("change"),s=select(null);function l(e){var t=e.selectAll(".form-field-input-wrap").data([0]),n=(n=(t=t.enter().append("div").attr("class","form-field-input-wrap form-field-input-"+i.type).merge(t)).selectAll("ul").data([0])).enter().append("ul").attr("class","rows").merge(n),r=(s=n.selectAll("li").data(i.keys)).enter().append("li").attr("class",function(e){return"labeled-input preset-access-"+e});r.append("span").attr("class","label preset-label-access").attr("for",function(e){return"preset-input-access-"+e}).text(function(e){return i.t("types."+e)}),r.append("div").attr("class","preset-input-access-wrap").append("input").attr("type","text").attr("class",function(e){return"preset-input-access preset-input-access-"+e}).call(utilNoAuto).each(function(e){select(this).call(uiCombobox(o,"access-"+e).data(l.options(e)))}),s=s.merge(r),t.selectAll(".preset-input-access").on("change",c).on("blur",c)}function c(e){var t={},n=o.cleanTagValue(utilGetSetValue(select(this)));!n&&"string"!=typeof r[e]||(t[e]=n||void 0,a.call("change",this,t))}l.options=function(e){var t=["no","permissive","private","permit","destination"];return"access"!==e&&(t.unshift("yes"),t.push("designated"),"bicycle"===e&&t.push("dismount")),t.map(function(e){return{title:i.t("options."+e+".description"),value:e}})};var u={footway:{foot:"designated",motor_vehicle:"no"},steps:{foot:"yes",motor_vehicle:"no",bicycle:"no",horse:"no"},pedestrian:{foot:"yes",motor_vehicle:"no"},cycleway:{motor_vehicle:"no",bicycle:"designated"},bridleway:{motor_vehicle:"no",horse:"designated"},path:{foot:"yes",motor_vehicle:"no",bicycle:"yes",horse:"yes"},motorway:{foot:"no",motor_vehicle:"yes",bicycle:"no",horse:"no"},trunk:{motor_vehicle:"yes"},primary:{foot:"yes",motor_vehicle:"yes",bicycle:"yes",horse:"yes"},secondary:{foot:"yes",motor_vehicle:"yes",bicycle:"yes",horse:"yes"},tertiary:{foot:"yes",motor_vehicle:"yes",bicycle:"yes",horse:"yes"},residential:{foot:"yes",motor_vehicle:"yes",bicycle:"yes",horse:"yes"},unclassified:{foot:"yes",motor_vehicle:"yes",bicycle:"yes",horse:"yes"},service:{foot:"yes",motor_vehicle:"yes",bicycle:"yes",horse:"yes"},motorway_link:{foot:"no",motor_vehicle:"yes",bicycle:"no",horse:"no"},trunk_link:{motor_vehicle:"yes"},primary_link:{foot:"yes",motor_vehicle:"yes",bicycle:"yes",horse:"yes"},secondary_link:{foot:"yes",motor_vehicle:"yes",bicycle:"yes",horse:"yes"},tertiary_link:{foot:"yes",motor_vehicle:"yes",bicycle:"yes",horse:"yes"}};return l.tags=function(n){r=n,utilGetSetValue(s.selectAll(".preset-input-access"),function(e){return"string"==typeof n[e]?n[e]:""}).classed("mixed",function(e){return n[e]&&Array.isArray(n[e])}).attr("title",function(e){return n[e]&&Array.isArray(n[e])&&n[e].filter(Boolean).join("\n")}).attr("placeholder",function(t){if(n[t]&&Array.isArray(n[t]))return _t("inspector.multiple_values");if("access"===t)return"yes";if(n.access&&"string"==typeof n.access)return n.access;if(n.highway)if("string"==typeof n.highway){if(u[n.highway]&&u[n.highway][t])return u[n.highway][t]}else{var e=n.highway.filter(Boolean).map(function(e){return u[e]&&u[e][t]}).filter(Boolean);if(e.length===n.highway.length&&1===new Set(e).size)return e[0]}return i.placeholder()})},l.focus=function(){s.selectAll(".preset-input-access").node().focus()},utilRebind(l,a,"on")}function uiFieldAddress(o,a){var s,l,e=dispatch("change"),r=select(null),c=select(null),i=_mainPresetIndex.field("address"),u=[],p=[{format:[["housenumber","street"],["city","postcode"]]}];function d(){var r=_(),e=geoExtent(r.center()).padByMeters(200);return utilArrayUniqBy(a.history().intersects(e).filter(function(e){return e.tags.highway&&e.tags.name&&"way"===e.type}).map(function(e){var t=a.projection([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]),n=geoChooseEdge(a.graph().childNodes(e),t,a.projection);return{title:e.tags.name,value:e.tags.name,dist:n.distance}}).sort(function(e,t){return e.dist-t.dist}),"value")}function f(){var t=_().center(),e=geoExtent(t).padByMeters(200);return utilArrayUniqBy(a.history().intersects(e).filter(function(e){if(e.tags.name){if("8"===e.tags.admin_level&&"administrative"===e.tags.boundary)return!0;if("city"===e.tags.border_type)return!0;if("city"===e.tags.place||"town"===e.tags.place||"village"===e.tags.place)return!0}if(e.tags["addr:city"])return!0;return!1}).map(function(e){return{title:e.tags["addr:city"]||e.tags.name,value:e.tags["addr:city"]||e.tags.name,dist:geoSphericalDistance(e.extent(a.graph()).center(),t)}}).sort(function(e,t){return e.dist-t.dist}),"value")}function h(t){var n=_().center(),e=geoExtent(n).padByMeters(200);return utilArrayUniqBy(a.history().intersects(e).filter(function(e){return-1===u.indexOf(e.id)&&e.tags[t]}).map(function(e){return{title:e.tags[t],value:e.tags[t],dist:geoSphericalDistance(e.extent(a.graph()).center(),n)}}).sort(function(e,t){return e.dist-t.dist}),"value")}function g(){if(l){for(var e,t=0;t<p.length;t++){var n=p[t];if(n.countryCodes){if(-1!==n.countryCodes.indexOf(l)){e=n;break}}else e=n}var i=e.dropdowns||["city","county","country","district","hamlet","neighbourhood","place","postcode","province","quarter","state","street","subdistrict","suburb"],r=e.widths||{housenumber:1/3,street:2/3,city:2/3,state:.25,postcode:1/3},o=c.selectAll(".addr-row").data(e.format,function(e){return e.toString()});o.exit().remove(),o.enter().append("div").attr("class","addr-row").selectAll("input").data(function(e){var t=e.reduce(function(e,t){return e+(r[t]||.5)},0);return e.map(function(e){return{id:e,width:(r[e]||.5)/t}})}).enter().append("input").property("type","text").call(y).attr("class",function(e){return"addr-"+e.id}).call(utilNoAuto).each(function(n){if(-1===i.indexOf(n.id))return;var r="street"===n.id?d:"city"===n.id?f:h;select(this).call(uiCombobox(a,"address-"+n.id).minItems(1).caseSensitive(!0).fetcher(function(e,t){t(r("addr:"+n.id))}))}).style("width",function(e){return 100*e.width+"%"}),c.selectAll("input").on("blur",m()).on("change",m()),c.selectAll("input:not(.combobox-input)").on("input",m(!0)),s&&v(s)}}function t(e){c=(c=(r=e).selectAll(".form-field-input-wrap").data([0])).enter().append("div").attr("class","form-field-input-wrap form-field-input-"+o.type).merge(c);var t,n=_();n&&(t=a.inIntro()?_t("intro.graph.countrycode"):iso1A2Code(n.center()))&&(l=t.toLowerCase(),g())}function m(i){return function(){var r={};c.selectAll("input").each(function(e){var t=o.key+":"+e.id,n=this.value;i||(n=a.cleanTagValue(n)),Array.isArray(s[t])&&!n||(r[t]=n||void 0)}),e.call("change",this,r,i)}}function y(e){return e.attr("placeholder",function(e){if(s&&Array.isArray(s[o.key+":"+e.id]))return _t("inspector.multiple_values");if(l){var t=e.id+"!"+l,n=i.strings.placeholders[t]?t:e.id;return i.t("placeholders."+n)}})}function v(n){utilGetSetValue(c.selectAll("input"),function(e){var t=n[o.key+":"+e.id];return"string"==typeof t?t:""}).attr("title",function(e){var t=n[o.key+":"+e.id];return t&&Array.isArray(t)&&t.filter(Boolean).join("\n")}).classed("mixed",function(e){return Array.isArray(n[o.key+":"+e.id])}).call(y)}function _(){return u&&u.length&&utilTotalExtent(u,a.graph())}return _mainFileFetcher.get("address_formats").then(function(e){p=e,r.empty()||r.call(t)}).catch(function(){}),t.entityIDs=function(e){return arguments.length?(u=e,t):u},t.tags=function(e){v(s=e)},t.focus=function(){var e=c.selectAll("input").node();e&&e.focus()},utilRebind(t,e,"on")}function uiFieldCycleway(i,o){var a,s=dispatch("change"),l=select(null),c=select(null);function u(e){function t(e){return e.replace(":","")}var n=(n=(c=(c=e.selectAll(".form-field-input-wrap").data([0])).enter().append("div").attr("class","form-field-input-wrap form-field-input-"+i.type).merge(c)).selectAll("ul").data([0])).enter().append("ul").attr("class","rows").merge(n),r=(l=n.selectAll("li").data(["cycleway:left","cycleway:right"])).enter().append("li").attr("class",function(e){return"labeled-input preset-cycleway-"+t(e)});r.append("span").attr("class","label preset-label-cycleway").attr("for",function(e){return"preset-input-cycleway-"+t(e)}).text(function(e){return i.t("types."+e)}),r.append("div").attr("class","preset-input-cycleway-wrap").append("input").attr("type","text").attr("class",function(e){return"preset-input-cycleway preset-input-"+t(e)}).call(utilNoAuto).each(function(e){select(this).call(uiCombobox(o,"cycleway-"+t(e)).data(u.options(e)))}),l=l.merge(r),c.selectAll(".preset-input-cycleway").on("change",p).on("blur",p)}function p(e){var t,n,r,i=o.cleanTagValue(utilGetSetValue(select(this)));!i&&(Array.isArray(a.cycleway)||Array.isArray(a[e]))||("none"!==i&&""!==i||(i=void 0),t="cycleway:left"===e?"cycleway:right":"cycleway:left",(n="string"==typeof a.cycleway?a.cycleway:a[t])&&Array.isArray(n)&&(n=n[0]),"none"!==n&&""!==n||(n=void 0),r={},i===n?r={cycleway:i,"cycleway:left":void 0,"cycleway:right":void 0}:((r={cycleway:void 0})[e]=i,r[t]=n),s.call("change",this,r))}return u.options=function(){return Object.keys(i.strings.options).map(function(e){return{title:i.t("options."+e+".description"),value:e}})},u.tags=function(n){var t="string"==typeof(a=n).cycleway&&n.cycleway;utilGetSetValue(l.selectAll(".preset-input-cycleway"),function(e){return t||(n.cycleway||"string"!=typeof n[e]?"":n[e])}).attr("title",function(e){if(Array.isArray(n.cycleway)||Array.isArray(n[e])){var t=[];return Array.isArray(n.cycleway)&&(t=t.concat(n.cycleway)),Array.isArray(n[e])&&(t=t.concat(n[e])),t.filter(Boolean).join("\n")}return null}).attr("placeholder",function(e){return Array.isArray(n.cycleway)||Array.isArray(n[e])?_t("inspector.multiple_values"):i.placeholder()}).classed("mixed",function(e){return Array.isArray(n.cycleway)||Array.isArray(n[e])})},u.focus=function(){var e=c.selectAll("input").node();e&&e.focus()},utilRebind(u,s,"on")}function uiFieldLanes(c,u){var e=dispatch("change"),p=40,d=200,f=[];function h(e){var t,n,r,i,o,a,s,l=u.entity(f[0]).lanes();u.container().select(".inspector-wrap.inspector-hidden").empty()&&e.node().parentNode?(i=(t=(t=e.selectAll(".form-field-input-wrap").data([0])).enter().append("div").attr("class","form-field-input-wrap form-field-input-"+c.type).merge(t)).selectAll(".surface").data([0]),n=utilGetDimensions(t),r=n[0]-l.lanes.length*p*1.5+.5*p,(o=(o=(i=i.enter().append("svg").attr("width",n[0]).attr("height",300).attr("class","surface").merge(i)).selectAll(".lanes").data([0])).enter().append("g").attr("class","lanes").merge(o)).attr("transform",function(){return"translate("+r/2+", 0)"}),(a=o.selectAll(".lane").data(l.lanes)).exit().remove(),(s=a.enter().append("g").attr("class","lane")).append("g").append("rect").attr("y",50).attr("width",p).attr("height",d),s.append("g").attr("class","forward").append("text").attr("y",40).attr("x",14).text("▲"),s.append("g").attr("class","bothways").append("text").attr("y",40).attr("x",14).text("▲▼"),s.append("g").attr("class","backward").append("text").attr("y",40).attr("x",14).text("▼"),(a=a.merge(s)).attr("transform",function(e){return"translate("+p*e.index*1.5+", 0)"}),a.select(".forward").style("visibility",function(e){return"forward"===e.direction?"visible":"hidden"}),a.select(".bothways").style("visibility",function(e){return"bothways"===e.direction?"visible":"hidden"}),a.select(".backward").style("visibility",function(e){return"backward"===e.direction?"visible":"hidden"})):e.call(h.off)}return h.entityIDs=function(e){f=e},h.tags=function(){},h.focus=function(){},h.off=function(){},utilRebind(h,e,"on")}uiFieldLanes.supportsMultiselection=!1;var _languagesArray=[];function uiFieldLocalized(_,b){var w,x,S=dispatch("change","input"),r=services.wikipedia,E=select(null),C=select(null);_mainFileFetcher.get("languages").then(function(e){if(0!==_languagesArray.length)return;var t={sr:"sr-Cyrl","sr-Cyrl":!1};for(var n in e){var r;!1!==t[n]&&(r=t[n]?t[n]:n,_languagesArray.push({localName:_mainLocalizer.languageName(r,{localOnly:!0}),nativeName:e[r].nativeName,code:n,label:_mainLocalizer.languageName(r)}))}}).catch(function(){});var o={};_mainFileFetcher.get("territory_languages").then(function(e){o=e}).catch(function(){});var a,A=_mainPresetIndex.collection.filter(function(e){return!0===e.suggestion}),s=uiCombobox(b,"localized-lang").fetcher(function(e,t){var n=e.toLowerCase(),r=[_mainLocalizer.localeCode(),_mainLocalizer.languageCode()];w&&o[w]&&(r=r.concat(o[w]));var i=[];r.forEach(function(t){var e=_languagesArray.find(function(e){return e.code===t});e&&i.push(e)}),i=utilArrayUniq(i.concat(_languagesArray)),t(i.filter(function(e){return 0<=e.label.toLowerCase().indexOf(n)||e.localName&&0<=e.localName.toLowerCase().indexOf(n)||e.nativeName&&0<=e.nativeName.toLowerCase().indexOf(n)||0<=e.code.toLowerCase().indexOf(n)}).map(function(e){return{value:e.label}}))}).minItems(0),I=uiCombobox(b,"localized-brand").canAutocomplete(!1).minItems(1),k=select(null),N=[],P=uiTooltip().title(_t("translate.translate")).placement("left"),D=[];function T(e){var t=N.map(function(e){return e.lang}),n=new Set(t.filter(Boolean));for(var r in e){var i,o=r.match(/^(.*):([a-zA-Z_-]+)$/);o&&o[1]===_.key&&o[2]&&(i={lang:o[2],value:e[r]},n.has(i.lang)?(N[t.indexOf(i.lang)].value=i.value,n.delete(i.lang)):N.push(i))}N=N.filter(function(e){return!e.lang||!n.has(e.lang)})}function i(e){var t;k=e,t="name"===_.id&&D.length&&D.some(function(e){var t=b.graph().hasEntity(e);if(!t)return!1;var n=b.graph().base().entities[D[0]];if(!(n&&t.tags.name&&t.tags.name===n.tags.name))return!1;if(t.tags.wikidata)return!0;if(t.tags["name:etymology:wikidata"])return!0;var r=_mainPresetIndex.match(t,b.graph()),i=r&&r.suggestion,o=r&&r.originalFields.filter(function(e){return"brand"===e.id}).length;return i&&!o}),_.locked(t);var n,i,o,a,r,d,s,f,h,l=_.locked(),c=1===D.length&&b.hasEntity(D[0]),u=c&&_mainPresetIndex.match(c,b.graph()),p=(p=e.selectAll(".form-field-input-wrap").data([0])).enter().append("div").attr("class","form-field-input-wrap form-field-input-"+_.type).merge(p);E=(E=p.selectAll(".localized-main").data([0])).enter().append("input").attr("type","text").attr("id",_.domId).attr("class","localized-main").call(utilNoAuto).merge(E),u&&"name"===_.id&&(n=u.id.split("/",2),i=n[0],o=n[1],u.suggestion||(a=u.isFallback(),r=A.filter(function(e){if(a)return!0;var t=e.id.split("/",2),n=t[0],r=t[1];return i===n&&(!o||o===r)}),A.length&&r.length&&E.on("blur.localized",function(){var e=1===D.length&&b.hasEntity(D[0]);if(!e)return;var t=_mainPresetIndex.match(e,b.graph());if(t&&t.suggestion)return;var n=utilGetSetValue(E).trim(),r=A.filter(function(e){return n===e.name()});1===r.length?m({suggestion:r[0]}):y()}).call(I.fetcher((d=A,s=u.id.split("/",2),f=s[0],h=s[1],function(e,t){var n=[];if(e&&2<e.length){for(var r=0;r<d.length;r++){var i,o,a,s,l,c,u,p=d[r];w&&p.countryCodes&&-1===p.countryCodes.indexOf(w)||(o=(i=p.id.split("/",2))[0],a=i[1],l=utilEditDistance(e,(s=p.name()).substring(0,e.length)),c=f===o&&(!h||h===a),(l<1||c&&l<3)&&(u={title:s,value:s,suggestion:p,dist:l+(c?0:1)},n.push(u)))}n.sort(function(e,t){return e.dist-t.dist})}t(n=n.slice(0,10))})).on("accept",m).on("cancel",y)))),E.classed("disabled",!!l).attr("readonly",l||null).on("input",v(!0)).on("blur",v()).on("change",v());var g=p.selectAll(".localized-add").data([0]);function m(e){var t=1===D.length&&b.hasEntity(D[0]);if(e&&t){var n=t.tags,r=t.geometry(b.graph()),i=u.unsetTags(n,r);for(var o in n)n[o]=i[o];n=e.suggestion.setTags(n,r),utilGetSetValue(E,n.name),S.call("change",this,n)}else y()}function y(){var e=utilGetSetValue(E),t=function(e){var t=e.split(" – ");1<t.length&&(t.pop(),e=t.join(" – "));return e}(e);t!==e&&(utilGetSetValue(E,t),S.call("change",this,{name:t}))}function v(n){return function(){var e,t;_.locked()?event.preventDefault():(e=utilGetSetValue(select(this)),n||(e=b.cleanTagValue(e)),!e&&Array.isArray(x[_.key])||((t={})[_.key]=e||void 0,S.call("change",this,t,n)))}}(g=g.enter().append("button").attr("class","localized-add form-field-button").attr("tabindex",-1).call(svgIcon("#iD-icon-plus")).merge(g)).classed("disabled",!!l).call(l?P.destroy:P).on("click",function(){if(event.preventDefault(),_.locked())return;var t=_mainLocalizer.languageCode().toLowerCase(),e=N.find(function(e){return e.lang===t});(-1<t.indexOf("en")||e)&&(t="",e=N.find(function(e){return e.lang===t}));e||(N.unshift({lang:t,value:""}),C.call(O))}),x&&!N.length&&T(x),(C=(C=e.selectAll(".localized-multilingual").data([0])).enter().append("div").attr("class","localized-multilingual").merge(C)).call(O),C.selectAll("button, input").classed("disabled",!!l).attr("readonly",l||null)}function l(e){return _.key+":"+e}function c(e){var t={},n=utilGetSetValue(select(this)).toLowerCase(),r=_languagesArray.find(function(e){return e.label.toLowerCase()===n||e.localName&&e.localName.toLowerCase()===n||e.nativeName&&e.nativeName.toLowerCase()===n});r&&(n=r.code),e.lang&&e.lang!==n&&(t[l(e.lang)]=void 0);var i=n&&b.cleanTagKey(l(n)),o=utilGetSetValue(select(this.parentNode).selectAll(".localized-value"));i&&o?t[i]=o:i&&a&&a[e.lang]&&(t[i]=a[e.lang]),e.lang=n,S.call("change",this,t)}function u(e){var t,n;e.lang&&(!(t=b.cleanTagValue(utilGetSetValue(select(this)))||void 0)&&Array.isArray(e.value)||((n={})[l(e.lang)]=t,e.value=t,S.call("change",this,n)))}function O(a){var e=a.selectAll("div.entry").data(N,function(e){return e.lang});e.exit().style("top","0").style("max-height","240px").transition().duration(200).style("opacity","0").style("max-height","0px").remove();var t=e.enter().append("div").attr("class","entry").each(function(e,t){var n=select(this),r=utilUniqueDomId(t),i=n.append("label").attr("class","field-label").attr("for",r),o=i.append("span").attr("class","label-text");o.append("span").attr("class","label-textvalue").text(_t("translate.localized_translation_label")),o.append("span").attr("class","label-textannotation"),i.append("button").attr("class","remove-icon-multilingual").on("click",function(e,t){var n;_.locked()||(event.preventDefault(),e.lang&&e.value?((n={})[l(e.lang)]=void 0,S.call("change",this,n)):(N.splice(t,1),O(a)))}).call(svgIcon("#iD-operation-delete")),n.append("input").attr("class","localized-lang").attr("id",r).attr("type","text").attr("placeholder",_t("translate.localized_translation_language")).on("blur",c).on("change",c).call(s),n.append("input").attr("type","text").attr("class","localized-value").on("blur",u).on("change",u)});t.style("margin-top","0px").style("max-height","0px").style("opacity","0").transition().duration(200).style("margin-top","10px").style("max-height","240px").style("opacity","1").on("end",function(){select(this).style("max-height","").style("overflow","visible")}),(e=e.merge(t)).order(),e.classed("present",function(e){return e.lang&&e.value}),utilGetSetValue(e.select(".localized-lang"),function(e){return _mainLocalizer.languageName(e.lang)}),utilGetSetValue(e.select(".localized-value"),function(e){return"string"==typeof e.value?e.value:""}).attr("title",function(e){return Array.isArray(e.value)?e.value.filter(Boolean).join("\n"):null}).attr("placeholder",function(e){return Array.isArray(e.value)?_t("inspector.multiple_values"):_t("translate.localized_translation_name")}).classed("mixed",function(e){return Array.isArray(e.value)})}return i.tags=function(e){var t;"string"!=typeof(x=e).wikipedia||a||(a={},(t=e.wikipedia.match(/([^:]+):(.+)/))&&t[0]&&t[1]&&r.translations(t[1],t[2],function(e,t){!e&&t&&(a=t)}));var n=Array.isArray(e[_.key]);utilGetSetValue(E,"string"==typeof e[_.key]?e[_.key]:"").attr("title",n?e[_.key].filter(Boolean).join("\n"):void 0).attr("placeholder",n?_t("inspector.multiple_values"):_.placeholder()).classed("mixed",n),T(e),k.call(i)},i.focus=function(){E.node().focus()},i.entityIDs=function(e){return arguments.length?(N=[],t=(D=e)&&D.length&&utilTotalExtent(D,b.graph()),n=t&&iso1A2Code(t.center()),w=n&&n.toLowerCase(),i):D;var t,n},utilRebind(i,S,"on")}function uiFieldMaxspeed(i,o){var r,a,n=dispatch("change"),s=select(null),l=select(null),c=[],u=uiCombobox(o,"maxspeed"),p=uiCombobox(o,"maxspeed-unit").data(["km/h","mph"].map(h)),e=[20,30,40,50,60,70,80,90,100,110,120],t=[5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80];function d(e){var t=(t=e.selectAll(".form-field-input-wrap").data([0])).enter().append("div").attr("class","form-field-input-wrap form-field-input-"+i.type).merge(t);(l=(l=t.selectAll("input.maxspeed-number").data([0])).enter().append("input").attr("type","text").attr("class","maxspeed-number").attr("id",i.domId).call(utilNoAuto).call(u).merge(l)).on("change",g).on("blur",g);var n=(c&&c.length&&utilTotalExtent(c,o.graph())).center();function r(){a="mph"===utilGetSetValue(s),utilGetSetValue(s,a?"mph":"km/h"),f(),g()}a="mph"===roadSpeedUnit(n),(s=(s=t.selectAll("input.maxspeed-unit").data([0])).enter().append("input").attr("type","text").attr("class","maxspeed-unit").call(p).merge(s)).on("blur",r).on("change",r)}function f(){u.data((a?t:e).map(h)),utilGetSetValue(s,a?"mph":"km/h")}function h(e){return{value:e.toString(),title:e.toString()}}function g(){var e={},t=utilGetSetValue(l).trim();!t&&Array.isArray(r[i.key])||(t?isNaN(t)||!a?e[i.key]=o.cleanTagValue(t):e[i.key]=o.cleanTagValue(t+" mph"):e[i.key]=void 0,n.call("change",this,e))}return d.tags=function(e){var t=(r=e)[i.key],n=Array.isArray(t);n||(t&&0<=t.indexOf("mph")?(t=parseInt(t,10).toString(),a=!0):t&&(a=!1)),f(),utilGetSetValue(l,"string"==typeof t?t:"").attr("title",n?t.filter(Boolean).join("\n"):null).attr("placeholder",n?_t("inspector.multiple_values"):i.placeholder()).classed("mixed",n)},d.focus=function(){l.node().focus()},d.entityIDs=function(e){c=e},utilRebind(d,n,"on")}function uiFieldRadio(d,f){var h,g,o=dispatch("change"),r=select(null),i=select(null),a=select(null),s=select(null),n=(d.options||d.strings&&d.strings.options&&Object.keys(d.strings.options)||d.keys).slice(),l={},m=[];function y(){var e=i.selectAll(".form-field-input-radio label.active input");return!e.empty()&&e.datum()}function t(e){e.classed("preset-radio",!0);var t=(i=e.selectAll(".form-field-input-wrap").data([0])).enter().append("div").attr("class","form-field-input-wrap form-field-input-radio");t.append("span").attr("class","placeholder"),i=i.merge(t),r=i.selectAll(".placeholder"),(t=(a=i.selectAll("label").data(n)).enter().append("label")).append("input").attr("type","radio").attr("name",d.id).attr("value",function(e){return d.t("options."+e,{default:e})}).attr("checked",!1),t.append("span").text(function(e){return d.t("options."+e,{default:e})}),a=a.merge(t),s=a.selectAll("input").on("change",u)}function c(e,t){var n=y()||void 0!==t.layer,r=_mainPresetIndex.field(n),i=_mainPresetIndex.field("layer"),o="bridge"===n||"tunnel"===n||void 0!==t.layer,a=e.selectAll(".structure-extras-wrap").data(n?[0]:[]);a.exit().remove();var s=(s=(a=a.enter().append("div").attr("class","structure-extras-wrap").merge(a)).selectAll("ul").data([0])).enter().append("ul").attr("class","rows").merge(s);r?(h&&h.id===n||(h=uiField(f,r,m,{wrap:!1}).on("change",v)),h.tags(t)):h=null;var l=s.selectAll(".structure-type-item").data(h?[h]:[],function(e){return e.id});l.exit().remove();var c=l.enter().insert("li",":first-child").attr("class","labeled-input structure-type-item");c.append("span").attr("class","label structure-label-type").attr("for","preset-input-"+n).text(_t("inspector.radio.structure.type")),c.append("div").attr("class","structure-input-type-wrap"),l=l.merge(c),h&&l.selectAll(".structure-input-type-wrap").call(h.render),i&&o?((g=g||uiField(f,i,m,{wrap:!1}).on("change",_)).tags(t),d.keys=utilArrayUnion(d.keys,["layer"])):(g=null,d.keys=d.keys.filter(function(e){return"layer"!==e}));var u=s.selectAll(".structure-layer-item").data(g?[g]:[]);u.exit().remove();var p=u.enter().append("li").attr("class","labeled-input structure-layer-item");p.append("span").attr("class","label structure-label-layer").attr("for","preset-input-layer").text(_t("inspector.radio.structure.layer")),p.append("div").attr("class","structure-input-layer-wrap"),u=u.merge(p),g&&u.selectAll(".structure-input-layer-wrap").call(g.render)}function v(e,t){var n,r=y();r&&("no"!==(n=e[r])&&(l[r]=n),"structureRadio"===d.type&&(("no"===n||"bridge"!==r&&"tunnel"!==r||"tunnel"===r&&"building_passage"===n)&&(e.layer=void 0),void 0===e.layer&&("bridge"===r&&"no"!==n&&(e.layer="1"),"tunnel"===r&&"no"!==n&&"building_passage"!==n&&(e.layer="-1"))),o.call("change",this,e,t))}function _(e,t){"0"===e.layer&&(e.layer=void 0),o.call("change",this,e,t)}function u(){var r,i={};d.key&&(i[d.key]=void 0),s.each(function(e){var t,n=select(this).property("checked");n&&(r=e),d.key?n&&(i[d.key]=e):(t=l[r]||"yes",i[e]=n?t:void 0)}),"structureRadio"===d.type&&("bridge"===r?i.layer="1":"tunnel"===r&&"building_passage"!==i.tunnel?i.layer="-1":i.layer=void 0),o.call("change",this,i)}return t.tags=function(t){function n(e){return d.key?Array.isArray(t[d.key])&&t[d.key].includes(e):Array.isArray(t[e])}s.property("checked",function(e){return d.key?t[d.key]===e:!("string"!=typeof t[e]||"no"===t[e].toLowerCase())}),a.classed("active",function(e){return d.key?Array.isArray(t[d.key])&&t[d.key].includes(e)||t[d.key]===e:Array.isArray(t[e])||!(!t[e]||"no"===t[e].toLowerCase())}).classed("mixed",n).attr("title",function(e){return n(e)?_t("inspector.unshared_value_tooltip"):null});var e=s.filter(function(){return this.checked});e.empty()?r.text(_t("inspector.none")):(r.text(e.attr("value")),l[e.datum()]=t[e.datum()]),"structureRadio"===d.type&&(t.waterway&&!l.tunnel&&(l.tunnel="culvert"),i.call(c,t))},t.focus=function(){s.node().focus()},t.entityIDs=function(e){return arguments.length?(m=e,l={},t):m},t.isAllowed=function(){return 1===m.length},utilRebind(t,o,"on")}function uiFieldRestrictions(a,I){var e=dispatch("change"),k=behaviorBreathe();corePreferences("turn-restriction-via-way",null);var N,s,P,D,T,O,t=corePreferences("turn-restriction-via-way0"),n=corePreferences("turn-restriction-distance"),M=null!==t?+t:0,l=n?+n:30,L=!1,c=select(null),R=select(null);function u(e){c=e,!P||I.graph()===s&&D||(s=I.graph(),D=osmIntersection(s,P,l));var t,n,r,i,o=D&&D.vertices.length&&D.vertices.filter(function(e){return e.id===P}).length&&2<D.ways.length&&1<D.ways.filter(function(e){return e.__to}).length;select(e.node().parentNode).classed("hide",!o),o&&I.container().select(".inspector-wrap.inspector-hidden").empty()&&e.node().parentNode&&e.node().parentNode.parentNode?((r=(n=(t=(t=e.selectAll(".form-field-input-wrap").data([0])).enter().append("div").attr("class","form-field-input-wrap form-field-input-"+a.type).merge(t)).selectAll(".restriction-container").data([0])).enter().append("div").attr("class","restriction-container")).append("div").attr("class","restriction-help"),R=r.merge(n).call($),(i=t.selectAll(".restriction-controls").data([0])).enter().append("div").attr("class","restriction-controls-container").append("div").attr("class","restriction-controls").merge(i).call(p)):e.call(u.off)}function p(e){var t=e.selectAll(".restriction-distance").data([0]);t.exit().remove();var n=t.enter().append("div").attr("class","restriction-control restriction-distance");n.append("span").attr("class","restriction-control-label restriction-distance-label").text(_t("restriction.controls.distance")+":"),n.append("input").attr("class","restriction-distance-input").attr("type","range").attr("min","20").attr("max","50").attr("step","5"),n.append("span").attr("class","restriction-distance-text"),e.selectAll(".restriction-distance-input").property("value",l).on("input",function(){var e=select(this).property("value");l=+e,D=null,R.selectAll(".layer-osm .layer-turns *").remove(),corePreferences("turn-restriction-distance",l),c.call(u)}),e.selectAll(".restriction-distance-text").text(function(e){var t;{t=_mainLocalizer.usesMetric()?{distance:_t("units.meters",{quantity:e})}:{distance:_t("units.feet",{quantity:{20:70,25:85,30:100,35:115,40:130,45:145,50:160}[e]})}}return _t("restriction.controls.distance_up_to",t)}(l));var r=e.selectAll(".restriction-via-way").data([0]);r.exit().remove();var i,o=r.enter().append("div").attr("class","restriction-control restriction-via-way");o.append("span").attr("class","restriction-control-label restriction-via-way-label").text(_t("restriction.controls.via")+":"),o.append("input").attr("class","restriction-via-way-input").attr("type","range").attr("min","0").attr("max","2").attr("step","1"),o.append("span").attr("class","restriction-via-way-text"),e.selectAll(".restriction-via-way-input").property("value",M).on("input",function(){var e=select(this).property("value");M=+e,R.selectAll(".layer-osm .layer-turns *").remove(),corePreferences("turn-restriction-via-way0",M),c.call(u)}),e.selectAll(".restriction-via-way-text").text(_t(0===(i=M)?"restriction.controls.via_node_only":1===i?"restriction.controls.via_up_to_one":"restriction.controls.via_up_to_two"))}function $(e){if(D){var g=D.graph,t=utilFunctor(!0),m=geoRawMercator(),n=utilGetDimensions(I.container().select(".sidebar")),r=[n[0]-50,370],i=geoVecScale(r,.5),o=22;m.scale(geoZoomToScale(o));for(var a,s,l,c,u,p,d=geoExtent(),f=0;f<D.vertices.length;f++)d._extend(D.vertices[f].extent());1<D.vertices.length&&(a=m([d[0][0],d[1][1]]),l=((s=m([d[1][0],d[0][1]]))[0]-a[0])/(r[0]-180),c=(s[1]-a[1])/(r[1]-180),u=Math.log(Math.abs(l))/Math.LN2,p=Math.log(Math.abs(c))/Math.LN2,o-=Math.max(u,p),m.scale(geoZoomToScale(o)));var h=m(d.center());h[1]=h[1]-35,m.translate(geoVecSubtract(i,h)).clipExtent([[0,0],r]);var y=svgLayers(m,I).only(["osm","touch"]).dimensions(r),v=svgVertices(m,I),_=svgLines(m,I),b=svgTurns(m,I),w=e.selectAll(".surface").empty();e.call(y);var x,S=e.selectAll(".surface").classed("tr",!0);w&&(L=!0,S.call(k)),T&&!g.hasEntity(T)&&(N=T=null),S.call(utilSetDimensions,r).call(v,g,D.vertices,t,d,o).call(_,g,D.ways,t).call(b,g,D.turns(T,M)),S.on("click.restrictions",function(){S.call(k.off).call(k);var e,t,n,r,i=event.target.__data__,o=i&&i.properties&&i.properties.entity;o&&(i=o);if(i instanceof osmWay&&(i.__from||i.__via))T=i.id,N=null,E();else if(i instanceof osmTurn){var a=osmInferRestriction(g,i,m);if(i.restrictionID&&!i.direct)return;if(i.restrictionID&&!i.only){var s={},l=JSON.parse(JSON.stringify(i));for(l.only=!0,a=a.replace(/^no/,"only"),n=D.turns(T,2),t=[],N=[],r=0;r<n.length;r++){var c=n[r];s[c.restrictionID]||c.direct&&c.path[1]===i.path[1]&&(s[n[r].restrictionID]=!0,c.restrictionType=osmInferRestriction(g,c,m),N.push(c),t.push(actionUnrestrictTurn(c)))}e=D.actions.concat(t,[actionRestrictTurn(l,a),_t("operations.restriction.annotation.create")])}else if(i.restrictionID){for(n=N||[],t=[],r=0;r<n.length;r++)n[r].key!==i.key&&t.push(actionRestrictTurn(n[r],n[r].restrictionType));N=null,e=D.actions.concat(t,[actionUnrestrictTurn(i),_t("operations.restriction.annotation.delete")])}else e=D.actions.concat([actionRestrictTurn(i,a),_t("operations.restriction.annotation.create")]);I.perform.apply(I,e);var u=S.selectAll("."+i.key);A(i=u.empty()?null:u.datum())}else N=T=null,E()}).on("mouseover.restrictions",function(){A(event.target.__data__)}),S.selectAll(".selected").classed("selected",!1),S.selectAll(".related").classed("related",!1),T&&(x=g.entity(T),S.selectAll("."+T).classed("selected",!0).classed("related",!0)),document.addEventListener("resizeWindow",function(){utilSetDimensions(R,null),E(1)},!1),A(null),O=O||n[0]}function E(e){var t=-1;e&&(t=utilGetDimensions(I.container().select(".sidebar"))[0]),(!e||e&&Math.abs(t-O)>=e)&&I.hasEntity(P)&&(O=t,R.call($))}function C(e){if(S.selectAll(".related").classed("related",!1).classed("allow",!1).classed("restrict",!1).classed("only",!1),S.selectAll("."+e).classed("related",!0),e)for(var t=D.turns(e,M),n=0;n<t.length;n++){var r=t[n],i=[r.to.way],o=r.no?"restrict":r.only?"only":"allow";if(r.only||1===t.length)r.via.ways&&(i=i.concat(r.via.ways));else if(r.to.way===e)continue;S.selectAll(utilEntitySelector(i)).classed("related",!0).classed("allow","allow"==o).classed("restrict","restrict"==o).classed("only","only"==o)}}function A(e){var t=R.selectAll(".restriction-help").html(""),n={};["from","via","to"].forEach(function(e){n[e]='<span class="qualifier">'+_t("restriction.help."+e)+"</span>"});var r=e&&e.properties&&e.properties.entity;if(r&&(e=r),T&&(x=g.entity(T),S.selectAll("."+T).classed("selected",!0).classed("related",!0)),e instanceof osmWay&&e.__from){x=e,C(T?null:x.id),S.selectAll("."+x.id).classed("related",!0);var i=!T||T!==x.id;t.append("div").html(_t("restriction.help."+(i?"select_from_name":"from_name"),{from:n.from,fromName:F(x.id,g)}))}else if(e instanceof osmTurn){var o,a,s=osmInferRestriction(g,e,m).replace(/^(only|no)\_/,""),l=!1===e.direct?_t("restriction.help.indirect"):"",c=e.no?(o="restrict",a=_t("restriction.help.turn.no_"+s,{indirect:l}),_t("restriction.help.turn.only_"+s,{indirect:""})):e.only?(o="only",a=_t("restriction.help.turn.only_"+s,{indirect:l}),_t("restriction.help.turn.allowed_"+s,{indirect:""})):(o="allow",a=_t("restriction.help.turn.allowed_"+s,{indirect:l}),_t("restriction.help.turn.no_"+s,{indirect:""}));if(t.append("div").attr("class","qualifier "+o).text(a),t.append("div").html(_t("restriction.help.from_name_to_name",{from:n.from,fromName:F(e.from.way,g),to:n.to,toName:F(e.to.way,g)})),e.via.ways&&e.via.ways.length){for(var u=[],p=0;p<e.via.ways.length;p++){var d=u[u.length-1],f=F(e.via.ways[p],g);d&&f===d||u.push(f)}t.append("div").html(_t("restriction.help.via_names",{via:n.via,viaNames:u.join(", ")}))}l||t.append("div").text(_t("restriction.help.toggle",{turn:c.trim()})),C(null);var h=e.path.slice();S.selectAll(utilEntitySelector(h)).classed("related",!0).classed("allow","allow"===o).classed("restrict","restrict"===o).classed("only","only"===o)}else C(null),T?t.append("div").html(_t("restriction.help.from_name",{from:n.from,fromName:F(T,g)})):t.append("div").html(_t("restriction.help.select_from",{from:n.from}))}}function F(e,t){var n=t.entity(e),r=utilDisplayName(n)||"",i=_mainPresetIndex.match(n,t),o=i&&i.name()||utilDisplayType(n.id);return r||o}return u.entityIDs=function(e){N=T=D=null,P=e[0]},u.tags=function(){},u.focus=function(){},u.off=function(e){L&&(e.selectAll(".surface").call(k.off).on("click.restrictions",null).on("mouseover.restrictions",null),select(window).on("resize.restrictions",null))},utilRebind(u,e,"on")}function uiFieldTextarea(r,i){var o,a=dispatch("change"),s=select(null);function e(e){var t=(t=e.selectAll(".form-field-input-wrap").data([0])).enter().append("div").attr("class","form-field-input-wrap form-field-input-"+r.type).merge(t);s=(s=t.selectAll("textarea").data([0])).enter().append("textarea").attr("id",r.domId).call(utilNoAuto).on("input",n(!0)).on("blur",n()).on("change",n()).merge(s)}function n(n){return function(){var e,t=utilGetSetValue(s);n||(t=i.cleanTagValue(t)),!t&&Array.isArray(o[r.key])||((e={})[r.key]=t||void 0,a.call("change",this,e,n))}}return e.tags=function(e){o=e;var t=Array.isArray(e[r.key]);utilGetSetValue(s,!t&&e[r.key]?e[r.key]:"").attr("title",t?e[r.key].filter(Boolean).join("\n"):void 0).attr("placeholder",t?_t("inspector.multiple_values"):r.placeholder()||_t("inspector.unknown")).classed("mixed",t)},e.focus=function(){s.node().focus()},utilRebind(e,a,"on")}function uiFieldWikidata(a,d){var f=services.wikidata,s=dispatch("change"),l=select(null),c=select(null),h=null,i=null,u="",g=[],m=a.keys&&a.keys.find(function(e){return e.includes("wikipedia")}),o="wikidata"===a.key?"name":a.key.split(":")[0],p=uiCombobox(d,"combo-"+a.safeid).caseSensitive(!0).minItems(1);function t(e){var t=(l=e).selectAll(".form-field-input-wrap").data([0]),n=(t=t.enter().append("div").attr("class","form-field-input-wrap form-field-input-"+a.type).merge(t)).selectAll("ul").data([0]),r=(n=n.enter().append("ul").attr("class","rows").merge(n)).selectAll("li.wikidata-search").data([0]),i=r.enter().append("li").attr("class","wikidata-search");i.append("input").attr("type","text").attr("id",a.domId).style("flex","1").call(utilNoAuto).on("focus",function(){var e=select(this).node();e.setSelectionRange(0,e.value.length)}).on("blur",function(){v()}).call(p.fetcher(y)),p.on("accept",function(e){h=e.id,function(){var e={};e[a.key]=h,s.call("change",this,e);var u=d.graph(),p=g;f.entityByQID(h,function(e,r){if(!e&&d.graph()===u&&r.sitelinks){var t,n,i,o,a=f.languagesToQuery();if(["labels","descriptions"].forEach(function(e){var t,n;!r[e]||0!==(t=Object.keys(r[e])).length&&(n=t[0],-1===a.indexOf(n)&&a.push(n))}),m){for(var s in a){var l=a[s],c=l.replace("-","_")+"wiki";if(r.sitelinks[c]){t=!0,i=l+":"+r.sitelinks[c].title;break}}t||(n=Object.keys(r.sitelinks).filter(function(e){return e.endsWith("wiki")}),i=0===n.length?null:n[0].slice(0,-4).replace("_","-")+":"+r.sitelinks[n[0]].title)}void 0===(i=i&&d.cleanTagValue(i))||(o=p.map(function(e){var t=d.hasEntity(e);if(t){var n=Object.assign({},t.tags);if(null===i){if(!n[m])return;delete n[m]}else n[m]=i;return actionChangeTags(e,n)}}).filter(Boolean)).length&&d.overwrite(function(t){return o.forEach(function(e){t=e(t)}),t},d.history().undoAnnotation())}})}()}).on("cancel",function(){v()}),i.append("button").attr("class","form-field-button wiki-link").attr("title",_t("icons.view_on",{domain:"wikidata.org"})).attr("tabindex",-1).call(svgIcon("#iD-icon-out-link")).on("click",function(){event.preventDefault(),u&&window.open(u,"_blank")}),r=r.merge(i),c=r.select("input");var o=n.selectAll("li.labeled-input").data(["description","identifier"]).enter().append("li").attr("class",function(e){return"labeled-input preset-wikidata-"+e});o.append("span").attr("class","label").text(function(e){return _t("wikidata."+e)}),o.append("input").attr("type","text").call(utilNoAuto).classed("disabled","true").attr("readonly","true"),o.append("button").attr("class","form-field-button").attr("title",_t("icons.copy")).attr("tabindex",-1).call(svgIcon("#iD-operation-copy")).on("click",function(){event.preventDefault(),select(this.parentNode).select("input").node().select(),document.execCommand("copy")})}function y(e,r){if(!e&&o)for(var t in g){var n=d.hasEntity(g[t]);if(n.tags[o]){e=n.tags[o];break}}f.itemsForSearchQuery(e,function(e,t){if(!e){for(var n in t)t[n].value=t[n].label+" ("+t[n].id+")",t[n].title=t[n].description;r&&r(t)}})}function v(){var e="";i&&0===(e=_(i,"labels")).length&&(e=i.id.toString()),utilGetSetValue(c,e)}function _(e,t){if(!e[t])return"";var n=e[t],r=Object.keys(n);if(0===r.length)return"";var i=f.languagesToQuery();for(var o in i){var a=n[i[o]];if(a&&a.value&&0<a.value.length)return a.value}return n[r[0]].value}return t.tags=function(e){var t=Array.isArray(e[a.key]);function r(){i=null,v(),l.select(".preset-wikidata-description").style("display","none"),l.select(".preset-wikidata-identifier").style("display","none"),l.select("button.wiki-link").classed("disabled",!0),u=h&&""!==h?"https://wikidata.org/wiki/Special:Search?search="+h:""}c.attr("title",t?e[a.key].filter(Boolean).join("\n"):null).attr("placeholder",t?_t("inspector.multiple_values"):"").classed("mixed",t),h="string"==typeof e[a.key]&&e[a.key]||"",/^Q[0-9]*$/.test(h)?(u="https://wikidata.org/wiki/"+h,f.entityByQID(h,function(e,t){var n;e?r():(i=t,v(),n=_(t,"descriptions"),l.select("button.wiki-link").classed("disabled",!1),l.select(".preset-wikidata-description").style("display",function(){return 0<n.length?"flex":"none"}).select("input").attr("value",n),l.select(".preset-wikidata-identifier").style("display",function(){return t.id?"flex":"none"}).select("input").attr("value",t.id))})):r()},t.entityIDs=function(e){return arguments.length?(g=e,t):g},t.focus=function(){c.node().focus()},utilRebind(t,s,"on")}function uiFieldWikipedia(o,s){var l,t,n=arguments,c=dispatch("change"),i=services.wikipedia,u=services.wikidata,p=select(null),d=select(null),a="",f=[];_mainFileFetcher.get("wmf_sitematrix").then(function(e){f=e,t&&b(t)}).catch(function(){});var h=uiCombobox(s,"wikipedia-lang").fetcher(function(e,t){var n=e.toLowerCase();t(f.filter(function(e){return 0<=e[0].toLowerCase().indexOf(n)||0<=e[1].toLowerCase().indexOf(n)||0<=e[2].toLowerCase().indexOf(n)}).map(function(e){return{value:e[1]}}))}),g=uiCombobox(s,"wikipedia-title").fetcher(function(e,n){if(!e)for(var t in e="",l){var r=s.hasEntity(l[t]);if(r.tags.name){e=r.tags.name;break}}(7<e.length?i.search:i.suggestions)(m()[2],e,function(e,t){n(t.map(function(e){return{value:e}}))})});function r(e){var t=e.selectAll(".form-field-input-wrap").data([0]),n=(n=(t=t.enter().append("div").attr("class","form-field-input-wrap form-field-input-"+o.type).merge(t)).selectAll(".wiki-lang-container").data([0])).enter().append("div").attr("class","wiki-lang-container").merge(n);utilGetSetValue(p=(p=n.selectAll("input.wiki-lang").data([0])).enter().append("input").attr("type","text").attr("class","wiki-lang").attr("placeholder",_t("translate.localized_translation_language")).call(utilNoAuto).call(h).merge(p),m()[1]),p.on("blur",y).on("change",y);var r=(r=t.selectAll(".wiki-title-container").data([0])).enter().append("div").attr("class","wiki-title-container").merge(r);(d=(d=r.selectAll("input.wiki-title").data([0])).enter().append("input").attr("type","text").attr("class","wiki-title").attr("id",o.domId).call(utilNoAuto).call(g).merge(d)).on("blur",v).on("change",_);var i=r.selectAll(".wiki-link").data([0]);(i=i.enter().append("button").attr("class","form-field-button wiki-link").attr("tabindex",-1).attr("title",_t("icons.view_on",{domain:"wikipedia.org"})).call(svgIcon("#iD-icon-out-link")).merge(i)).on("click",function(){event.preventDefault(),a&&window.open(a,"_blank")})}function m(){var t,n=utilGetSetValue(p).toLowerCase(),r=_mainLocalizer.localeCode().toLowerCase();return f.find(function(e){return e[2]===r&&(t=e),e[0].toLowerCase()===n||e[1].toLowerCase()===n||e[2]===n})||t||["English","English","en"]}function y(){utilGetSetValue(p,m()[1]),_(!0)}function v(){_(!0)}function _(e){var o,a,t=utilGetSetValue(d),n=t.match(/https?:\/\/([-a-z]+)\.wikipedia\.org\/(?:wiki|\1-[-a-z]+)\/([^#]+)(?:#(.+))?/),r=n&&f.find(function(e){return n[1]===e[2]}),i={};r&&(t=decodeURIComponent(n[2]).replace(/_/g," "),n[3]&&(t+="#"+decodeURIComponent(n[3]).replace(/_/g," ")),t=t.slice(0,1).toUpperCase()+t.slice(1),utilGetSetValue(p,r[1]),utilGetSetValue(d,t)),i.wikipedia=t?s.cleanTagValue(m()[2]+":"+t):void 0,c.call("change",this,i),!e&&t&&m()[2]&&(o=s.graph(),a=l,u.itemsByTitle(m()[2],t,function(e,t){var n,r,i;!e&&t&&Object.keys(t).length&&s.graph()===o&&(n=Object.keys(t),r=n&&n.find(function(e){return e.match(/^Q\d+$/)}),(i=a.map(function(e){var t=s.entity(e).tags,n=Object.assign({},t);if(n.wikidata!==r)return n.wikidata=r,actionChangeTags(e,n)}).filter(Boolean)).length&&s.overwrite(function(t){return i.forEach(function(e){t=e(t)}),t},s.history().undoAnnotation()))}))}function b(e){var t="string"==typeof e[o.key]?e[o.key]:"",n=t.match(/([^:]+):([^#]+)(?:#(.+))?/),r=n&&f.find(function(e){return n[1]===e[2]}),i=n&&n[3];if(r){if(utilGetSetValue(p,r[1]),utilGetSetValue(d,n[2]+(i?"#"+i:"")),i)try{i=encodeURIComponent(i.replace(/ /g,"_")).replace(/%/g,".")}catch(e){i=i.replace(/ /g,"_")}a="https://"+n[1]+".wikipedia.org/wiki/"+n[2].replace(/ /g,"_")+(i?"#"+i:"")}else utilGetSetValue(d,t),a=t&&""!==t?(utilGetSetValue(p,""),"https://en.wikipedia.org/wiki/Special:Search?search="+t):""}return r.tags=function(e){b(t=e)},r.entityIDs=function(e){return n.length?(l=e,r):l},r.focus=function(){d.node().focus()},utilRebind(r,c,"on")}uiFieldRestrictions.supportsMultiselection=!1,uiFieldWikipedia.supportsMultiselection=!1;var uiFields={access:uiFieldAccess,address:uiFieldAddress,check:uiFieldCheck,combo:uiFieldCombo,cycleway:uiFieldCycleway,defaultCheck:uiFieldCheck,email:uiFieldText,identifier:uiFieldText,lanes:uiFieldLanes,localized:uiFieldLocalized,maxspeed:uiFieldMaxspeed,multiCombo:uiFieldCombo,networkCombo:uiFieldCombo,number:uiFieldText,onewayCheck:uiFieldCheck,radio:uiFieldRadio,restrictions:uiFieldRestrictions,semiCombo:uiFieldCombo,structureRadio:uiFieldRadio,tel:uiFieldText,text:uiFieldText,textarea:uiFieldTextarea,typeCombo:uiFieldCombo,url:uiFieldText,wikidata:uiFieldWikidata,wikipedia:uiFieldWikipedia};function uiField(a,e,s,l){l=Object.assign({show:!0,wrap:!0,remove:!0,revert:!0,info:!0},l);var n=dispatch("change","revert"),c=Object.assign({},e);c.domId=utilUniqueDomId("form-field-"+c.safeid);var t=l.show,u="",p={},d=!1,f=uiTooltip().title(_t("inspector.lock.suggestion",{label:c.label})).placement("bottom");function h(){c.impl=uiFields[c.type](c,a).on("change",function(e,t){n.call("change",c,e,t)}),s&&(c.entityIDs=s,c.impl.entityIDs&&c.impl.entityIDs(s))}function g(){return c.keys.some(function(e){if("multiCombo"!==c.type)return void 0!==p[e];for(var t in p)if(0===t.indexOf(e))return!0;return!1})}function m(e){event.stopPropagation(),event.preventDefault(),s&&!d&&n.call("revert",e,e.keys)}function y(e){var t;event.stopPropagation(),event.preventDefault(),d||(t={},e.keys.forEach(function(e){t[e]=void 0}),n.call("change",e,t))}return c.keys=c.keys||[c.key],t&&!c.impl&&h(),c.render=function(e){var t,n,r=e.selectAll(".form-field").data([c]),i=r.enter().append("div").attr("class",function(e){return"form-field form-field-"+e.safeid}).classed("nowrap",!l.wrap);l.wrap&&((n=(t=i.append("label").attr("class","field-label").attr("for",function(e){return e.domId})).append("span").attr("class","label-text")).append("span").attr("class","label-textvalue").text(function(e){return e.label()}),n.append("span").attr("class","label-textannotation"),l.remove&&t.append("button").attr("class","remove-icon").attr("title",_t("icons.remove")).attr("tabindex",-1).call(svgIcon("#iD-operation-delete")),l.revert&&t.append("button").attr("class","modified-icon").attr("title",_t("icons.undo")).attr("tabindex",-1).call(svgIcon("rtl"===_mainLocalizer.textDirection()?"#iD-icon-redo":"#iD-icon-undo"))),(r=r.merge(i)).select(".field-label > .remove-icon").on("click",y),r.select(".field-label > .modified-icon").on("click",m),r.each(function(e){var t,n,r,i=select(this);e.impl||h(),l.wrap&&"restrictions"===c.type&&(n=uiFieldHelp(a,"restrictions")),l.wrap&&l.info&&(r=e.key,"multiCombo"===e.type&&(r=r.replace(/:$/,"")),t=uiTagReference(e.reference||{key:r}),"hover"===u&&t.showing(!1)),i.call(e.impl),n&&i.call(n.body).select(".field-label").call(n.button),t&&i.call(t.body).select(".field-label").call(t.button),e.impl.tags(p)}),r.classed("locked",d).classed("modified",!(!s||!s.length)&&s.some(function(e){var t=a.graph().base().entities[e],n=a.graph().entity(e);return c.keys.some(function(e){return t?n.tags[e]!==t.tags[e]:n.tags[e]})})).classed("present",g());var o=r.selectAll(".field-label .label-textannotation").selectAll(".icon").data(d?[0]:[]);o.exit().remove(),o.enter().append("svg").attr("class","icon").append("use").attr("xlink:href","#fas-lock"),r.call(d?f:f.destroy)},c.state=function(e){return arguments.length?(u=e,c):u},c.tags=function(e){return arguments.length?(p=e,g()&&!t&&(t=!0,c.impl||h()),c):p},c.locked=function(e){return arguments.length?(d=e,c):d},c.show=function(){var e;t=!0,c.impl||h(),c.default&&c.key&&p[c.key]!==c.default&&((e={})[c.key]=c.default,n.call("change",this,e))},c.isShown=function(){return t},c.isAllowed=function(){if(s&&1<s.length&&!1===uiFields[c.type].supportsMultiselection)return!1;if(c.geometry&&!s.every(function(e){return c.matchGeometry(a.graph().geometry(e))}))return!1;if(c.countryCodes||c.notCountryCodes){var e=s&&s.length&&s.reduce(function(e,t){var n=a.graph().entity(t);return e.extend(n.extent(a.graph()))},geoExtent());if(!e)return!0;var t=iso1A2Code(e.center());if(!t)return!1;if(t=t.toLowerCase(),c.countryCodes&&-1===c.countryCodes.indexOf(t))return!1;if(c.notCountryCodes&&-1!==c.notCountryCodes.indexOf(t))return!1}var r=c.prerequisiteTag;return!(s&&!g()&&r&&!s.every(function(e){var t=a.graph().entity(e);if(r.key){var n=t.tags[r.key];if(!n)return!1;if(r.valueNot)return r.valueNot!==n;if(r.value)return r.value===n}else if(r.keyNot&&t.tags[r.keyNot])return!1;return!0}))},c.focus=function(){c.impl&&c.impl.focus()},utilRebind(c,n,"on")}function uiFormFields(e){var f=uiCombobox(e,"more-fields").minItems(1),h=[],g="",m="",y="";function v(n){var e=h.filter(function(e){return e.isAllowed()}),t=e.filter(function(e){return e.isShown()}),r=e.filter(function(e){return!e.isShown()}),i=n.selectAll(".form-fields-container").data([0]),o=(i=i.enter().append("div").attr("class","form-fields-container "+(y||"")).merge(i)).selectAll(".wrap-form-field").data(t,function(e){return e.id+(e.entityIDs?e.entityIDs.join():"")});o.exit().remove();var a=o.enter().append("div").attr("class",function(e){return"wrap-form-field wrap-form-field-"+e.safeid});(o=o.merge(a)).order().each(function(e){select(this).call(e.render)});var s=[],l=r.map(function(e){var t=e.label();s.push(t);var n=e.terms();return e.key&&n.push(e.key),e.keys&&(n=n.concat(e.keys)),{title:t,value:t,field:e,terms:n}}),c=s.slice(0,3).join(", ")+(3<s.length?"…":""),u=n.selectAll(".more-fields").data("hover"===m||0===l.length?[]:[0]);u.exit().remove();var p=u.enter().append("div").attr("class","more-fields").append("label");p.append("span").text(_t("inspector.add_fields"));var d=(u=p.merge(u)).selectAll(".value").data([0]);d.exit().remove(),(d=d.enter().append("input").attr("class","value").attr("type","text").attr("placeholder",c).call(utilNoAuto).merge(d)).call(utilGetSetValue,"").call(f.data(l).on("accept",function(e){var t;e&&((t=e.field).show(),n.call(v),"semiCombo"!==t.type&&"multiCombo"!==t.type&&t.focus())})),g!==c&&(d.attr("placeholder",c),g=c)}return v.fieldsArr=function(e){return arguments.length?(h=e||[],v):h},v.state=function(e){return arguments.length?(m=e,v):m},v.klass=function(e){return arguments.length?(y=e,v):y},v}function uiSectionPresetFields(p){var d,f,h,g,t=uiSection("preset-fields",p).title(function(){return _t("inspector.fields")}).disclosureContent(function(e){{var n,t,r,i,o,a,s,l,c,u;f||(n=p.graph(),t=Object.keys(g.reduce(function(e,t){return e[n.entity(t).geometry(n)]=!0},{})),r=_mainPresetIndex,i=[],o=[],v.forEach(function(e){var t=e.fields(),n=e.moreFields();i=utilArrayUnion(i,t),o=utilArrayUnion(o,n),a=a?a.filter(function(e){return-1!==t.indexOf(e)||-1!==n.indexOf(e)}):utilArrayUnion(t,n)}),s=i.filter(function(e){return-1!==a.indexOf(e)}),l=o.filter(function(e){return-1!==a.indexOf(e)}),f=[],s.forEach(function(e){e.matchAllGeometry(t)&&f.push(uiField(p,e,g))}),(c=1===g.length&&n.hasEntity(g[0]))&&c.isHighwayIntersection(n)&&r.field("restrictions")&&f.push(uiField(p,r.field("restrictions"),g)),(u=utilArrayUnion(l,r.universal())).sort(function(e,t){return e.label().localeCompare(t.label(),_mainLocalizer.localeCode())}),u.forEach(function(e){-1===s.indexOf(e)&&e.matchAllGeometry(t)&&f.push(uiField(p,e,g,{show:!1}))}),f.forEach(function(n){n.on("change",function(e,t){m.call("change",n,g,e,t)}).on("revert",function(e){m.call("revert",n,e)})}))}f.forEach(function(e){e.state(d).tags(h)}),e.call(y.fieldsArr(f).state(d).klass("grouped-items-area")),e.selectAll(".wrap-form-field input").on("keydown",function(){13===event.keyCode&&p.container().select(".combobox").empty()&&p.enter(modeBrowse(p))})}),m=dispatch("change","revert"),y=uiFormFields(p),v=[];return t.presets=function(e){return arguments.length?(v&&e&&utilArrayIdentical(v,e)||(v=e,f=null),t):v},t.state=function(e){return arguments.length?(d=e,t):d},t.tags=function(e){return arguments.length?(h=e,t):h},t.entityIDs=function(e){return arguments.length?(e&&g&&utilArrayIdentical(g,e)||(g=e,f=null),t):g},utilRebind(t,m,"on")}function uiSectionRawMemberEditor(u){var p,t=uiSection("raw-member-editor",u).shouldDisplay(function(){if(!p||1!==p.length)return!1;var e=u.hasEntity(p[0]);return e&&"relation"===e.type}).title(function(){var e=u.hasEntity(p[0]);if(!e)return"";var t=(e.members.length>f?">":"")+e.members.slice(0,f).length;return _t("inspector.title_count",{title:_t("inspector.members"),count:t})}).disclosureContent(function(n){var r=p[0],i=[],o=u.entity(r);o.members.slice(0,f).forEach(function(e,t){i.push({index:t,id:e.id,type:e.type,role:e.role,relation:o,member:u.hasEntity(e.id),domId:utilUniqueDomId(r+"-member-"+t)})});var e=n.selectAll(".member-list").data([0]),t=(e=e.enter().append("ul").attr("class","member-list").merge(e)).selectAll("li").data(i,function(e){return osmEntity.key(e.relation)+","+e.index+","+(e.member?osmEntity.key(e.member):"incomplete")});t.exit().each(function(){select(this).selectAll("input.member-role").call(uiCombobox.off,u)}).remove();var a=t.enter().append("li").attr("class","member-row form-field").classed("member-incomplete",function(e){return!e.member});a.each(function(e){var t,n,r=select(this),i=r.append("label").attr("class","field-label").attr("for",e.domId);e.member?(r.on("mouseover",function(){utilHighlightEntities([e.id],!0,u)}).on("mouseout",function(){utilHighlightEntities([e.id],!1,u)}),(t=i.append("span").attr("class","label-text").append("a").attr("href","#").on("click",m)).append("span").attr("class","member-entity-type").text(function(e){var t=_mainPresetIndex.match(e.member,u.graph());return t&&t.name()||utilDisplayType(e.member.id)}),t.append("span").attr("class","member-entity-name").text(function(e){return utilDisplayName(e.member)}),i.append("button").attr("tabindex",-1).attr("title",_t("icons.remove")).attr("class","remove member-delete").call(svgIcon("#iD-operation-delete")),i.append("button").attr("class","member-zoom").attr("title",_t("icons.zoom_to")).call(svgIcon("#iD-icon-framed-dot","monochrome")).on("click",g)):((n=i.append("span").attr("class","label-text")).append("span").attr("class","member-entity-type").text(_t("inspector."+e.type,{id:e.id})),n.append("span").attr("class","member-entity-name").text(_t("inspector.incomplete",{id:e.id})),i.append("button").attr("class","member-download").attr("title",_t("icons.download")).attr("tabindex",-1).call(svgIcon("#iD-icon-load")).on("click",h))});var s,l,c=a.append("div").attr("class","form-field-input-wrap form-field-input-member");c.append("input").attr("class","member-role").attr("id",function(e){return e.domId}).property("type","text").attr("placeholder",_t("inspector.role")).call(utilNoAuto),d&&c.each(function(i){var e=select(this).selectAll("input.member-role"),t=e.property("value");e.call(uiCombobox(u,"member-role").fetcher(function(n,r){var e=i.member?u.graph().geometry(i.member.id):"relation"===i.type?"relation":"way"===i.type?"line":"point",t=o.tags.type;d.roles({debounce:!0,rtype:t||"",geometry:e,query:n},function(e,t){e||r(function(e,t){for(var n=[],r=[],i=0;i<t.length;i++)t[i].value.substring(0,e.length)===e?n.push(t[i]):r.push(t[i]);return n.concat(r)}(n,t))})}).on("cancel",function(){e.property("value",t)}))});(t=t.merge(a).order()).select("input.member-role").property("value",function(e){return e.role}).on("blur",y).on("change",y),t.select("button.member-delete").on("click",v),t.call(d3_drag().on("start",function(){s={x:event.x,y:event.y},l=null}).on("drag",function(e,r){var i=event.x-s.x,o=event.y-s.y;!select(this).classed("dragging")&&Math.sqrt(Math.pow(i,2)+Math.pow(o,2))<=5||(select(this).classed("dragging",!0),l=null,n.selectAll("li.member-row").style("transform",function(e,t){var n=select(this).node();return r===t?"translate("+i+"px, "+o+"px)":r<t&&event.y>n.offsetTop?((null===l||l<t)&&(l=t),"translateY(-100%)"):t<r&&event.y<n.offsetTop+n.offsetHeight?((null===l||t<l)&&(l=t),"translateY(100%)"):null}))}).on("end",function(e,t){select(this).classed("dragging")&&(select(this).classed("dragging",!1),n.selectAll("li.member-row").style("transform",null),null!==l&&u.perform(actionMoveMember(e.relation.id,t,l),_t("operations.reorder_members.annotation")))}))}),d=services.taginfo,f=1e3;function h(e){event.preventDefault(),select(this.parentNode).classed("tag-reference-loading",!0),u.loadEntity(e.id,function(){t.reRender()})}function g(e){event.preventDefault();var t=u.entity(e.id);u.map().zoomToEase(t),utilHighlightEntities([e.id],!0,u)}function m(e){event.preventDefault(),utilHighlightEntities([e.id],!1,u);var t=u.entity(e.id),n=u.map().extent();t.intersects(n,u.graph())||u.map().zoomToEase(t),u.enter(modeSelect(u,[e.id]))}function y(e){var t,n=e.role,r=u.cleanRelationRole(select(this).property("value"));n!==r&&(t={id:e.id,type:e.type,role:r},u.perform(actionChangeMember(e.relation.id,t,e.index),_t("operations.change_role.annotation")))}function v(e){utilHighlightEntities([e.id],!1,u),u.perform(actionDeleteMember(e.relation.id,e.index),_t("operations.delete_member.annotation")),u.hasEntity(e.relation.id)||u.enter(modeBrowse(u))}return t.entityIDs=function(e){return arguments.length?(p=e,t):p},t}function uiSectionRawMembershipEditor(v){var _,b=uiSection("raw-membership-editor",v).shouldDisplay(function(){return S&&1===S.length}).title(function(){var e=v.hasEntity(S[0]);if(!e)return"";var t=v.graph().parentRelations(e),n=(t.length>E?">":"")+t.slice(0,E).length;return _t("inspector.title_count",{title:_t("inspector.relations"),count:n})}).disclosureContent(function(e){var i=S[0],r=v.entity(i),t=v.graph().parentRelations(r),o=[];t.slice(0,E).forEach(function(n){n.members.forEach(function(e,t){e.id===r.id&&o.push({relation:n,member:e,index:t,domId:utilUniqueDomId(i+"-membership-"+n.id+"-"+t)})})});var n=e.selectAll(".member-list").data([0]),a=(n=n.enter().append("ul").attr("class","member-list").merge(n)).selectAll("li.member-row-normal").data(o,function(e){return osmEntity.key(e.relation)+","+e.index});a.exit().each(function(){select(this).selectAll("input.member-role").call(uiCombobox.off,v)}).remove();var s=a.enter().append("li").attr("class","member-row member-row-normal form-field");s.on("mouseover",function(e){utilHighlightEntities([e.relation.id],!0,v)}).on("mouseout",function(e){utilHighlightEntities([e.relation.id],!1,v)});var l=s.append("label").attr("class","field-label").attr("for",function(e){return e.domId}),c=l.append("span").attr("class","label-text").append("a").attr("href","#").on("click",C);c.append("span").attr("class","member-entity-type").text(function(e){var t=_mainPresetIndex.match(e.relation,v.graph());return t&&t.name()||_t("inspector.relation")}),c.append("span").attr("class","member-entity-name").text(function(e){return utilDisplayName(e.relation)}),l.append("button").attr("tabindex",-1).attr("class","remove member-delete").call(svgIcon("#iD-operation-delete")).on("click",k),l.append("button").attr("class","member-zoom").attr("title",_t("icons.zoom_to")).call(svgIcon("#iD-icon-framed-dot","monochrome")).on("click",A);var u=s.append("div").attr("class","form-field-input-wrap form-field-input-member");u.append("input").attr("class","member-role").attr("id",function(e){return e.domId}).property("type","text").attr("placeholder",_t("inspector.role")).call(utilNoAuto).property("value",function(e){return e.member.role}).on("blur",I).on("change",I),w&&u.each(function(t){var e=select(this).selectAll("input.member-role"),n=e.property("value");e.call(uiCombobox(v,"member-role").fetcher(function(n,r){var e=t.relation.tags.type;w.roles({debounce:!0,rtype:e||"",geometry:v.graph().geometry(i),query:n},function(e,t){e||r(function(e,t){for(var n=[],r=[],i=0;i<t.length;i++)t[i].value.substring(0,e.length)===e?n.push(t[i]):r.push(t[i]);return n.concat(r)}(n,t))})}).on("cancel",function(){e.property("value",n)}))});var p=n.selectAll(".member-row-new").data(_?[0]:[]);p.exit().remove();var d=p.enter().append("li").attr("class","member-row member-row-new form-field"),f=d.append("label").attr("class","field-label");f.append("input").attr("placeholder",_t("inspector.choose_relation")).attr("type","text").attr("class","member-entity-input").call(utilNoAuto),f.append("button").attr("tabindex",-1).attr("class","remove member-delete").call(svgIcon("#iD-operation-delete")).on("click",function(){n.selectAll(".member-row-new").remove()}),d.append("div").attr("class","form-field-input-wrap form-field-input-member").append("input").attr("class","member-role").property("type","text").attr("placeholder",_t("inspector.role")).call(utilNoAuto),(p=p.merge(d)).selectAll(".member-entity-input").on("blur",y).call(x.on("accept",function(e){if(!e)return void y();e.relation&&utilHighlightEntities([e.relation.id],!1,v);var t=v.cleanRelationRole(n.selectAll(".member-row-new .member-role").property("value"));!function(e,t){this.blur(),_=!1;var n={id:S[0],type:v.entity(S[0]).type,role:t};{var r;e.relation?v.perform(actionAddMember(e.relation.id,n),_t("operations.add_member.annotation")):(r=osmRelation(),v.perform(actionAddEntity(r),actionAddMember(r.id,n),_t("operations.add.annotation.relation")),v.enter(modeSelect(v,[r.id]).newFeature(!0)))}}(e,t)}).on("cancel",y));var h=e.selectAll(".add-row").data([0]),g=h.enter().append("div").attr("class","add-row"),m=g.append("button").attr("class","add-relation");function y(){p.selectAll(".member-entity-input").property("value",""),v.surface().selectAll(".highlighted").classed("highlighted",!1)}m.call(svgIcon("#iD-icon-plus","light")),m.call(uiTooltip().title(_t("inspector.add_to_relation")).placement("ltr"===_mainLocalizer.textDirection()?"right":"left")),g.append("div").attr("class","space-value"),g.append("div").attr("class","space-buttons"),(h=h.merge(g)).select(".add-relation").on("click",function(){_=!0,b.reRender(),n.selectAll(".member-entity-input").node().focus()})}),w=services.taginfo,x=uiCombobox(v,"parent-relation").minItems(1).fetcher(function(n,e){var t={relation:null,value:_t("inspector.new_relation")},r=S[0],i=[],o=v.graph();function a(e){var t=_mainPresetIndex.match(e,o);return(t&&t.name()||_t("inspector.relation"))+" "+(utilDisplayName(e)||"")}var s=n&&v.hasEntity(n.toLowerCase());{s&&"relation"===s.type&&s.id!==r?i.push({relation:s,value:a(s)+" "+s.id}):(v.history().intersects(v.map().extent()).forEach(function(e){var t;"relation"===e.type&&e.id!==r&&(t=a(e),n&&-1===(t+" "+e.id).toLowerCase().indexOf(n.toLowerCase())||i.push({relation:e,value:t}))}),i.sort(function(e,t){return osmRelation.creationOrder(e.relation,t.relation)}),Object.values(utilArrayGroupBy(i,"value")).filter(function(e){return 1<e.length}).forEach(function(e){e.forEach(function(e){e.value+=" "+e.relation.id})}))}i.forEach(function(e){e.title=e.value}),i.unshift(t),e(i)}).itemsMouseEnter(function(e){e.relation&&utilHighlightEntities([e.relation.id],!0,v)}).itemsMouseLeave(function(e){e.relation&&utilHighlightEntities([e.relation.id],!1,v)}),n=!1,S=[],E=1e3;function C(e){event.preventDefault(),utilHighlightEntities([e.relation.id],!1,v),v.enter(modeSelect(v,[e.relation.id]))}function A(e){event.preventDefault();var t=v.entity(e.relation.id);v.map().zoomToEase(t),utilHighlightEntities([e.relation.id],!0,v)}function I(e){var t;0!==e&&(n||(e.member.role!==(t=v.cleanRelationRole(select(this).property("value")))&&(n=!0,v.perform(actionChangeMember(e.relation.id,Object.assign({},e.member,{role:t}),e.index),_t("operations.change_role.annotation"))),n=!1))}function k(e){this.blur(),0!==e&&(utilHighlightEntities([e.relation.id],!1,v),v.perform(actionDeleteMember(e.relation.id,e.index),_t("operations.delete_member.annotation")))}return b.entityIDs=function(e){return arguments.length?(S=e,_=!1,b):S},b}function uiSectionSelectionList(a){var s=[],t=uiSection("selected-features",a).shouldDisplay(function(){return 1<s.length}).title(function(){return _t("inspector.title_count",{title:_t("inspector.features"),count:s.length})}).disclosureContent(function(e){var t=e.selectAll(".feature-list").data([0]);t=t.enter().append("div").attr("class","feature-list").merge(t);var n=s.map(function(e){return a.hasEntity(e)}).filter(Boolean),r=t.selectAll(".feature-list-item").data(n,osmEntity.key);r.exit().remove();var i=r.enter().append("div").attr("class","feature-list-item").on("click",l);i.each(function(e){select(this).on("mouseover",function(){utilHighlightEntities([e.id],!0,a)}),select(this).on("mouseout",function(){utilHighlightEntities([e.id],!1,a)})});var o=i.append("button").attr("class","label");i.append("button").attr("class","close").attr("title",_t("icons.deselect")).on("click",c).call(svgIcon("#iD-icon-close")),o.append("span").attr("class","entity-geom-icon").call(svgIcon("","pre-text")),o.append("span").attr("class","entity-type"),o.append("span").attr("class","entity-name"),(r=r.merge(i)).selectAll(".entity-geom-icon use").attr("href",function(){return"#iD-icon-"+this.parentNode.parentNode.__data__.geometry(a.graph())}),r.selectAll(".entity-type").text(function(e){return _mainPresetIndex.match(e,a.graph()).name()}),r.selectAll(".entity-name").text(function(e){return utilDisplayName(a.entity(e.id))})});function l(e){a.enter(modeSelect(a,[e.id]))}function c(e){event.stopPropagation();var t=s.slice(),n=t.indexOf(e.id);-1<n&&(t.splice(n,1),a.enter(modeSelect(a,t)))}return a.history().on("change.selectionList",function(e){e&&t.reRender()}),t.entityIDs=function(e){return arguments.length?(s=e,t):s},t}function uiEntityEditor(h){var a,g,t,s,l=dispatch("choose"),c="select",m=!1,u=!1,p=[];function d(r){var t=utilCombinedTags(g,h.graph()),e=r.selectAll(".header").data([0]),n=e.enter().append("div").attr("class","header fillL cf");n.append("button").attr("class","preset-reset preset-choose").call(svgIcon("rtl"===_mainLocalizer.textDirection()?"#iD-icon-forward":"#iD-icon-backward")),n.append("button").attr("class","close").on("click",function(){h.enter(modeBrowse(h))}).call(svgIcon(u?"#iD-icon-apply":"#iD-icon-close")),n.append("h3"),(e=e.merge(n)).selectAll("h3").text(1===g.length?_t("inspector.edit"):_t("inspector.edit_features")),e.selectAll(".preset-reset").on("click",function(){l.call("choose",this,p)});var i=r.selectAll(".inspector-body").data([0]),o=i.enter().append("div").attr("class","entity-editor inspector-body sep-top");i=i.merge(o),(s=s||[uiSectionSelectionList(h),uiSectionFeatureType(h).on("choose",function(e){l.call("choose",this,e)}),uiSectionEntityIssues(h),uiSectionPresetFields(h).on("change",f).on("revert",y),uiSectionRawTagEditor("raw-tag-editor",h).on("change",f),uiSectionRawMemberEditor(h),uiSectionRawMembershipEditor(h)]).forEach(function(e){e.entityIDs&&e.entityIDs(g),e.presets&&e.presets(p),e.tags&&e.tags(t),e.state&&e.state(c),i.call(e.render)}),i.selectAll(".key-trap-wrap").data([0]).enter().append("div").attr("class","key-trap-wrap").append("input").attr("type","text").attr("class","key-trap").on("keydown.key-trap",function(){9!==event.keyCode||event.shiftKey||(event.preventDefault(),i.select("input").node().focus())}),h.history().on("change.entity-editor",function(e){if(r.selectAll(".entity-editor").empty())return;if("hide"===c)return;if(e&&!e.didChange.properties&&!e.didChange.addition&&!e.didChange.deletion)return;if(!(g=g.filter(h.hasEntity)).length)return;var t=1===p.length&&p[0];v();var n=h.graph();d.modified(a!==n),d(r),t&&1===p.length&&t!==p[0]&&h.container().selectAll(".entity-editor button.preset-reset .label").style("background-color","#fff").transition().duration(750).style("background-color",null)})}function f(e,t,n){var r,i,o=[];for(var a in e){var s,l=e[a],c=h.entity(l),u=Object.assign({},c.tags);for(var p in t){p&&(void 0===(s=t[p])&&!u.hasOwnProperty(p)||(u[p]=s))}n||(u=utilCleanTags(u)),fastDeepEqual(c.tags,u)||o.push(actionChangeTags(l,u))}o.length&&(r=function(t){return o.forEach(function(e){t=e(t)}),t},i=_t("operations.change_tags.annotation"),m?h.overwrite(r,i):(h.perform(r,i),m=!!n)),n||h.validator().validate()}function y(e){var t,n,r=[];for(var i in g){var o=g[i],a=h.graph().base().entities[o],s={};for(var l in e){var c=e[l];s[c]=a?a.tags[c]:void 0}var u,p=h.entity(o),d=Object.assign({},p.tags);for(var f in s){f&&(void 0===(u=s[f])&&!d.hasOwnProperty(f)||(d[f]=u))}d=utilCleanTags(d),fastDeepEqual(p.tags,d)||r.push(actionChangeTags(o,d))}r.length&&(t=function(t){return r.forEach(function(e){t=e(t)}),t},n=_t("operations.change_tags.annotation"),m?h.overwrite(t,n):(h.perform(t,n),m=!1)),h.validator().validate()}function v(){var e=h.graph(),n={};for(var t in g){var r=e.hasEntity(g[t]);if(!r)return;var i=_mainPresetIndex.match(r,e);n[i.id]||(n[i.id]=0),n[i.id]+=1}var o=Object.keys(n).sort(function(e,t){return n[t]-n[e]}).map(function(e){return _mainPresetIndex.item(e)});1===p.length&&0===Object.keys(p[0].addTags||{}).length&&1===o.length&&o[0].isFallback()||d.presets(o)}return d.modified=function(e){return arguments.length?(u=e,d):u},d.state=function(e){return arguments.length?(c=e,d):c},d.entityIDs=function(e){return arguments.length?e&&g&&utilArrayIdentical(g,e)?d:(g=e,a=h.graph(),m=!1,v(),d.modified(!1)):g},d.newFeature=function(e){return arguments.length?(t=e,d):t},d.presets=function(e){return arguments.length?(utilArrayIdentical(e,p)||(p=e),d):p},utilRebind(d,l,"on")}function uiPresetList(c){var u,l,p=dispatch("cancel","choose"),i=!1;function n(e){var o,t,a,n,s,l;function r(){var e;event.keyCode===utilKeybinding.keyCodes["↓"]&&s.node().selectionStart===s.property("value").length&&(event.preventDefault(),event.stopPropagation(),(e=l.selectAll(".preset-list-button")).empty()||e.nodes()[0].focus())}u&&(o=_mainPresetIndex.matchAllGeometry(g()),e.html(""),t=e.append("div").attr("class","header fillL"),a=t.append("h3").text(_t("inspector.choose")),t.append("button").attr("class","preset-choose").on("click",function(){p.call("cancel",this)}).call(svgIcon("rtl"===_mainLocalizer.textDirection()?"#iD-icon-backward":"#iD-icon-forward")),n=e.append("div").attr("class","search-header"),s=n.append("input").attr("class","preset-search-input").attr("placeholder",_t("inspector.search")).attr("type","search").call(utilNoAuto).on("keydown",function(){0!==s.property("value").length||event.keyCode!==utilKeybinding.keyCodes["⌫"]&&event.keyCode!==utilKeybinding.keyCodes["⌦"]?0===s.property("value").length&&(event.ctrlKey||event.metaKey)&&event.keyCode===utilKeybinding.keyCodes.z?(event.preventDefault(),event.stopPropagation(),c.undo()):event.ctrlKey||event.metaKey||(select(this).on("keydown",r),r.call(this)):(event.preventDefault(),event.stopPropagation(),operationDelete(c,u)())}).on("keypress",function(){var e=s.property("value");13===event.keyCode&&e.length&&l.selectAll(".preset-list-item:first-child").each(function(e){e.choose.call(this)})}).on("input",function(){var e=s.property("value");l.classed("filtered",e.length);var t,n,r,i=u.reduce(function(e,t){var n=c.graph().entity(t);return e.extend(n.extent(c.graph()))},geoExtent());r=e.length&&i?(t=iso1A2Code(i.center()),n=o.search(e,g()[0],t&&t.toLowerCase()),_t("inspector.results",{n:n.collection.length,search:e})):(n=_mainPresetIndex.defaults(g()[0],36,!c.inIntro()),_t("inspector.choose")),l.call(d,n),a.text(r)}),n.call(svgIcon("#iD-icon-search","pre-text")),i&&s.node().focus(),l=e.append("div").attr("class","inspector-body").append("div").attr("class","preset-list").call(d,_mainPresetIndex.defaults(g()[0],36,!c.inIntro())),c.features().on("change.preset-list",h))}function d(e,t){var n=(t=t.matchAllGeometry(g())).collection.reduce(function(e,t){if(!t)return e;function r(e){var t=e.append("div").attr("class","preset-list-button-wrap"),n=g();t.append("button").attr("class","preset-list-button").call(uiPresetIcon().geometry(1===n.length&&n[0]).preset(i)).on("click",r.choose).on("keydown",f).append("div").attr("class","label").append("div").attr("class","label-inner").selectAll(".namepart").data(i.name().split(" – ")).enter().append("div").attr("class","namepart").text(function(e){return e}),t.call(r.reference.button),e.call(r.reference.body)}var i,o,a,s,n;function l(e){var t=e.append("div").attr("class","preset-list-button-wrap category");function n(){var e=select(this).classed("expanded"),t=e?"rtl"===_mainLocalizer.textDirection()?"#iD-icon-backward":"#iD-icon-forward":"#iD-icon-down";select(this).classed("expanded",!e),select(this).selectAll("div.label-inner svg.icon use").attr("href",t),l.choose()}var r=g();t.append("button").attr("class","preset-list-button").classed("expanded",!1).call(uiPresetIcon().geometry(1===r.length&&r[0]).preset(o)).on("click",n).on("keydown",function(){event.keyCode===utilKeybinding.keyCodes["rtl"===_mainLocalizer.textDirection()?"←":"→"]?(event.preventDefault(),event.stopPropagation(),select(this).classed("expanded")||n.call(this)):event.keyCode===utilKeybinding.keyCodes["rtl"===_mainLocalizer.textDirection()?"→":"←"]?(event.preventDefault(),event.stopPropagation(),select(this).classed("expanded")&&n.call(this)):f.call(this)}).append("div").attr("class","label").append("div").attr("class","label-inner").append("div").attr("class","namepart").call(svgIcon("rtl"===_mainLocalizer.textDirection()?"#iD-icon-backward":"#iD-icon-forward","inline")).append("span").html(function(){return o.name()+"&hellip;"}),(a=e.append("div").attr("class","subgrid").style("max-height","0px").style("opacity",0)).append("div").attr("class","arrow"),s=a.append("div").attr("class","preset-list fillL3")}return t.members?1<t.members.collection.filter(function(e){return e.addable()}).length&&e.push((o=t,n=!1,l.choose=function(){var e;a&&s&&(n?(n=!1,a.transition().duration(200).style("opacity","0").style("max-height","0px").style("padding-bottom","0px")):(n=!0,e=o.members.matchAllGeometry(g()),s.call(d,e),a.transition().duration(200).style("opacity","1").style("max-height",200+190*e.collection.length+"px").style("padding-bottom","10px")))},l.preset=o,l)):t.addable()&&e.push((i=t,r.choose=function(){select(this).classed("disabled")||(c.inIntro()||_mainPresetIndex.setMostRecent(i,g()[0]),c.perform(function(e){for(var t in u){var n=u[t];e=actionChangePreset(n,_mainPresetIndex.match(e.entity(n),e),i)(e)}return e},_t("operations.change_tags.annotation")),c.validator().validate(),p.call("choose",this,i))},r.help=function(){event.stopPropagation(),r.reference.toggle()},r.preset=i,r.reference=uiTagReference(i.reference(g()[0])),r)),e},[]),r=e.selectAll(".preset-list-item").data(n,function(e){return e.preset.id});r.order(),r.exit().remove(),r.enter().append("div").attr("class",function(e){return"preset-list-item preset-"+e.preset.id.replace("/","-")}).classed("current",function(e){return-1!==l.indexOf(e.preset)}).each(function(e){select(this).call(e)}).style("opacity",0).transition().style("opacity",1),h()}function f(){var e,t,n=select(this.closest(".preset-list-item")),r=select(n.node().parentNode.closest(".preset-list-item"));event.keyCode===utilKeybinding.keyCodes["↓"]?(event.preventDefault(),event.stopPropagation(),(e=select(n.node().nextElementSibling)).empty()?r.empty()||(e=select(r.node().nextElementSibling)):select(this).classed("expanded")&&(e=n.select(".subgrid .preset-list-item:first-child")),e.empty()||e.select(".preset-list-button").node().focus()):event.keyCode===utilKeybinding.keyCodes["↑"]?(event.preventDefault(),event.stopPropagation(),(t=select(n.node().previousElementSibling)).empty()?r.empty()||(t=r):t.select(".preset-list-button").classed("expanded")&&(t=t.select(".subgrid .preset-list-item:last-child")),t.empty()?select(this.closest(".preset-list-pane")).select(".preset-search-input").node().focus():t.select(".preset-list-button").node().focus()):event.keyCode===utilKeybinding.keyCodes["rtl"===_mainLocalizer.textDirection()?"→":"←"]?(event.preventDefault(),event.stopPropagation(),r.empty()||r.select(".preset-list-button").node().focus()):event.keyCode===utilKeybinding.keyCodes["rtl"===_mainLocalizer.textDirection()?"←":"→"]&&(event.preventDefault(),event.stopPropagation(),n.datum().choose.call(select(this).node()))}function h(){var s,e;u.every(c.hasEntity)&&(s=g(),(e=c.container().selectAll(".preset-list .preset-list-button")).call(uiTooltip().destroyAny),e.each(function(e,t){var n;for(var r in s)if(n=c.features().isHiddenPreset(e.preset,s[r]))break;var i,o,a=!(c.inIntro()||!n||1===l.length&&e.preset===l[0]);select(this).classed("disabled",a),a&&(i=c.features().autoHidden(n)?"zoom":"manual",o={features:_t("feature."+n+".description")},select(this).call(uiTooltip().title(_t("inspector.hidden_preset."+i,o)).placement(t<2?"bottom":"top")))}))}function g(){var n={};for(var e in u){var t=u[e],r=c.entity(t),i=r.geometry(c.graph());"vertex"===i&&r.isOnAddressLine(c.graph())&&(i="point"),n[i]||(n[i]=0),n[i]+=1}return Object.keys(n).sort(function(e,t){return n[t]-n[e]})}return n.autofocus=function(e){return arguments.length?(i=e,n):i},n.entityIDs=function(e){return arguments.length?((u=e)&&u.length&&(t=u.map(function(e){return _mainPresetIndex.match(c.entity(e),c.graph())}),n.presets(t)),n):u;var t},n.presets=function(e){return arguments.length?(l=e,n):l},utilRebind(n,p,"on")}function uiInspector(r){var i,o=uiPresetList(r),a=uiEntityEditor(r),s=select(null),l=select(null),c=select(null),u="select",p=!1;function d(e){o.entityIDs(i).autofocus(p).on("choose",d.setPreset).on("cancel",function(){s.transition().styleTween("right",function(){return interpolate("-100%","0%")}),c.call(a)}),a.state(u).entityIDs(i).on("choose",d.showList);var t=(s=e.selectAll(".panewrap").data([0])).enter().append("div").attr("class","panewrap");t.append("div").attr("class","preset-list-pane pane"),t.append("div").attr("class","entity-editor-pane pane"),s=s.merge(t),l=s.selectAll(".preset-list-pane"),c=s.selectAll(".entity-editor-pane"),!function(){if("select"===u&&1===i.length){var e=i[0],t=r.hasEntity(e);if(t&&!t.hasNonGeometryTags()){if(p)return 1;if("vertex"===t.geometry(r.graph())&&!r.graph().parentRelations(t).length&&!r.validator().getEntityIssues(e).length&&!t.isHighwayIntersection(r.graph()))return 1}}}()?(s.style("right","0%"),c.call(a)):(s.style("right","-100%"),l.call(o));var n=e.selectAll(".footer").data([0]);(n=n.enter().append("div").attr("class","footer").merge(n)).call(uiViewOnOSM(r).what(r.hasEntity(1===i.length&&i[0])))}return d.showList=function(e){s.transition().styleTween("right",function(){return interpolate("0%","-100%")}),e&&o.presets(e),l.call(o.autofocus(!0))},d.setPreset=function(e){"type/multipolygon"===e.id?l.call(o.autofocus(!0)):(s.transition().styleTween("right",function(){return interpolate("-100%","0%")}),c.call(a.presets([e])))},d.state=function(e){return arguments.length?(u=e,a.state(u),r.container().selectAll(".field-help-body").remove(),d):u},d.entityIDs=function(e){return arguments.length?(i=e,d):i},d.newFeature=function(e){return arguments.length?(p=e,d):p},d}function uiSidebar(y){var s,v=uiInspector(y),_=uiDataEditor(y),b=uiNoteEditor(y),w=uiImproveOsmEditor(y),x=uiKeepRightEditor(y),S=uiOsmoseEditor(y),E=!1,C=!1,A=!1,I="PointerEvent"in window?"pointer":"mouse";function k(c){var u,l,p,d=y.container(),f=240;c.style("min-width",f+"px").style("max-width","400px").style("width","33.3333%");var h,g,m,t=c.append("div").attr("class","sidebar-resizer").on(I+"down.sidebar-resizer",function(){if(h)return;if("button"in event&&0!==event.button)return;h=event.pointerId||"mouse",g=event.clientX,m=utilFastMouse(d.node()),p=utilFastMouse(t.node())(event)[0]-1,u=c.node().getBoundingClientRect().width,l=d.node().getBoundingClientRect().width;var e=u/l*100;c.style("width",e+"%").style("max-width","85%"),t.classed("dragging",!0),select(window).on("touchmove.sidebar-resizer",function(){event.preventDefault()},{passive:!1}).on(I+"move.sidebar-resizer",n).on(I+"up.sidebar-resizer pointercancel.sidebar-resizer",r)});function n(){var e,t,n,r,i,o,a,s;h===(event.pointerId||"mouse")&&(event.preventDefault(),e=event.clientX-g,g=event.clientX,n=(t="rtl"===_mainLocalizer.textDirection())?0:1,r=t?"margin-right":"margin-left",i=m(event)[0]-p,u=t?l-i:i,o=c.classed("collapsed"),a=u<f,c.classed("collapsed",a),a?o||(c.style(r,"-400px").style("width","400px"),y.ui().onResize([(u-e)*n,0])):(s=u/l*100,c.style(r,null).style("width",s+"%"),o?y.ui().onResize([-u*n,0]):y.ui().onResize([-e*n,0])))}function r(){h===(event.pointerId||"mouse")&&(h=null,t.classed("dragging",!1),select(window).on("touchmove.sidebar-resizer",null).on(I+"move.sidebar-resizer",null).on(I+"up.sidebar-resizer pointercancel.sidebar-resizer",null))}var o=c.append("div").attr("class","feature-list-pane").call(uiFeatureList(y)),a=c.append("div").attr("class","inspector-hidden inspector-wrap");function i(e){var t,n,r=e&&e.length&&e[0];if(r&&r.__featurehash__)E=!0,k.show(_.datum(r)),c.selectAll(".sidebar-component").classed("inspector-hover",!0);else if(r instanceof osmNote){if("drag-note"===y.mode().id)return;C=!0;var i=services.osm;i&&(r=i.getNote(r.id)),k.show(b.note(r)),c.selectAll(".sidebar-component").classed("inspector-hover",!0)}else{r instanceof QAItem?(A=!0,(t=services[r.service])&&(r=t.getError(r.id)),n="keepRight"===r.service?x:"osmose"===r.service?S:w,y.container().selectAll(".qaItem."+r.service).classed("hover",function(e){return e.id===r.id}),k.show(n.error(r)),c.selectAll(".sidebar-component").classed("inspector-hover",!0)):!s&&r instanceof osmEntity?(o.classed("inspector-hidden",!0),a.classed("inspector-hidden",!1).classed("inspector-hover",!0),v.entityIDs()&&utilArrayIdentical(v.entityIDs(),[r.id])&&"hover"===v.state()||(v.state("hover").entityIDs([r.id]).newFeature(!1),a.call(v))):s?(E||C||A)&&(A=E=C=!1,y.container().selectAll(".note").classed("hover",!1),y.container().selectAll(".qaItem").classed("hover",!1),k.hide()):(o.classed("inspector-hidden",!1),a.classed("inspector-hidden",!0),v.state("hide"))}}k.hoverModeSelect=throttle(function(t){var e;y.container().selectAll(".feature-list-item").classed("hover",!1),1<y.selectedIDs().length&&t&&t.length&&((e=y.container().selectAll(".feature-list-item").filter(function(e){return-1!==t.indexOf(e)})).empty()||e.classed("hover",!0))},200),k.hover=throttle(i,200),k.intersects=function(e){var t=c.node().getBoundingClientRect();return e.intersects([y.projection.invert([0,t.height]),y.projection.invert([t.width,0])])},k.select=function(e,t){var n,r;k.hide(),e&&e.length?((n=1===e.length&&y.entity(e[0]))&&t&&c.classed("collapsed")&&(r=n.extent(y.graph()),k.expand(k.intersects(r))),o.classed("inspector-hidden",!0),a.classed("inspector-hidden",!1).classed("inspector-hover",!1),v.entityIDs()&&utilArrayIdentical(v.entityIDs(),e)&&"select"===v.state()||(v.state("select").entityIDs(e).newFeature(t),a.call(v))):v.state("hide")},k.showPresetList=function(){v.showList()},k.show=function(e,t){o.classed("inspector-hidden",!0),a.classed("inspector-hidden",!0),s&&s.remove(),s=c.append("div").attr("class","sidebar-component").call(e,t)},k.hide=function(){o.classed("inspector-hidden",!1),a.classed("inspector-hidden",!0),s&&s.remove(),s=null},k.expand=function(e){c.classed("collapsed")&&k.toggle(e)},k.collapse=function(e){c.classed("collapsed")||k.toggle(e)},k.toggle=function(r){var n,e,i,o,t,a,s,l=event;l&&l.sourceEvent?l.sourceEvent.preventDefault():l&&l.preventDefault(),y.inIntro()||(n=!c.classed("collapsed"),e="rtl"===_mainLocalizer.textDirection(),i=e?0:1,o=e?"margin-right":"margin-left",u=c.node().getBoundingClientRect().width,c.style("width",u+"px"),a=n?(t=s=0,-u):(t=s=-u,0),c.transition().style(o,a+"px").tween("panner",function(){var n=d3_interpolateNumber(t,a);return function(e){var t=s-Math.round(n(e));s-=t,y.ui().onResize(r?void 0:[t*i,0])}}).on("end",function(){var e,t;c.classed("collapsed",n),n||(e=d.node().getBoundingClientRect().width,t=u/e*100,c.style(o,null).style("width",t+"%"))}))},t.on("dblclick",k.toggle),y.map().on("crossEditableZoom.sidebar",function(e){e||c.select(".inspector-hover").empty()||i([])})}return k.showPresetList=function(){},k.hover=function(){},k.hover.cancel=function(){},k.intersects=function(){},k.select=function(){},k.show=function(){},k.hide=function(){},k.expand=function(){},k.collapse=function(){},k.toggle=function(){},k}function uiSourceSwitch(n){var r;function t(){event.preventDefault();var e,t=n.connection();t&&(n.inIntro()||n.history().hasChanges()&&!window.confirm(_t("source_switch.lose_changes"))||(e=!(e=select(this).classed("live")),n.enter(modeBrowse(n)),n.history().clearSaved(),n.flush(),select(this).text(_t(e?"source_switch.live":"source_switch.dev")).classed("live",e).classed("chip",e),t.switch(e?r[0]:r[1])))}function i(e){e.append("a").attr("href","#").text(_t("source_switch.live")).attr("class","live chip").on("click",t)}return i.keys=function(e){return arguments.length?(r=e,i):r},i}function uiSpinner(n){var r=n.connection();return function(e){var t=e.append("img").attr("src",n.imagePath("loader-black.gif")).style("opacity",0);r&&r.on("loading.spinner",function(){t.transition().style("opacity",1)}).on("loaded.spinner",function(){t.transition().style("opacity",0)})}}function uiSplash(u){return function(e){var t,n,r,i,o,a,s,l,c;u.history().hasRestorableChanges()||(t="",n=corePreferences("sawPrivacyVersion"),r=!corePreferences("sawSplash"),n!==u.privacyVersion&&(t=_t("splash.privacy_update"),r=!0),r&&(corePreferences("sawSplash",!0),corePreferences("sawPrivacyVersion",u.privacyVersion),_mainFileFetcher.get("intro_graph"),(i=uiModal(e)).select(".modal").attr("class","modal-splash modal"),(o=i.select(".content").append("div").attr("class","fillL")).append("div").attr("class","modal-section").append("h3").text(_t("splash.welcome")),(a=o.append("div").attr("class","modal-section")).append("p").html(_t("splash.text",{version:u.version,website:'<a target="_blank" href="http://ideditor.blog/">ideditor.blog</a>',github:'<a target="_blank" href="https://github.com/openstreetmap/iD">github.com</a>'})),a.append("p").html(_t("splash.privacy",{updateMessage:t,privacyLink:'<a target="_blank" href="https://github.com/openstreetmap/iD/blob/release/PRIVACY.md">'+_t("splash.privacy_policy")+"</a>"})),(l=(s=o.append("div").attr("class","modal-actions")).append("button").attr("class","walkthrough").on("click",function(){u.container().call(uiIntro(u)),i.close()})).append("svg").attr("class","logo logo-walkthrough").append("use").attr("xlink:href","#iD-logo-walkthrough"),l.append("div").text(_t("splash.walkthrough")),(c=s.append("button").attr("class","start-editing").on("click",i.close)).append("svg").attr("class","logo logo-features").append("use").attr("xlink:href","#iD-logo-features"),c.append("div").text(_t("splash.start")),i.select("button.close").attr("class","hide")))}}function uiStatus(i){var o=i.connection();return function(r){o&&(o.on("apiStatusChange.uiStatus",function(e,t){if(r.html(""),e){if("connectionSwitched"===t)return;var n;"rateLimited"===t?r.text(_t("osm_api_status.message.rateLimit")).append("a").attr("class","api-status-login").attr("target","_blank").call(svgIcon("#iD-icon-out-link","inline")).append("span").text(_t("login")).on("click.login",function(){event.preventDefault(),o.authenticate()}):(n=throttle(function(){i.loadTiles(i.projection),o.reloadApiStatus()},2e3),r.text(_t("osm_api_status.message.error")+" ").append("a").text(_t("osm_api_status.retry")).on("click.retry",function(){event.preventDefault(),n()}))}else"readonly"===t?r.text(_t("osm_api_status.message.readonly")):"offline"===t&&r.text(_t("osm_api_status.message.offline"));r.attr("class","api-status "+(e?"error":t))}),window.setInterval(function(){o.reloadApiStatus()},9e4),o.reloadApiStatus())}}function modeDrawArea(e,t,n,r){var i={button:r,id:"draw-area"},o=behaviorDrawWay(e,t,i,n).on("rejectedSelfIntersection.modeDrawArea",function(){e.ui().flash.text(_t("self_intersection.error.areas"))()});return i.wayID=t,i.enter=function(){e.install(o)},i.exit=function(){e.uninstall(o)},i.selectedIDs=function(){return[t]},i.activeID=function(){return o&&o.activeID()||[]},i}function modeAddArea(o,a){a.id="add-area";var e=behaviorAddWay(o).on("start",function(e){var t=o.graph(),n=osmNode({loc:e}),r=osmWay({tags:s});o.perform(actionAddEntity(n),actionAddEntity(r),actionAddVertex(r.id,n.id),l(r.id)),o.enter(modeDrawArea(o,r.id,t,a.button))}).on("startFromWay",function(e,t){var n=o.graph(),r=osmNode({loc:e}),i=osmWay({tags:s});o.perform(actionAddEntity(r),actionAddEntity(i),actionAddVertex(i.id,r.id),l(i.id),actionAddMidpoint({loc:e,edge:t},r)),o.enter(modeDrawArea(o,i.id,n,a.button))}).on("startFromNode",function(e){var t=o.graph(),n=osmWay({tags:s});o.perform(actionAddEntity(n),actionAddVertex(n.id,e.id),l(n.id)),o.enter(modeDrawArea(o,n.id,t,a.button))}),s={area:"yes"};function l(t){return function(e){return e.replace(e.entity(t).close())}}return a.preset&&(s=a.preset.setTags(s,"area")),a.enter=function(){o.install(e)},a.exit=function(){o.uninstall(e)},a}function modeAddLine(o,a){a.id="add-line";var e=behaviorAddWay(o).on("start",function(e){var t=o.graph(),n=osmNode({loc:e}),r=osmWay({tags:s});o.perform(actionAddEntity(n),actionAddEntity(r),actionAddVertex(r.id,n.id)),o.enter(modeDrawLine(o,r.id,t,a.button))}).on("startFromWay",function(e,t){var n=o.graph(),r=osmNode({loc:e}),i=osmWay({tags:s});o.perform(actionAddEntity(r),actionAddEntity(i),actionAddVertex(i.id,r.id),actionAddMidpoint({loc:e,edge:t},r)),o.enter(modeDrawLine(o,i.id,n,a.button))}).on("startFromNode",function(e){var t=o.graph(),n=osmWay({tags:s});o.perform(actionAddEntity(n),actionAddVertex(n.id,e.id)),o.enter(modeDrawLine(o,n.id,t,a.button))}),s={};return a.preset&&(s=a.preset.setTags(s,"line")),a.enter=function(){o.install(e)},a.exit=function(){o.uninstall(e)},a}function modeAddPoint(r,e){e.id="add-point";var t=behaviorDraw(r).on("click",function(e){var t=osmNode({loc:e,tags:i});r.perform(actionAddEntity(t),_t("operations.add.annotation.point")),o(t)}).on("clickWay",function(e,t){var n=osmNode({tags:i});r.perform(actionAddMidpoint({loc:e,edge:t},n),_t("operations.add.annotation.vertex")),o(n)}).on("clickNode",function(e){if(0===Object.keys(i).length)return void o(e);var t=Object.assign({},e.tags);for(var n in i)t[n]=i[n];r.perform(actionChangeTags(e.id,t),_t("operations.add.annotation.point")),o(e)}).on("cancel",n).on("finish",n),i={};function o(e){r.enter(modeSelect(r,[e.id]).newFeature(!0))}function n(){r.enter(modeBrowse(r))}return e.preset&&(i=e.preset.setTags(i,"point")),e.enter=function(){r.install(t)},e.exit=function(){r.uninstall(t)},e}function modeAddNote(r){var e={id:"add-note",button:"note",title:_t("modes.add_note.title"),description:_t("modes.add_note.description"),key:_t("modes.add_note.key")},t=behaviorDraw(r).on("click",function(e){var t=services.osm;if(!t)return;var n=osmNote({loc:e,status:"open",comments:[]});t.replaceNote(n),r.map().pan([0,0]),r.selectedNoteID(n.id).enter(modeSelectNote(r,n.id).newFeature(!0))}).on("cancel",n).on("finish",n);function n(){r.enter(modeBrowse(r))}return e.enter=function(){r.install(t)},e.exit=function(){r.uninstall(t)},e}function uiConflicts(i){var p,d,a,e=dispatch("cancel","save"),f=utilKeybinding("conflicts");function t(){select(document).call(f.unbind)}function h(){t(),e.call("save")}function g(){t(),e.call("cancel")}function n(e){select(document).call(f.on("⎋",g,!0));var t=e.selectAll(".header").data([0]).enter().append("div").attr("class","header fillL");t.append("button").attr("class","fr").on("click",g).call(svgIcon("#iD-icon-close")),t.append("h3").text(_t("save.conflict.header"));var n=e.selectAll(".body").data([0]).enter().append("div").attr("class","body fillL"),r=n.append("div").attr("class","conflicts-help").text(_t("save.conflict.help")),i=utilDetect(),o=new osmChangeset;delete o.id;var a=JXON.stringify(o.osmChangeJXON(p)),s=new Blob([a],{type:"text/xml;charset=utf-8;"}),l="changes.osc",c=r.selectAll(".download-changes").append("a").attr("class","download-changes");i.download?c.attr("href",window.URL.createObjectURL(s)).attr("download",l):c.attr("target","_blank").on("click.download",function(){navigator.msSaveBlob(s,l)}),c.call(svgIcon("#iD-icon-load","inline")).append("span").text(_t("save.conflict.download_changes")),n.append("div").attr("class","conflict-container fillL3").call(m,0),n.append("div").attr("class","conflicts-done").attr("opacity",0).style("display","none").text(_t("save.conflict.done"));var u=n.append("div").attr("class","buttons col12 joined conflicts-buttons");u.append("button").attr("disabled",1<d.length).attr("class","action conflicts-button col6").text(_t("save.title")).on("click.try_again",h),u.append("button").attr("class","secondary-action conflicts-button col6").text(_t("confirm.cancel")).on("click.cancel",g)}function m(e,i){i=utilWrap(i,d.length),a=i;var o=select(e.node().parentNode);i===d.length-1&&window.setTimeout(function(){o.select(".conflicts-button").attr("disabled",null),o.select(".conflicts-done").transition().attr("opacity",1).style("display","block")},250);var t=e.selectAll(".conflict").data([d[i]]);t.exit().remove();var n=t.enter().append("div").attr("class","conflict");n.append("h4").attr("class","conflict-count").text(_t("save.conflict.count",{num:i+1,total:d.length})),n.append("a").attr("class","conflict-description").attr("href","#").text(function(e){return e.name}).on("click",function(e){event.preventDefault(),l(e.id)});var r=n.append("div").attr("class","conflict-detail-container");r.append("ul").attr("class","conflict-detail-list").selectAll("li").data(function(e){return e.details||[]}).enter().append("li").attr("class","conflict-detail-item").html(function(e){return e}),r.append("div").attr("class","conflict-choices").call(s),r.append("div").attr("class","conflict-nav-buttons joined cf").selectAll("button").data(["previous","next"]).enter().append("button").text(function(e){return _t("save.conflict."+e)}).attr("class","conflict-nav-button action col6").attr("disabled",function(e,t){return 0===t&&0===i||1===t&&i===d.length-1||null}).on("click",function(e,t){event.preventDefault();var n=o.selectAll(".conflict-container"),r=0===t?-1:1;n.selectAll(".conflict").remove(),n.call(m,i+r)})}function s(e){var t=e.append("ul").attr("class","layer-list").selectAll("li").data(function(e){return e.choices||[]}),n=t.enter().append("li").attr("class","layer"),r=n.append("label");r.append("input").attr("type","radio").attr("name",function(e){return e.id}).on("change",function(e,t){var n=this.parentNode.parentNode.parentNode;n.__data__.chosen=t,o(n,e)}),r.append("span").text(function(e){return e.text}),n.merge(t).each(function(e,t){var n=this.parentNode;n.__data__.chosen===t&&o(n,e)})}function o(e,t){event&&event.preventDefault(),select(e).selectAll("li").classed("active",function(e){return e===t}).selectAll("input").property("checked",function(e){return e===t});var n=geoExtent(),r=i.graph().hasEntity(t.id);r&&n._extend(r.extent(i.graph())),t.action(),(r=i.graph().hasEntity(t.id))&&n._extend(r.extent(i.graph())),l(t.id,n)}function l(e,t){i.surface().selectAll(".hover").classed("hover",!1);var n=i.graph().hasEntity(e);n&&(t?i.map().trimmedExtent(t):i.map().zoomToEase(n),i.surface().selectAll(utilEntityOrMemberSelector([n.id],i.graph())).classed("hover",!0))}return n.conflictList=function(e){return arguments.length?(d=e,n):d},n.origChanges=function(e){return arguments.length?(p=e,n):p},n.shownEntityIds=function(){return d&&"number"==typeof a?[d[a].id]:[]},utilRebind(n,e,"on")}function uiConfirm(e){var t=uiModal(e);t.select(".modal").classed("modal-alert",!0);var n=t.select(".content");n.append("div").attr("class","modal-section header"),n.append("div").attr("class","modal-section message-text");var r=n.append("div").attr("class","modal-section buttons cf");return t.okButton=function(){return r.append("button").attr("class","button ok-button action").on("click.confirm",function(){t.remove()}).text(_t("confirm.okay")).node().focus(),t},t}function uiChangesetEditor(c){var u,p,t,d=dispatch("change"),f=uiFormFields(c),h=uiCombobox(c,"comment").caseSensitive(!0);function n(e){!function(e){var t=!1;{var n;u||(t=!0,(u=[uiField(c,(n=_mainPresetIndex).field("comment"),null,{show:!0,revert:!1}),uiField(c,n.field("source"),null,{show:!1,revert:!1}),uiField(c,n.field("hashtags"),null,{show:!1,revert:!1})]).forEach(function(n){n.on("change",function(e,t){d.call("change",n,void 0,e,t)})}))}{var r,i,o;u.forEach(function(e){e.tags(p)}),e.call(f.fieldsArr(u)),t&&(r=e.select(".form-field-comment textarea"),(i=r.node())&&(i.focus(),i.select()),utilTriggerEvent(r,"blur"),(o=c.connection())&&o.userChangesets(function(e,t){var n;e||(n=t.map(function(e){var t=e.tags.comment;return t?{title:t,value:t}:null}).filter(Boolean),r.call(h.data(utilArrayUniqBy(n,"title"))))}))}var a=p.comment.match(/google/i),s=e.select(".form-field-comment").selectAll(".comment-warning").data(a?[0]:[]);s.exit().transition().duration(200).style("opacity",0).remove();var l=s.enter().insert("div",".tag-reference-body").attr("class","field-warning comment-warning").style("opacity",0);l.append("a").attr("target","_blank").attr("tabindex",-1).call(svgIcon("#iD-icon-alert","inline")).attr("href",_t("commit.google_warning_link")).append("span").text(_t("commit.google_warning")),l.transition().duration(200).style("opacity",1)}(e)}return n.tags=function(e){return arguments.length?(p=e,n):p},n.changesetID=function(e){return arguments.length?(t===e||(t=e,u=null),n):t},utilRebind(n,d,"on")}function uiSectionChanges(f){var h=utilDetect(),g={};return _mainFileFetcher.get("discarded").then(function(e){g=e}).catch(function(){}),uiSection("changes-list",f).title(function(){var e=f.history().difference().summary();return _t("commit.changes",{count:e.length})}).disclosureContent(function(e){var t=f.history(),n=t.difference().summary(),r=e.selectAll(".commit-section").data([0]),i=r.enter().append("div").attr("class","commit-section");i.append("ul").attr("class","changeset-list");var o=(r=i.merge(r)).select("ul").selectAll("li").data(n),a=o.enter().append("li").attr("class","change-item");a.each(function(e){select(this).call(svgIcon("#iD-icon-"+e.entity.geometry(e.graph),"pre-text "+e.changeType))}),a.append("span").attr("class","change-type").text(function(e){return _t("commit."+e.changeType)+" "}),a.append("strong").attr("class","entity-type").text(function(e){var t=_mainPresetIndex.match(e.entity,e.graph);return t&&t.name()||utilDisplayType(e.entity.id)}),a.append("span").attr("class","entity-name").text(function(e){var t=utilDisplayName(e.entity)||"",n="";return""!==t&&(n+=":"),n+" "+t}),a.style("opacity",0).transition().style("opacity",1),(o=a.merge(o)).on("mouseover",function(e){e.entity&&f.surface().selectAll(utilEntityOrMemberSelector([e.entity.id],f.graph())).classed("hover",!0)}).on("mouseout",function(){f.surface().selectAll(".hover").classed("hover",!1)}).on("click",function(e){{var t;"deleted"!==e.changeType&&(t=e.entity,f.map().zoomToEase(t),f.surface().selectAll(utilEntityOrMemberSelector([t.id],f.graph())).classed("hover",!0))}});var s=(new osmChangeset).update({id:void 0}),l=t.changes(actionDiscardTags(t.difference(),g));delete s.id;var c=JXON.stringify(s.osmChangeJXON(l)),u=new Blob([c],{type:"text/xml;charset=utf-8;"}),p="changes.osc",d=r.selectAll(".download-changes").data([0]).enter().append("a").attr("class","download-changes");h.download?d.attr("href",window.URL.createObjectURL(u)).attr("download",p):d.attr("target","_blank").on("click.download",function(){navigator.msSaveBlob(u,p)});d.call(svgIcon("#iD-icon-load","inline")).append("span").text(_t("commit.download_changes"))})}function uiCommitWarnings(u){return function(e){var t=u.validator().getIssuesBySeverity({what:"edited",where:"all",includeDisabledRules:!0});for(var n in t){var r=t[n],i=n+"-section",o=n+"-item",a=e.selectAll("."+i).data(r.length?[0]:[]);a.exit().remove();var s=a.enter().append("div").attr("class","modal-section "+i+" fillL2");s.append("h3").text(_t("warning"===n?"commit.warnings":"commit.errors")),s.append("ul").attr("class","changeset-list");var l=(a=s.merge(a)).select("ul").selectAll("li").data(r,function(e){return e.id});l.exit().remove();var c=l.enter().append("li").attr("class",o);c.call(svgIcon("#iD-icon-alert","pre-text")),c.append("strong").attr("class","issue-message"),c.filter(function(e){return e.tooltip}).call(uiTooltip().title(function(e){return e.tooltip}).placement("top")),(l=c.merge(l)).selectAll(".issue-message").text(function(e){return e.message(u)}),l.on("mouseover",function(e){e.entityIds&&u.surface().selectAll(utilEntityOrMemberSelector(e.entityIds,u.graph())).classed("hover",!0)}).on("mouseout",function(){u.surface().selectAll(".hover").classed("hover",!1)}).on("click",function(e){u.validator().focusIssue(e)})}}}var readOnlyTags=[/^changesets_count$/,/^created_by$/,/^ideditor:/,/^imagery_used$/,/^host$/,/^locale$/,/^warnings:/,/^resolved:/,/^closed:note$/,/^closed:keepright$/,/^closed:improveosm:/,/^closed:osmose:/],hashtagRegex=/(#[^\u2000-\u206F\u2E00-\u2E7F\s\\'!"#$%()*,.\/:;<=>?@\[\]^`{|}~]+)/g;function uiCommit(_){var b,r,w=dispatch("cancel"),x=uiChangesetEditor(_).on("change",t),S=uiSectionRawTagEditor("changeset-tag-editor",_).on("change",t).readOnlyTags(readOnlyTags),E=uiSectionChanges(_),C=uiCommitWarnings(_);function e(e){r=e,_.changeset||function(){var e=+corePreferences("commentDate")||0,t=Date.now();(t<e||1728e5<t-e)&&(corePreferences("comment",null),corePreferences("hashtags",null),corePreferences("source",null));_.defaultChangesetComment()&&(corePreferences("comment",_.defaultChangesetComment()),corePreferences("commentDate",Date.now()));_.defaultChangesetSource()&&(corePreferences("source",_.defaultChangesetSource()),corePreferences("commentDate",Date.now()));_.defaultChangesetHashtags()&&(corePreferences("hashtags",_.defaultChangesetHashtags()),corePreferences("commentDate",Date.now()));var n=utilDetect(),r={comment:corePreferences("comment")||"",created_by:_.cleanTagValue("iD "+_.version),host:_.cleanTagValue(n.host),locale:_.cleanTagValue(_mainLocalizer.localeCode())};l(r,!0);var i=corePreferences("hashtags");i&&(r.hashtags=i);var o=corePreferences("source");o&&(r.source=o);var a=_.history().photoOverlaysUsed();{var s;a.length&&(-1===(s=(r.source||"").split(";")).indexOf("streetlevel imagery")&&s.push("streetlevel imagery"),a.forEach(function(e){-1===s.indexOf(e)&&s.push(e)}),r.source=_.cleanTagValue(s.join(";")))}_.changeset=new osmChangeset({tags:r})}(),function(){var e=_.connection();if(!e)return;var l=Object.assign({},_.changeset.tags),t=_.cleanTagValue(_.history().imageryUsed().join(";"));l.imagery_used=t||"None";var n,r=e.getClosedIDs();r.length&&(l["closed:note"]=_.cleanTagValue(r.join(";")));{var i;!services.keepRight||(i=services.keepRight.getClosedIDs()).length&&(l["closed:keepright"]=_.cleanTagValue(i.join(";")))}if(services.improveOSM){var o=services.improveOSM.getClosedCounts();for(n in o)l["closed:improveosm:"+n]=_.cleanTagValue(o[n].toString())}if(services.osmose){var a=services.osmose.getClosedCounts();for(n in a)l["closed:osmose:"+n]=_.cleanTagValue(a[n].toString())}for(var s in l)s.match(/(^warnings:)|(^resolved:)/)&&delete l[s];function c(e,t){var n=utilArrayGroupBy(e,"type");for(var r in n){var i=n[r];if(i[0].subtype){var o=utilArrayGroupBy(i,"subtype");for(var a in o){var s=o[a];l[t+":"+r+":"+a]=_.cleanTagValue(s.length.toString())}}else l[t+":"+r]=_.cleanTagValue(i.length.toString())}}c(_.validator().getIssuesBySeverity({what:"edited",where:"all",includeIgnored:!0,includeDisabledRules:!0}).warning,"warnings"),c(_.validator().getResolvedIssues(),"resolved"),_.changeset=_.changeset.update({tags:l})}(),e.call(i)}function i(e){var t,n,r,i,o,a,s,l,c,u,p,d,f,h,g,m,y,v=_.connection();v&&((t=e.selectAll(".header").data([0]).enter().append("div").attr("class","header fillL header-container")).append("div").attr("class","header-block header-block-outer"),t.append("div").attr("class","header-block").append("h3").text(_t("commit.title")),t.append("div").attr("class","header-block header-block-outer header-block-close").append("button").attr("class","close").on("click",function(){w.call("cancel",this)}).call(svgIcon("#iD-icon-close")),(r=(r=(n=(n=e.selectAll(".body").data([0])).enter().append("div").attr("class","body").merge(n)).selectAll(".changeset-editor").data([0])).enter().append("div").attr("class","modal-section changeset-editor").merge(r)).call(x.changesetID(_.changeset.id).tags(_.changeset.tags)),n.call(C),i=n.selectAll(".save-section").data([0]),(o=(i=i.enter().append("div").attr("class","modal-section save-section fillL").merge(i)).selectAll(".commit-info").data([0])).enter().size()&&(b=null),o=o.enter().append("p").attr("class","commit-info").text(_t("commit.upload_explanation")).merge(o),v.userDetails(function(e,t){var n;e||b!==t&&(b=t,n=select(document.createElement("div")),t.image_url&&n.append("img").attr("src",t.image_url).attr("class","icon pre-text user-icon"),n.append("a").attr("class","user-info").text(t.display_name).attr("href",v.userURL(t.display_name)).attr("target","_blank"),o.html(_t("commit.upload_explanation_with_user",{user:n.html()})))}),s=(a=i.selectAll(".request-review").data([0])).enter().append("div").attr("class","request-review"),l=utilUniqueDomId("commit-input-request-review"),(c=s.append("label").attr("for",l)).append("input").attr("type","checkbox").attr("id",l),c.append("span").text(_t("commit.request_review")),u=(a=a.merge(s)).selectAll("input").property("checked",(p=_.changeset.tags,void 0!==(d=p.review_requested)&&!(""===(d=d.trim().toLowerCase())||"no"===d))).on("change",function(){A({review_requested:u.property("checked")?"yes":void 0}),m.call(S.tags(Object.assign({},_.changeset.tags)).render)}),(f=(g=i.selectAll(".buttons").data([0])).enter().append("div").attr("class","buttons fillL")).append("button").attr("class","secondary-action button cancel-button").append("span").attr("class","label").text(_t("commit.cancel")),f.append("button").attr("class","action button save-button").append("span").attr("class","label").text(_t("commit.save")),h=function(){var e=_.validator().getIssuesBySeverity({what:"edited",where:"all"}).error;{if(e.length)return _t("commit.outstanding_errors_message",{count:e.length});if(!(_.changeset&&_.changeset.tags.comment&&_.changeset.tags.comment.trim().length))return _t("commit.comment_needed_message")}return null}(),(g=g.merge(f)).selectAll(".cancel-button").on("click.cancel",function(){w.call("cancel",this)}),g.selectAll(".save-button").classed("disabled",null!==h).on("click.save",function(){select(this).classed("disabled")||(this.blur(),_.uploader().save(_.changeset))}),uiTooltip().destroyAny(g.selectAll(".save-button")),h&&g.selectAll(".save-button").call(uiTooltip().title(h).placement("top")),(m=(m=n.selectAll(".tag-section.raw-tag-editor").data([0])).enter().append("div").attr("class","modal-section tag-section raw-tag-editor").merge(m)).call(S.tags(Object.assign({},_.changeset.tags)).render),(y=(y=n.selectAll(".commit-changes-section").data([0])).enter().append("div").attr("class","modal-section commit-changes-section").merge(y)).call(E.render))}function t(e,t,n){t.hasOwnProperty("comment")&&(void 0===t.comment&&(t.comment=""),n||(corePreferences("comment",t.comment),corePreferences("commentDate",Date.now()))),t.hasOwnProperty("source")&&(void 0===t.source?corePreferences("source",null):n||(corePreferences("source",t.source),corePreferences("commentDate",Date.now()))),A(t,n),r&&r.call(i)}function l(e,t){var n=(e.comment||"").replace(/http\S*/g,"").match(hashtagRegex)||[];n.length&&corePreferences("hashtags",null),n.length&&t||(n=n.concat((e.hashtags||"").split(/[,;\s]+/).map(function(e){"#"!==e[0]&&(e="#"+e);var t=e.match(hashtagRegex);return t&&t[0]}).filter(Boolean)||[]));var r=new Set;return n.filter(function(e){var t=e.toLowerCase();return!r.has(t)&&(r.add(t),!0)})}function A(n,r){var e,t,i,o,a=Object.assign({},_.changeset.tags);Object.keys(n).forEach(function(e){var t=n[e];e=_.cleanTagKey(e),-1===readOnlyTags.indexOf(e)&&(""!==e&&void 0!==t?a[e]=r?t:_.cleanTagValue(t):delete a[e])}),r||(e=n.hasOwnProperty("comment")&&""!==n.comment,(t=l(a,e)).length?(a.hashtags=_.cleanTagValue(t.join(";")),corePreferences("hashtags",a.hashtags)):(delete a.hashtags,corePreferences("hashtags",null))),b&&void 0!==b.changesets_count?(i=parseInt(b.changesets_count,10)+1,a.changesets_count=String(i),i<=100&&((o=corePreferences("walkthrough_completed"))&&(a["ideditor:walkthrough_completed"]=o),(o=corePreferences("walkthrough_progress"))&&(a["ideditor:walkthrough_progress"]=o),(o=corePreferences("walkthrough_started"))&&(a["ideditor:walkthrough_started"]=o))):delete a.changesets_count,fastDeepEqual(_.changeset.tags,a)||(_.changeset=_.changeset.update({tags:a}))}return e.reset=function(){_.changeset=null},utilRebind(e,w,"on")}var RADIUS=6378137,FLATTENING=1/298.257223563,POLAR_RADIUS$1=6356752.3142,wgs84={RADIUS:RADIUS,FLATTENING:FLATTENING,POLAR_RADIUS:POLAR_RADIUS$1},geometry_1=geometry,ring=ringArea;function geometry(e){var t,n=0;switch(e.type){case"Polygon":return polygonArea(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=polygonArea(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(t=0;t<e.geometries.length;t++)n+=geometry(e.geometries[t]);return n}}function polygonArea(e){var t=0;if(e&&0<e.length){t+=Math.abs(ringArea(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(ringArea(e[n]))}return t}function ringArea(e){var t,n,r,i,o,a,s=0,l=e.length;if(2<l){for(a=0;a<l;a++)o=a===l-2?(r=l-2,i=l-1,0):a===l-1?(r=l-1,i=0,1):(i=(r=a)+1,a+2),t=e[r],n=e[i],s+=(rad(e[o][0])-rad(t[0]))*Math.sin(rad(n[1]));s=s*wgs84.RADIUS*wgs84.RADIUS/2}return s}function rad(e){return e*Math.PI/180}var geojsonArea={geometry:geometry_1,ring:ring};function toRadians(e){return e*Math.PI/180}function toDegrees(e){return 180*e/Math.PI}function offset(e,t,n){var r=toRadians(e[1]),i=toRadians(e[0]),o=t/6378137,a=Math.asin(Math.sin(r)*Math.cos(o)+Math.cos(r)*Math.sin(o)*Math.cos(n));return[toDegrees(i+Math.atan2(Math.sin(n)*Math.sin(o)*Math.cos(r),Math.cos(o)-Math.sin(r)*Math.sin(a))),toDegrees(a)]}function validateCenter(e){if(!Array.isArray(e)||![2,3].includes(e.length))throw new Error("ERROR! Center has to be an array of length two or three");var t=e[0],n=e[1];if("number"!=typeof t||"number"!=typeof n)throw new Error("ERROR! Longitude and Latitude has to be numbers but where "+typeof t+" and "+typeof n);if(180<t||t<-180)throw new Error("ERROR! Longitude has to be between -180 and 180 but was "+t);if(90<n||n<-90)throw new Error("ERROR! Latitude has to be between -90 and 90 but was "+n)}function validateRadius(e){if("number"!=typeof e)throw new Error("ERROR! Radius has to be a positive number but was: "+typeof e);if(e<=0)throw new Error("ERROR! Radius has to be a positive number but was: "+e)}function validateNumberOfSegments(e){if("number"!=typeof e&&void 0!==e)throw new Error("ERROR! Number of segments has to be a number but was: "+typeof e);if(e<3)throw new Error("ERROR! Number of segments has to be at least 3 but was: "+e)}function validateInput(e){var t=e.center,n=e.radius,r=e.numberOfSegments;validateCenter(t),validateRadius(n),validateNumberOfSegments(r)}var circleToPolygon=function(e,t,n){var r=n||32;validateInput({center:e,radius:t,numberOfSegments:n});for(var i=[],o=0;o<r;++o)i.push(offset(e,t,2*Math.PI*-o/r));return i.push(i[0]),{type:"Polygon",coordinates:[i]}},geojsonPrecision=createCommonjsModule(function(e){function t(e,n,r){function t(e){return e.map(function(e,t){return t<2?+e.toFixed(n):+e.toFixed(r)})}function i(e){return e.map(t)}function o(e){return e.map(i)}function a(e){if(!e)return{};switch(e.type){case"Point":return e.coordinates=t(e.coordinates),e;case"LineString":case"MultiPoint":return e.coordinates=i(e.coordinates),e;case"Polygon":case"MultiLineString":return e.coordinates=o(e.coordinates),e;case"MultiPolygon":return e.coordinates=e.coordinates.map(o),e;case"GeometryCollection":return e.geometries=e.geometries.map(a),e;default:return{}}}function s(e){return e.geometry=a(e.geometry),e}if(!e)return e;switch(e.type){case"Feature":return s(e);case"GeometryCollection":return(c=e).geometries=c.geometries.map(a),c;case"FeatureCollection":return(l=e).features=l.features.map(s),l;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiPolygon":case"MultiLineString":return a(e);default:return e}var l,c}e.exports=t,e.exports.parse=t});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e,t,n){if(null==this)throw new TypeError(this+" is not an object");for(var r=Object(this),i=Math.max(Math.min(r.length,9007199254740991),0)||0,o=((o=1 in arguments&&parseInt(Number(t),10)||0)<0?Math.max(i+o,0):Math.min(o,i)),a=((a=2 in arguments&&void 0!==n?parseInt(Number(n),10)||0:i)<0?Math.max(i+n,0):Math.min(a,i));o<a;)r[o]=e,++o;return r},writable:!0}),Number.isFinite=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(e){return e!=e},Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var NumberUtil=function(){};NumberUtil.prototype.interfaces_=function(){return[]},NumberUtil.prototype.getClass=function(){return NumberUtil},NumberUtil.prototype.equalsWithTolerance=function(e,t,n){return Math.abs(e-t)<=n};var IllegalArgumentException=(xdf=Error,xdf&&(ydf.__proto__=xdf),(ydf.prototype=Object.create(xdf&&xdf.prototype)).constructor=ydf),xdf;function ydf(e){xdf.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new xdf).stack}var Double=function(){},staticAccessors$1={MAX_VALUE:{configurable:!0}};Double.isNaN=function(e){return Number.isNaN(e)},Double.doubleToLongBits=function(e){return e},Double.longBitsToDouble=function(e){return e},Double.isInfinite=function(e){return!Number.isFinite(e)},staticAccessors$1.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Double,staticAccessors$1);var Comparable=function(){},Clonable=function(){},Comparator=function(){};function Serializable(){}var Coordinate=function e(){var t;this.x=null,this.y=null,this.z=null,0===arguments.length?(this.x=0,this.y=0,this.z=e.NULL_ORDINATE):1===arguments.length?(t=arguments[0],this.x=t.x,this.y=t.y,this.z=t.z):2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},staticAccessors={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Coordinate.prototype.setOrdinate=function(e,t){switch(e){case Coordinate.X:this.x=t;break;case Coordinate.Y:this.y=t;break;case Coordinate.Z:this.z=t;break;default:throw new IllegalArgumentException("Invalid ordinate index: "+e)}},Coordinate.prototype.equals2D=function(e,t){if(1===arguments.length)return this.x===e.x&&this.y===e.y;if(2===arguments.length){var n=e,r=t;return NumberUtil.equalsWithTolerance(this.x,n.x,r)?!!NumberUtil.equalsWithTolerance(this.y,n.y,r):!1}},Coordinate.prototype.getOrdinate=function(e){switch(e){case Coordinate.X:return this.x;case Coordinate.Y:return this.y;case Coordinate.Z:return this.z}throw new IllegalArgumentException("Invalid ordinate index: "+e)},Coordinate.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||Double.isNaN(this.z))&&Double.isNaN(e.z)},Coordinate.prototype.equals=function(e){return e instanceof Coordinate&&this.equals2D(e)},Coordinate.prototype.equalInZ=function(e,t){return NumberUtil.equalsWithTolerance(this.z,e.z,t)},Coordinate.prototype.compareTo=function(e){return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},Coordinate.prototype.clone=function(){},Coordinate.prototype.copy=function(){return new Coordinate(this)},Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Coordinate.prototype.distance3D=function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)},Coordinate.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},Coordinate.prototype.hashCode=function(){return 37*(629+Coordinate.hashCode(this.x))+Coordinate.hashCode(this.y)},Coordinate.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z},Coordinate.prototype.interfaces_=function(){return[Comparable,Clonable,Serializable]},Coordinate.prototype.getClass=function(){return Coordinate},Coordinate.hashCode=function(e){if(1===arguments.length){var t=Double.doubleToLongBits(e);return Math.trunc((t^t)>>>32)}},staticAccessors.DimensionalComparator.get=function(){return DimensionalComparator},staticAccessors.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},staticAccessors.NULL_ORDINATE.get=function(){return Double.NaN},staticAccessors.X.get=function(){return 0},staticAccessors.Y.get=function(){return 1},staticAccessors.Z.get=function(){return 2},Object.defineProperties(Coordinate,staticAccessors);var DimensionalComparator=function(e){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var t=e;if(2!==t&&3!==t)throw new IllegalArgumentException("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}};DimensionalComparator.prototype.compare=function(e,t){var n=e,r=t,i=DimensionalComparator.compare(n.x,r.x);if(0!==i)return i;var o=DimensionalComparator.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:DimensionalComparator.compare(n.z,r.z)},DimensionalComparator.prototype.interfaces_=function(){return[Comparator]},DimensionalComparator.prototype.getClass=function(){return DimensionalComparator},DimensionalComparator.compare=function(e,t){return e<t?-1:t<e?1:Double.isNaN(e)?Double.isNaN(t)?0:-1:Double.isNaN(t)?1:0};var CoordinateSequenceFactory=function(){};CoordinateSequenceFactory.prototype.create=function(){},CoordinateSequenceFactory.prototype.interfaces_=function(){return[]},CoordinateSequenceFactory.prototype.getClass=function(){return CoordinateSequenceFactory};var Location=function(){},staticAccessors$4={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Location.prototype.interfaces_=function(){return[]},Location.prototype.getClass=function(){return Location},Location.toLocationSymbol=function(e){switch(e){case Location.EXTERIOR:return"e";case Location.BOUNDARY:return"b";case Location.INTERIOR:return"i";case Location.NONE:return"-"}throw new IllegalArgumentException("Unknown location value: "+e)},staticAccessors$4.INTERIOR.get=function(){return 0},staticAccessors$4.BOUNDARY.get=function(){return 1},staticAccessors$4.EXTERIOR.get=function(){return 2},staticAccessors$4.NONE.get=function(){return-1},Object.defineProperties(Location,staticAccessors$4);var hasInterface=function(e,t){return e.interfaces_&&-1<e.interfaces_().indexOf(t)},MathUtil=function(){},staticAccessors$5={LOG_10:{configurable:!0}};MathUtil.prototype.interfaces_=function(){return[]},MathUtil.prototype.getClass=function(){return MathUtil},MathUtil.log10=function(e){var t=Math.log(e);return Double.isInfinite(t)||Double.isNaN(t)?t:t/MathUtil.LOG_10},MathUtil.min=function(e,t,n,r){var i=e;return t<i&&(i=t),n<i&&(i=n),r<i&&(i=r),i},MathUtil.clamp=function(e,t,n){return"number"==typeof n&&"number"==typeof e&&"number"==typeof t||Number.isInteger(n)&&Number.isInteger(e)&&Number.isInteger(t)?e<t?t:n<e?n:e:void 0},MathUtil.wrap=function(e,t){return e<0?t- -e%t:e%t},MathUtil.max=function(){if(3===arguments.length){var e=arguments[1],t=arguments[2],n=arguments[0];return n<e&&(n=e),n<t&&(n=t),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return a<r&&(a=r),a<i&&(a=i),a<o&&(a=o),a}},MathUtil.average=function(e,t){return(e+t)/2},staticAccessors$5.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(MathUtil,staticAccessors$5);var StringBuffer=function(e){this.str=e};StringBuffer.prototype.append=function(e){this.str+=e},StringBuffer.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)},StringBuffer.prototype.toString=function(){return this.str};var Integer=function(e){this.value=e};Integer.prototype.intValue=function(){return this.value},Integer.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0},Integer.isNaN=function(e){return Number.isNaN(e)};var Character=function(){};Character.isWhitespace=function(e){return e<=32&&0<=e||127===e},Character.toUpperCase=function(e){return e.toUpperCase()};var DD=function e(){var t,n,r,i;this._hi=0,(this._lo=0)===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]?(t=arguments[0],this.init(t)):arguments[0]instanceof e?(n=arguments[0],this.init(n)):"string"==typeof arguments[0]&&e.call(this,e.parse(arguments[0])):2===arguments.length&&(r=arguments[0],i=arguments[1],this.init(r,i))},staticAccessors$7={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};DD.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo},DD.prototype.extractSignificantDigits=function(e,t){var n=this.abs(),r=DD.magnitude(n._hi),i=DD.TEN.pow(r);(n=n.divide(i)).gt(DD.TEN)?(n=n.divide(DD.TEN),r+=1):n.lt(DD.ONE)&&(n=n.multiply(DD.TEN),--r);for(var o=r+1,a=new StringBuffer,s=DD.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){e&&l===o&&a.append(".");var c=Math.trunc(n._hi);if(c<0)break;var u=!1,p=0,p=9<c?(u=!0,"9"):"0"+c;a.append(p),n=n.subtract(DD.valueOf(c)).multiply(DD.TEN),u&&n.selfAdd(DD.TEN);var d=!0,f=DD.magnitude(n._hi);if(f<0&&Math.abs(f)>=s-l&&(d=!1),!d)break}return t[0]=r,a.toString()},DD.prototype.sqr=function(){return this.multiply(this)},DD.prototype.doubleValue=function(){return this._hi+this._lo},DD.prototype.subtract=function(e){return e instanceof DD?this.add(e.negate()):"number"==typeof e?this.add(-e):void 0},DD.prototype.equals=function(e){if(1===arguments.length)return this._hi===e._hi&&this._lo===e._lo},DD.prototype.isZero=function(){return 0===this._hi&&0===this._lo},DD.prototype.selfSubtract=function(e){if(e instanceof DD){var t=e;return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof e){var n=e;return this.isNaN()?this:this.selfAdd(-n,0)}},DD.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},DD.prototype.min=function(e){return this.le(e)?this:e},DD.prototype.selfDivide=function(e,t){if(1===arguments.length){if(e instanceof DD)return this.selfDivide(e._hi,e._lo);if("number"==typeof e)return this.selfDivide(e,0)}else if(2===arguments.length){var n,r,i,o,a=null,s=null,l=null,c=this._hi/e;return l=(a=(s=DD.SPLIT*c)-(a=s-c))*(r=(l=DD.SPLIT*e)-(l-e))-(o=c*e)+a*(i=e-r)+(n=c-a)*r+n*i,l=c+(s=(this._hi-o-l+this._lo-c*t)/e),this._hi=l,this._lo=c-l+s,this}},DD.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},DD.prototype.divide=function(e){if(e instanceof DD){var t,n,r,i=null,o=null,a=null,s=null,l=(o=this._hi/e._hi)-(i=(a=DD.SPLIT*o)-(i=a-o));return s=i*(t=(s=DD.SPLIT*e._hi)-(s-e._hi))-(r=o*e._hi)+i*(n=e._hi-t)+l*t+l*n,a=(this._hi-r-s+this._lo-o*e._lo)/e._hi,new DD(s=o+a,o-s+a)}if("number"==typeof e){var c=e;return Double.isNaN(c)?DD.createNaN():DD.copy(this).selfDivide(c,0)}},DD.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo},DD.prototype.pow=function(e){if(0===e)return DD.valueOf(1);var t=new DD(this),n=DD.valueOf(1),r=Math.abs(e);if(1<r)for(;0<r;)r%2==1&&n.selfMultiply(t),0<(r/=2)&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n},DD.prototype.ceil=function(){if(this.isNaN())return DD.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new DD(e,t)},DD.prototype.compareTo=function(e){return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},DD.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},DD.prototype.setValue=function(e){return e instanceof DD||"number"==typeof e?(this.init(e),this):void 0},DD.prototype.max=function(e){return this.ge(e)?this:e},DD.prototype.sqrt=function(){if(this.isZero())return DD.valueOf(0);if(this.isNegative())return DD.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=DD.valueOf(t),r=this.subtract(n.sqr())._hi*(.5*e);return n.add(r)},DD.prototype.selfAdd=function(e,t){if(1===arguments.length){if(e instanceof DD)return this.selfAdd(e._hi,e._lo);if("number"==typeof e){var n,r,i=null,o=null,a=(i=this._hi+e)-(o=i-this._hi),s=(r=e-o+(this._hi-a)+this._lo)+(i-(n=i+r));return this._hi=n+s,this._lo=s+(n-this._hi),this}}else if(2===arguments.length){var l,c=null,u=null,p=this._hi+e,d=this._lo+t,f=p-(c=p-this._hi),h=d-(u=d-this._lo),g=(l=p+(c=e-c+(this._hi-f)+d))+(c=t-u+(this._lo-h)+(c+(p-l))),m=c+(l-g);return this._hi=g,this._lo=m,this}},DD.prototype.selfMultiply=function(e,t){if(1===arguments.length){if(e instanceof DD)return this.selfMultiply(e._hi,e._lo);if("number"==typeof e)return this.selfMultiply(e,0)}else if(2===arguments.length){var n,r,i,o=null,a=(o=DD.SPLIT*this._hi)-this._hi,s=DD.SPLIT*e;a=o-a,n=this._hi-a,r=s-e;var l=(o=this._hi*e)+(s=a*(r=s-r)-o+a*(i=e-r)+n*r+n*i+(this._hi*t+this._lo*e)),c=s+(o-l);return this._hi=l,this._lo=c,this}},DD.prototype.selfSqr=function(){return this.selfMultiply(this)},DD.prototype.floor=function(){if(this.isNaN())return DD.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new DD(e,t)},DD.prototype.negate=function(){return this.isNaN()?this:new DD(-this._hi,-this._lo)},DD.prototype.clone=function(){},DD.prototype.multiply=function(e){if(e instanceof DD){var t=e;return t.isNaN()?DD.createNaN():DD.copy(this).selfMultiply(t)}if("number"==typeof e){var n=e;return Double.isNaN(n)?DD.createNaN():DD.copy(this).selfMultiply(n,0)}},DD.prototype.isNaN=function(){return Double.isNaN(this._hi)},DD.prototype.intValue=function(){return Math.trunc(this._hi)},DD.prototype.toString=function(){var e=DD.magnitude(this._hi);return-3<=e&&e<=20?this.toStandardNotation():this.toSciNotation()},DD.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(null!==e)return e;var t,n=new Array(1).fill(null),r=this.extractSignificantDigits(!0,n),i=n[0]+1,o=r;return"."===r.charAt(0)?o="0"+r:i<0?o="0."+DD.stringOfChar("0",-i)+r:-1===r.indexOf(".")&&(t=i-r.length,o=r+DD.stringOfChar("0",t)+".0"),this.isNegative()?"-"+o:o},DD.prototype.reciprocal=function(){var e,t,n=null,r=null,i=null,o=null,a=(r=1/this._hi)-(n=(i=DD.SPLIT*r)-(n=i-r)),s=(o=DD.SPLIT*this._hi)-this._hi,l=r+(i=(1-(t=r*this._hi)-(o=n*(s=o-s)-t+n*(e=this._hi-s)+a*s+a*e)-r*this._lo)/this._hi);return new DD(l,r-l+i)},DD.prototype.toSciNotation=function(){if(this.isZero())return DD.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(null!==e)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),r=DD.SCI_NOT_EXPONENT_CHAR+t[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";1<n.length&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},DD.prototype.abs=function(){return this.isNaN()?DD.NaN:this.isNegative()?this.negate():new DD(this)},DD.prototype.isPositive=function(){return(0<this._hi||0===this._hi)&&0<this._lo},DD.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo},DD.prototype.add=function(e){if(e instanceof DD){var t=e;return DD.copy(this).selfAdd(t)}if("number"==typeof e){var n=e;return DD.copy(this).selfAdd(n)}},DD.prototype.init=function(e,t){var n,r;1===arguments.length?"number"==typeof e?(this._hi=e,this._lo=0):e instanceof DD&&(n=e,this._hi=n._hi,this._lo=n._lo):2===arguments.length&&(r=t,this._hi=e,this._lo=r)},DD.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo},DD.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},DD.prototype.trunc=function(){return this.isNaN()?DD.NaN:this.isPositive()?this.floor():this.ceil()},DD.prototype.signum=function(){return 0<this._hi?1:this._hi<0?-1:0<this._lo?1:this._lo<0?-1:0},DD.prototype.interfaces_=function(){return[Serializable,Comparable,Clonable]},DD.prototype.getClass=function(){return DD},DD.sqr=function(e){return DD.valueOf(e).selfMultiply(e)},DD.valueOf=function(e){return"string"==typeof e?DD.parse(e):"number"==typeof e?new DD(e):void 0},DD.sqrt=function(e){return DD.valueOf(e).sqrt()},DD.parse=function(t){for(var e=0,n=t.length;Character.isWhitespace(t.charAt(e));)e++;var r,i=!1;e<n&&("-"!==(r=t.charAt(e))&&"+"!==r||(e++,"-"===r&&(i=!0)));for(var o=new DD,a=0,s=0,l=0;!(n<=e);){var c=t.charAt(e);if(e++,Character.isDigit(c)){var u=c-"0";o.selfMultiply(DD.TEN),o.selfAdd(u),a++}else{if("."!==c){if("e"!==c&&"E"!==c)throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t);var p=t.substring(e);try{l=Integer.parseInt(p)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+p+" in string "+t):e}break}s=a}}var d,f,h=o,g=a-s-l;return 0==g?h=o:0<g?(d=DD.TEN.pow(g),h=o.divide(d)):g<0&&(f=DD.TEN.pow(-g),h=o.multiply(f)),i?h.negate():h},DD.createNaN=function(){return new DD(Double.NaN,Double.NaN)},DD.copy=function(e){return new DD(e)},DD.magnitude=function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=t&&(r+=1),r},DD.stringOfChar=function(e,t){for(var n=new StringBuffer,r=0;r<t;r++)n.append(e);return n.toString()},staticAccessors$7.PI.get=function(){return new DD(3.141592653589793,12246467991473532e-32)},staticAccessors$7.TWO_PI.get=function(){return new DD(6.283185307179586,24492935982947064e-32)},staticAccessors$7.PI_2.get=function(){return new DD(1.5707963267948966,6123233995736766e-32)},staticAccessors$7.E.get=function(){return new DD(2.718281828459045,14456468917292502e-32)},staticAccessors$7.NaN.get=function(){return new DD(Double.NaN,Double.NaN)},staticAccessors$7.EPS.get=function(){return 123259516440783e-46},staticAccessors$7.SPLIT.get=function(){return 134217729},staticAccessors$7.MAX_PRINT_DIGITS.get=function(){return 32},staticAccessors$7.TEN.get=function(){return DD.valueOf(10)},staticAccessors$7.ONE.get=function(){return DD.valueOf(1)},staticAccessors$7.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},staticAccessors$7.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(DD,staticAccessors$7);var CGAlgorithmsDD=function(){},staticAccessors$6={DP_SAFE_EPSILON:{configurable:!0}};CGAlgorithmsDD.prototype.interfaces_=function(){return[]},CGAlgorithmsDD.prototype.getClass=function(){return CGAlgorithmsDD},CGAlgorithmsDD.orientationIndex=function(e,t,n){var r=CGAlgorithmsDD.orientationIndexFilter(e,t,n);if(r<=1)return r;var i=DD.valueOf(t.x).selfAdd(-e.x),o=DD.valueOf(t.y).selfAdd(-e.y),a=DD.valueOf(n.x).selfAdd(-t.x),s=DD.valueOf(n.y).selfAdd(-t.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},CGAlgorithmsDD.signOfDet2x2=function(e,t,n,r){return e.multiply(r).selfSubtract(t.multiply(n)).signum()},CGAlgorithmsDD.intersection=function(e,t,n,r){var i=DD.valueOf(r.y).selfSubtract(n.y).selfMultiply(DD.valueOf(t.x).selfSubtract(e.x)),o=DD.valueOf(r.x).selfSubtract(n.x).selfMultiply(DD.valueOf(t.y).selfSubtract(e.y)),a=i.subtract(o),s=DD.valueOf(r.x).selfSubtract(n.x).selfMultiply(DD.valueOf(e.y).selfSubtract(n.y)),l=DD.valueOf(r.y).selfSubtract(n.y).selfMultiply(DD.valueOf(e.x).selfSubtract(n.x)),c=s.subtract(l).selfDivide(a).doubleValue(),u=DD.valueOf(e.x).selfAdd(DD.valueOf(t.x).selfSubtract(e.x).selfMultiply(c)).doubleValue(),p=DD.valueOf(t.x).selfSubtract(e.x).selfMultiply(DD.valueOf(e.y).selfSubtract(n.y)),d=DD.valueOf(t.y).selfSubtract(e.y).selfMultiply(DD.valueOf(e.x).selfSubtract(n.x)),f=p.subtract(d).selfDivide(a).doubleValue(),h=DD.valueOf(n.y).selfAdd(DD.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new Coordinate(u,h)},CGAlgorithmsDD.orientationIndexFilter=function(e,t,n){var r=null,i=(e.x-n.x)*(t.y-n.y),o=(e.y-n.y)*(t.x-n.x),a=i-o;if(0<i){if(o<=0)return CGAlgorithmsDD.signum(a);r=i+o}else{if(!(i<0))return CGAlgorithmsDD.signum(a);if(0<=o)return CGAlgorithmsDD.signum(a);r=-i-o}var s=CGAlgorithmsDD.DP_SAFE_EPSILON*r;return s<=a||s<=-a?CGAlgorithmsDD.signum(a):2},CGAlgorithmsDD.signum=function(e){return 0<e?1:e<0?-1:0},staticAccessors$6.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(CGAlgorithmsDD,staticAccessors$6);var CoordinateSequence=function(){},staticAccessors$8={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};staticAccessors$8.X.get=function(){return 0},staticAccessors$8.Y.get=function(){return 1},staticAccessors$8.Z.get=function(){return 2},staticAccessors$8.M.get=function(){return 3},CoordinateSequence.prototype.setOrdinate=function(){},CoordinateSequence.prototype.size=function(){},CoordinateSequence.prototype.getOrdinate=function(){},CoordinateSequence.prototype.getCoordinate=function(){},CoordinateSequence.prototype.getCoordinateCopy=function(){},CoordinateSequence.prototype.getDimension=function(){},CoordinateSequence.prototype.getX=function(){},CoordinateSequence.prototype.clone=function(){},CoordinateSequence.prototype.expandEnvelope=function(){},CoordinateSequence.prototype.copy=function(){},CoordinateSequence.prototype.getY=function(){},CoordinateSequence.prototype.toCoordinateArray=function(){},CoordinateSequence.prototype.interfaces_=function(){return[Clonable]},CoordinateSequence.prototype.getClass=function(){return CoordinateSequence},Object.defineProperties(CoordinateSequence,staticAccessors$8);var Exception=function(){},NotRepresentableException=(wlf=Exception,wlf&&(xlf.__proto__=wlf),((xlf.prototype=Object.create(wlf&&wlf.prototype)).constructor=xlf).prototype.interfaces_=function(){return[]},xlf.prototype.getClass=function(){return xlf},xlf),wlf;function xlf(){wlf.call(this,"Projective point not representable on the Cartesian plane.")}var System=function(){};System.arraycopy=function(e,t,n,r,i){for(var o=0,a=t;a<t+i;a++)n[r+o]=e[a],o++},System.getProperty=function(e){return{"line.separator":"\n"}[e]};var HCoordinate=function e(){var t,n,r,i,o,a,s,l,c,u,p,d,f,h,g,m,y,v,_,b;this.x=null,this.y=null,this.w=null,0===arguments.length?(this.x=0,this.y=0,this.w=1):1===arguments.length?(t=arguments[0],this.x=t.x,this.y=t.y,this.w=1):2===arguments.length?"number"==typeof arguments[0]&&"number"==typeof arguments[1]?(n=arguments[0],r=arguments[1],this.x=n,this.y=r,this.w=1):arguments[0]instanceof e&&arguments[1]instanceof e?(i=arguments[0],o=arguments[1],this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y):arguments[0]instanceof Coordinate&&arguments[1]instanceof Coordinate&&(a=arguments[0],s=arguments[1],this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y):3===arguments.length?(l=arguments[0],c=arguments[1],u=arguments[2],this.x=l,this.y=c,this.w=u):4===arguments.length&&(d=arguments[1],f=arguments[2],h=arguments[3],g=(p=arguments[0]).y-d.y,m=d.x-p.x,y=p.x*d.y-d.x*p.y,v=f.y-h.y,_=h.x-f.x,b=f.x*h.y-h.x*f.y,this.x=m*b-_*y,this.y=v*y-g*b,this.w=g*_-v*m)};HCoordinate.prototype.getY=function(){var e=this.y/this.w;if(Double.isNaN(e)||Double.isInfinite(e))throw new NotRepresentableException;return e},HCoordinate.prototype.getX=function(){var e=this.x/this.w;if(Double.isNaN(e)||Double.isInfinite(e))throw new NotRepresentableException;return e},HCoordinate.prototype.getCoordinate=function(){var e=new Coordinate;return e.x=this.getX(),e.y=this.getY(),e},HCoordinate.prototype.interfaces_=function(){return[]},HCoordinate.prototype.getClass=function(){return HCoordinate},HCoordinate.intersection=function(e,t,n,r){var i=e.y-t.y,o=t.x-e.x,a=e.x*t.y-t.x*e.y,s=n.y-r.y,l=r.x-n.x,c=n.x*r.y-r.x*n.y,u=i*l-s*o,p=(o*c-l*a)/u,d=(s*a-i*c)/u;if(Double.isNaN(p)||Double.isInfinite(p)||Double.isNaN(d)||Double.isInfinite(d))throw new NotRepresentableException;return new Coordinate(p,d)};var Envelope=function e(){var t,n,r,i,o,a,s,l;this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length?this.init():1===arguments.length?arguments[0]instanceof Coordinate?(t=arguments[0],this.init(t.x,t.x,t.y,t.y)):arguments[0]instanceof e&&(n=arguments[0],this.init(n)):2===arguments.length?(r=arguments[0],i=arguments[1],this.init(r.x,i.x,r.y,i.y)):4===arguments.length&&(o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3],this.init(o,a,s,l))},staticAccessors$9={serialVersionUID:{configurable:!0}};Envelope.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Envelope.prototype.equals=function(e){if(!(e instanceof Envelope))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()},Envelope.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new Envelope;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny,r=this._maxx<e._maxx?this._maxx:e._maxx,i=this._maxy<e._maxy?this._maxy:e._maxy;return new Envelope(t,r,n,i)},Envelope.prototype.isNull=function(){return this._maxx<this._minx},Envelope.prototype.getMaxX=function(){return this._maxx},Envelope.prototype.covers=function(e,t){if(1===arguments.length){if(e instanceof Coordinate)return this.covers(e.x,e.y);if(e instanceof Envelope){var n=e;return this.isNull()||n.isNull()?!1:n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}}else if(2===arguments.length){var r=e,i=t;return this.isNull()?!1:r>=this._minx&&r<=this._maxx&&i>=this._miny&&i<=this._maxy}},Envelope.prototype.intersects=function(e,t){if(1===arguments.length){if(e instanceof Envelope){var n=e;return this.isNull()||n.isNull()?!1:!(n._minx>this._maxx||n._maxx<this._minx||n._miny>this._maxy||n._maxy<this._miny)}if(e instanceof Coordinate)return this.intersects(e.x,e.y)}else if(2===arguments.length){var r=e,i=t;return this.isNull()?!1:!(r>this._maxx||r<this._minx||i>this._maxy||i<this._miny)}},Envelope.prototype.getMinY=function(){return this._miny},Envelope.prototype.getMinX=function(){return this._minx},Envelope.prototype.expandToInclude=function(e,t){var n,r;if(1===arguments.length){if(e instanceof Coordinate)this.expandToInclude(e.x,e.y);else if(e instanceof Envelope){var i=e;if(i.isNull())return null;this.isNull()?(this._minx=i.getMinX(),this._maxx=i.getMaxX(),this._miny=i.getMinY(),this._maxy=i.getMaxY()):(i._minx<this._minx&&(this._minx=i._minx),i._maxx>this._maxx&&(this._maxx=i._maxx),i._miny<this._miny&&(this._miny=i._miny),i._maxy>this._maxy&&(this._maxy=i._maxy))}}else 2===arguments.length&&(n=e,r=t,this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r)))},Envelope.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t},Envelope.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Envelope.prototype.compareTo=function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0},Envelope.prototype.translate=function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)},Envelope.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Envelope.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Envelope.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Envelope.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return t<e?e:t},Envelope.prototype.expandBy=function(e,t){if(1===arguments.length)this.expandBy(e,e);else if(2===arguments.length){var n=e,r=t;if(this.isNull())return null;this._minx-=n,this._maxx+=n,this._miny-=r,this._maxy+=r,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Envelope.prototype.contains=function(e,t){if(1===arguments.length){if(e instanceof Envelope)return this.covers(e);if(e instanceof Coordinate)return this.covers(e)}else if(2===arguments.length){return this.covers(e,t)}},Envelope.prototype.centre=function(){return this.isNull()?null:new Coordinate((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Envelope.prototype.init=function(e,t,n,r){var i,o,a,s,l;0===arguments.length?this.setToNull():1===arguments.length?e instanceof Coordinate?this.init(e.x,e.x,e.y,e.y):e instanceof Envelope&&(i=e,this._minx=i._minx,this._maxx=i._maxx,this._miny=i._miny,this._maxy=i._maxy):2===arguments.length?this.init(e.x,t.x,e.y,t.y):4===arguments.length&&(s=n,l=r,(o=e)<(a=t)?(this._minx=o,this._maxx=a):(this._minx=a,this._maxx=o),s<l?(this._miny=s,this._maxy=l):(this._miny=l,this._maxy=s))},Envelope.prototype.getMaxY=function(){return this._maxy},Envelope.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),0===t?n:0===n?t:Math.sqrt(t*t+n*n)},Envelope.prototype.hashCode=function(){return 37*(37*(37*(629+Coordinate.hashCode(this._minx))+Coordinate.hashCode(this._maxx))+Coordinate.hashCode(this._miny))+Coordinate.hashCode(this._maxy)},Envelope.prototype.interfaces_=function(){return[Comparable,Serializable]},Envelope.prototype.getClass=function(){return Envelope},Envelope.intersects=function(e,t,n,r){if(3===arguments.length)return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y);if(4===arguments.length){var i=e,o=t,a=n,s=r,l=Math.min(a.x,s.x),c=Math.max(a.x,s.x),u=Math.min(i.x,o.x),p=Math.max(i.x,o.x);return c<u?!1:!(p<l)&&(l=Math.min(a.y,s.y),c=Math.max(a.y,s.y),u=Math.min(i.y,o.y),p=Math.max(i.y,o.y),!(c<u)&&!(p<l))}},staticAccessors$9.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Envelope,staticAccessors$9);var regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},WKTParser=function(e){this.geometryFactory=e||new GeometryFactory};WKTParser.prototype.read=function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=regExes.typeStr.exec(e);if(-1!==e.search("EMPTY")&&((i=regExes.emptyTypeStr.exec(e))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],parse$1[n]&&(t=parse$1[n].apply(this,[r]))),void 0===t)throw new Error("Could not parse WKT "+e);return t},WKTParser.prototype.write=function(e){return this.extractGeometry(e)},WKTParser.prototype.extractGeometry=function(e){var t=e.getGeometryType().toLowerCase();if(!extract$1[t])return null;var n=t.toUpperCase(),r=e.isEmpty()?n+" EMPTY":n+"("+extract$1[t].apply(this,[e])+")";return r};var extract$1={coordinate:function(e){return e.x+" "+e.y},point:function(e){return extract$1.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var t=[],n=0,r=e._geometries.length;n<r;++n)t.push("("+extract$1.point.apply(this,[e._geometries[n]])+")");return t.join(",")},linestring:function(e){for(var t=[],n=0,r=e._points._coordinates.length;n<r;++n)t.push(extract$1.coordinate.apply(this,[e._points._coordinates[n]]));return t.join(",")},linearring:function(e){for(var t=[],n=0,r=e._points._coordinates.length;n<r;++n)t.push(extract$1.coordinate.apply(this,[e._points._coordinates[n]]));return t.join(",")},multilinestring:function(e){for(var t=[],n=0,r=e._geometries.length;n<r;++n)t.push("("+extract$1.linestring.apply(this,[e._geometries[n]])+")");return t.join(",")},polygon:function(e){var t=[];t.push("("+extract$1.linestring.apply(this,[e._shell])+")");for(var n=0,r=e._holes.length;n<r;++n)t.push("("+extract$1.linestring.apply(this,[e._holes[n]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],n=0,r=e._geometries.length;n<r;++n)t.push("("+extract$1.polygon.apply(this,[e._geometries[n]])+")");return t.join(",")},geometrycollection:function(e){for(var t=[],n=0,r=e._geometries.length;n<r;++n)t.push(this.extractGeometry(e._geometries[n]));return t.join(",")}},parse$1={point:function(e){if(void 0===e)return this.geometryFactory.createPoint();var t=e.trim().split(regExes.spaces);return this.geometryFactory.createPoint(new Coordinate(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){var t;if(void 0===e)return this.geometryFactory.createMultiPoint();for(var n=e.trim().split(","),r=[],i=0,o=n.length;i<o;++i)t=n[i].replace(regExes.trimParens,"$1"),r.push(parse$1.point.apply(this,[t]));return this.geometryFactory.createMultiPoint(r)},linestring:function(e){if(void 0===e)return this.geometryFactory.createLineString();for(var t,n=e.trim().split(","),r=[],i=0,o=n.length;i<o;++i)t=n[i].trim().split(regExes.spaces),r.push(new Coordinate(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLineString(r)},linearring:function(e){if(void 0===e)return this.geometryFactory.createLinearRing();for(var t,n=e.trim().split(","),r=[],i=0,o=n.length;i<o;++i)t=n[i].trim().split(regExes.spaces),r.push(new Coordinate(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(e){var t;if(void 0===e)return this.geometryFactory.createMultiLineString();for(var n=e.trim().split(regExes.parenComma),r=[],i=0,o=n.length;i<o;++i)t=n[i].replace(regExes.trimParens,"$1"),r.push(parse$1.linestring.apply(this,[t]));return this.geometryFactory.createMultiLineString(r)},polygon:function(e){var t,n,r;if(void 0===e)return this.geometryFactory.createPolygon();for(var i,o=e.trim().split(regExes.parenComma),a=[],s=0,l=o.length;s<l;++s)t=o[s].replace(regExes.trimParens,"$1"),n=parse$1.linestring.apply(this,[t]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(e){var t;if(void 0===e)return this.geometryFactory.createMultiPolygon();for(var n=e.trim().split(regExes.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)t=n[i].replace(regExes.trimParens,"$1"),r.push(parse$1.polygon.apply(this,[t]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(e){if(void 0===e)return this.geometryFactory.createGeometryCollection();for(var t=(e=e.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=t.length;r<i;++r)n.push(this.read(t[r]));return this.geometryFactory.createGeometryCollection(n)}},WKTWriter=function(e){this.parser=new WKTParser(e)};WKTWriter.prototype.write=function(e){return this.parser.write(e)},WKTWriter.toLineString=function(e,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"};var RuntimeException=(Hqf=Error,Hqf&&(Iqf.__proto__=Hqf),(Iqf.prototype=Object.create(Hqf&&Hqf.prototype)).constructor=Iqf),Hqf;function Iqf(e){Hqf.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new Hqf).stack}var AssertionFailedException=(Kqf=RuntimeException,Kqf&&(Lqf.__proto__=Kqf),((Lqf.prototype=Object.create(Kqf&&Kqf.prototype)).constructor=Lqf).prototype.interfaces_=function(){return[]},Lqf.prototype.getClass=function(){return Lqf},Lqf),Kqf;function Lqf(){var e;Kqf.call(this),0===arguments.length?Kqf.call(this):1===arguments.length&&(e=arguments[0],Kqf.call(this,e))}var Assert=function(){};Assert.prototype.interfaces_=function(){return[]},Assert.prototype.getClass=function(){return Assert},Assert.shouldNeverReachHere=function(e){if(0===arguments.length)Assert.shouldNeverReachHere(null);else if(1===arguments.length){throw new AssertionFailedException("Should never reach here"+(null!==e?": "+e:""))}},Assert.isTrue=function(e,t){var n,r;if(1===arguments.length)n=e,Assert.isTrue(n,null);else if(2===arguments.length&&(r=t,!(n=e)))throw null===r?new AssertionFailedException:new AssertionFailedException(r)},Assert.equals=function(e,t,n){var r,i,o;if(2===arguments.length)r=e,i=t,Assert.equals(r,i,null);else if(3===arguments.length&&(r=e,o=n,!(i=t).equals(r)))throw new AssertionFailedException("Expected "+r+" but encountered "+i+(null!==o?": "+o:""))};var LineIntersector=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Coordinate,this._intPt[1]=new Coordinate,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},staticAccessors$10={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};LineIntersector.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]},LineIntersector.prototype.getTopologySummary=function(){var e=new StringBuffer;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()},LineIntersector.prototype.computeIntersection=function(e,t,n,r){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(e,t,n,r)},LineIntersector.prototype.getIntersectionNum=function(){return this._result},LineIntersector.prototype.computeIntLineIndex=function(e){var t,n;0===arguments.length?null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1)):1===arguments.length&&(t=e,n=this.getEdgeDistance(t,0),this.getEdgeDistance(t,1)<n?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0))},LineIntersector.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},LineIntersector.prototype.setPrecisionModel=function(e){this._precisionModel=e},LineIntersector.prototype.isInteriorIntersection=function(e){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=e,n=0;n<this._result;n++)if(!this._intPt[n].equals2D(this._inputLines[t][0])&&!this._intPt[n].equals2D(this._inputLines[t][1]))return!0;return!1}},LineIntersector.prototype.getIntersection=function(e){return this._intPt[e]},LineIntersector.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},LineIntersector.prototype.hasIntersection=function(){return this._result!==LineIntersector.NO_INTERSECTION},LineIntersector.prototype.getEdgeDistance=function(e,t){return LineIntersector.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1])},LineIntersector.prototype.isCollinear=function(){return this._result===LineIntersector.COLLINEAR_INTERSECTION},LineIntersector.prototype.toString=function(){return WKTWriter.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+WKTWriter.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},LineIntersector.prototype.getEndpoint=function(e,t){return this._inputLines[e][t]},LineIntersector.prototype.isIntersection=function(e){for(var t=0;t<this._result;t++)if(this._intPt[t].equals2D(e))return!0;return!1},LineIntersector.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]},LineIntersector.prototype.interfaces_=function(){return[]},LineIntersector.prototype.getClass=function(){return LineIntersector},LineIntersector.computeEdgeDistance=function(e,t,n){var r,i,o=Math.abs(n.x-t.x),a=Math.abs(n.y-t.y),s=-1;return e.equals(t)?s=0:e.equals(n)?s=a<o?o:a:(r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y),0!==(s=a<o?r:i)||e.equals(t)||(s=Math.max(r,i))),Assert.isTrue(!(0===s&&!e.equals(t)),"Bad distance calculation"),s},LineIntersector.nonRobustComputeEdgeDistance=function(e,t){var n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);return Assert.isTrue(!(0===i&&!e.equals(t)),"Invalid distance calculation"),i},staticAccessors$10.DONT_INTERSECT.get=function(){return 0},staticAccessors$10.DO_INTERSECT.get=function(){return 1},staticAccessors$10.COLLINEAR.get=function(){return 2},staticAccessors$10.NO_INTERSECTION.get=function(){return 0},staticAccessors$10.POINT_INTERSECTION.get=function(){return 1},staticAccessors$10.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(LineIntersector,staticAccessors$10);var RobustLineIntersector=(gsf=LineIntersector,gsf&&(hsf.__proto__=gsf),((hsf.prototype=Object.create(gsf&&gsf.prototype)).constructor=hsf).prototype.isInSegmentEnvelopes=function(e){var t=new Envelope(this._inputLines[0][0],this._inputLines[0][1]),n=new Envelope(this._inputLines[1][0],this._inputLines[1][1]);return t.contains(e)&&n.contains(e)},hsf.prototype.computeIntersection=function(e,t,n){if(3!==arguments.length)return gsf.prototype.computeIntersection.apply(this,arguments);var r=e,i=t,o=n;if(this._isProper=!1,Envelope.intersects(i,o,r)&&0===CGAlgorithms.orientationIndex(i,o,r)&&0===CGAlgorithms.orientationIndex(o,i,r))return this._isProper=!0,(r.equals(i)||r.equals(o))&&(this._isProper=!1),this._result=gsf.POINT_INTERSECTION,null;this._result=gsf.NO_INTERSECTION},hsf.prototype.normalizeToMinimum=function(e,t,n,r,i){i.x=this.smallestInAbsValue(e.x,t.x,n.x,r.x),i.y=this.smallestInAbsValue(e.y,t.y,n.y,r.y),e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},hsf.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=HCoordinate.intersection(t,n,r,i)}catch(e){if(!(e instanceof NotRepresentableException))throw e;o=hsf.nearestEndpoint(t,n,r,i)}return o},hsf.prototype.intersection=function(e,t,n,r){var i=this.intersectionWithNormalization(e,t,n,r);return this.isInSegmentEnvelopes(i)||(i=new Coordinate(hsf.nearestEndpoint(e,t,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i},hsf.prototype.smallestInAbsValue=function(e,t,n,r){var i=e,o=Math.abs(i);return Math.abs(t)<o&&(i=t,o=Math.abs(t)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},hsf.prototype.checkDD=function(e,t,n,r,i){var o=CGAlgorithmsDD.intersection(e,t,n,r),a=this.isInSegmentEnvelopes(o);System.out.println("DD in env = "+a+"  --------------------- "+o),1e-4<i.distance(o)&&System.out.println("Distance = "+i.distance(o))},hsf.prototype.intersectionWithNormalization=function(e,t,n,r){var i=new Coordinate(e),o=new Coordinate(t),a=new Coordinate(n),s=new Coordinate(r),l=new Coordinate;this.normalizeToEnvCentre(i,o,a,s,l);var c=this.safeHCoordinateIntersection(i,o,a,s);return c.x+=l.x,c.y+=l.y,c},hsf.prototype.computeCollinearIntersection=function(e,t,n,r){var i=Envelope.intersects(e,t,n),o=Envelope.intersects(e,t,r),a=Envelope.intersects(n,r,e),s=Envelope.intersects(n,r,t);return i&&o?(this._intPt[0]=n,this._intPt[1]=r,gsf.COLLINEAR_INTERSECTION):a&&s?(this._intPt[0]=e,this._intPt[1]=t,gsf.COLLINEAR_INTERSECTION):i&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||s?gsf.COLLINEAR_INTERSECTION:gsf.POINT_INTERSECTION):i&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?gsf.COLLINEAR_INTERSECTION:gsf.POINT_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||i||s?gsf.COLLINEAR_INTERSECTION:gsf.POINT_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||i||a?gsf.COLLINEAR_INTERSECTION:gsf.POINT_INTERSECTION):gsf.NO_INTERSECTION},hsf.prototype.normalizeToEnvCentre=function(e,t,n,r,i){var o=e.x<t.x?e.x:t.x,a=e.y<t.y?e.y:t.y,s=e.x>t.x?e.x:t.x,l=e.y>t.y?e.y:t.y,c=n.x<r.x?n.x:r.x,u=n.y<r.y?n.y:r.y,p=n.x>r.x?n.x:r.x,d=n.y>r.y?n.y:r.y,f=((c<o?o:c)+(s<p?s:p))/2,h=((u<a?a:u)+(l<d?l:d))/2;i.x=f,i.y=h,e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},hsf.prototype.computeIntersect=function(e,t,n,r){if(this._isProper=!1,!Envelope.intersects(e,t,n,r))return gsf.NO_INTERSECTION;var i=CGAlgorithms.orientationIndex(e,t,n),o=CGAlgorithms.orientationIndex(e,t,r);if(0<i&&0<o||i<0&&o<0)return gsf.NO_INTERSECTION;var a=CGAlgorithms.orientationIndex(n,r,e),s=CGAlgorithms.orientationIndex(n,r,t);return 0<a&&0<s||a<0&&s<0?gsf.NO_INTERSECTION:0===i&&0===o&&0===a&&0===s?this.computeCollinearIntersection(e,t,n,r):(0===i||0===o||0===a||0===s?(this._isProper=!1,e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:t.equals2D(n)||t.equals2D(r)?this._intPt[0]=t:0===i?this._intPt[0]=new Coordinate(n):0===o?this._intPt[0]=new Coordinate(r):0===a?this._intPt[0]=new Coordinate(e):0===s&&(this._intPt[0]=new Coordinate(t))):(this._isProper=!0,this._intPt[0]=this.intersection(e,t,n,r)),gsf.POINT_INTERSECTION)},hsf.prototype.interfaces_=function(){return[]},hsf.prototype.getClass=function(){return hsf},hsf.nearestEndpoint=function(e,t,n,r){var i=e,o=CGAlgorithms.distancePointLine(e,n,r),a=CGAlgorithms.distancePointLine(t,n,r);return a<o&&(o=a,i=t),(a=CGAlgorithms.distancePointLine(n,e,t))<o&&(o=a,i=n),(a=CGAlgorithms.distancePointLine(r,e,t))<o&&(o=a,i=r),i},hsf),gsf;function hsf(){gsf.apply(this,arguments)}var RobustDeterminant=function(){};RobustDeterminant.prototype.interfaces_=function(){return[]},RobustDeterminant.prototype.getClass=function(){return RobustDeterminant},RobustDeterminant.orientationIndex=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-t.x,a=n.y-t.y;return RobustDeterminant.signOfDet2x2(r,i,o,a)},RobustDeterminant.signOfDet2x2=function(e,t,n,r){var i,o=null,a=null,o=1;if(0===e||0===r)return 0===t||0===n?0:0<t?0<n?-o:o:0<n?o:-o;if(0===t||0===n)return 0<r?0<e?o:-o:0<e?-o:o;if(0<t?0<r?t<=r||(o=-o,a=e,e=n,n=a,a=t,t=r,r=a):r=t<=-r?(o=-o,n=-n,-r):(a=e,e=-n,n=a,a=t,t=-r,a):0<r?-t<=r?(o=-o,e=-e,t=-t):(a=-e,e=n,n=a,a=-t,t=r,r=a):r=r<=t?(e=-e,t=-t,n=-n,-r):(o=-o,a=-e,e=-n,n=a,a=-t,t=-r,a),0<e){if(!(0<n))return o;if(!(e<=n))return o}else{if(0<n)return-o;if(!(n<=e))return-o;o=-o,e=-e,n=-n}for(;;){if((r-=(i=Math.floor(n/e))*t)<0)return-o;if(t<r)return o;if((n-=i*e)+n<e){if(t<r+r)return o}else{if(r+r<t)return-o;n=e-n,r=t-r,o=-o}if(0===r)return 0===n?0:-o;if(0===n)return o;if((t-=(i=Math.floor(e/n))*r)<0)return o;if(r<t)return-o;if((e-=i*n)+e<n){if(r<t+t)return-o}else{if(t+t<r)return o;e=n-e,t=r-t,o=-o}if(0===t)return 0===e?0:o;if(0===e)return-o}};var RayCrossingCounter=function(e){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=e};RayCrossingCounter.prototype.countSegment=function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,r=t.x;return r<n&&(n=t.x,r=e.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var i=e.x-this._p.x,o=e.y-this._p.y,a=t.x-this._p.x,s=t.y-this._p.y,l=RobustDeterminant.signOfDet2x2(i,o,a,s);if(0===l)return this._isPointOnSegment=!0,null;s<o&&(l=-l),0<l&&this._crossingCount++}},RayCrossingCounter.prototype.isPointInPolygon=function(){return this.getLocation()!==Location.EXTERIOR},RayCrossingCounter.prototype.getLocation=function(){return this._isPointOnSegment?Location.BOUNDARY:this._crossingCount%2==1?Location.INTERIOR:Location.EXTERIOR},RayCrossingCounter.prototype.isOnSegment=function(){return this._isPointOnSegment},RayCrossingCounter.prototype.interfaces_=function(){return[]},RayCrossingCounter.prototype.getClass=function(){return RayCrossingCounter},RayCrossingCounter.locatePointInRing=function(e,t){if(e instanceof Coordinate&&hasInterface(t,CoordinateSequence)){for(var n=t,r=new RayCrossingCounter(e),i=new Coordinate,o=new Coordinate,a=1;a<n.size();a++)if(n.getCoordinate(a,i),n.getCoordinate(a-1,o),r.countSegment(i,o),r.isOnSegment())return r.getLocation();return r.getLocation()}if(e instanceof Coordinate&&t instanceof Array){for(var s=t,l=new RayCrossingCounter(e),c=1;c<s.length;c++){var u=s[c],p=s[c-1];if(l.countSegment(u,p),l.isOnSegment())return l.getLocation()}return l.getLocation()}};var CGAlgorithms=function(){},staticAccessors$3={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};CGAlgorithms.prototype.interfaces_=function(){return[]},CGAlgorithms.prototype.getClass=function(){return CGAlgorithms},CGAlgorithms.orientationIndex=function(e,t,n){return CGAlgorithmsDD.orientationIndex(e,t,n)},CGAlgorithms.signedArea=function(e){if(e instanceof Array){var t=e;if(t.length<3)return 0;for(var n=0,r=t[0].x,i=1;i<t.length-1;i++){var o=t[i].x-r,a=t[i+1].y;n+=o*(t[i-1].y-a)}return n/2}if(hasInterface(e,CoordinateSequence)){var s=e,l=s.size();if(l<3)return 0;var c=new Coordinate,u=new Coordinate,p=new Coordinate;s.getCoordinate(0,u),s.getCoordinate(1,p);var d=u.x;p.x-=d;for(var f=0,h=1;h<l-1;h++)c.y=u.y,u.x=p.x,u.y=p.y,s.getCoordinate(h+1,p),p.x-=d,f+=u.x*(c.y-p.y);return f/2}},CGAlgorithms.distanceLineLine=function(e,t,n,r){if(e.equals(t))return CGAlgorithms.distancePointLine(e,n,r);if(n.equals(r))return CGAlgorithms.distancePointLine(r,e,t);var i,o,a,s,l=!1;return!Envelope.intersects(e,t,n,r)||0==(i=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x))?l=!0:(o=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y),a=((e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y))/i,((s=o/i)<0||1<s||a<0||1<a)&&(l=!0)),l?MathUtil.min(CGAlgorithms.distancePointLine(e,n,r),CGAlgorithms.distancePointLine(t,n,r),CGAlgorithms.distancePointLine(n,e,t),CGAlgorithms.distancePointLine(r,e,t)):0},CGAlgorithms.isPointInRing=function(e,t){return CGAlgorithms.locatePointInRing(e,t)!==Location.EXTERIOR},CGAlgorithms.computeLength=function(e){var t=e.size();if(t<=1)return 0;var n=0,r=new Coordinate;e.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<t;a++){e.getCoordinate(a,r);var s=r.x,l=r.y,c=s-i,u=l-o;n+=Math.sqrt(c*c+u*u),i=s,o=l}return n},CGAlgorithms.isCCW=function(e){var t=e.length-1;if(t<3)throw new IllegalArgumentException("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],r=0,i=1;i<=t;i++){var o=e[i];o.y>n.y&&(n=o,r=i)}for(var a=r;--a<0&&(a=t),e[a].equals2D(n)&&a!==r;);for(var s=r;e[s=(s+1)%t].equals2D(n)&&s!==r;);var l=e[a],c=e[s];if(l.equals2D(n)||c.equals2D(n)||l.equals2D(c))return!1;var u=CGAlgorithms.computeOrientation(l,n,c),p=!1;return p=0===u?l.x>c.x:0<u,p},CGAlgorithms.locatePointInRing=function(e,t){return RayCrossingCounter.locatePointInRing(e,t)},CGAlgorithms.distancePointLinePerpendicular=function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(i)*Math.sqrt(r)},CGAlgorithms.computeOrientation=function(e,t,n){return CGAlgorithms.orientationIndex(e,t,n)},CGAlgorithms.distancePointLine=function(e,t,n){if(2===arguments.length){var r=e,i=t;if(0===i.length)throw new IllegalArgumentException("Line array must contain at least one vertex");for(var o=r.distance(i[0]),a=0;a<i.length-1;a++){var s=CGAlgorithms.distancePointLine(r,i[a],i[a+1]);s<o&&(o=s)}return o}if(3===arguments.length){var l=e,c=t,u=n;if(c.x===u.x&&c.y===u.y)return l.distance(c);var p=(u.x-c.x)*(u.x-c.x)+(u.y-c.y)*(u.y-c.y),d=((l.x-c.x)*(u.x-c.x)+(l.y-c.y)*(u.y-c.y))/p;if(d<=0)return l.distance(c);if(1<=d)return l.distance(u);var f=((c.y-l.y)*(u.x-c.x)-(c.x-l.x)*(u.y-c.y))/p;return Math.abs(f)*Math.sqrt(p)}},CGAlgorithms.isOnLine=function(e,t){for(var n=new RobustLineIntersector,r=1;r<t.length;r++){var i=t[r-1],o=t[r];if(n.computeIntersection(e,i,o),n.hasIntersection())return!0}return!1},staticAccessors$3.CLOCKWISE.get=function(){return-1},staticAccessors$3.RIGHT.get=function(){return CGAlgorithms.CLOCKWISE},staticAccessors$3.COUNTERCLOCKWISE.get=function(){return 1},staticAccessors$3.LEFT.get=function(){return CGAlgorithms.COUNTERCLOCKWISE},staticAccessors$3.COLLINEAR.get=function(){return 0},staticAccessors$3.STRAIGHT.get=function(){return CGAlgorithms.COLLINEAR},Object.defineProperties(CGAlgorithms,staticAccessors$3);var GeometryComponentFilter=function(){};GeometryComponentFilter.prototype.filter=function(){},GeometryComponentFilter.prototype.interfaces_=function(){return[]},GeometryComponentFilter.prototype.getClass=function(){return GeometryComponentFilter};var Geometry=function(e){var t=e;this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},staticAccessors$11={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Geometry.prototype.isGeometryCollection=function(){return this.getSortIndex()===Geometry.SORTINDEX_GEOMETRYCOLLECTION},Geometry.prototype.getFactory=function(){return this._factory},Geometry.prototype.getGeometryN=function(){return this},Geometry.prototype.getArea=function(){return 0},Geometry.prototype.isRectangle=function(){return!1},Geometry.prototype.equals=function(e){if(e instanceof Geometry)return null!==e&&this.equalsTopo(e);if(e instanceof Object){if(!(e instanceof Geometry))return!1;return this.equalsExact(e)}},Geometry.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)},Geometry.prototype.geometryChanged=function(){this.apply(Geometry.geometryChangedFilter)},Geometry.prototype.geometryChangedAction=function(){this._envelope=null},Geometry.prototype.equalsNorm=function(e){return null!==e&&this.norm().equalsExact(e.norm())},Geometry.prototype.getLength=function(){return 0},Geometry.prototype.getNumGeometries=function(){return 1},Geometry.prototype.compareTo=function(e,t){if(1===arguments.length){var n=e,r=n;return this.getSortIndex()!==r.getSortIndex()?this.getSortIndex()-r.getSortIndex():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(n)}if(2===arguments.length){var i=e,o=t;return this.getSortIndex()!==i.getSortIndex()?this.getSortIndex()-i.getSortIndex():this.isEmpty()&&i.isEmpty()?0:this.isEmpty()?-1:i.isEmpty()?1:this.compareToSameClass(i,o)}},Geometry.prototype.getUserData=function(){return this._userData},Geometry.prototype.getSRID=function(){return this._SRID},Geometry.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Geometry.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===Geometry.SORTINDEX_GEOMETRYCOLLECTION)throw new IllegalArgumentException("This method does not support GeometryCollection arguments")},Geometry.prototype.equal=function(e,t,n){return 0===n?e.equals(t):e.distance(t)<=n},Geometry.prototype.norm=function(){var e=this.copy();return e.normalize(),e},Geometry.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Geometry.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Envelope(this._envelope)},Geometry.prototype.setSRID=function(e){this._SRID=e},Geometry.prototype.setUserData=function(e){this._userData=e},Geometry.prototype.compare=function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},Geometry.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Geometry.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Geometry.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Geometry.SORTINDEX_MULTIPOINT||this.getSortIndex()===Geometry.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Geometry.SORTINDEX_MULTIPOLYGON},Geometry.prototype.interfaces_=function(){return[Clonable,Comparable,Serializable]},Geometry.prototype.getClass=function(){return Geometry},Geometry.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1},Geometry.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1},staticAccessors$11.serialVersionUID.get=function(){return 0x799ea46522854c00},staticAccessors$11.SORTINDEX_POINT.get=function(){return 0},staticAccessors$11.SORTINDEX_MULTIPOINT.get=function(){return 1},staticAccessors$11.SORTINDEX_LINESTRING.get=function(){return 2},staticAccessors$11.SORTINDEX_LINEARRING.get=function(){return 3},staticAccessors$11.SORTINDEX_MULTILINESTRING.get=function(){return 4},staticAccessors$11.SORTINDEX_POLYGON.get=function(){return 5},staticAccessors$11.SORTINDEX_MULTIPOLYGON.get=function(){return 6},staticAccessors$11.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},staticAccessors$11.geometryChangedFilter.get=function(){return geometryChangedFilter},Object.defineProperties(Geometry,staticAccessors$11);var geometryChangedFilter=function(){};geometryChangedFilter.interfaces_=function(){return[GeometryComponentFilter]},geometryChangedFilter.filter=function(e){e.geometryChangedAction()};var CoordinateFilter=function(){};CoordinateFilter.prototype.filter=function(){},CoordinateFilter.prototype.interfaces_=function(){return[]},CoordinateFilter.prototype.getClass=function(){return CoordinateFilter};var BoundaryNodeRule=function(){},staticAccessors$12={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};BoundaryNodeRule.prototype.isInBoundary=function(){},BoundaryNodeRule.prototype.interfaces_=function(){return[]},BoundaryNodeRule.prototype.getClass=function(){return BoundaryNodeRule},staticAccessors$12.Mod2BoundaryNodeRule.get=function(){return Mod2BoundaryNodeRule},staticAccessors$12.EndPointBoundaryNodeRule.get=function(){return EndPointBoundaryNodeRule},staticAccessors$12.MultiValentEndPointBoundaryNodeRule.get=function(){return MultiValentEndPointBoundaryNodeRule},staticAccessors$12.MonoValentEndPointBoundaryNodeRule.get=function(){return MonoValentEndPointBoundaryNodeRule},staticAccessors$12.MOD2_BOUNDARY_RULE.get=function(){return new Mod2BoundaryNodeRule},staticAccessors$12.ENDPOINT_BOUNDARY_RULE.get=function(){return new EndPointBoundaryNodeRule},staticAccessors$12.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new MultiValentEndPointBoundaryNodeRule},staticAccessors$12.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new MonoValentEndPointBoundaryNodeRule},staticAccessors$12.OGC_SFS_BOUNDARY_RULE.get=function(){return BoundaryNodeRule.MOD2_BOUNDARY_RULE},Object.defineProperties(BoundaryNodeRule,staticAccessors$12);var Mod2BoundaryNodeRule=function(){};Mod2BoundaryNodeRule.prototype.isInBoundary=function(e){return e%2==1},Mod2BoundaryNodeRule.prototype.interfaces_=function(){return[BoundaryNodeRule]},Mod2BoundaryNodeRule.prototype.getClass=function(){return Mod2BoundaryNodeRule};var EndPointBoundaryNodeRule=function(){};EndPointBoundaryNodeRule.prototype.isInBoundary=function(e){return 0<e},EndPointBoundaryNodeRule.prototype.interfaces_=function(){return[BoundaryNodeRule]},EndPointBoundaryNodeRule.prototype.getClass=function(){return EndPointBoundaryNodeRule};var MultiValentEndPointBoundaryNodeRule=function(){};MultiValentEndPointBoundaryNodeRule.prototype.isInBoundary=function(e){return 1<e},MultiValentEndPointBoundaryNodeRule.prototype.interfaces_=function(){return[BoundaryNodeRule]},MultiValentEndPointBoundaryNodeRule.prototype.getClass=function(){return MultiValentEndPointBoundaryNodeRule};var MonoValentEndPointBoundaryNodeRule=function(){};MonoValentEndPointBoundaryNodeRule.prototype.isInBoundary=function(e){return 1===e},MonoValentEndPointBoundaryNodeRule.prototype.interfaces_=function(){return[BoundaryNodeRule]},MonoValentEndPointBoundaryNodeRule.prototype.getClass=function(){return MonoValentEndPointBoundaryNodeRule};var Collection=function(){};function IndexOutOfBoundsException(e){this.message=e||""}Collection.prototype.add=function(){},Collection.prototype.addAll=function(){},Collection.prototype.isEmpty=function(){},Collection.prototype.iterator=function(){},Collection.prototype.size=function(){},Collection.prototype.toArray=function(){},Collection.prototype.remove=function(){},IndexOutOfBoundsException.prototype=new Error,IndexOutOfBoundsException.prototype.name="IndexOutOfBoundsException";var Iterator$1=function(){};Iterator$1.prototype.hasNext=function(){},Iterator$1.prototype.next=function(){},Iterator$1.prototype.remove=function(){};var List=(Oyf=Collection,Oyf&&(Pyf.__proto__=Oyf),((Pyf.prototype=Object.create(Oyf&&Oyf.prototype)).constructor=Pyf).prototype.get=function(){},Pyf.prototype.set=function(){},Pyf.prototype.isEmpty=function(){},Pyf),Oyf;function Pyf(){Oyf.apply(this,arguments)}function NoSuchElementException(e){this.message=e||""}NoSuchElementException.prototype=new Error,NoSuchElementException.prototype.name="NoSuchElementException";var ArrayList=(Uyf=List,Uyf&&(Vyf.__proto__=Uyf),((Vyf.prototype=Object.create(Uyf&&Uyf.prototype)).constructor=Vyf).prototype.ensureCapacity=function(){},Vyf.prototype.interfaces_=function(){return[Uyf,Collection]},Vyf.prototype.add=function(e,t){return 1===arguments.length?this.array_.push(e):this.array_.splice(e,t),!0},Vyf.prototype.clear=function(){this.array_=[]},Vyf.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},Vyf.prototype.set=function(e,t){var n=this.array_[e];return this.array_[e]=t,n},Vyf.prototype.iterator=function(){return new Iterator_(this)},Vyf.prototype.get=function(e){if(e<0||e>=this.size())throw new IndexOutOfBoundsException;return this.array_[e]},Vyf.prototype.isEmpty=function(){return 0===this.array_.length},Vyf.prototype.size=function(){return this.array_.length},Vyf.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e},Vyf.prototype.remove=function(e){for(var t=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===e){this.array_.splice(n,1),t=!0;break}return t},Vyf),Uyf;function Vyf(){Uyf.call(this),this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}var Iterator_=(xzf=Iterator$1,xzf&&(yzf.__proto__=xzf),((yzf.prototype=Object.create(xzf&&xzf.prototype)).constructor=yzf).prototype.next=function(){if(this.position_===this.arrayList_.size())throw new NoSuchElementException;return this.arrayList_.get(this.position_++)},yzf.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},yzf.prototype.set=function(e){return this.arrayList_.set(this.position_-1,e)},yzf.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},yzf),xzf;function yzf(e){xzf.call(this),this.arrayList_=e,this.position_=0}var CoordinateList=function(y){function e(){var e,t,n;y.call(this),0===arguments.length||(1===arguments.length?(e=arguments[0],this.ensureCapacity(e.length),this.add(e,!0)):2===arguments.length&&(t=arguments[0],n=arguments[1],this.ensureCapacity(t.length),this.add(t,n)))}y&&(e.__proto__=y),(e.prototype=Object.create(y&&y.prototype)).constructor=e;var t={coordArrayType:{configurable:!0}};return t.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(e){return this.get(e)},e.prototype.addAll=function(e,t){if(2!==arguments.length)return y.prototype.addAll.apply(this,arguments);for(var n=t,r=!1,i=e.iterator();i.hasNext();)this.add(i.next(),n),r=!0;return r},e.prototype.clone=function(){for(var e=y.prototype.clone.call(this),t=0;t<this.size();t++)e.add(t,this.get(t).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(e,t,n,r){if(1===arguments.length)y.prototype.add.call(this,e);else if(2===arguments.length){if(e instanceof Array&&"boolean"==typeof t)return this.add(e,t,!0),!0;if(e instanceof Coordinate&&"boolean"==typeof t){var i=e;if(!t)if(1<=this.size())if(this.get(this.size()-1).equals2D(i))return null;y.prototype.add.call(this,i)}else if(e instanceof Object&&"boolean"==typeof t){return this.add(e,t),!0}}else if(3===arguments.length){if("boolean"==typeof n&&e instanceof Array&&"boolean"==typeof t){var o=e,a=t;if(n)for(var s=0;s<o.length;s++)this.add(o[s],a);else for(var l=o.length-1;0<=l;l--)this.add(o[l],a);return!0}if("boolean"==typeof n&&Number.isInteger(e)&&t instanceof Coordinate){var c=e,u=t;if(!n){var p=this.size();if(0<p){if(0<c)if(this.get(c-1).equals2D(u))return null;if(c<p)if(this.get(c).equals2D(u))return null}}y.prototype.add.call(this,c,u)}}else if(4===arguments.length){var d=e,f=t,h=r,g=1;h<n&&(g=-1);for(var m=n;m!==h;m+=g)this.add(d[m],f);return!0}},e.prototype.closeRing=function(){0<this.size()&&this.add(new Coordinate(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,t),e}(ArrayList),CoordinateArrays=function(){},staticAccessors$13={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};staticAccessors$13.ForwardComparator.get=function(){return ForwardComparator},staticAccessors$13.BidirectionalComparator.get=function(){return BidirectionalComparator},staticAccessors$13.coordArrayType.get=function(){return new Array(0).fill(null)},CoordinateArrays.prototype.interfaces_=function(){return[]},CoordinateArrays.prototype.getClass=function(){return CoordinateArrays},CoordinateArrays.isRing=function(e){return!(e.length<4)&&!!e[0].equals2D(e[e.length-1])},CoordinateArrays.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(CoordinateArrays.indexOf(r,t)<0)return r}return null},CoordinateArrays.scroll=function(e,t){var n=CoordinateArrays.indexOf(t,e);if(n<0)return null;var r=new Array(e.length).fill(null);System.arraycopy(e,n,r,0,e.length-n),System.arraycopy(e,0,r,e.length-n,n),System.arraycopy(r,0,e,0,e.length)},CoordinateArrays.equals=function(e,t,n){if(2===arguments.length){var r=e,i=t;if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var o=0;o<r.length;o++)if(!r[o].equals(i[o]))return!1;return!0}if(3===arguments.length){var a=e,s=t,l=n;if(a===s)return!0;if(null===a||null===s)return!1;if(a.length!==s.length)return!1;for(var c=0;c<a.length;c++)if(0!==l.compare(a[c],s[c]))return!1;return!0}},CoordinateArrays.intersection=function(e,t){for(var n=new CoordinateList,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()},CoordinateArrays.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1},CoordinateArrays.removeRepeatedPoints=function(e){return CoordinateArrays.hasRepeatedPoints(e)?new CoordinateList(e,!1).toCoordinateArray():e},CoordinateArrays.reverse=function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;r<=n;r++){var i=e[r];e[r]=e[t-r],e[t-r]=i}},CoordinateArrays.removeNull=function(e){for(var t=0,n=0;n<e.length;n++)null!==e[n]&&t++;var r=new Array(t).fill(null);if(0===t)return r;for(var i=0,o=0;o<e.length;o++)null!==e[o]&&(r[i++]=e[o]);return r},CoordinateArrays.copyDeep=function(e,t,n,r,i){if(1===arguments.length){for(var o=e,a=new Array(o.length).fill(null),s=0;s<o.length;s++)a[s]=new Coordinate(o[s]);return a}if(5===arguments.length)for(var l=e,c=t,u=n,p=r,d=i,f=0;f<d;f++)u[p+f]=new Coordinate(l[c+f])},CoordinateArrays.isEqualReversed=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[e.length-n-1];if(0!==r.compareTo(i))return!1}return!0},CoordinateArrays.envelope=function(e){for(var t=new Envelope,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t},CoordinateArrays.toCoordinateArray=function(e){return e.toArray(CoordinateArrays.coordArrayType)},CoordinateArrays.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]},CoordinateArrays.indexOf=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1},CoordinateArrays.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(0!==r)return r}return 1},CoordinateArrays.compare=function(e,t){for(var n=0;n<e.length&&n<t.length;){var r=e[n].compareTo(t[n]);if(0!==r)return r;n++}return n<t.length?-1:n<e.length?1:0},CoordinateArrays.minCoordinate=function(e){for(var t=null,n=0;n<e.length;n++)(null===t||0<t.compareTo(e[n]))&&(t=e[n]);return t},CoordinateArrays.extract=function(e,t,n){t=MathUtil.clamp(t,0,e.length);var r=(n=MathUtil.clamp(n,-1,e.length))<0?0:n-t+1;t>=e.length&&(r=0),n<t&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=t;a<=n;a++)i[o++]=e[a];return i},Object.defineProperties(CoordinateArrays,staticAccessors$13);var ForwardComparator=function(){};ForwardComparator.prototype.compare=function(e,t){return CoordinateArrays.compare(e,t)},ForwardComparator.prototype.interfaces_=function(){return[Comparator]},ForwardComparator.prototype.getClass=function(){return ForwardComparator};var BidirectionalComparator=function(){};BidirectionalComparator.prototype.compare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=CoordinateArrays.compare(n,r);return CoordinateArrays.isEqualReversed(n,r)?0:i},BidirectionalComparator.prototype.OLDcompare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=CoordinateArrays.increasingDirection(n),o=CoordinateArrays.increasingDirection(r),a=0<i?0:n.length-1,s=0<o?0:n.length-1,l=0;l<n.length;l++){var c=n[a].compareTo(r[s]);if(0!==c)return c;a+=i,s+=o}return 0},BidirectionalComparator.prototype.interfaces_=function(){return[Comparator]},BidirectionalComparator.prototype.getClass=function(){return BidirectionalComparator};var Map$1$1=function(){};Map$1$1.prototype.get=function(){},Map$1$1.prototype.put=function(){},Map$1$1.prototype.size=function(){},Map$1$1.prototype.values=function(){},Map$1$1.prototype.entrySet=function(){};var SortedMap=(XCf=Map$1$1,XCf&&(YCf.__proto__=XCf),(YCf.prototype=Object.create(XCf&&XCf.prototype)).constructor=YCf),XCf;function YCf(){XCf.apply(this,arguments)}function OperationNotSupported(e){this.message=e||""}function Set$2(){}OperationNotSupported.prototype=new Error,OperationNotSupported.prototype.name="OperationNotSupported",Set$2.prototype=new Collection,Set$2.prototype.contains=function(){};var HashSet=($Cf=Set$2,$Cf&&(_Cf.__proto__=$Cf),((_Cf.prototype=Object.create($Cf&&$Cf.prototype)).constructor=_Cf).prototype.contains=function(e){for(var t=0,n=this.array_.length;t<n;t++)if(this.array_[t]===e)return!0;return!1},_Cf.prototype.add=function(e){return!this.contains(e)&&(this.array_.push(e),!0)},_Cf.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},_Cf.prototype.remove=function(){throw new Error},_Cf.prototype.size=function(){return this.array_.length},_Cf.prototype.isEmpty=function(){return 0===this.array_.length},_Cf.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e},_Cf.prototype.iterator=function(){return new Iterator_$1(this)},_Cf),$Cf;function _Cf(){$Cf.call(this),this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}var Iterator_$1=(wDf=Iterator$1,wDf&&(xDf.__proto__=wDf),((xDf.prototype=Object.create(wDf&&wDf.prototype)).constructor=xDf).prototype.next=function(){if(this.position_===this.hashSet_.size())throw new NoSuchElementException;return this.hashSet_.array_[this.position_++]},xDf.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},xDf.prototype.remove=function(){throw new OperationNotSupported},xDf),wDf;function xDf(e){wDf.call(this),this.hashSet_=e,this.position_=0}var BLACK=0,RED=1;function colorOf(e){return null===e?BLACK:e.color}function parentOf(e){return null===e?null:e.parent}function setColor(e,t){null!==e&&(e.color=t)}function leftOf(e){return null===e?null:e.left}function rightOf(e){return null===e?null:e.right}function TreeMap(){this.root_=null,this.size_=0}TreeMap.prototype=new SortedMap,TreeMap.prototype.get=function(e){for(var t=this.root_;null!==t;){var n=e.compareTo(t.key);if(n<0)t=t.left;else{if(!(0<n))return t.value;t=t.right}}return null},TreeMap.prototype.put=function(e,t){if(null===this.root_)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:BLACK,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=e.compareTo(i.key))<0)i=i.left;else{if(!(0<r)){var o=i.value;return i.value=t,o}i=i.right}}while(null!==i);var a={key:e,left:null,right:null,value:t,parent:n,color:BLACK,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},TreeMap.prototype.fixAfterInsertion=function(e){var t,n;for(e.color=RED;null!=e&&e!==this.root_&&e.parent.color===RED;){parentOf(e)===leftOf(parentOf(parentOf(e)))?colorOf(t=rightOf(parentOf(parentOf(e))))===RED?(setColor(parentOf(e),BLACK),setColor(t,BLACK),setColor(parentOf(parentOf(e)),RED),e=parentOf(parentOf(e))):(e===rightOf(parentOf(e))&&(e=parentOf(e),this.rotateLeft(e)),setColor(parentOf(e),BLACK),setColor(parentOf(parentOf(e)),RED),this.rotateRight(parentOf(parentOf(e)))):colorOf(n=leftOf(parentOf(parentOf(e))))===RED?(setColor(parentOf(e),BLACK),setColor(n,BLACK),setColor(parentOf(parentOf(e)),RED),e=parentOf(parentOf(e))):(e===leftOf(parentOf(e))&&(e=parentOf(e),this.rotateRight(e)),setColor(parentOf(e),BLACK),setColor(parentOf(parentOf(e)),RED),this.rotateLeft(parentOf(parentOf(e))))}this.root_.color=BLACK},TreeMap.prototype.values=function(){var e=new ArrayList,t=this.getFirstEntry();if(null!==t)for(e.add(t.value);null!==(t=TreeMap.successor(t));)e.add(t.value);return e},TreeMap.prototype.entrySet=function(){var e=new HashSet,t=this.getFirstEntry();if(null!==t)for(e.add(t);null!==(t=TreeMap.successor(t));)e.add(t);return e},TreeMap.prototype.rotateLeft=function(e){var t;null!=e&&(t=e.right,e.right=t.left,null!=t.left&&(t.left.parent=e),t.parent=e.parent,null===e.parent?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,(t.left=e).parent=t)},TreeMap.prototype.rotateRight=function(e){var t;null!=e&&(t=e.left,e.left=t.right,null!=t.right&&(t.right.parent=e),t.parent=e.parent,null===e.parent?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,(t.right=e).parent=t)},TreeMap.prototype.getFirstEntry=function(){var e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e},TreeMap.successor=function(e){if(null===e)return null;if(null!==e.right){for(var t=e.right;null!==t.left;)t=t.left;return t}for(var n=e.parent,r=e;null!==n&&r===n.right;)n=(r=n).parent;return n},TreeMap.prototype.size=function(){return this.size_};var Lineal=function(){};function SortedSet(){}function TreeSet(){this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}Lineal.prototype.interfaces_=function(){return[]},Lineal.prototype.getClass=function(){return Lineal},SortedSet.prototype=new Set$2,TreeSet.prototype=new SortedSet,TreeSet.prototype.contains=function(e){for(var t=0,n=this.array_.length;t<n;t++){if(0===this.array_[t].compareTo(e))return!0}return!1},TreeSet.prototype.add=function(e){if(this.contains(e))return!1;for(var t=0,n=this.array_.length;t<n;t++){if(1===this.array_[t].compareTo(e))return this.array_.splice(t,0,e),!0}return this.array_.push(e),!0},TreeSet.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},TreeSet.prototype.remove=function(e){throw new OperationNotSupported},TreeSet.prototype.size=function(){return this.array_.length},TreeSet.prototype.isEmpty=function(){return 0===this.array_.length},TreeSet.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e},TreeSet.prototype.iterator=function(){return new Iterator_$2(this)};var Iterator_$2=function(e){this.treeSet_=e,this.position_=0};Iterator_$2.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new NoSuchElementException;return this.treeSet_.array_[this.position_++]},Iterator_$2.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Iterator_$2.prototype.remove=function(){throw new OperationNotSupported};var Arrays=function(){};Arrays.sort=function(e,t,n,r){var i,o,a,s,l=e;if(1===arguments.length)s=function(e,t){return e.compareTo(t)},l.sort(s);else if(2===arguments.length)a=t,s=function(e,t){return a.compare(e,t)},l.sort(s);else if(3===arguments.length){(o=l.slice(t,n)).sort();var c=l.slice(0,t).concat(o,l.slice(n,l.length));for(l.splice(0,l.length),i=0;i<c.length;i++)l.push(c[i])}else if(4===arguments.length)for(o=l.slice(t,n),a=r,s=function(e,t){return a.compare(e,t)},o.sort(s),c=l.slice(0,t).concat(o,l.slice(n,l.length)),l.splice(0,l.length),i=0;i<c.length;i++)l.push(c[i])},Arrays.asList=function(e){for(var t=new ArrayList,n=0,r=e.length;n<r;n++)t.add(e[n]);return t};var Dimension=function(){},staticAccessors$14={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};staticAccessors$14.P.get=function(){return 0},staticAccessors$14.L.get=function(){return 1},staticAccessors$14.A.get=function(){return 2},staticAccessors$14.FALSE.get=function(){return-1},staticAccessors$14.TRUE.get=function(){return-2},staticAccessors$14.DONTCARE.get=function(){return-3},staticAccessors$14.SYM_FALSE.get=function(){return"F"},staticAccessors$14.SYM_TRUE.get=function(){return"T"},staticAccessors$14.SYM_DONTCARE.get=function(){return"*"},staticAccessors$14.SYM_P.get=function(){return"0"},staticAccessors$14.SYM_L.get=function(){return"1"},staticAccessors$14.SYM_A.get=function(){return"2"},Dimension.prototype.interfaces_=function(){return[]},Dimension.prototype.getClass=function(){return Dimension},Dimension.toDimensionSymbol=function(e){switch(e){case Dimension.FALSE:return Dimension.SYM_FALSE;case Dimension.TRUE:return Dimension.SYM_TRUE;case Dimension.DONTCARE:return Dimension.SYM_DONTCARE;case Dimension.P:return Dimension.SYM_P;case Dimension.L:return Dimension.SYM_L;case Dimension.A:return Dimension.SYM_A}throw new IllegalArgumentException("Unknown dimension value: "+e)},Dimension.toDimensionValue=function(e){switch(Character.toUpperCase(e)){case Dimension.SYM_FALSE:return Dimension.FALSE;case Dimension.SYM_TRUE:return Dimension.TRUE;case Dimension.SYM_DONTCARE:return Dimension.DONTCARE;case Dimension.SYM_P:return Dimension.P;case Dimension.SYM_L:return Dimension.L;case Dimension.SYM_A:return Dimension.A}throw new IllegalArgumentException("Unknown dimension symbol: "+e)},Object.defineProperties(Dimension,staticAccessors$14);var GeometryFilter=function(){};GeometryFilter.prototype.filter=function(){},GeometryFilter.prototype.interfaces_=function(){return[]},GeometryFilter.prototype.getClass=function(){return GeometryFilter};var CoordinateSequenceFilter=function(){};CoordinateSequenceFilter.prototype.filter=function(){},CoordinateSequenceFilter.prototype.isDone=function(){},CoordinateSequenceFilter.prototype.isGeometryChanged=function(){},CoordinateSequenceFilter.prototype.interfaces_=function(){return[]},CoordinateSequenceFilter.prototype.getClass=function(){return CoordinateSequenceFilter};var GeometryCollection=function(a){function n(e,t){if(a.call(this,t),this._geometries=e||[],a.hasNullElements(this._geometries))throw new IllegalArgumentException("geometries must not contain null elements")}a&&(n.__proto__=a);var e={serialVersionUID:{configurable:!0}};return((n.prototype=Object.create(a&&a.prototype)).constructor=n).prototype.computeEnvelopeInternal=function(){for(var e=new Envelope,t=0;t<this._geometries.length;t++)e.expandToInclude(this._geometries[t].getEnvelopeInternal());return e},n.prototype.getGeometryN=function(e){return this._geometries[e]},n.prototype.getSortIndex=function(){return a.SORTINDEX_GEOMETRYCOLLECTION},n.prototype.getCoordinates=function(){for(var e=new Array(this.getNumPoints()).fill(null),t=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)e[++t]=r[i];return e},n.prototype.getArea=function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getArea();return e},n.prototype.equalsExact=function(e,t){if(2!==arguments.length)return a.prototype.equalsExact.apply(this,arguments);var n=e,r=t;if(!this.isEquivalentClass(n))return!1;var i=n;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!this._geometries[o].equalsExact(i._geometries[o],r))return!1;return!0},n.prototype.normalize=function(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();Arrays.sort(this._geometries)},n.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},n.prototype.getBoundaryDimension=function(){for(var e=Dimension.FALSE,t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getBoundaryDimension());return e},n.prototype.getDimension=function(){for(var e=Dimension.FALSE,t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getDimension());return e},n.prototype.getLength=function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getLength();return e},n.prototype.getNumPoints=function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getNumPoints();return e},n.prototype.getNumGeometries=function(){return this._geometries.length},n.prototype.reverse=function(){for(var e=this._geometries.length,t=new Array(e).fill(null),n=0;n<this._geometries.length;n++)t[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(t)},n.prototype.compareToSameClass=function(e,t){if(1===arguments.length){var n=e,r=new TreeSet(Arrays.asList(this._geometries)),i=new TreeSet(Arrays.asList(n._geometries));return this.compare(r,i)}if(2===arguments.length){for(var o=t,a=e,s=this.getNumGeometries(),l=a.getNumGeometries(),c=0;c<s&&c<l;){var u=this.getGeometryN(c),p=a.getGeometryN(c),d=u.compareToSameClass(p,o);if(0!==d)return d;c++}return c<s?1:c<l?-1:0}},n.prototype.apply=function(e){if(hasInterface(e,CoordinateFilter))for(var t=e,n=0;n<this._geometries.length;n++)this._geometries[n].apply(t);else if(hasInterface(e,CoordinateSequenceFilter)){var r=e;if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(e,GeometryFilter)){var o=e;o.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(o)}else if(hasInterface(e,GeometryComponentFilter)){var s=e;s.filter(this);for(var l=0;l<this._geometries.length;l++)this._geometries[l].apply(s)}},n.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Assert.shouldNeverReachHere(),null},n.prototype.clone=function(){var e=a.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var t=0;t<this._geometries.length;t++)e._geometries[t]=this._geometries[t].clone();return e},n.prototype.getGeometryType=function(){return"GeometryCollection"},n.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new n(e,this._factory)},n.prototype.isEmpty=function(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},e.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(n,e),n}(Geometry),MultiLineString=function(i){function n(){i.apply(this,arguments)}i&&(n.__proto__=i);var e={serialVersionUID:{configurable:!0}};return((n.prototype=Object.create(i&&i.prototype)).constructor=n).prototype.getSortIndex=function(){return Geometry.SORTINDEX_MULTILINESTRING},n.prototype.equalsExact=function(e,t){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var n=e,r=t;return!!this.isEquivalentClass(n)&&i.prototype.equalsExact.call(this,n,r)},n.prototype.getBoundaryDimension=function(){return this.isClosed()?Dimension.FALSE:0},n.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0},n.prototype.getDimension=function(){return 1},n.prototype.reverse=function(){for(var e=this._geometries.length,t=new Array(e).fill(null),n=0;n<this._geometries.length;n++)t[e-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(t)},n.prototype.getBoundary=function(){return new BoundaryOp(this).getBoundary()},n.prototype.getGeometryType=function(){return"MultiLineString"},n.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new n(e,this._factory)},n.prototype.interfaces_=function(){return[Lineal]},n.prototype.getClass=function(){return n},e.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(n,e),n}(GeometryCollection),BoundaryOp=function(e,t){var n,r,i,o;this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length?(n=e,r=BoundaryNodeRule.MOD2_BOUNDARY_RULE,this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r):2===arguments.length&&(i=e,o=t,this._geom=i,this._geomFact=i.getFactory(),this._bnRule=o)};BoundaryOp.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return 1===t.length?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)},BoundaryOp.prototype.getBoundary=function(){return this._geom instanceof LineString?this.boundaryLineString(this._geom):this._geom instanceof MultiLineString?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},BoundaryOp.prototype.boundaryLineString=function(e){return this._geom.isEmpty()?this.getEmptyMultiPoint():e.isClosed()?this._bnRule.isInBoundary(2)?e.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])},BoundaryOp.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},BoundaryOp.prototype.computeBoundaryCoordinates=function(e){var t=new ArrayList;this._endpointMap=new TreeMap;for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&t.add(o.getKey())}return CoordinateArrays.toCoordinateArray(t)},BoundaryOp.prototype.addEndpoint=function(e){var t=this._endpointMap.get(e);null===t&&(t=new Counter,this._endpointMap.put(e,t)),t.count++},BoundaryOp.prototype.interfaces_=function(){return[]},BoundaryOp.prototype.getClass=function(){return BoundaryOp},BoundaryOp.getBoundary=function(e,t){return 1===arguments.length?new BoundaryOp(e).getBoundary():2===arguments.length?new BoundaryOp(e,t).getBoundary():void 0};var Counter=function(){this.count=null};function PrintStream(){}function StringReader(){}Counter.prototype.interfaces_=function(){return[]},Counter.prototype.getClass=function(){return Counter};var DecimalFormat=function(){};function ByteArrayOutputStream(){}function IOException(){}function LineNumberReader(){}var StringUtil=function(){},staticAccessors$15={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};StringUtil.prototype.interfaces_=function(){return[]},StringUtil.prototype.getClass=function(){return StringUtil},StringUtil.chars=function(e,t){for(var n=new Array(t).fill(null),r=0;r<t;r++)n[r]=e;return String(n)},StringUtil.getStackTrace=function(e,t){if(1===arguments.length){var n=e,r=new ByteArrayOutputStream,i=new PrintStream(r);return n.printStackTrace(i),r.toString()}if(2===arguments.length){for(var o=t,a="",s=new LineNumberReader(new StringReader(StringUtil.getStackTrace(e))),l=0;l<o;l++)try{a+=s.readLine()+StringUtil.NEWLINE}catch(e){if(!(e instanceof IOException))throw e;Assert.shouldNeverReachHere()}return a}},StringUtil.split=function(e,t){for(var n=t.length,r=new ArrayList,i=""+e,o=i.indexOf(t);0<=o;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(t)}0<i.length&&r.add(i);for(var s=new Array(r.size()).fill(null),l=0;l<s.length;l++)s[l]=r.get(l);return s},StringUtil.toString=function(e){if(1===arguments.length)return StringUtil.SIMPLE_ORDINATE_FORMAT.format(e)},StringUtil.spaces=function(e){return StringUtil.chars(" ",e)},staticAccessors$15.NEWLINE.get=function(){return System.getProperty("line.separator")},staticAccessors$15.SIMPLE_ORDINATE_FORMAT.get=function(){return new DecimalFormat("0.#")},Object.defineProperties(StringUtil,staticAccessors$15);var CoordinateSequences=function(){};CoordinateSequences.prototype.interfaces_=function(){return[]},CoordinateSequences.prototype.getClass=function(){return CoordinateSequences},CoordinateSequences.copyCoord=function(e,t,n,r){for(var i=Math.min(e.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,e.getOrdinate(t,o))},CoordinateSequences.isRing=function(e){var t=e.size();return 0===t||!(t<=3)&&(e.getOrdinate(0,CoordinateSequence.X)===e.getOrdinate(t-1,CoordinateSequence.X)&&e.getOrdinate(0,CoordinateSequence.Y)===e.getOrdinate(t-1,CoordinateSequence.Y))},CoordinateSequences.isEqual=function(e,t){var n=e.size();if(n!==t.size())return!1;for(var r=Math.min(e.getDimension(),t.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=e.getOrdinate(i,o),s=t.getOrdinate(i,o);if(e.getOrdinate(i,o)!==t.getOrdinate(i,o)&&(!Double.isNaN(a)||!Double.isNaN(s)))return!1}return!0},CoordinateSequences.extend=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();if(CoordinateSequences.copy(t,0,r,0,i),0<i)for(var o=i;o<n;o++)CoordinateSequences.copy(t,i-1,r,o,1);return r},CoordinateSequences.reverse=function(e){for(var t=e.size()-1,n=Math.trunc(t/2),r=0;r<=n;r++)CoordinateSequences.swap(e,r,t-r)},CoordinateSequences.swap=function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var i=e.getOrdinate(t,r);e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,i)}},CoordinateSequences.copy=function(e,t,n,r,i){for(var o=0;o<i;o++)CoordinateSequences.copyCoord(e,t+o,n,r+o)},CoordinateSequences.toString=function(e){if(1===arguments.length){var t=e,n=t.size();if(0===n)return"()";var r=t.getDimension(),i=new StringBuffer;i.append("(");for(var o=0;o<n;o++){0<o&&i.append(" ");for(var a=0;a<r;a++)0<a&&i.append(","),i.append(StringUtil.toString(t.getOrdinate(o,a)))}return i.append(")"),i.toString()}},CoordinateSequences.ensureValidRing=function(e,t){var n=t.size();return 0===n?t:n<=3?CoordinateSequences.createClosedRing(e,t,4):t.getOrdinate(0,CoordinateSequence.X)===t.getOrdinate(n-1,CoordinateSequence.X)&&t.getOrdinate(0,CoordinateSequence.Y)===t.getOrdinate(n-1,CoordinateSequence.Y)?t:CoordinateSequences.createClosedRing(e,t,n+1)},CoordinateSequences.createClosedRing=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();CoordinateSequences.copy(t,0,r,0,i);for(var o=i;o<n;o++)CoordinateSequences.copy(t,0,r,o,1);return r};var LineString=function(a){function t(e,t){a.call(this,t),this._points=null,this.init(e)}a&&(t.__proto__=a);var e={serialVersionUID:{configurable:!0}};return((t.prototype=Object.create(a&&a.prototype)).constructor=t).prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Envelope:this._points.expandEnvelope(new Envelope)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return a.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(e,t){if(2!==arguments.length)return a.prototype.equalsExact.apply(this,arguments);var n=e,r=t;if(!this.isEquivalentClass(n))return!1;var i=n;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!this.equal(this._points.getCoordinate(o),i._points.getCoordinate(o),r))return!1;return!0},t.prototype.normalize=function(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var t=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(t)))return 0<this._points.getCoordinate(e).compareTo(this._points.getCoordinate(t))&&CoordinateSequences.reverse(this._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?Dimension.FALSE:0},t.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return CGAlgorithms.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var e=this._points.copy();return CoordinateSequences.reverse(e),this.getFactory().createLineString(e)},t.prototype.compareToSameClass=function(e,t){if(1===arguments.length){for(var n=e,r=0,i=0;r<this._points.size()&&i<n._points.size();){var o=this._points.getCoordinate(r).compareTo(n._points.getCoordinate(i));if(0!==o)return o;r++,i++}return r<this._points.size()?1:i<n._points.size()?-1:0}if(2===arguments.length)return t.compare(this._points,e._points)},t.prototype.apply=function(e){if(hasInterface(e,CoordinateFilter))for(var t=e,n=0;n<this._points.size();n++)t.filter(this._points.getCoordinate(n));else if(hasInterface(e,CoordinateSequenceFilter)){var r=e;if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(r.filter(this._points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else{(hasInterface(e,GeometryFilter)||hasInterface(e,GeometryComponentFilter))&&e.filter(this)}},t.prototype.getBoundary=function(){return new BoundaryOp(this).getBoundary()},t.prototype.isEquivalentClass=function(e){return e instanceof t},t.prototype.clone=function(){var e=a.prototype.clone.call(this);return e._points=this._points.clone(),e},t.prototype.getCoordinateN=function(e){return this._points.getCoordinate(e)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return 0===this._points.size()},t.prototype.init=function(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new IllegalArgumentException("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e},t.prototype.isCoordinate=function(e){for(var t=0;t<this._points.size();t++)if(this._points.getCoordinate(t).equals(e))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))},t.prototype.interfaces_=function(){return[Lineal]},t.prototype.getClass=function(){return t},e.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,e),t}(Geometry),Puntal=function(){};Puntal.prototype.interfaces_=function(){return[]},Puntal.prototype.getClass=function(){return Puntal};var Point$1=function(i){function e(e,t){i.call(this,t),this._coordinates=e||null,this.init(this._coordinates)}i&&(e.__proto__=i);var t={serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Envelope;var e=new Envelope;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e},e.prototype.getSortIndex=function(){return i.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(e,t){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var n=e,r=t;return!!this.isEquivalentClass(n)&&(!(!this.isEmpty()||!n.isEmpty())||this.isEmpty()===n.isEmpty()&&this.equal(n.getCoordinate(),this.getCoordinate(),r))},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Dimension.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(e,t){if(1===arguments.length){var n=e;return this.getCoordinate().compareTo(n.getCoordinate())}if(2===arguments.length)return t.compare(this._coordinates,e._coordinates)},e.prototype.apply=function(e){if(hasInterface(e,CoordinateFilter)){var t=e;if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(hasInterface(e,CoordinateSequenceFilter)){var n=e;if(this.isEmpty())return null;n.filter(this._coordinates,0),n.isGeometryChanged()&&this.geometryChanged()}else{(hasInterface(e,GeometryFilter)||hasInterface(e,GeometryComponentFilter))&&e.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=i.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),Assert.isTrue(e.size()<=1),this._coordinates=e},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Puntal]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,t),e}(Geometry),Polygonal=function(){};Polygonal.prototype.interfaces_=function(){return[]},Polygonal.prototype.getClass=function(){return Polygonal};var Polygon=function(l){function r(e,t,n){if(l.call(this,n),this._shell=null,(this._holes=null)===e&&(e=this.getFactory().createLinearRing()),null===t&&(t=[]),l.hasNullElements(t))throw new IllegalArgumentException("holes must not contain null elements");if(e.isEmpty()&&l.hasNonEmptyElements(t))throw new IllegalArgumentException("shell is empty but holes are not");this._shell=e,this._holes=t}l&&(r.__proto__=l);var e={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(l&&l.prototype)).constructor=r).prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},r.prototype.getSortIndex=function(){return l.SORTINDEX_POLYGON},r.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),t=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)e[++t]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)e[++t]=o[a];return e},r.prototype.getArea=function(){var e=0;e+=Math.abs(CGAlgorithms.signedArea(this._shell.getCoordinateSequence()));for(var t=0;t<this._holes.length;t++)e-=Math.abs(CGAlgorithms.signedArea(this._holes[t].getCoordinateSequence()));return e},r.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var e=this._shell.getCoordinateSequence(),t=this.getEnvelopeInternal(),n=0;n<5;n++){var r=e.getX(n);if(r!==t.getMinX()&&r!==t.getMaxX())return!1;var i=e.getY(n);if(i!==t.getMinY()&&i!==t.getMaxY())return!1}for(var o=e.getX(0),a=e.getY(0),s=1;s<=4;s++){var l=e.getX(s),c=e.getY(s);if(l!==o==(c!==a))return!1;o=l,a=c}return!0},r.prototype.equalsExact=function(e,t){if(2!==arguments.length)return l.prototype.equalsExact.apply(this,arguments);var n=e,r=t;if(!this.isEquivalentClass(n))return!1;var i=n,o=this._shell,a=i._shell;if(!o.equalsExact(a,r))return!1;if(this._holes.length!==i._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(i._holes[s],r))return!1;return!0},r.prototype.normalize=function(e,t){if(0===arguments.length){this.normalize(this._shell,!0);for(var n=0;n<this._holes.length;n++)this.normalize(this._holes[n],!1);Arrays.sort(this._holes)}else if(2===arguments.length){var r=e,i=t;if(r.isEmpty())return null;var o=new Array(r.getCoordinates().length-1).fill(null);System.arraycopy(r.getCoordinates(),0,o,0,o.length);var a=CoordinateArrays.minCoordinate(r.getCoordinates());CoordinateArrays.scroll(o,a),System.arraycopy(o,0,r.getCoordinates(),0,o.length),r.getCoordinates()[o.length]=o[0],CGAlgorithms.isCCW(r.getCoordinates())===i&&CoordinateArrays.reverse(r.getCoordinates())}},r.prototype.getCoordinate=function(){return this._shell.getCoordinate()},r.prototype.getNumInteriorRing=function(){return this._holes.length},r.prototype.getBoundaryDimension=function(){return 1},r.prototype.getDimension=function(){return 2},r.prototype.getLength=function(){var e=0;e+=this._shell.getLength();for(var t=0;t<this._holes.length;t++)e+=this._holes[t].getLength();return e},r.prototype.getNumPoints=function(){for(var e=this._shell.getNumPoints(),t=0;t<this._holes.length;t++)e+=this._holes[t].getNumPoints();return e},r.prototype.reverse=function(){var e=this.copy();e._shell=this._shell.copy().reverse(),e._holes=new Array(this._holes.length).fill(null);for(var t=0;t<this._holes.length;t++)e._holes[t]=this._holes[t].copy().reverse();return e},r.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},r.prototype.compareToSameClass=function(e,t){if(1===arguments.length){var n=this._shell,r=e._shell;return n.compareToSameClass(r)}if(2===arguments.length){var i=t,o=e,a=this._shell,s=o._shell,l=a.compareToSameClass(s,i);if(0!==l)return l;for(var c=this.getNumInteriorRing(),u=o.getNumInteriorRing(),p=0;p<c&&p<u;){var d=this.getInteriorRingN(p),f=o.getInteriorRingN(p),h=d.compareToSameClass(f,i);if(0!==h)return h;p++}return p<c?1:p<u?-1:0}},r.prototype.apply=function(e){if(hasInterface(e,CoordinateFilter)){this._shell.apply(e);for(var t=0;t<this._holes.length;t++)this._holes[t].apply(e)}else if(hasInterface(e,CoordinateSequenceFilter)){if(this._shell.apply(e),!e.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(e),!e.isDone());n++);e.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(e,GeometryFilter))e.filter(this);else if(hasInterface(e,GeometryComponentFilter)){e.filter(this),this._shell.apply(e);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(e)}},r.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var t=0;t<this._holes.length;t++)e[t+1]=this._holes[t];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)},r.prototype.clone=function(){var e=l.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var t=0;t<this._holes.length;t++)e._holes[t]=this._holes[t].clone();return e},r.prototype.getGeometryType=function(){return"Polygon"},r.prototype.copy=function(){for(var e=this._shell.copy(),t=new Array(this._holes.length).fill(null),n=0;n<t.length;n++)t[n]=this._holes[n].copy();return new r(e,t,this._factory)},r.prototype.getExteriorRing=function(){return this._shell},r.prototype.isEmpty=function(){return this._shell.isEmpty()},r.prototype.getInteriorRingN=function(e){return this._holes[e]},r.prototype.interfaces_=function(){return[Polygonal]},r.prototype.getClass=function(){return r},e.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(r,e),r}(Geometry),MultiPoint=function(i){function n(){i.apply(this,arguments)}i&&(n.__proto__=i);var e={serialVersionUID:{configurable:!0}};return((n.prototype=Object.create(i&&i.prototype)).constructor=n).prototype.getSortIndex=function(){return Geometry.SORTINDEX_MULTIPOINT},n.prototype.isValid=function(){return!0},n.prototype.equalsExact=function(e,t){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var n=e,r=t;return!!this.isEquivalentClass(n)&&i.prototype.equalsExact.call(this,n,r)},n.prototype.getCoordinate=function(e){return 1!==arguments.length?i.prototype.getCoordinate.apply(this,arguments):this._geometries[e].getCoordinate()},n.prototype.getBoundaryDimension=function(){return Dimension.FALSE},n.prototype.getDimension=function(){return 0},n.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},n.prototype.getGeometryType=function(){return"MultiPoint"},n.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new n(e,this._factory)},n.prototype.interfaces_=function(){return[Puntal]},n.prototype.getClass=function(){return n},e.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(n,e),n}(GeometryCollection),LinearRing=function(n){function e(e,t){e instanceof Coordinate&&t instanceof GeometryFactory&&(e=t.getCoordinateSequenceFactory().create(e)),n.call(this,e,t),this.validateConstruction()}n&&(e.__proto__=n);var t={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.getSortIndex=function(){return Geometry.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Dimension.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||n.prototype.isClosed.call(this)},e.prototype.reverse=function(){var e=this._points.copy();return CoordinateSequences.reverse(e),this.getFactory().createLinearRing(e)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!n.prototype.isClosed.call(this))throw new IllegalArgumentException("Points of LinearRing do not form a closed linestring");if(1<=this.getCoordinateSequence().size()&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new IllegalArgumentException("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},t.MINIMUM_VALID_SIZE.get=function(){return 4},t.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,t),e}(LineString),MultiPolygon=function(i){function n(){i.apply(this,arguments)}i&&(n.__proto__=i);var e={serialVersionUID:{configurable:!0}};return((n.prototype=Object.create(i&&i.prototype)).constructor=n).prototype.getSortIndex=function(){return Geometry.SORTINDEX_MULTIPOLYGON},n.prototype.equalsExact=function(e,t){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var n=e,r=t;return!!this.isEquivalentClass(n)&&i.prototype.equalsExact.call(this,n,r)},n.prototype.getBoundaryDimension=function(){return 1},n.prototype.getDimension=function(){return 2},n.prototype.reverse=function(){for(var e=this._geometries.length,t=new Array(e).fill(null),n=0;n<this._geometries.length;n++)t[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(t)},n.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new ArrayList,t=0;t<this._geometries.length;t++)for(var n=this._geometries[t].getBoundary(),r=0;r<n.getNumGeometries();r++)e.add(n.getGeometryN(r));var i=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(i))},n.prototype.getGeometryType=function(){return"MultiPolygon"},n.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new n(e,this._factory)},n.prototype.interfaces_=function(){return[Polygonal]},n.prototype.getClass=function(){return n},e.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(n,e),n}(GeometryCollection),GeometryEditor=function(e){this._factory=e||null,this._isUserDataCopied=!1},staticAccessors$16={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};GeometryEditor.prototype.setCopyUserData=function(e){this._isUserDataCopied=e},GeometryEditor.prototype.edit=function(e,t){if(null===e)return null;var n=this.editInternal(e,t);return this._isUserDataCopied&&n.setUserData(e.getUserData()),n},GeometryEditor.prototype.editInternal=function(e,t){return null===this._factory&&(this._factory=e.getFactory()),e instanceof GeometryCollection?this.editGeometryCollection(e,t):e instanceof Polygon?this.editPolygon(e,t):e instanceof Point$1||e instanceof LineString?t.edit(e,this._factory):(Assert.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)},GeometryEditor.prototype.editGeometryCollection=function(e,t){for(var n=t.edit(e,this._factory),r=new ArrayList,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),t);null===o||o.isEmpty()||r.add(o)}return n.getClass()===MultiPoint?this._factory.createMultiPoint(r.toArray([])):n.getClass()===MultiLineString?this._factory.createMultiLineString(r.toArray([])):n.getClass()===MultiPolygon?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},GeometryEditor.prototype.editPolygon=function(e,t){var n=t.edit(e,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),t);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new ArrayList,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),t);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},GeometryEditor.prototype.interfaces_=function(){return[]},GeometryEditor.prototype.getClass=function(){return GeometryEditor},GeometryEditor.GeometryEditorOperation=function(){},staticAccessors$16.NoOpGeometryOperation.get=function(){return NoOpGeometryOperation},staticAccessors$16.CoordinateOperation.get=function(){return CoordinateOperation},staticAccessors$16.CoordinateSequenceOperation.get=function(){return CoordinateSequenceOperation},Object.defineProperties(GeometryEditor,staticAccessors$16);var NoOpGeometryOperation=function(){};NoOpGeometryOperation.prototype.edit=function(e){return e},NoOpGeometryOperation.prototype.interfaces_=function(){return[GeometryEditor.GeometryEditorOperation]},NoOpGeometryOperation.prototype.getClass=function(){return NoOpGeometryOperation};var CoordinateOperation=function(){};CoordinateOperation.prototype.edit=function(e,t){var n=this.editCoordinates(e.getCoordinates(),e);return null===n?e:e instanceof LinearRing?t.createLinearRing(n):e instanceof LineString?t.createLineString(n):e instanceof Point$1?0<n.length?t.createPoint(n[0]):t.createPoint():e},CoordinateOperation.prototype.interfaces_=function(){return[GeometryEditor.GeometryEditorOperation]},CoordinateOperation.prototype.getClass=function(){return CoordinateOperation};var CoordinateSequenceOperation=function(){};CoordinateSequenceOperation.prototype.edit=function(e,t){return e instanceof LinearRing?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof LineString?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof Point$1?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e},CoordinateSequenceOperation.prototype.interfaces_=function(){return[GeometryEditor.GeometryEditorOperation]},CoordinateSequenceOperation.prototype.getClass=function(){return CoordinateSequenceOperation};var CoordinateArraySequence=function(e,t){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(e instanceof Array)this._coordinates=e,this._dimension=3;else if(Number.isInteger(e)){var n=e;this._coordinates=new Array(n).fill(null);for(var r=0;r<n;r++)this._coordinates[r]=new Coordinate}else if(hasInterface(e,CoordinateSequence)){var i=e;if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)this._coordinates[o]=i.getCoordinateCopy(o)}}else if(2===arguments.length)if(e instanceof Array&&Number.isInteger(t)){var a=e,s=t;this._coordinates=a,this._dimension=s,null===a&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(e)&&Number.isInteger(t)){var l=e,c=t;this._coordinates=new Array(l).fill(null),this._dimension=c;for(var u=0;u<l;u++)this._coordinates[u]=new Coordinate}},staticAccessors$18={serialVersionUID:{configurable:!0}};CoordinateArraySequence.prototype.setOrdinate=function(e,t,n){switch(t){case CoordinateSequence.X:this._coordinates[e].x=n;break;case CoordinateSequence.Y:this._coordinates[e].y=n;break;case CoordinateSequence.Z:this._coordinates[e].z=n;break;default:throw new IllegalArgumentException("invalid ordinateIndex")}},CoordinateArraySequence.prototype.size=function(){return this._coordinates.length},CoordinateArraySequence.prototype.getOrdinate=function(e,t){switch(t){case CoordinateSequence.X:return this._coordinates[e].x;case CoordinateSequence.Y:return this._coordinates[e].y;case CoordinateSequence.Z:return this._coordinates[e].z}return Double.NaN},CoordinateArraySequence.prototype.getCoordinate=function(e,t){var n,r;if(1===arguments.length)return this._coordinates[e];2===arguments.length&&(n=e,(r=t).x=this._coordinates[n].x,r.y=this._coordinates[n].y,r.z=this._coordinates[n].z)},CoordinateArraySequence.prototype.getCoordinateCopy=function(e){return new Coordinate(this._coordinates[e])},CoordinateArraySequence.prototype.getDimension=function(){return this._dimension},CoordinateArraySequence.prototype.getX=function(e){return this._coordinates[e].x},CoordinateArraySequence.prototype.clone=function(){for(var e=new Array(this.size()).fill(null),t=0;t<this._coordinates.length;t++)e[t]=this._coordinates[t].clone();return new CoordinateArraySequence(e,this._dimension)},CoordinateArraySequence.prototype.expandEnvelope=function(e){for(var t=0;t<this._coordinates.length;t++)e.expandToInclude(this._coordinates[t]);return e},CoordinateArraySequence.prototype.copy=function(){for(var e=new Array(this.size()).fill(null),t=0;t<this._coordinates.length;t++)e[t]=this._coordinates[t].copy();return new CoordinateArraySequence(e,this._dimension)},CoordinateArraySequence.prototype.toString=function(){if(0<this._coordinates.length){var e=new StringBuffer(17*this._coordinates.length);e.append("("),e.append(this._coordinates[0]);for(var t=1;t<this._coordinates.length;t++)e.append(", "),e.append(this._coordinates[t]);return e.append(")"),e.toString()}return"()"},CoordinateArraySequence.prototype.getY=function(e){return this._coordinates[e].y},CoordinateArraySequence.prototype.toCoordinateArray=function(){return this._coordinates},CoordinateArraySequence.prototype.interfaces_=function(){return[CoordinateSequence,Serializable]},CoordinateArraySequence.prototype.getClass=function(){return CoordinateArraySequence},staticAccessors$18.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(CoordinateArraySequence,staticAccessors$18);var CoordinateArraySequenceFactory=function(){},staticAccessors$17={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};CoordinateArraySequenceFactory.prototype.readResolve=function(){return CoordinateArraySequenceFactory.instance()},CoordinateArraySequenceFactory.prototype.create=function(e,t){if(1===arguments.length){if(e instanceof Array)return new CoordinateArraySequence(e);if(hasInterface(e,CoordinateSequence))return new CoordinateArraySequence(e)}else if(2===arguments.length){var n=e,r=t;return 3<r&&(r=3),r<2?new CoordinateArraySequence(n):new CoordinateArraySequence(n,r)}},CoordinateArraySequenceFactory.prototype.interfaces_=function(){return[CoordinateSequenceFactory,Serializable]},CoordinateArraySequenceFactory.prototype.getClass=function(){return CoordinateArraySequenceFactory},CoordinateArraySequenceFactory.instance=function(){return CoordinateArraySequenceFactory.instanceObject},staticAccessors$17.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},staticAccessors$17.instanceObject.get=function(){return new CoordinateArraySequenceFactory},Object.defineProperties(CoordinateArraySequenceFactory,staticAccessors$17);var HashMap=(CRf=Map$1$1,CRf&&(DRf.__proto__=CRf),((DRf.prototype=Object.create(CRf&&CRf.prototype)).constructor=DRf).prototype.get=function(e){return this.map_.get(e)||null},DRf.prototype.put=function(e,t){return this.map_.set(e,t),t},DRf.prototype.values=function(){for(var e=new ArrayList,t=this.map_.values(),n=t.next();!n.done;)e.add(n.value),n=t.next();return e},DRf.prototype.entrySet=function(){var t=new HashSet;return this.map_.entries().forEach(function(e){return t.add(e)}),t},DRf.prototype.size=function(){return this.map_.size()},DRf),CRf;function DRf(){CRf.call(this),this.map_=new Map}var PrecisionModel=function e(){var t,n,r;this._modelType=null,this._scale=null,0===arguments.length?this._modelType=e.FLOATING:1===arguments.length&&(arguments[0]instanceof Type$2?(t=arguments[0],(this._modelType=t)===e.FIXED&&this.setScale(1)):"number"==typeof arguments[0]?(n=arguments[0],this._modelType=e.FIXED,this.setScale(n)):arguments[0]instanceof e&&(r=arguments[0],this._modelType=r._modelType,this._scale=r._scale))},staticAccessors$19={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};PrecisionModel.prototype.equals=function(e){if(!(e instanceof PrecisionModel))return!1;return this._modelType===e._modelType&&this._scale===e._scale},PrecisionModel.prototype.compareTo=function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new Integer(n).compareTo(new Integer(r))},PrecisionModel.prototype.getScale=function(){return this._scale},PrecisionModel.prototype.isFloating=function(){return this._modelType===PrecisionModel.FLOATING||this._modelType===PrecisionModel.FLOATING_SINGLE},PrecisionModel.prototype.getType=function(){return this._modelType},PrecisionModel.prototype.toString=function(){var e="UNKNOWN";return this._modelType===PrecisionModel.FLOATING?e="Floating":this._modelType===PrecisionModel.FLOATING_SINGLE?e="Floating-Single":this._modelType===PrecisionModel.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e},PrecisionModel.prototype.makePrecise=function(e){if("number"==typeof e){var t=e;return Double.isNaN(t)?t:this._modelType!==PrecisionModel.FLOATING_SINGLE&&this._modelType===PrecisionModel.FIXED?Math.round(t*this._scale)/this._scale:t}if(e instanceof Coordinate){var n=e;if(this._modelType===PrecisionModel.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}},PrecisionModel.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===PrecisionModel.FLOATING?e=16:this._modelType===PrecisionModel.FLOATING_SINGLE?e=6:this._modelType===PrecisionModel.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e},PrecisionModel.prototype.setScale=function(e){this._scale=Math.abs(e)},PrecisionModel.prototype.interfaces_=function(){return[Serializable,Comparable]},PrecisionModel.prototype.getClass=function(){return PrecisionModel},PrecisionModel.mostPrecise=function(e,t){return 0<=e.compareTo(t)?e:t},staticAccessors$19.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},staticAccessors$19.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(PrecisionModel,staticAccessors$19);var Type$2=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},staticAccessors$1$1={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Type$2.prototype.readResolve=function(){return Type$2.nameToTypeMap.get(this._name)},Type$2.prototype.toString=function(){return this._name},Type$2.prototype.interfaces_=function(){return[Serializable]},Type$2.prototype.getClass=function(){return Type$2},staticAccessors$1$1.serialVersionUID.get=function(){return-552860263173159e4},staticAccessors$1$1.nameToTypeMap.get=function(){return new HashMap},Object.defineProperties(Type$2,staticAccessors$1$1),PrecisionModel.Type=Type$2,PrecisionModel.FIXED=new Type$2("FIXED"),PrecisionModel.FLOATING=new Type$2("FLOATING"),PrecisionModel.FLOATING_SINGLE=new Type$2("FLOATING SINGLE");var GeometryFactory=function e(){this._precisionModel=new PrecisionModel,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?hasInterface(arguments[0],CoordinateSequenceFactory)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof PrecisionModel&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},staticAccessors$2={serialVersionUID:{configurable:!0}};GeometryFactory.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new Coordinate(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new Coordinate(e.getMinX(),e.getMinY()),new Coordinate(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new Coordinate(e.getMinX(),e.getMinY()),new Coordinate(e.getMinX(),e.getMaxY()),new Coordinate(e.getMaxX(),e.getMaxY()),new Coordinate(e.getMaxX(),e.getMinY()),new Coordinate(e.getMinX(),e.getMinY())]),null)},GeometryFactory.prototype.createLineString=function(e){return e?e instanceof Array?new LineString(this.getCoordinateSequenceFactory().create(e),this):hasInterface(e,CoordinateSequence)?new LineString(e,this):void 0:new LineString(this.getCoordinateSequenceFactory().create([]),this)},GeometryFactory.prototype.createMultiLineString=function(e){return 0===arguments.length?new MultiLineString(null,this):1===arguments.length?new MultiLineString(e,this):void 0},GeometryFactory.prototype.buildGeometry=function(e){for(var t=null,n=!1,r=!1,i=e.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===t&&(t=a),a!==t&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===t)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(GeometryFactory.toGeometryArray(e));var s=e.iterator().next();if(1<e.size()){if(s instanceof Polygon)return this.createMultiPolygon(GeometryFactory.toPolygonArray(e));if(s instanceof LineString)return this.createMultiLineString(GeometryFactory.toLineStringArray(e));if(s instanceof Point$1)return this.createMultiPoint(GeometryFactory.toPointArray(e));Assert.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},GeometryFactory.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)},GeometryFactory.prototype.createPoint=function(e){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(e instanceof Coordinate){var t=e;return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(hasInterface(e,CoordinateSequence))return new Point$1(e,this)}},GeometryFactory.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},GeometryFactory.prototype.createPolygon=function(e,t){if(0===arguments.length)return new Polygon(null,null,this);if(1===arguments.length){if(hasInterface(e,CoordinateSequence))return this.createPolygon(this.createLinearRing(e));if(e instanceof Array)return this.createPolygon(this.createLinearRing(e));if(e instanceof LinearRing)return this.createPolygon(e,null)}else if(2===arguments.length){return new Polygon(e,t,this)}},GeometryFactory.prototype.getSRID=function(){return this._SRID},GeometryFactory.prototype.createGeometryCollection=function(e){return 0===arguments.length?new GeometryCollection(null,this):1===arguments.length?new GeometryCollection(e,this):void 0},GeometryFactory.prototype.createGeometry=function(e){return new GeometryEditor(this).edit(e,{edit:function(){if(2===arguments.length){var e=arguments[0];return this._coordinateSequenceFactory.create(e)}}})},GeometryFactory.prototype.getPrecisionModel=function(){return this._precisionModel},GeometryFactory.prototype.createLinearRing=function(e){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(e instanceof Array){var t=e;return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(hasInterface(e,CoordinateSequence))return new LinearRing(e,this)}},GeometryFactory.prototype.createMultiPolygon=function(e){return 0===arguments.length?new MultiPolygon(null,this):1===arguments.length?new MultiPolygon(e,this):void 0},GeometryFactory.prototype.createMultiPoint=function(e){if(0===arguments.length)return new MultiPoint(null,this);if(1===arguments.length){if(e instanceof Array)return new MultiPoint(e,this);if(e instanceof Array){var t=e;return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(hasInterface(e,CoordinateSequence)){var n=e;if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());CoordinateSequences.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},GeometryFactory.prototype.interfaces_=function(){return[Serializable]},GeometryFactory.prototype.getClass=function(){return GeometryFactory},GeometryFactory.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},GeometryFactory.toGeometryArray=function(e){if(null===e)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)},GeometryFactory.getDefaultCoordinateSequenceFactory=function(){return CoordinateArraySequenceFactory.instance()},GeometryFactory.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},GeometryFactory.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},GeometryFactory.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},GeometryFactory.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},GeometryFactory.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},GeometryFactory.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},GeometryFactory.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)},staticAccessors$2.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(GeometryFactory,staticAccessors$2);var geometryTypes=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],GeoJSONParser=function(e){this.geometryFactory=e||new GeometryFactory};GeoJSONParser.prototype.read=function(e){var t="string"==typeof e?JSON.parse(e):e,n=t.type;if(!parse$2[n])throw new Error("Unknown GeoJSON type: "+t.type);return-1!==geometryTypes.indexOf(n)?parse$2[n].apply(this,[t.coordinates]):"GeometryCollection"===n?parse$2[n].apply(this,[t.geometries]):parse$2[n].apply(this,[t])},GeoJSONParser.prototype.write=function(e){var t=e.getGeometryType();if(!extract[t])throw new Error("Geometry is not supported");return extract[t].apply(this,[e])};var parse$2={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!parse$2[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=parse$2.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t={};if(e.features){t.features=[];for(var n=0;n<e.features.length;++n)t.features.push(this.read(e.features[n]))}return e.bbox&&(t.bbox=this.parse.bbox.apply(this,[e.bbox])),t},coordinates:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(new Coordinate(r[0],r[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new Coordinate(e[0],e[1]),new Coordinate(e[2],e[1]),new Coordinate(e[2],e[3]),new Coordinate(e[0],e[3]),new Coordinate(e[0],e[1])])},Point:function(e){var t=new Coordinate(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=[],n=0;n<e.length;++n)t.push(parse$2.Point.apply(this,[e[n]]));return this.geometryFactory.createMultiPoint(t)},LineString:function(e){var t=parse$2.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=[],n=0;n<e.length;++n)t.push(parse$2.LineString.apply(this,[e[n]]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(e){for(var t=parse$2.coordinates.apply(this,[e[0]]),n=this.geometryFactory.createLinearRing(t),r=[],i=1;i<e.length;++i){var o=e[i],a=parse$2.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(parse$2.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(this.read(r))}return this.geometryFactory.createGeometryCollection(t)}},extract={coordinate:function(e){return[e.x,e.y]},Point:function(e){return{type:"Point",coordinates:extract.coordinate.apply(this,[e.getCoordinate()])}},MultiPoint:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=extract.Point.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(e){for(var t=[],n=e.getCoordinates(),r=0;r<n.length;++r){var i=n[r];t.push(extract.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:t}},MultiLineString:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=extract.LineString.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(e){var t=[],n=extract.LineString.apply(this,[e._shell]);t.push(n.coordinates);for(var r=0;r<e._holes.length;++r){var i=e._holes[r],o=extract.LineString.apply(this,[i]);t.push(o.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=extract.Polygon.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=r.getGeometryType();t.push(extract[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:t}}},GeoJSONReader=function(e){this.geometryFactory=e||new GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new GeoJSONParser(this.geometryFactory)};GeoJSONReader.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===PrecisionModel.FIXED&&this.reducePrecision(t),t},GeoJSONReader.prototype.reducePrecision=function(e){var t,n;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(t=0,n=e.points.length;t<n;t++)this.precisionModel.makePrecise(e.points[t]);else if(e.geometries)for(t=0,n=e.geometries.length;t<n;t++)this.reducePrecision(e.geometries[t])};var GeoJSONWriter=function(){this.parser=new GeoJSONParser(this.geometryFactory)};GeoJSONWriter.prototype.write=function(e){return this.parser.write(e)};var Position=function(){},staticAccessors$20={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function EmptyStackException(e){this.message=e||""}function Stack(){this.array_=[]}Position.prototype.interfaces_=function(){return[]},Position.prototype.getClass=function(){return Position},Position.opposite=function(e){return e===Position.LEFT?Position.RIGHT:e===Position.RIGHT?Position.LEFT:e},staticAccessors$20.ON.get=function(){return 0},staticAccessors$20.LEFT.get=function(){return 1},staticAccessors$20.RIGHT.get=function(){return 2},Object.defineProperties(Position,staticAccessors$20),EmptyStackException.prototype=new Error,EmptyStackException.prototype.name="EmptyStackException",Stack.prototype=new List,Stack.prototype.add=function(e){return this.array_.push(e),!0},Stack.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]},Stack.prototype.push=function(e){return this.array_.push(e),e},Stack.prototype.pop=function(e){if(0===this.array_.length)throw new EmptyStackException;return this.array_.pop()},Stack.prototype.peek=function(){if(0===this.array_.length)throw new EmptyStackException;return this.array_[this.array_.length-1]},Stack.prototype.empty=function(){return 0===this.array_.length},Stack.prototype.isEmpty=function(){return this.empty()},Stack.prototype.search=function(e){return this.array_.indexOf(e)},Stack.prototype.size=function(){return this.array_.length},Stack.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e};var RightmostEdgeFinder=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};RightmostEdgeFinder.prototype.getCoordinate=function(){return this._minCoord},RightmostEdgeFinder.prototype.getRightmostSide=function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n},RightmostEdgeFinder.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();Assert.isTrue(0<this._minIndex&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],r=CGAlgorithms.computeOrientation(this._minCoord,n,t),i=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&r===CGAlgorithms.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&r===CGAlgorithms.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},RightmostEdgeFinder.prototype.getRightmostSideOfSegment=function(e,t){var n=e.getEdge().getCoordinates();if(t<0||t+1>=n.length)return-1;if(n[t].y===n[t+1].y)return-1;var r=Position.LEFT;return n[t].y<n[t+1].y&&(r=Position.RIGHT),r},RightmostEdgeFinder.prototype.getEdge=function(){return this._orientedDe},RightmostEdgeFinder.prototype.checkForRightmostCoordinate=function(e){for(var t=e.getEdge().getCoordinates(),n=0;n<t.length-1;n++)(null===this._minCoord||t[n].x>this._minCoord.x)&&(this._minDe=e,this._minIndex=n,this._minCoord=t[n])},RightmostEdgeFinder.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode().getEdges();this._minDe=e.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},RightmostEdgeFinder.prototype.findEdge=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.isForward()&&this.checkForRightmostCoordinate(n)}Assert.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Position.LEFT&&(this._orientedDe=this._minDe.getSym())},RightmostEdgeFinder.prototype.interfaces_=function(){return[]},RightmostEdgeFinder.prototype.getClass=function(){return RightmostEdgeFinder};var TopologyException=(TWf=RuntimeException,TWf&&(UWf.__proto__=TWf),UWf.prototype=Object.create(TWf&&TWf.prototype),(UWf.prototype.constructor=UWf).prototype.getCoordinate=function(){return this.pt},UWf.prototype.interfaces_=function(){return[]},UWf.prototype.getClass=function(){return UWf},UWf.msgWithCoord=function(e,t){return t?e:e+" [ "+t+" ]"},UWf),TWf;function UWf(e,t){TWf.call(this,UWf.msgWithCoord(e,t)),this.pt=t?new Coordinate(t):null,this.name="TopologyException"}var LinkedList=function(){this.array_=[]};LinkedList.prototype.addLast=function(e){this.array_.push(e)},LinkedList.prototype.removeFirst=function(){return this.array_.shift()},LinkedList.prototype.isEmpty=function(){return 0===this.array_.length};var BufferSubgraph=function(){this._finder=null,this._dirEdgeList=new ArrayList,this._nodes=new ArrayList,this._rightMostCoord=null,this._env=null,this._finder=new RightmostEdgeFinder};BufferSubgraph.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){e.next().setVisited(!1)}},BufferSubgraph.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},BufferSubgraph.prototype.computeNodeDepth=function(e){for(var t=null,n=e.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){t=r;break}}if(null===t)throw new TopologyException("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(var i=e.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},BufferSubgraph.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(Position.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)},BufferSubgraph.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},BufferSubgraph.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();1<=t.getDepth(Position.RIGHT)&&t.getDepth(Position.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}},BufferSubgraph.prototype.computeDepths=function(e){var t=new HashSet,n=new LinkedList,r=e.getNode();for(n.addLast(r),t.add(r),e.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();t.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a,s=o.next().getSym();s.isVisited()||(a=s.getNode(),t.contains(a)||(n.addLast(a),t.add(a)))}}},BufferSubgraph.prototype.compareTo=function(e){return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},BufferSubgraph.prototype.getEnvelope=function(){if(null===this._env){for(var e=new Envelope,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)e.expandToInclude(n[r]);this._env=e}return this._env},BufferSubgraph.prototype.addReachable=function(e){var t=new Stack;for(t.add(e);!t.empty();){var n=t.pop();this.add(n,t)}},BufferSubgraph.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(Position.LEFT,e.getDepth(Position.RIGHT)),t.setDepth(Position.RIGHT,e.getDepth(Position.LEFT))},BufferSubgraph.prototype.add=function(e,t){e.setVisited(!0),this._nodes.add(e);for(var n=e.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||t.push(i)}},BufferSubgraph.prototype.getNodes=function(){return this._nodes},BufferSubgraph.prototype.getDirectedEdges=function(){return this._dirEdgeList},BufferSubgraph.prototype.interfaces_=function(){return[Comparable]},BufferSubgraph.prototype.getClass=function(){return BufferSubgraph};var TopologyLocation=function e(){var t,n,r;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var i=arguments[0];this.init(i.length)}else if(Number.isInteger(arguments[0])){var o=arguments[0];this.init(1),this.location[Position.ON]=o}else if(arguments[0]instanceof e){var a=arguments[0];if(this.init(a.location.length),null!==a)for(var s=0;s<this.location.length;s++)this.location[s]=a.location[s]}}else 3===arguments.length&&(t=arguments[0],n=arguments[1],r=arguments[2],this.init(3),this.location[Position.ON]=t,this.location[Position.LEFT]=n,this.location[Position.RIGHT]=r)};TopologyLocation.prototype.setAllLocations=function(e){for(var t=0;t<this.location.length;t++)this.location[t]=e},TopologyLocation.prototype.isNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==Location.NONE)return!1;return!0},TopologyLocation.prototype.setAllLocationsIfNull=function(e){for(var t=0;t<this.location.length;t++)this.location[t]===Location.NONE&&(this.location[t]=e)},TopologyLocation.prototype.isLine=function(){return 1===this.location.length},TopologyLocation.prototype.merge=function(e){var t;e.location.length>this.location.length&&((t=new Array(3).fill(null))[Position.ON]=this.location[Position.ON],t[Position.LEFT]=Location.NONE,t[Position.RIGHT]=Location.NONE,this.location=t);for(var n=0;n<this.location.length;n++)this.location[n]===Location.NONE&&n<e.location.length&&(this.location[n]=e.location[n])},TopologyLocation.prototype.getLocations=function(){return this.location},TopologyLocation.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[Position.LEFT];this.location[Position.LEFT]=this.location[Position.RIGHT],this.location[Position.RIGHT]=e},TopologyLocation.prototype.toString=function(){var e=new StringBuffer;return 1<this.location.length&&e.append(Location.toLocationSymbol(this.location[Position.LEFT])),e.append(Location.toLocationSymbol(this.location[Position.ON])),1<this.location.length&&e.append(Location.toLocationSymbol(this.location[Position.RIGHT])),e.toString()},TopologyLocation.prototype.setLocations=function(e,t,n){this.location[Position.ON]=e,this.location[Position.LEFT]=t,this.location[Position.RIGHT]=n},TopologyLocation.prototype.get=function(e){return e<this.location.length?this.location[e]:Location.NONE},TopologyLocation.prototype.isArea=function(){return 1<this.location.length},TopologyLocation.prototype.isAnyNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===Location.NONE)return!0;return!1},TopologyLocation.prototype.setLocation=function(e,t){1===arguments.length?this.setLocation(Position.ON,e):2===arguments.length&&(this.location[e]=t)},TopologyLocation.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations(Location.NONE)},TopologyLocation.prototype.isEqualOnSide=function(e,t){return this.location[t]===e.location[t]},TopologyLocation.prototype.allPositionsEqual=function(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0},TopologyLocation.prototype.interfaces_=function(){return[]},TopologyLocation.prototype.getClass=function(){return TopologyLocation};var Label=function e(){var t,n,r,i,o,a,s,l,c,u,p;this.elt=new Array(2).fill(null),1===arguments.length?Number.isInteger(arguments[0])?(t=arguments[0],this.elt[0]=new TopologyLocation(t),this.elt[1]=new TopologyLocation(t)):arguments[0]instanceof e&&(n=arguments[0],this.elt[0]=new TopologyLocation(n.elt[0]),this.elt[1]=new TopologyLocation(n.elt[1])):2===arguments.length?(r=arguments[0],i=arguments[1],this.elt[0]=new TopologyLocation(Location.NONE),this.elt[1]=new TopologyLocation(Location.NONE),this.elt[r].setLocation(i)):3===arguments.length?(o=arguments[0],a=arguments[1],s=arguments[2],this.elt[0]=new TopologyLocation(o,a,s),this.elt[1]=new TopologyLocation(o,a,s)):4===arguments.length&&(l=arguments[0],c=arguments[1],u=arguments[2],p=arguments[3],this.elt[0]=new TopologyLocation(Location.NONE,Location.NONE,Location.NONE),this.elt[1]=new TopologyLocation(Location.NONE,Location.NONE,Location.NONE),this.elt[l].setLocations(c,u,p))};Label.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e},Label.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)},Label.prototype.isNull=function(e){return this.elt[e].isNull()},Label.prototype.setAllLocationsIfNull=function(e,t){var n;1===arguments.length?(n=e,this.setAllLocationsIfNull(0,n),this.setAllLocationsIfNull(1,n)):2===arguments.length&&this.elt[e].setAllLocationsIfNull(t)},Label.prototype.isLine=function(e){return this.elt[e].isLine()},Label.prototype.merge=function(e){for(var t=0;t<2;t++)null===this.elt[t]&&null!==e.elt[t]?this.elt[t]=new TopologyLocation(e.elt[t]):this.elt[t].merge(e.elt[t])},Label.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Label.prototype.getLocation=function(e,t){return 1===arguments.length?this.elt[e].get(Position.ON):2===arguments.length?this.elt[e].get(t):void 0},Label.prototype.toString=function(){var e=new StringBuffer;return null!==this.elt[0]&&(e.append("A:"),e.append(this.elt[0].toString())),null!==this.elt[1]&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()},Label.prototype.isArea=function(e){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[e].isArea():void 0},Label.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()},Label.prototype.setLocation=function(e,t,n){2===arguments.length?this.elt[e].setLocation(Position.ON,t):3===arguments.length&&this.elt[e].setLocation(t,n)},Label.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)},Label.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)},Label.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new TopologyLocation(this.elt[e].location[0]))},Label.prototype.interfaces_=function(){return[]},Label.prototype.getClass=function(){return Label},Label.toLineLabel=function(e){for(var t=new Label(Location.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t};var EdgeRing=function(e,t){this._startDe=null,this._maxNodeDegree=-1,this._edges=new ArrayList,this._pts=new ArrayList,this._label=new Label(Location.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new ArrayList,this._geometryFactory=null;var n=e;this._geometryFactory=t,this.computePoints(n),this.computeRing()};EdgeRing.prototype.computeRing=function(){if(null!==this._ring)return null;for(var e=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)e[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(e),this._isHole=CGAlgorithms.isCCW(this._ring.getCoordinates())},EdgeRing.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},EdgeRing.prototype.computePoints=function(e){var t=this._startDe=e,n=!0;do{if(null===t)throw new TopologyException("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new TopologyException("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var r=t.getLabel();Assert.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(t.getEdge(),t.isForward(),n),n=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)},EdgeRing.prototype.getLinearRing=function(){return this._ring},EdgeRing.prototype.getCoordinate=function(e){return this._pts.get(e)},EdgeRing.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var e=this._startDe;do{var t=e.getNode().getEdges().getOutgoingDegree(this);t>this._maxNodeDegree&&(this._maxNodeDegree=t),e=this.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},EdgeRing.prototype.addPoints=function(e,t,n){var r=e.getCoordinates();if(t){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;0<=s;s--)this._pts.add(r[s])}},EdgeRing.prototype.isHole=function(){return this._isHole},EdgeRing.prototype.setInResult=function(){for(var e=this._startDe;e.getEdge().setInResult(!0),(e=e.getNext())!==this._startDe;);},EdgeRing.prototype.containsPoint=function(e){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(e))return!1;if(!CGAlgorithms.isPointInRing(e,t.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();){if(n.next().containsPoint(e))return!1}return!0},EdgeRing.prototype.addHole=function(e){this._holes.add(e)},EdgeRing.prototype.isShell=function(){return null===this._shell},EdgeRing.prototype.getLabel=function(){return this._label},EdgeRing.prototype.getEdges=function(){return this._edges},EdgeRing.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},EdgeRing.prototype.getShell=function(){return this._shell},EdgeRing.prototype.mergeLabel=function(e,t){if(1===arguments.length){var n=e;this.mergeLabel(n,0),this.mergeLabel(n,1)}else if(2===arguments.length){var r=t,i=e.getLocation(r,Position.RIGHT);if(i===Location.NONE)return null;if(this._label.getLocation(r)===Location.NONE)return this._label.setLocation(r,i),null}},EdgeRing.prototype.setShell=function(e){null!==(this._shell=e)&&e.addHole(this)},EdgeRing.prototype.toPolygon=function(e){for(var t=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)t[n]=this._holes.get(n).getLinearRing();return e.createPolygon(this.getLinearRing(),t)},EdgeRing.prototype.interfaces_=function(){return[]},EdgeRing.prototype.getClass=function(){return EdgeRing};var MinimalEdgeRing=(E_f=EdgeRing,E_f&&(F_f.__proto__=E_f),((F_f.prototype=Object.create(E_f&&E_f.prototype)).constructor=F_f).prototype.setEdgeRing=function(e,t){e.setMinEdgeRing(t)},F_f.prototype.getNext=function(e){return e.getNextMin()},F_f.prototype.interfaces_=function(){return[]},F_f.prototype.getClass=function(){return F_f},F_f),E_f;function F_f(){var e=arguments[0],t=arguments[1];E_f.call(this,e,t)}var MaximalEdgeRing=(P_f=EdgeRing,P_f&&(Q_f.__proto__=P_f),((Q_f.prototype=Object.create(P_f&&P_f.prototype)).constructor=Q_f).prototype.buildMinimalRings=function(){for(var e,t=new ArrayList,n=this._startDe;null===n.getMinEdgeRing()&&(e=new MinimalEdgeRing(n,this._geometryFactory),t.add(e)),(n=n.getNext())!==this._startDe;);return t},Q_f.prototype.setEdgeRing=function(e,t){e.setEdgeRing(t)},Q_f.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){for(var e=this._startDe;e.getNode().getEdges().linkMinimalDirectedEdges(this),(e=e.getNext())!==this._startDe;);},Q_f.prototype.getNext=function(e){return e.getNext()},Q_f.prototype.interfaces_=function(){return[]},Q_f.prototype.getClass=function(){return Q_f},Q_f),P_f;function Q_f(){var e=arguments[0],t=arguments[1];P_f.call(this,e,t)}var GraphComponent=function(e){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length||1===arguments.length&&(this._label=e)};GraphComponent.prototype.setVisited=function(e){this._isVisited=e},GraphComponent.prototype.setInResult=function(e){this._isInResult=e},GraphComponent.prototype.isCovered=function(){return this._isCovered},GraphComponent.prototype.isCoveredSet=function(){return this._isCoveredSet},GraphComponent.prototype.setLabel=function(e){this._label=e},GraphComponent.prototype.getLabel=function(){return this._label},GraphComponent.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0},GraphComponent.prototype.updateIM=function(e){Assert.isTrue(2<=this._label.getGeometryCount(),"found partial label"),this.computeIM(e)},GraphComponent.prototype.isInResult=function(){return this._isInResult},GraphComponent.prototype.isVisited=function(){return this._isVisited},GraphComponent.prototype.interfaces_=function(){return[]},GraphComponent.prototype.getClass=function(){return GraphComponent};var Node$1=(A0f=GraphComponent,A0f&&(B0f.__proto__=A0f),((B0f.prototype=Object.create(A0f&&A0f.prototype)).constructor=B0f).prototype.isIncidentEdgeInResult=function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();)if(e.next().getEdge().isInResult())return!0;return!1},B0f.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},B0f.prototype.getCoordinate=function(){return this._coord},B0f.prototype.print=function(e){e.println("node "+this._coord+" lbl: "+this._label)},B0f.prototype.computeIM=function(){},B0f.prototype.computeMergedLocation=function(e,t){var n,r=Location.NONE,r=this._label.getLocation(t);return e.isNull(t)||(n=e.getLocation(t),r!==Location.BOUNDARY&&(r=n)),r},B0f.prototype.setLabel=function(e,t){if(2!==arguments.length)return A0f.prototype.setLabel.apply(this,arguments);var n=e,r=t;null===this._label?this._label=new Label(n,r):this._label.setLocation(n,r)},B0f.prototype.getEdges=function(){return this._edges},B0f.prototype.mergeLabel=function(e){if(e instanceof B0f)this.mergeLabel(e._label);else if(e instanceof Label)for(var t=e,n=0;n<2;n++){var r=this.computeMergedLocation(t,n);this._label.getLocation(n)===Location.NONE&&this._label.setLocation(n,r)}},B0f.prototype.add=function(e){this._edges.insert(e),e.setNode(this)},B0f.prototype.setLabelBoundary=function(e){if(null===this._label)return null;var t=Location.NONE;null!==this._label&&(t=this._label.getLocation(e));var n=null;switch(t){case Location.BOUNDARY:n=Location.INTERIOR;break;case Location.INTERIOR:default:n=Location.BOUNDARY}this._label.setLocation(e,n)},B0f.prototype.interfaces_=function(){return[]},B0f.prototype.getClass=function(){return B0f},B0f),A0f;function B0f(){A0f.call(this),this._coord=null,this._edges=null;var e=arguments[0],t=arguments[1];this._coord=e,this._edges=t,this._label=new Label(0,Location.NONE)}var NodeMap=function(e){this.nodeMap=new TreeMap,this.nodeFact=null,this.nodeFact=e};NodeMap.prototype.find=function(e){return this.nodeMap.get(e)},NodeMap.prototype.addNode=function(e){if(e instanceof Coordinate){var t=e,n=this.nodeMap.get(t);return null===n&&(n=this.nodeFact.createNode(t),this.nodeMap.put(t,n)),n}if(e instanceof Node$1){var r=e,i=this.nodeMap.get(r.getCoordinate());return null===i?(this.nodeMap.put(r.getCoordinate(),r),r):(i.mergeLabel(r),i)}},NodeMap.prototype.print=function(e){for(var t=this.iterator();t.hasNext();){t.next().print(e)}},NodeMap.prototype.iterator=function(){return this.nodeMap.values().iterator()},NodeMap.prototype.values=function(){return this.nodeMap.values()},NodeMap.prototype.getBoundaryNodes=function(e){for(var t=new ArrayList,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(e)===Location.BOUNDARY&&t.add(r)}return t},NodeMap.prototype.add=function(e){var t=e.getCoordinate();this.addNode(t).add(e)},NodeMap.prototype.interfaces_=function(){return[]},NodeMap.prototype.getClass=function(){return NodeMap};var Quadrant=function(){},staticAccessors$21={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Quadrant.prototype.interfaces_=function(){return[]},Quadrant.prototype.getClass=function(){return Quadrant},Quadrant.isNorthern=function(e){return e===Quadrant.NE||e===Quadrant.NW},Quadrant.isOpposite=function(e,t){return e!==t&&2==(e-t+4)%4},Quadrant.commonHalfPlane=function(e,t){if(e===t)return e;if(2==(e-t+4)%4)return-1;var n=e<t?e:t;return 0===n&&3===(t<e?e:t)?3:n},Quadrant.isInHalfPlane=function(e,t){return t===Quadrant.SE?e===Quadrant.SE||e===Quadrant.SW:e===t||e===t+1},Quadrant.quadrant=function(e,t){if("number"==typeof e&&"number"==typeof t){var n=e,r=t;if(0===n&&0===r)throw new IllegalArgumentException("Cannot compute the quadrant for point ( "+n+", "+r+" )");return 0<=n?0<=r?Quadrant.NE:Quadrant.SE:0<=r?Quadrant.NW:Quadrant.SW}if(e instanceof Coordinate&&t instanceof Coordinate){var i=e,o=t;if(o.x===i.x&&o.y===i.y)throw new IllegalArgumentException("Cannot compute the quadrant for two identical points "+i);return o.x>=i.x?o.y>=i.y?Quadrant.NE:Quadrant.SE:o.y>=i.y?Quadrant.NW:Quadrant.SW}},staticAccessors$21.NE.get=function(){return 0},staticAccessors$21.NW.get=function(){return 1},staticAccessors$21.SW.get=function(){return 2},staticAccessors$21.SE.get=function(){return 3},Object.defineProperties(Quadrant,staticAccessors$21);var EdgeEnd=function(e,t,n,r){var i,o,a,s,l;this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length?this._edge=e:3===arguments.length?(i=t,o=n,this._edge=e,this.init(i,o),this._label=null):4===arguments.length&&(a=t,s=n,l=r,this._edge=e,this.init(a,s),this._label=l)};EdgeEnd.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:CGAlgorithms.computeOrientation(e._p0,e._p1,this._p1)},EdgeEnd.prototype.getDy=function(){return this._dy},EdgeEnd.prototype.getCoordinate=function(){return this._p0},EdgeEnd.prototype.setNode=function(e){this._node=e},EdgeEnd.prototype.print=function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);e.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)},EdgeEnd.prototype.compareTo=function(e){return this.compareDirection(e)},EdgeEnd.prototype.getDirectedCoordinate=function(){return this._p1},EdgeEnd.prototype.getDx=function(){return this._dx},EdgeEnd.prototype.getLabel=function(){return this._label},EdgeEnd.prototype.getEdge=function(){return this._edge},EdgeEnd.prototype.getQuadrant=function(){return this._quadrant},EdgeEnd.prototype.getNode=function(){return this._node},EdgeEnd.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf(".");return"  "+t.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label},EdgeEnd.prototype.computeLabel=function(){},EdgeEnd.prototype.init=function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=Quadrant.quadrant(this._dx,this._dy),Assert.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},EdgeEnd.prototype.interfaces_=function(){return[Comparable]},EdgeEnd.prototype.getClass=function(){return EdgeEnd};var DirectedEdge=(V2f=EdgeEnd,V2f&&(W2f.__proto__=V2f),((W2f.prototype=Object.create(V2f&&V2f.prototype)).constructor=W2f).prototype.getNextMin=function(){return this._nextMin},W2f.prototype.getDepth=function(e){return this._depth[e]},W2f.prototype.setVisited=function(e){this._isVisited=e},W2f.prototype.computeDirectedLabel=function(){this._label=new Label(this._edge.getLabel()),this._isForward||this._label.flip()},W2f.prototype.getNext=function(){return this._next},W2f.prototype.setDepth=function(e,t){if(-999!==this._depth[e]&&this._depth[e]!==t)throw new TopologyException("assigned depths do not match",this.getCoordinate());this._depth[e]=t},W2f.prototype.isInteriorAreaEdge=function(){for(var e=!0,t=0;t<2;t++)this._label.isArea(t)&&this._label.getLocation(t,Position.LEFT)===Location.INTERIOR&&this._label.getLocation(t,Position.RIGHT)===Location.INTERIOR||(e=!1);return e},W2f.prototype.setNextMin=function(e){this._nextMin=e},W2f.prototype.print=function(e){V2f.prototype.print.call(this,e),e.print(" "+this._depth[Position.LEFT]+"/"+this._depth[Position.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},W2f.prototype.setMinEdgeRing=function(e){this._minEdgeRing=e},W2f.prototype.isLineEdge=function(){var e=this._label.isLine(0)||this._label.isLine(1),t=!this._label.isArea(0)||this._label.allPositionsEqual(0,Location.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Location.EXTERIOR);return e&&t&&n},W2f.prototype.setEdgeRing=function(e){this._edgeRing=e},W2f.prototype.getMinEdgeRing=function(){return this._minEdgeRing},W2f.prototype.getDepthDelta=function(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e},W2f.prototype.setInResult=function(e){this._isInResult=e},W2f.prototype.getSym=function(){return this._sym},W2f.prototype.isForward=function(){return this._isForward},W2f.prototype.getEdge=function(){return this._edge},W2f.prototype.printEdge=function(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)},W2f.prototype.setSym=function(e){this._sym=e},W2f.prototype.setVisitedEdge=function(e){this.setVisited(e),this._sym.setVisited(e)},W2f.prototype.setEdgeDepths=function(e,t){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;e===Position.LEFT&&(r=-1);var i=Position.opposite(e),o=t+n*r;this.setDepth(e,t),this.setDepth(i,o)},W2f.prototype.getEdgeRing=function(){return this._edgeRing},W2f.prototype.isInResult=function(){return this._isInResult},W2f.prototype.setNext=function(e){this._next=e},W2f.prototype.isVisited=function(){return this._isVisited},W2f.prototype.interfaces_=function(){return[]},W2f.prototype.getClass=function(){return W2f},W2f.depthFactor=function(e,t){return e===Location.EXTERIOR&&t===Location.INTERIOR?1:e===Location.INTERIOR&&t===Location.EXTERIOR?-1:0},W2f),V2f;function W2f(){var e,t=arguments[0],n=arguments[1];V2f.call(this,t),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],(this._isForward=n)?this.init(t.getCoordinate(0),t.getCoordinate(1)):(e=t.getNumPoints()-1,this.init(t.getCoordinate(e),t.getCoordinate(e-1))),this.computeDirectedLabel()}var NodeFactory=function(){};NodeFactory.prototype.createNode=function(e){return new Node$1(e,null)},NodeFactory.prototype.interfaces_=function(){return[]},NodeFactory.prototype.getClass=function(){return NodeFactory};var PlanarGraph=function(e){this._edges=new ArrayList,this._nodes=null,this._edgeEndList=new ArrayList,0===arguments.length?this._nodes=new NodeMap(new NodeFactory):1===arguments.length&&(this._nodes=new NodeMap(e))};PlanarGraph.prototype.printEdges=function(e){e.println("Edges:");for(var t=0;t<this._edges.size();t++){e.println("edge "+t+":");var n=this._edges.get(t);n.print(e),n.eiList.print(e)}},PlanarGraph.prototype.find=function(e){return this._nodes.find(e)},PlanarGraph.prototype.addNode=function(e){return e instanceof Node$1||e instanceof Coordinate?this._nodes.addNode(e):void 0},PlanarGraph.prototype.getNodeIterator=function(){return this._nodes.iterator()},PlanarGraph.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}},PlanarGraph.prototype.debugPrintln=function(e){System.out.println(e)},PlanarGraph.prototype.isBoundaryNode=function(e,t){var n=this._nodes.find(t);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(e)===Location.BOUNDARY},PlanarGraph.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){e.next().getEdges().linkAllDirectedEdges()}},PlanarGraph.prototype.matchInSameDirection=function(e,t,n,r){return!!e.equals(n)&&(CGAlgorithms.computeOrientation(e,t,r)===CGAlgorithms.COLLINEAR&&Quadrant.quadrant(e,t)===Quadrant.quadrant(n,r))},PlanarGraph.prototype.getEdgeEnds=function(){return this._edgeEndList},PlanarGraph.prototype.debugPrint=function(e){System.out.print(e)},PlanarGraph.prototype.getEdgeIterator=function(){return this._edges.iterator()},PlanarGraph.prototype.findEdgeInSameDirection=function(e,t){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(e,t,i[0],i[1]))return r;if(this.matchInSameDirection(e,t,i[i.length-1],i[i.length-2]))return r}return null},PlanarGraph.prototype.insertEdge=function(e){this._edges.add(e)},PlanarGraph.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null},PlanarGraph.prototype.addEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this._edges.add(n);var r=new DirectedEdge(n,!0),i=new DirectedEdge(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},PlanarGraph.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)},PlanarGraph.prototype.getNodes=function(){return this._nodes.values()},PlanarGraph.prototype.findEdge=function(e,t){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(e.equals(i[0])&&t.equals(i[1]))return r}return null},PlanarGraph.prototype.interfaces_=function(){return[]},PlanarGraph.prototype.getClass=function(){return PlanarGraph},PlanarGraph.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}};var PolygonBuilder=function(e){this._geometryFactory=null,this._shellList=new ArrayList,this._geometryFactory=e};PolygonBuilder.prototype.sortShellsAndHoles=function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):t.add(i)}},PolygonBuilder.prototype.computePolygons=function(e){for(var t=new ArrayList,n=e.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);t.add(r)}return t},PolygonBuilder.prototype.placeFreeHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,e);if(null===i)throw new TopologyException("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},PolygonBuilder.prototype.buildMinimalEdgeRings=function(e,t,n){for(var r=new ArrayList,i=e.iterator();i.hasNext();){var o,a,s=i.next();2<s.getMaxNodeDegree()?(s.linkDirectedEdgesForMinimalEdgeRings(),o=s.buildMinimalRings(),null!==(a=this.findShell(o))?(this.placePolygonHoles(a,o),t.add(a)):n.addAll(o)):r.add(s)}return r},PolygonBuilder.prototype.containsPoint=function(e){for(var t=this._shellList.iterator();t.hasNext();){if(t.next().containsPoint(e))return!0}return!1},PolygonBuilder.prototype.buildMaximalEdgeRings=function(e){for(var t=new ArrayList,n=e.iterator();n.hasNext();){var r,i=n.next();i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()&&(r=new MaximalEdgeRing(i,this._geometryFactory),t.add(r),r.setInResult())}return t},PolygonBuilder.prototype.placePolygonHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}},PolygonBuilder.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},PolygonBuilder.prototype.findEdgeRingContaining=function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=t.iterator();s.hasNext();){var l=s.next(),c=l.getLinearRing(),u=c.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var p=!1;u.contains(r)&&CGAlgorithms.isPointInRing(i,c.getCoordinates())&&(p=!0),p&&(null!==o&&!a.contains(u)||(o=l))}return o},PolygonBuilder.prototype.findShell=function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,t++)}return Assert.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n},PolygonBuilder.prototype.add=function(e,t){var n,r,i,o,a;1===arguments.length?(n=e,this.add(n.getEdgeEnds(),n.getNodes())):2===arguments.length&&(r=e,PlanarGraph.linkResultDirectedEdges(t),i=this.buildMaximalEdgeRings(r),o=new ArrayList,a=this.buildMinimalEdgeRings(i,this._shellList,o),this.sortShellsAndHoles(a,this._shellList,o),this.placeFreeHoles(this._shellList,o))},PolygonBuilder.prototype.interfaces_=function(){return[]},PolygonBuilder.prototype.getClass=function(){return PolygonBuilder};var Boundable=function(){};Boundable.prototype.getBounds=function(){},Boundable.prototype.interfaces_=function(){return[]},Boundable.prototype.getClass=function(){return Boundable};var ItemBoundable=function(e,t){this._bounds=null,this._item=null;var n=t;this._bounds=e,this._item=n};ItemBoundable.prototype.getItem=function(){return this._item},ItemBoundable.prototype.getBounds=function(){return this._bounds},ItemBoundable.prototype.interfaces_=function(){return[Boundable,Serializable]},ItemBoundable.prototype.getClass=function(){return ItemBoundable};var PriorityQueue=function(){this._size=null,this._items=null,this._size=0,this._items=new ArrayList,this._items.add(null)};PriorityQueue.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),--this._size,this.reorder(1),e},PriorityQueue.prototype.size=function(){return this._size},PriorityQueue.prototype.reorder=function(e){for(var t=null,n=this._items.get(e);2*e<=this._size&&((t=2*e)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(n)<0);e=t)this._items.set(e,this._items.get(t));this._items.set(e,n)},PriorityQueue.prototype.clear=function(){this._size=0,this._items.clear()},PriorityQueue.prototype.isEmpty=function(){return 0===this._size},PriorityQueue.prototype.add=function(e){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,e)},PriorityQueue.prototype.interfaces_=function(){return[]},PriorityQueue.prototype.getClass=function(){return PriorityQueue};var ItemVisitor=function(){};ItemVisitor.prototype.visitItem=function(){},ItemVisitor.prototype.interfaces_=function(){return[]},ItemVisitor.prototype.getClass=function(){return ItemVisitor};var SpatialIndex=function(){};SpatialIndex.prototype.insert=function(){},SpatialIndex.prototype.remove=function(){},SpatialIndex.prototype.query=function(){},SpatialIndex.prototype.interfaces_=function(){return[]},SpatialIndex.prototype.getClass=function(){return SpatialIndex};var AbstractNode=function(e){this._childBoundables=new ArrayList,this._bounds=null,this._level=null,0===arguments.length||1===arguments.length&&(this._level=e)},staticAccessors$22={serialVersionUID:{configurable:!0}};AbstractNode.prototype.getLevel=function(){return this._level},AbstractNode.prototype.size=function(){return this._childBoundables.size()},AbstractNode.prototype.getChildBoundables=function(){return this._childBoundables},AbstractNode.prototype.addChildBoundable=function(e){Assert.isTrue(null===this._bounds),this._childBoundables.add(e)},AbstractNode.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},AbstractNode.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},AbstractNode.prototype.interfaces_=function(){return[Boundable,Serializable]},AbstractNode.prototype.getClass=function(){return AbstractNode},staticAccessors$22.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(AbstractNode,staticAccessors$22);var Collections=function(){};Collections.reverseOrder=function(){return{compare:function(e,t){return t.compareTo(e)}}},Collections.min=function(e){return Collections.sort(e),e.get(0)},Collections.sort=function(e,t){var n=e.toArray();t?Arrays.sort(n,t):Arrays.sort(n);for(var r=e.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Collections.singletonList=function(e){var t=new ArrayList;return t.add(e),t};var BoundablePair=function(e,t,n){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var r=t,i=n;this._boundable1=e,this._boundable2=r,this._itemDistance=i,this._distance=this.distance()};BoundablePair.prototype.expandToQueue=function(e,t){var n=BoundablePair.isComposite(this._boundable1),r=BoundablePair.isComposite(this._boundable2);if(n&&r)return BoundablePair.area(this._boundable1)>BoundablePair.area(this._boundable2)?this.expand(this._boundable1,this._boundable2,e,t):this.expand(this._boundable2,this._boundable1,e,t),null;if(n)return this.expand(this._boundable1,this._boundable2,e,t),null;if(r)return this.expand(this._boundable2,this._boundable1,e,t),null;throw new IllegalArgumentException("neither boundable is composite")},BoundablePair.prototype.isLeaves=function(){return!(BoundablePair.isComposite(this._boundable1)||BoundablePair.isComposite(this._boundable2))},BoundablePair.prototype.compareTo=function(e){return this._distance<e._distance?-1:this._distance>e._distance?1:0},BoundablePair.prototype.expand=function(e,t,n,r){for(var i=e.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new BoundablePair(o,t,this._itemDistance);a.getDistance()<r&&n.add(a)}},BoundablePair.prototype.getBoundable=function(e){return 0===e?this._boundable1:this._boundable2},BoundablePair.prototype.getDistance=function(){return this._distance},BoundablePair.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},BoundablePair.prototype.interfaces_=function(){return[Comparable]},BoundablePair.prototype.getClass=function(){return BoundablePair},BoundablePair.area=function(e){return e.getBounds().getArea()},BoundablePair.isComposite=function(e){return e instanceof AbstractNode};var AbstractSTRtree=function e(){var t,n;this._root=null,this._built=!1,this._itemBoundables=new ArrayList,this._nodeCapacity=null,0===arguments.length?(t=e.DEFAULT_NODE_CAPACITY,this._nodeCapacity=t):1===arguments.length&&(n=arguments[0],Assert.isTrue(1<n,"Node capacity must be greater than 1"),this._nodeCapacity=n)},staticAccessors$23={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};AbstractSTRtree.prototype.getNodeCapacity=function(){return this._nodeCapacity},AbstractSTRtree.prototype.lastNode=function(e){return e.get(e.size()-1)},AbstractSTRtree.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=0,t=arguments[0].getChildBoundables().iterator();t.hasNext();){var n=t.next();n instanceof AbstractNode?e+=this.size(n):n instanceof ItemBoundable&&(e+=1)}return e}},AbstractSTRtree.prototype.removeItem=function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof ItemBoundable&&i.getItem()===t&&(n=i)}return null!==n&&(e.getChildBoundables().remove(n),!0)},AbstractSTRtree.prototype.itemsTree=function(e){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new ArrayList:t}if(1===arguments.length){for(var n=e,r=new ArrayList,i=n.getChildBoundables().iterator();i.hasNext();){var o,a=i.next();a instanceof AbstractNode?null!==(o=this.itemsTree(a))&&r.add(o):a instanceof ItemBoundable?r.add(a.getItem()):Assert.shouldNeverReachHere()}return r.size()<=0?null:r}},AbstractSTRtree.prototype.insert=function(e,t){Assert.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new ItemBoundable(e,t))},AbstractSTRtree.prototype.boundablesAtLevel=function(e,t,n){if(1===arguments.length){var r=e,i=new ArrayList;return this.boundablesAtLevel(r,this._root,i),i}if(3===arguments.length){var o=e,a=t,s=n;if(Assert.isTrue(-2<o),a.getLevel()===o)return s.add(a),null;for(var l=a.getChildBoundables().iterator();l.hasNext();){var c=l.next();c instanceof AbstractNode?this.boundablesAtLevel(o,c,s):(Assert.isTrue(c instanceof ItemBoundable),-1===o&&s.add(c))}return null}},AbstractSTRtree.prototype.query=function(e,t,n){if(1===arguments.length){var r=e;this.build();var i=new ArrayList;return this.isEmpty()?i:(this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i),i)}if(2===arguments.length){var o=e,a=t;if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),o)&&this.query(o,this._root,a)}else if(3===arguments.length)if(hasInterface(n,ItemVisitor)&&e instanceof Object&&t instanceof AbstractNode)for(var s=e,l=n,c=t.getChildBoundables(),u=0;u<c.size();u++){var p=c.get(u);this.getIntersectsOp().intersects(p.getBounds(),s)&&(p instanceof AbstractNode?this.query(s,p,l):p instanceof ItemBoundable?l.visitItem(p.getItem()):Assert.shouldNeverReachHere())}else if(hasInterface(n,List)&&e instanceof Object&&t instanceof AbstractNode)for(var d=e,f=n,h=t.getChildBoundables(),g=0;g<h.size();g++){var m=h.get(g);this.getIntersectsOp().intersects(m.getBounds(),d)&&(m instanceof AbstractNode?this.query(d,m,f):m instanceof ItemBoundable?f.add(m.getItem()):Assert.shouldNeverReachHere())}},AbstractSTRtree.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},AbstractSTRtree.prototype.getRoot=function(){return this.build(),this._root},AbstractSTRtree.prototype.remove=function(e,t,n){if(2===arguments.length){var r=e,i=t;return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.remove(r,this._root,i)}if(3===arguments.length){var o=e,a=t,s=n,l=this.removeItem(a,s);if(l)return!0;for(var c=null,u=a.getChildBoundables().iterator();u.hasNext();){var p=u.next();if(this.getIntersectsOp().intersects(p.getBounds(),o)&&(p instanceof AbstractNode&&(l=this.remove(o,p,s)))){c=p;break}}return null!==c&&c.getChildBoundables().isEmpty()&&a.getChildBoundables().remove(c),l}},AbstractSTRtree.prototype.createHigherLevels=function(e,t){Assert.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,t+1)},AbstractSTRtree.prototype.depth=function(e){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,n=e.getChildBoundables().iterator();n.hasNext();){var r,i=n.next();i instanceof AbstractNode&&(t<(r=this.depth(i))&&(t=r))}return t+1}},AbstractSTRtree.prototype.createParentBoundables=function(e,t){Assert.isTrue(!e.isEmpty());var n=new ArrayList;n.add(this.createNode(t));var r=new ArrayList(e);Collections.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(t)),this.lastNode(n).addChildBoundable(o)}return n},AbstractSTRtree.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},AbstractSTRtree.prototype.interfaces_=function(){return[Serializable]},AbstractSTRtree.prototype.getClass=function(){return AbstractSTRtree},AbstractSTRtree.compareDoubles=function(e,t){return t<e?1:e<t?-1:0},staticAccessors$23.IntersectsOp.get=function(){return IntersectsOp},staticAccessors$23.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},staticAccessors$23.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(AbstractSTRtree,staticAccessors$23);var IntersectsOp=function(){},ItemDistance=function(){};ItemDistance.prototype.distance=function(){},ItemDistance.prototype.interfaces_=function(){return[]},ItemDistance.prototype.getClass=function(){return ItemDistance};var STRtree=function(i){function y(e){e=e||y.DEFAULT_NODE_CAPACITY,i.call(this,e)}i&&(y.__proto__=i);var e={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return((y.prototype=Object.create(i&&i.prototype)).constructor=y).prototype.createParentBoundablesFromVerticalSlices=function(e,t){Assert.isTrue(0<e.length);for(var n=new ArrayList,r=0;r<e.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(e[r],t));return n},y.prototype.createNode=function(e){return new STRtreeNode(e)},y.prototype.size=function(){return 0===arguments.length?i.prototype.size.call(this):i.prototype.size.apply(this,arguments)},y.prototype.insert=function(e,t){if(2!==arguments.length)return i.prototype.insert.apply(this,arguments);var n=e,r=t;if(n.isNull())return null;i.prototype.insert.call(this,n,r)},y.prototype.getIntersectsOp=function(){return y.intersectsOp},y.prototype.verticalSlices=function(e,t){for(var n=Math.trunc(Math.ceil(e.size()/t)),r=new Array(t).fill(null),i=e.iterator(),o=0;o<t;o++){r[o]=new ArrayList;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},y.prototype.query=function(e,t,n){if(1===arguments.length)return i.prototype.query.call(this,e);2===arguments.length?i.prototype.query.call(this,e,t):3===arguments.length&&(hasInterface(n,ItemVisitor)&&e instanceof Object&&t instanceof AbstractNode||hasInterface(n,List)&&e instanceof Object&&t instanceof AbstractNode)&&i.prototype.query.call(this,e,t,n)},y.prototype.getComparator=function(){return y.yComparator},y.prototype.createParentBoundablesFromVerticalSlice=function(e,t){return i.prototype.createParentBoundables.call(this,e,t)},y.prototype.remove=function(e,t){return 2!==arguments.length?i.prototype.remove.apply(this,arguments):i.prototype.remove.call(this,e,t)},y.prototype.depth=function(){return 0===arguments.length?i.prototype.depth.call(this):i.prototype.depth.apply(this,arguments)},y.prototype.createParentBoundables=function(e,t){Assert.isTrue(!e.isEmpty());var n=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),r=new ArrayList(e);Collections.sort(r,y.xComparator);var i=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(i,t)},y.prototype.nearestNeighbour=function(e,t,n){if(1===arguments.length){if(hasInterface(e,ItemDistance)){var r=e,i=new BoundablePair(this.getRoot(),this.getRoot(),r);return this.nearestNeighbour(i)}if(e instanceof BoundablePair)return this.nearestNeighbour(e,Double.POSITIVE_INFINITY)}else if(2===arguments.length){if(e instanceof y&&hasInterface(t,ItemDistance)){var o=e,a=t,s=new BoundablePair(this.getRoot(),o.getRoot(),a);return this.nearestNeighbour(s)}if(e instanceof BoundablePair&&"number"==typeof t){var l=e,c=t,u=null,p=new PriorityQueue;for(p.add(l);!p.isEmpty()&&0<c;){var d=p.poll(),f=d.getDistance();if(c<=f)break;d.isLeaves()?(c=f,u=d):d.expandToQueue(p,c)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var h=n,g=new ItemBoundable(e,t),m=new BoundablePair(this.getRoot(),g,h);return this.nearestNeighbour(m)[0]}},y.prototype.interfaces_=function(){return[SpatialIndex,Serializable]},y.prototype.getClass=function(){return y},y.centreX=function(e){return y.avg(e.getMinX(),e.getMaxX())},y.avg=function(e,t){return(e+t)/2},y.centreY=function(e){return y.avg(e.getMinY(),e.getMaxY())},e.STRtreeNode.get=function(){return STRtreeNode},e.serialVersionUID.get=function(){return 0x39920f7d5f261e0},e.xComparator.get=function(){return{interfaces_:function(){return[Comparator]},compare:function(e,t){return i.compareDoubles(y.centreX(e.getBounds()),y.centreX(t.getBounds()))}}},e.yComparator.get=function(){return{interfaces_:function(){return[Comparator]},compare:function(e,t){return i.compareDoubles(y.centreY(e.getBounds()),y.centreY(t.getBounds()))}}},e.intersectsOp.get=function(){return{interfaces_:function(){return[i.IntersectsOp]},intersects:function(e,t){return e.intersects(t)}}},e.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(y,e),y}(AbstractSTRtree),STRtreeNode=(lcg=AbstractNode,lcg&&(mcg.__proto__=lcg),((mcg.prototype=Object.create(lcg&&lcg.prototype)).constructor=mcg).prototype.computeBounds=function(){for(var e=null,t=this.getChildBoundables().iterator();t.hasNext();){var n=t.next();null===e?e=new Envelope(n.getBounds()):e.expandToInclude(n.getBounds())}return e},mcg.prototype.interfaces_=function(){return[]},mcg.prototype.getClass=function(){return mcg},mcg),lcg;function mcg(){var e=arguments[0];lcg.call(this,e)}var SegmentPointComparator=function(){};SegmentPointComparator.prototype.interfaces_=function(){return[]},SegmentPointComparator.prototype.getClass=function(){return SegmentPointComparator},SegmentPointComparator.relativeSign=function(e,t){return e<t?-1:t<e?1:0},SegmentPointComparator.compare=function(e,t,n){if(t.equals2D(n))return 0;var r=SegmentPointComparator.relativeSign(t.x,n.x),i=SegmentPointComparator.relativeSign(t.y,n.y);switch(e){case 0:return SegmentPointComparator.compareValue(r,i);case 1:return SegmentPointComparator.compareValue(i,r);case 2:return SegmentPointComparator.compareValue(i,-r);case 3:return SegmentPointComparator.compareValue(-r,i);case 4:return SegmentPointComparator.compareValue(-r,-i);case 5:return SegmentPointComparator.compareValue(-i,-r);case 6:return SegmentPointComparator.compareValue(-i,r);case 7:return SegmentPointComparator.compareValue(r,-i)}return Assert.shouldNeverReachHere("invalid octant value"),0},SegmentPointComparator.compareValue=function(e,t){return e<0?-1:0<e?1:t<0?-1:0<t?1:0};var SegmentNode=function(e,t,n,r){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var i=e,o=t,a=n,s=r;this._segString=i,this.coord=new Coordinate(o),this.segmentIndex=a,this._segmentOctant=s,this._isInterior=!o.equals2D(i.getCoordinate(a))};SegmentNode.prototype.getCoordinate=function(){return this.coord},SegmentNode.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)},SegmentNode.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:SegmentPointComparator.compare(this._segmentOctant,this.coord,t.coord)},SegmentNode.prototype.isEndPoint=function(e){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===e},SegmentNode.prototype.isInterior=function(){return this._isInterior},SegmentNode.prototype.interfaces_=function(){return[Comparable]},SegmentNode.prototype.getClass=function(){return SegmentNode};var SegmentNodeList=function(e){this._nodeMap=new TreeMap,this._edge=null,this._edge=e};SegmentNodeList.prototype.getSplitCoordinates=function(){var e=new CoordinateList;this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next();this.addEdgeCoordinates(n,r,e),n=r}return e.toCoordinateArray()},SegmentNodeList.prototype.addCollapsedNodes=function(){var e=new ArrayList;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var t=e.iterator();t.hasNext();){var n=t.next().intValue();this.add(this._edge.getCoordinate(n),n)}},SegmentNodeList.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){t.next().print(e)}},SegmentNodeList.prototype.findCollapsesFromExistingVertices=function(e){for(var t=0;t<this._edge.size()-2;t++){var n=this._edge.getCoordinate(t),r=this._edge.getCoordinate(t+2);n.equals2D(r)&&e.add(new Integer(t+1))}},SegmentNodeList.prototype.addEdgeCoordinates=function(e,t,n){var r=this._edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(r);n.add(new Coordinate(e.coord),!1);for(var o=e.segmentIndex+1;o<=t.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new Coordinate(t.coord))},SegmentNodeList.prototype.iterator=function(){return this._nodeMap.values().iterator()},SegmentNodeList.prototype.addSplitEdges=function(e){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}},SegmentNodeList.prototype.findCollapseIndex=function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,1===r&&(n[0]=e.segmentIndex+1,!0)},SegmentNodeList.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,t)&&e.add(new Integer(t[0])),r=i}},SegmentNodeList.prototype.getEdge=function(){return this._edge},SegmentNodeList.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)},SegmentNodeList.prototype.createSplitEdge=function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this._edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new Coordinate(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new Coordinate(t.coord)),new NodedSegmentString(o,this._edge.getData())},SegmentNodeList.prototype.add=function(e,t){var n=new SegmentNode(this._edge,e,t,this._edge.getSegmentOctant(t)),r=this._nodeMap.get(n);return null!==r?(Assert.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},SegmentNodeList.prototype.checkSplitEdgesCorrectness=function(e){var t=this._edge.getCoordinates(),n=e.get(0).getCoordinate(0);if(!n.equals2D(t[0]))throw new RuntimeException("bad split edge start point at "+n);var r=e.get(e.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(t[t.length-1]))throw new RuntimeException("bad split edge end point at "+i)},SegmentNodeList.prototype.interfaces_=function(){return[]},SegmentNodeList.prototype.getClass=function(){return SegmentNodeList};var Octant=function(){};Octant.prototype.interfaces_=function(){return[]},Octant.prototype.getClass=function(){return Octant},Octant.octant=function(e,t){if("number"==typeof e&&"number"==typeof t){var n=e,r=t;if(0===n&&0===r)throw new IllegalArgumentException("Cannot compute the octant for point ( "+n+", "+r+" )");var i=Math.abs(n),o=Math.abs(r);return 0<=n?0<=r?o<=i?0:1:o<=i?7:6:0<=r?o<=i?3:2:o<=i?4:5}if(e instanceof Coordinate&&t instanceof Coordinate){var a=t.x-e.x,s=t.y-e.y;if(0==a&&0==s)throw new IllegalArgumentException("Cannot compute the octant for two identical points "+e);return Octant.octant(a,s)}};var SegmentString=function(){};SegmentString.prototype.getCoordinates=function(){},SegmentString.prototype.size=function(){},SegmentString.prototype.getCoordinate=function(){},SegmentString.prototype.isClosed=function(){},SegmentString.prototype.setData=function(){},SegmentString.prototype.getData=function(){},SegmentString.prototype.interfaces_=function(){return[]},SegmentString.prototype.getClass=function(){return SegmentString};var NodableSegmentString=function(){};NodableSegmentString.prototype.addIntersection=function(){},NodableSegmentString.prototype.interfaces_=function(){return[SegmentString]},NodableSegmentString.prototype.getClass=function(){return NodableSegmentString};var NodedSegmentString=function(e,t){this._nodeList=new SegmentNodeList(this),this._pts=null,this._data=null;var n=t;this._pts=e,this._data=n};NodedSegmentString.prototype.getCoordinates=function(){return this._pts},NodedSegmentString.prototype.size=function(){return this._pts.length},NodedSegmentString.prototype.getCoordinate=function(e){return this._pts[e]},NodedSegmentString.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},NodedSegmentString.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))},NodedSegmentString.prototype.setData=function(e){this._data=e},NodedSegmentString.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:Octant.octant(e,t)},NodedSegmentString.prototype.getData=function(){return this._data},NodedSegmentString.prototype.addIntersection=function(e,t,n,r){var i,o;2===arguments.length?this.addIntersectionNode(e,t):4===arguments.length&&(i=t,o=new Coordinate(e.getIntersection(r)),this.addIntersection(o,i))},NodedSegmentString.prototype.toString=function(){return WKTWriter.toLineString(new CoordinateArraySequence(this._pts))},NodedSegmentString.prototype.getNodeList=function(){return this._nodeList},NodedSegmentString.prototype.addIntersectionNode=function(e,t){var n,r=t,i=r+1;return i<this._pts.length&&(n=this._pts[i],e.equals2D(n)&&(r=i)),this._nodeList.add(e,r)},NodedSegmentString.prototype.addIntersections=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)},NodedSegmentString.prototype.interfaces_=function(){return[NodableSegmentString]},NodedSegmentString.prototype.getClass=function(){return NodedSegmentString},NodedSegmentString.getNodedSubstrings=function(e,t){if(1===arguments.length){var n=e,r=new ArrayList;return NodedSegmentString.getNodedSubstrings(n,r),r}if(2===arguments.length)for(var i=t,o=e.iterator();o.hasNext();){o.next().getNodeList().addSplitEdges(i)}};var LineSegment=function(e,t,n,r){var i,o,a;this.p0=null,this.p1=null,0===arguments.length?(this.p0=new Coordinate,this.p1=new Coordinate):1===arguments.length?(i=e,this.p0=new Coordinate(i.p0),this.p1=new Coordinate(i.p1)):2===arguments.length?(this.p0=e,this.p1=t):4===arguments.length&&(o=n,a=r,this.p0=new Coordinate(e,t),this.p1=new Coordinate(o,a))},staticAccessors$24={serialVersionUID:{configurable:!0}};LineSegment.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},LineSegment.prototype.orientationIndex=function(e){if(e instanceof LineSegment){var t=e,n=CGAlgorithms.orientationIndex(this.p0,this.p1,t.p0),r=CGAlgorithms.orientationIndex(this.p0,this.p1,t.p1);return 0<=n&&0<=r?Math.max(n,r):n<=0&&r<=0?Math.max(n,r):0}if(e instanceof Coordinate)return CGAlgorithms.orientationIndex(this.p0,this.p1,e)},LineSegment.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])},LineSegment.prototype.isVertical=function(){return this.p0.x===this.p1.x},LineSegment.prototype.equals=function(e){if(!(e instanceof LineSegment))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)},LineSegment.prototype.intersection=function(e){var t=new RobustLineIntersector;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null},LineSegment.prototype.project=function(e){if(e instanceof Coordinate){var t=e;if(t.equals(this.p0)||t.equals(this.p1))return new Coordinate(t);var n=this.projectionFactor(t),r=new Coordinate;return r.x=this.p0.x+n*(this.p1.x-this.p0.x),r.y=this.p0.y+n*(this.p1.y-this.p0.y),r}if(e instanceof LineSegment){var i=e,o=this.projectionFactor(i.p0),a=this.projectionFactor(i.p1);if(1<=o&&1<=a)return null;if(o<=0&&a<=0)return null;var s=this.project(i.p0);o<0&&(s=this.p0),1<o&&(s=this.p1);var l=this.project(i.p1);return a<0&&(l=this.p0),1<a&&(l=this.p1),new LineSegment(s,l)}},LineSegment.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},LineSegment.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},LineSegment.prototype.getCoordinate=function(e){return 0===e?this.p0:this.p1},LineSegment.prototype.distancePerpendicular=function(e){return CGAlgorithms.distancePointLinePerpendicular(e,this.p0,this.p1)},LineSegment.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},LineSegment.prototype.midPoint=function(){return LineSegment.midPoint(this.p0,this.p1)},LineSegment.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;return r<=0?Double.NaN:((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r},LineSegment.prototype.closestPoints=function(e){var t=this.intersection(e);if(null!==t)return[t,t];var n=new Array(2).fill(null),r=Double.MAX_VALUE,i=null,o=this.closestPoint(e.p0),r=o.distance(e.p0);n[0]=o,n[1]=e.p0;var a=this.closestPoint(e.p1);(i=a.distance(e.p1))<r&&(r=i,n[0]=a,n[1]=e.p1);var s=e.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var l=e.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n},LineSegment.prototype.closestPoint=function(e){var t=this.projectionFactor(e);return 0<t&&t<1?this.project(e):this.p0.distance(e)<this.p1.distance(e)?this.p0:this.p1},LineSegment.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},LineSegment.prototype.getLength=function(){return this.p0.distance(this.p1)},LineSegment.prototype.compareTo=function(e){var t=e,n=this.p0.compareTo(t.p0);return 0!==n?n:this.p1.compareTo(t.p1)},LineSegment.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e},LineSegment.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)},LineSegment.prototype.lineIntersection=function(e){try{return HCoordinate.intersection(this.p0,this.p1,e.p0,e.p1)}catch(e){if(!(e instanceof NotRepresentableException))throw e}return null},LineSegment.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},LineSegment.prototype.pointAlongOffset=function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,l=0;if(0!==t){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=t*i/a,l=t*o/a}return new Coordinate(n-l,r+s)},LineSegment.prototype.setCoordinates=function(e,t){var n,r;1===arguments.length?this.setCoordinates(e.p0,e.p1):2===arguments.length&&(n=e,r=t,this.p0.x=n.x,this.p0.y=n.y,this.p1.x=r.x,this.p1.y=r.y)},LineSegment.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(1<t||Double.isNaN(t))&&(t=1),t},LineSegment.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},LineSegment.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},LineSegment.prototype.distance=function(e){return e instanceof LineSegment?CGAlgorithms.distanceLineLine(this.p0,this.p1,e.p0,e.p1):e instanceof Coordinate?CGAlgorithms.distancePointLine(e,this.p0,this.p1):void 0},LineSegment.prototype.pointAlong=function(e){var t=new Coordinate;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t},LineSegment.prototype.hashCode=function(){var e=Double.doubleToLongBits(this.p0.x);e^=31*Double.doubleToLongBits(this.p0.y);var t=Math.trunc(e)^Math.trunc(e>>32),n=Double.doubleToLongBits(this.p1.x);return n^=31*Double.doubleToLongBits(this.p1.y),t^(Math.trunc(n)^Math.trunc(n>>32))},LineSegment.prototype.interfaces_=function(){return[Comparable,Serializable]},LineSegment.prototype.getClass=function(){return LineSegment},LineSegment.midPoint=function(e,t){return new Coordinate((e.x+t.x)/2,(e.y+t.y)/2)},staticAccessors$24.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(LineSegment,staticAccessors$24);var MonotoneChainOverlapAction=function(){this.tempEnv1=new Envelope,this.tempEnv2=new Envelope,this._overlapSeg1=new LineSegment,this._overlapSeg2=new LineSegment};MonotoneChainOverlapAction.prototype.overlap=function(e,t,n,r){var i,o;2===arguments.length||4===arguments.length&&(i=n,o=r,e.getLineSegment(t,this._overlapSeg1),i.getLineSegment(o,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2))},MonotoneChainOverlapAction.prototype.interfaces_=function(){return[]},MonotoneChainOverlapAction.prototype.getClass=function(){return MonotoneChainOverlapAction};var MonotoneChain=function(e,t,n,r){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var i=t,o=n,a=r;this._pts=e,this._start=i,this._end=o,this._context=a};MonotoneChain.prototype.getLineSegment=function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]},MonotoneChain.prototype.computeSelect=function(e,t,n,r){var i=this._pts[t],o=this._pts[n];if(r.tempEnv1.init(i,o),n-t==1)return r.select(this,t),null;if(!e.intersects(r.tempEnv1))return null;var a=Math.trunc((t+n)/2);t<a&&this.computeSelect(e,t,a,r),a<n&&this.computeSelect(e,a,n,r)},MonotoneChain.prototype.getCoordinates=function(){for(var e=new Array(this._end-this._start+1).fill(null),t=0,n=this._start;n<=this._end;n++)e[t++]=this._pts[n];return e},MonotoneChain.prototype.computeOverlaps=function(e,t){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,t)},MonotoneChain.prototype.setId=function(e){this._id=e},MonotoneChain.prototype.select=function(e,t){this.computeSelect(e,this._start,this._end,t)},MonotoneChain.prototype.getEnvelope=function(){var e,t;return null===this._env&&(e=this._pts[this._start],t=this._pts[this._end],this._env=new Envelope(e,t)),this._env},MonotoneChain.prototype.getEndIndex=function(){return this._end},MonotoneChain.prototype.getStartIndex=function(){return this._start},MonotoneChain.prototype.getContext=function(){return this._context},MonotoneChain.prototype.getId=function(){return this._id},MonotoneChain.prototype.computeOverlapsInternal=function(e,t,n,r,i,o){var a=this._pts[e],s=this._pts[t],l=n._pts[r],c=n._pts[i];if(t-e==1&&i-r==1)return o.overlap(this,e,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var u=Math.trunc((e+t)/2),p=Math.trunc((r+i)/2);e<u&&(r<p&&this.computeOverlapsInternal(e,u,n,r,p,o),p<i&&this.computeOverlapsInternal(e,u,n,p,i,o)),u<t&&(r<p&&this.computeOverlapsInternal(u,t,n,r,p,o),p<i&&this.computeOverlapsInternal(u,t,n,p,i,o))},MonotoneChain.prototype.interfaces_=function(){return[]},MonotoneChain.prototype.getClass=function(){return MonotoneChain};var MonotoneChainBuilder=function(){};MonotoneChainBuilder.prototype.interfaces_=function(){return[]},MonotoneChainBuilder.prototype.getClass=function(){return MonotoneChainBuilder},MonotoneChainBuilder.getChainStartIndices=function(e){var t=0,n=new ArrayList;n.add(new Integer(t));do{var r=MonotoneChainBuilder.findChainEnd(e,t);n.add(new Integer(r)),t=r}while(t<e.length-1);return MonotoneChainBuilder.toIntArray(n)},MonotoneChainBuilder.findChainEnd=function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=Quadrant.quadrant(e[n],e[n+1]),i=t+1;i<e.length;){if(!e[i-1].equals2D(e[i]))if(Quadrant.quadrant(e[i-1],e[i])!==r)break;i++}return i-1},MonotoneChainBuilder.getChains=function(e,t){if(1===arguments.length)return MonotoneChainBuilder.getChains(e,null);if(2===arguments.length){for(var n=e,r=t,i=new ArrayList,o=MonotoneChainBuilder.getChainStartIndices(n),a=0;a<o.length-1;a++){var s=new MonotoneChain(n,o[a],o[a+1],r);i.add(s)}return i}},MonotoneChainBuilder.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var Noder=function(){};Noder.prototype.computeNodes=function(){},Noder.prototype.getNodedSubstrings=function(){},Noder.prototype.interfaces_=function(){return[]},Noder.prototype.getClass=function(){return Noder};var SinglePassNoder=function(e){this._segInt=null,0===arguments.length||1===arguments.length&&this.setSegmentIntersector(e)};SinglePassNoder.prototype.setSegmentIntersector=function(e){this._segInt=e},SinglePassNoder.prototype.interfaces_=function(){return[Noder]},SinglePassNoder.prototype.getClass=function(){return SinglePassNoder};var MCIndexNoder=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new ArrayList,this._index=new STRtree,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t);var n={SegmentOverlapAction:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return NodedSegmentString.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(e){for(var t=MonotoneChainBuilder.getChains(e.getCoordinates(),e).iterator();t.hasNext();){var n=t.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(e){for(var t=(this._nodedSegStrings=e).iterator();t.hasNext();)this.add(t.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var e=new SegmentOverlapAction(this._segInt),t=this._monoChains.iterator();t.hasNext();)for(var n=t.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,e),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return SegmentOverlapAction},Object.defineProperties(e,n),e}(SinglePassNoder),SegmentOverlapAction=(nkg=MonotoneChainOverlapAction,nkg&&(okg.__proto__=nkg),((okg.prototype=Object.create(nkg&&nkg.prototype)).constructor=okg).prototype.overlap=function(e,t,n,r){if(4!==arguments.length)return nkg.prototype.overlap.apply(this,arguments);var i=t,o=n,a=r,s=e.getContext(),l=o.getContext();this._si.processIntersections(s,i,l,a)},okg.prototype.interfaces_=function(){return[]},okg.prototype.getClass=function(){return okg},okg),nkg;function okg(){nkg.call(this),this._si=null;var e=arguments[0];this._si=e}var BufferParameters=function e(){var t,n,r,i,o,a,s;this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length||(1===arguments.length?(t=arguments[0],this.setQuadrantSegments(t)):2===arguments.length?(n=arguments[0],r=arguments[1],this.setQuadrantSegments(n),this.setEndCapStyle(r)):4===arguments.length&&(i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)))},staticAccessors$25={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};BufferParameters.prototype.getEndCapStyle=function(){return this._endCapStyle},BufferParameters.prototype.isSingleSided=function(){return this._isSingleSided},BufferParameters.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,0===this._quadrantSegments&&(this._joinStyle=BufferParameters.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=BufferParameters.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==BufferParameters.JOIN_ROUND&&(this._quadrantSegments=BufferParameters.DEFAULT_QUADRANT_SEGMENTS)},BufferParameters.prototype.getJoinStyle=function(){return this._joinStyle},BufferParameters.prototype.setJoinStyle=function(e){this._joinStyle=e},BufferParameters.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e},BufferParameters.prototype.getSimplifyFactor=function(){return this._simplifyFactor},BufferParameters.prototype.getQuadrantSegments=function(){return this._quadrantSegments},BufferParameters.prototype.setEndCapStyle=function(e){this._endCapStyle=e},BufferParameters.prototype.getMitreLimit=function(){return this._mitreLimit},BufferParameters.prototype.setMitreLimit=function(e){this._mitreLimit=e},BufferParameters.prototype.setSingleSided=function(e){this._isSingleSided=e},BufferParameters.prototype.interfaces_=function(){return[]},BufferParameters.prototype.getClass=function(){return BufferParameters},BufferParameters.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)},staticAccessors$25.CAP_ROUND.get=function(){return 1},staticAccessors$25.CAP_FLAT.get=function(){return 2},staticAccessors$25.CAP_SQUARE.get=function(){return 3},staticAccessors$25.JOIN_ROUND.get=function(){return 1},staticAccessors$25.JOIN_MITRE.get=function(){return 2},staticAccessors$25.JOIN_BEVEL.get=function(){return 3},staticAccessors$25.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},staticAccessors$25.DEFAULT_MITRE_LIMIT.get=function(){return 5},staticAccessors$25.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(BufferParameters,staticAccessors$25);var BufferInputLineSimplifier=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=CGAlgorithms.COUNTERCLOCKWISE,this._inputLine=e||null},staticAccessors$26={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};BufferInputLineSimplifier.prototype.isDeletable=function(e,t,n,r){var i=this._inputLine[e],o=this._inputLine[t],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&(!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,e,n,r))},BufferInputLineSimplifier.prototype.deleteShallowConcavities=function(){for(var e=1,t=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(t),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(e,t,n,this._distanceTol)&&(this._isDeleted[t]=BufferInputLineSimplifier.DELETE,r=i=!0),e=i?n:t,t=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(t)}return r},BufferInputLineSimplifier.prototype.isShallowConcavity=function(e,t,n,r){return CGAlgorithms.computeOrientation(e,t,n)===this._angleOrientation&&CGAlgorithms.distancePointLine(t,e,n)<r},BufferInputLineSimplifier.prototype.isShallowSampled=function(e,t,n,r,i){var o=Math.trunc((r-n)/BufferInputLineSimplifier.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(e,t,this._inputLine[a],i))return!1;return!0},BufferInputLineSimplifier.prototype.isConcave=function(e,t,n){var r=CGAlgorithms.computeOrientation(e,t,n)===this._angleOrientation;return r},BufferInputLineSimplifier.prototype.simplify=function(e){this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=CGAlgorithms.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);for(;this.deleteShallowConcavities(););return this.collapseLine()},BufferInputLineSimplifier.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===BufferInputLineSimplifier.DELETE;)t++;return t},BufferInputLineSimplifier.prototype.isShallow=function(e,t,n,r){return CGAlgorithms.distancePointLine(t,e,n)<r},BufferInputLineSimplifier.prototype.collapseLine=function(){for(var e=new CoordinateList,t=0;t<this._inputLine.length;t++)this._isDeleted[t]!==BufferInputLineSimplifier.DELETE&&e.add(this._inputLine[t]);return e.toCoordinateArray()},BufferInputLineSimplifier.prototype.interfaces_=function(){return[]},BufferInputLineSimplifier.prototype.getClass=function(){return BufferInputLineSimplifier},BufferInputLineSimplifier.simplify=function(e,t){return new BufferInputLineSimplifier(e).simplify(t)},staticAccessors$26.INIT.get=function(){return 0},staticAccessors$26.DELETE.get=function(){return 1},staticAccessors$26.KEEP.get=function(){return 1},staticAccessors$26.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(BufferInputLineSimplifier,staticAccessors$26);var OffsetSegmentString=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new ArrayList},staticAccessors$28={COORDINATE_ARRAY_TYPE:{configurable:!0}};OffsetSegmentString.prototype.getCoordinates=function(){return this._ptList.toArray(OffsetSegmentString.COORDINATE_ARRAY_TYPE)},OffsetSegmentString.prototype.setPrecisionModel=function(e){this._precisionModel=e},OffsetSegmentString.prototype.addPt=function(e){var t=new Coordinate(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)},OffsetSegmentString.prototype.revere=function(){},OffsetSegmentString.prototype.addPts=function(e,t){if(t)for(var n=0;n<e.length;n++)this.addPt(e[n]);else for(var r=e.length-1;0<=r;r--)this.addPt(e[r])},OffsetSegmentString.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1);return e.distance(t)<this._minimimVertexDistance},OffsetSegmentString.prototype.toString=function(){return(new GeometryFactory).createLineString(this.getCoordinates()).toString()},OffsetSegmentString.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new Coordinate(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)},OffsetSegmentString.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e},OffsetSegmentString.prototype.interfaces_=function(){return[]},OffsetSegmentString.prototype.getClass=function(){return OffsetSegmentString},staticAccessors$28.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(OffsetSegmentString,staticAccessors$28);var Angle=function(){},staticAccessors$29={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Angle.prototype.interfaces_=function(){return[]},Angle.prototype.getClass=function(){return Angle},Angle.toDegrees=function(e){return 180*e/Math.PI},Angle.normalize=function(e){for(;e>Math.PI;)e-=Angle.PI_TIMES_2;for(;e<=-Math.PI;)e+=Angle.PI_TIMES_2;return e},Angle.angle=function(e,t){if(1===arguments.length)return Math.atan2(e.y,e.x);if(2===arguments.length){var n=t.x-e.x,r=t.y-e.y;return Math.atan2(r,n)}},Angle.isAcute=function(e,t,n){var r=e.x-t.x,i=e.y-t.y;return 0<r*(n.x-t.x)+i*(n.y-t.y)},Angle.isObtuse=function(e,t,n){var r=e.x-t.x,i=e.y-t.y;return r*(n.x-t.x)+i*(n.y-t.y)<0},Angle.interiorAngle=function(e,t,n){var r=Angle.angle(t,e),i=Angle.angle(t,n);return Math.abs(i-r)},Angle.normalizePositive=function(e){if(e<0){for(;e<0;)e+=Angle.PI_TIMES_2;e>=Angle.PI_TIMES_2&&(e=0)}else{for(;e>=Angle.PI_TIMES_2;)e-=Angle.PI_TIMES_2;e<0&&(e=0)}return e},Angle.angleBetween=function(e,t,n){var r=Angle.angle(t,e),i=Angle.angle(t,n);return Angle.diff(r,i)},Angle.diff=function(e,t){var n=null;return(n=e<t?t-e:e-t)>Math.PI&&(n=2*Math.PI-n),n},Angle.toRadians=function(e){return e*Math.PI/180},Angle.getTurn=function(e,t){var n=Math.sin(t-e);return 0<n?Angle.COUNTERCLOCKWISE:n<0?Angle.CLOCKWISE:Angle.NONE},Angle.angleBetweenOriented=function(e,t,n){var r=Angle.angle(t,e),i=Angle.angle(t,n)-r;return i<=-Math.PI?i+Angle.PI_TIMES_2:i>Math.PI?i-Angle.PI_TIMES_2:i},staticAccessors$29.PI_TIMES_2.get=function(){return 2*Math.PI},staticAccessors$29.PI_OVER_2.get=function(){return Math.PI/2},staticAccessors$29.PI_OVER_4.get=function(){return Math.PI/4},staticAccessors$29.COUNTERCLOCKWISE.get=function(){return CGAlgorithms.COUNTERCLOCKWISE},staticAccessors$29.CLOCKWISE.get=function(){return CGAlgorithms.CLOCKWISE},staticAccessors$29.NONE.get=function(){return CGAlgorithms.COLLINEAR},Object.defineProperties(Angle,staticAccessors$29);var OffsetSegmentGenerator=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new LineSegment,this._seg1=new LineSegment,this._offset0=new LineSegment,this._offset1=new LineSegment,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new RobustLineIntersector,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),8<=n.getQuadrantSegments()&&n.getJoinStyle()===BufferParameters.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},staticAccessors$27={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};OffsetSegmentGenerator.prototype.addNextSegment=function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=CGAlgorithms.computeOrientation(this._s0,this._s1,this._s2),r=n===CGAlgorithms.CLOCKWISE&&this._side===Position.LEFT||n===CGAlgorithms.COUNTERCLOCKWISE&&this._side===Position.RIGHT;0===n?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)},OffsetSegmentGenerator.prototype.addLineEndCap=function(e,t){var n=new LineSegment(e,t),r=new LineSegment;this.computeOffsetSegment(n,Position.LEFT,this._distance,r);var i=new LineSegment;this.computeOffsetSegment(n,Position.RIGHT,this._distance,i);var o=t.x-e.x,a=t.y-e.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case BufferParameters.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(t,s+Math.PI/2,s-Math.PI/2,CGAlgorithms.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case BufferParameters.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case BufferParameters.CAP_SQUARE:var l=new Coordinate;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var c=new Coordinate(r.p1.x+l.x,r.p1.y+l.y),u=new Coordinate(i.p1.x+l.x,i.p1.y+l.y);this._segList.addPt(c),this._segList.addPt(u)}},OffsetSegmentGenerator.prototype.getCoordinates=function(){return this._segList.getCoordinates()},OffsetSegmentGenerator.prototype.addMitreJoin=function(e,t,n,r){var i=!0,o=null;try{o=HCoordinate.intersection(t.p0,t.p1,n.p0,n.p1);(r<=0?1:o.distance(e)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(e){if(!(e instanceof NotRepresentableException))throw e;o=new Coordinate(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(t,n,r,this._bufParams.getMitreLimit())},OffsetSegmentGenerator.prototype.addFilletCorner=function(e,t,n,r,i){var o=t.x-e.x,a=t.y-e.y,s=Math.atan2(a,o),l=n.x-e.x,c=n.y-e.y,u=Math.atan2(c,l);r===CGAlgorithms.CLOCKWISE?s<=u&&(s+=2*Math.PI):u<=s&&(s-=2*Math.PI),this._segList.addPt(t),this.addFilletArc(e,s,u,r,i),this._segList.addPt(n)},OffsetSegmentGenerator.prototype.addOutsideTurn=function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===BufferParameters.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===BufferParameters.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))},OffsetSegmentGenerator.prototype.createSquare=function(e){this._segList.addPt(new Coordinate(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new Coordinate(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new Coordinate(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new Coordinate(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()},OffsetSegmentGenerator.prototype.addSegments=function(e,t){this._segList.addPts(e,t)},OffsetSegmentGenerator.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},OffsetSegmentGenerator.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},OffsetSegmentGenerator.prototype.initSideSegments=function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},OffsetSegmentGenerator.prototype.addLimitedMitreJoin=function(e,t,n,r){var i=this._seg0.p1,o=Angle.angle(i,this._seg0.p0),a=Angle.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Angle.normalize(o+a),l=Angle.normalize(s+Math.PI),c=r*n,u=n-c*Math.abs(Math.sin(a)),p=i.x+c*Math.cos(l),d=i.y+c*Math.sin(l),f=new Coordinate(p,d),h=new LineSegment(i,f),g=h.pointAlongOffset(1,u),m=h.pointAlongOffset(1,-u);this._side===Position.LEFT?(this._segList.addPt(g),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(g))},OffsetSegmentGenerator.prototype.computeOffsetSegment=function(e,t,n,r){var i=t===Position.LEFT?1:-1,o=e.p1.x-e.p0.x,a=e.p1.y-e.p0.y,s=Math.sqrt(o*o+a*a),l=i*n*o/s,c=i*n*a/s;r.p0.x=e.p0.x-c,r.p0.y=e.p0.y+l,r.p1.x=e.p1.x-c,r.p1.y=e.p1.y+l},OffsetSegmentGenerator.prototype.addFilletArc=function(e,t,n,r,i){var o=r===CGAlgorithms.CLOCKWISE?-1:1,a=Math.abs(t-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,c=0,u=new Coordinate;c<a;){var p=t+o*c;u.x=e.x+i*Math.cos(p),u.y=e.y+i*Math.sin(p),this._segList.addPt(u),c+=l}},OffsetSegmentGenerator.prototype.addInsideTurn=function(){var e,t;this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection()?this._segList.addPt(this._li.getIntersection(0)):(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR?this._segList.addPt(this._offset0.p1):(this._segList.addPt(this._offset0.p1),0<this._closingSegLengthFactor?(e=new Coordinate((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1)),this._segList.addPt(e),t=new Coordinate((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1)),this._segList.addPt(t)):this._segList.addPt(this._s1),this._segList.addPt(this._offset1.p0)))},OffsetSegmentGenerator.prototype.createCircle=function(e){var t=new Coordinate(e.x+this._distance,e.y);this._segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},OffsetSegmentGenerator.prototype.addBevelJoin=function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)},OffsetSegmentGenerator.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new OffsetSegmentString,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},OffsetSegmentGenerator.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),2<=this._li.getIntersectionNum()&&(this._bufParams.getJoinStyle()===BufferParameters.JOIN_BEVEL||this._bufParams.getJoinStyle()===BufferParameters.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,CGAlgorithms.CLOCKWISE,this._distance))},OffsetSegmentGenerator.prototype.closeRing=function(){this._segList.closeRing()},OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},OffsetSegmentGenerator.prototype.interfaces_=function(){return[]},OffsetSegmentGenerator.prototype.getClass=function(){return OffsetSegmentGenerator},staticAccessors$27.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},staticAccessors$27.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},staticAccessors$27.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},staticAccessors$27.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(OffsetSegmentGenerator,staticAccessors$27);var OffsetCurveBuilder=function(e,t){this._distance=0,this._precisionModel=null,this._bufParams=null;var n=t;this._precisionModel=e,this._bufParams=n};OffsetCurveBuilder.prototype.getOffsetCurve=function(e,t){if(0===(this._distance=t))return null;var n=t<0,r=Math.abs(t),i=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var o=i.getCoordinates();return n&&CoordinateArrays.reverse(o),o},OffsetCurveBuilder.prototype.computeSingleSidedBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var i=BufferInputLineSimplifier.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Position.LEFT),n.addFirstSegment();for(var a=o-2;0<=a;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(e,!1);var s=BufferInputLineSimplifier.simplify(e,r),l=s.length-1;n.initSideSegments(s[0],s[1],Position.LEFT),n.addFirstSegment();for(var c=2;c<=l;c++)n.addNextSegment(s[c],!0)}n.addLastSegment(),n.closeRing()},OffsetCurveBuilder.prototype.computeRingBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);t===Position.RIGHT&&(r=-r);var i=BufferInputLineSimplifier.simplify(e,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],t);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},OffsetCurveBuilder.prototype.computeLineBufferCurve=function(e,t){var n=this.simplifyTolerance(this._distance),r=BufferInputLineSimplifier.simplify(e,n),i=r.length-1;t.initSideSegments(r[0],r[1],Position.LEFT);for(var o=2;o<=i;o++)t.addNextSegment(r[o],!0);t.addLastSegment(),t.addLineEndCap(r[i-1],r[i]);var a=BufferInputLineSimplifier.simplify(e,-n),s=a.length-1;t.initSideSegments(a[s],a[s-1],Position.LEFT);for(var l=s-2;0<=l;l--)t.addNextSegment(a[l],!0);t.addLastSegment(),t.addLineEndCap(a[1],a[0]),t.closeRing()},OffsetCurveBuilder.prototype.computePointCurve=function(e,t){switch(this._bufParams.getEndCapStyle()){case BufferParameters.CAP_ROUND:t.createCircle(e);break;case BufferParameters.CAP_SQUARE:t.createSquare(e)}},OffsetCurveBuilder.prototype.getLineCurve=function(e,t){if((this._distance=t)<0&&!this._bufParams.isSingleSided())return null;if(0===t)return null;var n,r=Math.abs(t),i=this.getSegGen(r);return e.length<=1?this.computePointCurve(e[0],i):this._bufParams.isSingleSided()?(n=t<0,this.computeSingleSidedBufferCurve(e,n,i)):this.computeLineBufferCurve(e,i),i.getCoordinates()},OffsetCurveBuilder.prototype.getBufferParameters=function(){return this._bufParams},OffsetCurveBuilder.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()},OffsetCurveBuilder.prototype.getRingCurve=function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(0===n)return OffsetCurveBuilder.copyCoordinates(e);var r=this.getSegGen(n);return this.computeRingBufferCurve(e,t,r),r.getCoordinates()},OffsetCurveBuilder.prototype.computeOffsetCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){var i=BufferInputLineSimplifier.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Position.LEFT),n.addFirstSegment();for(var a=o-2;0<=a;a--)n.addNextSegment(i[a],!0)}else{var s=BufferInputLineSimplifier.simplify(e,r),l=s.length-1;n.initSideSegments(s[0],s[1],Position.LEFT),n.addFirstSegment();for(var c=2;c<=l;c++)n.addNextSegment(s[c],!0)}n.addLastSegment()},OffsetCurveBuilder.prototype.getSegGen=function(e){return new OffsetSegmentGenerator(this._precisionModel,this._bufParams,e)},OffsetCurveBuilder.prototype.interfaces_=function(){return[]},OffsetCurveBuilder.prototype.getClass=function(){return OffsetCurveBuilder},OffsetCurveBuilder.copyCoordinates=function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new Coordinate(e[n]);return t};var SubgraphDepthLocater=function(e){this._subgraphs=null,this._seg=new LineSegment,this._cga=new CGAlgorithms,this._subgraphs=e},staticAccessors$30={DepthSegment:{configurable:!0}};SubgraphDepthLocater.prototype.findStabbedSegments=function(e,t,n){var r=this;if(1===arguments.length){for(var i=e,o=new ArrayList,a=this._subgraphs.iterator();a.hasNext();){var s=a.next(),l=s.getEnvelope();i.y<l.getMinY()||i.y>l.getMaxY()||r.findStabbedSegments(i,s.getDirectedEdges(),o)}return o}if(3===arguments.length)if(hasInterface(n,List)&&e instanceof Coordinate&&t instanceof DirectedEdge)for(var c,u,p=e,d=t,f=n,h=d.getEdge().getCoordinates(),g=0;g<h.length-1;g++){r._seg.p0=h[g],r._seg.p1=h[g+1],r._seg.p0.y>r._seg.p1.y&&r._seg.reverse(),Math.max(r._seg.p0.x,r._seg.p1.x)<p.x||r._seg.isHorizontal()||p.y<r._seg.p0.y||p.y>r._seg.p1.y||CGAlgorithms.computeOrientation(r._seg.p0,r._seg.p1,p)!==CGAlgorithms.RIGHT&&(c=d.getDepth(Position.LEFT),r._seg.p0.equals(h[g])||(c=d.getDepth(Position.RIGHT)),u=new DepthSegment(r._seg,c),f.add(u))}else if(hasInterface(n,List)&&e instanceof Coordinate&&hasInterface(t,List))for(var m=e,y=n,v=t.iterator();v.hasNext();){var _=v.next();_.isForward()&&r.findStabbedSegments(m,_,y)}},SubgraphDepthLocater.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);return 0===t.size()?0:Collections.min(t)._leftDepth},SubgraphDepthLocater.prototype.interfaces_=function(){return[]},SubgraphDepthLocater.prototype.getClass=function(){return SubgraphDepthLocater},staticAccessors$30.DepthSegment.get=function(){return DepthSegment},Object.defineProperties(SubgraphDepthLocater,staticAccessors$30);var DepthSegment=function(e,t){this._upwardSeg=null,this._leftDepth=null;var n=t;this._upwardSeg=new LineSegment(e),this._leftDepth=n};DepthSegment.prototype.compareTo=function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return 0!==n||0!==(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(t._upwardSeg)},DepthSegment.prototype.compareX=function(e,t){var n=e.p0.compareTo(t.p0);return 0!==n?n:e.p1.compareTo(t.p1)},DepthSegment.prototype.toString=function(){return this._upwardSeg.toString()},DepthSegment.prototype.interfaces_=function(){return[Comparable]},DepthSegment.prototype.getClass=function(){return DepthSegment};var Triangle=function(e,t,n){this.p0=e||null,this.p1=t||null,this.p2=n||null};Triangle.prototype.area=function(){return Triangle.area(this.p0,this.p1,this.p2)},Triangle.prototype.signedArea=function(){return Triangle.signedArea(this.p0,this.p1,this.p2)},Triangle.prototype.interpolateZ=function(e){if(null===e)throw new IllegalArgumentException("Supplied point is null.");return Triangle.interpolateZ(e,this.p0,this.p1,this.p2)},Triangle.prototype.longestSideLength=function(){return Triangle.longestSideLength(this.p0,this.p1,this.p2)},Triangle.prototype.isAcute=function(){return Triangle.isAcute(this.p0,this.p1,this.p2)},Triangle.prototype.circumcentre=function(){return Triangle.circumcentre(this.p0,this.p1,this.p2)},Triangle.prototype.area3D=function(){return Triangle.area3D(this.p0,this.p1,this.p2)},Triangle.prototype.centroid=function(){return Triangle.centroid(this.p0,this.p1,this.p2)},Triangle.prototype.inCentre=function(){return Triangle.inCentre(this.p0,this.p1,this.p2)},Triangle.prototype.interfaces_=function(){return[]},Triangle.prototype.getClass=function(){return Triangle},Triangle.area=function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)},Triangle.signedArea=function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2},Triangle.det=function(e,t,n,r){return e*r-t*n},Triangle.interpolateZ=function(e,t,n,r){var i=t.x,o=t.y,a=n.x-i,s=r.x-i,l=n.y-o,c=r.y-o,u=a*c-s*l,p=e.x-i,d=e.y-o,f=(c*p-s*d)/u,h=(-l*p+a*d)/u;return t.z+f*(n.z-t.z)+h*(r.z-t.z)},Triangle.longestSideLength=function(e,t,n){var r=e.distance(t),i=t.distance(n),o=n.distance(e),a=r;return a<i&&(a=i),a<o&&(a=o),a},Triangle.isAcute=function(e,t,n){return!!Angle.isAcute(e,t,n)&&(!!Angle.isAcute(t,n,e)&&!!Angle.isAcute(n,e,t))},Triangle.circumcentre=function(e,t,n){var r=n.x,i=n.y,o=e.x-r,a=e.y-i,s=t.x-r,l=t.y-i,c=2*Triangle.det(o,a,s,l),u=Triangle.det(a,o*o+a*a,l,s*s+l*l),p=Triangle.det(o,o*o+a*a,s,s*s+l*l);return new Coordinate(r-u/c,i+p/c)},Triangle.perpendicularBisector=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=new HCoordinate(e.x+n/2,e.y+r/2,1),o=new HCoordinate(e.x-r+n/2,e.y+n+r/2,1);return new HCoordinate(i,o)},Triangle.angleBisector=function(e,t,n){var r=t.distance(e),i=r/(r+t.distance(n)),o=n.x-e.x,a=n.y-e.y;return new Coordinate(e.x+i*o,e.y+i*a)},Triangle.area3D=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=t.z-e.z,a=n.x-e.x,s=n.y-e.y,l=n.z-e.z,c=i*l-o*s,u=o*a-r*l,p=r*s-i*a,d=c*c+u*u+p*p,f=Math.sqrt(d)/2;return f},Triangle.centroid=function(e,t,n){var r=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3;return new Coordinate(r,i)},Triangle.inCentre=function(e,t,n){var r=t.distance(n),i=e.distance(n),o=e.distance(t),a=r+i+o,s=(r*e.x+i*t.x+o*n.x)/a,l=(r*e.y+i*t.y+o*n.y)/a;return new Coordinate(s,l)};var OffsetCurveSetBuilder=function(e,t,n){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new ArrayList;var r=t,i=n;this._inputGeom=e,this._distance=r,this._curveBuilder=i};OffsetCurveSetBuilder.prototype.addPoint=function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,Location.EXTERIOR,Location.INTERIOR)},OffsetCurveSetBuilder.prototype.addPolygon=function(e){var t=this._distance,n=Position.LEFT;this._distance<0&&(t=-this._distance,n=Position.RIGHT);var r=e.getExteriorRing(),i=CoordinateArrays.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,t,n,Location.EXTERIOR,Location.INTERIOR);for(var o=0;o<e.getNumInteriorRing();o++){var a=e.getInteriorRingN(o),s=CoordinateArrays.removeRepeatedPoints(a.getCoordinates());0<this._distance&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,t,Position.opposite(n),Location.INTERIOR,Location.EXTERIOR)}},OffsetCurveSetBuilder.prototype.isTriangleErodedCompletely=function(e,t){var n=new Triangle(e[0],e[1],e[2]),r=n.inCentre();return CGAlgorithms.distancePointLine(r,n.p0,n.p1)<Math.abs(t)},OffsetCurveSetBuilder.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=CoordinateArrays.removeRepeatedPoints(e.getCoordinates()),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,Location.EXTERIOR,Location.INTERIOR)},OffsetCurveSetBuilder.prototype.addCurve=function(e,t,n){if(null===e||e.length<2)return null;var r=new NodedSegmentString(e,new Label(0,Location.BOUNDARY,t,n));this._curveList.add(r)},OffsetCurveSetBuilder.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},OffsetCurveSetBuilder.prototype.addPolygonRing=function(e,t,n,r,i){if(0===t&&e.length<LinearRing.MINIMUM_VALID_SIZE)return null;var o=r,a=i;e.length>=LinearRing.MINIMUM_VALID_SIZE&&CGAlgorithms.isCCW(e)&&(o=i,a=r,n=Position.opposite(n));var s=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(s,o,a)},OffsetCurveSetBuilder.prototype.add=function(e){if(e.isEmpty())return null;e instanceof Polygon?this.addPolygon(e):e instanceof LineString?this.addLineString(e):e instanceof Point$1?this.addPoint(e):(e instanceof MultiPoint||e instanceof MultiLineString||e instanceof MultiPolygon||e instanceof GeometryCollection)&&this.addCollection(e)},OffsetCurveSetBuilder.prototype.isErodedCompletely=function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(4===n.length)return this.isTriangleErodedCompletely(n,t);var r=e.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return t<0&&2*Math.abs(t)>i},OffsetCurveSetBuilder.prototype.addCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}},OffsetCurveSetBuilder.prototype.interfaces_=function(){return[]},OffsetCurveSetBuilder.prototype.getClass=function(){return OffsetCurveSetBuilder};var PointOnGeometryLocator=function(){};PointOnGeometryLocator.prototype.locate=function(){},PointOnGeometryLocator.prototype.interfaces_=function(){return[]},PointOnGeometryLocator.prototype.getClass=function(){return PointOnGeometryLocator};var GeometryCollectionIterator=function(e){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=e;this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};GeometryCollectionIterator.prototype.next=function(){if(this._atStart)return this._atStart=!1,GeometryCollectionIterator.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new NoSuchElementException;var e=this._parent.getGeometryN(this._index++);return e instanceof GeometryCollection?(this._subcollectionIterator=new GeometryCollectionIterator(e),this._subcollectionIterator.next()):e},GeometryCollectionIterator.prototype.remove=function(){throw new Error(this.getClass().getName())},GeometryCollectionIterator.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},GeometryCollectionIterator.prototype.interfaces_=function(){return[Iterator$1]},GeometryCollectionIterator.prototype.getClass=function(){return GeometryCollectionIterator},GeometryCollectionIterator.isAtomic=function(e){return!(e instanceof GeometryCollection)};var SimplePointInAreaLocator=function(e){this._geom=null;this._geom=e};SimplePointInAreaLocator.prototype.locate=function(e){return SimplePointInAreaLocator.locate(e,this._geom)},SimplePointInAreaLocator.prototype.interfaces_=function(){return[PointOnGeometryLocator]},SimplePointInAreaLocator.prototype.getClass=function(){return SimplePointInAreaLocator},SimplePointInAreaLocator.isPointInRing=function(e,t){return!!t.getEnvelopeInternal().intersects(e)&&CGAlgorithms.isPointInRing(e,t.getCoordinates())},SimplePointInAreaLocator.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var n=t.getExteriorRing();if(!SimplePointInAreaLocator.isPointInRing(e,n))return!1;for(var r=0;r<t.getNumInteriorRing();r++){var i=t.getInteriorRingN(r);if(SimplePointInAreaLocator.isPointInRing(e,i))return!1}return!0},SimplePointInAreaLocator.containsPoint=function(e,t){if(t instanceof Polygon)return SimplePointInAreaLocator.containsPointInPolygon(e,t);if(t instanceof GeometryCollection)for(var n=new GeometryCollectionIterator(t);n.hasNext();){var r=n.next();if(r!==t&&SimplePointInAreaLocator.containsPoint(e,r))return!0}return!1},SimplePointInAreaLocator.locate=function(e,t){return!t.isEmpty()&&SimplePointInAreaLocator.containsPoint(e,t)?Location.INTERIOR:Location.EXTERIOR};var EdgeEndStar=function(){this._edgeMap=new TreeMap,this._edgeList=null,this._ptInAreaLocation=[Location.NONE,Location.NONE]};EdgeEndStar.prototype.getNextCW=function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return 0===t&&(n=this._edgeList.size()-1),this._edgeList.get(n)},EdgeEndStar.prototype.propagateSideLabels=function(e){for(var t=Location.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(e)&&r.getLocation(e,Position.LEFT)!==Location.NONE&&(t=r.getLocation(e,Position.LEFT))}if(t===Location.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(e,Position.ON)===Location.NONE&&s.setLocation(e,Position.ON,i),s.isArea(e)){var l=s.getLocation(e,Position.LEFT),c=s.getLocation(e,Position.RIGHT);if(c!==Location.NONE){if(c!==i)throw new TopologyException("side location conflict",a.getCoordinate());l===Location.NONE&&Assert.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=l}else Assert.isTrue(s.getLocation(e,Position.LEFT)===Location.NONE,"found single null side"),s.setLocation(e,Position.RIGHT,i),s.setLocation(e,Position.LEFT,i)}}},EdgeEndStar.prototype.getCoordinate=function(){var e=this.iterator();return e.hasNext()?e.next().getCoordinate():null},EdgeEndStar.prototype.print=function(e){System.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){t.next().print(e)}},EdgeEndStar.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},EdgeEndStar.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel().getLocation(e,Position.LEFT);Assert.isTrue(r!==Location.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();Assert.isTrue(a.isArea(e),"Found non-area edge");var s=a.getLocation(e,Position.LEFT),l=a.getLocation(e,Position.RIGHT);if(s===l)return!1;if(l!==i)return!1;i=s}return!0},EdgeEndStar.prototype.findIndex=function(e){this.iterator();for(var t=0;t<this._edgeList.size();t++){if(this._edgeList.get(t)===e)return t}return-1},EdgeEndStar.prototype.iterator=function(){return this.getEdges().iterator()},EdgeEndStar.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new ArrayList(this._edgeMap.values())),this._edgeList},EdgeEndStar.prototype.getLocation=function(e,t,n){return this._ptInAreaLocation[e]===Location.NONE&&(this._ptInAreaLocation[e]=SimplePointInAreaLocator.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]},EdgeEndStar.prototype.toString=function(){var e=new StringBuffer;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append("\n");for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append("\n")}return e.toString()},EdgeEndStar.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();){t.next().computeLabel(e)}},EdgeEndStar.prototype.computeLabelling=function(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Location.BOUNDARY&&(t[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a,s,l=o.next(),c=l.getLabel(),u=0;u<2;u++){c.isAnyNull(u)&&(s=Location.NONE,s=t[u]?Location.EXTERIOR:(a=l.getCoordinate(),this.getLocation(u,a,e)),c.setAllLocationsIfNull(u,s))}},EdgeEndStar.prototype.getDegree=function(){return this._edgeMap.size()},EdgeEndStar.prototype.insertEdgeEnd=function(e,t){this._edgeMap.put(e,t),this._edgeList=null},EdgeEndStar.prototype.interfaces_=function(){return[]},EdgeEndStar.prototype.getClass=function(){return EdgeEndStar};var DirectedEdgeStar=(Txg=EdgeEndStar,Txg&&(Uxg.__proto__=Txg),((Uxg.prototype=Object.create(Txg&&Txg.prototype)).constructor=Uxg).prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var e=null,t=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===e&&i.isInResult()&&(e=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;t=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;t.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===e)throw new TopologyException("no outgoing dirEdge found",this.getCoordinate());Assert.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),t.setNext(e)}},Uxg.prototype.insert=function(e){this.insertEdgeEnd(e,e)},Uxg.prototype.getRightmostEdge=function(){var e=this.getEdges(),t=e.size();if(t<1)return null;var n=e.get(0);if(1===t)return n;var r=e.get(t-1),i=n.getQuadrant(),o=r.getQuadrant();return Quadrant.isNorthern(i)&&Quadrant.isNorthern(o)?n:Quadrant.isNorthern(i)||Quadrant.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(Assert.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},Uxg.prototype.print=function(e){System.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();e.print("out "),n.print(e),e.println(),e.print("in "),n.getSym().print(e),e.println()}},Uxg.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new ArrayList;for(var e=this.iterator();e.hasNext();){var t=e.next();(t.isInResult()||t.getSym().isInResult())&&this._resultAreaEdgeList.add(t)}return this._resultAreaEdgeList},Uxg.prototype.updateLabelling=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next().getLabel();n.setAllLocationsIfNull(0,e.getLocation(0)),n.setAllLocationsIfNull(1,e.getLocation(1))}},Uxg.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var e=null,t=null,n=this._edgeList.size()-1;0<=n;n--){var r=this._edgeList.get(n),i=r.getSym();null===t&&(t=i),null!==e&&i.setNext(e),e=r}t.setNext(e)},Uxg.prototype.computeDepths=function(e,t,n){if(1===arguments.length){var r=e,i=this.findIndex(r),o=r.getDepth(Position.LEFT),a=r.getDepth(Position.RIGHT),s=this.computeDepths(i+1,this._edgeList.size(),o);if(this.computeDepths(0,i,s)!==a)throw new TopologyException("depth mismatch at "+r.getCoordinate())}else if(3===arguments.length){for(var l=t,c=n,u=e;u<l;u++){var p=this._edgeList.get(u);p.setEdgeDepths(Position.RIGHT,c),c=p.getDepth(Position.LEFT)}return c}},Uxg.prototype.mergeSymLabels=function(){for(var e=this.iterator();e.hasNext();){var t=e.next();t.getLabel().merge(t.getSym().getLabel())}},Uxg.prototype.linkMinimalDirectedEdges=function(e){for(var t=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;0<=i;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===t&&o.getEdgeRing()===e&&(t=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==e)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==e)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(Assert.isTrue(null!==t,"found null for first outgoing dirEdge"),Assert.isTrue(t.getEdgeRing()===e,"unable to link last incoming dirEdge"),n.setNextMin(t))},Uxg.prototype.getOutgoingDegree=function(e){if(0===arguments.length){for(var t=0,n=this.iterator();n.hasNext();)n.next().isInResult()&&t++;return t}if(1===arguments.length){for(var r=e,i=0,o=this.iterator();o.hasNext();)o.next().getEdgeRing()===r&&i++;return i}},Uxg.prototype.getLabel=function(){return this._label},Uxg.prototype.findCoveredLineEdges=function(){for(var e=Location.NONE,t=this.iterator();t.hasNext();){var n=t.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){e=Location.INTERIOR;break}if(r.isInResult()){e=Location.EXTERIOR;break}}}if(e===Location.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===Location.INTERIOR):(a.isInResult()&&(i=Location.EXTERIOR),s.isInResult()&&(i=Location.INTERIOR))}},Uxg.prototype.computeLabelling=function(e){Txg.prototype.computeLabelling.call(this,e),this._label=new Label(Location.NONE);for(var t=this.iterator();t.hasNext();)for(var n=t.next().getEdge().getLabel(),r=0;r<2;r++){var i=n.getLocation(r);i!==Location.INTERIOR&&i!==Location.BOUNDARY||this._label.setLocation(r,Location.INTERIOR)}},Uxg.prototype.interfaces_=function(){return[]},Uxg.prototype.getClass=function(){return Uxg},Uxg),Txg;function Uxg(){Txg.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}var OverlayNodeFactory=(Hzg=NodeFactory,Hzg&&(Izg.__proto__=Hzg),((Izg.prototype=Object.create(Hzg&&Hzg.prototype)).constructor=Izg).prototype.createNode=function(e){return new Node$1(e,new DirectedEdgeStar)},Izg.prototype.interfaces_=function(){return[]},Izg.prototype.getClass=function(){return Izg},Izg),Hzg;function Izg(){Hzg.apply(this,arguments)}var OrientedCoordinateArray=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};OrientedCoordinateArray.prototype.compareTo=function(e){return OrientedCoordinateArray.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},OrientedCoordinateArray.prototype.interfaces_=function(){return[Comparable]},OrientedCoordinateArray.prototype.getClass=function(){return OrientedCoordinateArray},OrientedCoordinateArray.orientation=function(e){return 1===CoordinateArrays.increasingDirection(e)},OrientedCoordinateArray.compareOriented=function(e,t,n,r){for(var i=t?1:-1,o=r?1:-1,a=t?e.length:-1,s=r?n.length:-1,l=t?0:e.length-1,c=r?0:n.length-1;;){var u=e[l].compareTo(n[c]);if(0!==u)return u;var p=(l+=i)===a,d=(c+=o)===s;if(p&&!d)return-1;if(!p&&d)return 1;if(p&&d)return 0}};var EdgeList=function(){this._edges=new ArrayList,this._ocaMap=new TreeMap};EdgeList.prototype.print=function(e){e.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var n=this._edges.get(t);0<t&&e.print(","),e.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)0<i&&e.print(","),e.print(r[i].x+" "+r[i].y);e.println(")")}e.print(")  ")},EdgeList.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next())},EdgeList.prototype.findEdgeIndex=function(e){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(e))return t;return-1},EdgeList.prototype.iterator=function(){return this._edges.iterator()},EdgeList.prototype.getEdges=function(){return this._edges},EdgeList.prototype.get=function(e){return this._edges.get(e)},EdgeList.prototype.findEqualEdge=function(e){var t=new OrientedCoordinateArray(e.getCoordinates());return this._ocaMap.get(t)},EdgeList.prototype.add=function(e){this._edges.add(e);var t=new OrientedCoordinateArray(e.getCoordinates());this._ocaMap.put(t,e)},EdgeList.prototype.interfaces_=function(){return[]},EdgeList.prototype.getClass=function(){return EdgeList};var SegmentIntersector=function(){};SegmentIntersector.prototype.processIntersections=function(){},SegmentIntersector.prototype.isDone=function(){},SegmentIntersector.prototype.interfaces_=function(){return[]},SegmentIntersector.prototype.getClass=function(){return SegmentIntersector};var IntersectionAdder=function(e){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=e};IntersectionAdder.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&1===this._li.getIntersectionNum()){if(IntersectionAdder.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.size()-1;if(0===t&&r===i||0===r&&t===i)return!0}}return!1},IntersectionAdder.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},IntersectionAdder.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},IntersectionAdder.prototype.getLineIntersector=function(){return this._li},IntersectionAdder.prototype.hasProperIntersection=function(){return this._hasProper},IntersectionAdder.prototype.processIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},IntersectionAdder.prototype.hasIntersection=function(){return this._hasIntersection},IntersectionAdder.prototype.isDone=function(){return!1},IntersectionAdder.prototype.hasInteriorIntersection=function(){return this._hasInterior},IntersectionAdder.prototype.interfaces_=function(){return[SegmentIntersector]},IntersectionAdder.prototype.getClass=function(){return IntersectionAdder},IntersectionAdder.isAdjacentSegments=function(e,t){return 1===Math.abs(e-t)};var EdgeIntersection=function(e,t,n){this.coord=null,this.segmentIndex=null,this.dist=null;var r=t,i=n;this.coord=new Coordinate(e),this.segmentIndex=r,this.dist=i};EdgeIntersection.prototype.getSegmentIndex=function(){return this.segmentIndex},EdgeIntersection.prototype.getCoordinate=function(){return this.coord},EdgeIntersection.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)},EdgeIntersection.prototype.compareTo=function(e){return this.compare(e.segmentIndex,e.dist)},EdgeIntersection.prototype.isEndPoint=function(e){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===e},EdgeIntersection.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},EdgeIntersection.prototype.getDistance=function(){return this.dist},EdgeIntersection.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0},EdgeIntersection.prototype.interfaces_=function(){return[Comparable]},EdgeIntersection.prototype.getClass=function(){return EdgeIntersection};var EdgeIntersectionList=function(e){this._nodeMap=new TreeMap,this.edge=null,this.edge=e};EdgeIntersectionList.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){t.next().print(e)}},EdgeIntersectionList.prototype.iterator=function(){return this._nodeMap.values().iterator()},EdgeIntersectionList.prototype.addSplitEdges=function(e){this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}},EdgeIntersectionList.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)},EdgeIntersectionList.prototype.createSplitEdge=function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this.edge.pts[t.segmentIndex],i=0<t.dist||!t.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new Coordinate(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=t.coord),new Edge(o,new Label(this.edge._label))},EdgeIntersectionList.prototype.add=function(e,t,n){var r=new EdgeIntersection(e,t,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},EdgeIntersectionList.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();){if(t.next().coord.equals(e))return!0}return!1},EdgeIntersectionList.prototype.interfaces_=function(){return[]},EdgeIntersectionList.prototype.getClass=function(){return EdgeIntersectionList};var MonotoneChainIndexer=function(){};MonotoneChainIndexer.prototype.getChainStartIndices=function(e){var t=0,n=new ArrayList;n.add(new Integer(t));do{var r=this.findChainEnd(e,t);n.add(new Integer(r)),t=r}while(t<e.length-1);return MonotoneChainIndexer.toIntArray(n)},MonotoneChainIndexer.prototype.findChainEnd=function(e,t){for(var n=Quadrant.quadrant(e[t],e[t+1]),r=t+1;r<e.length;){if(Quadrant.quadrant(e[r-1],e[r])!==n)break;r++}return r-1},MonotoneChainIndexer.prototype.interfaces_=function(){return[]},MonotoneChainIndexer.prototype.getClass=function(){return MonotoneChainIndexer},MonotoneChainIndexer.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var MonotoneChainEdge=function(e){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Envelope,this.env2=new Envelope;var t=e;this.e=t,this.pts=t.getCoordinates();var n=new MonotoneChainIndexer;this.startIndex=n.getChainStartIndices(this.pts)};MonotoneChainEdge.prototype.getCoordinates=function(){return this.pts},MonotoneChainEdge.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return n<t?t:n},MonotoneChainEdge.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n},MonotoneChainEdge.prototype.computeIntersectsForChain=function(e,t,n,r,i,o){if(4===arguments.length)this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],r);else if(6===arguments.length){var a=e,s=t,l=n,c=r,u=i,p=o,d=this.pts[a],f=this.pts[s],h=l.pts[c],g=l.pts[u];if(s-a==1&&u-c==1)return p.addIntersections(this.e,a,l.e,c),null;if(this.env1.init(d,f),this.env2.init(h,g),!this.env1.intersects(this.env2))return null;var m=Math.trunc((a+s)/2),y=Math.trunc((c+u)/2);a<m&&(c<y&&this.computeIntersectsForChain(a,m,l,c,y,p),y<u&&this.computeIntersectsForChain(a,m,l,y,u,p)),m<s&&(c<y&&this.computeIntersectsForChain(m,s,l,c,y,p),y<u&&this.computeIntersectsForChain(m,s,l,y,u,p))}},MonotoneChainEdge.prototype.getStartIndexes=function(){return this.startIndex},MonotoneChainEdge.prototype.computeIntersects=function(e,t){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<e.startIndex.length-1;r++)this.computeIntersectsForChain(n,e,r,t)},MonotoneChainEdge.prototype.interfaces_=function(){return[]},MonotoneChainEdge.prototype.getClass=function(){return MonotoneChainEdge};var Depth=function e(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var n=0;n<3;n++)this._depth[t][n]=e.NULL_VALUE},staticAccessors$31={NULL_VALUE:{configurable:!0}};Depth.prototype.getDepth=function(e,t){return this._depth[e][t]},Depth.prototype.setDepth=function(e,t,n){this._depth[e][t]=n},Depth.prototype.isNull=function(e,t){if(0!==arguments.length)return 1===arguments.length?this._depth[e][1]===Depth.NULL_VALUE:2===arguments.length?this._depth[e][t]===Depth.NULL_VALUE:void 0;for(var n=0;n<2;n++)for(var r=0;r<3;r++)if(this._depth[n][r]!==Depth.NULL_VALUE)return!1;return!0},Depth.prototype.normalize=function(){for(var e=0;e<2;e++)if(!this.isNull(e)){var t=this._depth[e][1];this._depth[e][2]<t&&(t=this._depth[e][2]),t<0&&(t=0);for(var n=1;n<3;n++){var r=0;this._depth[e][n]>t&&(r=1),this._depth[e][n]=r}}},Depth.prototype.getDelta=function(e){return this._depth[e][Position.RIGHT]-this._depth[e][Position.LEFT]},Depth.prototype.getLocation=function(e,t){return this._depth[e][t]<=0?Location.EXTERIOR:Location.INTERIOR},Depth.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Depth.prototype.add=function(e,t,n){if(1===arguments.length)for(var r=e,i=0;i<2;i++)for(var o=1;o<3;o++){var a=r.getLocation(i,o);a!==Location.EXTERIOR&&a!==Location.INTERIOR||(this.isNull(i,o)?this._depth[i][o]=Depth.depthAtLocation(a):this._depth[i][o]+=Depth.depthAtLocation(a))}else 3===arguments.length&&n===Location.INTERIOR&&this._depth[e][t]++},Depth.prototype.interfaces_=function(){return[]},Depth.prototype.getClass=function(){return Depth},Depth.depthAtLocation=function(e){return e===Location.EXTERIOR?0:e===Location.INTERIOR?1:Depth.NULL_VALUE},staticAccessors$31.NULL_VALUE.get=function(){return-1},Object.defineProperties(Depth,staticAccessors$31);var Edge=(tEg=GraphComponent,tEg&&(uEg.__proto__=tEg),uEg.prototype=Object.create(tEg&&tEg.prototype),(uEg.prototype.constructor=uEg).prototype.getDepth=function(){return this._depth},uEg.prototype.getCollapsedEdge=function(){var e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new uEg(e,Label.toLineLabel(this._label))},uEg.prototype.isIsolated=function(){return this._isIsolated},uEg.prototype.getCoordinates=function(){return this.pts},uEg.prototype.setIsolated=function(e){this._isIsolated=e},uEg.prototype.setName=function(e){this._name=e},uEg.prototype.equals=function(e){if(!(e instanceof uEg))return!1;var t=e;if(this.pts.length!==t.pts.length)return!1;for(var n=!0,r=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(t.pts[o])||(n=!1),this.pts[o].equals2D(t.pts[--i])||(r=!1),!n&&!r)return!1;return!0},uEg.prototype.getCoordinate=function(e){return 0===arguments.length?0<this.pts.length?this.pts[0]:null:1===arguments.length?this.pts[e]:void 0},uEg.prototype.print=function(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var t=0;t<this.pts.length;t++)0<t&&e.print(","),e.print(this.pts[t].x+" "+this.pts[t].y);e.print(")  "+this._label+" "+this._depthDelta)},uEg.prototype.computeIM=function(e){uEg.updateIM(this._label,e)},uEg.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},uEg.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},uEg.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},uEg.prototype.getDepthDelta=function(){return this._depthDelta},uEg.prototype.getNumPoints=function(){return this.pts.length},uEg.prototype.printReverse=function(e){e.print("edge "+this._name+": ");for(var t=this.pts.length-1;0<=t;t--)e.print(this.pts[t]+" ");e.println("")},uEg.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new MonotoneChainEdge(this)),this._mce},uEg.prototype.getEnvelope=function(){if(null===this._env){this._env=new Envelope;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env},uEg.prototype.addIntersection=function(e,t,n,r){var i,o=new Coordinate(e.getIntersection(r)),a=t,s=e.getEdgeDistance(n,r),l=a+1;l<this.pts.length&&(i=this.pts[l],o.equals2D(i)&&(a=l,s=0)),this.eiList.add(o,a,s)},uEg.prototype.toString=function(){var e=new StringBuffer;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var t=0;t<this.pts.length;t++)0<t&&e.append(","),e.append(this.pts[t].x+" "+this.pts[t].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()},uEg.prototype.isPointwiseEqual=function(e){if(this.pts.length!==e.pts.length)return!1;for(var t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(e.pts[t]))return!1;return!0},uEg.prototype.setDepthDelta=function(e){this._depthDelta=e},uEg.prototype.getEdgeIntersectionList=function(){return this.eiList},uEg.prototype.addIntersections=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)},uEg.prototype.interfaces_=function(){return[]},uEg.prototype.getClass=function(){return uEg},uEg.updateIM=function(e,t){if(2!==arguments.length)return tEg.prototype.updateIM.apply(this,arguments);var n=e,r=t;r.setAtLeastIfValid(n.getLocation(0,Position.ON),n.getLocation(1,Position.ON),1),n.isArea()&&(r.setAtLeastIfValid(n.getLocation(0,Position.LEFT),n.getLocation(1,Position.LEFT),2),r.setAtLeastIfValid(n.getLocation(0,Position.RIGHT),n.getLocation(1,Position.RIGHT),2))},uEg),tEg;function uEg(){var e,t,n;tEg.call(this),this.pts=null,this._env=null,this.eiList=new EdgeIntersectionList(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Depth,this._depthDelta=0,1===arguments.length?(e=arguments[0],uEg.call(this,e,null)):2===arguments.length&&(t=arguments[0],n=arguments[1],this.pts=t,this._label=n)}var BufferBuilder=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new EdgeList,this._bufParams=e||null};BufferBuilder.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e},BufferBuilder.prototype.insertUniqueEdge=function(e){var t,n,r,i,o=this._edgeList.findEqualEdge(e);null!==o?(t=o.getLabel(),n=e.getLabel(),o.isPointwiseEqual(e)||(n=new Label(e.getLabel())).flip(),t.merge(n),r=BufferBuilder.depthDelta(n),i=o.getDepthDelta()+r,o.setDepthDelta(i)):(this._edgeList.add(e),e.setDepthDelta(BufferBuilder.depthDelta(e.getLabel())))},BufferBuilder.prototype.buildSubgraphs=function(e,t){for(var n=new ArrayList,r=e.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new SubgraphDepthLocater(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),t.add(i.getDirectedEdges(),i.getNodes())}},BufferBuilder.prototype.createSubgraphs=function(e){for(var t=new ArrayList,n=e.getNodes().iterator();n.hasNext();){var r,i=n.next();i.isVisited()||((r=new BufferSubgraph).create(i),t.add(r))}return Collections.sort(t,Collections.reverseOrder()),t},BufferBuilder.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},BufferBuilder.prototype.getNoder=function(e){if(null!==this._workingNoder)return this._workingNoder;var t=new MCIndexNoder,n=new RobustLineIntersector;return n.setPrecisionModel(e),t.setSegmentIntersector(new IntersectionAdder(n)),t},BufferBuilder.prototype.buffer=function(e,t){var n=this._workingPrecisionModel;null===n&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var r=new OffsetCurveBuilder(n,this._bufParams),i=new OffsetCurveSetBuilder(e,t,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new PlanarGraph(new OverlayNodeFactory),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new PolygonBuilder(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},BufferBuilder.prototype.computeNodedEdges=function(e,t){var n=this.getNoder(t);n.computeNodes(e);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i,o,a=r.next(),s=a.getCoordinates();2===s.length&&s[0].equals2D(s[1])||(i=a.getData(),o=new Edge(a.getCoordinates(),new Label(i)),this.insertUniqueEdge(o))}},BufferBuilder.prototype.setNoder=function(e){this._workingNoder=e},BufferBuilder.prototype.interfaces_=function(){return[]},BufferBuilder.prototype.getClass=function(){return BufferBuilder},BufferBuilder.depthDelta=function(e){var t=e.getLocation(0,Position.LEFT),n=e.getLocation(0,Position.RIGHT);return t===Location.INTERIOR&&n===Location.EXTERIOR?1:t===Location.EXTERIOR&&n===Location.INTERIOR?-1:0},BufferBuilder.convertSegStrings=function(e){for(var t=new GeometryFactory,n=new ArrayList;e.hasNext();){var r=e.next(),i=t.createLineString(r.getCoordinates());n.add(i)}return t.buildGeometry(n)};var ScaledNoder=function(e,t,n,r){var i,o,a,s;this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length?(i=t,this._noder=e,this._scaleFactor=i,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()):4===arguments.length&&(o=t,a=n,s=r,this._noder=e,this._scaleFactor=o,this._offsetX=a,this._offsetY=s,this._isScaled=!this.isIntegerPrecision())};ScaledNoder.prototype.rescale=function(e){if(hasInterface(e,Collection))for(var t=e.iterator();t.hasNext();){var n=t.next();this.rescale(n.getCoordinates())}else if(e instanceof Array){for(var r=e,i=0;i<r.length;i++)r[i].x=r[i].x/this._scaleFactor+this._offsetX,r[i].y=r[i].y/this._scaleFactor+this._offsetY;2===r.length&&r[0].equals2D(r[1])&&System.out.println(r)}},ScaledNoder.prototype.scale=function(e){if(hasInterface(e,Collection)){for(var t=e,n=new ArrayList,r=t.iterator();r.hasNext();){var i=r.next();n.add(new NodedSegmentString(this.scale(i.getCoordinates()),i.getData()))}return n}if(e instanceof Array){for(var o=e,a=new Array(o.length).fill(null),s=0;s<o.length;s++)a[s]=new Coordinate(Math.round((o[s].x-this._offsetX)*this._scaleFactor),Math.round((o[s].y-this._offsetY)*this._scaleFactor),o[s].z);return CoordinateArrays.removeRepeatedPoints(a)}},ScaledNoder.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ScaledNoder.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e},ScaledNoder.prototype.computeNodes=function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)},ScaledNoder.prototype.interfaces_=function(){return[Noder]},ScaledNoder.prototype.getClass=function(){return ScaledNoder};var NodingValidator=function(e){this._li=new RobustLineIntersector,this._segStrings=null,this._segStrings=e},staticAccessors$33={fact:{configurable:!0}};NodingValidator.prototype.checkEndPtVertexIntersections=function(e,t){if(0===arguments.length)for(var n=this._segStrings.iterator();n.hasNext();){var r=n.next().getCoordinates();this.checkEndPtVertexIntersections(r[0],this._segStrings),this.checkEndPtVertexIntersections(r[r.length-1],this._segStrings)}else if(2===arguments.length)for(var i=e,o=t.iterator();o.hasNext();)for(var a=o.next().getCoordinates(),s=1;s<a.length-1;s++)if(a[s].equals(i))throw new RuntimeException("found endpt/interior pt intersection at index "+s+" :pt "+i)},NodingValidator.prototype.checkInteriorIntersections=function(e,t,n,r){if(0===arguments.length)for(var i=this._segStrings.iterator();i.hasNext();)for(var o=i.next(),a=this._segStrings.iterator();a.hasNext();){var s=a.next();this.checkInteriorIntersections(o,s)}else if(2===arguments.length)for(var l=e,c=t,u=l.getCoordinates(),p=c.getCoordinates(),d=0;d<u.length-1;d++)for(var f=0;f<p.length-1;f++)this.checkInteriorIntersections(l,d,c,f);else if(4===arguments.length){var h=e,g=t,m=n,y=r;if(h===m&&g===y)return null;var v=h.getCoordinates()[g],_=h.getCoordinates()[g+1],b=m.getCoordinates()[y],w=m.getCoordinates()[y+1];if(this._li.computeIntersection(v,_,b,w),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,v,_)||this.hasInteriorIntersection(this._li,b,w)))throw new RuntimeException("found non-noded intersection at "+v+"-"+_+" and "+b+"-"+w)}},NodingValidator.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},NodingValidator.prototype.checkCollapses=function(e){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next();this.checkCollapses(n)}else if(1===arguments.length)for(var r=e.getCoordinates(),i=0;i<r.length-2;i++)this.checkCollapse(r[i],r[i+1],r[i+2])},NodingValidator.prototype.hasInteriorIntersection=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var i=e.getIntersection(r);if(!i.equals(t)&&!i.equals(n))return!0}return!1},NodingValidator.prototype.checkCollapse=function(e,t,n){if(e.equals(n))throw new RuntimeException("found non-noded collapse at "+NodingValidator.fact.createLineString([e,t,n]))},NodingValidator.prototype.interfaces_=function(){return[]},NodingValidator.prototype.getClass=function(){return NodingValidator},staticAccessors$33.fact.get=function(){return new GeometryFactory},Object.defineProperties(NodingValidator,staticAccessors$33);var HotPixel=function(e,t,n){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var r=e,i=t,o=n;if(this._originalPt=r,this._pt=r,this._scaleFactor=i,this._li=o,i<=0)throw new IllegalArgumentException("Scale factor must be non-zero");1!==i&&(this._pt=new Coordinate(this.scale(r.x),this.scale(r.y)),this._p0Scaled=new Coordinate,this._p1Scaled=new Coordinate),this.initCorners(this._pt)},staticAccessors$34={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};HotPixel.prototype.intersectsScaled=function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.y,t.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(e,t);return Assert.isTrue(!(a&&s),"Found bad envelope test"),s},HotPixel.prototype.initCorners=function(e){this._minx=e.x-.5,this._maxx=e.x+.5,this._miny=e.y-.5,this._maxy=e.y+.5,this._corner[0]=new Coordinate(this._maxx,this._maxy),this._corner[1]=new Coordinate(this._minx,this._maxy),this._corner[2]=new Coordinate(this._minx,this._miny),this._corner[3]=new Coordinate(this._maxx,this._miny)},HotPixel.prototype.intersects=function(e,t){return 1===this._scaleFactor?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},HotPixel.prototype.scale=function(e){return Math.round(e*this._scaleFactor)},HotPixel.prototype.getCoordinate=function(){return this._originalPt},HotPixel.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)},HotPixel.prototype.getSafeEnvelope=function(){var e;return null===this._safeEnv&&(e=HotPixel.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor,this._safeEnv=new Envelope(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)),this._safeEnv},HotPixel.prototype.intersectsPixelClosure=function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},HotPixel.prototype.intersectsToleranceSquare=function(e,t){var n=!1,r=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),!!this._li.isProper()||(!(!n||!r)||(!!e.equals(this._pt)||!!t.equals(this._pt))))))},HotPixel.prototype.addSnappedNode=function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return!!this.intersects(n,r)&&(e.addIntersection(this.getCoordinate(),t),!0)},HotPixel.prototype.interfaces_=function(){return[]},HotPixel.prototype.getClass=function(){return HotPixel},staticAccessors$34.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(HotPixel,staticAccessors$34);var MonotoneChainSelectAction=function(){this.tempEnv1=new Envelope,this.selectedSegment=new LineSegment};MonotoneChainSelectAction.prototype.select=function(e,t){1===arguments.length||2===arguments.length&&(e.getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment))},MonotoneChainSelectAction.prototype.interfaces_=function(){return[]},MonotoneChainSelectAction.prototype.getClass=function(){return MonotoneChainSelectAction};var MCIndexPointSnapper=function(e){this._index=null;this._index=e},staticAccessors$35={HotPixelSnapAction:{configurable:!0}};MCIndexPointSnapper.prototype.snap=function(e,t,n){if(1===arguments.length)return this.snap(e,null,-1);if(3===arguments.length){var r=e,i=t,o=n,a=r.getSafeEnvelope(),s=new HotPixelSnapAction(r,i,o);return this._index.query(a,{interfaces_:function(){return[ItemVisitor]},visitItem:function(e){e.select(a,s)}}),s.isNodeAdded()}},MCIndexPointSnapper.prototype.interfaces_=function(){return[]},MCIndexPointSnapper.prototype.getClass=function(){return MCIndexPointSnapper},staticAccessors$35.HotPixelSnapAction.get=function(){return HotPixelSnapAction},Object.defineProperties(MCIndexPointSnapper,staticAccessors$35);var HotPixelSnapAction=(OJg=MonotoneChainSelectAction,OJg&&(PJg.__proto__=OJg),((PJg.prototype=Object.create(OJg&&OJg.prototype)).constructor=PJg).prototype.isNodeAdded=function(){return this._isNodeAdded},PJg.prototype.select=function(e,t){if(2!==arguments.length)return OJg.prototype.select.apply(this,arguments);var n=t,r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},PJg.prototype.interfaces_=function(){return[]},PJg.prototype.getClass=function(){return PJg},PJg),OJg;function PJg(){OJg.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._hotPixel=e,this._parentEdge=t,this._hotPixelVertexIndex=n}var InteriorIntersectionFinderAdder=function(e){this._li=null,this._interiorIntersections=null,this._li=e,this._interiorIntersections=new ArrayList};InteriorIntersectionFinderAdder.prototype.processIntersections=function(e,t,n,r){if(e===n&&t===r)return null;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)}},InteriorIntersectionFinderAdder.prototype.isDone=function(){return!1},InteriorIntersectionFinderAdder.prototype.getInteriorIntersections=function(){return this._interiorIntersections},InteriorIntersectionFinderAdder.prototype.interfaces_=function(){return[SegmentIntersector]},InteriorIntersectionFinderAdder.prototype.getClass=function(){return InteriorIntersectionFinderAdder};var MCIndexSnapRounder=function(e){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=e;this._pm=t,this._li=new RobustLineIntersector,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};MCIndexSnapRounder.prototype.checkCorrectness=function(e){var t=NodedSegmentString.getNodedSubstrings(e),n=new NodingValidator(t);try{n.checkValid()}catch(e){if(!(e instanceof Exception))throw e;e.printStackTrace()}},MCIndexSnapRounder.prototype.getNodedSubstrings=function(){return NodedSegmentString.getNodedSubstrings(this._nodedSegStrings)},MCIndexSnapRounder.prototype.snapRound=function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)},MCIndexSnapRounder.prototype.findInteriorIntersections=function(e,t){var n=new InteriorIntersectionFinderAdder(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()},MCIndexSnapRounder.prototype.computeVertexSnaps=function(e){if(hasInterface(e,Collection))for(var t=e.iterator();t.hasNext();){var n=t.next();this.computeVertexSnaps(n)}else if(e instanceof NodedSegmentString)for(var r=e,i=r.getCoordinates(),o=0;o<i.length;o++){var a=new HotPixel(i[o],this._scaleFactor,this._li);this._pointSnapper.snap(a,r,o)&&r.addIntersection(i[o],o)}},MCIndexSnapRounder.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new MCIndexNoder,this._pointSnapper=new MCIndexPointSnapper(this._noder.getIndex()),this.snapRound(e,this._li)},MCIndexSnapRounder.prototype.computeIntersectionSnaps=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=new HotPixel(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},MCIndexSnapRounder.prototype.interfaces_=function(){return[Noder]},MCIndexSnapRounder.prototype.getClass=function(){return MCIndexSnapRounder};var BufferOp=function(e,t){var n;this._argGeom=null,this._distance=null,this._bufParams=new BufferParameters,this._resultGeometry=null,this._saveException=null,1===arguments.length?this._argGeom=e:2===arguments.length&&(n=t,this._argGeom=e,this._bufParams=n)},staticAccessors$32={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};BufferOp.prototype.bufferFixedPrecision=function(e){var t=new ScaledNoder(new MCIndexSnapRounder(new PrecisionModel(1)),e.getScale()),n=new BufferBuilder(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)},BufferOp.prototype.bufferReducedPrecision=function(e){var t,n;if(0===arguments.length){for(var r=BufferOp.MAX_PRECISION_DIGITS;0<=r;r--){try{this.bufferReducedPrecision(r)}catch(e){if(!(e instanceof TopologyException))throw e;this._saveException=e}if(null!==this._resultGeometry)return null}throw this._saveException}1===arguments.length&&(t=BufferOp.precisionScaleFactor(this._argGeom,this._distance,e),n=new PrecisionModel(t),this.bufferFixedPrecision(n))},BufferOp.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===PrecisionModel.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()},BufferOp.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)},BufferOp.prototype.bufferOriginalPrecision=function(){try{var e=new BufferBuilder(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof RuntimeException))throw e;this._saveException=e}},BufferOp.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry},BufferOp.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)},BufferOp.prototype.interfaces_=function(){return[]},BufferOp.prototype.getClass=function(){return BufferOp},BufferOp.bufferOp=function(e,t,n,r){if(2===arguments.length){var i=t;return new BufferOp(e).getResultGeometry(i)}if(3===arguments.length){if(Number.isInteger(n)&&e instanceof Geometry&&"number"==typeof t){var o=t,a=n,s=new BufferOp(e);return s.setQuadrantSegments(a),s.getResultGeometry(o)}if(n instanceof BufferParameters&&e instanceof Geometry&&"number"==typeof t){var l=t;return new BufferOp(e,n).getResultGeometry(l)}}else if(4===arguments.length){var c=t,u=n,p=r,d=new BufferOp(e);return d.setQuadrantSegments(u),d.setEndCapStyle(p),d.getResultGeometry(c)}},BufferOp.precisionScaleFactor=function(e,t,n){var r=e.getEnvelopeInternal(),i=MathUtil.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(0<t?t:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},staticAccessors$32.CAP_ROUND.get=function(){return BufferParameters.CAP_ROUND},staticAccessors$32.CAP_BUTT.get=function(){return BufferParameters.CAP_FLAT},staticAccessors$32.CAP_FLAT.get=function(){return BufferParameters.CAP_FLAT},staticAccessors$32.CAP_SQUARE.get=function(){return BufferParameters.CAP_SQUARE},staticAccessors$32.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(BufferOp,staticAccessors$32);var PointPairDistance=function(){this._pt=[new Coordinate,new Coordinate],this._distance=Double.NaN,this._isNull=!0};PointPairDistance.prototype.getCoordinates=function(){return this._pt},PointPairDistance.prototype.getCoordinate=function(e){return this._pt[e]},PointPairDistance.prototype.setMinimum=function(e,t){if(1===arguments.length)this.setMinimum(e._pt[0],e._pt[1]);else if(2===arguments.length){var n=e,r=t;if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i<this._distance&&this.initialize(n,r,i)}},PointPairDistance.prototype.initialize=function(e,t,n){var r,i,o,a;0===arguments.length?this._isNull=!0:2===arguments.length?(r=e,i=t,this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(i),this._distance=r.distance(i),this._isNull=!1):3===arguments.length&&(o=t,a=n,this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(o),this._distance=a,this._isNull=!1)},PointPairDistance.prototype.getDistance=function(){return this._distance},PointPairDistance.prototype.setMaximum=function(e,t){if(1===arguments.length)this.setMaximum(e._pt[0],e._pt[1]);else if(2===arguments.length){var n=e,r=t;if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i>this._distance&&this.initialize(n,r,i)}},PointPairDistance.prototype.interfaces_=function(){return[]},PointPairDistance.prototype.getClass=function(){return PointPairDistance};var DistanceToPointFinder=function(){};DistanceToPointFinder.prototype.interfaces_=function(){return[]},DistanceToPointFinder.prototype.getClass=function(){return DistanceToPointFinder},DistanceToPointFinder.computeDistance=function(e,t,n){if(n instanceof PointPairDistance&&e instanceof LineString&&t instanceof Coordinate)for(var r=t,i=n,o=e.getCoordinates(),a=new LineSegment,s=0;s<o.length-1;s++){a.setCoordinates(o[s],o[s+1]);var l=a.closestPoint(r);i.setMinimum(l,r)}else if(n instanceof PointPairDistance&&e instanceof Polygon&&t instanceof Coordinate){var c=e,u=t,p=n;DistanceToPointFinder.computeDistance(c.getExteriorRing(),u,p);for(var d=0;d<c.getNumInteriorRing();d++)DistanceToPointFinder.computeDistance(c.getInteriorRingN(d),u,p)}else if(n instanceof PointPairDistance&&e instanceof Geometry&&t instanceof Coordinate){var f=e,h=t,g=n;if(f instanceof LineString)DistanceToPointFinder.computeDistance(f,h,g);else if(f instanceof Polygon)DistanceToPointFinder.computeDistance(f,h,g);else if(f instanceof GeometryCollection)for(var m=f,y=0;y<m.getNumGeometries();y++){var v=m.getGeometryN(y);DistanceToPointFinder.computeDistance(v,h,g)}else g.setMinimum(f.getCoordinate(),h)}else{var _,b,w;n instanceof PointPairDistance&&e instanceof LineSegment&&t instanceof Coordinate&&(_=t,b=n,w=e.closestPoint(_),b.setMinimum(w,_))}};var BufferCurveMaximumDistanceFinder=function(e){this._maxPtDist=new PointPairDistance,this._inputGeom=e||null},staticAccessors$36={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};BufferCurveMaximumDistanceFinder.prototype.computeMaxMidpointDistance=function(e){var t=new MaxMidpointDistanceFilter(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())},BufferCurveMaximumDistanceFinder.prototype.computeMaxVertexDistance=function(e){var t=new MaxPointDistanceFilter(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())},BufferCurveMaximumDistanceFinder.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()},BufferCurveMaximumDistanceFinder.prototype.getDistancePoints=function(){return this._maxPtDist},BufferCurveMaximumDistanceFinder.prototype.interfaces_=function(){return[]},BufferCurveMaximumDistanceFinder.prototype.getClass=function(){return BufferCurveMaximumDistanceFinder},staticAccessors$36.MaxPointDistanceFilter.get=function(){return MaxPointDistanceFilter},staticAccessors$36.MaxMidpointDistanceFilter.get=function(){return MaxMidpointDistanceFilter},Object.defineProperties(BufferCurveMaximumDistanceFinder,staticAccessors$36);var MaxPointDistanceFilter=function(e){this._maxPtDist=new PointPairDistance,this._minPtDist=new PointPairDistance,this._geom=e||null};MaxPointDistanceFilter.prototype.filter=function(e){this._minPtDist.initialize(),DistanceToPointFinder.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},MaxPointDistanceFilter.prototype.getMaxPointDistance=function(){return this._maxPtDist},MaxPointDistanceFilter.prototype.interfaces_=function(){return[CoordinateFilter]},MaxPointDistanceFilter.prototype.getClass=function(){return MaxPointDistanceFilter};var MaxMidpointDistanceFilter=function(e){this._maxPtDist=new PointPairDistance,this._minPtDist=new PointPairDistance,this._geom=e||null};MaxMidpointDistanceFilter.prototype.filter=function(e,t){if(0===t)return null;var n=e.getCoordinate(t-1),r=e.getCoordinate(t),i=new Coordinate((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),DistanceToPointFinder.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},MaxMidpointDistanceFilter.prototype.isDone=function(){return!1},MaxMidpointDistanceFilter.prototype.isGeometryChanged=function(){return!1},MaxMidpointDistanceFilter.prototype.getMaxPointDistance=function(){return this._maxPtDist},MaxMidpointDistanceFilter.prototype.interfaces_=function(){return[CoordinateSequenceFilter]},MaxMidpointDistanceFilter.prototype.getClass=function(){return MaxMidpointDistanceFilter};var PolygonExtracter=function(e){this._comps=e||null};PolygonExtracter.prototype.filter=function(e){e instanceof Polygon&&this._comps.add(e)},PolygonExtracter.prototype.interfaces_=function(){return[GeometryFilter]},PolygonExtracter.prototype.getClass=function(){return PolygonExtracter},PolygonExtracter.getPolygons=function(e,t){if(1===arguments.length)return PolygonExtracter.getPolygons(e,new ArrayList);if(2===arguments.length){var n=e,r=t;return n instanceof Polygon?r.add(n):n instanceof GeometryCollection&&n.apply(new PolygonExtracter(r)),r}};var LinearComponentExtracter=function(e,t){var n;this._lines=null,this._isForcedToLineString=!1,1===arguments.length?this._lines=e:2===arguments.length&&(n=t,this._lines=e,this._isForcedToLineString=n)};LinearComponentExtracter.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof LinearRing){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof LineString&&this._lines.add(e)},LinearComponentExtracter.prototype.setForceToLineString=function(e){this._isForcedToLineString=e},LinearComponentExtracter.prototype.interfaces_=function(){return[GeometryComponentFilter]},LinearComponentExtracter.prototype.getClass=function(){return LinearComponentExtracter},LinearComponentExtracter.getGeometry=function(e,t){if(1===arguments.length){var n=e;return n.getFactory().buildGeometry(LinearComponentExtracter.getLines(n))}if(2===arguments.length){var r=e,i=t;return r.getFactory().buildGeometry(LinearComponentExtracter.getLines(r,i))}},LinearComponentExtracter.getLines=function(e,t,n){if(1===arguments.length)return LinearComponentExtracter.getLines(e,!1);if(2===arguments.length){if(hasInterface(e,Collection)&&hasInterface(t,Collection)){for(var r=t,i=e.iterator();i.hasNext();){var o=i.next();LinearComponentExtracter.getLines(o,r)}return r}if(e instanceof Geometry&&"boolean"==typeof t){var a=e,s=t,l=new ArrayList;return a.apply(new LinearComponentExtracter(l,s)),l}if(e instanceof Geometry&&hasInterface(t,Collection)){var c=e,u=t;return c instanceof LineString?u.add(c):c.apply(new LinearComponentExtracter(u)),u}}else if(3===arguments.length){if("boolean"==typeof n&&hasInterface(e,Collection)&&hasInterface(t,Collection)){for(var p=t,d=n,f=e.iterator();f.hasNext();){var h=f.next();LinearComponentExtracter.getLines(h,p,d)}return p}if("boolean"==typeof n&&e instanceof Geometry&&hasInterface(t,Collection)){var g=t;return e.apply(new LinearComponentExtracter(g,n)),g}}};var PointLocator=function(e){if(this._boundaryRule=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var t=e;if(null===t)throw new IllegalArgumentException("Rule must be non-null");this._boundaryRule=t}};PointLocator.prototype.locateInternal=function(e,t){if(e instanceof Coordinate&&t instanceof Polygon){var n=e,r=t;if(r.isEmpty())return Location.EXTERIOR;var i=r.getExteriorRing(),o=this.locateInPolygonRing(n,i);if(o===Location.EXTERIOR)return Location.EXTERIOR;if(o===Location.BOUNDARY)return Location.BOUNDARY;for(var a=0;a<r.getNumInteriorRing();a++){var s=r.getInteriorRingN(a),l=this.locateInPolygonRing(n,s);if(l===Location.INTERIOR)return Location.EXTERIOR;if(l===Location.BOUNDARY)return Location.BOUNDARY}return Location.INTERIOR}if(e instanceof Coordinate&&t instanceof LineString){var c=e,u=t;if(!u.getEnvelopeInternal().intersects(c))return Location.EXTERIOR;var p=u.getCoordinates();return u.isClosed()||!c.equals(p[0])&&!c.equals(p[p.length-1])?CGAlgorithms.isOnLine(c,p)?Location.INTERIOR:Location.EXTERIOR:Location.BOUNDARY}if(e instanceof Coordinate&&t instanceof Point$1){var d=e;return t.getCoordinate().equals2D(d)?Location.INTERIOR:Location.EXTERIOR}},PointLocator.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?CGAlgorithms.locatePointInRing(e,t.getCoordinates()):Location.EXTERIOR},PointLocator.prototype.intersects=function(e,t){return this.locate(e,t)!==Location.EXTERIOR},PointLocator.prototype.updateLocationInfo=function(e){e===Location.INTERIOR&&(this._isIn=!0),e===Location.BOUNDARY&&this._numBoundaries++},PointLocator.prototype.computeLocation=function(e,t){if(t instanceof Point$1&&this.updateLocationInfo(this.locateInternal(e,t)),t instanceof LineString)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Polygon)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof MultiLineString)for(var n=t,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(e,i))}else if(t instanceof MultiPolygon)for(var o=t,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(e,s))}else if(t instanceof GeometryCollection)for(var l=new GeometryCollectionIterator(t);l.hasNext();){var c=l.next();c!==t&&this.computeLocation(e,c)}},PointLocator.prototype.locate=function(e,t){return t.isEmpty()?Location.EXTERIOR:t instanceof LineString||t instanceof Polygon?this.locateInternal(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?Location.BOUNDARY:0<this._numBoundaries||this._isIn?Location.INTERIOR:Location.EXTERIOR)},PointLocator.prototype.interfaces_=function(){return[]},PointLocator.prototype.getClass=function(){return PointLocator};var GeometryLocation=function e(){var t,n,r;this._component=null,this._segIndex=null,this._pt=null,2===arguments.length?e.call(this,arguments[0],e.INSIDE_AREA,arguments[1]):3===arguments.length&&(t=arguments[0],n=arguments[1],r=arguments[2],this._component=t,this._segIndex=n,this._pt=r)},staticAccessors$38={INSIDE_AREA:{configurable:!0}};GeometryLocation.prototype.isInsideArea=function(){return this._segIndex===GeometryLocation.INSIDE_AREA},GeometryLocation.prototype.getCoordinate=function(){return this._pt},GeometryLocation.prototype.getGeometryComponent=function(){return this._component},GeometryLocation.prototype.getSegmentIndex=function(){return this._segIndex},GeometryLocation.prototype.interfaces_=function(){return[]},GeometryLocation.prototype.getClass=function(){return GeometryLocation},staticAccessors$38.INSIDE_AREA.get=function(){return-1},Object.defineProperties(GeometryLocation,staticAccessors$38);var PointExtracter=function(e){this._pts=e||null};PointExtracter.prototype.filter=function(e){e instanceof Point$1&&this._pts.add(e)},PointExtracter.prototype.interfaces_=function(){return[GeometryFilter]},PointExtracter.prototype.getClass=function(){return PointExtracter},PointExtracter.getPoints=function(e,t){if(1===arguments.length){var n=e;return n instanceof Point$1?Collections.singletonList(n):PointExtracter.getPoints(n,new ArrayList)}if(2===arguments.length){var r=e,i=t;return r instanceof Point$1?i.add(r):r instanceof GeometryCollection&&r.apply(new PointExtracter(i)),i}};var ConnectedElementLocationFilter=function(e){this._locations=null;this._locations=e};ConnectedElementLocationFilter.prototype.filter=function(e){(e instanceof Point$1||e instanceof LineString||e instanceof Polygon)&&this._locations.add(new GeometryLocation(e,0,e.getCoordinate()))},ConnectedElementLocationFilter.prototype.interfaces_=function(){return[GeometryFilter]},ConnectedElementLocationFilter.prototype.getClass=function(){return ConnectedElementLocationFilter},ConnectedElementLocationFilter.getLocations=function(e){var t=new ArrayList;return e.apply(new ConnectedElementLocationFilter(t)),t};var DistanceOp=function(e,t,n){var r,i,o;this._geom=null,this._terminateDistance=0,this._ptLocator=new PointLocator,this._minDistanceLocation=null,this._minDistance=Double.MAX_VALUE,2===arguments.length?(this._geom=[e,t],this._terminateDistance=0):3===arguments.length&&(r=e,i=t,o=n,this._geom=new Array(2).fill(null),this._geom[0]=r,this._geom[1]=i,this._terminateDistance=o)};DistanceOp.prototype.computeContainmentDistance=function(e,t,n){if(0===arguments.length){var r=new Array(2).fill(null);if(this.computeContainmentDistance(0,r),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,r)}else if(2===arguments.length){var i=e,o=t,a=1-i,s=PolygonExtracter.getPolygons(this._geom[i]);if(0<s.size()){var l=ConnectedElementLocationFilter.getLocations(this._geom[a]);if(this.computeContainmentDistance(l,s,o),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[a]=o[0],this._minDistanceLocation[i]=o[1],null}}else if(3===arguments.length)if(n instanceof Array&&hasInterface(e,List)&&hasInterface(t,List)){for(var c=e,u=t,p=n,d=0;d<c.size();d++)for(var f=c.get(d),h=0;h<u.size();h++)if(this.computeContainmentDistance(f,u.get(h),p),this._minDistance<=this._terminateDistance)return null}else if(n instanceof Array&&e instanceof GeometryLocation&&t instanceof Polygon){var g=e,m=t,y=n,v=g.getCoordinate();if(Location.EXTERIOR!==this._ptLocator.locate(v,m))return y[this._minDistance=0]=g,y[1]=new GeometryLocation(m,v),null}},DistanceOp.prototype.computeMinDistanceLinesPoints=function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),o=0;o<t.size();o++){var a=t.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},DistanceOp.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),t=LinearComponentExtracter.getLines(this._geom[0]),n=LinearComponentExtracter.getLines(this._geom[1]),r=PointExtracter.getPoints(this._geom[0]),i=PointExtracter.getPoints(this._geom[1]);return this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,r,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistancePoints(r,i,e),void this.updateMinDistance(e,!1))))},DistanceOp.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},DistanceOp.prototype.updateMinDistance=function(e,t){if(null===e[0])return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])},DistanceOp.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},DistanceOp.prototype.computeMinDistance=function(e,t,n){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(n instanceof Array&&e instanceof LineString&&t instanceof Point$1){var r=e,i=t,o=n;if(r.getEnvelopeInternal().distance(i.getEnvelopeInternal())>this._minDistance)return null;for(var a=r.getCoordinates(),s=i.getCoordinate(),l=0;l<a.length-1;l++){var c,u=CGAlgorithms.distancePointLine(s,a[l],a[l+1]);if(u<this._minDistance&&(this._minDistance=u,c=new LineSegment(a[l],a[l+1]).closestPoint(s),o[0]=new GeometryLocation(r,l,c),o[1]=new GeometryLocation(i,0,s)),this._minDistance<=this._terminateDistance)return null}}else if(n instanceof Array&&e instanceof LineString&&t instanceof LineString){var p=e,d=t,f=n;if(p.getEnvelopeInternal().distance(d.getEnvelopeInternal())>this._minDistance)return null;for(var h=p.getCoordinates(),g=d.getCoordinates(),m=0;m<h.length-1;m++)for(var y=0;y<g.length-1;y++){var v,_,b,w=CGAlgorithms.distanceLineLine(h[m],h[m+1],g[y],g[y+1]);if(w<this._minDistance&&(this._minDistance=w,v=new LineSegment(h[m],h[m+1]),_=new LineSegment(g[y],g[y+1]),b=v.closestPoints(_),f[0]=new GeometryLocation(p,m,b[0]),f[1]=new GeometryLocation(d,y,b[1])),this._minDistance<=this._terminateDistance)return null}}},DistanceOp.prototype.computeMinDistancePoints=function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),o=0;o<t.size();o++){var a=t.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new GeometryLocation(i,0,i.getCoordinate()),n[1]=new GeometryLocation(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},DistanceOp.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new IllegalArgumentException("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},DistanceOp.prototype.computeMinDistanceLines=function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),o=0;o<t.size();o++){var a=t.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},DistanceOp.prototype.interfaces_=function(){return[]},DistanceOp.prototype.getClass=function(){return DistanceOp},DistanceOp.distance=function(e,t){return new DistanceOp(e,t).distance()},DistanceOp.isWithinDistance=function(e,t,n){return new DistanceOp(e,t,n).distance()<=n},DistanceOp.nearestPoints=function(e,t){return new DistanceOp(e,t).nearestPoints()};var PointPairDistance$2=function(){this._pt=[new Coordinate,new Coordinate],this._distance=Double.NaN,this._isNull=!0};PointPairDistance$2.prototype.getCoordinates=function(){return this._pt},PointPairDistance$2.prototype.getCoordinate=function(e){return this._pt[e]},PointPairDistance$2.prototype.setMinimum=function(e,t){if(1===arguments.length)this.setMinimum(e._pt[0],e._pt[1]);else if(2===arguments.length){var n=e,r=t;if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i<this._distance&&this.initialize(n,r,i)}},PointPairDistance$2.prototype.initialize=function(e,t,n){var r,i,o,a;0===arguments.length?this._isNull=!0:2===arguments.length?(r=e,i=t,this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(i),this._distance=r.distance(i),this._isNull=!1):3===arguments.length&&(o=t,a=n,this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(o),this._distance=a,this._isNull=!1)},PointPairDistance$2.prototype.toString=function(){return WKTWriter.toLineString(this._pt[0],this._pt[1])},PointPairDistance$2.prototype.getDistance=function(){return this._distance},PointPairDistance$2.prototype.setMaximum=function(e,t){if(1===arguments.length)this.setMaximum(e._pt[0],e._pt[1]);else if(2===arguments.length){var n=e,r=t;if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i>this._distance&&this.initialize(n,r,i)}},PointPairDistance$2.prototype.interfaces_=function(){return[]},PointPairDistance$2.prototype.getClass=function(){return PointPairDistance$2};var DistanceToPoint=function(){};DistanceToPoint.prototype.interfaces_=function(){return[]},DistanceToPoint.prototype.getClass=function(){return DistanceToPoint},DistanceToPoint.computeDistance=function(e,t,n){if(n instanceof PointPairDistance$2&&e instanceof LineString&&t instanceof Coordinate)for(var r=e,i=t,o=n,a=new LineSegment,s=r.getCoordinates(),l=0;l<s.length-1;l++){a.setCoordinates(s[l],s[l+1]);var c=a.closestPoint(i);o.setMinimum(c,i)}else if(n instanceof PointPairDistance$2&&e instanceof Polygon&&t instanceof Coordinate){var u=e,p=t,d=n;DistanceToPoint.computeDistance(u.getExteriorRing(),p,d);for(var f=0;f<u.getNumInteriorRing();f++)DistanceToPoint.computeDistance(u.getInteriorRingN(f),p,d)}else if(n instanceof PointPairDistance$2&&e instanceof Geometry&&t instanceof Coordinate){var h=e,g=t,m=n;if(h instanceof LineString)DistanceToPoint.computeDistance(h,g,m);else if(h instanceof Polygon)DistanceToPoint.computeDistance(h,g,m);else if(h instanceof GeometryCollection)for(var y=h,v=0;v<y.getNumGeometries();v++){var _=y.getGeometryN(v);DistanceToPoint.computeDistance(_,g,m)}else m.setMinimum(h.getCoordinate(),g)}else{var b,w,x;n instanceof PointPairDistance$2&&e instanceof LineSegment&&t instanceof Coordinate&&(b=t,w=n,x=e.closestPoint(b),w.setMinimum(x,b))}};var DiscreteHausdorffDistance=function(e,t){this._g0=null,this._g1=null,this._ptDist=new PointPairDistance$2,this._densifyFrac=0;var n=t;this._g0=e,this._g1=n},staticAccessors$39={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};DiscreteHausdorffDistance.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},DiscreteHausdorffDistance.prototype.setDensifyFraction=function(e){if(1<e||e<=0)throw new IllegalArgumentException("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e},DiscreteHausdorffDistance.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)},DiscreteHausdorffDistance.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},DiscreteHausdorffDistance.prototype.computeOrientedDistance=function(e,t,n){var r,i=new MaxPointDistanceFilter$1(t);e.apply(i),n.setMaximum(i.getMaxPointDistance()),0<this._densifyFrac&&(r=new MaxDensifiedByFractionDistanceFilter(t,this._densifyFrac),e.apply(r),n.setMaximum(r.getMaxPointDistance()))},DiscreteHausdorffDistance.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},DiscreteHausdorffDistance.prototype.interfaces_=function(){return[]},DiscreteHausdorffDistance.prototype.getClass=function(){return DiscreteHausdorffDistance},DiscreteHausdorffDistance.distance=function(e,t,n){if(2===arguments.length)return new DiscreteHausdorffDistance(e,t).distance();if(3===arguments.length){var r=n,i=new DiscreteHausdorffDistance(e,t);return i.setDensifyFraction(r),i.distance()}},staticAccessors$39.MaxPointDistanceFilter.get=function(){return MaxPointDistanceFilter$1},staticAccessors$39.MaxDensifiedByFractionDistanceFilter.get=function(){return MaxDensifiedByFractionDistanceFilter},Object.defineProperties(DiscreteHausdorffDistance,staticAccessors$39);var MaxPointDistanceFilter$1=function(e){this._maxPtDist=new PointPairDistance$2,this._minPtDist=new PointPairDistance$2,this._euclideanDist=new DistanceToPoint,this._geom=null,this._geom=e};MaxPointDistanceFilter$1.prototype.filter=function(e){this._minPtDist.initialize(),DistanceToPoint.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},MaxPointDistanceFilter$1.prototype.getMaxPointDistance=function(){return this._maxPtDist},MaxPointDistanceFilter$1.prototype.interfaces_=function(){return[CoordinateFilter]},MaxPointDistanceFilter$1.prototype.getClass=function(){return MaxPointDistanceFilter$1};var MaxDensifiedByFractionDistanceFilter=function(e,t){this._maxPtDist=new PointPairDistance$2,this._minPtDist=new PointPairDistance$2,this._geom=null,this._numSubSegs=0;var n=t;this._geom=e,this._numSubSegs=Math.trunc(Math.round(1/n))};MaxDensifiedByFractionDistanceFilter.prototype.filter=function(e,t){if(0===t)return null;for(var n=e.getCoordinate(t-1),r=e.getCoordinate(t),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,l=n.y+a*o,c=new Coordinate(s,l);this._minPtDist.initialize(),DistanceToPoint.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},MaxDensifiedByFractionDistanceFilter.prototype.isDone=function(){return!1},MaxDensifiedByFractionDistanceFilter.prototype.isGeometryChanged=function(){return!1},MaxDensifiedByFractionDistanceFilter.prototype.getMaxPointDistance=function(){return this._maxPtDist},MaxDensifiedByFractionDistanceFilter.prototype.interfaces_=function(){return[CoordinateSequenceFilter]},MaxDensifiedByFractionDistanceFilter.prototype.getClass=function(){return MaxDensifiedByFractionDistanceFilter};var BufferDistanceValidator=function(e,t,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=t||null,this._result=n||null},staticAccessors$37={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};BufferDistanceValidator.prototype.checkMaximumDistance=function(e,t,n){var r,i=new DiscreteHausdorffDistance(t,e);i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n&&(this._isValid=!1,r=i.getCoordinates(),this._errorLocation=r[1],this._errorIndicator=e.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+WKTWriter.toLineString(r[0],r[1])+")")},BufferDistanceValidator.prototype.isValid=function(){var e=Math.abs(this._bufDistance),t=BufferDistanceValidator.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-t,this._maxValidDistance=e+t,!(!this._input.isEmpty()&&!this._result.isEmpty())||(0<this._bufDistance?this.checkPositiveValid():this.checkNegativeValid(),BufferDistanceValidator.VERBOSE&&System.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},BufferDistanceValidator.prototype.checkNegativeValid=function(){if(!(this._input instanceof Polygon||this._input instanceof MultiPolygon||this._input instanceof GeometryCollection))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)},BufferDistanceValidator.prototype.getErrorIndicator=function(){return this._errorIndicator},BufferDistanceValidator.prototype.checkMinimumDistance=function(e,t,n){var r,i=new DistanceOp(e,t,n);this._minDistanceFound=i.distance(),this._minDistanceFound<n&&(this._isValid=!1,r=i.nearestPoints(),this._errorLocation=i.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+WKTWriter.toLineString(r[0],r[1])+" )")},BufferDistanceValidator.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)},BufferDistanceValidator.prototype.getErrorLocation=function(){return this._errorLocation},BufferDistanceValidator.prototype.getPolygonLines=function(e){for(var t=new ArrayList,n=new LinearComponentExtracter(t),r=PolygonExtracter.getPolygons(e).iterator();r.hasNext();){r.next().apply(n)}return e.getFactory().buildGeometry(t)},BufferDistanceValidator.prototype.getErrorMessage=function(){return this._errMsg},BufferDistanceValidator.prototype.interfaces_=function(){return[]},BufferDistanceValidator.prototype.getClass=function(){return BufferDistanceValidator},staticAccessors$37.VERBOSE.get=function(){return!1},staticAccessors$37.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(BufferDistanceValidator,staticAccessors$37);var BufferResultValidator=function(e,t,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=t||null,this._result=n||null},staticAccessors$40={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};BufferResultValidator.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid&&this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid},BufferResultValidator.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*BufferResultValidator.MAX_ENV_DIFF_FRAC;0===e&&(e=.001);var t=new Envelope(this._input.getEnvelopeInternal());t.expandBy(this._distance);var n=new Envelope(this._result.getEnvelopeInternal());n.expandBy(e),n.contains(t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},BufferResultValidator.prototype.checkDistance=function(){var e=new BufferDistanceValidator(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")},BufferResultValidator.prototype.checkArea=function(){var e=this._input.getArea(),t=this._result.getArea();0<this._distance&&t<e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},BufferResultValidator.prototype.checkPolygonal=function(){this._result instanceof Polygon||this._result instanceof MultiPolygon||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},BufferResultValidator.prototype.getErrorIndicator=function(){return this._errorIndicator},BufferResultValidator.prototype.getErrorLocation=function(){return this._errorLocation},BufferResultValidator.prototype.checkExpectedEmpty=function(){return 2<=this._input.getDimension()||0<this._distance?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},BufferResultValidator.prototype.report=function(e){if(!BufferResultValidator.VERBOSE)return null;System.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))},BufferResultValidator.prototype.getErrorMessage=function(){return this._errorMsg},BufferResultValidator.prototype.interfaces_=function(){return[]},BufferResultValidator.prototype.getClass=function(){return BufferResultValidator},BufferResultValidator.isValidMsg=function(e,t,n){var r=new BufferResultValidator(e,t,n);return r.isValid()?null:r.getErrorMessage()},BufferResultValidator.isValid=function(e,t,n){return!!new BufferResultValidator(e,t,n).isValid()},staticAccessors$40.VERBOSE.get=function(){return!1},staticAccessors$40.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(BufferResultValidator,staticAccessors$40);var BasicSegmentString=function(e,t){this._pts=null,this._data=null;var n=t;this._pts=e,this._data=n};BasicSegmentString.prototype.getCoordinates=function(){return this._pts},BasicSegmentString.prototype.size=function(){return this._pts.length},BasicSegmentString.prototype.getCoordinate=function(e){return this._pts[e]},BasicSegmentString.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},BasicSegmentString.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:Octant.octant(this.getCoordinate(e),this.getCoordinate(e+1))},BasicSegmentString.prototype.setData=function(e){this._data=e},BasicSegmentString.prototype.getData=function(){return this._data},BasicSegmentString.prototype.toString=function(){return WKTWriter.toLineString(new CoordinateArraySequence(this._pts))},BasicSegmentString.prototype.interfaces_=function(){return[SegmentString]},BasicSegmentString.prototype.getClass=function(){return BasicSegmentString};var InteriorIntersectionFinder=function(e){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new ArrayList,this._intersectionCount=0,this._keepIntersections=!0,this._li=e,this._interiorIntersection=null};InteriorIntersectionFinder.prototype.getInteriorIntersection=function(){return this._interiorIntersection},InteriorIntersectionFinder.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e},InteriorIntersectionFinder.prototype.getIntersectionSegments=function(){return this._intSegments},InteriorIntersectionFinder.prototype.count=function(){return this._intersectionCount},InteriorIntersectionFinder.prototype.getIntersections=function(){return this._intersections},InteriorIntersectionFinder.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e},InteriorIntersectionFinder.prototype.setKeepIntersections=function(e){this._keepIntersections=e},InteriorIntersectionFinder.prototype.processIntersections=function(e,t,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(e===n&&t===r)return null;if(this._isCheckEndSegmentsOnly&&!(this.isEndSegment(e,t)||this.isEndSegment(n,r)))return null;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},InteriorIntersectionFinder.prototype.isEndSegment=function(e,t){return 0===t||t>=e.size()-2},InteriorIntersectionFinder.prototype.hasIntersection=function(){return null!==this._interiorIntersection},InteriorIntersectionFinder.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},InteriorIntersectionFinder.prototype.interfaces_=function(){return[SegmentIntersector]},InteriorIntersectionFinder.prototype.getClass=function(){return InteriorIntersectionFinder},InteriorIntersectionFinder.createAllIntersectionsFinder=function(e){var t=new InteriorIntersectionFinder(e);return t.setFindAllIntersections(!0),t},InteriorIntersectionFinder.createAnyIntersectionFinder=function(e){return new InteriorIntersectionFinder(e)},InteriorIntersectionFinder.createIntersectionCounter=function(e){var t=new InteriorIntersectionFinder(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};var FastNodingValidator=function(e){this._li=new RobustLineIntersector,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=e};FastNodingValidator.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},FastNodingValidator.prototype.getIntersections=function(){return this._segInt.getIntersections()},FastNodingValidator.prototype.isValid=function(){return this.execute(),this._isValid},FastNodingValidator.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e},FastNodingValidator.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new InteriorIntersectionFinder(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new MCIndexNoder;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},FastNodingValidator.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new TopologyException(this.getErrorMessage(),this._segInt.getInteriorIntersection())},FastNodingValidator.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+WKTWriter.toLineString(e[0],e[1])+" and "+WKTWriter.toLineString(e[2],e[3])},FastNodingValidator.prototype.interfaces_=function(){return[]},FastNodingValidator.prototype.getClass=function(){return FastNodingValidator},FastNodingValidator.computeIntersections=function(e){var t=new FastNodingValidator(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};var EdgeNodingValidator=function e(){this._nv=null;var t=arguments[0];this._nv=new FastNodingValidator(e.toSegmentStrings(t))};EdgeNodingValidator.prototype.checkValid=function(){this._nv.checkValid()},EdgeNodingValidator.prototype.interfaces_=function(){return[]},EdgeNodingValidator.prototype.getClass=function(){return EdgeNodingValidator},EdgeNodingValidator.toSegmentStrings=function(e){for(var t=new ArrayList,n=e.iterator();n.hasNext();){var r=n.next();t.add(new BasicSegmentString(r.getCoordinates(),r))}return t},EdgeNodingValidator.checkValid=function(e){new EdgeNodingValidator(e).checkValid()};var GeometryCollectionMapper=function(e){this._mapOp=e};GeometryCollectionMapper.prototype.map=function(e){for(var t=new ArrayList,n=0;n<e.getNumGeometries();n++){var r=this._mapOp.map(e.getGeometryN(n));r.isEmpty()||t.add(r)}return e.getFactory().createGeometryCollection(GeometryFactory.toGeometryArray(t))},GeometryCollectionMapper.prototype.interfaces_=function(){return[]},GeometryCollectionMapper.prototype.getClass=function(){return GeometryCollectionMapper},GeometryCollectionMapper.map=function(e,t){return new GeometryCollectionMapper(t).map(e)};var LineBuilder=function(e,t,n){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new ArrayList,this._resultLineList=new ArrayList;var r=t,i=n;this._op=e,this._geometryFactory=r,this._ptLocator=i};LineBuilder.prototype.collectLines=function(e){for(var t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();){var n=t.next();this.collectLineEdge(n,e,this._lineEdgesList),this.collectBoundaryTouchEdge(n,e,this._lineEdgesList)}},LineBuilder.prototype.labelIsolatedLine=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,n)},LineBuilder.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList},LineBuilder.prototype.collectLineEdge=function(e,t,n){var r=e.getLabel(),i=e.getEdge();e.isLineEdge()&&(e.isVisited()||!OverlayOp.isResultOfOp(r,t)||i.isCovered()||(n.add(i),e.setVisitedEdge(!0)))},LineBuilder.prototype.findCoveredLineEdges=function(){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){e.next().getEdges().findCoveredLineEdges()}for(var t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();){var n,r=t.next(),i=r.getEdge();r.isLineEdge()&&!i.isCoveredSet()&&(n=this._op.isCoveredByA(r.getCoordinate()),i.setCovered(n))}},LineBuilder.prototype.labelIsolatedLines=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},LineBuilder.prototype.buildLines=function(){for(var e=this._lineEdgesList.iterator();e.hasNext();){var t=e.next(),n=this._geometryFactory.createLineString(t.getCoordinates());this._resultLineList.add(n),t.setInResult(!0)}},LineBuilder.prototype.collectBoundaryTouchEdge=function(e,t,n){var r=e.getLabel();return e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult()?null:(Assert.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),void(OverlayOp.isResultOfOp(r,t)&&t===OverlayOp.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))))},LineBuilder.prototype.interfaces_=function(){return[]},LineBuilder.prototype.getClass=function(){return LineBuilder};var PointBuilder=function(e,t){this._op=null,this._geometryFactory=null,this._resultPointList=new ArrayList;var n=t;this._op=e,this._geometryFactory=n};PointBuilder.prototype.filterCoveredNodeToPoint=function(e){var t,n=e.getCoordinate();this._op.isCoveredByLA(n)||(t=this._geometryFactory.createPoint(n),this._resultPointList.add(t))},PointBuilder.prototype.extractNonCoveredResultNodes=function(e){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();){var n,r=t.next();r.isInResult()||r.isIncidentEdgeInResult()||0!==r.getEdges().getDegree()&&e!==OverlayOp.INTERSECTION||(n=r.getLabel(),OverlayOp.isResultOfOp(n,e)&&this.filterCoveredNodeToPoint(r))}},PointBuilder.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList},PointBuilder.prototype.interfaces_=function(){return[]},PointBuilder.prototype.getClass=function(){return PointBuilder};var GeometryTransformer=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};GeometryTransformer.prototype.transformPoint=function(e){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))},GeometryTransformer.prototype.transformPolygon=function(e){var t=!0,n=this.transformLinearRing(e.getExteriorRing(),e);null!==n&&n instanceof LinearRing&&!n.isEmpty()||(t=!1);for(var r=new ArrayList,i=0;i<e.getNumInteriorRing();i++){var o=this.transformLinearRing(e.getInteriorRingN(i),e);null===o||o.isEmpty()||(o instanceof LinearRing||(t=!1),r.add(o))}if(t)return this._factory.createPolygon(n,r.toArray([]));var a=new ArrayList;return null!==n&&a.add(n),a.addAll(r),this._factory.buildGeometry(a)},GeometryTransformer.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)},GeometryTransformer.prototype.getInputGeometry=function(){return this._inputGeom},GeometryTransformer.prototype.transformMultiLineString=function(e){for(var t=new ArrayList,n=0;n<e.getNumGeometries();n++){var r=this.transformLineString(e.getGeometryN(n),e);null!==r&&(r.isEmpty()||t.add(r))}return this._factory.buildGeometry(t)},GeometryTransformer.prototype.transformCoordinates=function(e){return this.copy(e)},GeometryTransformer.prototype.transformLineString=function(e){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))},GeometryTransformer.prototype.transformMultiPoint=function(e){for(var t=new ArrayList,n=0;n<e.getNumGeometries();n++){var r=this.transformPoint(e.getGeometryN(n),e);null!==r&&(r.isEmpty()||t.add(r))}return this._factory.buildGeometry(t)},GeometryTransformer.prototype.transformMultiPolygon=function(e){for(var t=new ArrayList,n=0;n<e.getNumGeometries();n++){var r=this.transformPolygon(e.getGeometryN(n),e);null!==r&&(r.isEmpty()||t.add(r))}return this._factory.buildGeometry(t)},GeometryTransformer.prototype.copy=function(e){return e.copy()},GeometryTransformer.prototype.transformGeometryCollection=function(e){for(var t=new ArrayList,n=0;n<e.getNumGeometries();n++){var r=this.transform(e.getGeometryN(n));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||t.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(GeometryFactory.toGeometryArray(t)):this._factory.buildGeometry(t)},GeometryTransformer.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof Point$1)return this.transformPoint(e,null);if(e instanceof MultiPoint)return this.transformMultiPoint(e,null);if(e instanceof LinearRing)return this.transformLinearRing(e,null);if(e instanceof LineString)return this.transformLineString(e,null);if(e instanceof MultiLineString)return this.transformMultiLineString(e,null);if(e instanceof Polygon)return this.transformPolygon(e,null);if(e instanceof MultiPolygon)return this.transformMultiPolygon(e,null);if(e instanceof GeometryCollection)return this.transformGeometryCollection(e,null);throw new IllegalArgumentException("Unknown Geometry subtype: "+e.getClass().getName())},GeometryTransformer.prototype.transformLinearRing=function(e){var t=this.transformCoordinates(e.getCoordinateSequence(),e);if(null===t)return this._factory.createLinearRing(null);var n=t.size();return 0<n&&n<4&&!this._preserveType?this._factory.createLineString(t):this._factory.createLinearRing(t)},GeometryTransformer.prototype.interfaces_=function(){return[]},GeometryTransformer.prototype.getClass=function(){return GeometryTransformer};var LineStringSnapper=function e(){var t,n,r;this._snapTolerance=0,this._srcPts=null,this._seg=new LineSegment,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof LineString&&"number"==typeof arguments[1]?(t=arguments[1],e.call(this,arguments[0].getCoordinates(),t)):arguments[0]instanceof Array&&"number"==typeof arguments[1]&&(n=arguments[0],r=arguments[1],this._srcPts=n,this._isClosed=e.isClosed(n),this._snapTolerance=r)};LineStringSnapper.prototype.snapVertices=function(e,t){for(var n=this._isClosed?e.size()-1:e.size(),r=0;r<n;r++){var i=e.get(r),o=this.findSnapForVertex(i,t);null!==o&&(e.set(r,new Coordinate(o)),0===r&&this._isClosed&&e.set(e.size()-1,new Coordinate(o)))}},LineStringSnapper.prototype.findSnapForVertex=function(e,t){for(var n=0;n<t.length;n++){if(e.equals2D(t[n]))return null;if(e.distance(t[n])<this._snapTolerance)return t[n]}return null},LineStringSnapper.prototype.snapTo=function(e){var t=new CoordinateList(this._srcPts);return this.snapVertices(t,e),this.snapSegments(t,e),t.toCoordinateArray()},LineStringSnapper.prototype.snapSegments=function(e,t){if(0===t.length)return null;var n=t.length;t[0].equals2D(t[t.length-1])&&(n=t.length-1);for(var r=0;r<n;r++){var i=t[r],o=this.findSegmentIndexToSnap(i,e);0<=o&&e.add(o+1,new Coordinate(i),!1)}},LineStringSnapper.prototype.findSegmentIndexToSnap=function(e,t){for(var n=Double.MAX_VALUE,r=-1,i=0;i<t.size()-1;i++){if(this._seg.p0=t.get(i),this._seg.p1=t.get(i+1),this._seg.p0.equals2D(e)||this._seg.p1.equals2D(e)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(e);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},LineStringSnapper.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e},LineStringSnapper.prototype.interfaces_=function(){return[]},LineStringSnapper.prototype.getClass=function(){return LineStringSnapper},LineStringSnapper.isClosed=function(e){return!(e.length<=1)&&e[0].equals2D(e[e.length-1])};var GeometrySnapper=function(e){this._srcGeom=e||null},staticAccessors$41={SNAP_PRECISION_FACTOR:{configurable:!0}};GeometrySnapper.prototype.snapTo=function(e,t){var n=this.extractTargetCoordinates(e);return new SnapTransformer(t,n).transform(this._srcGeom)},GeometrySnapper.prototype.snapToSelf=function(e,t){var n=this.extractTargetCoordinates(this._srcGeom),r=new SnapTransformer(e,n,!0).transform(this._srcGeom),i=r;return t&&hasInterface(i,Polygonal)&&(i=r.buffer(0)),i},GeometrySnapper.prototype.computeSnapTolerance=function(e){return this.computeMinimumSegmentLength(e)/10},GeometrySnapper.prototype.extractTargetCoordinates=function(e){for(var t=new TreeSet,n=e.getCoordinates(),r=0;r<n.length;r++)t.add(n[r]);return t.toArray(new Array(0).fill(null))},GeometrySnapper.prototype.computeMinimumSegmentLength=function(e){for(var t=Double.MAX_VALUE,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);r<t&&(t=r)}return t},GeometrySnapper.prototype.interfaces_=function(){return[]},GeometrySnapper.prototype.getClass=function(){return GeometrySnapper},GeometrySnapper.snap=function(e,t,n){var r=new Array(2).fill(null),i=new GeometrySnapper(e);r[0]=i.snapTo(t,n);var o=new GeometrySnapper(t);return r[1]=o.snapTo(r[0],n),r},GeometrySnapper.computeOverlaySnapTolerance=function(e,t){if(1===arguments.length){var n,r=e,i=GeometrySnapper.computeSizeBasedSnapTolerance(r),o=r.getPrecisionModel();return o.getType()!==PrecisionModel.FIXED||i<(n=1/o.getScale()*2/1.415)&&(i=n),i}if(2===arguments.length){var a=t;return Math.min(GeometrySnapper.computeOverlaySnapTolerance(e),GeometrySnapper.computeOverlaySnapTolerance(a))}},GeometrySnapper.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal();return Math.min(t.getHeight(),t.getWidth())*GeometrySnapper.SNAP_PRECISION_FACTOR},GeometrySnapper.snapToSelf=function(e,t,n){return new GeometrySnapper(e).snapToSelf(t,n)},staticAccessors$41.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(GeometrySnapper,staticAccessors$41);var SnapTransformer=(O$g=GeometryTransformer,O$g&&(P$g.__proto__=O$g),((P$g.prototype=Object.create(O$g&&O$g.prototype)).constructor=P$g).prototype.snapLine=function(e,t){var n=new LineStringSnapper(e,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(t)},P$g.prototype.transformCoordinates=function(e){var t=e.toCoordinateArray(),n=this.snapLine(t,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(n)},P$g.prototype.interfaces_=function(){return[]},P$g.prototype.getClass=function(){return P$g},P$g),O$g;function P$g(e,t,n){O$g.call(this),this._snapTolerance=e||null,this._snapPts=t||null,this._isSelfSnap=void 0!==n&&n}var CommonBits=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};CommonBits.prototype.getCommon=function(){return Double.longBitsToDouble(this._commonBits)},CommonBits.prototype.add=function(e){var t=Double.doubleToLongBits(e);return this._isFirst?(this._commonBits=t,this._commonSignExp=CommonBits.signExpBits(this._commonBits),this._isFirst=!1,null):CommonBits.signExpBits(t)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=CommonBits.numCommonMostSigMantissaBits(this._commonBits,t),void(this._commonBits=CommonBits.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},CommonBits.prototype.toString=function(e){if(1===arguments.length){var t=e,n=Double.longBitsToDouble(t),r="0000000000000000000000000000000000000000000000000000000000000000"+Double.toBinaryString(t),i=r.substring(r.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+n+" ]"}},CommonBits.prototype.interfaces_=function(){return[]},CommonBits.prototype.getClass=function(){return CommonBits},CommonBits.getBit=function(e,t){return 0!=(e&1<<t)?1:0},CommonBits.signExpBits=function(e){return e>>52},CommonBits.zeroLowerBits=function(e,t){return e&~((1<<t)-1)},CommonBits.numCommonMostSigMantissaBits=function(e,t){for(var n=0,r=52;0<=r;r--){if(CommonBits.getBit(e,r)!==CommonBits.getBit(t,r))return n;n++}return 52};var CommonBitsRemover=function(){this._commonCoord=null,this._ccFilter=new CommonCoordinateFilter},staticAccessors$42={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};CommonBitsRemover.prototype.addCommonBits=function(e){var t=new Translater(this._commonCoord);e.apply(t),e.geometryChanged()},CommonBitsRemover.prototype.removeCommonBits=function(e){if(0===this._commonCoord.x&&0===this._commonCoord.y)return e;var t=new Coordinate(this._commonCoord);t.x=-t.x,t.y=-t.y;var n=new Translater(t);return e.apply(n),e.geometryChanged(),e},CommonBitsRemover.prototype.getCommonCoordinate=function(){return this._commonCoord},CommonBitsRemover.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},CommonBitsRemover.prototype.interfaces_=function(){return[]},CommonBitsRemover.prototype.getClass=function(){return CommonBitsRemover},staticAccessors$42.CommonCoordinateFilter.get=function(){return CommonCoordinateFilter},staticAccessors$42.Translater.get=function(){return Translater},Object.defineProperties(CommonBitsRemover,staticAccessors$42);var CommonCoordinateFilter=function(){this._commonBitsX=new CommonBits,this._commonBitsY=new CommonBits};CommonCoordinateFilter.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)},CommonCoordinateFilter.prototype.getCommonCoordinate=function(){return new Coordinate(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},CommonCoordinateFilter.prototype.interfaces_=function(){return[CoordinateFilter]},CommonCoordinateFilter.prototype.getClass=function(){return CommonCoordinateFilter};var Translater=function(e){this.trans=null;this.trans=e};Translater.prototype.filter=function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,r=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,r)},Translater.prototype.isDone=function(){return!1},Translater.prototype.isGeometryChanged=function(){return!0},Translater.prototype.interfaces_=function(){return[CoordinateSequenceFilter]},Translater.prototype.getClass=function(){return Translater};var SnapOverlayOp=function(e,t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};SnapOverlayOp.prototype.selfSnap=function(e){return new GeometrySnapper(e).snapTo(e,this._snapTolerance)},SnapOverlayOp.prototype.removeCommonBits=function(e){this._cbr=new CommonBitsRemover,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t},SnapOverlayOp.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e},SnapOverlayOp.prototype.getResultGeometry=function(e){var t=this.snap(this._geom),n=OverlayOp.overlayOp(t[0],t[1],e);return this.prepareResult(n)},SnapOverlayOp.prototype.checkValid=function(e){e.isValid()||System.out.println("Snapped geometry is invalid")},SnapOverlayOp.prototype.computeSnapTolerance=function(){this._snapTolerance=GeometrySnapper.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},SnapOverlayOp.prototype.snap=function(e){var t=this.removeCommonBits(e);return GeometrySnapper.snap(t[0],t[1],this._snapTolerance)},SnapOverlayOp.prototype.interfaces_=function(){return[]},SnapOverlayOp.prototype.getClass=function(){return SnapOverlayOp},SnapOverlayOp.overlayOp=function(e,t,n){return new SnapOverlayOp(e,t).getResultGeometry(n)},SnapOverlayOp.union=function(e,t){return SnapOverlayOp.overlayOp(e,t,OverlayOp.UNION)},SnapOverlayOp.intersection=function(e,t){return SnapOverlayOp.overlayOp(e,t,OverlayOp.INTERSECTION)},SnapOverlayOp.symDifference=function(e,t){return SnapOverlayOp.overlayOp(e,t,OverlayOp.SYMDIFFERENCE)},SnapOverlayOp.difference=function(e,t){return SnapOverlayOp.overlayOp(e,t,OverlayOp.DIFFERENCE)};var SnapIfNeededOverlayOp=function(e,t){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t};SnapIfNeededOverlayOp.prototype.getResultGeometry=function(e){var t=null,n=!1,r=null;try{t=OverlayOp.overlayOp(this._geom[0],this._geom[1],e);n=!0}catch(e){if(!(e instanceof RuntimeException))throw e;r=e}if(!n)try{t=SnapOverlayOp.overlayOp(this._geom[0],this._geom[1],e)}catch(e){throw e instanceof RuntimeException?r:e}return t},SnapIfNeededOverlayOp.prototype.interfaces_=function(){return[]},SnapIfNeededOverlayOp.prototype.getClass=function(){return SnapIfNeededOverlayOp},SnapIfNeededOverlayOp.overlayOp=function(e,t,n){return new SnapIfNeededOverlayOp(e,t).getResultGeometry(n)},SnapIfNeededOverlayOp.union=function(e,t){return SnapIfNeededOverlayOp.overlayOp(e,t,OverlayOp.UNION)},SnapIfNeededOverlayOp.intersection=function(e,t){return SnapIfNeededOverlayOp.overlayOp(e,t,OverlayOp.INTERSECTION)},SnapIfNeededOverlayOp.symDifference=function(e,t){return SnapIfNeededOverlayOp.overlayOp(e,t,OverlayOp.SYMDIFFERENCE)},SnapIfNeededOverlayOp.difference=function(e,t){return SnapIfNeededOverlayOp.overlayOp(e,t,OverlayOp.DIFFERENCE)};var MonotoneChain$2=function(e,t){this.mce=null,this.chainIndex=null;var n=t;this.mce=e,this.chainIndex=n};MonotoneChain$2.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)},MonotoneChain$2.prototype.interfaces_=function(){return[]},MonotoneChain$2.prototype.getClass=function(){return MonotoneChain$2};var SweepLineEvent=function e(){var t,n,r,i,o;this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length?(t=arguments[0],n=arguments[1],this._eventType=e.DELETE,this._xValue=t,this._insertEvent=n):3===arguments.length&&(r=arguments[0],i=arguments[1],o=arguments[2],this._eventType=e.INSERT,this._label=r,this._xValue=i,this._obj=o)},staticAccessors$43={INSERT:{configurable:!0},DELETE:{configurable:!0}};SweepLineEvent.prototype.isDelete=function(){return this._eventType===SweepLineEvent.DELETE},SweepLineEvent.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e},SweepLineEvent.prototype.getObject=function(){return this._obj},SweepLineEvent.prototype.compareTo=function(e){return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},SweepLineEvent.prototype.getInsertEvent=function(){return this._insertEvent},SweepLineEvent.prototype.isInsert=function(){return this._eventType===SweepLineEvent.INSERT},SweepLineEvent.prototype.isSameLabel=function(e){return null!==this._label&&this._label===e._label},SweepLineEvent.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},SweepLineEvent.prototype.interfaces_=function(){return[Comparable]},SweepLineEvent.prototype.getClass=function(){return SweepLineEvent},staticAccessors$43.INSERT.get=function(){return 1},staticAccessors$43.DELETE.get=function(){return 2},Object.defineProperties(SweepLineEvent,staticAccessors$43);var EdgeSetIntersector=function(){};EdgeSetIntersector.prototype.interfaces_=function(){return[]},EdgeSetIntersector.prototype.getClass=function(){return EdgeSetIntersector};var SegmentIntersector$2=function(e,t,n){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var r=t,i=n;this._li=e,this._includeProper=r,this._recordIsolated=i};SegmentIntersector$2.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&1===this._li.getIntersectionNum()){if(SegmentIntersector$2.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.getNumPoints()-1;if(0===t&&r===i||0===r&&t===i)return!0}}return!1},SegmentIntersector$2.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},SegmentIntersector$2.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e},SegmentIntersector$2.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},SegmentIntersector$2.prototype.isBoundaryPointInternal=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next().getCoordinate();if(e.isIntersection(r))return!0}return!1},SegmentIntersector$2.prototype.hasProperIntersection=function(){return this._hasProper},SegmentIntersector$2.prototype.hasIntersection=function(){return this._hasIntersection},SegmentIntersector$2.prototype.isDone=function(){return this._isDone},SegmentIntersector$2.prototype.isBoundaryPoint=function(e,t){return null!==t&&(!!this.isBoundaryPointInternal(e,t[0])||!!this.isBoundaryPointInternal(e,t[1]))},SegmentIntersector$2.prototype.setBoundaryNodes=function(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t},SegmentIntersector$2.prototype.addIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},SegmentIntersector$2.prototype.interfaces_=function(){return[]},SegmentIntersector$2.prototype.getClass=function(){return SegmentIntersector$2},SegmentIntersector$2.isAdjacentSegments=function(e,t){return 1===Math.abs(e-t)};var SimpleMCSweepLineIntersector=(W2g=EdgeSetIntersector,W2g&&(X2g.__proto__=W2g),((X2g.prototype=Object.create(W2g&&W2g.prototype)).constructor=X2g).prototype.prepareEvents=function(){Collections.sort(this.events);for(var e=0;e<this.events.size();e++){var t=this.events.get(e);t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(e)}},X2g.prototype.computeIntersections=function(e,t,n){var r,i,o,a;if(1===arguments.length){var s=e;this.nOverlaps=0,this.prepareEvents();for(var l=0;l<this.events.size();l++){var c=this.events.get(l);if(c.isInsert()&&this.processOverlaps(l,c.getDeleteEventIndex(),c,s),s.isDone())break}}else 3===arguments.length&&(n instanceof SegmentIntersector$2&&hasInterface(e,List)&&hasInterface(t,List)?(r=t,i=n,this.addEdges(e,e),this.addEdges(r,r),this.computeIntersections(i)):"boolean"==typeof n&&hasInterface(e,List)&&t instanceof SegmentIntersector$2&&(o=e,a=t,n?this.addEdges(o,null):this.addEdges(o),this.computeIntersections(a)))},X2g.prototype.addEdge=function(e,t){for(var n=e.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new MonotoneChain$2(n,i),a=new SweepLineEvent(t,n.getMinX(i),o);this.events.add(a),this.events.add(new SweepLineEvent(n.getMaxX(i),a))}},X2g.prototype.processOverlaps=function(e,t,n,r){for(var i=n.getObject(),o=e;o<t;o++){var a,s=this.events.get(o);s.isInsert()&&(a=s.getObject(),n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++))}},X2g.prototype.addEdges=function(e,t){if(1===arguments.length)for(var n=e.iterator();n.hasNext();){var r=n.next();this.addEdge(r,r)}else if(2===arguments.length)for(var i=t,o=e.iterator();o.hasNext();){var a=o.next();this.addEdge(a,i)}},X2g.prototype.interfaces_=function(){return[]},X2g.prototype.getClass=function(){return X2g},X2g),W2g;function X2g(){W2g.call(this),this.events=new ArrayList,this.nOverlaps=null}var IntervalRTreeNode=function(){this._min=Double.POSITIVE_INFINITY,this._max=Double.NEGATIVE_INFINITY},staticAccessors$45={NodeComparator:{configurable:!0}};IntervalRTreeNode.prototype.getMin=function(){return this._min},IntervalRTreeNode.prototype.intersects=function(e,t){return!(this._min>t||this._max<e)},IntervalRTreeNode.prototype.getMax=function(){return this._max},IntervalRTreeNode.prototype.toString=function(){return WKTWriter.toLineString(new Coordinate(this._min,0),new Coordinate(this._max,0))},IntervalRTreeNode.prototype.interfaces_=function(){return[]},IntervalRTreeNode.prototype.getClass=function(){return IntervalRTreeNode},staticAccessors$45.NodeComparator.get=function(){return NodeComparator},Object.defineProperties(IntervalRTreeNode,staticAccessors$45);var NodeComparator=function(){};NodeComparator.prototype.compare=function(e,t){var n=(e._min+e._max)/2,r=(t._min+t._max)/2;return n<r?-1:r<n?1:0},NodeComparator.prototype.interfaces_=function(){return[Comparator]},NodeComparator.prototype.getClass=function(){return NodeComparator};var IntervalRTreeLeafNode=(g4g=IntervalRTreeNode,g4g&&(h4g.__proto__=g4g),((h4g.prototype=Object.create(g4g&&g4g.prototype)).constructor=h4g).prototype.query=function(e,t,n){if(!this.intersects(e,t))return null;n.visitItem(this._item)},h4g.prototype.interfaces_=function(){return[]},h4g.prototype.getClass=function(){return h4g},h4g),g4g;function h4g(){g4g.call(this),this._item=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._min=e,this._max=t,this._item=n}var IntervalRTreeBranchNode=(r4g=IntervalRTreeNode,r4g&&(s4g.__proto__=r4g),((s4g.prototype=Object.create(r4g&&r4g.prototype)).constructor=s4g).prototype.buildExtent=function(e,t){this._min=Math.min(e._min,t._min),this._max=Math.max(e._max,t._max)},s4g.prototype.query=function(e,t,n){if(!this.intersects(e,t))return null;null!==this._node1&&this._node1.query(e,t,n),null!==this._node2&&this._node2.query(e,t,n)},s4g.prototype.interfaces_=function(){return[]},s4g.prototype.getClass=function(){return s4g},s4g),r4g;function s4g(){r4g.call(this),this._node1=null,this._node2=null;var e=arguments[0],t=arguments[1];this._node1=e,this._node2=t,this.buildExtent(this._node1,this._node2)}var SortedPackedIntervalRTree=function(){this._leaves=new ArrayList,this._root=null,this._level=0};SortedPackedIntervalRTree.prototype.buildTree=function(){Collections.sort(this._leaves,new IntervalRTreeNode.NodeComparator);for(var e,t=this._leaves,n=new ArrayList;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},SortedPackedIntervalRTree.prototype.insert=function(e,t,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new IntervalRTreeLeafNode(e,t,n))},SortedPackedIntervalRTree.prototype.query=function(e,t,n){this.init(),this._root.query(e,t,n)},SortedPackedIntervalRTree.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},SortedPackedIntervalRTree.prototype.printNode=function(e){System.out.println(WKTWriter.toLineString(new Coordinate(e._min,this._level),new Coordinate(e._max,this._level)))},SortedPackedIntervalRTree.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},SortedPackedIntervalRTree.prototype.buildLevel=function(e,t){this._level++,t.clear();for(var n=0;n<e.size();n+=2){var r,i=e.get(n);null===(n+1<e.size()?e.get(n):null)?t.add(i):(r=new IntervalRTreeBranchNode(e.get(n),e.get(n+1)),t.add(r))}},SortedPackedIntervalRTree.prototype.interfaces_=function(){return[]},SortedPackedIntervalRTree.prototype.getClass=function(){return SortedPackedIntervalRTree};var ArrayListVisitor=function(){this._items=new ArrayList};ArrayListVisitor.prototype.visitItem=function(e){this._items.add(e)},ArrayListVisitor.prototype.getItems=function(){return this._items},ArrayListVisitor.prototype.interfaces_=function(){return[ItemVisitor]},ArrayListVisitor.prototype.getClass=function(){return ArrayListVisitor};var IndexedPointInAreaLocator=function(e){this._index=null;var t=e;if(!hasInterface(t,Polygonal))throw new IllegalArgumentException("Argument must be Polygonal");this._index=new IntervalIndexedGeometry(t)},staticAccessors$44={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};IndexedPointInAreaLocator.prototype.locate=function(e){var t=new RayCrossingCounter(e),n=new SegmentVisitor(t);return this._index.query(e.y,e.y,n),t.getLocation()},IndexedPointInAreaLocator.prototype.interfaces_=function(){return[PointOnGeometryLocator]},IndexedPointInAreaLocator.prototype.getClass=function(){return IndexedPointInAreaLocator},staticAccessors$44.SegmentVisitor.get=function(){return SegmentVisitor},staticAccessors$44.IntervalIndexedGeometry.get=function(){return IntervalIndexedGeometry},Object.defineProperties(IndexedPointInAreaLocator,staticAccessors$44);var SegmentVisitor=function(e){this._counter=null;this._counter=e};SegmentVisitor.prototype.visitItem=function(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))},SegmentVisitor.prototype.interfaces_=function(){return[ItemVisitor]},SegmentVisitor.prototype.getClass=function(){return SegmentVisitor};var IntervalIndexedGeometry=function(e){this._index=new SortedPackedIntervalRTree;this.init(e)};IntervalIndexedGeometry.prototype.init=function(e){for(var t=LinearComponentExtracter.getLines(e).iterator();t.hasNext();){var n=t.next().getCoordinates();this.addLine(n)}},IntervalIndexedGeometry.prototype.addLine=function(e){for(var t=1;t<e.length;t++){var n=new LineSegment(e[t-1],e[t]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},IntervalIndexedGeometry.prototype.query=function(e,t,n){if(2===arguments.length){var r=e,i=t,o=new ArrayListVisitor;return this._index.query(r,i,o),o.getItems()}3===arguments.length&&this._index.query(e,t,n)},IntervalIndexedGeometry.prototype.interfaces_=function(){return[]},IntervalIndexedGeometry.prototype.getClass=function(){return IntervalIndexedGeometry};var GeometryGraph=(X5g=PlanarGraph,X5g&&(Y5g.__proto__=X5g),((Y5g.prototype=Object.create(X5g&&X5g.prototype)).constructor=Y5g).prototype.insertBoundaryPoint=function(e,t){var n=this._nodes.addNode(t).getLabel(),r=1;Location.NONE,n.getLocation(e,Position.ON)===Location.BOUNDARY&&r++;var i=Y5g.determineBoundary(this._boundaryNodeRule,r);n.setLocation(e,i)},Y5g.prototype.computeSelfNodes=function(e,t,n){if(2===arguments.length)return this.computeSelfNodes(e,t,!1);if(3===arguments.length){var r=t,i=n,o=new SegmentIntersector$2(e,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof LinearRing||this._parentGeom instanceof Polygon||this._parentGeom instanceof MultiPolygon,l=r||!s;return a.computeIntersections(this._edges,o,l),this.addSelfIntersectionNodes(this._argIndex),o}},Y5g.prototype.computeSplitEdges=function(e){for(var t=this._edges.iterator();t.hasNext();)t.next().eiList.addSplitEdges(e)},Y5g.prototype.computeEdgeIntersections=function(e,t,n){var r=new SegmentIntersector$2(t,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),e.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,e._edges,r),r},Y5g.prototype.getGeometry=function(){return this._parentGeom},Y5g.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},Y5g.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},Y5g.prototype.addPoint=function(e){var t;e instanceof Point$1?(t=e.getCoordinate(),this.insertPoint(this._argIndex,t,Location.INTERIOR)):e instanceof Coordinate&&this.insertPoint(this._argIndex,e,Location.INTERIOR)},Y5g.prototype.addPolygon=function(e){this.addPolygonRing(e.getExteriorRing(),Location.EXTERIOR,Location.INTERIOR);for(var t=0;t<e.getNumInteriorRing();t++){var n=e.getInteriorRingN(t);this.addPolygonRing(n,Location.INTERIOR,Location.EXTERIOR)}},Y5g.prototype.addEdge=function(e){this.insertEdge(e);var t=e.getCoordinates();this.insertPoint(this._argIndex,t[0],Location.BOUNDARY),this.insertPoint(this._argIndex,t[t.length-1],Location.BOUNDARY)},Y5g.prototype.addLineString=function(e){var t=CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(t.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=t[0],null;var n=new Edge(t,new Label(this._argIndex,Location.INTERIOR));this._lineEdgeMap.put(e,n),this.insertEdge(n),Assert.isTrue(2<=t.length,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,t[0]),this.insertBoundaryPoint(this._argIndex,t[t.length-1])},Y5g.prototype.getInvalidPoint=function(){return this._invalidPoint},Y5g.prototype.getBoundaryPoints=function(){for(var e=this.getBoundaryNodes(),t=new Array(e.size()).fill(null),n=0,r=e.iterator();r.hasNext();){var i=r.next();t[n++]=i.getCoordinate().copy()}return t},Y5g.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},Y5g.prototype.addSelfIntersectionNode=function(e,t,n){if(this.isBoundaryNode(e,t))return null;n===Location.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(e,t):this.insertPoint(e,t,n)},Y5g.prototype.addPolygonRing=function(e,t,n){if(e.isEmpty())return null;var r=CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=t,o=n;CGAlgorithms.isCCW(r)&&(i=n,o=t);var a=new Edge(r,new Label(this._argIndex,Location.BOUNDARY,i,o));this._lineEdgeMap.put(e,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],Location.BOUNDARY)},Y5g.prototype.insertPoint=function(e,t,n){var r=this._nodes.addNode(t),i=r.getLabel();null===i?r._label=new Label(e,n):i.setLocation(e,n)},Y5g.prototype.createEdgeSetIntersector=function(){return new SimpleMCSweepLineIntersector},Y5g.prototype.addSelfIntersectionNodes=function(e){for(var t=this._edges.iterator();t.hasNext();)for(var n=t.next(),r=n.getLabel().getLocation(e),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(e,o.coord,r)}},Y5g.prototype.add=function(e){if(1!==arguments.length)return X5g.prototype.add.apply(this,arguments);var t=e;if(t.isEmpty())return null;if(t instanceof MultiPolygon&&(this._useBoundaryDeterminationRule=!1),t instanceof Polygon)this.addPolygon(t);else if(t instanceof LineString)this.addLineString(t);else if(t instanceof Point$1)this.addPoint(t);else if(t instanceof MultiPoint)this.addCollection(t);else if(t instanceof MultiLineString)this.addCollection(t);else if(t instanceof MultiPolygon)this.addCollection(t);else{if(!(t instanceof GeometryCollection))throw new Error(t.getClass().getName());this.addCollection(t)}},Y5g.prototype.addCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}},Y5g.prototype.locate=function(e){return hasInterface(this._parentGeom,Polygonal)&&50<this._parentGeom.getNumGeometries()?(null===this._areaPtLocator&&(this._areaPtLocator=new IndexedPointInAreaLocator(this._parentGeom)),this._areaPtLocator.locate(e)):this._ptLocator.locate(e,this._parentGeom)},Y5g.prototype.findEdge=function(e){return 1!==arguments.length?X5g.prototype.findEdge.apply(this,arguments):this._lineEdgeMap.get(e)},Y5g.prototype.interfaces_=function(){return[]},Y5g.prototype.getClass=function(){return Y5g},Y5g.determineBoundary=function(e,t){return e.isInBoundary(t)?Location.BOUNDARY:Location.INTERIOR},Y5g),X5g;function Y5g(){var e,t,n,r,i,o;X5g.call(this),this._parentGeom=null,this._lineEdgeMap=new HashMap,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new PointLocator,2===arguments.length?(e=arguments[0],t=arguments[1],n=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,this._argIndex=e,this._parentGeom=t,this._boundaryNodeRule=n,null!==t&&this.add(t)):3===arguments.length&&(r=arguments[0],i=arguments[1],o=arguments[2],this._argIndex=r,this._parentGeom=i,this._boundaryNodeRule=o,null!==i&&this.add(i))}var GeometryGraphOp=function(e,t,n){var r,i,o,a,s,l,c;this._li=new RobustLineIntersector,this._resultPrecisionModel=null,this._arg=null,1===arguments.length?(r=e,this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new GeometryGraph(0,r)):2===arguments.length?(i=e,o=t,a=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,0<=i.getPrecisionModel().compareTo(o.getPrecisionModel())?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new GeometryGraph(0,i,a),this._arg[1]=new GeometryGraph(1,o,a)):3===arguments.length&&(l=t,c=n,0<=(s=e).getPrecisionModel().compareTo(l.getPrecisionModel())?this.setComputationPrecision(s.getPrecisionModel()):this.setComputationPrecision(l.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new GeometryGraph(0,s,c),this._arg[1]=new GeometryGraph(1,l,c))};GeometryGraphOp.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()},GeometryGraphOp.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)},GeometryGraphOp.prototype.interfaces_=function(){return[]},GeometryGraphOp.prototype.getClass=function(){return GeometryGraphOp};var GeometryMapper=function(){};GeometryMapper.prototype.interfaces_=function(){return[]},GeometryMapper.prototype.getClass=function(){return GeometryMapper},GeometryMapper.map=function(e,t){if(e instanceof Geometry&&hasInterface(t,GeometryMapper.MapOp)){for(var n=e,r=t,i=new ArrayList,o=0;o<n.getNumGeometries();o++){var a=r.map(n.getGeometryN(o));null!==a&&i.add(a)}return n.getFactory().buildGeometry(i)}if(hasInterface(e,Collection)&&hasInterface(t,GeometryMapper.MapOp)){for(var s=e,l=t,c=new ArrayList,u=s.iterator();u.hasNext();){var p=u.next(),d=l.map(p);null!==d&&c.add(d)}return c}},GeometryMapper.MapOp=function(){};var OverlayOp=(x8g=GeometryGraphOp,x8g&&(y8g.__proto__=x8g),((y8g.prototype=Object.create(x8g&&x8g.prototype)).constructor=y8g).prototype.insertUniqueEdge=function(e){var t,n,r,i=this._edgeList.findEqualEdge(e);null!==i?(t=i.getLabel(),n=e.getLabel(),i.isPointwiseEqual(e)||(n=new Label(e.getLabel())).flip(),(r=i.getDepth()).isNull()&&r.add(t),r.add(n),t.merge(n)):this._edgeList.add(e)},y8g.prototype.getGraph=function(){return this._graph},y8g.prototype.cancelDuplicateResultEdges=function(){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var t=e.next(),n=t.getSym();t.isInResult()&&n.isInResult()&&(t.setInResult(!1),n.setInResult(!1))}},y8g.prototype.isCoveredByLA=function(e){return!!this.isCovered(e,this._resultLineList)||!!this.isCovered(e,this._resultPolyList)},y8g.prototype.computeGeometry=function(e,t,n,r){var i=new ArrayList;return i.addAll(e),i.addAll(t),i.addAll(n),i.isEmpty()?y8g.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(i)},y8g.prototype.mergeSymLabels=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();)e.next().getEdges().mergeSymLabels()},y8g.prototype.isCovered=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(e,r)!==Location.EXTERIOR)return!0}return!1},y8g.prototype.replaceCollapsedEdges=function(){for(var e=new ArrayList,t=this._edgeList.iterator();t.hasNext();){var n=t.next();n.isCollapsed()&&(t.remove(),e.add(n.getCollapsedEdge()))}this._edgeList.addAll(e)},y8g.prototype.updateNodeLabelling=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getEdges().getLabel();t.getLabel().merge(n)}},y8g.prototype.getResultGeometry=function(e){return this.computeOverlay(e),this._resultGeom},y8g.prototype.insertUniqueEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.insertUniqueEdge(n)}},y8g.prototype.computeOverlay=function(e){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var t=new ArrayList;this._arg[0].computeSplitEdges(t),this._arg[1].computeSplitEdges(t),this.insertUniqueEdges(t),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),EdgeNodingValidator.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(e),this.cancelDuplicateResultEdges();var n=new PolygonBuilder(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new LineBuilder(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(e);var i=new PointBuilder(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(e),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,e)},y8g.prototype.labelIncompleteNode=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._arg[t].getGeometry());e.getLabel().setLocation(t,n)},y8g.prototype.copyPoints=function(e){for(var t=this._arg[e].getNodeIterator();t.hasNext();){var n=t.next();this._graph.addNode(n.getCoordinate()).setLabel(e,n.getLabel().getLocation(e))}},y8g.prototype.findResultAreaEdges=function(e){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var n=t.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&y8g.isResultOfOp(r.getLocation(0,Position.RIGHT),r.getLocation(1,Position.RIGHT),e)&&n.setInResult(!0)}},y8g.prototype.computeLabelsFromDepths=function(){for(var e=this._edgeList.iterator();e.hasNext();){var t=e.next(),n=t.getLabel(),r=t.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(Assert.isTrue(!r.isNull(i,Position.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Position.LEFT,r.getLocation(i,Position.LEFT)),Assert.isTrue(!r.isNull(i,Position.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Position.RIGHT,r.getLocation(i,Position.RIGHT))))}}},y8g.prototype.computeLabelling=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();)e.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},y8g.prototype.labelIncompleteNodes=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getLabel();t.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(t,0):this.labelIncompleteNode(t,1)),t.getEdges().updateLabelling(n)}},y8g.prototype.isCoveredByA=function(e){return!!this.isCovered(e,this._resultPolyList)},y8g.prototype.interfaces_=function(){return[]},y8g.prototype.getClass=function(){return y8g},y8g),x8g;function y8g(){var e=arguments[0],t=arguments[1];x8g.call(this,e,t),this._ptLocator=new PointLocator,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new EdgeList,this._resultPolyList=new ArrayList,this._resultLineList=new ArrayList,this._resultPointList=new ArrayList,this._graph=new PlanarGraph(new OverlayNodeFactory),this._geomFact=e.getFactory()}OverlayOp.overlayOp=function(e,t,n){return new OverlayOp(e,t).getResultGeometry(n)},OverlayOp.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var n=t;return GeometryCollectionMapper.map(e,{interfaces_:function(){return[GeometryMapper.MapOp]},map:function(e){return e.intersection(n)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),SnapIfNeededOverlayOp.overlayOp(e,t,OverlayOp.INTERSECTION)},OverlayOp.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),SnapIfNeededOverlayOp.overlayOp(e,t,OverlayOp.SYMDIFFERENCE)},OverlayOp.resultDimension=function(e,t,n){var r=t.getDimension(),i=n.getDimension(),o=-1;switch(e){case OverlayOp.INTERSECTION:o=Math.min(r,i);break;case OverlayOp.UNION:o=Math.max(r,i);break;case OverlayOp.DIFFERENCE:o=r;break;case OverlayOp.SYMDIFFERENCE:o=Math.max(r,i)}return o},OverlayOp.createEmptyResult=function(e,t,n,r){var i=null;switch(OverlayOp.resultDimension(e,t,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},OverlayOp.difference=function(e,t){return e.isEmpty()?OverlayOp.createEmptyResult(OverlayOp.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),SnapIfNeededOverlayOp.overlayOp(e,t,OverlayOp.DIFFERENCE))},OverlayOp.isResultOfOp=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],n=e.getLocation(0),r=e.getLocation(1);return OverlayOp.isResultOfOp(n,r,t)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===Location.BOUNDARY&&(i=Location.INTERIOR),o===Location.BOUNDARY&&(o=Location.INTERIOR),a){case OverlayOp.INTERSECTION:return i===Location.INTERIOR&&o===Location.INTERIOR;case OverlayOp.UNION:return i===Location.INTERIOR||o===Location.INTERIOR;case OverlayOp.DIFFERENCE:return i===Location.INTERIOR&&o!==Location.INTERIOR;case OverlayOp.SYMDIFFERENCE:return i===Location.INTERIOR&&o!==Location.INTERIOR||i!==Location.INTERIOR&&o===Location.INTERIOR}return!1}},OverlayOp.INTERSECTION=1,OverlayOp.UNION=2,OverlayOp.DIFFERENCE=3,OverlayOp.SYMDIFFERENCE=4;var FuzzyPointLocator=function(e,t){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new PointLocator,this._seg=new LineSegment;var n=e,r=t;this._g=n,this._boundaryDistanceTolerance=r,this._linework=this.extractLinework(n)};FuzzyPointLocator.prototype.isWithinToleranceOfBoundary=function(e){for(var t=0;t<this._linework.getNumGeometries();t++)for(var n=this._linework.getGeometryN(t).getCoordinateSequence(),r=0;r<n.size()-1;r++){if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(e)<=this._boundaryDistanceTolerance)return!0}return!1},FuzzyPointLocator.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?Location.BOUNDARY:this._ptLocator.locate(e,this._g)},FuzzyPointLocator.prototype.extractLinework=function(e){var t=new PolygonalLineworkExtracter;e.apply(t);var n=t.getLinework(),r=GeometryFactory.toLineStringArray(n);return e.getFactory().createMultiLineString(r)},FuzzyPointLocator.prototype.interfaces_=function(){return[]},FuzzyPointLocator.prototype.getClass=function(){return FuzzyPointLocator};var PolygonalLineworkExtracter=function(){this._linework=null,this._linework=new ArrayList};PolygonalLineworkExtracter.prototype.getLinework=function(){return this._linework},PolygonalLineworkExtracter.prototype.filter=function(e){if(e instanceof Polygon){var t=e;this._linework.add(t.getExteriorRing());for(var n=0;n<t.getNumInteriorRing();n++)this._linework.add(t.getInteriorRingN(n))}},PolygonalLineworkExtracter.prototype.interfaces_=function(){return[GeometryFilter]},PolygonalLineworkExtracter.prototype.getClass=function(){return PolygonalLineworkExtracter};var OffsetPointGenerator=function(e){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=e};OffsetPointGenerator.prototype.extractPoints=function(e,t,n){for(var r=e.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],t,n)},OffsetPointGenerator.prototype.setSidesToGenerate=function(e,t){this._doLeft=e,this._doRight=t},OffsetPointGenerator.prototype.getPoints=function(e){for(var t=new ArrayList,n=LinearComponentExtracter.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,e,t)}return t},OffsetPointGenerator.prototype.computeOffsetPoints=function(e,t,n,r){var i,o,a=t.x-e.x,s=t.y-e.y,l=Math.sqrt(a*a+s*s),c=n*a/l,u=n*s/l,p=(t.x+e.x)/2,d=(t.y+e.y)/2;this._doLeft&&(i=new Coordinate(p-u,d+c),r.add(i)),this._doRight&&(o=new Coordinate(p+u,d-c),r.add(o))},OffsetPointGenerator.prototype.interfaces_=function(){return[]},OffsetPointGenerator.prototype.getClass=function(){return OffsetPointGenerator};var OverlayResultValidator=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new ArrayList;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,n),this._geom=[t,n,r],this._locFinder=[new FuzzyPointLocator(this._geom[0],this._boundaryDistanceTolerance),new FuzzyPointLocator(this._geom[1],this._boundaryDistanceTolerance),new FuzzyPointLocator(this._geom[2],this._boundaryDistanceTolerance)]},staticAccessors$46={TOLERANCE:{configurable:!0}};OverlayResultValidator.prototype.reportResult=function(e,t,n){System.out.println("Overlay result invalid - A:"+Location.toLocationSymbol(t[0])+" B:"+Location.toLocationSymbol(t[1])+" expected:"+(n?"i":"e")+" actual:"+Location.toLocationSymbol(t[2]))},OverlayResultValidator.prototype.isValid=function(e){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var t=this.checkValid(e);return t},OverlayResultValidator.prototype.checkValid=function(e,t){if(1===arguments.length){for(var n=e,r=0;r<this._testCoords.size();r++){var i=this._testCoords.get(r);if(!this.checkValid(n,i))return this._invalidLocation=i,!1}return!0}if(2===arguments.length){var o=e,a=t;return this._location[0]=this._locFinder[0].getLocation(a),this._location[1]=this._locFinder[1].getLocation(a),this._location[2]=this._locFinder[2].getLocation(a),!!OverlayResultValidator.hasLocation(this._location,Location.BOUNDARY)||this.isValidResult(o,this._location)}},OverlayResultValidator.prototype.addTestPts=function(e){var t=new OffsetPointGenerator(e);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))},OverlayResultValidator.prototype.isValidResult=function(e,t){var n=OverlayOp.isResultOfOp(t[0],t[1],e),r=!(n^t[2]===Location.INTERIOR);return r||this.reportResult(e,t,n),r},OverlayResultValidator.prototype.getInvalidLocation=function(){return this._invalidLocation},OverlayResultValidator.prototype.interfaces_=function(){return[]},OverlayResultValidator.prototype.getClass=function(){return OverlayResultValidator},OverlayResultValidator.hasLocation=function(e,t){for(var n=0;n<3;n++)if(e[n]===t)return!0;return!1},OverlayResultValidator.computeBoundaryDistanceTolerance=function(e,t){return Math.min(GeometrySnapper.computeSizeBasedSnapTolerance(e),GeometrySnapper.computeSizeBasedSnapTolerance(t))},OverlayResultValidator.isValid=function(e,t,n,r){return new OverlayResultValidator(e,t,r).isValid(n)},staticAccessors$46.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(OverlayResultValidator,staticAccessors$46);var GeometryCombiner=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};GeometryCombiner.prototype.extractElements=function(e,t){if(null===e)return null;for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);this._skipEmpty&&r.isEmpty()||t.add(r)}},GeometryCombiner.prototype.combine=function(){for(var e=new ArrayList,t=this._inputGeoms.iterator();t.hasNext();){var n=t.next();this.extractElements(n,e)}return 0===e.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(e)},GeometryCombiner.prototype.interfaces_=function(){return[]},GeometryCombiner.prototype.getClass=function(){return GeometryCombiner},GeometryCombiner.combine=function(e,t,n){return 1===arguments.length?new GeometryCombiner(e).combine():2===arguments.length?new GeometryCombiner(GeometryCombiner.createList(e,t)).combine():3===arguments.length?new GeometryCombiner(GeometryCombiner.createList(e,t,n)).combine():void 0},GeometryCombiner.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()},GeometryCombiner.createList=function(e,t,n){if(2===arguments.length){var r=e,i=t,o=new ArrayList;return o.add(r),o.add(i),o}if(3===arguments.length){var a=e,s=t,l=n,c=new ArrayList;return c.add(a),c.add(s),c.add(l),c}};var CascadedPolygonUnion=function(e){this._inputPolys=null,this._geomFactory=null,this._inputPolys=e,null===this._inputPolys&&(this._inputPolys=new ArrayList)},staticAccessors$47={STRTREE_NODE_CAPACITY:{configurable:!0}};CascadedPolygonUnion.prototype.reduceToGeometries=function(e){for(var t=new ArrayList,n=e.iterator();n.hasNext();){var r=n.next(),i=null;hasInterface(r,List)?i=this.unionTree(r):r instanceof Geometry&&(i=r),t.add(i)}return t},CascadedPolygonUnion.prototype.extractByEnvelope=function(e,t,n){for(var r=new ArrayList,i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);o.getEnvelopeInternal().intersects(e)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},CascadedPolygonUnion.prototype.unionOptimized=function(e,t){var n=e.getEnvelopeInternal(),r=t.getEnvelopeInternal();if(!n.intersects(r))return GeometryCombiner.combine(e,t);if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(e,t,i)},CascadedPolygonUnion.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new STRtree(CascadedPolygonUnion.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();){var n=t.next();e.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=e.itemsTree();return this.unionTree(r)},CascadedPolygonUnion.prototype.binaryUnion=function(e,t,n){if(1===arguments.length)return this.binaryUnion(e,0,e.size());if(3===arguments.length){var r=e,i=t,o=n;if(o-i<=1){var a=CascadedPolygonUnion.getGeometry(r,i);return this.unionSafe(a,null)}if(o-i==2)return this.unionSafe(CascadedPolygonUnion.getGeometry(r,i),CascadedPolygonUnion.getGeometry(r,i+1));var s=Math.trunc((o+i)/2),l=this.binaryUnion(r,i,s),c=this.binaryUnion(r,s,o);return this.unionSafe(l,c)}},CascadedPolygonUnion.prototype.repeatedUnion=function(e){for(var t=null,n=e.iterator();n.hasNext();)var r=n.next(),t=null===t?r.copy():t.union(r);return t},CascadedPolygonUnion.prototype.unionSafe=function(e,t){return null===e&&null===t?null:null===e?t.copy():null===t?e.copy():this.unionOptimized(e,t)},CascadedPolygonUnion.prototype.unionActual=function(e,t){return CascadedPolygonUnion.restrictToPolygons(e.union(t))},CascadedPolygonUnion.prototype.unionTree=function(e){var t=this.reduceToGeometries(e);return this.binaryUnion(t)},CascadedPolygonUnion.prototype.unionUsingEnvelopeIntersection=function(e,t,n){var r=new ArrayList,i=this.extractByEnvelope(n,e,r),o=this.extractByEnvelope(n,t,r),a=this.unionActual(i,o);return r.add(a),GeometryCombiner.combine(r)},CascadedPolygonUnion.prototype.bufferUnion=function(e,t){if(1===arguments.length){var n=e;return n.get(0).getFactory().buildGeometry(n).buffer(0)}if(2===arguments.length){var r=e,i=t;return r.getFactory().createGeometryCollection([r,i]).buffer(0)}},CascadedPolygonUnion.prototype.interfaces_=function(){return[]},CascadedPolygonUnion.prototype.getClass=function(){return CascadedPolygonUnion},CascadedPolygonUnion.restrictToPolygons=function(e){if(hasInterface(e,Polygonal))return e;var t=PolygonExtracter.getPolygons(e);return 1===t.size()?t.get(0):e.getFactory().createMultiPolygon(GeometryFactory.toPolygonArray(t))},CascadedPolygonUnion.getGeometry=function(e,t){return t>=e.size()?null:e.get(t)},CascadedPolygonUnion.union=function(e){return new CascadedPolygonUnion(e).union()},staticAccessors$47.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(CascadedPolygonUnion,staticAccessors$47);var UnionOp=function(){};function feature$1(e,t,n){if(!isObject$4(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");r&&validateBBox(r),i&&validateId(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=t||{},o.geometry=e,o}function isNumber$1(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function isObject$4(e){return e&&e.constructor===Object}function validateBBox(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!isNumber$1(e))throw new Error("bbox must only contain numbers")})}function validateId(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}function geomEach(e,t){for(var n,r,i,o,a,s,l,c,u,p=0,d="FeatureCollection"===e.type,f="Feature"===e.type,h=d?e.features.length:1,g=0;g<h;g++){for(a=d?e.features[g].geometry:f?e.geometry:e,l=d?e.features[g].properties:f?e.properties:{},c=d?e.features[g].bbox:f?e.bbox:void 0,u=d?e.features[g].id:f?e.id:void 0,o=(s=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<o;r++)if(null!==(i=s?a.geometries[r]:a))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,p,l,c,u))return;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===t(i.geometries[n],p,l,c,u))return;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,p,l,c,u))return;p++}}function geomReduce(e,o,a){var s=a;return geomEach(e,function(e,t,n,r,i){s=0===t&&void 0===a?e:o(s,e,t,n,r,i)}),s}function flattenEach(e,c){geomEach(e,function(e,t,n,r,i){var o,a=null===e?null:e.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1===c(feature$1(e,n,{bbox:r,id:i}),t,0)?!1:void 0}switch(a){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var s=0;s<e.coordinates.length;s++){var l=e.coordinates[s];if(!1===c(feature$1({type:o,coordinates:l},n),t,s))return!1}})}function area(e){return geomReduce(e,function(e,t){return e+calculateArea(t)},0)}UnionOp.prototype.interfaces_=function(){return[]},UnionOp.prototype.getClass=function(){return UnionOp},UnionOp.union=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),SnapIfNeededOverlayOp.overlayOp(e,t,OverlayOp.UNION)};var RADIUS$1=6378137;function calculateArea(e){var t,n=0;switch(e.type){case"Polygon":return polygonArea$1(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=polygonArea$1(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(t=0;t<e.geometries.length;t++)n+=calculateArea(e.geometries[t]);return n}}function polygonArea$1(e){var t=0;if(e&&0<e.length){t+=Math.abs(ringArea$1(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(ringArea$1(e[n]))}return t}function ringArea$1(e){var t,n,r,i,o,a,s=0,l=e.length;if(2<l){for(a=0;a<l;a++)o=a===l-2?(r=l-2,i=l-1,0):a===l-1?(r=l-1,i=0,1):(i=(r=a)+1,a+2),t=e[r],n=e[i],s+=(rad$1(e[o][0])-rad$1(t[0]))*Math.sin(rad$1(n[1]));s=s*RADIUS$1*RADIUS$1/2}return s}function rad$1(e){return e*Math.PI/180}function getGeom(e){if(!e)throw new Error("geojson is required");if(void 0!==e.geometry)return e.geometry;if(e.coordinates||e.geometries)return e;throw new Error("geojson must be a valid Feature or Geometry Object")}function difference(e,t){var n=getGeom(e),r=getGeom(t),i=e.properties||{},n=removeEmptyPolygon(n),r=removeEmptyPolygon(r);if(!n)return null;if(!r)return feature$1(n,i);var o=new GeoJSONReader,a=o.read(n),s=o.read(r),l=OverlayOp.difference(a,s);return l.isEmpty()?null:feature$1((new GeoJSONWriter).write(l),i)}function removeEmptyPolygon(e){switch(e.type){case"Polygon":return 1<area(e)?e:null;case"MultiPolygon":var t=[];if(flattenEach(e,function(e){1<area(e)&&t.push(e.geometry.coordinates)}),t.length)return{type:"MultiPolygon",coordinates:t}}}function union$1(){for(var e=arguments,t=new GeoJSONReader,n=t.read(JSON.stringify(arguments[0].geometry)),r=1;r<arguments.length;r++)n=UnionOp.union(n,t.read(JSON.stringify(e[r].geometry)));return{type:"Feature",geometry:n=(new GeoJSONWriter).write(n),properties:arguments[0].properties}}function _locationReducer(t,n){var r;try{var e=this.resolveLocation(n);if(!e||!e.feature)return console.warn("Warning:  Couldn't resolve location \""+n+'"'),t;r=t?union$1(t,e.feature):e.feature}catch(e){console.warn('Warning:  Error resolving location "'+n+'"'),console.warn(e),r=t}return r}function _cloneDeep(e){return JSON.parse(JSON.stringify(e))}var defaultExport=function(e){var i=this;this._cache={},e&&"FeatureCollection"===e.type&&Array.isArray(e.features)&&e.features.forEach(function(e){e.properties=e.properties||{};var t,n=e.properties,r=e.id||n.id;r&&/^\S+\.geojson$/i.test(r)&&(r=r.toLowerCase(),e.id=r,n.id=r,n.area||(t=geojsonArea.geometry(e.geometry)/1e6,n.area=Number(t.toFixed(2))),i._cache[r]=e)});var t=_cloneDeep(feature("Q2"));t.geometry={type:"Polygon",coordinates:[[[-180,-90],[180,-90],[180,90],[-180,90],[-180,-90]]]},t.id="Q2",t.properties.id="Q2",t.properties.area=geojsonArea.geometry(t.geometry)/1e6,this._cache.Q2=t};defaultExport.prototype.validateLocation=function(e){if(Array.isArray(e)){if(2===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&-180<=e[0]&&e[0]<=180&&-90<=e[1]&&e[1]<=90){var t="["+e.toString()+"]";return{type:"point",location:e,id:t}}}else if("string"==typeof e&&/^\S+\.geojson$/i.test(e)){var n=e.toLowerCase();if(this._cache[n])return{type:"geojson",location:e,id:n}}else if("string"==typeof e||"number"==typeof e){var r=feature(e);if(r)return{type:"countrycoder",location:e,id:r.properties.wikidata}}return null},defaultExport.prototype.resolveLocation=function(e){var t=this.validateLocation(e);if(!t)return null;if(this._cache[t.id])return Object.assign(t,{feature:this._cache[t.id]});if("point"===t.type){var n=25e3*Math.PI*25e3/1e6,r=this._cache[t.id]=geojsonPrecision({type:"Feature",id:t.id,properties:{id:t.id,area:Number(n.toFixed(2))},geometry:circleToPolygon(e,25e3,10)},3);return Object.assign(t,{feature:r})}if("geojson"===t.type||"countrycoder"!==t.type)return null;var i,o,a,s=_cloneDeep(feature(t.id)),l=s.properties;return Array.isArray(l.members)&&(i=s.geometry?s:null,o=l.members.reduce(_locationReducer.bind(this),i),s.geometry=o.geometry),l.area||(a=geojsonArea.geometry(s.geometry)/1e6,l.area=Number(a.toFixed(2))),s.id=t.id,l.id=t.id,this._cache[t.id]=s,Object.assign(t,{feature:s})},defaultExport.prototype.resolveLocationSet=function(e){e=e||{};var t=this.resolveLocation.bind(this),n=(e.include||[]).map(t).filter(Boolean),r=(e.exclude||[]).map(t).filter(Boolean);if(n.length||(n=[t("Q2")]),1===n.length&&0===r.length)return n[0].feature;n.sort(c);var i="+["+n.map(function(e){return e.id}).join(",")+"]";if(r.length&&(r.sort(c),i+="-["+r.map(function(e){return e.id}).join(",")+"]"),this._cache[i])return this._cache[i];var o=n.map(function(e){return e.location}).reduce(_locationReducer.bind(this),null),a=r.map(function(e){return e.location}).reduce(_locationReducer.bind(this),null),s=a?difference(o,a):o,l=geojsonArea.geometry(s.geometry)/1e6;return s.id=i,s.properties={id:i,area:Number(l.toFixed(2))},this._cache[i]=s;function c(e,t){var n={countrycoder:1,geojson:2,point:3},r=n[e.type],i=n[t.type];return i<r?1:r<i?-1:e.id.localeCompare(t.id)}},defaultExport.prototype.cache=function(){return this._cache};var _oci=null;function uiSuccess(l){var c,u,s=2,p=dispatch("cancel");function d(){var e=_mainFileFetcher;return Promise.all([e.get("oci_resources"),e.get("oci_features")]).then(function(e){if(_oci)return _oci;var t=e[0].resources,r=new defaultExport(e[1]),i={};return Object.values(t).forEach(function(e){var t=r.resolveLocationSet(e.locationSet),n=i[t.id];n||((n=JSON.parse(JSON.stringify(t))).properties.resourceIDs=new Set,i[t.id]=n),n.properties.resourceIDs.add(e.id)}),_oci={features:i,resources:t,query:whichPolygon_1({type:"FeatureCollection",features:Object.values(i)})}})}function t(e){var t=e.append("div").attr("class","header fillL");t.append("h3").text(_t("success.just_edited")),t.append("button").attr("class","close").on("click",function(){return p.call("cancel")}).call(svgIcon("#iD-icon-close"));var n=e.append("div").attr("class","body save-success fillL"),r=n.append("div").attr("class","save-summary");r.append("h3").text(_t("success.thank_you"+(u?"_location":""),{where:u})),r.append("p").text(_t("success.help_html")).append("a").attr("class","link-out").attr("target","_blank").attr("tabindex",-1).attr("href",_t("success.help_link_url")).call(svgIcon("#iD-icon-out-link","inline")).append("span").text(_t("success.help_link_text"));var i,o,a,s=l.connection();s&&(i=s.changesetURL(c.id),(o=r.append("table").attr("class","summary-table").append("tr").attr("class","summary-row")).append("td").attr("class","cell-icon summary-icon").append("a").attr("target","_blank").attr("href",i).append("svg").attr("class","logo-small").append("use").attr("xlink:href","#iD-logo-osm"),(a=o.append("td").attr("class","cell-detail summary-detail")).append("a").attr("class","cell-detail summary-view-on-osm").attr("target","_blank").attr("href",i).text(_t("success.view_on_osm")),a.append("div").html(_t("success.changeset_id",{changeset_id:'<a href="'+i+'" target="_blank">'+c.id+"</a>"})),d().then(function(r){var i=[];(r.query(l.map().center(),!0)||[]).forEach(function(n){Array.from(n.resourceIDs).forEach(function(e){var t=r.resources[e];i.push({area:n.area||1/0,order:t.order||0,resource:t})})}),i.sort(function(e,t){return e.area-t.area||t.order-e.order}),n.call(f,i.map(function(e){return e.resource}))}))}function f(e,t){var n=e.append("div").attr("class","save-communityLinks");n.append("h3").text(_t("success.like_osm"));var r=n.append("table").attr("class","community-table").selectAll(".community-row").data(t).enter().append("tr").attr("class","community-row");r.append("td").attr("class","cell-icon community-icon").append("a").attr("target","_blank").attr("href",function(e){return e.url}).append("svg").attr("class","logo-small").append("use").attr("xlink:href",function(e){return"#community-"+e.type}),r.append("td").attr("class","cell-detail community-detail").each(i),n.append("div").attr("class","community-missing").text(_t("success.missing")).append("a").attr("class","link-out").attr("target","_blank").attr("tabindex",-1).call(svgIcon("#iD-icon-out-link","inline")).attr("href","https://github.com/osmlab/osm-community-index/issues").append("span").text(_t("success.tell_us"))}function i(r){var e=select(this),n=r.id,i={url:a(r.url),signupUrl:a(r.signupUrl||r.url)};e.append("div").attr("class","community-name").append("a").attr("target","_blank").attr("href",r.url).text(_t("community."+r.id+".name"));var t=_t("community."+r.id+".description",i);"reddit"===r.type&&(t=t.replace(/(\/r\/\w*\/*)/i,function(e){return a(r.url,e)})),e.append("div").attr("class","community-description").html(t),(r.extendedDescription||r.languageCodes&&r.languageCodes.length)&&e.append("div").call(uiDisclosure(l,"community-more-"+r.id,!1).expanded(!1).updatePreference(!1).title(_t("success.more")).content(function(e){var t=e.selectAll(".community-more").data([0]).enter().append("div").attr("class","community-more");r.extendedDescription&&t.append("div").attr("class","community-extended-description").html(_t("community."+r.id+".extendedDescription",i));{var n;r.languageCodes&&r.languageCodes.length&&(n=r.languageCodes.map(function(e){return _mainLocalizer.languageName(e)}).join(", "),t.append("div").attr("class","community-languages").text(_t("success.languages",{languages:n})))}}));var o=(r.events||[]).map(function(e){return e.date=function(e){if(e){var t=e.trim();if(t){/Z$/.test(t)||(t+="Z");var n=new Date(t);return new Date(n.toUTCString().substr(0,25))}}}(e.when),e}).filter(function(e){var t=e.date.getTime(),n=(new Date).setHours(0,0,0,0);return!isNaN(t)&&n<=t}).sort(function(e,t){return e.date<t.date?-1:e.date>t.date?1:0}).slice(0,s);function a(e,t){return'<a target="_blank" href="'+e+'">'+(t=t||e)+"</a>"}o.length&&e.append("div").call(uiDisclosure(l,"community-events-"+r.id,!1).expanded(!1).updatePreference(!1).title(_t("success.events")).content(function(e){var t=e.append("div").attr("class","community-events").selectAll(".community-event").data(o).enter().append("div").attr("class","community-event");t.append("div").attr("class","community-event-name").append("a").attr("target","_blank").attr("href",function(e){return e.url}).text(function(e){var t=e.name;return e.i18n&&e.id&&(t=_t("community."+n+".events."+e.id+".name",{default:t})),t}),t.append("div").attr("class","community-event-when").text(function(e){var t={weekday:"short",day:"numeric",month:"short",year:"numeric"};return(e.date.getHours()||e.date.getMinutes())&&(t.hour="numeric",t.minute="numeric"),e.date.toLocaleString(_mainLocalizer.localeCode(),t)}),t.append("div").attr("class","community-event-where").text(function(e){var t=e.where;return e.i18n&&e.id&&(t=_t("community."+n+".events."+e.id+".where",{default:t})),t}),t.append("div").attr("class","community-event-description").text(function(e){var t=e.description;return e.i18n&&e.id&&(t=_t("community."+n+".events."+e.id+".description",{default:t})),t})})).select(".hide-toggle").append("span").attr("class","badge-text").text(o.length)}return d(),t.changeset=function(e){return arguments.length?(c=e,t):c},t.location=function(e){return arguments.length?(u=e,t):u},utilRebind(t,p,"on")}function modeSave(i){var o,a,n,e={id:"save"},t=utilKeybinding("modeSave"),r=uiCommit(i).on("cancel",l),s=i.uploader().on("saveStarted.modeSave",function(){u()}).on("willAttemptUpload.modeSave",function(){if(n=uiSuccess(i),a=null,!services.geocoder)return;services.geocoder.reverse(i.map().center(),function(e,t){var n,r,i,o;!e&&t&&t.address&&(r=(n=t.address)&&(n.town||n.city||n.county)||"",i=n&&(n.state||n.country)||"",o=r&&i?_t("success.thank_you_where.separator"):"",a=_t("success.thank_you_where.format",{place:r,separator:o,region:i}))})}).on("progressChanged.modeSave",function(e,t){var n=i.container().select(".loading-modal .modal-section").selectAll(".progress").data([0]);n.enter().append("div").attr("class","progress").merge(n).text(_t("save.conflict_progress",{num:e,total:t}))}).on("resultNoChanges.modeSave",function(){l()}).on("resultErrors.modeSave",function(e){c();var t=uiConfirm(i.container());t.select(".modal-section.header").append("h3").text(_t("save.error")),function(e,t){var n=e.select(".modal-section.message-text").selectAll(".error-container").data(t),r=n.enter().append("div").attr("class","error-container");r.append("a").attr("class","error-description").attr("href","#").classed("hide-toggle",!0).text(function(e){return e.msg||_t("save.unknown_error_details")}).on("click",function(){event.preventDefault();var e=select(this),t=select(this.nextElementSibling),n=e.classed("expanded");t.style("display",n?"none":"block"),e.classed("expanded",!n)}),r.append("div").attr("class","error-detail-container").style("display","none").append("ul").attr("class","error-detail-list").selectAll("li").data(function(e){return e.details||[]}).enter().append("li").attr("class","error-detail-item").text(function(e){return e}),n.exit().remove()}(t,e),t.okButton()}).on("resultConflicts.modeSave",function(e,t,n){var r=i.container().select(".sidebar").append("div").attr("class","sidebar-component");i.container().selectAll(".main-content").classed("active",!0).classed("inactive",!1),o=uiConflicts(i).conflictList(t).origChanges(n).on("cancel",function(){i.container().selectAll(".main-content").classed("active",!1).classed("inactive",!0),r.remove(),c(),s.cancelConflictResolution()}).on("save",function(){i.container().selectAll(".main-content").classed("active",!1).classed("inactive",!0),r.remove(),s.processResolvedConflicts(e)}),r.call(o)}).on("resultSuccess.modeSave",function(e){r.reset();var t=n.changeset(e).location(a).on("cancel",function(){i.ui().sidebar.hide()});i.enter(modeBrowse(i).sidebar(t))});function l(){i.enter(modeBrowse(i))}function c(){select(document).call(t.on("⎋",l,!0))}function u(){select(document).call(t.unbind)}return e.selectedIDs=function(){return o?o.shownEntityIds():[]},e.enter=function(){function t(){i.ui().sidebar.show(r)}i.ui().sidebar.expand(),c(),i.container().selectAll(".main-content").classed("active",!1).classed("inactive",!0);var e=i.connection();e?e.authenticated()?t():e.authenticate(function(e){(e?l:t)()}):l()},e.exit=function(){u(),i.container().selectAll(".main-content").classed("active",!0).classed("inactive",!1),i.ui().sidebar.hide()},e}function uiToolOldDrawModes(i){var e={id:"old_modes",label:_t("toolbar.add_feature")},o=[modeAddPoint(i,{title:_t("modes.add_point.title"),button:"point",description:_t("modes.add_point.description"),preset:_mainPresetIndex.item("point"),key:"1"}),modeAddLine(i,{title:_t("modes.add_line.title"),button:"line",description:_t("modes.add_line.description"),preset:_mainPresetIndex.item("line"),key:"2"}),modeAddArea(i,{title:_t("modes.add_area.title"),button:"area",description:_t("modes.add_area.description"),preset:_mainPresetIndex.item("area"),key:"3"})];function a(){return i.editable()}return o.forEach(function(e){i.keybinding().on(e.key,function(){a()&&(e.id===i.mode().id?i.enter(modeBrowse(i)):i.enter(e))})}),e.render=function(e){var n=e.append("div").attr("class","joined").style("display","flex"),t=debounce(r,500,{leading:!0,trailing:!0});function r(){var e=n.selectAll("button.add-button").data(o,function(e){return e.id});e.exit().remove();var t=e.enter().append("button").attr("class",function(e){return e.id+" add-button bar-button"}).on("click.mode-buttons",function(e){var t;a()&&(t=i.mode().id,/^draw/.test(t)||(e.id===t?i.enter(modeBrowse(i)):i.enter(e)))}).call(uiTooltip().placement("bottom").title(function(e){return e.description}).keys(function(e){return[e.key]}).scrollContainer(i.container().select(".top-toolbar")));t.each(function(e){select(this).call(svgIcon("#iD-icon-"+e.button))}),t.append("span").attr("class","label").text(function(e){return e.title}),(e.enter().size()||e.exit().size())&&i.ui().checkOverflow(".top-toolbar",!0),e=e.merge(t).classed("disabled",function(e){return!a()}).classed("active",function(e){return i.mode()&&i.mode().button===e.button})}i.map().on("move.modes",t).on("drawn.modes",t),i.on("enter.modes",r),r()},e}function uiToolNotes(i){var e={id:"notes",label:_t("modes.add_note.label")},o=modeAddNote(i);function a(){return s()&&(e=i.mode(),i.map().notesEditable()&&e&&"save"!==e.id);var e}function s(){var e=i.layers().layer("notes");return e&&e.enabled()}return i.keybinding().on(o.key,function(){a()&&(o.id===i.mode().id?i.enter(modeBrowse(i)):i.enter(o))}),e.render=function(r){var e=debounce(t,500,{leading:!0,trailing:!0});function t(){var e=s()?[o]:[],t=r.selectAll("button.add-button").data(e,function(e){return e.id});t.exit().remove();var n=t.enter().append("button").attr("tabindex",-1).attr("class",function(e){return e.id+" add-button bar-button"}).on("click.notes",function(e){var t;a()&&(t=i.mode().id,/^draw/.test(t)||(e.id===t?i.enter(modeBrowse(i)):i.enter(e)))}).call(uiTooltip().placement("bottom").title(function(e){return e.description}).keys(function(e){return[e.key]}).scrollContainer(i.container().select(".top-toolbar")));n.each(function(e){select(this).call(svgIcon(e.icon||"#iD-icon-"+e.button))}),(t.enter().size()||t.exit().size())&&i.ui().checkOverflow(".top-toolbar",!0),t=t.merge(n).classed("disabled",function(e){return!a()}).classed("active",function(e){return i.mode()&&i.mode().button===e.button})}i.map().on("move.notes",e).on("drawn.notes",e),i.on("enter.notes",t),t()},e.uninstall=function(){i.on("enter.editor.notes",null).on("exit.editor.notes",null).on("enter.notes",null),i.map().on("move.notes",null).on("drawn.notes",null)},e}function uiToolSave(n){var e={id:"save",label:_t("save.title")},r=null,i=null,o=n.history(),a=uiCmd("⌘S"),s=0;function l(){var e=n.mode();return e&&"save"===e.id}function c(){return 0===s||l()}function u(){event.preventDefault(),n.inIntro()||l()||!o.hasChanges()||n.enter(modeSave(n))}function p(){var e,t=o.difference().summary().length;t!==s&&(s=t,i&&i.title(_t(0<s?"save.help":"save.no_changes")).keys([a]),r&&(r.classed("disabled",c()).style("background",0===s?null:s<=50?(e=s/50,d3_interpolateRgb("#fff","#ff8")(e)):(e=Math.min((s-50)/50,1),d3_interpolateRgb("#ff8","#f88")(e))),r.select("span.count").text(s)))}return e.render=function(e){var t;i=uiTooltip().placement("bottom").title(_t("save.no_changes")).keys([a]).scrollContainer(n.container().select(".top-toolbar")),(r=e.append("button").attr("class","save disabled bar-button").on("pointerup",function(){t=event.pointerType}).on("click",function(){event.preventDefault(),u(),0!==s||"touch"!==t&&"pen"!==t||n.ui().flash.duration(2e3).iconName("#iD-icon-save").iconClass("disabled").text(_t("save.no_changes"))(),t=null}).call(i)).call(svgIcon("#iD-icon-save")),r.append("span").attr("class","count").attr("aria-hidden","true").text("0"),p(),n.keybinding().on(a,u,!0),n.history().on("change.save",p),n.on("enter.save",function(){r&&(r.classed("disabled",c()),l()&&r.call(i.hide))})},e.uninstall=function(){n.keybinding().off(a,!0),n.history().on("change.save",null),n.on("enter.save",null),i=r=null},e}function uiToolSidebarToggle(t){var e={id:"sidebar_toggle",label:_t("toolbar.inspect"),render:function(e){e.append("button").attr("class","bar-button").on("click",function(){t.ui().sidebar.toggle()}).call(uiTooltip().placement("bottom").title(_t("sidebar.tooltip")).keys([_t("sidebar.key")]).scrollContainer(t.container().select(".top-toolbar"))).call(svgIcon("#iD-icon-sidebar-"+("rtl"===_mainLocalizer.textDirection()?"right":"left")))}};return e}function uiToolUndoRedo(a){var e={id:"undo_redo",label:_t("toolbar.undo_redo")},s=[{id:"undo",cmd:uiCmd("⌘Z"),action:function(){a.undo()},annotation:function(){return a.history().undoAnnotation()},icon:"iD-icon-"+("rtl"===_mainLocalizer.textDirection()?"redo":"undo")},{id:"redo",cmd:uiCmd("⌘⇧Z"),action:function(){a.redo()},annotation:function(){return a.history().redoAnnotation()},icon:"iD-icon-"+("rtl"===_mainLocalizer.textDirection()?"undo":"redo")}];function l(){return a.mode()&&"save"!==a.mode().id&&a.map().editableDataEnabled(!0)}return e.render=function(e){var r,t=uiTooltip().placement("bottom").title(function(e){return e.annotation()?_t(e.id+".tooltip",{action:e.annotation()}):_t(e.id+".nothing")}).keys(function(e){return[e.cmd]}).scrollContainer(a.container().select(".top-toolbar")),n=e.selectAll("button").data(s).enter().append("button").attr("class",function(e){return"disabled "+e.id+"-button bar-button"}).on("pointerup",function(){r=event.pointerType}).on("click",function(e){event.preventDefault();var t,n=e.annotation();l()&&n&&e.action(),!l()||"touch"!==r&&"pen"!==r||(t=n?_t(e.id+".tooltip",{action:n}):_t(e.id+".nothing"),a.ui().flash.duration(2e3).iconName("#"+e.icon).iconClass(n?"":"disabled").text(t)()),r=null}).call(t);n.each(function(e){select(this).call(svgIcon("#"+e.icon))}),a.keybinding().on(s[0].cmd,function(){event.preventDefault(),l()&&s[0].action()}).on(s[1].cmd,function(){event.preventDefault(),l()&&s[1].action()});var i=debounce(o,500,{leading:!0,trailing:!0});function o(){n.classed("disabled",function(e){return!l()||!e.annotation()}).each(function(){var e=select(this);e.select(".tooltip.in").empty()||e.call(t.updateContent)})}a.map().on("move.undo_redo",i).on("drawn.undo_redo",i),a.history().on("change.undo_redo",function(e){e&&o()}),a.on("enter.undo_redo",o)},e.uninstall=function(){a.keybinding().off(s[0].cmd).off(s[1].cmd),a.map().on("move.undo_redo",null).on("drawn.undo_redo",null),a.history().on("change.undo_redo",null),a.on("enter.undo_redo",null)},e}function uiTopToolbar(o){var a=uiToolSidebarToggle(o),s=uiToolOldDrawModes(o),l=uiToolNotes(o),c=uiToolUndoRedo(o),u=uiToolSave(o);return function(i){i.on("wheel.topToolbar",function(){event.deltaX||(i.node().scrollLeft+=event.deltaY)});var e=debounce(t,500,{leading:!0,trailing:!0});function t(){var e,t=[a,"spacer",s];t.push("spacer"),(e=o.layers().layer("notes"))&&e.enabled()&&(t=t.concat([l,"spacer"])),t=t.concat([c,u]);var n=i.selectAll(".toolbar-item").data(t,function(e){return e.id||e});n.exit().each(function(e){e.uninstall&&e.uninstall()}).remove();var r=n.enter().append("div").attr("class",function(e){var t="toolbar-item "+(e.id||e).replace("_","-");return e.klass&&(t+=" "+e.klass),t}).filter(function(e){return"spacer"!==e});r.append("div").attr("class","item-content").each(function(e){select(this).call(e.render,i)}),r.append("div").attr("class","item-label").text(function(e){return e.label})}o.layers().on("change.topToolbar",e),t()}}var sawVersion=null,isNewVersion=!1,isNewUser=!1;function uiVersion(e){var t=e.version,n=t.match(/\d+\.\d+\.\d+.*/);return null===sawVersion&&null!==n&&(isNewVersion=corePreferences("sawVersion")?(isNewUser=!1,corePreferences("sawVersion")!==t&&-1===t.indexOf("-")):isNewUser=!0,corePreferences("sawVersion",t),sawVersion=t),function(e){e.append("a").attr("target","_blank").attr("href","https://github.com/openstreetmap/iD").text(t),isNewVersion&&!isNewUser&&e.append("div").attr("class","badge").append("a").attr("target","_blank").attr("href","https://github.com/openstreetmap/iD/blob/release/CHANGELOG.md#whats-new").call(svgIcon("#maki-gift-11")).call(uiTooltip().title(_t("version.whats_new",{version:t})).placement("top"))}}function uiZoom(o){var a=[{id:"zoom-in",icon:"iD-icon-plus",title:_t("zoom.in"),action:s,disabled:function(){return!o.map().canZoomIn()},disabledTitle:_t("zoom.disabled.in"),key:"+"},{id:"zoom-out",icon:"iD-icon-minus",title:_t("zoom.out"),action:l,disabled:function(){return!o.map().canZoomOut()},disabledTitle:_t("zoom.disabled.out"),key:"-"}];function s(){event.preventDefault(),o.map().zoomIn()}function l(){event.preventDefault(),o.map().zoomOut()}function c(){event.preventDefault(),o.map().zoomInFurther()}function u(){event.preventDefault(),o.map().zoomOutFurther()}return function(e){var t,n=uiTooltip().placement("rtl"===_mainLocalizer.textDirection()?"right":"left").title(function(e){return e.disabled()?e.disabledTitle:e.title}).keys(function(e){return[e.key]}),r=e.selectAll("button").data(a).enter().append("button").attr("class",function(e){return e.id}).on("pointerup.editor",function(){t=event.pointerType}).on("click.editor",function(e){e.disabled()?"touch"!==t&&"pen"!==t||o.ui().flash.duration(2e3).iconName("#"+e.icon).iconClass("disabled").text(e.disabledTitle)():e.action(),t=null}).call(n);function i(){r.classed("disabled",function(e){return e.disabled()}).each(function(){var e=select(this);e.select(".tooltip.in").empty()||e.call(n.updateContent)})}r.each(function(e){select(this).call(svgIcon("#"+e.icon,"light"))}),["plus","ffplus","=","ffequals"].forEach(function(e){o.keybinding().on([e],s),o.keybinding().on([uiCmd("⌘"+e)],c)}),["_","-","ffminus","dash"].forEach(function(e){o.keybinding().on([e],l),o.keybinding().on([uiCmd("⌘"+e)],u)}),i(),o.map().on("move.uiZoom",i)}}function uiZoomToSelection(i){function o(){var e=i.mode();return!e||!e.zoomToSelected}var t;function a(){t=event.pointerType}function s(){var e;event.preventDefault(),o()?"touch"!==t&&"pen"!==t||i.ui().flash.duration(2e3).iconName("#iD-icon-framed-dot").iconClass("disabled").text(_t("inspector.zoom_to.no_selection"))():(e=i.mode())&&e.zoomToSelected&&e.zoomToSelected(),t=null}return function(e){var t=uiTooltip().placement("rtl"===_mainLocalizer.textDirection()?"right":"left").title(function(){return o()?_t("inspector.zoom_to.no_selection"):_t("inspector.zoom_to.title")}).keys([_t("inspector.zoom_to.key")]),n=e.append("button").on("pointerup",a).on("click",s).call(svgIcon("#iD-icon-framed-dot","light")).call(t);function r(){n.classed("disabled",o()),n.select(".tooltip.in").empty()||n.call(t.updateContent)}i.on("enter.uiZoomToSelection",r),r()}}function uiPane(n,r){var i,o,t,a="",s="",l="",c=select(null),u={id:n};function p(){r.ui().togglePanes()}return u.title=function(e){return arguments.length?(a=e,u):a},u.key=function(e){return arguments.length?(i=e,u):i},u.description=function(e){return arguments.length?(s=e,u):s},u.iconName=function(e){return arguments.length?(l=e,u):l},u.sections=function(e){return arguments.length?(o=e,u):o},u.selection=function(){return c},u.togglePane=function(){event&&event.preventDefault(),t.hide(),r.ui().togglePanes(c.classed("shown")?void 0:c)},u.renderToggleButton=function(e){t=t||uiTooltip().placement("rtl"===_mainLocalizer.textDirection()?"right":"left").title(s).keys([i]),e.append("button").on("click",u.togglePane).call(svgIcon("#"+l,"light")).call(t)},u.renderContent=function(t){o&&o.forEach(function(e){t.call(e.render)})},u.renderPane=function(e){var t=(c=e.append("div").attr("class","fillL map-pane hide "+n+"-pane").attr("pane",n)).append("div").attr("class","pane-heading");t.append("h2").text(a),t.append("button").on("click",p).call(svgIcon("#iD-icon-close")),c.append("div").attr("class","pane-content").call(u.renderContent),i&&r.keybinding().on(i,u.togglePane)},u}function uiSectionBackgroundDisplayOptions(o){var a=uiSection("background-display-options",o).title(_t("background.display_options")).disclosureContent(function(e){var t=e.selectAll(".display-options-container").data([0]),n=t.enter().append("div").attr("class","display-options-container controls-list"),r=n.selectAll(".display-control").data(i).enter().append("div").attr("class",function(e){return"display-control display-control-"+e});r.append("h5").text(function(e){return _t("background."+e)}).append("span").attr("class",function(e){return"display-option-value display-option-value-"+e}),r.append("input").attr("class",function(e){return"display-option-input display-option-input-"+e}).attr("type","range").attr("min",s).attr("max",l).attr("step","0.05").on("input",function(e){u(e,select(this).property("value"))}),r.append("button").attr("title",_t("background.reset")).attr("class",function(e){return"display-option-reset display-option-reset-"+e}).on("click",function(e){0===event.button&&u(e,1)}).call(svgIcon("#iD-icon-"+("rtl"===_mainLocalizer.textDirection()?"redo":"undo"))),n.append("a").attr("class","display-option-resetlink").attr("href","#").text(_t("background.reset_all")).on("click",function(){for(var e=0;e<i.length;e++)u(i[e],1)}),(t=n.merge(t)).selectAll(".display-option-input").property("value",function(e){return c[e]}),t.selectAll(".display-option-value").text(function(e){return Math.floor(100*c[e])+"%"}),t.selectAll(".display-option-reset").classed("disabled",function(e){return 1===c[e]}),n.size()&&1!==c.brightness&&o.background().brightness(c.brightness)}),e=utilDetect(),t=corePreferences("background-opacity"),s=.25,l=e.cssfilters?2:1,i=e.cssfilters?["brightness","contrast","saturation","sharpness"]:["brightness"],c={brightness:null!==t?+t:1,contrast:1,saturation:1,sharpness:1};function u(e,t){var n,r,i;!t&&event&&event.target&&(t=event.target.value),n=t,r=s,i=l,t=Math.max(r,Math.min(n,i)),c[e]=t,o.background()[e](t),"brightness"===e&&corePreferences("background-opacity",t),a.reRender()}return a}function uiSettingsCustomBackground(){var s=dispatch("change");return utilRebind(function(e){var t={template:corePreferences("background-custom-template")},n={template:corePreferences("background-custom-template")},r=uiConfirm(e).okButton();r.classed("settings-modal settings-custom-background",!0),r.select(".modal-section.header").append("h3").text(_t("settings.custom_background.header"));var i=r.select(".modal-section.message-text"),o=_t("settings.custom_background.instructions.info")+"\n\n#### "+_t("settings.custom_background.instructions.wms.tokens_label")+"\n* "+_t("settings.custom_background.instructions.wms.tokens.proj")+"\n* "+_t("settings.custom_background.instructions.wms.tokens.wkid")+"\n* "+_t("settings.custom_background.instructions.wms.tokens.dimensions")+"\n* "+_t("settings.custom_background.instructions.wms.tokens.bbox")+"\n\n#### "+_t("settings.custom_background.instructions.tms.tokens_label")+"\n* "+_t("settings.custom_background.instructions.tms.tokens.xyz")+"\n* "+_t("settings.custom_background.instructions.tms.tokens.flipped_y")+"\n* "+_t("settings.custom_background.instructions.tms.tokens.switch")+"\n* "+_t("settings.custom_background.instructions.tms.tokens.quadtile")+"\n* "+_t("settings.custom_background.instructions.tms.tokens.scale_factor")+"\n\n#### "+_t("settings.custom_background.instructions.example")+"\n`https://{switch:a,b,c}.tile.openstreetmap.org/{zoom}/{x}/{y}.png`";i.append("div").attr("class","instructions-template").html(marked_1(o)),i.append("textarea").attr("class","field-template").attr("placeholder",_t("settings.custom_background.template.placeholder")).call(utilNoAuto).property("value",n.template);var a=r.select(".modal-section.buttons");a.insert("button",".ok-button").attr("class","button cancel-button secondary-action").text(_t("confirm.cancel")),a.select(".cancel-button").on("click.cancel",function(){i.select(".field-template").property("value",t.template),corePreferences("background-custom-template",t.template),this.blur(),r.close()}),a.select(".ok-button").attr("disabled",function(){return null}).on("click.save",function(){n.template=i.select(".field-template").property("value"),corePreferences("background-custom-template",n.template),this.blur(),r.close(),s.call("change",this,n)})},s,"on")}function uiSectionBackgroundList(l){var a=select(null),t=l.background().findSource("custom"),e=uiSettingsCustomBackground().on("change",function(e){e&&e.template?(t.template(e.template),p(t)):(t.template(""),p(l.background().findSource("none")))}),n=uiSection("background-list",l).title(_t("background.backgrounds")).disclosureContent(function(e){var t=e.selectAll(".layer-background-list").data([0]);a=t.enter().append("ul").attr("class","layer-list layer-background-list").attr("dir","auto").merge(t);var n=e.selectAll(".bg-extras-list").data([0]).enter().append("ul").attr("class","layer-list bg-extras-list"),r=n.append("li").attr("class","minimap-toggle-item").append("label").call(uiTooltip().title(_t("background.minimap.tooltip")).keys([_t("background.minimap.key")]).placement("top"));r.append("input").attr("type","checkbox").on("change",function(){event.preventDefault(),uiMapInMap.toggle()}),r.append("span").text(_t("background.minimap.description"));var i=n.append("li").attr("class","background-panel-toggle-item").append("label").call(uiTooltip().title(_t("background.panel.tooltip")).keys([uiCmd("⌘⇧"+_t("info_panels.background.key"))]).placement("top"));i.append("input").attr("type","checkbox").on("change",function(){event.preventDefault(),l.ui().info.toggle("background")}),i.append("span").text(_t("background.panel.description"));var o=n.append("li").attr("class","location-panel-toggle-item").append("label").call(uiTooltip().title(_t("background.location_panel.tooltip")).keys([uiCmd("⌘⇧"+_t("info_panels.location.key"))]).placement("top"));o.append("input").attr("type","checkbox").on("change",function(){event.preventDefault(),l.ui().info.toggle("location")}),o.append("span").text(_t("background.location_panel.description")),e.selectAll(".imagery-faq").data([0]).enter().append("div").attr("class","imagery-faq").append("a").attr("target","_blank").call(svgIcon("#iD-icon-out-link","inline")).attr("href","https://github.com/openstreetmap/iD/blob/develop/FAQ.md#how-can-i-report-an-issue-with-background-imagery").append("span").text(_t("background.imagery_problem_faq")),a.call(s,"radio",p,function(e){return!e.isHidden()&&!e.overlay})});function c(){return corePreferences("background-last-used-toggle")}function r(e){e.each(function(e,t,n){var r=select(this).select("label"),i=r.select("span"),o=t<n.length/2?"bottom":"top",a=e.description(),s=i.property("clientWidth")!==i.property("scrollWidth");r.call(uiTooltip().destroyAny),e.id===c()?r.call(uiTooltip().placement(o).title("<div>"+_t("background.switch")+"</div>").keys([uiCmd("⌘"+_t("background.key"))])):(a||s)&&r.call(uiTooltip().placement(o).title(a||e.name()))})}function s(e,t,n,r){var i=l.background().sources(l.map().extent(),l.map().zoom(),!0).filter(r),o=e.selectAll("li").data(i,function(e){return e.name()});o.exit().remove();var a=o.enter().append("li").classed("layer-custom",function(e){return"custom"===e.id}).classed("best",function(e){return e.best()}),s=a.append("label");s.append("input").attr("type",t).attr("name","layers").on("change",n),s.append("span").text(function(e){return e.name()}),a.filter(function(e){return"custom"===e.id}).append("button").attr("class","layer-browse").call(uiTooltip().title(_t("settings.custom_background.tooltip")).placement("rtl"===_mainLocalizer.textDirection()?"right":"left")).on("click",d).call(svgIcon("#iD-icon-more")),a.filter(function(e){return e.best()}).append("div").attr("class","best").call(uiTooltip().title(_t("background.best_imagery")).placement("rtl"===_mainLocalizer.textDirection()?"right":"left")).append("span").html("&#9733;"),e.selectAll("li").sort(function(e,t){return e.best()&&!t.best()?-1:t.best()&&!e.best()?1:d3_descending(e.area(),t.area())||d3_ascending(e.name(),t.name())||0}),e.call(u)}function u(e){function t(e){return l.background().showsLayer(e)}e.selectAll("li").classed("active",t).classed("switch",function(e){return e.id===c()}).call(r).selectAll("input").property("checked",t)}function p(e){if("custom"===e.id&&!e.template())return d();event.preventDefault(),corePreferences("background-last-used-toggle",l.background().baseLayerSource().id),corePreferences("background-last-used",e.id),l.background().baseLayerSource(e),document.activeElement.blur()}function d(){event.preventDefault(),l.container().call(e)}return l.background().on("change.background_list",function(){a.call(u)}),l.map().on("move.background_list",debounce(function(){window.requestIdleCallback(n.reRender)},1e3)),n}function uiSectionBackgroundOffset(i){var e=uiSection("background-offset",i).title(_t("background.fix_misalignment")).disclosureContent(function(e){var t=e.selectAll(".nudge-container").data([0]).enter().append("div").attr("class","nudge-container cf");t.append("div").attr("class","nudge-instructions").text(_t("background.offset")),t.append("div").attr("class","nudge-outer-rect").on(o+"down",u).append("div").attr("class","nudge-inner-rect").append("input").on("change",c),t.append("div").selectAll("button").data(n).enter().append("button").attr("class",function(e){return e[0]+" nudge"}).on("contextmenu",r).on(o+"down",function(e){var t,n,r;function i(){window.clearTimeout(r),window.clearInterval(n),select(window).on(o+"up.buttonoffset",null,!0).on(o+"down.buttonoffset",null,!0)}0===event.button&&(t=e[1],r=window.setTimeout(function(){n=window.setInterval(l.bind(null,t),100)},500),select(window).on(o+"up.buttonoffset",i,!0).on(o+"down.buttonoffset",i,!0),l(t))}),t.append("button").attr("title",_t("background.reset")).attr("class","nudge-reset disabled").on("contextmenu",r).on("click",function(){event.preventDefault(),0===event.button&&s()}).call(svgIcon("#iD-icon-"+("rtl"===_mainLocalizer.textDirection()?"redo":"undo"))),a()}).expandedByDefault(!1),o="PointerEvent"in window?"pointer":"mouse",n=[["right",[.5,0]],["top",[0,-.5]],["left",[-.5,0]],["bottom",[0,.5]]];function r(){event.stopPropagation(),event.preventDefault()}function a(){var e=geoOffsetToMeters(i.background().offset()),t=+e[0].toFixed(2),n=+e[1].toFixed(2);i.container().selectAll(".nudge-inner-rect").select("input").classed("error",!1).property("value",t+", "+n),i.container().selectAll(".nudge-reset").classed("disabled",function(){return 0==t&&0==n})}function s(){i.background().offset([0,0]),a()}function l(e){i.background().nudge(e,i.map().zoom()),a()}function c(){var e=select(this),t=e.node().value;if(""===t)return s();2===(t=t.replace(/;/g,",").split(",").map(function(e){return!isNaN(e)&&e})).length&&t[0]&&t[1]?(i.background().offset(geoMetersToOffset(t)),a()):e.classed("error",!0)}function u(){var n,r;function e(){r===(event.pointerId||"mouse")&&0===event.button&&(i.container().selectAll(".nudge-surface").remove(),select(window).on(".drag-bg-offset",null))}0===event.button&&(n=[event.clientX,event.clientY],r=event.pointerId||"mouse",i.container().append("div").attr("class","nudge-surface"),select(window).on(o+"move.drag-bg-offset",function(){if(r!==(event.pointerId||"mouse"))return;var e=[event.clientX,event.clientY],t=[-(n[0]-e[0])/4,-(n[1]-e[1])/4];n=e,l(t)}).on(o+"up.drag-bg-offset",e),"pointer"===o&&select(window).on("pointercancel.drag-bg-offset",e))}return i.background().on("change.backgroundOffset-update",a),e}function uiSectionOverlayList(s){var e=uiSection("overlay-list",s).title(_t("background.overlays")).disclosureContent(function(e){var t=e.selectAll(".layer-overlay-list").data([0]);(n=t.enter().append("ul").attr("class","layer-list layer-overlay-list").attr("dir","auto").merge(t)).call(o,"checkbox",i,function(e){return!e.isHidden()&&e.overlay})}),n=select(null);function r(e){e.each(function(e,t,n){var r=select(this).select("label"),i=r.select("span"),o=t<n.length/2?"bottom":"top",a=e.description(),s=i.property("clientWidth")!==i.property("scrollWidth");r.call(uiTooltip().destroyAny),(a||s)&&r.call(uiTooltip().placement(o).title(a||e.name()))})}function l(e){function t(e){return s.background().showsLayer(e)}e.selectAll("li").classed("active",t).call(r).selectAll("input").property("checked",t)}function i(e){event.preventDefault(),s.background().toggleOverlayLayer(e),n.call(l),document.activeElement.blur()}function o(e,t,n,r){var i=s.background().sources(s.map().extent(),s.map().zoom(),!0).filter(r),o=e.selectAll("li").data(i,function(e){return e.name()});o.exit().remove();var a=o.enter().append("li").append("label");a.append("input").attr("type",t).attr("name","layers").on("change",n),a.append("span").text(function(e){return e.name()}),e.selectAll("li").sort(function(e,t){return e.best()&&!t.best()?-1:t.best()&&!e.best()?1:d3_descending(e.area(),t.area())||d3_ascending(e.name(),t.name())||0}),e.call(l)}return s.map().on("move.overlay_list",debounce(function(){window.requestIdleCallback(e.reRender)},1e3)),e}function uiPaneBackground(e){return uiPane("background",e).key(_t("background.key")).title(_t("background.title")).description(_t("background.description")).iconName("iD-icon-layers").sections([uiSectionBackgroundList(e),uiSectionOverlayList(e),uiSectionBackgroundDisplayOptions(e),uiSectionBackgroundOffset(e)])}function uiPaneHelp(r){var a={"help.help.open_data_h":3,"help.help.before_start_h":3,"help.help.open_source_h":3,"help.overview.navigation_h":3,"help.overview.features_h":3,"help.editing.select_h":3,"help.editing.multiselect_h":3,"help.editing.undo_redo_h":3,"help.editing.save_h":3,"help.editing.upload_h":3,"help.editing.backups_h":3,"help.editing.keyboard_h":3,"help.feature_editor.type_h":3,"help.feature_editor.fields_h":3,"help.feature_editor.tags_h":3,"help.points.add_point_h":3,"help.points.move_point_h":3,"help.points.delete_point_h":3,"help.lines.add_line_h":3,"help.lines.modify_line_h":3,"help.lines.connect_line_h":3,"help.lines.disconnect_line_h":3,"help.lines.move_line_h":3,"help.lines.delete_line_h":3,"help.areas.point_or_area_h":3,"help.areas.add_area_h":3,"help.areas.square_area_h":3,"help.areas.modify_area_h":3,"help.areas.delete_area_h":3,"help.relations.edit_relation_h":3,"help.relations.maintain_relation_h":3,"help.relations.relation_types_h":2,"help.relations.multipolygon_h":3,"help.relations.turn_restriction_h":3,"help.relations.route_h":3,"help.relations.boundary_h":3,"help.notes.add_note_h":3,"help.notes.update_note_h":3,"help.notes.save_note_h":3,"help.imagery.sources_h":3,"help.imagery.offsets_h":3,"help.streetlevel.using_h":3,"help.gps.using_h":3,"help.qa.tools_h":3,"help.qa.issues_h":3},u=[["help",["welcome","open_data_h","open_data","before_start_h","before_start","open_source_h","open_source","open_source_help"]],["overview",["navigation_h","navigation_drag","navigation_zoom","features_h","features","nodes_ways"]],["editing",["select_h","select_left_click","select_right_click","select_space","multiselect_h","multiselect","multiselect_shift_click","multiselect_lasso","undo_redo_h","undo_redo","save_h","save","save_validation","upload_h","upload","backups_h","backups","keyboard_h","keyboard"]],["feature_editor",["intro","definitions","type_h","type","type_picker","fields_h","fields_all_fields","fields_example","fields_add_field","tags_h","tags_all_tags","tags_resources"]],["points",["intro","add_point_h","add_point","add_point_finish","move_point_h","move_point","delete_point_h","delete_point","delete_point_command"]],["lines",["intro","add_line_h","add_line","add_line_draw","add_line_continue","add_line_finish","modify_line_h","modify_line_dragnode","modify_line_addnode","connect_line_h","connect_line","connect_line_display","connect_line_drag","connect_line_tag","disconnect_line_h","disconnect_line_command","move_line_h","move_line_command","move_line_connected","delete_line_h","delete_line","delete_line_command"]],["areas",["intro","point_or_area_h","point_or_area","add_area_h","add_area_command","add_area_draw","add_area_continue","add_area_finish","square_area_h","square_area_command","modify_area_h","modify_area_dragnode","modify_area_addnode","delete_area_h","delete_area","delete_area_command"]],["relations",["intro","edit_relation_h","edit_relation","edit_relation_add","edit_relation_delete","maintain_relation_h","maintain_relation","relation_types_h","multipolygon_h","multipolygon","multipolygon_create","multipolygon_merge","turn_restriction_h","turn_restriction","turn_restriction_field","turn_restriction_editing","route_h","route","route_add","boundary_h","boundary","boundary_add"]],["notes",["intro","add_note_h","add_note","place_note","move_note","update_note_h","update_note","save_note_h","save_note"]],["imagery",["intro","sources_h","choosing","sources","offsets_h","offset","offset_change"]],["streetlevel",["intro","using_h","using","photos","viewer"]],["gps",["intro","survey","using_h","using","tracing","upload"]],["qa",["intro","tools_h","tools","issues_h","issues"]]].map(function(e){var i="help."+e[0],o={version:r.version},t=e[1].reduce(function(e,t){var n=i+"."+t,r=a[n];return e+(r?Array(r+1).join("#")+" ":"")+helpString(n,o)+"\n\n"},"");return{title:_t(i+".title"),html:marked_1(t.trim()).replace(/<code>/g,"<kbd>").replace(/<\/code>/g,"</kbd>")}}),p=uiPane("help",r).key(_t("help.key")).title(_t("help.title")).description(_t("help.title")).iconName("iD-icon-help");return p.renderContent=function(o){function a(t,n){var r="rtl"===_mainLocalizer.textDirection();function e(e){n<u.length-1&&e.append("a").attr("class","next").on("click",function(){a(u[n+1],n+1)}).append("span").text(u[n+1].title).call(svgIcon(r?"#iD-icon-backward":"#iD-icon-forward","inline"))}function i(e){0<n&&e.append("a").attr("class","previous").on("click",function(){a(u[n-1],n-1)}).call(svgIcon(r?"#iD-icon-forward":"#iD-icon-backward","inline")).append("span").text(u[n-1].title)}o.property("scrollTop",0),p.selection().select(".pane-heading h2").html(t.title),l.html(t.html),l.selectAll("a").attr("target","_blank"),s.classed("selected",function(e){return e.title===t.title}),c.html(""),r?c.call(e).call(i):c.call(i).call(e)}var e=o.append("ul").attr("class","toc"),s=e.selectAll("li").data(u).enter().append("li").append("a").html(function(e){return e.title}).on("click",a);e.append("li").attr("class","shortcuts").call(uiTooltip().title(_t("shortcuts.tooltip")).keys(["?"]).placement("top")).append("a").on("click",function(){r.container().call(uiShortcuts(r),!0)}).append("div").text(_t("shortcuts.title"));var t=e.append("li").attr("class","walkthrough").append("a").on("click",function(){r.inIntro()||(r.container().call(uiIntro(r)),r.ui().togglePanes())});t.append("svg").attr("class","logo logo-walkthrough").append("use").attr("xlink:href","#iD-logo-walkthrough"),t.append("div").text(_t("splash.walkthrough"));var n=o.append("div").attr("class","left-content"),l=n.append("div").attr("class","body"),c=n.append("div").attr("class","nav");a(u[0],0)},p}function uiSectionValidationIssues(e,a,s){var n=[],t=uiSection(e,s).title(function(){if(!n)return"";var e=1e3<n.length?"1000+":String(n.length);return _t("issues."+a+"s.list_title",{count:e})}).disclosureContent(function(e){var r=s.map().center(),i=s.graph(),t=n.map(function(e){var t=e.extent(i),n=t?geoSphericalDistance(r,t.center()):0;return Object.assign(e,{dist:n})}).sort(function(e,t){return e.dist-t.dist});t=t.slice(0,1e3),e.call(o,t)}).shouldDisplay(function(){return n&&n.length});function r(){return{what:corePreferences("validate-what")||"edited",where:corePreferences("validate-where")||"all"}}function i(){n=s.validator().getIssuesBySeverity(r())[a]}function o(e,t){var n=e.selectAll(".issues-list").data([0]),r=(n=n.enter().append("ul").attr("class","layer-list issues-list "+a+"s-list").merge(n)).selectAll("li").data(t,function(e){return e.id});r.exit().remove();var i=r.enter().append("li").attr("class",function(e){return"issue severity-"+e.severity}).on("click",function(e){s.validator().focusIssue(e)}).on("mouseover",function(e){utilHighlightEntities(e.entityIds,!0,s)}).on("mouseout",function(e){utilHighlightEntities(e.entityIds,!1,s)}),o=i.append("div").attr("class","issue-label").append("span").attr("class","issue-text");o.append("span").attr("class","issue-icon").each(function(e){var t="#iD-icon-"+("warning"===e.severity?"alert":"error");select(this).call(svgIcon(t))}),o.append("span").attr("class","issue-message"),(r=r.merge(i).order()).selectAll(".issue-message").text(function(e){return e.message(s)})}return s.validator().on("validated.uiSectionValidationIssues"+e,function(){window.requestIdleCallback(function(){i(),t.reRender()})}),s.map().on("move.uiSectionValidationIssues"+e,debounce(function(){window.requestIdleCallback(function(){"visible"===r().where&&i(),t.reRender()})},1e3)),t}function uiSectionValidationOptions(i){return uiSection("issues-options",i).content(function(e){var t=e.selectAll(".issues-options-container").data([0]);t=t.enter().append("div").attr("class","issues-options-container").merge(t);var n=t.selectAll(".issues-option").data([{key:"what",values:["edited","all"]},{key:"where",values:["visible","all"]}],function(e){return e.key}).enter().append("div").attr("class",function(e){return"issues-option issues-option-"+e.key});n.append("div").attr("class","issues-option-title").text(function(e){return _t("issues.options."+e.key+".title")});var r=n.selectAll("label").data(function(t){return t.values.map(function(e){return{value:e,key:t.key}})}).enter().append("label");r.append("input").attr("type","radio").attr("name",function(e){return"issues-option-"+e.key}).attr("value",function(e){return e.value}).property("checked",function(e){return{what:corePreferences("validate-what")||"edited",where:corePreferences("validate-where")||"all"}[e.key]===e.value}).on("change",function(e){!function(e,t){!t&&event&&event.target&&(t=event.target.value);corePreferences("validate-"+e,t),i.validator().validate()}(e.key,e.value)}),r.append("span").text(function(e){return _t("issues.options."+e.key+"."+e.value)})})}function uiSectionValidationRules(i){var p=0,d=20,f=5,e=uiSection("issues-rules",i).disclosureContent(function(e){var t=e.selectAll(".issues-rulelist-container").data([0]),n=t.enter().append("div").attr("class","issues-rulelist-container");n.append("ul").attr("class","layer-list issue-rules-list");var r=n.append("div").attr("class","issue-rules-links section-footer");r.append("a").attr("class","issue-rules-link").attr("href","#").text(_t("issues.enable_all")).on("click",function(){i.validator().disableRules([])}),r.append("a").attr("class","issue-rules-link").attr("href","#").text(_t("issues.disable_all")).on("click",function(){i.validator().disableRules(o)}),(t=t.merge(n)).selectAll(".issue-rules-list").call(a,o,"checkbox","rule",l,s)}).title(_t("issues.rules.title")),o=i.validator().getRuleKeys().filter(function(e){return"maprules"!==e}).sort(function(e,t){return _t("issues."+e+".title")<_t("issues."+t+".title")?-1:1});function a(e,t,n,r,i,o){var a=e.selectAll("li").data(t);a.exit().remove();var s=a.enter().append("li");"rule"===r&&s.call(uiTooltip().title(function(e){return _t("issues."+e+".tip")}).placement("top"));var l=s.append("label");l.append("input").attr("type",n).attr("name",r).on("change",i),l.append("span").html(function(e){var t={};return"unsquare_way"===e&&(t.val='<span class="square-degrees"></span>'),_t("issues."+e+".title",t)}),(a=a.merge(s)).classed("active",o).selectAll("input").property("checked",o).property("indeterminate",!1);var c=corePreferences("validate-square-degrees");null===c&&(c=""+f);var u=a.selectAll(".square-degrees").selectAll(".square-degrees-input").data([0]);u.enter().append("input").attr("type","number").attr("min",""+p).attr("max",""+d).attr("step","0.5").attr("class","square-degrees-input").call(utilNoAuto).on("click",function(){event.preventDefault(),event.stopPropagation(),this.select()}).on("keyup",function(){13===event.keyCode&&(this.blur(),this.select())}).on("blur",h).merge(u).property("value",c)}function h(){var e=select(this),t=utilGetSetValue(e).trim(),n=parseFloat(t,10);isFinite(n)?d<n?n=d:n<p&&(n=p):n=f,t=""+(n=Math.round(10*n)/10),e.property("value",t),corePreferences("validate-square-degrees",t),i.validator().reloadUnsquareIssues()}function s(e){return i.validator().isRuleEnabled(e)}function l(e){i.validator().toggleRule(e)}return i.validator().on("validated.uiSectionValidationRules",function(){window.requestIdleCallback(e.reRender)}),e}function uiSectionValidationStatus(o){var e=uiSection("issues-status",o).content(function(e){var t=e.selectAll(".box").data([0]).enter().append("div").attr("class","box");t.append("div").call(svgIcon("#iD-icon-apply","pre-text"));var n=t.append("span");n.append("strong").attr("class","message"),n.append("br"),n.append("span").attr("class","details"),function(e){var t=o.validator().getIssues({what:"all",where:"all",includeDisabledRules:!0,includeIgnored:"only"}),n=e.selectAll(".reset-ignored").data(t.length?[0]:[]);n.exit().remove();var r=n.enter().append("div").attr("class","reset-ignored section-footer");r.append("a").attr("href","#"),(n=n.merge(r)).select("a").text(_t("issues.reset_ignored",{count:t.length.toString()})),n.on("click",function(){o.validator().resetIgnoredIssues()})}(e),function(i){var e,t=r();function n(e){for(var t in e){var n=e[t],r=o.validator().getIssues(n);if(r.length)return void i.select(".box .details").text(_t("issues.no_issues.hidden_issues."+t,{count:r.length.toString()}))}i.select(".box .details").text(_t("issues.no_issues.hidden_issues.none"))}"edited"===t.what&&"visible"===t.where?(e="edits_in_view",n({elsewhere:{what:"edited",where:"all"},everything_else:{what:"all",where:"visible"},disabled_rules:{what:"edited",where:"visible",includeDisabledRules:"only"},everything_else_elsewhere:{what:"all",where:"all"},disabled_rules_elsewhere:{what:"edited",where:"all",includeDisabledRules:"only"},ignored_issues:{what:"edited",where:"visible",includeIgnored:"only"},ignored_issues_elsewhere:{what:"edited",where:"all",includeIgnored:"only"}})):"edited"===t.what&&"all"===t.where?(e="edits",n({everything_else:{what:"all",where:"all"},disabled_rules:{what:"edited",where:"all",includeDisabledRules:"only"},ignored_issues:{what:"edited",where:"all",includeIgnored:"only"}})):"all"===t.what&&"visible"===t.where?(e="everything_in_view",n({elsewhere:{what:"all",where:"all"},disabled_rules:{what:"all",where:"visible",includeDisabledRules:"only"},disabled_rules_elsewhere:{what:"all",where:"all",includeDisabledRules:"only"},ignored_issues:{what:"all",where:"visible",includeIgnored:"only"},ignored_issues_elsewhere:{what:"all",where:"all",includeIgnored:"only"}})):"all"===t.what&&"all"===t.where&&(e="everything",n({disabled_rules:{what:"all",where:"all",includeDisabledRules:"only"},ignored_issues:{what:"all",where:"all",includeIgnored:"only"}}));"edited"===t.what&&0===o.history().difference().summary().length&&(e="no_edits");i.select(".box .message").text(_t("issues.no_issues.message."+e))}(e)}).shouldDisplay(function(){return 0===o.validator().getIssues(r()).length});function r(){return{what:corePreferences("validate-what")||"edited",where:corePreferences("validate-where")||"all"}}return o.validator().on("validated.uiSectionValidationStatus",function(){window.requestIdleCallback(e.reRender)}),o.map().on("move.uiSectionValidationStatus",debounce(function(){window.requestIdleCallback(e.reRender)},1e3)),e}function uiPaneIssues(e){return uiPane("issues",e).key(_t("issues.key")).title(_t("issues.title")).description(_t("issues.title")).iconName("iD-icon-alert").sections([uiSectionValidationOptions(e),uiSectionValidationStatus(e),uiSectionValidationIssues("issues-errors","error",e),uiSectionValidationIssues("issues-warnings","warning",e),uiSectionValidationRules(e)])}function uiSettingsCustomData(s){var l=dispatch("change");return utilRebind(function(e){var t=s.layers().layer("data"),n={fileList:t&&t.fileList()||null,url:corePreferences("settings-custom-data-url")},r={fileList:t&&t.fileList()||null,url:corePreferences("settings-custom-data-url")},i=uiConfirm(e).okButton();i.classed("settings-modal settings-custom-data",!0),i.select(".modal-section.header").append("h3").text(_t("settings.custom_data.header"));var o=i.select(".modal-section.message-text");o.append("pre").attr("class","instructions-file").text(_t("settings.custom_data.file.instructions")),o.append("input").attr("class","field-file").attr("type","file").property("files",r.fileList).on("change",function(){var e=event.target.files;e&&e.length?(r.url="",o.select(".field-url").property("value",""),r.fileList=e):r.fileList=null}),o.append("h4").text(_t("settings.custom_data.or")),o.append("pre").attr("class","instructions-url").text(_t("settings.custom_data.url.instructions")),o.append("textarea").attr("class","field-url").attr("placeholder",_t("settings.custom_data.url.placeholder")).call(utilNoAuto).property("value",r.url);var a=i.select(".modal-section.buttons");a.insert("button",".ok-button").attr("class","button cancel-button secondary-action").text(_t("confirm.cancel")),a.select(".cancel-button").on("click.cancel",function(){o.select(".field-url").property("value",n.url),corePreferences("settings-custom-data-url",n.url),this.blur(),i.close()}),a.select(".ok-button").attr("disabled",function(){return null}).on("click.save",function(){r.url=o.select(".field-url").property("value").trim(),r.url&&(r.fileList=null);r.fileList&&(r.url="");corePreferences("settings-custom-data-url",r.url),this.blur(),i.close(),l.call("change",this,r)})},l,"on")}function uiSectionDataLayers(u){var e=uiSettingsCustomData(u).on("change",function(e){var t=p.layer("data");e&&e.url?t.url(e.url):e&&e.fileList&&t.fileList(e.fileList)}),p=u.layers(),t=uiSection("data-layers",u).title(_t("map_data.data_layers")).disclosureContent(function(e){var t=e.selectAll(".data-layer-container").data([0]);t.enter().append("div").attr("class","data-layer-container").merge(t).call(n).call(r).call(o).call(i).call(a)});function l(e){var t,n,r,i,o,a;o=t=e,a=p.layer(o),n=!(a&&a.enabled()),(i=u.mode())&&/^draw/.test(i.id)||(r=p.layer(t))&&(r.enabled(n),n||"osm"!==t&&"notes"!==t||u.enter(modeBrowse(u)))}function n(e){var t=["osm","notes"],n=p.all().filter(function(e){return-1!==t.indexOf(e.id)}),r=e.selectAll(".layer-list-osm").data([0]),i=(r=r.enter().append("ul").attr("class","layer-list layer-list-osm").merge(r)).selectAll(".list-item").data(n);i.exit().remove();var o=i.enter().append("li").attr("class",function(e){return"list-item list-item-"+e.id}),a=o.append("label").each(function(e){"osm"===e.id?select(this).call(uiTooltip().title(_t("map_data.layers."+e.id+".tooltip")).keys([uiCmd("⌥"+_t("area_fill.wireframe.key"))]).placement("bottom")):select(this).call(uiTooltip().title(_t("map_data.layers."+e.id+".tooltip")).placement("bottom"))});a.append("input").attr("type","checkbox").on("change",function(e){l(e.id)}),a.append("span").text(function(e){return _t("map_data.layers."+e.id+".title")}),i.merge(o).classed("active",function(e){return e.layer.enabled()}).selectAll("input").property("checked",function(e){return e.layer.enabled()})}function r(e){var t=["keepRight","improveOSM","osmose"],n=p.all().filter(function(e){return-1!==t.indexOf(e.id)}),r=e.selectAll(".layer-list-qa").data([0]),i=(r=r.enter().append("ul").attr("class","layer-list layer-list-qa").merge(r)).selectAll(".list-item").data(n);i.exit().remove();var o=i.enter().append("li").attr("class",function(e){return"list-item list-item-"+e.id}),a=o.append("label").each(function(e){select(this).call(uiTooltip().title(_t("map_data.layers."+e.id+".tooltip")).placement("bottom"))});a.append("input").attr("type","checkbox").on("change",function(e){l(e.id)}),a.append("span").text(function(e){return _t("map_data.layers."+e.id+".title")}),i.merge(o).classed("active",function(e){return e.layer.enabled()}).selectAll("input").property("checked",function(e){return e.layer.enabled()})}function i(e){var t=p.layer("data"),n=geoExtent([-83.5,42.1],[-82.8,42.5]),r=9<u.map().zoom()&&n.contains(u.map().center()),i=e.selectAll(".vectortile-container").data(r?[0]:[]);i.exit().remove();var o=i.enter().append("div").attr("class","vectortile-container");o.append("h4").attr("class","vectortile-header").text("Detroit Vector Tiles (Beta)"),o.append("ul").attr("class","layer-list layer-list-vectortile"),o.append("div").attr("class","vectortile-footer").append("a").attr("target","_blank").attr("tabindex",-1).call(svgIcon("#iD-icon-out-link","inline")).attr("href","https://github.com/osmus/detroit-mapping-challenge").append("span").text("About these layers");var a=(i=i.merge(o)).selectAll(".layer-list-vectortile").selectAll(".list-item").data([{name:"Detroit Neighborhoods/Parks",src:"neighborhoods-parks",tooltip:"Neighborhood boundaries and parks as compiled by City of Detroit in concert with community groups.",template:"https://{switch:a,b,c,d}.tiles.mapbox.com/v4/jonahadkins.cjksmur6x34562qp9iv1u3ksf-54hev,jonahadkins.cjksmqxdx33jj2wp90xd9x2md-4e5y2/{z}/{x}/{y}.vector.pbf?access_token=pk.eyJ1Ijoiam9uYWhhZGtpbnMiLCJhIjoiRlVVVkx3VSJ9.9sdVEK_B_VkEXPjssU5MqA"},{name:"Detroit Composite POIs",src:"composite-poi",tooltip:"Fire Inspections, Business Licenses, and other public location data collated from the City of Detroit.",template:"https://{switch:a,b,c,d}.tiles.mapbox.com/v4/jonahadkins.cjksmm6a02sli31myxhsr7zf3-2sw8h/{z}/{x}/{y}.vector.pbf?access_token=pk.eyJ1Ijoiam9uYWhhZGtpbnMiLCJhIjoiRlVVVkx3VSJ9.9sdVEK_B_VkEXPjssU5MqA"},{name:"Detroit All-The-Places POIs",src:"alltheplaces-poi",tooltip:"Public domain business location data created by web scrapers.",template:"https://{switch:a,b,c,d}.tiles.mapbox.com/v4/jonahadkins.cjksmswgk340g2vo06p1w9w0j-8fjjc/{z}/{x}/{y}.vector.pbf?access_token=pk.eyJ1Ijoiam9uYWhhZGtpbnMiLCJhIjoiRlVVVkx3VSJ9.9sdVEK_B_VkEXPjssU5MqA"}]);a.exit().remove();var s=a.enter().append("li").attr("class",function(e){return"list-item list-item-"+e.src}),l=s.append("label").each(function(e){select(this).call(uiTooltip().title(e.tooltip).placement("top"))});function c(e){return t&&t.template()===e.template}l.append("input").attr("type","radio").attr("name","vectortile").on("change",function(e){corePreferences("settings-custom-data-url",e.template),t&&(t.template(e.template,e.src),t.enabled(!0))}),l.append("span").text(function(e){return e.name}),a.merge(s).classed("active",c).selectAll("input").property("checked",c)}function o(e){var t=p.layer("data"),n=t&&t.hasData(),r=n&&t.enabled(),i=e.selectAll(".layer-list-data").data(t?[0]:[]);i.exit().remove();var o=i.enter().append("ul").attr("class","layer-list layer-list-data"),a=o.append("li").attr("class","list-item-data"),s=a.append("label").call(uiTooltip().title(_t("map_data.layers.custom.tooltip")).placement("top"));s.append("input").attr("type","checkbox").on("change",function(){l("data")}),s.append("span").text(_t("map_data.layers.custom.title")),a.append("button").call(uiTooltip().title(_t("settings.custom_data.tooltip")).placement("rtl"===_mainLocalizer.textDirection()?"right":"left")).on("click",c).call(svgIcon("#iD-icon-more")),a.append("button").call(uiTooltip().title(_t("map_data.layers.custom.zoom")).placement("rtl"===_mainLocalizer.textDirection()?"right":"left")).on("click",function(){event.preventDefault(),event.stopPropagation(),t.fitZoom()}).call(svgIcon("#iD-icon-framed-dot")),(i=i.merge(o)).selectAll(".list-item-data").classed("active",r).selectAll("label").classed("deemphasize",!n).selectAll("input").property("disabled",!n).property("checked",r)}function c(){event.preventDefault(),u.container().call(e)}function a(e){var t=e.selectAll(".md-extras-list").data([0]).enter().append("ul").attr("class","layer-list md-extras-list"),n=t.append("li").attr("class","history-panel-toggle-item").append("label").call(uiTooltip().title(_t("map_data.history_panel.tooltip")).keys([uiCmd("⌘⇧"+_t("info_panels.history.key"))]).placement("top"));n.append("input").attr("type","checkbox").on("change",function(){event.preventDefault(),u.ui().info.toggle("history")}),n.append("span").text(_t("map_data.history_panel.title"));var r=t.append("li").attr("class","measurement-panel-toggle-item").append("label").call(uiTooltip().title(_t("map_data.measurement_panel.tooltip")).keys([uiCmd("⌘⇧"+_t("info_panels.measurement.key"))]).placement("top"));r.append("input").attr("type","checkbox").on("change",function(){event.preventDefault(),u.ui().info.toggle("measurement")}),r.append("span").text(_t("map_data.measurement_panel.title"))}return u.layers().on("change.uiSectionDataLayers",t.reRender),u.map().on("move.uiSectionDataLayers",debounce(function(){window.requestIdleCallback(t.reRender)},1e3)),t}function uiSectionMapFeatures(c){var i=c.features().keys(),e=uiSection("map-features",c).title(_t("map_data.map_features")).disclosureContent(function(e){var t=e.selectAll(".layer-feature-list-container").data([0]),n=t.enter().append("div").attr("class","layer-feature-list-container");n.append("ul").attr("class","layer-list layer-feature-list");var r=n.append("div").attr("class","feature-list-links section-footer");r.append("a").attr("class","feature-list-link").attr("href","#").text(_t("issues.enable_all")).on("click",function(){c.features().enableAll()}),r.append("a").attr("class","feature-list-link").attr("href","#").text(_t("issues.disable_all")).on("click",function(){c.features().disableAll()}),(t=t.merge(n)).selectAll(".layer-feature-list").call(o,i,"checkbox","feature",s,a)}).expandedByDefault(!1);function o(e,t,n,i,r,o){var a=e.selectAll("li").data(t);a.exit().remove();var s=a.enter().append("li").call(uiTooltip().title(function(e){var t,n,r=_t(i+"."+e+".tooltip");return u(e)&&(r+="<div>"+(t="osm",(n=c.layers().layer(t))&&n.enabled()?_t("map_data.autohidden"):_t("map_data.osmhidden"))+"</div>"),r}).placement("top")),l=s.append("label");l.append("input").attr("type",n).attr("name",i).on("change",r),l.append("span").text(function(e){return _t(i+"."+e+".description")}),(a=a.merge(s)).classed("active",o).selectAll("input").property("checked",o).property("indeterminate",u)}function u(e){return c.features().autoHidden(e)}function a(e){return c.features().enabled(e)}function s(e){c.features().toggle(e)}return c.features().on("change.map_features",e.reRender),e}function uiSectionMapStyleOptions(r){var e=uiSection("fill-area",r).title(_t("map_data.style_options")).disclosureContent(function(e){var t=e.selectAll(".layer-fill-list").data([0]);t.enter().append("ul").attr("class","layer-list layer-fill-list").merge(t).call(i,r.map().areaFillOptions,"radio","area_fill",s,o);var n=e.selectAll(".layer-visual-diff-list").data([0]);n.enter().append("ul").attr("class","layer-list layer-visual-diff-list").merge(n).call(i,["highlight_edits"],"checkbox","visual_diff",a,function(){return r.surface().classed("highlight-edited")})}).expandedByDefault(!1);function i(e,t,n,r,i,o){var a=e.selectAll("li").data(t);a.exit().remove();var s=a.enter().append("li").call(uiTooltip().title(function(e){return _t(r+"."+e+".tooltip")}).keys(function(e){var t="wireframe"===e?_t("area_fill.wireframe.key"):null;return"highlight_edits"===e&&(t=_t("map_data.highlight_edits.key")),t?[t]:null}).placement("top")),l=s.append("label");l.append("input").attr("type",n).attr("name",r).on("change",i),l.append("span").text(function(e){return _t(r+"."+e+".description")}),(a=a.merge(s)).classed("active",o).selectAll("input").property("checked",o).property("indeterminate",!1)}function o(e){return r.map().activeAreaFill()===e}function a(){event.preventDefault(),r.map().toggleHighlightEdited()}function s(e){r.map().activeAreaFill(e)}return r.map().on("changeHighlighting.ui_style, changeAreaFill.ui_style",e.reRender),e}function uiSectionPhotoOverlays(l){var c=l.layers(),e=uiSection("photo-overlays",l).title(_t("photo_overlays.title")).disclosureContent(function(e){var t=e.selectAll(".photo-overlay-container").data([0]);t.enter().append("div").attr("class","photo-overlay-container").merge(t).call(n).call(r)}).expandedByDefault(!1);function n(e){var t=l.photos().overlayLayerIDs(),n=c.all().filter(function(e){return-1!==t.indexOf(e.id)}).filter(function(e){return e.layer.supported()});function r(e){return(t=e).layer&&t.layer.supported()&&e.layer.enabled();var t}var i=e.selectAll(".layer-list-photos").data([0]),o=(i=i.enter().append("ul").attr("class","layer-list layer-list-photos").merge(i)).selectAll(".list-item-photos").data(n);o.exit().remove();var a=o.enter().append("li").attr("class",function(e){var t="list-item-photos list-item-"+e.id;return"mapillary-signs"!==e.id&&"mapillary-map-features"!==e.id||(t+=" indented"),t}),s=a.append("label").each(function(e){var t="mapillary-signs"===e.id?"mapillary.signs.tooltip":"mapillary"===e.id?"mapillary_images.tooltip":"openstreetcam"===e.id?"openstreetcam_images.tooltip":e.id.replace(/-/g,"_")+".tooltip";select(this).call(uiTooltip().title(_t(t)).placement("top"))});s.append("input").attr("type","checkbox").on("change",function(e){var t;(function(e,t){var n=c.layer(e);n&&n.enabled(t)})(t=e.id,!function(e){var t=c.layer(e);if(t)return t.enabled();return!1}(t))}),s.append("span").text(function(e){var t=e.id;return"mapillary-signs"===t&&(t="photo_overlays.traffic_signs"),_t(t.replace(/-/g,"_")+".title")}),o.merge(a).classed("active",r).selectAll("input").property("checked",r)}function r(e){var t=l.photos().allPhotoTypes();function n(e){return l.photos().showsPhotoType(e)}var r=e.selectAll(".layer-list-photo-types").data(l.photos().shouldFilterByPhotoType()?[0]:[]);r.exit().remove();var i=(r=r.enter().append("ul").attr("class","layer-list layer-list-photo-types").merge(r)).selectAll(".list-item-photo-types").data(t);i.exit().remove();var o=i.enter().append("li").attr("class",function(e){return"list-item-photo-types list-item-"+e}),a=o.append("label").each(function(e){select(this).call(uiTooltip().title(_t("photo_overlays.photo_type."+e+".tooltip")).placement("top"))});a.append("input").attr("type","checkbox").on("change",function(e){l.photos().togglePhotoType(e)}),a.append("span").text(function(e){return _t("photo_overlays.photo_type."+e+".title")}),i.merge(o).classed("active",n).selectAll("input").property("checked",n)}return l.layers().on("change.uiSectionPhotoOverlays",e.reRender),l.photos().on("change.uiSectionPhotoOverlays",e.reRender),e}function uiPaneMapData(e){return uiPane("map-data",e).key(_t("map_data.key")).title(_t("map_data.title")).description(_t("map_data.description")).iconName("iD-icon-data").sections([uiSectionDataLayers(e),uiSectionPhotoOverlays(e),uiSectionMapStyleOptions(e),uiSectionMapFeatures(e)])}function uiSectionPrivacy(e){var t=uiSection("preferences-third-party",e).title(_t("preferences.privacy.title")).disclosureContent(function(e){var t=e.selectAll(".privacy-options-list").data([0]).enter().append("ul").attr("class","layer-list privacy-options-list").append("li").attr("class","privacy-third-party-icons-item").append("label").call(uiTooltip().title(_t("preferences.privacy.third_party_icons.tooltip")).placement("bottom"));function n(){e.selectAll(".privacy-third-party-icons-item").classed("active","true"===r).select("input").property("checked","true"===r)}t.append("input").attr("type","checkbox").on("change",function(){event.preventDefault(),corePreferences("preferences.privacy.thirdpartyicons",r="true"===r?"false":"true"),n()}),t.append("span").text(_t("preferences.privacy.third_party_icons.description")),e.selectAll(".privacy-link").data([0]).enter().append("div").attr("class","privacy-link").append("a").attr("target","_blank").call(svgIcon("#iD-icon-out-link","inline")).attr("href","https://github.com/openstreetmap/iD/blob/release/PRIVACY.md").append("span").text(_t("preferences.privacy.privacy_link")),n()}),r=corePreferences("preferences.privacy.thirdpartyicons")||"true";return t}function uiPanePreferences(e){return uiPane("preferences",e).key(_t("preferences.key")).title(_t("preferences.title")).description(_t("preferences.description")).iconName("fas-user-cog").sections([uiSectionPrivacy(e)])}function uiInit(m){var y,v=0,a={};var e,_={};_.ensureLoaded=function(){return e||(e=Promise.all([_mainLocalizer.ensureLoaded(),_mainPresetIndex.ensureLoaded()]).then(function(){m.container().empty()||function(t){t.on("click.ui",function(){0===event.button&&event.composedPath&&(event.composedPath().some(function(e){return"LABEL"===e.nodeName||"A"===e.nodeName})||event.preventDefault())});var e=utilDetect();"GestureEvent"in window&&!e.isMobileWebKit&&t.on("gesturestart.ui gesturechange.ui gestureend.ui",function(){event.preventDefault()}),"PointerEvent"in window?select(window).on("pointerdown.ui pointerup.ui",function(){var e=event.pointerType||"mouse";y!==e&&(y=e,t.attr("pointer",e))},!0):(y="mouse",t.attr("pointer","mouse")),t.attr("dir",_mainLocalizer.textDirection()),t.call(uiFullScreen(m));var n=m.map();n.redrawEnable(!1),n.on("hitMinZoom.ui",function(){_.flash.text(_t("cannot_zoom"))()}),t.append("svg").attr("id","ideditor-defs").call(svgDefs(m)),t.append("div").attr("class","sidebar").call(_.sidebar);var r=t.append("div").attr("class","main-content active");r.append("div").attr("class","top-toolbar-wrap").append("div").attr("class","top-toolbar fillD").call(uiTopToolbar(m)),r.append("div").attr("class","main-map").attr("dir","ltr").call(n),r.append("div").attr("class","spinner").call(uiSpinner(m));var i=r.append("div").attr("class","map-footer");i.append("div").attr("class","attribution-wrap").attr("dir","ltr").call(uiAttribution(m)),i.append("div").attr("class","api-status").call(uiStatus(m));var o=i.append("div").attr("class","map-footer-bar fillD");o.append("div").attr("class","flash-wrap footer-hide");var a=o.append("div").attr("class","main-footer-wrap footer-show");a.append("div").attr("class","scale-block").call(uiScale(m));var s=a.append("div").attr("class","info-block").append("ul").attr("class","map-footer-list");m.embed()||s.call(uiAccount(m)),s.append("li").attr("class","version").call(uiVersion(m));var l=s.append("li");l.append("a").attr("target","_blank").attr("href","https://github.com/openstreetmap/iD/issues").call(svgIcon("#iD-icon-bug","light")).call(uiTooltip().title(_t("report_a_bug")).placement("top")),l.append("a").attr("target","_blank").attr("href","https://github.com/openstreetmap/iD/blob/develop/CONTRIBUTING.md#translating").call(svgIcon("#iD-icon-translate","light")).call(uiTooltip().title(_t("help_translate")).placement("top")),s.append("li").attr("class","feature-warning").attr("tabindex",-1).call(uiFeatureInfo(m)),s.append("li").attr("class","issues-info").attr("tabindex",-1).call(uiIssuesInfo(m));var c=m.apiConnections();c&&1<c.length&&s.append("li").attr("class","source-switch").attr("tabindex",-1).call(uiSourceSwitch(m).keys(c)),s.append("li").attr("class","user-list").attr("tabindex",-1).call(uiContributors(m)),_.onResize(),n.redrawEnable(!0),_.hash=behaviorHash(m),_.hash(),_.hash.hadHash||n.centerZoom([0,0],2);var u=r.append("div").attr("class","over-map"),p=u.append("div").attr("class","map-controls");p.append("div").attr("class","map-control zoombuttons").call(uiZoom(m)),p.append("div").attr("class","map-control zoom-to-selection-control").call(uiZoomToSelection(m)),p.append("div").attr("class","map-control geolocate-control").call(uiGeolocate(m));var d=u.append("div").attr("class","map-panes");[uiPaneBackground(m),uiPaneMapData(m),uiPaneIssues(m),uiPanePreferences(m),uiPaneHelp(m)].forEach(function(e){p.append("div").attr("class","map-control map-pane-control "+e.id+"-control").call(e.renderToggleButton),d.call(e.renderPane)}),_.info=uiInfo(m),u.call(uiMapInMap(m)).call(_.info).call(uiNotice(m)),u.append("div").attr("class","photoviewer").classed("al",!0).classed("hide",!0).call(_.photoviewer),window.onbeforeunload=function(){return m.save()},window.onunload=function(){m.history().unlock()},select(window).on("resize.editor",_.onResize),m.keybinding().on("⌫",function(){event.preventDefault()}).on([_t("sidebar.key"),"`","²","@"],_.sidebar.toggle).on("←",g([80,0])).on("↑",g([0,80])).on("→",g([-80,0])).on("↓",g([0,-80])).on(uiCmd("⌘←"),g([n.dimensions()[0],0])).on(uiCmd("⌘↑"),g([0,n.dimensions()[1]])).on(uiCmd("⌘→"),g([-n.dimensions()[0],0])).on(uiCmd("⌘↓"),g([0,-n.dimensions()[1]])).on(uiCmd("⌘"+_t("background.key")),function(){event&&(event.stopImmediatePropagation(),event.preventDefault());var e=m.background().findSource(corePreferences("background-last-used-toggle"));e&&(corePreferences("background-last-used-toggle",m.background().baseLayerSource().id),corePreferences("background-last-used",e.id),m.background().baseLayerSource(e))}).on(_t("area_fill.wireframe.key"),function(){event.preventDefault(),event.stopPropagation(),m.map().toggleWireframe()}).on(uiCmd("⌥"+_t("area_fill.wireframe.key")),function(){event.preventDefault(),event.stopPropagation();var e,t=m.mode();t&&/^draw/.test(t.id)||(e=m.layers().layer("osm"))&&(e.enabled(!e.enabled()),e.enabled()||m.enter(modeBrowse(m)))}).on(_t("map_data.highlight_edits.key"),function(){event.preventDefault(),m.map().toggleHighlightEdited()}),m.on("enter.editor",function(e){t.classed("mode-"+e.id,!0)}).on("exit.editor",function(e){t.classed("mode-"+e.id,!1)}),m.enter(modeBrowse(m)),v++||(_.hash.startWalkthrough||m.container().call(uiSplash(m)).call(uiRestore(m)),m.container().call(uiShortcuts(m)));var f=m.connection(),h=uiLoading(m).message(_t("loading_auth")).blocking(!0);function g(e){return function(){event.shiftKey||m.container().select(".combobox").size()||(event.preventDefault(),m.map().pan(e,100))}}f&&h&&f.on("authLoading.ui",function(){m.container().call(h)}).on("authDone.ui",function(){h.close()}),v++,_.hash.startWalkthrough&&(_.hash.startWalkthrough=!1,m.container().call(uiIntro(m)))}(m.container())}).catch(function(e){return console.error(e)}))},_.restart=function(){m.keybinding().clear(),e=null,m.container().selectAll("*").remove(),_.ensureLoaded()},_.lastPointerType=function(){return y},_.flash=uiFlash(m),_.sidebar=uiSidebar(m),_.photoviewer=uiPhotoviewer(m),_.onResize=function(e){var t=m.map(),n=utilGetDimensions(m.container().select(".main-content"),!0);utilGetDimensions(m.container().select(".sidebar"),!0),void 0!==e&&(t.redrawEnable(!1),t.pan(e),t.redrawEnable(!0)),t.dimensions(n),_.photoviewer.onMapResize(),_.checkOverflow(".top-toolbar"),_.checkOverflow(".map-footer-bar");var r=document.createEvent("Event");r.initEvent("resizeWindow",!0,!0),document.dispatchEvent(r)},_.checkOverflow=function(e,t){t&&delete a[e];var n=select(e),r=n.property("scrollWidth"),i=n.property("clientWidth"),o=a[e]||r;i<r?(n.classed("narrow",!0),a[e]||(a[e]=r)):o<=r&&n.classed("narrow",!1)},_.togglePanes=function(e){var t=m.container().selectAll(".map-pane.shown"),n="ltr"===_mainLocalizer.textDirection()?"right":"left";t.classed("shown",!1),m.container().selectAll(".map-pane-control button").classed("active",!1),e?(t.style("display","none").style(n,"-500px"),m.container().selectAll("."+e.attr("pane")+"-control button").classed("active",!0),e.classed("shown",!0).style("display","block"),t.empty()?e.style("display","block").style(n,"-500px").transition().duration(200).style(n,"0px"):e.style(n,"0px")):t.style("display","block").style(n,"0px").transition().duration(200).style(n,"-500px").on("end",function(){select(this).style("display","none")})};var i=uiEditMenu(m);_.editMenu=function(){return i},_.showEditMenu=function(t,e,n){var r;_.closeEditMenu(),!n&&m.mode().operations&&(n=m.mode().operations()),n&&n.length&&m.map().editableDataEnabled()&&((r=m.surface().node()).focus&&r.focus(),n.forEach(function(e){e.point&&e.point(t)}),i.anchorLoc(t).triggerType(e).operations(n),m.map().supersurface.call(i))},_.closeEditMenu=function(){m.map().supersurface.select(".edit-menu").remove()};var t=select(null);return m.uploader().on("saveStarted.ui",function(){t=uiLoading(m).message(_t("save.uploading")).blocking(!0),m.container().call(t)}).on("saveEnded.ui",function(){t.close(),t=select(null)}),_}function coreContext(){var t=this,n=dispatch("enter","exit","change"),i=utilRebind({},n,"on"),o=new Set;i.version="2.18.1",i.privacyVersion="20200407",i.initialHashParams=window.location.hash?utilStringQs(window.location.hash):{},i.isFirstSession=!corePreferences("sawSplash")&&!corePreferences("sawPrivacyVersion"),i.changeset=null;var r=i.initialHashParams.comment,a=i.initialHashParams.source,s=i.initialHashParams.hashtags;i.defaultChangesetComment=function(e){return arguments.length?(r=e,i):r},i.defaultChangesetSource=function(e){return arguments.length?(a=e,i):a},i.defaultChangesetHashtags=function(e){return arguments.length?(s=e,i):s};var l=!0;i.setsDocumentTitle=function(e){return arguments.length?(l=e,i):l};var e,c=document.title;i.documentTitleBase=function(e){return arguments.length?(c=e,i):c},i.ui=function(){return e},i.lastPointerType=function(){return e.lastPointerType()};var u,p,d,f,h,g=utilKeybinding("context");function m(n,r){return function(e,t){return e?(400!==e.status&&401!==e.status&&403!==e.status||u&&u.logout(),void("function"==typeof r&&r(e))):u&&u.getConnectionId()!==n?void("function"==typeof r&&r({message:"Connection Switched",status:-1})):(p.merge(t.data,t.extent),void("function"==typeof r&&r(e,t)))}}i.keybinding=function(){return g},select(document).call(g),i.connection=function(){return u},i.history=function(){return p},i.validator=function(){return d},i.uploader=function(){return f},i.preauth=function(e){return u&&u.switch(e),i},i.apiConnections=function(e){return arguments.length?(h=e,i):h},i.locale=function(e){return arguments.length?(_mainLocalizer.preferredLocaleCodes(e),i):_mainLocalizer.localeCode()},i.loadTiles=function(t,n){var r=window.requestIdleCallback(function(){var e;o.delete(r),u&&i.editableDataEnabled()&&(e=u.getConnectionId(),u.loadTiles(t,m(e,n)))});o.add(r)},i.loadTileAtLoc=function(t,n){var r=window.requestIdleCallback(function(){var e;o.delete(r),u&&i.editableDataEnabled()&&(e=u.getConnectionId(),u.loadTileAtLoc(t,m(e,n)))});o.add(r)},i.loadEntity=function(e,t){var n;u&&(n=u.getConnectionId(),u.loadEntity(e,m(n,t)))},i.zoomToEntity=function(r,e){!1!==e&&i.loadEntity(r,function(e,t){var n;e||(n=t.data.find(function(e){return e.id===r}))&&N.zoomTo(n)}),N.on("drawn.zoomToEntity",function(){i.hasEntity(r)&&(N.on("drawn.zoomToEntity",null),i.on("enter.zoomToEntity",null),i.enter(modeSelect(i,[r])))}),i.on("enter.zoomToEntity",function(){"browse"!==_.id&&(N.on("drawn.zoomToEntity",null),i.on("enter.zoomToEntity",null))})};var y=16;function v(e,t){return(e=(e=null==e?"":e.toString()).trim()).normalize&&(e=e.normalize("NFC")),utilUnicodeCharsTruncated(e,t)}i.minEditableZoom=function(e){return arguments.length?(y=e,u&&u.tileZoom(e),i):y},i.maxCharsForTagKey=function(){return 255},i.maxCharsForTagValue=function(){return 255},i.maxCharsForRelationRole=function(){return 255},i.cleanTagKey=function(e){return v(e,i.maxCharsForTagKey())},i.cleanTagValue=function(e){return v(e,i.maxCharsForTagValue())};var _,b,w,x,S=!(i.cleanRelationRole=function(e){return v(e,i.maxCharsForRelationRole())});function E(t){return function(){var e=t.apply(p,arguments);return i.debouncedSave(),e}}i.inIntro=function(e){return arguments.length?(S=e,i):S},i.save=function(){if(!S&&!i.container().select(".modal").size()){var e;if(_&&"save"===_.id){if(e=!1,services.osm&&services.osm.isChangesetInflight())return void p.clearSaved()}else e=i.selectedIDs().every(function(e){var t=i.hasEntity(e);return t&&!t.isDegenerate()});return e&&p.save(),p.hasChanges()?_t("save.unsaved_changes"):void 0}},i.debouncedSave=debounce(i.save,350),i.hasEntity=function(e){return p.graph().hasEntity(e)},i.entity=function(e){return p.graph().entity(e)},i.mode=function(){return _},i.enter=function(e){_&&(_.exit(),n.call("exit",t,_)),(_=e).enter(),n.call("enter",t,_)},i.selectedIDs=function(){return _&&_.selectedIDs&&_.selectedIDs()||[]},i.activeID=function(){return _&&_.activeID&&_.activeID()},i.selectedNoteID=function(e){return arguments.length?(b=e,i):b},i.selectedErrorID=function(e){return arguments.length?(w=e,i):w},i.install=function(e){return i.surface().call(e)},i.uninstall=function(e){return i.surface().call(e.off)},i.copyGraph=function(){return x};var C,A,I,k,N,P=[];i.copyIDs=function(e){return arguments.length?(P=e,x=p.graph(),i):P},i.copyLonLat=function(e){return arguments.length?(C=e,i):C},i.background=function(){return A},i.features=function(){return I},i.hasHiddenConnections=function(e){var t=p.graph(),n=t.entity(e);return I.hasHiddenConnections(n,t)},i.photos=function(){return k},i.map=function(){return N},i.layers=function(){return N.layers()},i.surface=function(){return N.surface},i.editableDataEnabled=function(){return N.editableDataEnabled()},i.surfaceRect=function(){return N.surface.node().getBoundingClientRect()};var D={tile:!(i.editable=function(){var e=i.mode();return!(!e||"save"===e.id)&&N.editableDataEnabled()}),collision:!1,imagery:!1,target:!1,downloaded:!1};i.debugFlags=function(){return D},i.getDebug=function(e){return e&&D[e]},i.setDebug=function(e,t){return 1===arguments.length&&(t=!0),D[e]=t,n.call("change"),i};var T,O=select(null);i.container=function(e){return arguments.length?((O=e).classed("ideditor",!0),i):O},i.containerNode=function(e){return arguments.length?(i.container(select(e)),i):i.container().node()},i.embed=function(e){return arguments.length?(T=e,i):T};var M="";i.assetPath=function(e){return arguments.length?(M=e,_mainFileFetcher.assetPath(e),i):M};var L={};return i.assetMap=function(e){return arguments.length?(L=e,_mainFileFetcher.assetMap(e),i):L},i.asset=function(e){if(/^http(s)?:\/\//i.test(e))return e;var t=M+e;return L[t]||t},i.imagePath=function(e){return i.asset("img/"+e)},i.reset=i.flush=function(){return i.debouncedSave.cancel(),Array.from(o).forEach(function(e){window.cancelIdleCallback(e),o.delete(e)}),Object.values(services).forEach(function(e){e&&"function"==typeof e.reset&&e.reset(i)}),i.changeset=null,d.reset(),I.reset(),p.reset(),f.reset(),i.container().select(".inspector-wrap *").remove(),i},i.projection=geoRawMercator(),i.curtainProjection=geoRawMercator(),i.init=function(){return p=coreHistory(i),i.graph=p.graph,i.pauseChangeDispatch=p.pauseChangeDispatch,i.resumeChangeDispatch=p.resumeChangeDispatch,i.perform=E(p.perform),i.replace=E(p.replace),i.pop=E(p.pop),i.overwrite=E(p.overwrite),i.undo=E(p.undo),i.redo=E(p.redo),d=coreValidator(i),f=coreUploader(i),A=rendererBackground(i),I=rendererFeatures(i),N=rendererMap(i),k=rendererPhotos(i),e=uiInit(i),u=services.osm,function(){i.initialHashParams.presets&&_mainPresetIndex.addablePresetIDs(new Set(i.initialHashParams.presets.split(",")));i.initialHashParams.locale&&_mainLocalizer.preferredLocaleCodes(i.initialHashParams.locale);_mainLocalizer.ensureLoaded(),A.ensureLoaded(),_mainPresetIndex.ensureLoaded(),Object.values(services).forEach(function(e){e&&"function"==typeof e.init&&e.init()}),N.init(),d.init(),I.init(),k.init(),services.maprules&&i.initialHashParams.maprules&&d3_json(i.initialHashParams.maprules).then(function(e){services.maprules.init(),e.forEach(function(e){return services.maprules.addRule(e)})}).catch(function(){});i.container().empty()||e.ensureLoaded()}(),i},i}var debug=!1,d3={customEvent:customEvent,dispatch:dispatch,event:event,geoMercator:mercator,geoProjection:projection,polygonArea:d3_polygonArea,polygonCentroid:d3_polygonCentroid,select:select,selectAll:selectAll,timerFlush:timerFlush},iD=Object.freeze({__proto__:null,debug:debug,d3:d3,actionAddEntity:actionAddEntity,actionAddMember:actionAddMember,actionAddMidpoint:actionAddMidpoint,actionAddVertex:actionAddVertex,actionChangeMember:actionChangeMember,actionChangePreset:actionChangePreset,actionChangeTags:actionChangeTags,actionCircularize:actionCircularize,actionConnect:actionConnect,actionCopyEntities:actionCopyEntities,actionDeleteMember:actionDeleteMember,actionDeleteMultiple:actionDeleteMultiple,actionDeleteNode:actionDeleteNode,actionDeleteRelation:actionDeleteRelation,actionDeleteWay:actionDeleteWay,actionDiscardTags:actionDiscardTags,actionDisconnect:actionDisconnect,actionExtract:actionExtract,actionJoin:actionJoin,actionMerge:actionMerge,actionMergeNodes:actionMergeNodes,actionMergePolygon:actionMergePolygon,actionMergeRemoteChanges:actionMergeRemoteChanges,actionMove:actionMove,actionMoveMember:actionMoveMember,actionMoveNode:actionMoveNode,actionNoop:actionNoop,actionOrthogonalize:actionOrthogonalize,actionRestrictTurn:actionRestrictTurn,actionReverse:actionReverse,actionRevert:actionRevert,actionRotate:actionRotate,actionSplit:actionSplit,actionStraightenNodes:actionStraightenNodes,actionStraightenWay:actionStraightenWay,actionUnrestrictTurn:actionUnrestrictTurn,actionReflect:actionReflect,actionUpgradeTags:actionUpgradeTags,behaviorAddWay:behaviorAddWay,behaviorBreathe:behaviorBreathe,behaviorDrag:behaviorDrag,behaviorDrawWay:behaviorDrawWay,behaviorDraw:behaviorDraw,behaviorEdit:behaviorEdit,behaviorHash:behaviorHash,behaviorHover:behaviorHover,behaviorLasso:behaviorLasso,behaviorOperation:behaviorOperation,behaviorPaste:behaviorPaste,behaviorSelect:behaviorSelect,coreContext:coreContext,coreFileFetcher:coreFileFetcher,fileFetcher:_mainFileFetcher,coreDifference:coreDifference,coreGraph:coreGraph,coreHistory:coreHistory,coreLocalizer:coreLocalizer,t:_t,localizer:_mainLocalizer,prefs:corePreferences,coreTree:coreTree,coreUploader:coreUploader,coreValidator:coreValidator,geoExtent:geoExtent,geoLatToMeters:geoLatToMeters,geoLonToMeters:geoLonToMeters,geoMetersToLat:geoMetersToLat,geoMetersToLon:geoMetersToLon,geoMetersToOffset:geoMetersToOffset,geoOffsetToMeters:geoOffsetToMeters,geoScaleToZoom:geoScaleToZoom,geoSphericalClosestNode:geoSphericalClosestNode,geoSphericalDistance:geoSphericalDistance,geoZoomToScale:geoZoomToScale,geoAngle:geoAngle,geoChooseEdge:geoChooseEdge,geoEdgeEqual:geoEdgeEqual,geoGetSmallestSurroundingRectangle:geoGetSmallestSurroundingRectangle,geoHasLineIntersections:geoHasLineIntersections,geoHasSelfIntersections:geoHasSelfIntersections,geoRotate:geoRotate,geoLineIntersection:geoLineIntersection,geoPathHasIntersections:geoPathHasIntersections,geoPathIntersections:geoPathIntersections,geoPathLength:geoPathLength,geoPointInPolygon:geoPointInPolygon,geoPolygonContainsPolygon:geoPolygonContainsPolygon,geoPolygonIntersectsPolygon:geoPolygonIntersectsPolygon,geoViewportEdge:geoViewportEdge,geoRawMercator:geoRawMercator,geoVecAdd:geoVecAdd,geoVecAngle:geoVecAngle,geoVecCross:geoVecCross,geoVecDot:geoVecDot,geoVecEqual:geoVecEqual,geoVecFloor:geoVecFloor,geoVecInterp:geoVecInterp,geoVecLength:geoVecLength,geoVecLengthSquare:geoVecLengthSquare,geoVecNormalize:geoVecNormalize,geoVecNormalizedDot:geoVecNormalizedDot,geoVecProject:geoVecProject,geoVecSubtract:geoVecSubtract,geoVecScale:geoVecScale,geoOrthoNormalizedDotProduct:geoOrthoNormalizedDotProduct,geoOrthoCalcScore:geoOrthoCalcScore,geoOrthoMaxOffsetAngle:geoOrthoMaxOffsetAngle,geoOrthoCanOrthogonalize:geoOrthoCanOrthogonalize,modeAddArea:modeAddArea,modeAddLine:modeAddLine,modeAddPoint:modeAddPoint,modeAddNote:modeAddNote,modeBrowse:modeBrowse,modeDragNode:modeDragNode,modeDragNote:modeDragNote,modeDrawArea:modeDrawArea,modeDrawLine:modeDrawLine,modeMove:modeMove,modeRotate:modeRotate,modeSave:modeSave,modeSelect:modeSelect,modeSelectData:modeSelectData,modeSelectError:modeSelectError,modeSelectNote:modeSelectNote,operationCircularize:operationCircularize,operationContinue:operationContinue,operationCopy:operationCopy,operationDelete:operationDelete,operationDisconnect:operationDisconnect,operationDowngrade:operationDowngrade,operationExtract:operationExtract,operationMerge:operationMerge,operationMove:operationMove,operationOrthogonalize:operationOrthogonalize,operationPaste:operationPaste,operationReflectShort:operationReflectShort,operationReflectLong:operationReflectLong,operationReverse:operationReverse,operationRotate:operationRotate,operationSplit:operationSplit,operationStraighten:operationStraighten,osmChangeset:osmChangeset,osmEntity:osmEntity,osmNode:osmNode,osmNote:osmNote,osmRelation:osmRelation,osmWay:osmWay,QAItem:QAItem,osmIntersection:osmIntersection,osmTurn:osmTurn,osmInferRestriction:osmInferRestriction,osmLanes:osmLanes,osmOldMultipolygonOuterMemberOfRelation:osmOldMultipolygonOuterMemberOfRelation,osmIsOldMultipolygonOuterMember:osmIsOldMultipolygonOuterMember,osmOldMultipolygonOuterMember:osmOldMultipolygonOuterMember,osmJoinWays:osmJoinWays,get osmAreaKeys(){return osmAreaKeys},osmSetAreaKeys:osmSetAreaKeys,osmTagSuggestingArea:osmTagSuggestingArea,get osmPointTags(){return osmPointTags},osmSetPointTags:osmSetPointTags,get osmVertexTags(){return osmVertexTags},osmSetVertexTags:osmSetVertexTags,osmNodeGeometriesForTags:osmNodeGeometriesForTags,osmOneWayTags:osmOneWayTags,osmPavedTags:osmPavedTags,osmIsInterestingTag:osmIsInterestingTag,osmRoutableHighwayTagValues:osmRoutableHighwayTagValues,osmFlowingWaterwayTagValues:osmFlowingWaterwayTagValues,osmRailwayTrackTagValues:osmRailwayTrackTagValues,presetCategory:presetCategory,presetCollection:presetCollection,presetField:presetField,presetPreset:presetPreset,presetManager:_mainPresetIndex,presetIndex:presetIndex,rendererBackgroundSource:rendererBackgroundSource,rendererBackground:rendererBackground,rendererFeatures:rendererFeatures,rendererMap:rendererMap,rendererPhotos:rendererPhotos,rendererTileLayer:rendererTileLayer,services:services,serviceKeepRight:serviceKeepRight,serviceImproveOSM:serviceImproveOSM,serviceOsmose:serviceOsmose,serviceMapillary:serviceMapillary,serviceMapRules:serviceMapRules,serviceNominatim:serviceNominatim,serviceOpenstreetcam:serviceOpenstreetcam,serviceOsm:serviceOsm,serviceOsmWikibase:serviceOsmWikibase,serviceStreetside:serviceStreetside,serviceTaginfo:serviceTaginfo,serviceVectorTile:serviceVectorTile,serviceWikidata:serviceWikidata,serviceWikipedia:serviceWikipedia,svgAreas:svgAreas,svgData:svgData,svgDebug:svgDebug,svgDefs:svgDefs,svgKeepRight:svgKeepRight,svgIcon:svgIcon,svgGeolocate:svgGeolocate,svgLabels:svgLabels,svgLayers:svgLayers,svgLines:svgLines,svgMapillaryImages:svgMapillaryImages,svgMapillarySigns:svgMapillarySigns,svgMidpoints:svgMidpoints,svgNotes:svgNotes,svgMarkerSegments:svgMarkerSegments,svgOpenstreetcamImages:svgOpenstreetcamImages,svgOsm:svgOsm,svgPassiveVertex:svgPassiveVertex,svgPath:svgPath,svgPointTransform:svgPointTransform,svgPoints:svgPoints,svgRelationMemberTags:svgRelationMemberTags,svgSegmentWay:svgSegmentWay,svgStreetside:svgStreetside,svgTagClasses:svgTagClasses,svgTagPattern:svgTagPattern,svgTouch:svgTouch,svgTurns:svgTurns,svgVertices:svgVertices,uiFieldDefaultCheck:uiFieldCheck,uiFieldOnewayCheck:uiFieldCheck,uiFieldCheck:uiFieldCheck,uiFieldMultiCombo:uiFieldCombo,uiFieldNetworkCombo:uiFieldCombo,uiFieldSemiCombo:uiFieldCombo,uiFieldTypeCombo:uiFieldCombo,uiFieldCombo:uiFieldCombo,uiFieldUrl:uiFieldText,uiFieldIdentifier:uiFieldText,uiFieldNumber:uiFieldText,uiFieldTel:uiFieldText,uiFieldEmail:uiFieldText,uiFieldText:uiFieldText,uiFieldAccess:uiFieldAccess,uiFieldAddress:uiFieldAddress,uiFieldCycleway:uiFieldCycleway,uiFieldLanes:uiFieldLanes,uiFieldLocalized:uiFieldLocalized,uiFieldMaxspeed:uiFieldMaxspeed,uiFieldStructureRadio:uiFieldRadio,uiFieldRadio:uiFieldRadio,uiFieldRestrictions:uiFieldRestrictions,uiFieldTextarea:uiFieldTextarea,uiFieldWikidata:uiFieldWikidata,uiFieldWikipedia:uiFieldWikipedia,uiFields:uiFields,uiIntro:uiIntro,uiPanelBackground:uiPanelBackground,uiPanelHistory:uiPanelHistory,uiPanelLocation:uiPanelLocation,uiPanelMeasurement:uiPanelMeasurement,uiInfoPanels:uiInfoPanels,uiPaneBackground:uiPaneBackground,uiPaneHelp:uiPaneHelp,uiPaneIssues:uiPaneIssues,uiPaneMapData:uiPaneMapData,uiPanePreferences:uiPanePreferences,uiSectionBackgroundDisplayOptions:uiSectionBackgroundDisplayOptions,uiSectionBackgroundList:uiSectionBackgroundList,uiSectionBackgroundOffset:uiSectionBackgroundOffset,uiSectionChanges:uiSectionChanges,uiSectionDataLayers:uiSectionDataLayers,uiSectionEntityIssues:uiSectionEntityIssues,uiSectionFeatureType:uiSectionFeatureType,uiSectionMapFeatures:uiSectionMapFeatures,uiSectionMapStyleOptions:uiSectionMapStyleOptions,uiSectionOverlayList:uiSectionOverlayList,uiSectionPhotoOverlays:uiSectionPhotoOverlays,uiSectionPresetFields:uiSectionPresetFields,uiSectionPrivacy:uiSectionPrivacy,uiSectionRawMemberEditor:uiSectionRawMemberEditor,uiSectionRawMembershipEditor:uiSectionRawMembershipEditor,uiSectionRawTagEditor:uiSectionRawTagEditor,uiSectionSelectionList:uiSectionSelectionList,uiSectionValidationIssues:uiSectionValidationIssues,uiSectionValidationOptions:uiSectionValidationOptions,uiSectionValidationRules:uiSectionValidationRules,uiSectionValidationStatus:uiSectionValidationStatus,uiSettingsCustomBackground:uiSettingsCustomBackground,uiSettingsCustomData:uiSettingsCustomData,uiInit:uiInit,uiAccount:uiAccount,uiAttribution:uiAttribution,uiChangesetEditor:uiChangesetEditor,uiCmd:uiCmd,uiCombobox:uiCombobox,uiCommit:uiCommit,uiCommitWarnings:uiCommitWarnings,uiConfirm:uiConfirm,uiConflicts:uiConflicts,uiContributors:uiContributors,uiCurtain:uiCurtain,uiDataEditor:uiDataEditor,uiDataHeader:uiDataHeader,uiDisclosure:uiDisclosure,uiEditMenu:uiEditMenu,uiEntityEditor:uiEntityEditor,uiFeatureInfo:uiFeatureInfo,uiFeatureList:uiFeatureList,uiField:uiField,uiFieldHelp:uiFieldHelp,uiFlash:uiFlash,uiFormFields:uiFormFields,uiFullScreen:uiFullScreen,uiGeolocate:uiGeolocate,uiImproveOsmComments:uiImproveOsmComments,uiImproveOsmDetails:uiImproveOsmDetails,uiImproveOsmEditor:uiImproveOsmEditor,uiImproveOsmHeader:uiImproveOsmHeader,uiInfo:uiInfo,uiInspector:uiInspector,uiIssuesInfo:uiIssuesInfo,uiKeepRightDetails:uiKeepRightDetails,uiKeepRightEditor:uiKeepRightEditor,uiKeepRightHeader:uiKeepRightHeader,uiLasso:uiLasso,uiLoading:uiLoading,uiMapInMap:uiMapInMap,uiModal:uiModal,uiNotice:uiNotice,uiNoteComments:uiNoteComments,uiNoteEditor:uiNoteEditor,uiNoteHeader:uiNoteHeader,uiNoteReport:uiNoteReport,uiPopover:uiPopover,uiPresetIcon:uiPresetIcon,uiPresetList:uiPresetList,uiRestore:uiRestore,uiScale:uiScale,uiSidebar:uiSidebar,uiSourceSwitch:uiSourceSwitch,uiSpinner:uiSpinner,uiSplash:uiSplash,uiStatus:uiStatus,uiSuccess:uiSuccess,uiTagReference:uiTagReference,uiToggle:uiToggle,uiTooltip:uiTooltip,uiVersion:uiVersion,uiViewOnOSM:uiViewOnOSM,uiViewOnKeepRight:uiViewOnKeepRight,uiZoom:uiZoom,utilAesEncrypt:utilAesEncrypt,utilAesDecrypt:utilAesDecrypt,utilArrayChunk:utilArrayChunk,utilArrayDifference:utilArrayDifference,utilArrayFlatten:utilArrayFlatten,utilArrayGroupBy:utilArrayGroupBy,utilArrayIdentical:utilArrayIdentical,utilArrayIntersection:utilArrayIntersection,utilArrayUnion:utilArrayUnion,utilArrayUniq:utilArrayUniq,utilArrayUniqBy:utilArrayUniqBy,utilAsyncMap:utilAsyncMap,utilCleanTags:utilCleanTags,utilCombinedTags:utilCombinedTags,utilDeepMemberSelector:utilDeepMemberSelector,utilDetect:utilDetect,utilDisplayName:utilDisplayName,utilDisplayNameForPath:utilDisplayNameForPath,utilDisplayType:utilDisplayType,utilDisplayLabel:utilDisplayLabel,utilEntityRoot:utilEntityRoot,utilEditDistance:utilEditDistance,utilEntitySelector:utilEntitySelector,utilEntityOrMemberSelector:utilEntityOrMemberSelector,utilEntityOrDeepMemberSelector:utilEntityOrDeepMemberSelector,utilFastMouse:utilFastMouse,utilFunctor:utilFunctor,utilGetAllNodes:utilGetAllNodes,utilGetSetValue:utilGetSetValue,utilHashcode:utilHashcode,utilHighlightEntities:utilHighlightEntities,utilKeybinding:utilKeybinding,utilNoAuto:utilNoAuto,utilObjectOmit:utilObjectOmit,utilPrefixCSSProperty:utilPrefixCSSProperty,utilPrefixDOMProperty:utilPrefixDOMProperty,utilQsString:utilQsString,utilRebind:utilRebind,utilSafeClassName:utilSafeClassName,utilSetTransform:utilSetTransform,utilSessionMutex:utilSessionMutex,utilStringQs:utilStringQs,utilTagDiff:utilTagDiff,utilTagText:utilTagText,utilTiler:utilTiler,utilTotalExtent:utilTotalExtent,utilTriggerEvent:utilTriggerEvent,utilUnicodeCharsCount:utilUnicodeCharsCount,utilUnicodeCharsTruncated:utilUnicodeCharsTruncated,utilUniqueDomId:utilUniqueDomId,utilWrap:utilWrap,validationAlmostJunction:validationAlmostJunction,validationCloseNodes:validationCloseNodes,validationCrossingWays:validationCrossingWays,validationDisconnectedWay:validationDisconnectedWay,validationFormatting:validationFormatting,validationHelpRequest:validationHelpRequest,validationImpossibleOneway:validationImpossibleOneway,validationIncompatibleSource:validationIncompatibleSource,validationMaprules:validationMaprules,validationMismatchedGeometry:validationMismatchedGeometry,validationMissingRole:validationMissingRole,validationMissingTag:validationMissingTag,validationOutdatedTags:validationOutdatedTags,validationPrivateData:validationPrivateData,validationSuspiciousName:validationSuspiciousName,validationUnsquareWay:validationUnsquareWay});window.requestIdleCallback=window.requestIdleCallback||function(e){var t=Date.now();return window.requestAnimationFrame(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})})},window.cancelIdleCallback=window.cancelIdleCallback||function(e){window.cancelAnimationFrame(e)},window.iD=iD}();